{% extends "admin/change_list.html" %}
{% load i18n valkey_admin_filters %}

{% block object-tools %}{% endblock %}

{% block result_list %}
<div class="results">
    <table id="result_list">
        <thead>
            <tr>
            {% for field_name in cl.list_display %}
                <th class="column-{{ field_name }}"><div class="text"><span>{{ field_name|capfirst }}</span></div></th>
            {% endfor %}
            </tr>
        </thead>
        <tbody>
        {% for object in cl.queryset %}
            <tr class="{% cycle 'row1' 'row2' %}">
            {% for field_name in cl.list_display %}
              <td class="column-{{ field_name }}">
                {% with value=object|getattribute:field_name %}
                    {% if value %}{{ value }}{% else %}-{% endif %}
                {% endwith %}
              </td>
            {% endfor %}
            </tr>
        {% empty %}
            <tr class="messagelist"><td colspan="{{ cl.list_display|length }}">No in-progress or failed tasks found.</td></tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}