{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if is_new %}Create Agent{% else %}Edit {{ agent.name }}{% endif %} - Agent Studio</title>

    <!-- Built Vue app styles (PrimeVue + custom) -->
    <link rel="stylesheet" href="{% static 'django_agent_studio/js/style.css' %}">

    <!-- Agent Frontend Chat Widget (external dependency) -->
    <link rel="stylesheet" href="{% static 'agent-frontend/chat-widget.css' %}">
    <script src="{% static 'agent-frontend/chat-widget.js' %}"></script>

    <!-- Markdown support for chat widget -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/github-dark.min.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="{% static 'agent-frontend/chat-widget-markdown.js' %}"></script>
</head>
<body>
    <div id="studio-app"></div>

    <script>
        // Configuration passed from Django
        window.STUDIO_CONFIG = {
            agentId: {% if agent %}"{{ agent.id|escapejs }}"{% else %}null{% endif %},
            csrfToken: "{{ csrf_token }}",
            builderAgentKey: "{{ builder_agent_key|escapejs }}",
        };
    </script>

    <!-- Built Vue app -->
    <script src="{% static 'django_agent_studio/js/builder.js' %}"></script>
</body>
</html>
