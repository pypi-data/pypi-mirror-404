<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 650" font-family="Arial, sans-serif">
  <defs>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4A90A4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#357ABD;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="hotGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FF6B6B;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#EE5A5A;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="warmGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FFB347;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FFA500;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="coldGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#5DADE2;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3498DB;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
  </defs>
  
  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" font-size="22" font-weight="bold" fill="#2C3E50">Context-as-a-Service (CaaS) Architecture</text>
  
  <!-- Main Container -->
  <rect x="20" y="50" width="860" height="590" rx="12" fill="#F8F9FA" stroke="#DEE2E6" stroke-width="2" filter="url(#shadow)"/>
  
  <!-- INGESTION Section -->
  <rect x="40" y="70" width="160" height="200" rx="8" fill="white" stroke="#6C757D" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="40" y="70" width="160" height="35" rx="8" fill="url(#headerGrad)"/>
  <text x="120" y="94" text-anchor="middle" font-size="13" font-weight="bold" fill="white">ğŸ“¥ INGESTION</text>
  
  <text x="120" y="130" text-anchor="middle" font-size="11" fill="#495057">â€¢ PDF Documents</text>
  <text x="120" y="150" text-anchor="middle" font-size="11" fill="#495057">â€¢ HTML Pages</text>
  <text x="120" y="170" text-anchor="middle" font-size="11" fill="#495057">â€¢ Source Code</text>
  <text x="120" y="190" text-anchor="middle" font-size="11" fill="#495057">â€¢ Markdown Files</text>
  <text x="120" y="210" text-anchor="middle" font-size="11" fill="#495057">â€¢ YAML/JSON Config</text>
  <text x="120" y="230" text-anchor="middle" font-size="11" fill="#495057">â€¢ SQL Schemas</text>
  <text x="120" y="255" text-anchor="middle" font-size="10" fill="#6C757D" font-style="italic">Auto-detection</text>
  
  <!-- Arrow from Ingestion -->
  <path d="M200 170 L235 170" stroke="#495057" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#495057"/>
    </marker>
  </defs>
  
  <!-- PROCESSING PIPELINE Section -->
  <rect x="240" y="70" width="400" height="200" rx="8" fill="white" stroke="#6C757D" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="240" y="70" width="400" height="35" rx="8" fill="url(#headerGrad)"/>
  <text x="440" y="94" text-anchor="middle" font-size="13" font-weight="bold" fill="white">âš™ï¸ PROCESSING PIPELINE</text>
  
  <!-- Processing boxes -->
  <rect x="260" y="120" width="110" height="60" rx="6" fill="#E8F4FD" stroke="#3498DB" stroke-width="1.5"/>
  <text x="315" y="145" text-anchor="middle" font-size="10" font-weight="bold" fill="#2C3E50">Structure</text>
  <text x="315" y="160" text-anchor="middle" font-size="10" font-weight="bold" fill="#2C3E50">Parser</text>
  <text x="315" y="175" text-anchor="middle" font-size="9" fill="#6C757D">H/M/L Tiers</text>
  
  <rect x="385" y="120" width="110" height="60" rx="6" fill="#E8F4FD" stroke="#3498DB" stroke-width="1.5"/>
  <text x="440" y="145" text-anchor="middle" font-size="10" font-weight="bold" fill="#2C3E50">Metadata</text>
  <text x="440" y="160" text-anchor="middle" font-size="10" font-weight="bold" fill="#2C3E50">Injector</text>
  <text x="440" y="175" text-anchor="middle" font-size="9" fill="#6C757D">Breadcrumbs</text>
  
  <rect x="510" y="120" width="110" height="60" rx="6" fill="#E8F4FD" stroke="#3498DB" stroke-width="1.5"/>
  <text x="565" y="145" text-anchor="middle" font-size="10" font-weight="bold" fill="#2C3E50">Time</text>
  <text x="565" y="160" text-anchor="middle" font-size="10" font-weight="bold" fill="#2C3E50">Decay</text>
  <text x="565" y="175" text-anchor="middle" font-size="9" fill="#6C757D">Freshness</text>
  
  <!-- Arrows between processing -->
  <path d="M370 150 L385 150" stroke="#3498DB" stroke-width="1.5" fill="none" marker-end="url(#bluearrow)"/>
  <path d="M495 150 L510 150" stroke="#3498DB" stroke-width="1.5" fill="none" marker-end="url(#bluearrow)"/>
  <defs>
    <marker id="bluearrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#3498DB"/>
    </marker>
  </defs>
  
  <!-- Three-Tier Index -->
  <rect x="260" y="195" width="360" height="60" rx="6" fill="#FFF3E0" stroke="#F39C12" stroke-width="1.5"/>
  <text x="440" y="215" text-anchor="middle" font-size="11" font-weight="bold" fill="#2C3E50">Three-Tier Value Index</text>
  <rect x="280" y="228" width="80" height="22" rx="4" fill="#27AE60" opacity="0.9"/>
  <text x="320" y="243" text-anchor="middle" font-size="10" fill="white" font-weight="bold">HIGH</text>
  <rect x="380" y="228" width="80" height="22" rx="4" fill="#F1C40F" opacity="0.9"/>
  <text x="420" y="243" text-anchor="middle" font-size="10" fill="white" font-weight="bold">MEDIUM</text>
  <rect x="480" y="228" width="80" height="22" rx="4" fill="#95A5A6" opacity="0.9"/>
  <text x="520" y="243" text-anchor="middle" font-size="10" fill="white" font-weight="bold">LOW</text>
  
  <!-- HEURISTIC ROUTER Section -->
  <rect x="660" y="70" width="200" height="200" rx="8" fill="white" stroke="#6C757D" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="660" y="70" width="200" height="35" rx="8" fill="url(#headerGrad)"/>
  <text x="760" y="94" text-anchor="middle" font-size="13" font-weight="bold" fill="white">ğŸ¯ HEURISTIC ROUTER</text>
  
  <text x="760" y="125" text-anchor="middle" font-size="11" fill="#495057" font-weight="bold">âš¡ 0.003ms latency</text>
  <text x="760" y="150" text-anchor="middle" font-size="10" fill="#495057">â€¢ Deterministic rules</text>
  <text x="760" y="170" text-anchor="middle" font-size="10" fill="#495057">â€¢ Keyword patterns</text>
  <text x="760" y="190" text-anchor="middle" font-size="10" fill="#495057">â€¢ Intent classification</text>
  <text x="760" y="210" text-anchor="middle" font-size="10" fill="#495057">â€¢ Domain routing</text>
  <rect x="690" y="225" width="140" height="30" rx="6" fill="#D5F4E6" stroke="#27AE60" stroke-width="1"/>
  <text x="760" y="245" text-anchor="middle" font-size="10" fill="#27AE60" font-weight="bold">No ML Required</text>
  
  <!-- Arrow to Router -->
  <path d="M640 170 L660 170" stroke="#495057" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- CONTEXT TRIAD Section -->
  <rect x="40" y="290" width="540" height="180" rx="8" fill="white" stroke="#6C757D" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="40" y="290" width="540" height="35" rx="8" fill="url(#headerGrad)"/>
  <text x="310" y="314" text-anchor="middle" font-size="13" font-weight="bold" fill="white">ğŸ”º CONTEXT TRIAD</text>
  
  <!-- Hot Context -->
  <rect x="60" y="340" width="160" height="115" rx="6" fill="url(#hotGrad)" filter="url(#shadow)"/>
  <text x="140" y="365" text-anchor="middle" font-size="12" font-weight="bold" fill="white">ğŸ”¥ HOT</text>
  <text x="140" y="385" text-anchor="middle" font-size="10" fill="white">Current conversation</text>
  <text x="140" y="405" text-anchor="middle" font-size="10" fill="white">Last 10 turns</text>
  <text x="140" y="425" text-anchor="middle" font-size="10" fill="white">2,000 token budget</text>
  <text x="140" y="448" text-anchor="middle" font-size="9" fill="white" font-style="italic">Highest Priority</text>
  
  <!-- Warm Context -->
  <rect x="235" y="340" width="160" height="115" rx="6" fill="url(#warmGrad)" filter="url(#shadow)"/>
  <text x="315" y="365" text-anchor="middle" font-size="12" font-weight="bold" fill="white">ğŸŒ¡ï¸ WARM</text>
  <text x="315" y="385" text-anchor="middle" font-size="10" fill="white">User preferences</text>
  <text x="315" y="405" text-anchor="middle" font-size="10" fill="white">Recent documents</text>
  <text x="315" y="425" text-anchor="middle" font-size="10" fill="white">1,000 token budget</text>
  <text x="315" y="448" text-anchor="middle" font-size="9" fill="white" font-style="italic">Medium Priority</text>
  
  <!-- Cold Context -->
  <rect x="410" y="340" width="160" height="115" rx="6" fill="url(#coldGrad)" filter="url(#shadow)"/>
  <text x="490" y="365" text-anchor="middle" font-size="12" font-weight="bold" fill="white">â„ï¸ COLD</text>
  <text x="490" y="385" text-anchor="middle" font-size="10" fill="white">Historical archives</text>
  <text x="490" y="405" text-anchor="middle" font-size="10" fill="white">Reference docs</text>
  <text x="490" y="425" text-anchor="middle" font-size="10" fill="white">5,000 token budget</text>
  <text x="490" y="448" text-anchor="middle" font-size="9" fill="white" font-style="italic">Lowest Priority</text>
  
  <!-- Arrow down from processing to triad -->
  <path d="M440 270 L440 290" stroke="#495057" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- PRAGMATIC TRUTH Section -->
  <rect x="600" y="290" width="260" height="180" rx="8" fill="white" stroke="#6C757D" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="600" y="290" width="260" height="35" rx="8" fill="url(#headerGrad)"/>
  <text x="730" y="314" text-anchor="middle" font-size="13" font-weight="bold" fill="white">ğŸ’¡ PRAGMATIC TRUTH</text>
  
  <!-- Official vs Informal -->
  <rect x="620" y="340" width="100" height="80" rx="6" fill="#E8F8F5" stroke="#1ABC9C" stroke-width="1.5"/>
  <text x="670" y="365" text-anchor="middle" font-size="10" font-weight="bold" fill="#1ABC9C">ğŸ“„ Official</text>
  <text x="670" y="385" text-anchor="middle" font-size="9" fill="#495057">Documentation</text>
  <text x="670" y="400" text-anchor="middle" font-size="9" fill="#495057">Policies</text>
  <text x="670" y="415" text-anchor="middle" font-size="9" fill="#495057">Specifications</text>
  
  <text x="730" y="380" text-anchor="middle" font-size="20" fill="#E74C3C">âš¡</text>
  
  <rect x="740" y="340" width="100" height="80" rx="6" fill="#FDF2E9" stroke="#E67E22" stroke-width="1.5"/>
  <text x="790" y="365" text-anchor="middle" font-size="10" font-weight="bold" fill="#E67E22">ğŸ’¬ Informal</text>
  <text x="790" y="385" text-anchor="middle" font-size="9" fill="#495057">Slack threads</text>
  <text x="790" y="400" text-anchor="middle" font-size="9" fill="#495057">Incident reports</text>
  <text x="790" y="415" text-anchor="middle" font-size="9" fill="#495057">Team notes</text>
  
  <text x="730" y="445" text-anchor="middle" font-size="10" fill="#6C757D" font-style="italic">Surfaces practical knowledge</text>
  <text x="730" y="460" text-anchor="middle" font-size="10" fill="#6C757D" font-style="italic">official docs may miss</text>
  
  <!-- TRUST GATEWAY Section -->
  <rect x="40" y="490" width="820" height="130" rx="8" fill="white" stroke="#6C757D" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="40" y="490" width="820" height="35" rx="8" fill="#2C3E50"/>
  <text x="450" y="514" text-anchor="middle" font-size="13" font-weight="bold" fill="white">ğŸ” TRUST GATEWAY â€” Enterprise Security Layer</text>
  
  <!-- Security features -->
  <rect x="60" y="540" width="150" height="65" rx="6" fill="#FADBD8" stroke="#E74C3C" stroke-width="1"/>
  <text x="135" y="565" text-anchor="middle" font-size="10" font-weight="bold" fill="#C0392B">ğŸ”’ On-Premises</text>
  <text x="135" y="582" text-anchor="middle" font-size="9" fill="#495057">No external API calls</text>
  <text x="135" y="597" text-anchor="middle" font-size="9" fill="#495057">Data stays local</text>
  
  <rect x="225" y="540" width="150" height="65" rx="6" fill="#D5F4E6" stroke="#27AE60" stroke-width="1"/>
  <text x="300" y="565" text-anchor="middle" font-size="10" font-weight="bold" fill="#1E8449">âœ“ Input Validation</text>
  <text x="300" y="582" text-anchor="middle" font-size="9" fill="#495057">Injection prevention</text>
  <text x="300" y="597" text-anchor="middle" font-size="9" fill="#495057">Schema enforcement</text>
  
  <rect x="390" y="540" width="150" height="65" rx="6" fill="#EBF5FB" stroke="#3498DB" stroke-width="1"/>
  <text x="465" y="565" text-anchor="middle" font-size="10" font-weight="bold" fill="#2471A3">ğŸ“‹ Audit Logging</text>
  <text x="465" y="582" text-anchor="middle" font-size="9" fill="#495057">Full request traces</text>
  <text x="465" y="597" text-anchor="middle" font-size="9" fill="#495057">Compliance ready</text>
  
  <rect x="555" y="540" width="150" height="65" rx="6" fill="#F5EEF8" stroke="#9B59B6" stroke-width="1"/>
  <text x="630" y="565" text-anchor="middle" font-size="10" font-weight="bold" fill="#7D3C98">â±ï¸ Rate Limiting</text>
  <text x="630" y="582" text-anchor="middle" font-size="9" fill="#495057">Per-user quotas</text>
  <text x="630" y="597" text-anchor="middle" font-size="9" fill="#495057">Burst protection</text>
  
  <rect x="720" y="540" width="120" height="65" rx="6" fill="#FEF9E7" stroke="#F1C40F" stroke-width="1"/>
  <text x="780" y="565" text-anchor="middle" font-size="10" font-weight="bold" fill="#B7950B">ğŸ”‘ RBAC</text>
  <text x="780" y="582" text-anchor="middle" font-size="9" fill="#495057">Role-based access</text>
  <text x="780" y="597" text-anchor="middle" font-size="9" fill="#495057">Fine-grained perms</text>
  
  <!-- Arrow from Triad to Gateway -->
  <path d="M310 470 L310 490" stroke="#495057" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <!-- Arrow from Pragmatic to Gateway -->
  <path d="M730 470 L730 490" stroke="#495057" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
</svg>
