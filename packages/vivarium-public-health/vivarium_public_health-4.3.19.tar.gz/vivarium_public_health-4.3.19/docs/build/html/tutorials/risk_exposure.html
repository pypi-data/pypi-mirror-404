

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Non-standard Risk Exposure and Effect Models &mdash; vivarium_public_health 4.3.15.dev2+g712190e05 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=7ca62e9d"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API Reference" href="../api_reference/index.html" />
    <link rel="prev" title="Tutorials" href="index.html" />
    <link href="../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            vivarium_public_health
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Non-standard Risk Exposure and Effect Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#exposure-models">Exposure Models</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#risk-factor"><code class="docutils literal notranslate"><span class="pre">risk_factor</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#coverage-gap"><code class="docutils literal notranslate"><span class="pre">coverage_gap</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#alternative-risk-factor"><code class="docutils literal notranslate"><span class="pre">alternative_risk_factor</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#effect-models">Effect Models</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-default-case">The Default Case</a></li>
<li class="toctree-l4"><a class="reference internal" href="#specifying-a-relative-risk-value">Specifying a Relative Risk Value</a></li>
<li class="toctree-l4"><a class="reference internal" href="#specifying-a-relative-risk-distribution">Specifying a Relative Risk Distribution</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">vivarium_public_health</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Tutorials</a></li>
      <li class="breadcrumb-item active">Non-standard Risk Exposure and Effect Models</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorials/risk_exposure.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="non-standard-risk-exposure-and-effect-models">
<h1>Non-standard Risk Exposure and Effect Models<a class="headerlink" href="#non-standard-risk-exposure-and-effect-models" title="Link to this heading"></a></h1>
<p><a class="reference internal" href="../api_reference/index.html#module-vivarium_public_health" title="vivarium_public_health"><code class="xref py py-mod docutils literal notranslate"><span class="pre">vivarium_public_health</span></code></a> provides three components for modeling the impact
of some health attributes on others:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../api_reference/risks/base_risk.html#vivarium_public_health.risks.base_risk.Risk" title="vivarium_public_health.risks.base_risk.Risk"><code class="xref py py-class docutils literal notranslate"><span class="pre">Risk</span></code></a>: Model of the
underlying exposure based on a continuous or categorical distribution.</p></li>
<li><p><a class="reference internal" href="../api_reference/risks/effect.html#vivarium_public_health.risks.effect.RiskEffect" title="vivarium_public_health.risks.effect.RiskEffect"><code class="xref py py-class docutils literal notranslate"><span class="pre">RiskEffect</span></code></a>: Model of the
impact of different exposure levels on another health attribute.</p></li>
<li><p><a class="reference internal" href="../api_reference/risks/effect.html#vivarium_public_health.risks.effect.NonLogLinearRiskEffect" title="vivarium_public_health.risks.effect.NonLogLinearRiskEffect"><code class="xref py py-class docutils literal notranslate"><span class="pre">NonLogLinearRiskEffect</span></code></a>:
Special-case risk effect model where the risk factors are parameterized
by exposure levels.</p></li>
</ul>
<p>The standard model is to think of exposure to environmental, metabolic, and
behavioral risk factors and their impact on disease incidence rates. However,
we’ve found many situations to extend this model to other attributes, such as
interventions and their impacts on other risks, diseases, or mortality itself.</p>
<p>In order to support these extended models, we’ve made the
<a class="reference internal" href="../api_reference/risks/base_risk.html#vivarium_public_health.risks.base_risk.Risk" title="vivarium_public_health.risks.base_risk.Risk"><code class="xref py py-class docutils literal notranslate"><span class="pre">Risk</span></code></a>,
<a class="reference internal" href="../api_reference/risks/effect.html#vivarium_public_health.risks.effect.RiskEffect" title="vivarium_public_health.risks.effect.RiskEffect"><code class="xref py py-class docutils literal notranslate"><span class="pre">RiskEffect</span></code></a>, and
<a class="reference internal" href="../api_reference/risks/effect.html#vivarium_public_health.risks.effect.NonLogLinearRiskEffect" title="vivarium_public_health.risks.effect.NonLogLinearRiskEffect"><code class="xref py py-class docutils literal notranslate"><span class="pre">NonLogLinearRiskEffect</span></code></a> components
configurable. This tutorial explains the various configuration options you can
use with these components.</p>
<section id="exposure-models">
<h2>Exposure Models<a class="headerlink" href="#exposure-models" title="Link to this heading"></a></h2>
<p>We model exposure using the
<a class="reference internal" href="../api_reference/risks/base_risk.html#vivarium_public_health.risks.base_risk.Risk" title="vivarium_public_health.risks.base_risk.Risk"><code class="xref py py-class docutils literal notranslate"><span class="pre">Risk</span></code></a> or component.
Consider its configuration options:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;exposure&quot;</span></code>: This option represents the exposure data source. It defaults
to the value <code class="docutils literal notranslate"><span class="pre">&quot;data&quot;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;rebinned_exposure&quot;</span></code>: This option tells the component if a categorical
exposure with more than two categories should be rebinned into
two categories. It defaults to an empty list, indicating that the
underlying exposure model should be used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;category_thresholds&quot;</span></code>: This option tells the component how to split
continuous exposure models into a categorical model. It defaults to an
empty list, indicating that the underlying exposure model should be used.</p></li>
</ul>
<p>The name input when the <a class="reference internal" href="../api_reference/risks/base_risk.html#vivarium_public_health.risks.base_risk.Risk" title="vivarium_public_health.risks.base_risk.Risk"><code class="xref py py-class docutils literal notranslate"><span class="pre">Risk</span></code></a>
is created also has an impact on the behavior. Names are provided
as <code class="docutils literal notranslate"><span class="pre">&lt;type&gt;.&lt;name&gt;</span></code> where <code class="docutils literal notranslate"><span class="pre">type</span></code> refers to the type of entity being
modeled and <code class="docutils literal notranslate"><span class="pre">name</span></code> is the name of the entity.  Available types are
<code class="docutils literal notranslate"><span class="pre">&quot;risk_factor&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;coverage_gap&quot;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&quot;alternative_risk_factor&quot;</span></code>.
Some configuration options are only available for certain entity types, as
summarized in the table below.</p>
<table class="docutils align-center" id="id2">
<caption><span class="caption-text">Configuration Options</span><a class="headerlink" href="#id2" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head stub"></th>
<th class="head"><p><strong>exposure</strong></p></th>
<th class="head"><p><strong>rebinned_exposure</strong></p></th>
<th class="head"><p><strong>category_thresholds</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><th class="stub"><p><strong>risk_factor</strong></p></th>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><strong>coverage_gap</strong></p></th>
<td><p>✓</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><strong>alternative_risk_factor</strong></p></th>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>✓</p></td>
</tr>
</tbody>
</table>
<p>We’ll take each of these entity types one-by-one to see how we can configure
them.</p>
<section id="risk-factor">
<h3><code class="docutils literal notranslate"><span class="pre">risk_factor</span></code><a class="headerlink" href="#risk-factor" title="Link to this heading"></a></h3>
<p>For the <code class="docutils literal notranslate"><span class="pre">risk_factor</span></code> entity type, both the <code class="docutils literal notranslate"><span class="pre">&quot;exposure&quot;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&quot;rebinned_exposure&quot;</span></code> configuration options are available to us. In the
<a class="reference external" href="https://vivarium.readthedocs.io/en/latest/concepts/model_specification/index.html#model-specification-concept" title="(in vivarium v3.6.3.dev1+g2a048b57d)"><span class="xref std std-ref">model specification</span></a>, we can specify
the component to use its defaults with</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">components</span><span class="p">:</span>
<span class="w">    </span><span class="nt">vivarium_public_health</span><span class="p">:</span>
<span class="w">        </span><span class="nt">risks</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Risk(&quot;risk_factor.my_risk_factor&quot;)</span>
</pre></div>
</div>
<p>We declare the component but don’t declare any configuration options for it.
This will cause the risk component to look up any available exposure
information in the <a class="reference external" href="https://vivarium.readthedocs.io/en/latest/api_reference/framework/artifact/artifact.html#vivarium.framework.artifact.artifact.Artifact" title="(in vivarium v3.6.3.dev1+g2a048b57d)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Artifact</span></code></a>
and use the data as presented.</p>
<p>If we change the <code class="docutils literal notranslate"><span class="pre">&quot;exposure&quot;</span></code> option to the name of a covariate as</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">components</span><span class="p">:</span>
<span class="w">    </span><span class="nt">vivarium_public_health</span><span class="p">:</span>
<span class="w">        </span><span class="nt">risks</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Risk(&quot;risk_factor.my_risk_factor&quot;)</span>

<span class="nt">configuration</span><span class="p">:</span>
<span class="w">    </span><span class="nt">my_risk_factor</span><span class="p">:</span>
<span class="w">        </span><span class="nt">exposure</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">covariate.my_covariate</span>
</pre></div>
</div>
<p>the component will look for the covariate estimate in the
<a class="reference external" href="https://vivarium.readthedocs.io/en/latest/api_reference/framework/artifact/artifact.html#vivarium.framework.artifact.artifact.Artifact" title="(in vivarium v3.6.3.dev1+g2a048b57d)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Artifact</span></code></a> rather than for
the risk factor exposure. Only covariates with a proportion estimate can be
substituted for risk exposure. The covariate proportion will be used as the
proportion of people exposed to the risk factor.</p>
<p>Finally, we can specify an integer or float value to the <code class="docutils literal notranslate"><span class="pre">&quot;exposure&quot;</span></code> option
to directly set the proportion of people exposed.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">components</span><span class="p">:</span>
<span class="w">    </span><span class="nt">vivarium_public_health</span><span class="p">:</span>
<span class="w">        </span><span class="nt">risks</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Risk(&quot;risk_factor.my_risk_factor&quot;)</span>

<span class="nt">configuration</span><span class="p">:</span>
<span class="w">    </span><span class="nt">my_risk_factor</span><span class="p">:</span>
<span class="w">        </span><span class="nt">exposure</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.6</span>
</pre></div>
</div>
<p>If the underlying exposure distribution is polytomous (that is, it has
multiple categories of exposure), we can use the <code class="docutils literal notranslate"><span class="pre">&quot;rebinned_exposure&quot;</span></code> option
to separate those categories into an “exposed” and “unexposed” category. The
set of categories to rebin into the “exposed” group should be specified as
a list of strings to the <code class="docutils literal notranslate"><span class="pre">&quot;rebinned_exposure&quot;</span></code> option.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">components</span><span class="p">:</span>
<span class="w">    </span><span class="nt">vivarium_public_health</span><span class="p">:</span>
<span class="w">        </span><span class="nt">risks</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Risk(&quot;risk_factor.my_polytomous_risk_factor&quot;)</span>

<span class="nt">configuration</span><span class="p">:</span>
<span class="w">    </span><span class="nt">my_polytomous_risk_factor</span><span class="p">:</span>
<span class="w">        </span><span class="nt">rebinned_exposure</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;cat1&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;cat2&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;cat3&quot;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>This will reformat the exposure data to consider anyone in “cat1”, “cat2”, or
“cat3” as exposed, and all other exposure categories as unexposed.</p>
<p>Using the <code class="docutils literal notranslate"><span class="pre">&quot;rebinned_exposure&quot;</span></code> option will cause the relative risk
for all <a class="reference internal" href="../api_reference/risks/effect.html#vivarium_public_health.risks.effect.RiskEffect" title="vivarium_public_health.risks.effect.RiskEffect"><code class="xref py py-class docutils literal notranslate"><span class="pre">RiskEffect</span></code></a>
components to also be rebinned.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Exposure data is formatted with the typical demographic columns for age,
sex, location, and year and a value column.  If the exposure data is
categorical, it also has a “parameter” column with string values of
“cat1”, “cat2”, etc.  The categories are presumed to be sorted by severity
with “cat1” being the worst.</p>
</div>
</section>
<section id="coverage-gap">
<h3><code class="docutils literal notranslate"><span class="pre">coverage_gap</span></code><a class="headerlink" href="#coverage-gap" title="Link to this heading"></a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">coverage_gap</span></code> entity type is a way of phrasing the lack of coverage of
an intervention as a risk factor.  The only think to keep in mind when
using a coverage gap is what exposure means (1 - intervention coverage).
Otherwise, the configuration options and caveats are the same as
the <code class="docutils literal notranslate"><span class="pre">risk_factor</span></code> entity type.</p>
<p>In practice, coverage gaps have a dichotomous distribution, so the
<code class="docutils literal notranslate"><span class="pre">&quot;rebinned_exposure&quot;</span></code> option does not come into play.</p>
</section>
<section id="alternative-risk-factor">
<h3><code class="docutils literal notranslate"><span class="pre">alternative_risk_factor</span></code><a class="headerlink" href="#alternative-risk-factor" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">alternative_risk_factor</span></code> is an entity type that indicates we have
both continuous and categorical representations of the exposure. They are used
when an intervention acts on a continuous exposure representation, but the
effects of the exposure are specified in terms of the categorical
exposure representation.</p>
<p>The only relevant configuration option is the <code class="docutils literal notranslate"><span class="pre">&quot;category_thresholds&quot;</span></code>
option, which <strong>must</strong> be specified. All other keys must be left at their
default values.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">components</span><span class="p">:</span>
<span class="w">    </span><span class="nt">vivarium_public_health</span><span class="p">:</span>
<span class="w">        </span><span class="nt">risks</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Risk(&quot;alternative_risk_factor.my_risk_factor&quot;)</span>

<span class="nt">configuration</span><span class="p">:</span>
<span class="w">    </span><span class="nt">my_risk_factor</span><span class="p">:</span>
<span class="w">        </span><span class="nt">category_thresholds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">7</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">8</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">9</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>The above configuration would correspond to a risk with a continuous exposure.
Individuals in the simulation would be assigned some actual value in this
distribution (e.g. 7.32 or 9.85).  When calculating effects, individuals
would be assigned a category based on which group they sit in, as defined by
the thresholds in the configuration.  The thresholds here correspond to the
groups <code class="docutils literal notranslate"><span class="pre">less</span> <span class="pre">than</span> <span class="pre">7</span></code>, <code class="docutils literal notranslate"><span class="pre">between</span> <span class="pre">7</span> <span class="pre">and</span> <span class="pre">8</span></code>, <code class="docutils literal notranslate"><span class="pre">between</span> <span class="pre">8</span> <span class="pre">and</span> <span class="pre">9</span></code>, and
<code class="docutils literal notranslate"><span class="pre">more</span> <span class="pre">than</span> <span class="pre">9</span></code>.  For use in determining effect sizes, these groups will be
labelled <code class="docutils literal notranslate"><span class="pre">cat1</span></code>, <code class="docutils literal notranslate"><span class="pre">cat2</span></code>, <code class="docutils literal notranslate"><span class="pre">cat3</span></code>, and <code class="docutils literal notranslate"><span class="pre">cat4</span></code> respectively.</p>
</section>
</section>
<section id="effect-models">
<h2>Effect Models<a class="headerlink" href="#effect-models" title="Link to this heading"></a></h2>
<p>Non-standard effect models can <strong>only</strong> be used with dichotomous exposure
models (models where someone is either exposed or not exposed). The available
configuration options all correspond to generating a relative risk for
the exposed population from a set of parameters.</p>
<p>We model exposure effects using the
<a class="reference internal" href="../api_reference/risks/effect.html#vivarium_public_health.risks.effect.RiskEffect" title="vivarium_public_health.risks.effect.RiskEffect"><code class="xref py py-class docutils literal notranslate"><span class="pre">RiskEffect</span></code></a> or
<a class="reference internal" href="../api_reference/risks/effect.html#vivarium_public_health.risks.effect.NonLogLinearRiskEffect" title="vivarium_public_health.risks.effect.NonLogLinearRiskEffect"><code class="xref py py-class docutils literal notranslate"><span class="pre">NonLogLinearRiskEffect</span></code></a> components.</p>
<p>For this tutorial, we’ll focus on the <code class="docutils literal notranslate"><span class="pre">RiskEffect</span></code> component. The
<code class="docutils literal notranslate"><span class="pre">NonLogLinearRiskEffect</span></code> component is a special case of the <code class="docutils literal notranslate"><span class="pre">RiskEffect</span></code>
component where the risk factors are parameterized by exposure levels.</p>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>Add details on how to use the <code class="docutils literal notranslate"><span class="pre">NonLogLinearRiskEffect</span></code> component.</p>
</div>
<p>Let’s look at its configuration options:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;relative_risk&quot;</span></code>: Option for specifying a relative risk value directly.
If provided, no other configuration options may be specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;mean&quot;</span></code>: Option for specifying that the relative risk should be drawn
from a normal distribution with this mean.  Must also provide a value for
<code class="docutils literal notranslate"><span class="pre">&quot;se&quot;</span></code>. No other options may be specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;se&quot;</span></code>: Option for specifying that the relative risk should be drawn
from a normal distribution with this standard error.  Must also provide a
value for <code class="docutils literal notranslate"><span class="pre">&quot;mean&quot;</span></code>. No other options may be specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;log_mean&quot;</span></code>: Option for specifying that the relative risk should be drawn
from a lognormal distribution with this mean.  Must also provide a value for
<code class="docutils literal notranslate"><span class="pre">&quot;log_se&quot;</span></code> and may provide a value for <code class="docutils literal notranslate"><span class="pre">&quot;tau_squared&quot;</span></code>.  No other
options may be specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;log_se&quot;</span></code>: Option for specifying that the relative risk should be drawn
from a lognormal distribution with this standard error.  Must also provide
a value for <code class="docutils literal notranslate"><span class="pre">&quot;log_mean&quot;</span></code> and may provide a value for <code class="docutils literal notranslate"><span class="pre">&quot;tau_squared&quot;</span></code>.
No other options may be specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;tau_squared&quot;</span></code>: Option for specifying a parameter representing
inter-study heterogeneity in a lognormal distribution. Can optionally be
supplied when specifying a relative risk to be drawn with a lognormal
distribution with <code class="docutils literal notranslate"><span class="pre">&quot;log_mean&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;log_se&quot;</span></code>.</p></li>
</ul>
<p>When a <a class="reference internal" href="../api_reference/risks/effect.html#vivarium_public_health.risks.effect.RiskEffect" title="vivarium_public_health.risks.effect.RiskEffect"><code class="xref py py-class docutils literal notranslate"><span class="pre">RiskEffect</span></code></a> is created, it
takes two arguments: the name of the exposure model and the name of the
target attribute that should be altered. The exposure model should be named
the same as the argument to <a class="reference internal" href="../api_reference/risks/base_risk.html#vivarium_public_health.risks.base_risk.Risk" title="vivarium_public_health.risks.base_risk.Risk"><code class="xref py py-class docutils literal notranslate"><span class="pre">Risk</span></code></a>
and the target attribute should be in the form <code class="docutils literal notranslate"><span class="pre">&lt;type&gt;.&lt;name&gt;.&lt;measure&gt;</span></code>.
<code class="docutils literal notranslate"><span class="pre">type</span></code> and <code class="docutils literal notranslate"><span class="pre">name</span></code> specify the entity the effect targets and <code class="docutils literal notranslate"><span class="pre">measure</span></code>
tells the <a class="reference internal" href="../api_reference/risks/effect.html#vivarium_public_health.risks.effect.RiskEffect" title="vivarium_public_health.risks.effect.RiskEffect"><code class="xref py py-class docutils literal notranslate"><span class="pre">RiskEffect</span></code></a> which specific
attribute of the entity to alter. Common targets are exposure for other
<a class="reference internal" href="../api_reference/risks/base_risk.html#vivarium_public_health.risks.base_risk.Risk" title="vivarium_public_health.risks.base_risk.Risk"><code class="xref py py-class docutils literal notranslate"><span class="pre">Risk</span></code></a> entities and incidence rates for
diseases.</p>
<section id="the-default-case">
<h3>The Default Case<a class="headerlink" href="#the-default-case" title="Link to this heading"></a></h3>
<p>If we specify no configuration options in the model specification, we end
up with something like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">components</span><span class="p">:</span>
<span class="w">    </span><span class="nt">vivarium_public_health</span><span class="p">:</span>
<span class="w">        </span><span class="nt">disease</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SIS(&#39;my_infectious_disease&#39;)</span>
<span class="w">        </span><span class="nt">risks</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Risk(&#39;risk_factor.my_risk_factor&#39;)</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RiskEffect(&#39;risk_factor.my_risk_factor&#39;, &#39;cause.my_infectious_disease.incidence_rate&#39;)</span>
</pre></div>
</div>
<p>In this situation, the <a class="reference internal" href="../api_reference/index.html#module-vivarium_public_health" title="vivarium_public_health"><code class="xref py py-mod docutils literal notranslate"><span class="pre">vivarium_public_health</span></code></a> components will assume
all parameters will come from data.  The
<a class="reference internal" href="../api_reference/disease/models.html#vivarium_public_health.disease.models.SIS" title="vivarium_public_health.disease.models.SIS"><code class="xref py py-class docutils literal notranslate"><span class="pre">SIS</span></code></a> component will load measures
like prevalence, incidence rate, excess mortality rate, and others to inform
the initialization and dynamics of the model.  The
<a class="reference internal" href="../api_reference/risks/base_risk.html#vivarium_public_health.risks.base_risk.Risk" title="vivarium_public_health.risks.base_risk.Risk"><code class="xref py py-class docutils literal notranslate"><span class="pre">Risk</span></code></a> will load exposure information.
The <a class="reference internal" href="../api_reference/risks/effect.html#vivarium_public_health.risks.effect.RiskEffect" title="vivarium_public_health.risks.effect.RiskEffect"><code class="xref py py-class docutils literal notranslate"><span class="pre">RiskEffect</span></code></a> will load the
population attributable fraction and the relative risk associated with the
risk-cause pair, and link the disease and risk model with this data.</p>
<p>The configuration block for <a class="reference internal" href="../api_reference/risks/effect.html#vivarium_public_health.risks.effect.RiskEffect" title="vivarium_public_health.risks.effect.RiskEffect"><code class="xref py py-class docutils literal notranslate"><span class="pre">RiskEffect</span></code></a>
is specified as</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">configuration</span><span class="p">:</span>
<span class="w">    </span><span class="nt">effect_of_&lt;exposure_entity_name&gt;_on_&lt;target_entity_name&gt;</span><span class="p">:</span>
<span class="w">        </span><span class="nt">&lt;target_entity_measure&gt;</span><span class="p">:</span>
<span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">...options...</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;exposure_entity_name&gt;</span></code> is the <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code> provided to the associated
<a class="reference internal" href="../api_reference/risks/base_risk.html#vivarium_public_health.risks.base_risk.Risk" title="vivarium_public_health.risks.base_risk.Risk"><code class="xref py py-class docutils literal notranslate"><span class="pre">Risk</span></code></a> component and the
<code class="docutils literal notranslate"><span class="pre">&lt;target_entity_name&gt;</span></code> is the name provided to the component used in
the target, usually another <a class="reference internal" href="../api_reference/risks/base_risk.html#vivarium_public_health.risks.base_risk.Risk" title="vivarium_public_health.risks.base_risk.Risk"><code class="xref py py-class docutils literal notranslate"><span class="pre">Risk</span></code></a> or
a disease model.</p>
</section>
<section id="specifying-a-relative-risk-value">
<h3>Specifying a Relative Risk Value<a class="headerlink" href="#specifying-a-relative-risk-value" title="Link to this heading"></a></h3>
<p>If you’re in a situation where the size of the effect (the relative risk)
between an exposure model and its target outcome are unknown, one option
is to specify a single value for the relative risk.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">components</span><span class="p">:</span>
<span class="w">    </span><span class="nt">vivarium_public_health</span><span class="p">:</span>
<span class="w">        </span><span class="nt">disease</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SIS(&#39;my_infectious_disease&#39;)</span>
<span class="w">        </span><span class="nt">risks</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Risk(&#39;risk_factor.my_risk_factor&#39;)</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RiskEffect(&#39;risk_factor.my_risk_factor&#39;, &#39;cause.my_infectious_disease.incidence_rate&#39;)</span>

<span class="nt">configuration</span><span class="p">:</span>
<span class="w">    </span><span class="nt">effect_of_my_risk_factor_on_my_infectious_disease</span><span class="p">:</span>
<span class="w">        </span><span class="nt">incidence_rate</span><span class="p">:</span>
<span class="w">            </span><span class="nt">relative_risk</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
</pre></div>
</div>
<p>For this to work, the exposure modeled by the
<a class="reference internal" href="../api_reference/risks/base_risk.html#vivarium_public_health.risks.base_risk.Risk" title="vivarium_public_health.risks.base_risk.Risk"><code class="xref py py-class docutils literal notranslate"><span class="pre">Risk</span></code></a> must be a dichotomous exposure
(only exposed or not exposed).  The <code class="docutils literal notranslate"><span class="pre">&quot;relative_risk&quot;</span></code> option provided will
be assigned and used for the exposed group.  Specifying a relative risk
this way will cause the population attributable fraction to be calculated
using the provided exposure model, and so it does not need to be provided.</p>
</section>
<section id="specifying-a-relative-risk-distribution">
<h3>Specifying a Relative Risk Distribution<a class="headerlink" href="#specifying-a-relative-risk-distribution" title="Link to this heading"></a></h3>
<p>If you have some idea of the uncertainty in the relative risk, you can
specify distribution parameters and have the relative risk value drawn
from that distribution for each simulation.  There are two options for
distributions to use.</p>
<p>The first is to sample from a normal distribution.  You can do so by
providing the following configuration options:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">components</span><span class="p">:</span>
<span class="w">    </span><span class="nt">vivarium_public_health</span><span class="p">:</span>
<span class="w">        </span><span class="nt">disease</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SIS(&#39;my_infectious_disease&#39;)</span>
<span class="w">        </span><span class="nt">risks</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Risk(&#39;risk_factor.my_risk_factor&#39;)</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RiskEffect(&#39;risk_factor.my_risk_factor&#39;, &#39;cause.my_infectious_disease.incidence_rate&#39;)</span>

<span class="nt">configuration</span><span class="p">:</span>
<span class="w">    </span><span class="nt">effect_of_my_risk_factor_on_my_infectious_disease</span><span class="p">:</span>
<span class="w">        </span><span class="nt">incidence_rate</span><span class="p">:</span>
<span class="w">            </span><span class="nt">mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">            </span><span class="nt">se</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</pre></div>
</div>
<p>This will sample a new relative risk from a normal distribution with mean
ten and standard error three in each simulation.  The distribution is clipped
so that values below one are set at one.  Both the <code class="docutils literal notranslate"><span class="pre">&quot;mean&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;se&quot;</span></code>
options must be provided.  The <code class="docutils literal notranslate"><span class="pre">&quot;mean&quot;</span></code> should be greater than one and the
<code class="docutils literal notranslate"><span class="pre">&quot;se&quot;</span></code> greater than zero.</p>
<p>A second option is to sample the relative risk from a lognormal distribution.
This can be done with the following configuration options:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">components</span><span class="p">:</span>
<span class="w">    </span><span class="nt">vivarium_public_health</span><span class="p">:</span>
<span class="w">        </span><span class="nt">disease</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SIS(&#39;my_infectious_disease&#39;)</span>
<span class="w">        </span><span class="nt">risks</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Risk(&#39;risk_factor.my_risk_factor&#39;)</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RiskEffect(&#39;risk_factor.my_risk_factor&#39;, &#39;cause.my_infectious_disease.incidence_rate&#39;)</span>

<span class="nt">configuration</span><span class="p">:</span>
<span class="w">    </span><span class="nt">effect_of_my_risk_factor_on_my_infectious_disease</span><span class="p">:</span>
<span class="w">        </span><span class="nt">incidence_rate</span><span class="p">:</span>
<span class="w">            </span><span class="nt">log_mean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">            </span><span class="nt">log_se</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">            </span><span class="nt">tau_squared</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
</pre></div>
</div>
<p>This will produce a relative risk value:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\textrm{RR} &amp;= \exp(\mu + \sigma X + Y) \\
X &amp;\sim N(0, 1)\\
Y &amp;\sim N(0, \tau^2)\end{split}\]</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;tau_squared&quot;</span></code> parameter is an adjustment for inter-study heterogeneity
and is not required to use the lognormal distribution.</p>
<p>Like the normal distribution, values below one will be clipped and set to one.
All three parameters, the <code class="docutils literal notranslate"><span class="pre">&quot;log_mean&quot;</span></code>, the <code class="docutils literal notranslate"><span class="pre">&quot;log_sd&quot;</span></code> and the
<code class="docutils literal notranslate"><span class="pre">&quot;tau_squared&quot;</span></code>, should be greater than zero if provided.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The parameterized <a class="reference internal" href="../api_reference/risks/effect.html#vivarium_public_health.risks.effect.RiskEffect" title="vivarium_public_health.risks.effect.RiskEffect"><code class="xref py py-class docutils literal notranslate"><span class="pre">RiskEffect</span></code></a> can
be used with a parameterized version of the
<a class="reference internal" href="../api_reference/risks/base_risk.html#vivarium_public_health.risks.base_risk.Risk" title="vivarium_public_health.risks.base_risk.Risk"><code class="xref py py-class docutils literal notranslate"><span class="pre">vivarium_public_health.risks.base_risk.Risk</span></code></a>.  The only requirement
for use is that exposure model be dichotomous.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Tutorials" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../api_reference/index.html" class="btn btn-neutral float-right" title="API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The vivarium developers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>