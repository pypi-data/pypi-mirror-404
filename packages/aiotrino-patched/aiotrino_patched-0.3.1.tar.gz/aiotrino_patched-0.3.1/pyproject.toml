[project]
name = "aiotrino-patched"
version = "0.3.1"
description = "Asyncio client for the Trino distributed SQL Engine"
readme = "README.md"
license = "Apache-2.0"
requires-python = ">=3.12,<4"
authors = [
  { name = "Michiel van der Lee & Trino Team", email = "jmt.vanderlee@gmail.com" },
]
keywords = ["trino", "asyncio", "database", "sql"]
classifiers = [
  "Development Status :: 4 - Beta",
  "Intended Audience :: Developers",
  "License :: OSI Approved :: Apache Software License",
  "Operating System :: MacOS :: MacOS X",
  "Operating System :: POSIX",
  "Operating System :: Microsoft :: Windows",
  "Programming Language :: Python",
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
  "Programming Language :: Python :: 3.14",
  "Programming Language :: Python :: Implementation :: CPython",
  "Programming Language :: Python :: Implementation :: PyPy",
  "Topic :: Database :: Front-Ends",
]
dependencies = [
  "aiohttp",
  "aioitertools",
  "lz4",
  "python-dateutil",
  "pytz",
  "tzdata",
  "tzlocal",
  "zstandard",
]

[project.urls]
Homepage = "https://github.com/gledi-ai/aiotrino"
Repository = "https://github.com/gledi-ai/aiotrino"
Documentation = "https://github.com/gledi-ai/aiotrino"

[project.optional-dependencies]
sqlalchemy = ["sqlalchemy>=2.0"]
all = ["sqlalchemy>=2.0"]

[project.entry-points."sqlalchemy.dialects"]
aiotrino = "aiotrino.sqlalchemy.dialect:AIOTrinoDialect"

[dependency-groups]
dev = [
  "aioresponses",
  "boto3",
  # httpretty >= 1.1 duplicates requests in `httpretty.latest_requests`
  # https://github.com/gabrielfalcao/HTTPretty/issues/425
  "httpretty<1.1",
  # httppretty compatible but with asyncio support
  "mocket[speedups]",
  "mock",
  "pytest",
  "pytest-aiohttp",
  "pytest-asyncio",
  "pytz",
  "ruff",
  "testcontainers",
]

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.build.targets.wheel]
packages = ["aiotrino"]

[tool.hatch.build.targets.sdist]
include = ["/aiotrino", "/README.md", "/LICENSE"]

[tool.uv]
default-groups = ["dev"]

[tool.ruff]
line-length = 120

[tool.ruff.lint]
select = [
  "E", # pycodestyle errors
  "W", # pycodestyle warnings
  "F", # pyflakes
  "I", # isort
  "C", # flake8-comprehensions
  "B", # flake8-bugbear
]
ignore = [
  "B008", # do not perform function calls in argument defaults
  "B028", # No explicit stacklevel argument found.
  "C901", # too complex
]

[tool.ruff.lint.per-file-ignores]
"__init__.py" = ["F401"]
"migrations/env.py" = ["E402"]
"noxfile.py" = ["F401"]

[tool.ruff.lint.isort]
lines-after-imports = 2

[tool.pytest.ini_options]
# https://pytest-asyncio.readthedocs.io/en/latest/reference/configuration.html
asyncio_mode = "auto"
asyncio_default_fixture_loop_scope = "session"
