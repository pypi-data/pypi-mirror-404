import{w as Qr,p as Mt,b as dt,a8 as ie,a9 as mt,A as dr,c as e,e as i,a7 as Ot,B as l,F as a,h as m,k as r,E as s,ai as $,a2 as et,j as h,D as or,O as Qe,R as Ye,ak as Xe,l as It,af as nr,a6 as Ze,v as oa,as as Cr,f as $e,I as _r,aI as Qt,ae as la,S as Pr,ap as Xr,W as na,L as Pt,y as Yt,H as ir,av as ia,an as da,aA as va,a as zr,aJ as sr,aH as ua,aj as ca,X as _a,a0 as fa,N as ma,J as pa}from"./svelte-B9Ye91X-.js";import{f as ha,E as ga,S as $a,R as ya,P as ba}from"./svelte-datatables-net-PrmrsOQE.js";import{D as At,Q as Jt,R as ge,a as lr,C as Lr,S as xa}from"./@edraj-D-9hi9vU.js";import{P as Or}from"./Prism-DbpuKlij.js";import{p as jr,g as Yr}from"./@roxi-Bw7qXphd.js";import{j as tr,M as wa,r as ka,i as Pa}from"./compare-C3mJz3fJ.js";import{C as Bt,L as A,I as me,t as hr,u as kt,k as $t,v as mr,w as Zt,l as Dr,n as Sr,B as be,S as fr,o as Zr,x as Sa,y as Ar,M as vr,g as Ra,c as Ta,z as qr,h as Mr,E as Ca,G as Ir,J as Oa,K as ja,N as Vr}from"./flowbite-svelte-Caf58qKG.js";import{s as Nr}from"./spaces-5QYuv6aM.js";import{a as ea,b as ta,c as Da,f as Ea}from"./dmart_services-BTWOtb9Z.js";import{s as zt,L as Lt}from"./toast-nP_bUL2P.js";import"./@zerodevx-z992vLW9.js";import{G as gr,A as Kt,y as rr,l as Fa,I as za,J as La,K as Aa,M as qa,k as Ma,N as Ia,Q as Va,V as Ba,W as Ua}from"./flowbite-svelte-icons-DXemwXNH.js";import{I as Vt,r as Ha,c as Er,b as ra,a as ar,s as Ja,d as Ga}from"./global-CF7LWRdS.js";import{J as br,M as xr}from"./svelte-jsoneditor-BdDDhQGI.js";import"./@typewriter-cCzskkIv.js";import"./fast-diff-C-IidNf4.js";import{f as Nt,h as er,E as Wa}from"./typewriter-editor-Do-KAaNp.js";import"./easy-signal-BiPFIK3O.js";import{m as wr}from"./marked-DKjyhwJX.js";import{m as Ka}from"./marked-mangle-CDMeiHC6.js";import{g as Qa}from"./marked-gfm-heading-id-U5zO829x.js";import{d as Xa}from"./downloadFile-D08i0YDh.js";import{u as Ya}from"./user-BQpJ6b6h.js";import{w as Br}from"./index-BJ8k452_.js";import{b as Ur}from"./svelte-i18n-CZ4cFDVx.js";const Za={path:"shortname",title:"shortname",type:"string",width:"20%"},Na={path:"resource_type",title:"Resource type",type:"string",width:"20%"},es={path:"attributes.payload.schema_shortname",title:"Schema shortname",type:"string",width:"20%"},ts={path:"attributes.created_at",title:"Created At",type:"string",width:"20%"},rs={path:"attributes.updated_at",title:"Updated At",type:"string",width:"20%"},as={shortname:Za,resource_type:Na,owner_shortname:es,created_at:ts,updated_at:rs},$r=Qr("");function ss(g){const o={};return Object.keys(g).forEach(t=>{o[g[t].key]={path:g[t].key,title:g[t].name,type:"string",width:`${(100/(g.length||1)).toString()}%`}}),o}const Xt=Qr([]);function yr(g){if(g.type==="object"&&g.properties){const o={};return Object.keys(g.properties).forEach(t=>{const j=g.properties[t];j.type==="object"?(o[t]=yr(j),o[t]===void 0&&(o[t]={})):j.type==="array"&&j.items?(o[t]=[yr(j.items)],o[t][0]===void 0&&(o[t]=[])):j.type==="string"?o[t]="":j.type==="number"||j.type==="integer"?o[t]=0:j.type==="boolean"?o[t]=!0:o[t]=null}),o}}function os(g){const o=document.getElementById(g);o&&o.scrollIntoView({behavior:"smooth"})}var ls=l('<span class="text-red-500 text-lg" style="vertical-align: center">*</span> Password',1),ns=l('<div role="status" class="max-w-sm animate-pulse"><div class="h-3 bg-gray-200 rounded-full dark:bg-gray-700 mx-2 my-2.5"></div></div>'),is=l('<div class="px-4 py-2 hover:bg-gray-100 cursor-pointer flex items-center justify-between"><span> </span> <!></div>'),ds=l('<div class="absolute w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-60 overflow-auto"></div>'),vs=l('<div class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full flex items-center"><span> </span> <button class="ml-2 text-blue-600 hover:text-blue-800" type="button">×</button></div>'),us=l('<div class="mt-4"><!> <div class="border rounded-lg p-4 bg-gray-50"><div class="flex flex-wrap gap-2"></div></div></div>'),cs=l('<div class="mt-4 p-4 border border-dashed rounded-lg text-center text-gray-500">No roles added</div>'),_s=l('<div><div class="relative mb-2"><div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><!></div> <!></div> <div class="flex space-x-2"><div class="relative flex-grow"><!></div></div></div> <!>',1),fs=l('<div role="status" class="max-w-sm animate-pulse"><div class="h-3 bg-gray-200 rounded-full dark:bg-gray-700 mx-2 my-2.5"></div></div>'),ms=l('<div class="px-4 py-2 hover:bg-gray-100 cursor-pointer flex items-center justify-between"><span> </span> <!></div>'),ps=l('<div class="absolute w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-60 overflow-auto"></div>'),hs=l('<div class="bg-gray-100 text-gray-800 px-3 py-1 rounded-full flex items-center"><span> </span> <button class="ml-2 text-blue-600 hover:text-blue-800" type="button">×</button></div>'),gs=l('<div class="mt-4"><!> <div class="border rounded-lg p-4 bg-gray-50"><div class="flex flex-wrap gap-2"></div></div></div>'),$s=l('<div class="mt-4 p-4 border border-dashed rounded-lg text-center text-gray-500">No groups added</div>'),ys=l('<div><div class="relative mb-2"><div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><!></div> <!></div> <div class="flex space-x-2"><div class="relative flex-grow"><!></div></div></div> <!>',1),bs=l('<div class="p-4 space-y-4"><div class="mb-4"><!> <!></div> <div class="mb-4"><!> <!></div></div>'),xs=l('<div class="p-4 space-y-4"><div class="mb-4"><!> <!></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><!> <!></div> <div><!> <!></div></div> <div><!> <!></div></div>'),ws=l("<!> <!>",1),ks=l('<h2 class="text-2xl font-bold mb-4">User Information</h2> <form class="space-y-4"><div class="mb-4"><!> <!> <!></div> <div class="mb-4"><!> <!> <!></div> <div class="mb-4"><!> <!></div> <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"><div class="flex items-center"><!> <!></div> <div class="flex items-center"><!> <!></div> <div class="flex items-center"><!> <!></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"><div><!> <!></div> <div><!> <!></div></div> <!></form>',1);function Ps(g,o){Mt(o,!0);let t=dt(o,"formData",15),j=dt(o,"validateFn",15),M,ee=ie(mt([])),b=ie(!0),ae=ie(mt([])),T=ie(""),x=ie(!1),u,D=ie(mt([])),E=ie(!0),X=ie(mt([])),_e=ie(""),z=ie(!1),I=ie(null);t({...t(),email:t().email||null,password:t().password||null,msisdn:t().msisdn||null,is_email_verified:t().is_email_verified||!1,is_msisdn_verified:t().is_msisdn_verified||!1,force_password_change:t().force_password_change||!1,type:t().type||"mobile",language:t().language||null,roles:t().roles||[],groups:t().groups||[],firebase_token:t().firebase_token||null,google_id:t().google_id||null,facebook_id:t().facebook_id||null,social_avatar_url:t().social_avatar_url||null});const w=["bot","mobile","web","admin","api"].map(n=>({name:n.charAt(0).toUpperCase()+n.slice(1),value:n}));async function O(){try{const n=await At.query({space_name:"management",subpath:"/roles",type:Jt.search,search:"",limit:100});n&&(i(ee,n.records,!0),oe())}catch(n){console.error("Failed to load roles:",n)}finally{i(b,!1)}}async function B(){try{const n=await At.query({space_name:"management",subpath:"/groups",type:Jt.search,search:"",limit:100});n&&(i(D,n.records,!0),te())}catch(n){console.error("Failed to load groups:",n)}finally{i(E,!1)}}dr(()=>{O(),B();const n=y=>{u&&!u.contains(y.target)&&i(x,!1),e(I)&&!e(I).contains(y.target)&&i(z,!1)};return document.addEventListener("click",n),()=>{document.removeEventListener("click",n)}});function oe(){i(ae,e(ee).filter(n=>n.shortname.toLowerCase().includes(e(T).toLowerCase())).map(n=>({key:n.shortname,value:n.shortname})),!0)}function c(n,y){n.stopPropagation();const U=t().roles.indexOf(y.value);t(U===-1?t().roles=[...t().roles,y.value]:t().roles=t().roles.filter(De=>De!==y.value),!0)}function P(n){t(t().roles=t().roles.filter(y=>y!==n),!0)}function te(){i(X,e(D).filter(n=>n.shortname.toLowerCase().includes(e(_e).toLowerCase())).map(n=>({key:n.shortname,value:n.shortname})),!0)}function le(n,y){n.stopPropagation();const U=t().groups.indexOf(y.value);t(U===-1?t().groups=[...t().groups,y.value]:t().groups=t().groups.filter(De=>De!==y.value),!0)}function Le(n){t(t().groups=t().groups.filter(y=>y!==n),!0)}function pe(){const n=M.checkValidity();return i(v,d(t().email),!0),!n||!e(v)?(M.reportValidity(),!1):n}Ot(()=>{j(pe)}),Ot(()=>{e(T)?oe():i(ae,e(ee).map(n=>({key:n.shortname,value:n.shortname})),!0)}),Ot(()=>{e(_e)?te():i(X,e(D).map(n=>({key:n.shortname,value:n.shortname})),!0)});let v=ie(!0),H=ie(!1);function d(n){return n?/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,6}$/.test(n):!0}Ot(()=>{e(H)&&i(v,d(t().email),!0)}),Bt(g,{class:"w-full max-w-4xl mx-auto p-4 my-2",children:(n,y)=>{var U=ks(),De=a(m(U),2),Y=s(De),Z=s(Y);A(Z,{for:"password",class:"mb-2",children:(k,ce)=>{var V=ls();r(k,V)},$$slots:{default:!0}});var ve=a(Z,2);me(ve,{required:!0,id:"password",type:"password",placeholder:"••••••••",minlength:8,get value(){return t().password},set value(k){t(t().password=k,!0)}});var Oe=a(ve,2);hr(Oe,{class:"mt-1",children:(k,ce)=>{var V=$("Minimum 8 characters");r(k,V)},$$slots:{default:!0}});var He=a(Y,2),Fe=s(He);A(Fe,{for:"email",class:"mb-2",children:(k,ce)=>{var V=$("Email");r(k,V)},$$slots:{default:!0}});var Pe=a(Fe,2);{let k=et(()=>e(v)?"":"border-red-500");me(Pe,{id:"email",type:"email",placeholder:"user@example.com",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,6}$",get class(){return e(k)},onblur:()=>i(H,!0),get value(){return t().email},set value(ce){t(t().email=ce,!0)}})}var Je=a(Pe,2);{var ke=k=>{hr(k,{class:"mt-1 text-red-600",children:(ce,V)=>{var fe=$("Please enter a valid email address");r(ce,fe)},$$slots:{default:!0}})};h(Je,k=>{!e(v)&&e(H)&&k(ke)})}var Me=a(He,2),ne=s(Me);A(ne,{for:"msisdn",class:"mb-2",children:(k,ce)=>{var V=$("Mobile Number (MSISDN)");r(k,V)},$$slots:{default:!0}});var ue=a(ne,2);me(ue,{id:"msisdn",placeholder:"+964723456789 / 0712345678",pattern:"^\\[1-9]\\d$",get value(){return t().msisdn},set value(k){t(t().msisdn=k,!0)}});var xe=a(Me,2),K=s(xe),he=s(K);kt(he,{id:"force_password_change",get checked(){return t().force_password_change},set checked(k){t(t().force_password_change=k,!0)}});var Re=a(he,2);A(Re,{for:"force_password_change",class:"ml-2",children:(k,ce)=>{var V=$("Force Password Change");r(k,V)},$$slots:{default:!0}});var ze=a(K,2),Ce=s(ze);kt(Ce,{id:"is_email_verified",get checked(){return t().is_email_verified},set checked(k){t(t().is_email_verified=k,!0)}});var we=a(Ce,2);A(we,{for:"is_email_verified",class:"ml-2",children:(k,ce)=>{var V=$("Email Verified");r(k,V)},$$slots:{default:!0}});var N=a(ze,2),Te=s(N);kt(Te,{id:"is_msisdn_verified",get checked(){return t().is_msisdn_verified},set checked(k){t(t().is_msisdn_verified=k,!0)}});var S=a(Te,2);A(S,{for:"is_msisdn_verified",class:"ml-2",children:(k,ce)=>{var V=$("Phone Number Verified");r(k,V)},$$slots:{default:!0}});var p=a(xe,2),C=s(p),_=s(C);A(_,{for:"user_type",class:"mb-2",children:(k,ce)=>{var V=$("User Type");r(k,V)},$$slots:{default:!0}});var R=a(_,2);$t(R,{id:"user_type",get items(){return w},get value(){return t().type},set value(k){t(t().type=k,!0)}});var de=a(C,2),se=s(de);A(se,{for:"language",class:"mb-2",children:(k,ce)=>{var V=$("Preferred Language");r(k,V)},$$slots:{default:!0}});var L=a(se,2);me(L,{id:"language",get value(){return t().language},set value(k){t(t().language=k,!0)}});var q=a(p,2);mr(q,{children:(k,ce)=>{var V=ws(),fe=m(V);Zt(fe,{header:J=>{var G=$("Roles and Groups");r(J,G)},children:(J,G)=>{var F=bs(),Ae=s(F),je=s(Ae);A(je,{class:"mb-2",children:(ye,We)=>{var Ke=$("Roles");r(ye,Ke)},$$slots:{default:!0}});var Ue=a(je,2);{var re=ye=>{var We=ns();r(ye,We)},qe=ye=>{var We=_s(),Ke=m(We),rt=s(Ke),Ne=s(rt),ot=s(Ne);gr(ot,{class:"w-4 h-4 text-gray-500"});var nt=a(Ne,2);me(nt,{class:"pl-10",placeholder:"Search roles...",onfocus:()=>i(x,!0),get value(){return e(T)},set value(tt){i(T,tt,!0)}});var Tt=a(rt,2),yt=s(Tt),ct=s(yt);{var jt=tt=>{var lt=ds();Qe(lt,21,()=>e(ae),Xe,(xt,pt)=>{var ht=is();ht.__click=Et=>c(Et,e(pt));var bt=s(ht),Ft=s(bt),St=a(bt,2);{var Ut=Et=>{Sr(Et,{color:"blue",children:(Gt,ur)=>{var f=$("Selected");r(Gt,f)},$$slots:{default:!0}})};h(St,Et=>{t().roles.includes(e(pt).value)&&Et(Ut)})}Ye(()=>Ze(Ft,e(pt).key)),r(xt,ht)}),r(tt,lt)};h(ct,tt=>{e(x)&&e(ae).length>0&&tt(jt)})}or(Ke,tt=>u=tt,()=>u);var vt=a(Ke,2);{var Dt=tt=>{var lt=us(),xt=s(lt);A(xt,{class:"mb-2",children:(bt,Ft)=>{var St=$("Added Roles");r(bt,St)},$$slots:{default:!0}});var pt=a(xt,2),ht=s(pt);Qe(ht,21,()=>t().roles,Xe,(bt,Ft)=>{var St=vs(),Ut=s(St),Et=s(Ut),Gt=a(Ut,2);Gt.__click=()=>P(e(Ft)),Ye(()=>Ze(Et,e(Ft))),r(bt,St)}),r(tt,lt)},Ct=tt=>{var lt=cs();r(tt,lt)};h(vt,tt=>{t().roles.length>0?tt(Dt):tt(Ct,!1)})}r(ye,We)};h(Ue,ye=>{e(b)?ye(re):ye(qe,!1)})}var Se=a(Ae,2),Ve=s(Se);A(Ve,{class:"mb-2",children:(ye,We)=>{var Ke=$("Groups");r(ye,Ke)},$$slots:{default:!0}});var Be=a(Ve,2);{var Ge=ye=>{var We=fs();r(ye,We)},st=ye=>{var We=ys(),Ke=m(We),rt=s(Ke),Ne=s(rt),ot=s(Ne);gr(ot,{class:"w-4 h-4 text-gray-500"});var nt=a(Ne,2);me(nt,{class:"pl-10",placeholder:"Search groups...",onfocus:()=>i(z,!0),get value(){return e(_e)},set value(tt){i(_e,tt,!0)}});var Tt=a(rt,2),yt=s(Tt),ct=s(yt);{var jt=tt=>{var lt=ps();Qe(lt,21,()=>e(X),Xe,(xt,pt)=>{var ht=ms();ht.__click=Et=>le(Et,e(pt));var bt=s(ht),Ft=s(bt),St=a(bt,2);{var Ut=Et=>{Sr(Et,{color:"blue",children:(Gt,ur)=>{var f=$("Selected");r(Gt,f)},$$slots:{default:!0}})};h(St,Et=>{t().groups.includes(e(pt).value)&&Et(Ut)})}Ye(()=>Ze(Ft,e(pt).key)),r(xt,ht)}),r(tt,lt)};h(ct,tt=>{e(z)&&e(X).length>0&&tt(jt)})}or(Ke,tt=>i(I,tt),()=>e(I));var vt=a(Ke,2);{var Dt=tt=>{var lt=gs(),xt=s(lt);A(xt,{class:"mb-2",children:(bt,Ft)=>{var St=$("Added Groups");r(bt,St)},$$slots:{default:!0}});var pt=a(xt,2),ht=s(pt);Qe(ht,21,()=>t().groups,Xe,(bt,Ft)=>{var St=hs(),Ut=s(St),Et=s(Ut),Gt=a(Ut,2);Gt.__click=()=>Le(e(Ft)),Ye(()=>Ze(Et,e(Ft))),r(bt,St)}),r(tt,lt)},Ct=tt=>{var lt=$s();r(tt,lt)};h(vt,tt=>{t().groups.length>0?tt(Dt):tt(Ct,!1)})}r(ye,We)};h(Be,ye=>{e(E)?ye(Ge):ye(st,!1)})}r(J,F)},$$slots:{header:!0,default:!0}});var Ie=a(fe,2);Zt(Ie,{header:J=>{var G=$("Social and External IDs");r(J,G)},children:(J,G)=>{var F=xs(),Ae=s(F),je=s(Ae);A(je,{for:"firebase_token",class:"mb-2",children:(rt,Ne)=>{var ot=$("Firebase Token");r(rt,ot)},$$slots:{default:!0}});var Ue=a(je,2);Dr(Ue,{id:"firebase_token",placeholder:"Firebase authentication token",rows:2,get value(){return t().firebase_token},set value(rt){t(t().firebase_token=rt,!0)}});var re=a(Ae,2),qe=s(re),Se=s(qe);A(Se,{for:"google_id",class:"mb-2",children:(rt,Ne)=>{var ot=$("Google ID");r(rt,ot)},$$slots:{default:!0}});var Ve=a(Se,2);me(Ve,{id:"google_id",get value(){return t().google_id},set value(rt){t(t().google_id=rt,!0)}});var Be=a(qe,2),Ge=s(Be);A(Ge,{for:"facebook_id",class:"mb-2",children:(rt,Ne)=>{var ot=$("Facebook ID");r(rt,ot)},$$slots:{default:!0}});var st=a(Ge,2);me(st,{id:"facebook_id",get value(){return t().facebook_id},set value(rt){t(t().facebook_id=rt,!0)}});var ye=a(re,2),We=s(ye);A(We,{for:"social_avatar_url",class:"mb-2",children:(rt,Ne)=>{var ot=$("Social Profile Image URL");r(rt,ot)},$$slots:{default:!0}});var Ke=a(We,2);me(Ke,{id:"social_avatar_url",type:"url",get value(){return t().social_avatar_url},set value(rt){t(t().social_avatar_url=rt,!0)}}),r(J,F)},$$slots:{header:!0,default:!0}}),r(k,V)},$$slots:{default:!0}}),or(De,k=>M=k,()=>M),r(n,U)},$$slots:{default:!0}}),It()}nr(["click"]);var Ss=l('<span class="text-red-500 text-lg" style="vertical-align: center">*</span> Permissions',1),Rs=l('<div role="status" class="max-w-sm animate-pulse"><div class="h-3 bg-gray-200 rounded-full dark:bg-gray-700 mx-2 my-2.5"></div></div>'),Ts=l('<div class="px-4 py-2 hover:bg-gray-100 cursor-pointer flex items-center justify-between"><span> </span> <!></div>'),Cs=l('<div class="absolute w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-60 overflow-auto"></div>'),Os=l('<div><div class="relative mb-2"><div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><!></div> <!></div> <div class="flex space-x-2"><div class="relative flex-grow"><!></div></div></div>'),js=l('<div class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full flex items-center"><span> </span> <button class="ml-2 text-blue-600 hover:text-blue-800" type="button">×</button></div>'),Ds=l('<div class="mt-4"><!> <div class="border rounded-lg p-4 bg-gray-50"><div class="flex flex-wrap gap-2"></div></div></div>'),Es=l('<div class="mt-4 p-4 border border-dashed rounded-lg text-center text-gray-500">No permissions added</div>'),Fs=l('<h2 class="text-2xl font-bold mb-4">Role Permissions</h2> <div class="mb-4"><!> <!> <!></div>',1);function zs(g,o){Mt(o,!0);let t=dt(o,"formData",15),j=dt(o,"validateFn",15),M=ie(mt([])),ee=ie(!0),b=ie(mt([])),ae=ie(""),T=ie(!1),x;t({...t(),permissions:t().permissions||[]});async function u(){try{const z=await At.query({space_name:"management",subpath:"/permissions",type:Jt.search,search:"",limit:100});z&&(i(M,z.records,!0),D())}catch(z){console.error("Failed to load permissions:",z)}finally{i(ee,!1)}}dr(()=>{u();const z=I=>{x&&!x.contains(I.target)&&i(T,!1)};return document.addEventListener("click",z),()=>{document.removeEventListener("click",z)}});function D(){i(b,e(M).filter(z=>z.shortname.toLowerCase().includes(e(ae).toLowerCase())).map(z=>({key:z.shortname,value:z.shortname})),!0)}function E(z,I){z.stopPropagation();const w=t().permissions.indexOf(I.value);t(w===-1?t().permissions=[...t().permissions,I.value]:t().permissions=t().permissions.filter(O=>O!==I.value),!0)}function X(z){t(t().permissions=t().permissions.filter(I=>I!==z),!0)}function _e(){return t().permissions.length!==0}Ot(()=>{j(_e)}),Ot(()=>{e(ae)?D():i(b,e(M).map(z=>({key:z.shortname,value:z.shortname})),!0)}),Bt(g,{class:"w-full max-w-4xl mx-auto p-4 my-2",children:(z,I)=>{var w=Fs(),O=a(m(w),2),B=s(O);A(B,{class:"mb-2",children:(pe,v)=>{var H=Ss();r(pe,H)},$$slots:{default:!0}});var oe=a(B,2);{var c=pe=>{var v=Rs();r(pe,v)},P=pe=>{var v=Os(),H=s(v),d=s(H),n=s(d);gr(n,{class:"w-4 h-4 text-gray-500"});var y=a(d,2);me(y,{class:"pl-10",placeholder:"Search permissions...",onfocus:()=>i(T,!0),get value(){return e(ae)},set value(ve){i(ae,ve,!0)}});var U=a(H,2),De=s(U),Y=s(De);{var Z=ve=>{var Oe=Cs();Qe(Oe,21,()=>e(b),Xe,(He,Fe)=>{var Pe=Ts();Pe.__click=ue=>E(ue,e(Fe));var Je=s(Pe),ke=s(Je),Me=a(Je,2);{var ne=ue=>{Sr(ue,{color:"blue",children:(xe,K)=>{var he=$("Selected");r(xe,he)},$$slots:{default:!0}})};h(Me,ue=>{t().permissions.includes(e(Fe).value)&&ue(ne)})}Ye(()=>Ze(ke,e(Fe).key)),r(He,Pe)}),r(ve,Oe)};h(Y,ve=>{e(T)&&e(b).length>0&&ve(Z)})}or(v,ve=>x=ve,()=>x),r(pe,v)};h(oe,pe=>{e(ee)?pe(c):pe(P,!1)})}var te=a(oe,2);{var le=pe=>{var v=Ds(),H=s(v);A(H,{class:"mb-2",children:(y,U)=>{var De=$("Added Permissions");r(y,De)},$$slots:{default:!0}});var d=a(H,2),n=s(d);Qe(n,21,()=>t().permissions,Xe,(y,U)=>{var De=js(),Y=s(De),Z=s(Y),ve=a(Y,2);ve.__click=()=>X(e(U)),Ye(()=>Ze(Z,e(U))),r(y,De)}),r(pe,v)},Le=pe=>{var v=Es();r(pe,v)};h(te,pe=>{t().permissions.length>0?pe(le):pe(Le,!1)})}r(z,w)},$$slots:{default:!0}}),It()}nr(["click"]);var Ls=l('<div class="flex space-x-2"><!> <!></div>'),As=l('<button class="ml-2 text-blue-600" type="button">×</button>'),qs=l('<div class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full flex items-center"><span> </span> <!></div>'),Ms=l('<div class="mt-2 flex flex-wrap gap-2"></div>'),Is=l('<div class="mt-2 p-2 border border-dashed rounded-lg text-center text-gray-500">No resource types added</div>'),Vs=l('<div class="flex space-x-2"><!> <!></div>'),Bs=l('<button class="ml-2 text-green-600" type="button">×</button>'),Us=l('<div class="bg-green-100 text-green-800 px-3 py-1 rounded-full flex items-center"><span> </span> <!></div>'),Hs=l('<div class="mt-2 flex flex-wrap gap-2"></div>'),Js=l('<div class="mt-2 p-2 border border-dashed rounded-lg text-center text-gray-500">No actions added</div>'),Gs=l("<span>Subpaths</span>"),Ws=l('<div class="flex items-center gap-2"><!> <span class="text-gray-500">Loading spaces...</span></div>'),Ks=l('<div class="flex items-center gap-2"><!> <span class="text-gray-500">Loading subpaths...</span></div>'),Qs=l('<div class="flex space-x-2"><!> <!></div>'),Xs=l('<div class="mb-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><!> <!></div> <div><!> <!></div></div></div>'),Ys=l('<button class="ml-2 text-purple-600 hover:text-purple-800" type="button">×</button>'),Zs=l('<div class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full flex items-center"><span> </span> <!></div>'),Ns=l('<div class="mb-4"><div class="font-medium text-gray-700 mb-2"> </div> <div class="flex flex-wrap gap-2"></div></div>'),eo=l('<div class="mt-4 border rounded-lg p-4 bg-gray-50"></div>'),to=l('<div class="mt-2 p-4 border border-dashed rounded-lg text-center text-gray-500">No spaces or subpaths added</div>'),ro=l('<div class="p-4 space-y-4"><!> <!></div>'),ao=l("<span>Conditions</span>"),so=l('<div class="flex space-x-2"><!> <!></div>'),oo=l('<button class="ml-2 text-yellow-600" type="button">×</button>'),lo=l('<div class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full flex items-center"><span> </span> <!></div>'),no=l('<div class="mt-2 flex flex-wrap gap-2"></div>'),io=l('<div class="mt-2 p-2 border border-dashed rounded-lg text-center text-gray-500">No conditions added</div>'),vo=l('<div class="p-4 space-y-4"><div class="mb-4"><!> <!></div></div>'),uo=l("<span>Restricted Fields</span>"),co=l('<div class="flex space-x-2"><!> <!></div>'),_o=l('<button class="ml-2 text-red-600" type="button">×</button>'),fo=l('<div class="bg-red-100 text-red-800 px-3 py-1 rounded-full flex items-center"><span> </span> <!></div>'),mo=l('<div class="mt-2 flex flex-wrap gap-2"></div>'),po=l('<div class="mt-2 p-2 border border-dashed rounded-lg text-center text-gray-500">No restricted fields added</div>'),ho=l('<div class="p-4 space-y-4"><div class="mb-4"><!> <!></div></div>'),go=l("<span>Allowed Fields Values</span>"),$o=l('<div class="p-4 space-y-4"><div class="mb-4"><!> <!> <div class="flex flex-col"><!> <div class="flex justify-end mt-2"><!></div></div></div></div>'),yo=l("<span>Filter Fields Values</span>"),bo=l('<div class="p-4 space-y-4"><div class="mb-4"><!> <!> <!></div></div>'),xo=l("<!> <!> <!> <!> <!>",1),wo=l('<h2 class="text-2xl font-bold mb-4">Permission Settings</h2> <form class="space-y-4"><div class="mb-4"><!> <!> <!></div> <div class="mb-4"><!> <!> <!></div> <!></form>',1);function ko(g,o){Mt(o,!0);let t=dt(o,"formData",15),j=dt(o,"validateFn",15),M=dt(o,"readOnly",3,!1),ee;t({...t(),subpaths:t().subpaths||{},resource_types:t().resource_types||[],actions:t().actions||[],conditions:t().conditions||[],restricted_fields:t().restricted_fields||[],allowed_fields_values:t().allowed_fields_values||{},filter_fields_values:t().filter_fields_values||""});const b=Object.keys(ge).map(Y=>({name:Y,value:ge[Y]})),ae=Object.keys(lr).map(Y=>({name:Y,value:lr[Y]}));ae.unshift({name:"view",value:"view"}),ae.unshift({name:"query",value:"query"});let T="",x="",u="",D="",E=ie(mt([])),X=ie(mt([])),_e=ie(""),z=ie(""),I=ie(!0),w=ie(!1);dr(async()=>{try{const Y=await ea();i(E,Y.records.map(Z=>({name:Z.shortname,value:Z.shortname})),!0),e(E).unshift({name:"__all_spaces__",value:"__all_spaces__"})}catch(Y){console.error("Failed to load spaces:",Y)}finally{i(I,!1)}});function O(){T&&!t().resource_types.includes(T)&&(t(t().resource_types=[...t().resource_types,T],!0),T="")}function B(Y){t(t().resource_types=t().resource_types.filter(Z=>Z!==Y),!0)}function oe(){x&&!t().actions.includes(x)&&(t(t().actions=[...t().actions,x],!0),x="")}function c(Y){t(t().actions=t().actions.filter(Z=>Z!==Y),!0)}function P(){u&&!t().conditions.includes(u)&&(t(t().conditions=[...t().conditions,u],!0),u="")}function te(Y){t(t().conditions=t().conditions.filter(Z=>Z!==Y),!0)}function le(){D&&!t().restricted_fields.includes(D)&&(t(t().restricted_fields=[...t().restricted_fields,D],!0),D="")}async function Le(Y){if(Y){i(w,!0);try{const Z=[],ve=await ta(Y,"/");await Da(Z,Y,"",ve),i(X,Z.map(Oe=>({name:Oe,value:Oe})),!0)}catch(Z){console.error("Failed to load subpaths:",Z),i(X,[],!0)}finally{e(X).unshift({name:"__all_subpaths__",value:"__all_subpaths__"}),e(X).unshift({name:"/",value:"/"}),i(w,!1)}}}function pe(){!e(_e)||!e(z)||(t().subpaths[e(_e)]||t(t().subpaths[e(_e)]=[],!0),t().subpaths[e(_e)].includes(e(z))||t(t().subpaths[e(_e)]=[...t().subpaths[e(_e)],e(z)],!0),i(z,""))}function v(Y,Z){if(t(t().subpaths[Y]=t().subpaths[Y].filter(ve=>ve!==Z),!0),t().subpaths[Y].length===0){const{[Y]:ve,...Oe}=t().subpaths;t(t().subpaths=Oe,!0)}}function H(Y){t(t().restricted_fields=t().restricted_fields.filter(Z=>Z!==Y),!0)}let d="";function n(){try{d=JSON.stringify(t().allowed_fields_values,null,2)}catch{d="{}"}}function y(){try{t(t().allowed_fields_values=JSON.parse(d),!0)}catch{alert("Invalid JSON format")}}n();function U(){try{t(t().allowed_fields_values=JSON.parse(d),!0)}catch{zt(Lt.warn,"Invalid JSON format in Allowed Fields Values","Please correct the JSON syntax.")}const Y=ee.checkValidity();return Y||ee.reportValidity(),Y}Ot(()=>{j(U)}),Ot(()=>{e(_e)&&Le(e(_e))});let De=et(()=>Object.entries(t().subpaths));Bt(g,{class:"w-full max-w-4xl mx-auto p-4  my-2",children:(Y,Z)=>{var ve=wo(),Oe=a(m(ve),2),He=s(Oe),Fe=s(He);A(Fe,{class:"mb-2",children:(N,Te)=>{var S=$("Resource Types");r(N,S)},$$slots:{default:!0}});var Pe=a(Fe,2);{var Je=N=>{var Te=Ls(),S=s(Te);$t(S,{class:"flex-grow",placeholder:"Select resource type",get items(){return b},get value(){return T},set value(C){T=C}});var p=a(S,2);be(p,{class:"bg-primary",size:"sm",onclick:O,children:(C,_)=>{Kt(C,{size:"md"})},$$slots:{default:!0}}),r(N,Te)};h(Pe,N=>{M()||N(Je)})}var ke=a(Pe,2);{var Me=N=>{var Te=Ms();Qe(Te,21,()=>t().resource_types,Xe,(S,p)=>{var C=qs(),_=s(C),R=s(_),de=a(_,2);{var se=L=>{var q=As();q.__click=()=>B(e(p)),r(L,q)};h(de,L=>{M()||L(se)})}Ye(()=>Ze(R,e(p))),r(S,C)}),r(N,Te)},ne=N=>{var Te=Is();r(N,Te)};h(ke,N=>{t().resource_types.length>0?N(Me):N(ne,!1)})}var ue=a(He,2),xe=s(ue);A(xe,{class:"mb-2",children:(N,Te)=>{var S=$("Actions");r(N,S)},$$slots:{default:!0}});var K=a(xe,2);{var he=N=>{var Te=Vs(),S=s(Te);$t(S,{class:"flex-grow",placeholder:"Select action",get items(){return ae},get value(){return x},set value(C){x=C}});var p=a(S,2);be(p,{class:"bg-primary",size:"sm",onclick:oe,children:(C,_)=>{Kt(C,{size:"md"})},$$slots:{default:!0}}),r(N,Te)};h(K,N=>{M()||N(he)})}var Re=a(K,2);{var ze=N=>{var Te=Hs();Qe(Te,21,()=>t().actions,Xe,(S,p)=>{var C=Us(),_=s(C),R=s(_),de=a(_,2);{var se=L=>{var q=Bs();q.__click=()=>c(e(p)),r(L,q)};h(de,L=>{M()||L(se)})}Ye(()=>Ze(R,e(p))),r(S,C)}),r(N,Te)},Ce=N=>{var Te=Js();r(N,Te)};h(Re,N=>{t().actions.length>0?N(ze):N(Ce,!1)})}var we=a(ue,2);mr(we,{children:(N,Te)=>{var S=xo(),p=m(S);Zt(p,{header:L=>{var q=Gs();r(L,q)},children:(L,q)=>{var k=ro(),ce=s(k);{var V=J=>{var G=Xs(),F=s(G),Ae=s(F),je=s(Ae);A(je,{class:"mb-2",children:(ye,We)=>{var Ke=$("Space");r(ye,Ke)},$$slots:{default:!0}});var Ue=a(je,2);{var re=ye=>{var We=Ws(),Ke=s(We);fr(Ke,{size:"4"}),r(ye,We)},qe=ye=>{$t(ye,{class:"flex-grow",placeholder:"Select space",get items(){return e(E)},get value(){return e(_e)},set value(We){i(_e,We,!0)}})};h(Ue,ye=>{e(I)?ye(re):ye(qe,!1)})}var Se=a(Ae,2),Ve=s(Se);A(Ve,{class:"mb-2",children:(ye,We)=>{var Ke=$("Subpath");r(ye,Ke)},$$slots:{default:!0}});var Be=a(Ve,2);{var Ge=ye=>{var We=Ks(),Ke=s(We);fr(Ke,{size:"4"}),r(ye,We)},st=ye=>{var We=Qs(),Ke=s(We);{let Ne=et(()=>!e(_e));$t(Ke,{class:"flex-grow",placeholder:"Select subpath",get items(){return e(X)},get disabled(){return e(Ne)},get value(){return e(z)},set value(ot){i(z,ot,!0)}})}var rt=a(Ke,2);{let Ne=et(()=>!e(_e)||!e(z));be(rt,{class:"bg-primary",size:"sm",onclick:pe,get disabled(){return e(Ne)},children:(ot,nt)=>{Kt(ot,{size:"md"})},$$slots:{default:!0}})}r(ye,We)};h(Be,ye=>{e(w)?ye(Ge):ye(st,!1)})}r(J,G)};h(ce,J=>{M()||J(V)})}var fe=a(ce,2);{var Ie=J=>{var G=eo();Qe(G,21,()=>e(De),Xe,(F,Ae)=>{var je=et(()=>oa(e(Ae),2));let Ue=()=>e(je)[0],re=()=>e(je)[1];var qe=Ns(),Se=s(qe),Ve=s(Se),Be=a(Se,2);Qe(Be,21,re,Xe,(Ge,st)=>{var ye=Zs(),We=s(ye),Ke=s(We),rt=a(We,2);{var Ne=ot=>{var nt=Ys();nt.__click=()=>v(Ue(),e(st)),r(ot,nt)};h(rt,ot=>{M()||ot(Ne)})}Ye(()=>Ze(Ke,e(st))),r(Ge,ye)}),Ye(()=>Ze(Ve,Ue())),r(F,qe)}),r(J,G)},Ee=J=>{var G=to();r(J,G)};h(fe,J=>{Object.keys(t().subpaths).length>0?J(Ie):J(Ee,!1)})}r(L,k)},$$slots:{header:!0,default:!0}});var C=a(p,2);Zt(C,{header:L=>{var q=ao();r(L,q)},children:(L,q)=>{var k=vo(),ce=s(k),V=s(ce);{var fe=G=>{var F=so(),Ae=s(F);$t(Ae,{class:"flex-grow",placeholder:"Select condition",items:[{name:"own",value:"own"},{name:"is_active",value:"is_active"}],get value(){return u},set value(Ue){u=Ue}});var je=a(Ae,2);be(je,{class:"bg-primary",size:"sm",onclick:P,children:(Ue,re)=>{Kt(Ue,{size:"md"})},$$slots:{default:!0}}),r(G,F)};h(V,G=>{M()||G(fe)})}var Ie=a(V,2);{var Ee=G=>{var F=no();Qe(F,21,()=>t().conditions,Xe,(Ae,je)=>{var Ue=lo(),re=s(Ue),qe=s(re),Se=a(re,2);{var Ve=Be=>{var Ge=oo();Ge.__click=()=>te(e(je)),r(Be,Ge)};h(Se,Be=>{M()||Be(Ve)})}Ye(()=>Ze(qe,e(je))),r(Ae,Ue)}),r(G,F)},J=G=>{var F=io();r(G,F)};h(Ie,G=>{t().conditions.length>0?G(Ee):G(J,!1)})}r(L,k)},$$slots:{header:!0,default:!0}});var _=a(C,2);Zt(_,{header:L=>{var q=uo();r(L,q)},children:(L,q)=>{var k=ho(),ce=s(k),V=s(ce);{var fe=G=>{var F=co(),Ae=s(F);me(Ae,{placeholder:"Add restricted field",get value(){return D},set value(Ue){D=Ue}});var je=a(Ae,2);be(je,{class:"bg-primary",size:"sm",onclick:le,children:(Ue,re)=>{Kt(Ue,{size:"md"})},$$slots:{default:!0}}),r(G,F)};h(V,G=>{M()||G(fe)})}var Ie=a(V,2);{var Ee=G=>{var F=mo();Qe(F,21,()=>t().restricted_fields,Xe,(Ae,je)=>{var Ue=fo(),re=s(Ue),qe=s(re),Se=a(re,2);{var Ve=Be=>{var Ge=_o();Ge.__click=()=>H(e(je)),r(Be,Ge)};h(Se,Be=>{M()||Be(Ve)})}Ye(()=>Ze(qe,e(je))),r(Ae,Ue)}),r(G,F)},J=G=>{var F=po();r(G,F)};h(Ie,G=>{t().restricted_fields.length>0?G(Ee):G(J,!1)})}r(L,k)},$$slots:{header:!0,default:!0}});var R=a(_,2);Zt(R,{header:L=>{var q=go();r(L,q)},children:(L,q)=>{var k=$o(),ce=s(k),V=s(ce);A(V,{children:(F,Ae)=>{var je=$("JSON Editor");r(F,je)},$$slots:{default:!0}});var fe=a(V,2);hr(fe,{class:"mb-2",children:(F,Ae)=>{var je=$("Edit the JSON object directly");r(F,je)},$$slots:{default:!0}});var Ie=a(fe,2),Ee=s(Ie);Dr(Ee,{rows:10,class:"font-mono",get value(){return d},set value(F){d=F}});var J=a(Ee,2),G=s(J);be(G,{size:"sm",onclick:y,children:(F,Ae)=>{var je=$("Apply Changes");r(F,je)},$$slots:{default:!0}}),r(L,k)},$$slots:{header:!0,default:!0}});var de=a(R,2);Zt(de,{header:L=>{var q=yo();r(L,q)},children:(L,q)=>{var k=bo(),ce=s(k),V=s(ce);A(V,{children:(Ee,J)=>{var G=$("Filter Fields Values");r(Ee,G)},$$slots:{default:!0}});var fe=a(V,2);hr(fe,{class:"mb-2",children:(Ee,J)=>{var G=$("Optional string to filter field values");r(Ee,G)},$$slots:{default:!0}});var Ie=a(fe,2);me(Ie,{placeholder:"Enter filter fields values",get disabled(){return M()},get value(){return t().filter_fields_values},set value(Ee){t(t().filter_fields_values=Ee,!0)}}),r(L,k)},$$slots:{header:!0,default:!0}}),r(N,S)},$$slots:{default:!0}}),or(Oe,N=>ee=N,()=>ee),r(Y,ve)},$$slots:{default:!0}}),It()}nr(["click"]);function Wt(g,o,t,j){const M=[`${o}:__all_subpaths__:${j}`,`__all_spaces__:__all_subpaths__:${j}`,`${o}:${t}:${j}`];let ee={};if(typeof localStorage<"u"&&(ee=JSON.parse(localStorage.getItem("permissions"))),ee===null||Object.keys(ee).length===0)return!1;const b=[];for(const ae of M)ee[ae]&&b.push(ee[ae].allowed_actions.includes(g));return b.some(ae=>ae)}var Po=l("<option>Subpath</option> <option>Search</option>",1),So=l('<div class="flex items-center gap-2 mt-1"><!> <!></div>'),Ro=l('<p class="text-red-500 text-sm"> </p>'),To=l('<div class="flex items-center gap-2 mt-2 p-2 bg-gray-50 rounded"><div class="flex-1"><!></div> <div class="flex-1"><!></div> <!></div>'),Co=l('<div class="flex items-center gap-2 mt-2"><div class="flex-1"><!></div> <div class="flex-1"><!></div> <!></div>'),Oo=l('<div class="flex items-center gap-2 mt-2"><div class="flex-1"><!></div> <div class="flex-1"><!></div> <!></div>'),jo=l("<option>Ascending</option> <option>Descending</option>",1),Do=l('<span class="bg-blue-100 text-blue-800 px-2 py-1 text-xs rounded-md flex items-center gap-1"> <button type="button" class="text-xs">×</button></span>'),Eo=l('<div class="flex items-center mb-2"><!> <!></div>'),Fo=l('<span class="bg-blue-100 text-blue-800 px-2 py-1 text-xs rounded-md flex items-center gap-1"> <button type="button" class="text-xs">×</button></span>'),zo=l("<option> </option>"),Lo=l('<span class="bg-blue-100 text-blue-800 px-2 py-1 text-xs rounded-md flex items-center gap-1"> <button type="button" class="text-xs">×</button></span>'),Ao=l("<option> </option>"),qo=l('<div class="flex items-center gap-2 mt-1"><!> <!></div>'),Mo=l('<h2 class="text-xl font-bold mb-4">Folder Schema Editor</h2> <div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><!> <!> <p class="text-sm text-gray-500">The icon displayed next to the folder</p></div> <div><!> <!> <p class="text-sm text-gray-500">Icon when folder is closed</p></div> <div><!> <!> <p class="text-sm text-gray-500">Icon when folder is opened</p></div> <div><!> <!></div></div> <div class="border p-4 rounded-lg"><h3 class="font-semibold mb-2">Query Settings</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><!> <!></div> <div><!> <!></div></div> <div class="mt-3"><!> <!> <!></div></div> <div class="border p-4 rounded-lg"><h3 class="font-semibold mb-2">Index Attributes</h3> <p class="text-sm text-gray-500 mb-2">The attributes from the schema that should be displayed in index page</p> <!> <!> <!></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="border p-4 rounded-lg"><h3 class="font-semibold mb-2">Search Columns</h3> <!> <!></div> <div class="border p-4 rounded-lg"><h3 class="font-semibold mb-2">CSV Columns</h3> <!> <!></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><!> <!></div> <div><!> <!></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="border p-3 rounded-md"><h3 class="font-semibold mb-2">Content Resource Types</h3> <div class="mb-3"><div class="flex flex-wrap gap-1 mt-1"></div></div> <div class="border rounded-md p-2 max-h-48 overflow-y-auto bg-white"></div></div> <div class="border p-3 rounded-md"><h3 class="font-semibold mb-2">Schema Shortnames</h3> <div class="mb-3"><div class="flex flex-wrap gap-1 mt-1"></div></div> <!> <hr class="my-4"/> <h3 class="font-semibold mb-2">Workflow Shortnames</h3> <div class="mb-3"><div class="flex flex-wrap gap-1 mt-1"></div></div> <!></div></div> <div class="border p-3 rounded-md"><h3 class="font-semibold mb-2">PDF Schema Shortnames</h3> <!> <!></div> <div class="border p-4 rounded-lg"><h3 class="font-semibold mb-2">Folder Options</h3> <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3"><div class="flex items-center"><!> <!></div> <div class="flex items-center"><!> <!></div> <div class="flex items-center"><!> <!></div> <div class="flex items-center"><!> <!></div> <div class="flex items-center"><!> <!></div> <div class="flex items-center"><!> <!></div> <div class="flex items-center"><!> <!></div> <div class="flex items-center"><!> <!></div> <div class="flex items-center"><!> <!></div> <div class="flex items-center"><!> <!></div> <div class="flex items-center"><!> <!></div></div></div></div>',1);function Hr(g,o){Mt(o,!0),Cr();let t=dt(o,"content",31,()=>mt({}));t({icon:t().icon||"",icon_closed:t().icon_closed||"",icon_opened:t().icon_opened||"",shortname_title:t().shortname_title||"",index_attributes:t().index_attributes||[],query:t().query||{type:"",search:"",filter_types:[]},search_columns:t().search_columns||[],csv_columns:t().csv_columns||[],sort_by:t().sort_by||"",sort_type:t().sort_type||"",content_resource_types:t().content_resource_types||[],content_schema_shortnames:t().content_schema_shortnames||[],workflow_shortnames:t().workflow_shortnames||[],enable_pdf_schema_shortnames:t().enable_pdf_schema_shortnames||[],allow_view:t().allow_view||!0,allow_create:t().allow_create||!0,allow_update:t().allow_update||!0,allow_delete:t().allow_delete||!1,allow_create_category:t().allow_create_category||!1,allow_csv:t().allow_csv||!1,allow_upload_csv:t().allow_upload_csv||!1,use_media:t().use_media||!1,stream:t().stream||!1,expand_children:t().expand_children||!1,disable_filter:t().disable_filter||!1,...t()}),t().query||t(t().query={},!0);let j=ie(mt({}));function M(b,ae={}){let T=t();const x=b.split(".");for(let D=0;D<x.length-1;D++)T[x[D]]||(T[x[D]]={}),T=T[x[D]];const u=x[x.length-1];T[u]||(T[u]=[]),T[u]=[...T[u],structuredClone(ae)],t({...t()})}function ee(b,ae){let T=t();const x=b.split(".");for(let D=0;D<x.length-1;D++){if(!T[x[D]])return;T=T[x[D]]}const u=x[x.length-1];T[u]&&(T[u]=T[u].filter((D,E)=>E!==ae),t({...t()}))}Bt(g,{class:"p-4 max-w-4xl mx-auto my-2",children:(b,ae)=>{var T=Mo(),x=a(m(T),2),u=s(x),D=s(u),E=s(D);A(E,{for:"icon",children:(f,W)=>{var Q=$("Folder Main Icon");r(f,Q)},$$slots:{default:!0}});var X=a(E,2);me(X,{id:"icon",placeholder:"Enter icon name",get value(){return t().icon},set value(f){t(t().icon=f,!0)}});var _e=a(D,2),z=s(_e);A(z,{for:"icon_closed",children:(f,W)=>{var Q=$("Folder Closed Icon");r(f,Q)},$$slots:{default:!0}});var I=a(z,2);me(I,{id:"icon_closed",placeholder:"Enter closed icon name",get value(){return t().icon_closed},set value(f){t(t().icon_closed=f,!0)}});var w=a(_e,2),O=s(w);A(O,{for:"icon_opened",children:(f,W)=>{var Q=$("Folder Opened Icon");r(f,Q)},$$slots:{default:!0}});var B=a(O,2);me(B,{id:"icon_opened",placeholder:"Enter opened icon name",get value(){return t().icon_opened},set value(f){t(t().icon_opened=f,!0)}});var oe=a(w,2),c=s(oe);A(c,{for:"shortname_title",children:(f,W)=>{var Q=$("Shortname Field Title");r(f,Q)},$$slots:{default:!0}});var P=a(c,2);me(P,{id:"shortname_title",placeholder:"Shortname field title",get value(){return t().shortname_title},set value(f){t(t().shortname_title=f,!0)}});var te=a(u,2),le=a(s(te),2),Le=s(le),pe=s(Le);A(pe,{for:"query_type",children:(f,W)=>{var Q=$("Query Type");r(f,Q)},$$slots:{default:!0}});var v=a(pe,2);$t(v,{id:"query_type",get value(){return t().query.type},set value(f){t(t().query.type=f,!0)},children:(f,W)=>{var Q=Po(),at=m(Q);at.value=at.__value="subpath";var it=a(at,2);it.value=it.__value="search",r(f,Q)},$$slots:{default:!0}});var H=a(Le,2),d=s(H);A(d,{for:"query_search",children:(f,W)=>{var Q=$("Search Query");r(f,Q)},$$slots:{default:!0}});var n=a(d,2);me(n,{id:"query_search",placeholder:"Enter search query",get value(){return t().query.search},set value(f){t(t().query.search=f,!0)}});var y=a(le,2),U=s(y);A(U,{children:(f,W)=>{var Q=$("Filter Types");r(f,Q)},$$slots:{default:!0}});var De=a(U,2);{var Y=f=>{var W=$e(),Q=m(W);Qe(Q,17,()=>t().query.filter_types,Xe,(at,it,ut)=>{var _t=So(),gt=s(_t);me(gt,{placeholder:"Filter type",get value(){return t().query.filter_types[ut]},set value(ft){t(t().query.filter_types[ut]=ft,!0)}});var Rt=a(gt,2);be(Rt,{size:"xs",color:"red",onclick:()=>ee("query.filter_types",ut),children:(ft,qt)=>{var Ht=$("Remove");r(ft,Ht)},$$slots:{default:!0}}),r(at,_t)}),r(f,W)};h(De,f=>{var W;((W=t().query.filter_types)==null?void 0:W.length)>0&&f(Y)})}var Z=a(De,2);be(Z,{size:"xs",class:"mt-2 text-gray hover:text-gray cursor-pointer",outline:!0,onclick:()=>M("query.filter_types",""),children:(f,W)=>{var Q=$("Add Filter Type");r(f,Q)},$$slots:{default:!0}});var ve=a(te,2),Oe=a(s(ve),4);{var He=f=>{var W=Ro(),Q=s(W);Ye(()=>Ze(Q,e(j).index_attributes)),r(f,W)};h(Oe,f=>{e(j).index_attributes&&f(He)})}var Fe=a(Oe,2);{var Pe=f=>{var W=$e(),Q=m(W);Qe(Q,17,()=>t().index_attributes,Xe,(at,it,ut)=>{var _t=To(),gt=s(_t),Rt=s(gt);me(Rt,{placeholder:"Key",get value(){return e(it).key},set value(wt){e(it).key=wt}});var ft=a(gt,2),qt=s(ft);me(qt,{placeholder:"Name",get value(){return e(it).name},set value(wt){e(it).name=wt}});var Ht=a(ft,2);be(Ht,{size:"xs",color:"red",onclick:()=>ee("index_attributes",ut),children:(wt,Fr)=>{var cr=$("Remove");r(wt,cr)},$$slots:{default:!0}}),r(at,_t)}),r(f,W)};h(Fe,f=>{var W;((W=t().index_attributes)==null?void 0:W.length)>0&&f(Pe)})}var Je=a(Fe,2);be(Je,{size:"sm",class:"mt-2 text-gray hover:text-gray cursor-pointer",outline:!0,onclick:()=>M("index_attributes",{key:"",name:""}),children:(f,W)=>{var Q=$("Add Index Attribute");r(f,Q)},$$slots:{default:!0}});var ke=a(ve,2),Me=s(ke),ne=a(s(Me),2);{var ue=f=>{var W=$e(),Q=m(W);Qe(Q,17,()=>t().search_columns,Xe,(at,it,ut)=>{var _t=Co(),gt=s(_t),Rt=s(gt);me(Rt,{placeholder:"Key",size:"sm",get value(){return e(it).key},set value(wt){e(it).key=wt}});var ft=a(gt,2),qt=s(ft);me(qt,{placeholder:"Name",size:"sm",get value(){return e(it).name},set value(wt){e(it).name=wt}});var Ht=a(ft,2);be(Ht,{size:"xs",color:"red",onclick:()=>ee("search_columns",ut),children:(wt,Fr)=>{var cr=$("×");r(wt,cr)},$$slots:{default:!0}}),r(at,_t)}),r(f,W)};h(ne,f=>{var W;((W=t().search_columns)==null?void 0:W.length)>0&&f(ue)})}var xe=a(ne,2);be(xe,{size:"xs",class:"mt-2 text-gray hover:text-gray cursor-pointer",outline:!0,onclick:()=>M("search_columns",{key:"",name:""}),children:(f,W)=>{var Q=$("Add Column");r(f,Q)},$$slots:{default:!0}});var K=a(Me,2),he=a(s(K),2);{var Re=f=>{var W=$e(),Q=m(W);Qe(Q,17,()=>t().csv_columns,Xe,(at,it,ut)=>{var _t=Oo(),gt=s(_t),Rt=s(gt);me(Rt,{placeholder:"Key",size:"sm",get value(){return e(it).key},set value(wt){e(it).key=wt}});var ft=a(gt,2),qt=s(ft);me(qt,{placeholder:"Name",size:"sm",get value(){return e(it).name},set value(wt){e(it).name=wt}});var Ht=a(ft,2);be(Ht,{size:"xs",color:"red",onclick:()=>ee("csv_columns",ut),children:(wt,Fr)=>{var cr=$("×");r(wt,cr)},$$slots:{default:!0}}),r(at,_t)}),r(f,W)};h(he,f=>{var W;((W=t().csv_columns)==null?void 0:W.length)>0&&f(Re)})}var ze=a(he,2);be(ze,{size:"xs",class:"mt-2 text-gray hover:text-gray cursor-pointer",outline:!0,onclick:()=>M("csv_columns",{key:"",name:""}),children:(f,W)=>{var Q=$("Add Column");r(f,Q)},$$slots:{default:!0}});var Ce=a(ke,2),we=s(Ce),N=s(we);A(N,{for:"sort_by",children:(f,W)=>{var Q=$("Sort By");r(f,Q)},$$slots:{default:!0}});var Te=a(N,2);me(Te,{id:"sort_by",placeholder:"Field name for sorting",get value(){return t().sort_by},set value(f){t(t().sort_by=f,!0)}});var S=a(we,2),p=s(S);A(p,{for:"sort_type",children:(f,W)=>{var Q=$("Sort Order");r(f,Q)},$$slots:{default:!0}});var C=a(p,2);$t(C,{id:"sort_type",get value(){return t().sort_type},set value(f){t(t().sort_type=f,!0)},children:(f,W)=>{var Q=jo(),at=m(Q);at.value=at.__value="ascending";var it=a(at,2);it.value=it.__value="descending",r(f,Q)},$$slots:{default:!0}});var _=a(Ce,2),R=s(_),de=a(s(R),2),se=s(de);Qe(se,21,()=>t().content_resource_types,Xe,(f,W)=>{var Q=Do(),at=s(Q),it=a(at);it.__click=()=>{t(t().content_resource_types=t().content_resource_types.filter(ut=>ut!==e(W)),!0)},Ye(()=>Ze(at,`${e(W)??""} `)),r(f,Q)});var L=a(de,2);Qe(L,21,()=>Object.values(ge),Xe,(f,W)=>{var Q=Eo(),at=s(Q);{let ut=et(()=>`resource-type-${e(W)}`),_t=et(()=>t().content_resource_types.includes(e(W)));kt(at,{get id(){return e(ut)},get checked(){return e(_t)},onclick:()=>{t().content_resource_types.includes(e(W))?t(t().content_resource_types=t().content_resource_types.filter(gt=>gt!==e(W)),!0):t(t().content_resource_types=[...t().content_resource_types,e(W)],!0)}})}var it=a(at,2);{let ut=et(()=>`resource-type-${e(W)}`);A(it,{get for(){return e(ut)},class:"ml-2",children:(_t,gt)=>{var Rt=$();Ye(()=>Ze(Rt,e(W))),r(_t,Rt)},$$slots:{default:!0}})}r(f,Q)});var q=a(R,2),k=a(s(q),2),ce=s(k);Qe(ce,21,()=>t().content_schema_shortnames,Xe,(f,W)=>{var Q=Fo(),at=s(Q),it=a(at);it.__click=()=>{t(t().content_schema_shortnames=t().content_schema_shortnames.filter(ut=>ut!==e(W)),!0)},Ye(()=>Ze(at,`${e(W)??""} `)),r(f,Q)});var V=a(k,2);$t(V,{class:"mb-2",onclick:f=>{f.target.value&&!t().content_schema_shortnames.includes(f.target.value)&&(t(t().content_schema_shortnames=[...t().content_schema_shortnames,f.target.value],!0),f.target.value="")},children:(f,W)=>{var Q=$e(),at=m(Q);_r(at,()=>At.query({space_name:"management",type:Jt.search,subpath:"/schema",search:"",retrieve_json_payload:!0,limit:99}),null,(it,ut)=>{var _t=$e(),gt=m(_t);Qe(gt,17,()=>e(ut).records.map(Rt=>Rt.shortname),Xe,(Rt,ft)=>{var qt=zo(),Ht=s(qt),wt={};Ye(()=>{Ze(Ht,e(ft)),wt!==(wt=e(ft))&&(qt.value=(qt.__value=e(ft))??"")}),r(Rt,qt)}),r(it,_t)}),r(f,Q)},$$slots:{default:!0}});var fe=a(V,6),Ie=s(fe);Qe(Ie,21,()=>t().workflow_shortnames,Xe,(f,W)=>{var Q=Lo(),at=s(Q),it=a(at);it.__click=()=>{t(t().workflow_shortnames=t().workflow_shortnames.filter(ut=>ut!==e(W)),!0)},Ye(()=>Ze(at,`${e(W)??""} `)),r(f,Q)});var Ee=a(fe,2);$t(Ee,{class:"mb-2",onclick:f=>{f.target.value&&!t().workflow_shortnames.includes(f.target.value)&&(t(t().workflow_shortnames=[...t().workflow_shortnames,f.target.value],!0),f.target.value="")},children:(f,W)=>{var Q=$e(),at=m(Q);_r(at,()=>At.query({space_name:"management",type:Jt.search,subpath:"/workflow",search:"",retrieve_json_payload:!0,limit:99}),null,(it,ut)=>{var _t=$e(),gt=m(_t);Qe(gt,17,()=>e(ut).records.map(Rt=>Rt.shortname),Xe,(Rt,ft)=>{var qt=Ao(),Ht=s(qt),wt={};Ye(()=>{Ze(Ht,e(ft)),wt!==(wt=e(ft))&&(qt.value=(qt.__value=e(ft))??"")}),r(Rt,qt)}),r(it,_t)}),r(f,Q)},$$slots:{default:!0}});var J=a(_,2),G=a(s(J),2);{var F=f=>{var W=$e(),Q=m(W);Qe(Q,17,()=>t().enable_pdf_schema_shortnames,Xe,(at,it,ut)=>{var _t=qo(),gt=s(_t);me(gt,{placeholder:"Schema shortname",get value(){return t().enable_pdf_schema_shortnames[ut]},set value(ft){t(t().enable_pdf_schema_shortnames[ut]=ft,!0)}});var Rt=a(gt,2);be(Rt,{size:"xs",color:"red",onclick:()=>ee("enable_pdf_schema_shortnames",ut),children:(ft,qt)=>{var Ht=$("×");r(ft,Ht)},$$slots:{default:!0}}),r(at,_t)}),r(f,W)};h(G,f=>{var W;((W=t().enable_pdf_schema_shortnames)==null?void 0:W.length)>0&&f(F)})}var Ae=a(G,2);be(Ae,{size:"xs",class:"mt-2 text-gray hover:text-gray cursor-pointer",outline:!0,onclick:()=>M("enable_pdf_schema_shortnames",""),children:(f,W)=>{var Q=$("Add PDF Schema Shortname");r(f,Q)},$$slots:{default:!0}});var je=a(J,2),Ue=a(s(je),2),re=s(Ue),qe=s(re);kt(qe,{id:"allow_view",get checked(){return t().allow_view},set checked(f){t(t().allow_view=f,!0)}});var Se=a(qe,2);A(Se,{for:"allow_view",class:"ml-2",children:(f,W)=>{var Q=$("Allow resource view");r(f,Q)},$$slots:{default:!0}});var Ve=a(re,2),Be=s(Ve);kt(Be,{id:"allow_create",get checked(){return t().allow_create},set checked(f){t(t().allow_create=f,!0)}});var Ge=a(Be,2);A(Ge,{for:"allow_create",class:"ml-2",children:(f,W)=>{var Q=$("Allow resource creation");r(f,Q)},$$slots:{default:!0}});var st=a(Ve,2),ye=s(st);kt(ye,{id:"allow_update",get checked(){return t().allow_update},set checked(f){t(t().allow_update=f,!0)}});var We=a(ye,2);A(We,{for:"allow_update",class:"ml-2",children:(f,W)=>{var Q=$("Allow resource update");r(f,Q)},$$slots:{default:!0}});var Ke=a(st,2),rt=s(Ke);kt(rt,{id:"allow_delete",get checked(){return t().allow_delete},set checked(f){t(t().allow_delete=f,!0)}});var Ne=a(rt,2);A(Ne,{for:"allow_delete",class:"ml-2",children:(f,W)=>{var Q=$("Allow resource delete");r(f,Q)},$$slots:{default:!0}});var ot=a(Ke,2),nt=s(ot);kt(nt,{id:"allow_create_category",get checked(){return t().allow_create_category},set checked(f){t(t().allow_create_category=f,!0)}});var Tt=a(nt,2);A(Tt,{for:"allow_create_category",class:"ml-2",children:(f,W)=>{var Q=$("Allow folder creation");r(f,Q)},$$slots:{default:!0}});var yt=a(ot,2),ct=s(yt);kt(ct,{id:"allow_csv",get checked(){return t().allow_csv},set checked(f){t(t().allow_csv=f,!0)}});var jt=a(ct,2);A(jt,{for:"allow_csv",class:"ml-2",children:(f,W)=>{var Q=$("Allow CSV download");r(f,Q)},$$slots:{default:!0}});var vt=a(yt,2),Dt=s(vt);kt(Dt,{id:"allow_upload_csv",get checked(){return t().allow_upload_csv},set checked(f){t(t().allow_upload_csv=f,!0)}});var Ct=a(Dt,2);A(Ct,{for:"allow_upload_csv",class:"ml-2",children:(f,W)=>{var Q=$("Allow CSV upload");r(f,Q)},$$slots:{default:!0}});var tt=a(vt,2),lt=s(tt);kt(lt,{id:"use_media",get checked(){return t().use_media},set checked(f){t(t().use_media=f,!0)}});var xt=a(lt,2);A(xt,{for:"use_media",class:"ml-2",children:(f,W)=>{var Q=$("Content has media");r(f,Q)},$$slots:{default:!0}});var pt=a(tt,2),ht=s(pt);kt(ht,{id:"stream",get checked(){return t().stream},set checked(f){t(t().stream=f,!0)}});var bt=a(ht,2);A(bt,{for:"stream",class:"ml-2",children:(f,W)=>{var Q=$("Enable websocket stream");r(f,Q)},$$slots:{default:!0}});var Ft=a(pt,2),St=s(Ft);kt(St,{id:"expand_children",get checked(){return t().expand_children},set checked(f){t(t().expand_children=f,!0)}});var Ut=a(St,2);A(Ut,{for:"expand_children",class:"ml-2",children:(f,W)=>{var Q=$("Expand children");r(f,Q)},$$slots:{default:!0}});var Et=a(Ft,2),Gt=s(Et);kt(Gt,{id:"disable_filter",get checked(){return t().disable_filter},set checked(f){t(t().disable_filter=f,!0)}});var ur=a(Gt,2);A(ur,{for:"disable_filter",class:"ml-2",children:(f,W)=>{var Q=$("Disable filter");r(f,Q)},$$slots:{default:!0}}),r(b,T)},$$slots:{default:!0}}),It()}nr(["click"]);function Io(){let g=new Date().getTime(),o=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let j=Math.random()*16;return g>0?(j=(g+j)%16|0,g=Math.floor(g/16)):(j=(o+j)%16|0,o=Math.floor(o/16)),(t==="x"?j:j&3|8).toString(16)})}function Rr(g){var o;if(g===null)return null;if(g.id&&delete g.id,typeof g!="object")return g;if(Array.isArray(g))return g.map(Rr);for(const t in g)t!=="id"&&(g[t]=Rr(g[t])),t==="properties"&&(g.properties=Vo(g.properties));return g.type==="array"&&g.items&&(Object.keys(((o=g==null?void 0:g.items)==null?void 0:o.properties)??{}).length===1?g.items.type=g.items.properties[Object.keys(g.items.properties)[0]].type:(typeof g.items!="object"&&(g.items={type:"object"}),g.items.additionalProperties===void 0&&(g.items.additionalProperties=!1))),g}function Vo(g){if(!Array.isArray(g))return g;const o={};for(const t of g){const j=t.name;delete t.name,o[j]=t}return o}function Tr(g){if(!g||typeof g!="object")return g;if(g.id===void 0&&(g.id=Io()),Array.isArray(g))return g.map(Tr);const o={...g};for(const t in o)t!=="id"&&(o[t]=Tr(o[t])),t==="properties"&&(o.properties=Bo(o.properties));return o}function Bo(g){if(!g||typeof g!="object")return g;const o=[];for(const t in g)if(t!=="id"&&g.hasOwnProperty(t)){const j={name:t,...g[t]};j.title===void 0&&(j.title=""),j.description===void 0&&(j.description=""),o.push(j)}return o}function Uo(g,o=""){(!g||typeof g!="object")&&(g={type:"object",properties:[],required:[]});const t={id:crypto.randomUUID(),name:"",type:"string",title:"",description:""};if(o){const j=aa(g,o);j&&!j.properties&&(j.properties=[]),j&&j.properties.push(t)}else g.properties||(g.properties=[]),g.properties.push(t);return{...g}}function Ho(g,o){const t=aa(g,o);return t&&(t.items||(t.items={id:crypto.randomUUID(),type:"string"}),t.items.type==="object"&&!t.items.properties&&(t.items.properties=[])),{...g}}function kr(g,o,t){const j=o.split(".");let M=g;for(let b=0;b<j.length-1;b++){if(!M[j[b]])return g;M=M[j[b]]}const ee=j[j.length-1];return M[ee]?(M[ee].splice(t,1),{...g}):g}function aa(g,o){const t=o.split(".");let j=g;for(const M of t){if(!j[M])return null;j=j[M]}return j}function Jo(g,o){g.required||(g.required=[]);const t=g.required.indexOf(o);return t>-1?g.required.splice(t,1):g.required.push(o),{...g}}const pr=[{value:"string",name:"String"},{value:"number",name:"Number"},{value:"integer",name:"Integer"},{value:"boolean",name:"Boolean"},{value:"object",name:"Object"},{value:"array",name:"Array"},{value:"null",name:"Null"}];function Go(){return{type:"object",properties:{},required:[]}}var Wo=l('<span class="ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded"> </span>'),Ko=l('<span class="ml-2 text-xs bg-red-100 text-red-800 px-2 py-0.5 rounded">Required</span>'),Qo=l('<span class="font-medium"> </span> <!> <!>',1),Xo=l("<option> </option>"),Yo=l("<option>None</option> <option>Date-Time</option> <option>Date</option> <option>Time</option> <option>Email</option> <option>URI</option>",1),Zo=l('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><!> <!></div> <div><!> <!></div> <div><!> <!></div> <div><!> <!></div></div>'),No=l('<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><!> <!></div> <div><!> <!></div> <div><!> <!></div></div>'),el=l("<option> </option>"),tl=l("<option> </option>"),rl=l('<div class="mt-2 p-2 bg-white rounded border"><div class="grid grid-cols-1 md:grid-cols-2 gap-2"><div><!> <!></div> <div><!> <!></div></div> <div class="mt-2 flex justify-end"><!></div></div>'),al=l('<div class="col-span-2"><!> <div class="border p-2 rounded-md mt-1"><!> <!></div></div>'),sl=l('<div class="p-2 space-y-3"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><!> <!></div> <!></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><!> <!></div> <div><!> <!></div></div></div>'),ol=l('<div class="border p-3 rounded-md bg-gray-50"><div class="flex justify-between items-center mb-2"><h4 class="font-medium">Array Items</h4> <!></div> <!></div>'),ll=l("<option> </option>"),nl=l('<div class="mt-2 p-2 bg-white rounded border"><div class="grid grid-cols-1 md:grid-cols-2 gap-2"><div><!> <!></div> <div><!> <!></div></div> <div class="mt-2 flex justify-end"><!></div></div>'),il=l('<div class="border p-3 rounded-md bg-gray-50"><div class="flex justify-between items-center mb-2"><h4 class="font-medium">Object Properties</h4> <!></div> <!></div>'),dl=l('<div class="p-2 space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><!> <!></div> <div><!> <!></div> <div><!> <!></div> <div><!> <!></div></div> <!> <div class="flex items-center mt-4"><!> <!></div> <div class="flex justify-end mt-2"><!></div></div>'),vl=l('<p class="text-gray-500 text-center py-4">No properties defined. Click "Add Property" to start.</p>'),ul=l('<h2 class="text-xl font-bold mb-4">Schema Editor</h2> <div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><!> <!></div> <div><!> <!></div></div> <div class="border p-4 rounded-lg"><div class="flex justify-between items-center mb-4"><h3 class="font-semibold">Properties</h3> <!></div> <!></div></div>',1);function Jr(g,o){Mt(o,!0);let t=dt(o,"content",31,()=>mt({}));(!t()||Object.keys(t()).length===0)&&t(Go());let j=ie(mt(Tr(Qt(t()))));function M(b=""){i(j,Uo(e(j),b),!0)}function ee(b){return e(j).required&&e(j).required.includes(b)}Ot(()=>{const b=Rr(structuredClone(Qt(e(j))));t(b)}),Bt(g,{class:"p-4 max-w-4xl mx-auto my-2",children:(b,ae)=>{var T=ul(),x=a(m(T),2),u=s(x),D=s(u),E=s(D);A(E,{for:"schema-title",children:(te,le)=>{var Le=$("Schema Title");r(te,Le)},$$slots:{default:!0}});var X=a(E,2);me(X,{id:"schema-title",placeholder:"Schema title",get value(){return e(j).title},set value(te){e(j).title=te}});var _e=a(D,2),z=s(_e);A(z,{for:"schema-description",children:(te,le)=>{var Le=$("Schema Description");r(te,Le)},$$slots:{default:!0}});var I=a(z,2);me(I,{id:"schema-description",placeholder:"Schema description",get value(){return e(j).description},set value(te){e(j).description=te}});var w=a(u,2),O=s(w),B=a(s(O),2);be(B,{size:"xs",color:"blue",onclick:()=>M(),children:(te,le)=>{var Le=$("Add Property");r(te,Le)},$$slots:{default:!0}});var oe=a(O,2);{var c=te=>{mr(te,{flush:!0,children:(le,Le)=>{var pe=$e(),v=m(pe);Qe(v,17,()=>e(j).properties,Xe,(H,d,n)=>{Zt(H,{header:U=>{var De=Qo(),Y=m(De),Z=s(Y),ve=a(Y,2);{var Oe=Pe=>{var Je=Wo(),ke=s(Je);Ye(()=>Ze(ke,e(d).type)),r(Pe,Je)};h(ve,Pe=>{e(d).type&&Pe(Oe)})}var He=a(ve,2);{var Fe=Pe=>{var Je=Ko();r(Pe,Je)};h(He,Pe=>{ee(e(d).name)&&Pe(Fe)})}Ye(()=>Ze(Z,e(d).name||"New Property")),r(U,De)},children:(U,De)=>{var Y=dl(),Z=s(Y),ve=s(Z),Oe=s(ve);A(Oe,{for:`property-name-${n}`,children:(p,C)=>{var _=$("Property Name");r(p,_)},$$slots:{default:!0}});var He=a(Oe,2);me(He,{id:`property-name-${n}`,placeholder:"Property name",get value(){return e(d).name},set value(p){e(d).name=p}});var Fe=a(ve,2),Pe=s(Fe);A(Pe,{for:`property-type-${n}`,children:(p,C)=>{var _=$("Property Type");r(p,_)},$$slots:{default:!0}});var Je=a(Pe,2);$t(Je,{id:`property-type-${n}`,get value(){return e(d).type},set value(p){e(d).type=p},children:(p,C)=>{var _=$e(),R=m(_);Qe(R,17,()=>pr,Xe,(de,se)=>{var L=Xo(),q=s(L),k={};Ye(()=>{Ze(q,e(se).name),k!==(k=e(se).value)&&(L.value=(L.__value=e(se).value)??"")}),r(de,L)}),r(p,_)},$$slots:{default:!0}});var ke=a(Fe,2),Me=s(ke);A(Me,{for:`property-title-${n}`,children:(p,C)=>{var _=$("Title");r(p,_)},$$slots:{default:!0}});var ne=a(Me,2);me(ne,{id:`property-title-${n}`,placeholder:"Title",get value(){return e(d).title},set value(p){e(d).title=p}});var ue=a(ke,2),xe=s(ue);A(xe,{for:`property-description-${n}`,children:(p,C)=>{var _=$("Description");r(p,_)},$$slots:{default:!0}});var K=a(xe,2);me(K,{id:`property-description-${n}`,placeholder:"Description",get value(){return e(d).description},set value(p){e(d).description=p}});var he=a(Z,2);{var Re=p=>{var C=Zo(),_=s(C),R=s(_);A(R,{for:`property-minLength-${n}`,children:(J,G)=>{var F=$("Min Length");r(J,F)},$$slots:{default:!0}});var de=a(R,2);me(de,{id:`property-minLength-${n}`,type:"number",placeholder:"Min length",get value(){return e(d).minLength},set value(J){e(d).minLength=J}});var se=a(_,2),L=s(se);A(L,{for:`property-maxLength-${n}`,children:(J,G)=>{var F=$("Max Length");r(J,F)},$$slots:{default:!0}});var q=a(L,2);me(q,{id:`property-maxLength-${n}`,type:"number",placeholder:"Max length",get value(){return e(d).maxLength},set value(J){e(d).maxLength=J}});var k=a(se,2),ce=s(k);A(ce,{for:`property-pattern-${n}`,children:(J,G)=>{var F=$("Pattern (regex)");r(J,F)},$$slots:{default:!0}});var V=a(ce,2);me(V,{id:`property-pattern-${n}`,placeholder:"Pattern",get value(){return e(d).pattern},set value(J){e(d).pattern=J}});var fe=a(k,2),Ie=s(fe);A(Ie,{for:`property-format-${n}`,children:(J,G)=>{var F=$("Format");r(J,F)},$$slots:{default:!0}});var Ee=a(Ie,2);$t(Ee,{id:`property-format-${n}`,get value(){return e(d).format},set value(J){e(d).format=J},children:(J,G)=>{var F=Yo(),Ae=m(F);Ae.value=Ae.__value="";var je=a(Ae,2);je.value=je.__value="date-time";var Ue=a(je,2);Ue.value=Ue.__value="date";var re=a(Ue,2);re.value=re.__value="time";var qe=a(re,2);qe.value=qe.__value="email";var Se=a(qe,2);Se.value=Se.__value="uri",r(J,F)},$$slots:{default:!0}}),r(p,C)},ze=p=>{var C=$e(),_=m(C);{var R=se=>{var L=No(),q=s(L),k=s(q);A(k,{for:`property-minimum-${n}`,children:(F,Ae)=>{var je=$("Minimum");r(F,je)},$$slots:{default:!0}});var ce=a(k,2);me(ce,{id:`property-minimum-${n}`,type:"number",placeholder:"Minimum value",get value(){return e(d).minimum},set value(F){e(d).minimum=F}});var V=a(q,2),fe=s(V);A(fe,{for:`property-maximum-${n}`,children:(F,Ae)=>{var je=$("Maximum");r(F,je)},$$slots:{default:!0}});var Ie=a(fe,2);me(Ie,{id:`property-maximum-${n}`,type:"number",placeholder:"Maximum value",get value(){return e(d).maximum},set value(F){e(d).maximum=F}});var Ee=a(V,2),J=s(Ee);A(J,{for:`property-multipleOf-${n}`,children:(F,Ae)=>{var je=$("Multiple Of");r(F,je)},$$slots:{default:!0}});var G=a(J,2);me(G,{id:`property-multipleOf-${n}`,type:"number",placeholder:"Multiple of",get value(){return e(d).multipleOf},set value(F){e(d).multipleOf=F}}),r(se,L)},de=se=>{var L=$e(),q=m(L);{var k=V=>{var fe=ol(),Ie=s(fe),Ee=a(s(Ie),2);be(Ee,{size:"xs",color:"blue",onclick:()=>Ho(`properties.${n}`),children:(F,Ae)=>{var je=$("Configure Items");r(F,je)},$$slots:{default:!0}});var J=a(Ie,2);{var G=F=>{var Ae=sl(),je=s(Ae),Ue=s(je),re=s(Ue);A(re,{for:`items-type-${n}`,children:(Ne,ot)=>{var nt=$("Items Type");r(Ne,nt)},$$slots:{default:!0}});var qe=a(re,2);$t(qe,{id:`items-type-${n}`,get value(){return e(d).items.type},set value(Ne){e(d).items.type=Ne},children:(Ne,ot)=>{var nt=$e(),Tt=m(nt);Qe(Tt,17,()=>pr,Xe,(yt,ct)=>{var jt=el(),vt=s(jt),Dt={};Ye(()=>{Ze(vt,e(ct).name),Dt!==(Dt=e(ct).value)&&(jt.value=(jt.__value=e(ct).value)??"")}),r(yt,jt)}),r(Ne,nt)},$$slots:{default:!0}});var Se=a(Ue,2);{var Ve=Ne=>{var ot=al(),nt=s(ot);A(nt,{children:(vt,Dt)=>{var Ct=$("Object Properties");r(vt,Ct)},$$slots:{default:!0}});var Tt=a(nt,2),yt=s(Tt);be(yt,{size:"xs",color:"blue",onclick:()=>M(`properties.${n}.items`),children:(vt,Dt)=>{var Ct=$("Add Object Property");r(vt,Ct)},$$slots:{default:!0}});var ct=a(yt,2);{var jt=vt=>{var Dt=$e(),Ct=m(Dt);Qe(Ct,17,()=>e(d).items.properties,Xe,(tt,lt,xt)=>{var pt=rl(),ht=s(pt),bt=s(ht),Ft=s(bt);A(Ft,{for:`item-property-name-${n}-${xt}`,children:(W,Q)=>{var at=$("Name");r(W,at)},$$slots:{default:!0}});var St=a(Ft,2);me(St,{id:`item-property-name-${n}-${xt}`,placeholder:"Property name",get value(){return e(lt).name},set value(W){e(lt).name=W}});var Ut=a(bt,2),Et=s(Ut);A(Et,{for:`item-property-type-${n}-${xt}`,children:(W,Q)=>{var at=$("Type");r(W,at)},$$slots:{default:!0}});var Gt=a(Et,2);$t(Gt,{id:`item-property-type-${n}-${xt}`,get value(){return e(lt).type},set value(W){e(lt).type=W},children:(W,Q)=>{var at=$e(),it=m(at);Qe(it,17,()=>pr,Xe,(ut,_t)=>{var gt=tl(),Rt=s(gt),ft={};Ye(()=>{Ze(Rt,e(_t).name),ft!==(ft=e(_t).value)&&(gt.value=(gt.__value=e(_t).value)??"")}),r(ut,gt)}),r(W,at)},$$slots:{default:!0}});var ur=a(ht,2),f=s(ur);be(f,{size:"xs",color:"red",onclick:()=>kr(`properties.${n}.items.properties`,xt),children:(W,Q)=>{var at=$("Remove");r(W,at)},$$slots:{default:!0}}),r(tt,pt)}),r(vt,Dt)};h(ct,vt=>{e(d).items.properties.length>0&&vt(jt)})}r(Ne,ot)};h(Se,Ne=>{e(d).items.type==="object"&&e(d).items.properties&&Ne(Ve)})}var Be=a(je,2),Ge=s(Be),st=s(Ge);A(st,{for:`array-minItems-${n}`,children:(Ne,ot)=>{var nt=$("Min Items");r(Ne,nt)},$$slots:{default:!0}});var ye=a(st,2);me(ye,{id:`array-minItems-${n}`,type:"number",placeholder:"Min items",get value(){return e(d).minItems},set value(Ne){e(d).minItems=Ne}});var We=a(Ge,2),Ke=s(We);A(Ke,{for:`array-maxItems-${n}`,children:(Ne,ot)=>{var nt=$("Max Items");r(Ne,nt)},$$slots:{default:!0}});var rt=a(Ke,2);me(rt,{id:`array-maxItems-${n}`,type:"number",placeholder:"Max items",get value(){return e(d).maxItems},set value(Ne){e(d).maxItems=Ne}}),r(F,Ae)};h(J,F=>{e(d).items&&F(G)})}r(V,fe)},ce=V=>{var fe=$e(),Ie=m(fe);{var Ee=J=>{var G=il(),F=s(G),Ae=a(s(F),2);be(Ae,{size:"xs",color:"blue",onclick:()=>M(`properties.${n}`),children:(re,qe)=>{var Se=$("Add Object Property");r(re,Se)},$$slots:{default:!0}});var je=a(F,2);{var Ue=re=>{var qe=$e(),Se=m(qe);Qe(Se,17,()=>e(d).properties,Xe,(Ve,Be,Ge)=>{var st=nl(),ye=s(st),We=s(ye),Ke=s(We);A(Ke,{for:`nested-property-name-${n}-${Ge}`,children:(ct,jt)=>{var vt=$("Name");r(ct,vt)},$$slots:{default:!0}});var rt=a(Ke,2);me(rt,{id:`nested-property-name-${n}-${Ge}`,placeholder:"Property name",get value(){return e(Be).name},set value(ct){e(Be).name=ct}});var Ne=a(We,2),ot=s(Ne);A(ot,{for:`nested-property-type-${n}-${Ge}`,children:(ct,jt)=>{var vt=$("Type");r(ct,vt)},$$slots:{default:!0}});var nt=a(ot,2);$t(nt,{id:`nested-property-type-${n}-${Ge}`,get value(){return e(Be).type},set value(ct){e(Be).type=ct},children:(ct,jt)=>{var vt=$e(),Dt=m(vt);Qe(Dt,17,()=>pr,Xe,(Ct,tt)=>{var lt=ll(),xt=s(lt),pt={};Ye(()=>{Ze(xt,e(tt).name),pt!==(pt=e(tt).value)&&(lt.value=(lt.__value=e(tt).value)??"")}),r(Ct,lt)}),r(ct,vt)},$$slots:{default:!0}});var Tt=a(ye,2),yt=s(Tt);be(yt,{size:"xs",color:"red",onclick:()=>kr(`properties.${n}.properties`,Ge),children:(ct,jt)=>{var vt=$("Remove");r(ct,vt)},$$slots:{default:!0}}),r(Ve,st)}),r(re,qe)};h(je,re=>{e(d).properties&&e(d).properties.length>0&&re(Ue)})}r(J,G)};h(Ie,J=>{e(d).type==="object"&&J(Ee)},!0)}r(V,fe)};h(q,V=>{e(d).type==="array"?V(k):V(ce,!1)},!0)}r(se,L)};h(_,se=>{e(d).type==="number"||e(d).type==="integer"?se(R):se(de,!1)},!0)}r(p,C)};h(he,p=>{e(d).type==="string"?p(Re):p(ze,!1)})}var Ce=a(he,2),we=s(Ce);{let p=et(()=>ee(e(d).name));kt(we,{id:`property-required-${n}`,get checked(){return e(p)},onclick:()=>Jo(e(d).name)})}var N=a(we,2);A(N,{for:`property-required-${n}`,class:"ml-2",children:(p,C)=>{var _=$("Required");r(p,_)},$$slots:{default:!0}});var Te=a(Ce,2),S=s(Te);be(S,{size:"xs",color:"red",onclick:()=>kr("properties",n),children:(p,C)=>{var _=$("Remove Property");r(p,_)},$$slots:{default:!0}}),r(U,Y)},$$slots:{header:!0,default:!0}})}),r(le,pe)},$$slots:{default:!0}})},P=te=>{var le=vl();r(te,le)};h(oe,te=>{e(j).properties&&e(j).properties.length>0?te(c):te(P,!1)})}r(b,T)},$$slots:{default:!0}}),It()}var cl=l("<!>Remove",1),_l=l('<div class="flex items-center gap-2 mt-1"><!> <!></div>'),fl=l("<!>Add Role",1),ml=l('<div class="flex justify-between items-center mb-2"><h4 class="text-lg font-medium"></h4> <!></div> <div class="space-y-3"><div><!> <!></div> <div><!> <!> <!></div></div>',1),pl=l("<!>Add Initial State",1),hl=l('<h3 class="text-xl font-semibold mb-2">Initial States</h3> <div class="space-y-4"><!> <!></div>',1),gl=l('<span class="flex justify-between items-center w-full"><span> </span> <!></span>'),$l=l('<div class="flex items-center gap-2 mt-1"><!> <!></div>'),yl=l("<!>Add Role",1),bl=l('<div class="flex justify-between items-center mb-2"><h5 class="font-medium"></h5> <!></div> <div class="grid grid-cols-2 gap-3"><div><!> <!></div> <div><!> <!></div></div> <div class="mt-2"><!> <!> <!></div>',1),xl=l("<!>Add Transition",1),wl=l('<div class="flex justify-between items-center mb-2"><h5 class="font-medium"></h5> <!></div> <div class="grid grid-cols-2 gap-3"><div><!> <!></div> <div><!> <!></div> <div><!> <!></div> <div><!> <!></div></div>',1),kl=l("<!>Add Resolution",1),Pl=l('<div class="p-2 space-y-4"><div class="grid grid-cols-2 gap-4"><div><!> <!></div> <div><!> <!></div></div> <div class="mt-4"><!> <div class="space-y-3"><!> <!></div></div> <div class="mt-4"><!> <div class="space-y-3"><!> <!></div></div></div>'),Sl=l("<!>Add State",1),Rl=l('<h3 class="text-xl font-semibold mb-2">States</h3> <div class="space-y-4"><!> <!></div>',1),Tl=l('<h1 class="text-2xl font-bold mb-4">Workflow Form</h1> <div><!> <!></div> <div><!> <!></div> <!> <!>',1);function Gr(g,o){Mt(o,!0);let t=dt(o,"content",31,()=>mt({}));t({name:t().name||"",states:t().states||[],illustration:t().illustration||"",initial_state:t().initial_state||[]});function j(){t().states===void 0&&t(t().states=[],!0),t(t().states=[...t().states,{name:"",state:"",next:[],resolutions:[]}],!0)}function M(X,_e){X.stopPropagation(),t(t().states=t().states.filter((z,I)=>I!==_e),!0)}function ee(X){t(t().states[X].next=[...t().states[X].next,{roles:[],state:"",action:""}],!0)}function b(X,_e){t(t().states[X].next=t().states[X].next.filter((z,I)=>I!==_e),!0)}function ae(X){t(t().states[X].resolutions=[...t().states[X].resolutions,{ar:"",en:"",ku:"",key:""}],!0)}function T(X,_e){t(t().states[X].resolutions=t().states[X].resolutions.filter((z,I)=>I!==_e),!0)}function x(){t().initial_state===void 0&&t(t().initial_state=[],!0),t(t().initial_state=[...t().initial_state,{name:"",roles:[]}],!0)}function u(X){t(t().initial_state=t().initial_state.filter((_e,z)=>z!==X),!0)}function D(X){X.roles===void 0&&(X.roles=[]),X.roles=[...X.roles||[],""]}function E(X,_e){X.roles=X.roles.filter((z,I)=>I!==_e)}Bt(g,{class:"p-4 max-w-4xl mx-auto my-2",children:(X,_e)=>{var z=Tl(),I=a(m(z),2),w=s(I);A(w,{for:"workflowName",class:"mb-2",children:(le,Le)=>{var pe=$("Workflow Name");r(le,pe)},$$slots:{default:!0}});var O=a(w,2);me(O,{id:"workflowName",placeholder:"Enter workflow name",required:!0,get value(){return t().name},set value(le){t(t().name=le,!0)}});var B=a(I,2),oe=s(B);A(oe,{for:"illustration",class:"mb-2",children:(le,Le)=>{var pe=$("Illustration");r(le,pe)},$$slots:{default:!0}});var c=a(oe,2);me(c,{id:"illustration",placeholder:"Enter illustration name or path",get value(){return t().illustration},set value(le){t(t().illustration=le,!0)}});var P=a(B,2);Bt(P,{class:"p-4 max-w-4xl mx-auto",children:(le,Le)=>{var pe=hl(),v=a(m(pe),2),H=s(v);Qe(H,17,()=>t().initial_state,Xe,(n,y,U)=>{Bt(n,{class:"p-4 w-full",children:(De,Y)=>{var Z=ml(),ve=m(Z),Oe=s(ve);Oe.textContent=`Initial State ${U+1}`;var He=a(Oe,2);be(He,{class:"cursor-pointer text-red-500 hover:text-red-500",outline:!0,size:"xs",onclick:()=>u(U),children:(K,he)=>{var Re=cl(),ze=m(Re);rr(ze,{class:"mr-1"}),r(K,Re)},$$slots:{default:!0}});var Fe=a(ve,2),Pe=s(Fe),Je=s(Pe);A(Je,{for:`initialState${U}Name`,children:(K,he)=>{var Re=$("Name");r(K,Re)},$$slots:{default:!0}});var ke=a(Je,2);me(ke,{id:`initialState${U}Name`,placeholder:"Initial state name",get value(){return e(y).name},set value(K){e(y).name=K}});var Me=a(Pe,2),ne=s(Me);A(ne,{children:(K,he)=>{var Re=$("Roles");r(K,Re)},$$slots:{default:!0}});var ue=a(ne,2);Qe(ue,17,()=>e(y).roles,Xe,(K,he,Re)=>{var ze=_l(),Ce=s(ze);me(Ce,{placeholder:"Role name",get value(){return e(y).roles[Re]},set value(N){e(y).roles[Re]=N}});var we=a(Ce,2);be(we,{class:"cursor-pointer text-red-500 hover:text-red-500",outline:!0,size:"xs",onclick:()=>E(e(y),Re),children:(N,Te)=>{rr(N,{})},$$slots:{default:!0}}),r(K,ze)});var xe=a(ue,2);be(xe,{class:"cursor-pointer mt-2 text-primary hover:text-primary",outline:!0,size:"xs",onclick:()=>D(e(y)),children:(K,he)=>{var Re=fl(),ze=m(Re);Kt(ze,{class:"mr-1"}),r(K,Re)},$$slots:{default:!0}}),r(De,Z)},$$slots:{default:!0}})});var d=a(H,2);be(d,{onclick:x,class:"cursor-pointer mt-2 text-primary hover:text-primary",outline:!0,children:(n,y)=>{var U=pl(),De=m(U);Kt(De,{class:"mr-1"}),r(n,U)},$$slots:{default:!0}}),r(le,pe)},$$slots:{default:!0}});var te=a(P,2);Bt(te,{class:"p-4 max-w-4xl mx-auto",children:(le,Le)=>{var pe=Rl(),v=a(m(pe),2),H=s(v);Qe(H,17,()=>t().states,Xe,(n,y,U)=>{mr(n,{children:(De,Y)=>{Zt(De,{header:ve=>{var Oe=gl(),He=s(Oe),Fe=s(He),Pe=a(He,2);be(Pe,{class:"cursor-pointer text-red-500 hover:text-red-500 ",size:"xs",onclick:Je=>M(Je,U),children:(Je,ke)=>{rr(Je,{})},$$slots:{default:!0}}),Ye(()=>Ze(Fe,e(y).name||`State ${U+1}`)),r(ve,Oe)},children:(ve,Oe)=>{var He=Pl(),Fe=s(He),Pe=s(Fe),Je=s(Pe);A(Je,{for:`state${U}Name`,children:(p,C)=>{var _=$("Name");r(p,_)},$$slots:{default:!0}});var ke=a(Je,2);me(ke,{id:`state${U}Name`,placeholder:"Human-readable state name",get value(){return e(y).name},set value(p){e(y).name=p}});var Me=a(Pe,2),ne=s(Me);A(ne,{for:`state${U}Id`,children:(p,C)=>{var _=$("State ID");r(p,_)},$$slots:{default:!0}});var ue=a(ne,2);me(ue,{id:`state${U}Id`,placeholder:"Internal state identifier",get value(){return e(y).state},set value(p){e(y).state=p}});var xe=a(Fe,2),K=s(xe);A(K,{class:"text-lg",children:(p,C)=>{var _=$("Next Transitions");r(p,_)},$$slots:{default:!0}});var he=a(K,2),Re=s(he);Qe(Re,17,()=>e(y).next,Xe,(p,C,_)=>{Bt(p,{class:"p-3",children:(R,de)=>{var se=bl(),L=m(se),q=s(L);q.textContent=`Transition ${_+1}`;var k=a(q,2);be(k,{class:"cursor-pointer text-red-500 hover:text-red-500",size:"xs",onclick:()=>b(U,_),children:(re,qe)=>{rr(re,{})},$$slots:{default:!0}});var ce=a(L,2),V=s(ce),fe=s(V);A(fe,{children:(re,qe)=>{var Se=$("Next State");r(re,Se)},$$slots:{default:!0}});var Ie=a(fe,2);me(Ie,{placeholder:"Next state identifier",get value(){return e(C).state},set value(re){e(C).state=re}});var Ee=a(V,2),J=s(Ee);A(J,{children:(re,qe)=>{var Se=$("Action");r(re,Se)},$$slots:{default:!0}});var G=a(J,2);me(G,{placeholder:"Action name",get value(){return e(C).action},set value(re){e(C).action=re}});var F=a(ce,2),Ae=s(F);A(Ae,{children:(re,qe)=>{var Se=$("Roles");r(re,Se)},$$slots:{default:!0}});var je=a(Ae,2);Qe(je,17,()=>e(C).roles,Xe,(re,qe,Se)=>{var Ve=$l(),Be=s(Ve);me(Be,{placeholder:"Role name",get value(){return e(C).roles[Se]},set value(st){e(C).roles[Se]=st}});var Ge=a(Be,2);be(Ge,{class:"cursor-pointer text-red-500 hover:text-red-500",size:"xs",onclick:()=>E(e(C),Se),children:(st,ye)=>{rr(st,{})},$$slots:{default:!0}}),r(re,Ve)});var Ue=a(je,2);be(Ue,{class:"mt-2 cursor-pointer text-primary hover:text-primar",outline:!0,size:"xs",onclick:()=>D(e(C)),children:(re,qe)=>{var Se=yl(),Ve=m(Se);Kt(Ve,{class:"mr-1"}),r(re,Se)},$$slots:{default:!0}}),r(R,se)},$$slots:{default:!0}})});var ze=a(Re,2);be(ze,{class:"cursor-pointer text-primary hover:text-primar",outline:!0,size:"sm",onclick:()=>ee(U),children:(p,C)=>{var _=xl(),R=m(_);Kt(R,{class:"mr-1"}),r(p,_)},$$slots:{default:!0}});var Ce=a(xe,2),we=s(Ce);A(we,{class:"text-lg",children:(p,C)=>{var _=$("Resolutions");r(p,_)},$$slots:{default:!0}});var N=a(we,2),Te=s(N);Qe(Te,17,()=>e(y).resolutions,Xe,(p,C,_)=>{Bt(p,{class:"p-3",children:(R,de)=>{var se=wl(),L=m(se),q=s(L);q.textContent=`Resolution ${_+1}`;var k=a(q,2);be(k,{class:"cursor-pointer text-red-500 hover:text-red-500",size:"xs",onclick:()=>T(U,_),children:(Se,Ve)=>{rr(Se,{})},$$slots:{default:!0}});var ce=a(L,2),V=s(ce),fe=s(V);A(fe,{children:(Se,Ve)=>{var Be=$("Key");r(Se,Be)},$$slots:{default:!0}});var Ie=a(fe,2);me(Ie,{placeholder:"Resolution key",get value(){return e(C).key},set value(Se){e(C).key=Se}});var Ee=a(V,2),J=s(Ee);A(J,{children:(Se,Ve)=>{var Be=$("English");r(Se,Be)},$$slots:{default:!0}});var G=a(J,2);me(G,{placeholder:"English translation",get value(){return e(C).en},set value(Se){e(C).en=Se}});var F=a(Ee,2),Ae=s(F);A(Ae,{children:(Se,Ve)=>{var Be=$("Arabic");r(Se,Be)},$$slots:{default:!0}});var je=a(Ae,2);me(je,{placeholder:"Arabic translation",get value(){return e(C).ar},set value(Se){e(C).ar=Se}});var Ue=a(F,2),re=s(Ue);A(re,{children:(Se,Ve)=>{var Be=$("Kurdish");r(Se,Be)},$$slots:{default:!0}});var qe=a(re,2);me(qe,{placeholder:"Kurdish translation",get value(){return e(C).ku},set value(Se){e(C).ku=Se}}),r(R,se)},$$slots:{default:!0}})});var S=a(Te,2);be(S,{class:"cursor-pointer text-primary hover:text-primar",outline:!0,size:"sm",onclick:()=>ae(U),children:(p,C)=>{var _=kl(),R=m(_);Kt(R,{class:"mr-1"}),r(p,_)},$$slots:{default:!0}}),r(ve,He)},$$slots:{header:!0,default:!0}})},$$slots:{default:!0}})});var d=a(H,2);be(d,{outline:!0,onclick:j,class:"mt-2 cursor-pointer text-primary hover:text-primary",children:(n,y)=>{var U=Sl(),De=m(U);Kt(De,{class:"mr-1"}),r(n,U)},$$slots:{default:!0}}),r(le,pe)},$$slots:{default:!0}}),r(X,z)},$$slots:{default:!0}}),It()}var Cl=l('<p class="text-gray-600 mb-4"> </p>'),Ol=l('<span class="text-red-500 text-lg" style="vertical-align: center">*</span>'),jl=l("<!> ",1),Dl=l('<p class="text-xs text-gray-500 mb-1"> </p>'),El=l("<option> </option>"),Fl=l("<option>Select an option</option> <!>",1),zl=l('<div class="flex items-center gap-2"><!></div>'),Ll=l("<option> </option>"),Al=l("<div><!> <!></div>"),ql=l('<div class="grid grid-cols-1 gap-2"></div>'),Ml=l("<option> </option>"),Il=l('<div class="mt-2 p-2 bg-gray-50 rounded border"><!> <div class="flex justify-end mt-2"><!></div></div>'),Vl=l('<p class="text-gray-500 text-center py-2">No items added yet.</p>'),Bl=l('<div class="border p-4 rounded-lg"><div class="flex justify-between items-center mb-2"><h3 class="font-semibold"> </h3> <!></div> <!></div>'),Ul=l('<div class="mb-3"><!> <!></div>'),Hl=l('<div class="p-2 space-y-3"></div>'),Jl=l('<span slot="header" class="font-medium"> </span>'),Gl=l('<div class="mb-4"><!> <!> <!></div>'),Wl=l('<h2 class="text-xl font-bold mb-4"> </h2> <!> <div class="space-y-6"></div>',1),Kl=l('<p class="text-gray-500 text-center py-4">No schema provided or schema has no properties.</p>');function Wr(g,o){Mt(o,!0);let t=dt(o,"content",31,()=>mt({}));dr(()=>{o.schema&&o.schema.properties&&j(o.schema.properties)});function j(ae){for(const T in ae){const x=ae[T];t()[T]===void 0&&(x.type==="string"?t(t()[T]=x.default||"",!0):x.type==="number"||x.type==="integer"?t(t()[T]=x.default!==void 0?x.default:null,!0):x.type==="boolean"?t(t()[T]=x.default||!1,!0):x.type==="array"?t(t()[T]=x.default||[],!0):x.type==="object"&&x.properties?(t(t()[T]={},!0),j(x.properties)):t(t()[T]=null,!0))}t({...t()})}function M(ae){let T=t();const x=ae.split(".");for(let E=0;E<x.length;E++)T[x[E]]||(T[x[E]]=[]),T=T[x[E]];let u=o.schema.properties;for(let E=0;E<x.length;E++)u[x[E]]&&(u=u[x[E]]);let D={};if(u.items&&u.items.type==="object"&&u.items.properties)for(const E in u.items.properties){const X=u.items.properties[E];X.type==="string"?D[E]="":X.type==="number"||X.type==="integer"?D[E]=null:X.type==="boolean"?D[E]=!1:X.type==="array"?D[E]=[]:X.type==="object"?D[E]={}:D[E]=null}else u.items&&(u.items.type==="string"?D="":u.items.type==="number"||u.items.type==="integer"?D=null:u.items.type==="boolean"?D=!1:D=null);T.push(D),t({...t()})}function ee(ae,T){let x=t();const u=ae.split(".");for(let E=0;E<u.length-1;E++){if(!x[u[E]])return;x=x[u[E]]}const D=u[u.length-1];x[D]&&(x[D].splice(T,1),t({...t()}))}function b(ae){return o.schema.required&&o.schema.required.includes(ae)}Bt(g,{class:"p-4 max-w-4xl mx-auto my-2",children:(ae,T)=>{var x=$e(),u=m(x);{var D=X=>{var _e=Wl(),z=m(_e),I=s(z),w=a(z,2);{var O=oe=>{var c=Cl(),P=s(c);Ye(()=>Ze(P,o.schema.description)),r(oe,c)};h(w,oe=>{o.schema.description&&oe(O)})}var B=a(w,2);Qe(B,21,()=>Object.keys(o.schema.properties),Xe,(oe,c)=>{const P=et(()=>o.schema.properties[e(c)]);var te=Gl(),le=s(te);A(le,{get for(){return e(c)},class:"mb-2",children:(n,y)=>{var U=jl(),De=m(U);{var Y=ve=>{var Oe=Ol();r(ve,Oe)};h(De,ve=>{b(e(c))&&ve(Y)})}var Z=a(De);Ye(()=>Ze(Z,` ${(e(P).title||e(c))??""}`)),r(n,U)},$$slots:{default:!0}});var Le=a(le,2);{var pe=n=>{var y=Dl(),U=s(y);Ye(()=>Ze(U,e(P).description)),r(n,y)};h(Le,n=>{e(P).description&&n(pe)})}var v=a(Le,2);{var H=n=>{var y=$e(),U=m(y);{var De=Z=>{{let ve=et(()=>b(e(c)));me(Z,{get id(){return e(c)},type:"date",get required(){return e(ve)},get value(){return t()[e(c)]},set value(Oe){t(t()[e(c)]=Oe,!0)}})}},Y=Z=>{var ve=$e(),Oe=m(ve);{var He=Pe=>{{let Je=et(()=>b(e(c)));me(Pe,{get id(){return e(c)},type:"time",get required(){return e(Je)},get value(){return t()[e(c)]},set value(ke){t(t()[e(c)]=ke,!0)}})}},Fe=Pe=>{var Je=$e(),ke=m(Je);{var Me=ue=>{{let xe=et(()=>b(e(c)));me(ue,{get id(){return e(c)},type:"email",get required(){return e(xe)},get value(){return t()[e(c)]},set value(K){t(t()[e(c)]=K,!0)}})}},ne=ue=>{var xe=$e(),K=m(xe);{var he=ze=>{{let Ce=et(()=>b(e(c)));me(ze,{get id(){return e(c)},type:"url",get required(){return e(Ce)},get value(){return t()[e(c)]},set value(we){t(t()[e(c)]=we,!0)}})}},Re=ze=>{var Ce=$e(),we=m(Ce);{var N=S=>{{let p=et(()=>b(e(c)));$t(S,{get id(){return e(c)},get required(){return e(p)},get value(){return t()[e(c)]},set value(C){t(t()[e(c)]=C,!0)},children:(C,_)=>{var R=Fl(),de=m(R);de.value=de.__value="";var se=a(de,2);Qe(se,17,()=>e(P).enum,Xe,(L,q)=>{var k=El(),ce=s(k),V={};Ye(()=>{Ze(ce,e(q)),V!==(V=e(q))&&(k.value=(k.__value=e(q))??"")}),r(L,k)}),r(C,R)},$$slots:{default:!0}})}},Te=S=>{var p=$e(),C=m(p);{var _=de=>{{let se=et(()=>b(e(c)));Dr(de,{get id(){return e(c)},rows:3,get required(){return e(se)},get value(){return t()[e(c)]},set value(L){t(t()[e(c)]=L,!0)}})}},R=de=>{{let se=et(()=>b(e(c)));me(de,{get id(){return e(c)},type:"text",get required(){return e(se)},get minlength(){return e(P).minLength},get maxlength(){return e(P).maxLength},get pattern(){return e(P).pattern},get value(){return t()[e(c)]},set value(L){t(t()[e(c)]=L,!0)}})}};h(C,de=>{e(P).maxLength&&e(P).maxLength>100?de(_):de(R,!1)},!0)}r(S,p)};h(we,S=>{e(P).enum?S(N):S(Te,!1)},!0)}r(ze,Ce)};h(K,ze=>{e(P).format==="uri"?ze(he):ze(Re,!1)},!0)}r(ue,xe)};h(ke,ue=>{e(P).format==="email"?ue(Me):ue(ne,!1)},!0)}r(Pe,Je)};h(Oe,Pe=>{e(P).format==="time"?Pe(He):Pe(Fe,!1)},!0)}r(Z,ve)};h(U,Z=>{e(P).format==="date-time"||e(P).format==="date"?Z(De):Z(Y,!1)})}r(n,y)},d=n=>{var y=$e(),U=m(y);{var De=Z=>{{let ve=et(()=>b(e(c))),Oe=et(()=>e(P).type==="integer"?1:e(P).multipleOf||"any");me(Z,{get id(){return e(c)},type:"number",get required(){return e(ve)},get min(){return e(P).minimum},get max(){return e(P).maximum},get step(){return e(Oe)},get value(){return t()[e(c)]},set value(He){t(t()[e(c)]=He,!0)}})}},Y=Z=>{var ve=$e(),Oe=m(ve);{var He=Pe=>{var Je=zl(),ke=s(Je);kt(ke,{get id(){return e(c)},get checked(){return t()[e(c)]},set checked(Me){t(t()[e(c)]=Me,!0)}}),r(Pe,Je)},Fe=Pe=>{var Je=$e(),ke=m(Je);{var Me=ue=>{var xe=Bl(),K=s(xe),he=s(K),Re=s(he),ze=a(he,2);be(ze,{size:"xs",color:"blue",onclick:()=>M(e(c)),children:(Te,S)=>{var p=$("Add Item");r(Te,p)},$$slots:{default:!0}});var Ce=a(K,2);{var we=Te=>{var S=$e(),p=m(S);Qe(p,17,()=>t()[e(c)],Xe,(C,_,R)=>{var de=Il(),se=s(de);{var L=V=>{var fe=ql();Qe(fe,21,()=>Object.keys(e(P).items.properties),Xe,(Ie,Ee)=>{const J=et(()=>e(P).items.properties[e(Ee)]);var G=Al(),F=s(G);{let re=et(()=>`${e(c)}-${R}-${e(Ee)}`);A(F,{get for(){return e(re)},class:"text-sm",children:(qe,Se)=>{var Ve=$();Ye(()=>Ze(Ve,e(J).title||e(Ee))),r(qe,Ve)},$$slots:{default:!0}})}var Ae=a(F,2);{var je=re=>{var qe=$e(),Se=m(qe);{var Ve=Ge=>{{let st=et(()=>`${e(c)}-${R}-${e(Ee)}`);$t(Ge,{get id(){return e(st)},get value(){return e(_)[e(Ee)]},set value(ye){e(_)[e(Ee)]=ye},children:(ye,We)=>{var Ke=$e(),rt=m(Ke);Qe(rt,17,()=>e(J).enum,Xe,(Ne,ot)=>{var nt=Ll(),Tt=s(nt),yt={};Ye(()=>{Ze(Tt,e(ot)),yt!==(yt=e(ot))&&(nt.value=(nt.__value=e(ot))??"")}),r(Ne,nt)}),r(ye,Ke)},$$slots:{default:!0}})}},Be=Ge=>{{let st=et(()=>`${e(c)}-${R}-${e(Ee)}`);me(Ge,{get id(){return e(st)},get value(){return e(_)[e(Ee)]},set value(ye){e(_)[e(Ee)]=ye}})}};h(Se,Ge=>{e(J).enum?Ge(Ve):Ge(Be,!1)})}r(re,qe)},Ue=re=>{var qe=$e(),Se=m(qe);{var Ve=Ge=>{{let st=et(()=>`${e(c)}-${R}-${e(Ee)}`);me(Ge,{get id(){return e(st)},type:"number",get value(){return e(_)[e(Ee)]},set value(ye){e(_)[e(Ee)]=ye}})}},Be=Ge=>{var st=$e(),ye=m(st);{var We=Ke=>{{let rt=et(()=>`${e(c)}-${R}-${e(Ee)}`);kt(Ke,{get id(){return e(rt)},get checked(){return e(_)[e(Ee)]},set checked(Ne){e(_)[e(Ee)]=Ne}})}};h(ye,Ke=>{e(J).type==="boolean"&&Ke(We)},!0)}r(Ge,st)};h(Se,Ge=>{e(J).type==="number"||e(J).type==="integer"?Ge(Ve):Ge(Be,!1)},!0)}r(re,qe)};h(Ae,re=>{e(J).type==="string"?re(je):re(Ue,!1)})}r(Ie,G)}),r(V,fe)},q=V=>{var fe=$e(),Ie=m(fe);{var Ee=G=>{var F=$e(),Ae=m(F);{var je=re=>{$t(re,{get value(){return t()[e(c)][R]},set value(qe){t(t()[e(c)][R]=qe,!0)},children:(qe,Se)=>{var Ve=$e(),Be=m(Ve);Qe(Be,17,()=>e(P).items.enum,Xe,(Ge,st)=>{var ye=Ml(),We=s(ye),Ke={};Ye(()=>{Ze(We,e(st)),Ke!==(Ke=e(st))&&(ye.value=(ye.__value=e(st))??"")}),r(Ge,ye)}),r(qe,Ve)},$$slots:{default:!0}})},Ue=re=>{me(re,{get value(){return t()[e(c)][R]},set value(qe){t(t()[e(c)][R]=qe,!0)}})};h(Ae,re=>{e(P).items.enum?re(je):re(Ue,!1)})}r(G,F)},J=G=>{var F=$e(),Ae=m(F);{var je=re=>{me(re,{type:"number",get value(){return t()[e(c)][R]},set value(qe){t(t()[e(c)][R]=qe,!0)}})},Ue=re=>{var qe=$e(),Se=m(qe);{var Ve=Be=>{kt(Be,{get checked(){return t()[e(c)][R]},set checked(Ge){t(t()[e(c)][R]=Ge,!0)}})};h(Se,Be=>{e(P).items.type==="boolean"&&Be(Ve)},!0)}r(re,qe)};h(Ae,re=>{e(P).items.type==="number"||e(P).items.type==="integer"?re(je):re(Ue,!1)},!0)}r(G,F)};h(Ie,G=>{e(P).items.type==="string"?G(Ee):G(J,!1)})}r(V,fe)};h(se,V=>{e(P).items.type==="object"&&e(P).items.properties?V(L):V(q,!1)})}var k=a(se,2),ce=s(k);be(ce,{size:"xs",color:"red",onclick:()=>ee(e(c),R),children:(V,fe)=>{var Ie=$("Remove");r(V,Ie)},$$slots:{default:!0}}),r(C,de)}),r(Te,S)},N=Te=>{var S=Vl();r(Te,S)};h(Ce,Te=>{t()[e(c)]&&t()[e(c)].length>0?Te(we):Te(N,!1)})}Ye(()=>Ze(Re,e(P).title||e(c))),r(ue,xe)},ne=ue=>{var xe=$e(),K=m(xe);{var he=Re=>{mr(Re,{flush:!0,children:(ze,Ce)=>{Zt(ze,{children:(we,N)=>{var Te=Hl();Qe(Te,21,()=>Object.keys(e(P).properties),Xe,(S,p)=>{const C=et(()=>e(P).properties[e(p)]);var _=Ul(),R=s(_);{let q=et(()=>`${e(c)}-${e(p)}`);A(R,{get for(){return e(q)},class:"text-sm",children:(k,ce)=>{var V=$();Ye(()=>Ze(V,e(C).title||e(p))),r(k,V)},$$slots:{default:!0}})}var de=a(R,2);{var se=q=>{{let k=et(()=>`${e(c)}-${e(p)}`);me(q,{get id(){return e(k)},get value(){return t()[e(c)][e(p)]},set value(ce){t(t()[e(c)][e(p)]=ce,!0)}})}},L=q=>{var k=$e(),ce=m(k);{var V=Ie=>{{let Ee=et(()=>`${e(c)}-${e(p)}`);me(Ie,{get id(){return e(Ee)},type:"number",get value(){return t()[e(c)][e(p)]},set value(J){t(t()[e(c)][e(p)]=J,!0)}})}},fe=Ie=>{var Ee=$e(),J=m(Ee);{var G=F=>{{let Ae=et(()=>`${e(c)}-${e(p)}`);kt(F,{get id(){return e(Ae)},get checked(){return t()[e(c)][e(p)]},set checked(je){t(t()[e(c)][e(p)]=je,!0)}})}};h(J,F=>{e(C).type==="boolean"&&F(G)},!0)}r(Ie,Ee)};h(ce,Ie=>{e(C).type==="number"||e(C).type==="integer"?Ie(V):Ie(fe,!1)},!0)}r(q,k)};h(de,q=>{e(C).type==="string"?q(se):q(L,!1)})}r(S,_)}),r(we,Te)},$$slots:{default:!0,header:(we,N)=>{var Te=Jl(),S=s(Te);Ye(()=>Ze(S,e(P).title||e(c))),r(we,Te)}}})},$$slots:{default:!0}})};h(K,Re=>{e(P).type==="object"&&e(P).properties&&Re(he)},!0)}r(ue,xe)};h(ke,ue=>{e(P).type==="array"?ue(Me):ue(ne,!1)},!0)}r(Pe,Je)};h(Oe,Pe=>{e(P).type==="boolean"?Pe(He):Pe(Fe,!1)},!0)}r(Z,ve)};h(U,Z=>{e(P).type==="number"||e(P).type==="integer"?Z(De):Z(Y,!1)},!0)}r(n,y)};h(v,n=>{e(P).type==="string"?n(H):n(d,!1)})}r(oe,te)}),Ye(()=>Ze(I,o.schema.title||"Form")),r(X,_e)},E=X=>{var _e=Kl();r(X,_e)};h(u,X=>{o.schema&&o.schema.properties?X(D):X(E,!1)})}r(ae,x)},$$slots:{default:!0}}),It()}var Ql=l("<th> </th>"),Xl=l("<td><!></td>"),Yl=l('<tr class="mt-2"><!><td><!></td></tr>'),Zl=l("<td><!></td>"),Nl=l('<thead><tr><!><th>Action</th></tr></thead> <tbody><!><tr class="mt-2"><!><td><!></td></tr></tbody>',1),en=l('<h1 class="text-2xl font-bold mb-4">Translation Form</h1> <!>',1);function Kr(g,o){Mt(o,!0);let t=dt(o,"entries",15);t({items:t().items||[]});let j=ie(mt({}));function M(){t(t().items=[...t().items,e(j)],!0),i(j,{},!0)}function ee(b){t().items.splice(b,1),t(t().items=[...t().items],!0)}Bt(g,{class:"p-4 max-w-4xl mx-auto my-2",children:(b,ae)=>{var T=en(),x=a(m(T),2);Zr(x,{children:(u,D)=>{var E=Nl(),X=m(E),_e=s(X),z=s(_e);Qe(z,17,()=>o.columns,Xe,(P,te)=>{var le=Ql(),Le=s(le);Ye(pe=>Ze(Le,pe),[()=>e(te)[0].toUpperCase()+e(te).slice(1)]),r(P,le)});var I=a(X,2),w=s(I);Qe(w,17,()=>t().items,Xe,(P,te,le)=>{var Le=Yl(),pe=s(Le);Qe(pe,17,()=>o.columns,Xe,(d,n)=>{var y=Xl(),U=s(y);me(U,{get value(){return e(te)[e(n)]},set value(De){e(te)[e(n)]=De}}),r(d,y)});var v=a(pe),H=s(v);be(H,{class:"cursor-pointer bg-red-600",onclick:()=>ee(le),children:(d,n)=>{Fa(d,{size:"sm"})},$$slots:{default:!0}}),r(P,Le)});var O=a(w),B=s(O);Qe(B,17,()=>o.columns,Xe,(P,te)=>{var le=Zl(),Le=s(le);{let pe=et(()=>`New ${e(te)}`);me(Le,{get placeholder(){return e(pe)},get value(){return e(j)[e(te)]},set value(v){e(j)[e(te)]=v}})}r(P,le)});var oe=a(B),c=s(oe);be(c,{class:"cursor-pointer bg-primary",onclick:M,children:(P,te)=>{Kt(P,{size:"sm"})},$$slots:{default:!0}}),r(u,E)},$$slots:{default:!0}}),r(b,T)},$$slots:{default:!0}}),It()}var tn=l('<article class="prose max-w-full"><div class="h-100 pt-1 editor-container svelte-o8dj4v"></div></article>');function rn(g,o){Mt(o,!0);const t=Cr();let j=dt(o,"uid",3,""),M=dt(o,"content",15,""),ee,b=null;const ae=Nt({name:"underline",selector:"u",styleSelector:'[style*="text-decoration:underline"], [style*="text-decoration: underline"]',commands:w=>()=>w.toggleTextFormat({underline:!0}),shortcuts:"Mod+U",render:(w,O)=>er("u",null,O)}),T=Nt({name:"strike",selector:"strike, s",styleSelector:'[style*="text-decoration:line-through"], [style*="text-decoration: line-through"]',commands:w=>()=>w.toggleTextFormat({strike:!0}),shortcuts:"Mod+Shift+X",render:(w,O)=>er("s",null,O)}),x=Nt({name:"superscript",selector:"sup",commands:w=>()=>w.toggleTextFormat({superscript:!0}),render:(w,O)=>er("sup",null,O)}),u=Nt({name:"subscript",selector:"sub",commands:w=>()=>w.toggleTextFormat({subscript:!0}),render:(w,O)=>er("sub",null,O)}),D=Nt({name:"align-left",selector:'[style*="text-align:left"], [style*="text-align: left"]',commands:w=>()=>w.formatLine({align:"left"}),render:(w,O)=>er("div",{style:"text-align: left"},O)}),E=Nt({name:"align-center",selector:'[style*="text-align:center"], [style*="text-align: center"]',commands:w=>()=>w.formatLine({align:"center"}),render:(w,O)=>er("div",{style:"text-align: center"},O)}),X=Nt({name:"align-right",selector:'[style*="text-align:right"], [style*="text-align: right"]',commands:w=>()=>w.formatLine({align:"right"}),render:(w,O)=>er("div",{style:"text-align: right"},O)}),_e=Nt({name:"align-justify",selector:'[style*="text-align:justify"], [style*="text-align: justify"]',commands:w=>()=>w.formatLine({align:"justify"}),render:(w,O)=>er("div",{style:"text-align: justify"},O)});dr(async()=>{b=new Wa({root:ee,html:M(),types:{lines:["paragraph","header","list","blockquote","code-block","hr",D,E,X,_e],formats:["bold","italic",ae,T,x,u,"code","link","clear"],embeds:["image","br"]}}),b.on("change",()=>{M(b.getHTML()),t("changed")}),z()});function z(){const w=document.createElement("div");w.id=`toolbar-${j()}`,w.className="editor-toolbar";const O=document.createElement("div");O.className="toolbar-group";const B=document.createElement("div");B.className="toolbar-group";const oe=document.createElement("div");oe.className="toolbar-group";const c=document.createElement("div");c.className="toolbar-group";const P=document.createElement("div");P.className="toolbar-group";const te=document.createElement("div");te.className="toolbar-group",I(O,"Bold","B",()=>b.formatText("bold")),I(O,"Italic","I",()=>b.formatText("italic")),I(O,"Underline","U",()=>b.formatText("underline")),I(O,"Strike","S",()=>b.formatText("strike")),I(O,"Superscript","x²",()=>b.formatText("superscript")),I(O,"Subscript","x₂",()=>b.formatText("subscript")),I(O,"Remove Format","X",()=>b.removeFormat()),I(B,"Heading 1","H1",()=>b.formatLine({header:1})),I(B,"Heading 2","H2",()=>b.formatLine({header:2})),I(B,"Paragraph","¶",()=>b.formatLine("paragraph")),I(B,"Blockquote",'""',()=>b.formatLine("blockquote")),I(B,"Ordered List","1.",()=>b.formatLine({list:"ordered"})),I(B,"Unordered List","•",()=>b.formatLine({list:"bullet"})),I(B,"Horizontal Rule","—",()=>b.formatLine("hr")),I(oe,"Align Left","↤",()=>b.formatLine("align-left")),I(oe,"Align Center","↔",()=>b.formatLine("align-center")),I(oe,"Align Right","↦",()=>b.formatLine("align-right")),I(oe,"Justify","☰",()=>b.formatLine("align-justify")),I(c,"Link","🔗",()=>{const le=prompt("Enter URL:");le&&b.formatText({link:le})}),I(c,"Image","🖼",()=>{const le=prompt("Enter image URL:");le&&b.insert({image:le})}),I(P,"Undo","↶",()=>b.modules.history.undo()),I(P,"Redo","↷",()=>b.modules.history.redo()),I(te,"LTR","LTR",()=>{ee.dir="ltr",b.formatLine({direction:"ltr"})}),I(te,"RTL","RTL",()=>{ee.dir="rtl",b.formatLine({direction:"rtl"})}),w.appendChild(O),w.appendChild(B),w.appendChild(oe),w.appendChild(c),w.appendChild(P),w.appendChild(te),ee.parentNode.insertBefore(w,ee)}function I(w,O,B,oe){const c=document.createElement("button");c.title=O,c.className="toolbar-button",c.textContent=B,c.addEventListener("click",oe),w.appendChild(c)}Ot(()=>{if(b&&typeof b.setHTML=="function"){const w=b.getHTML();M()!==w&&b.setHTML(M())}}),Bt(g,{class:"h-full max-w-full pt-1",children:(w,O)=>{var B=tn(),oe=s(B);or(oe,c=>ee=c,()=>ee),Ye(()=>la(oe,"id",`htmleditor-${j()??""}`)),r(w,B)},$$slots:{default:!0}}),It()}var an=l("<strong>B</strong>"),sn=l("<i>I</i>"),on=l("<del>S</del>"),ln=l("<span>ul</span>"),nn=l("<span>li</span>"),dn=l("<span>H1</span>"),vn=l("<span>H2</span>"),un=l("<span>H3</span>"),cn=l("<span>table</span>"),_n=l("<span>list view</span>"),fn=l('<div class="w-full"><textarea rows="22" maxlength="4096" class="w-full font-mono bg-white border border-gray-300 rounded-lg p-2.5 focus:ring-blue-500 focus:border-blue-500"></textarea></div>'),mn=l('<div class="w-full"><article class="prose"><!></article></div>'),pn=l("<!> <!>",1),hn=l('<div class="flex flex-wrap justify-end mt-2 pt-2"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <!>',1);function gn(g,o){Mt(o,!0);const t=Cr();wr.use(Ka()),wr.use(Qa({prefix:"my-prefix-"}));let j=dt(o,"content",15,"");typeof j()!="string"&&j("");let M,ee=0,b=0;function ae(){ee=M.selectionStart,b=M.selectionEnd}const T=`{% ListView 
   type="subpath"
   space_name="" 
   subpath="/" 
   is_clickable=false %}
{% /ListView %}
`,x=`| Header 1 | Header 2 |
|----------|----------|
|  Cell1   |  Cell2   |`;function u(E){if(E.ctrlKey&&["b","i","t"].includes(E.key))switch(E.preventDefault(),E.key){case"b":D("**");break;case"i":D("_");break;case"t":D("~~");break}}function D(E,X=!0,_e=!1){if(!(X&&ee===0&&b===0)){if(X)M.value=M.value.substring(0,ee)+E+M.value.substring(ee,b)+E+M.value.substring(b);else if(ee=M.selectionStart,b=M.selectionEnd,_e){const z=M.value.split(`
`);let I=M.value.substring(0,ee).split(`
`).length-1,w=M.value.substring(0,b).split(`
`).length-1;M.value[b]===`
`&&w--;for(let O=I;O<=w;O++)z[O]=`${E} `+z[O];M.value=z.join(`
`)}else{let z=M.value.lastIndexOf(`
`,ee-1)+1,I=M.value.indexOf(`
`,b);I===-1&&(I=M.value.length),M.value=M.value.substring(0,z)+`${E} `+M.value.substring(z,I)+M.value.substring(I)}ee=0,b=0,j(structuredClone(M.value))}}Bt(g,{class:"h-full max-w-full pt-1",children:(E,X)=>{var _e=hn(),z=m(_e),I=s(z);be(I,{size:"xs",color:"light",class:"mx-1",onclick:()=>D("**"),children:(v,H)=>{var d=an();r(v,d)},$$slots:{default:!0}});var w=a(I,2);be(w,{size:"xs",color:"light",class:"mx-1",onclick:()=>D("_"),children:(v,H)=>{var d=sn();r(v,d)},$$slots:{default:!0}});var O=a(w,2);be(O,{size:"xs",color:"light",class:"mx-1",onclick:()=>D("~~"),children:(v,H)=>{var d=on();r(v,d)},$$slots:{default:!0}});var B=a(O,2);be(B,{size:"xs",color:"light",class:"mx-1",onclick:()=>D("*",!1,!0),children:(v,H)=>{var d=ln();r(v,d)},$$slots:{default:!0}});var oe=a(B,2);be(oe,{size:"xs",color:"light",class:"mx-1",onclick:()=>D("1.",!1,!0),children:(v,H)=>{var d=nn();r(v,d)},$$slots:{default:!0}});var c=a(oe,2);be(c,{size:"xs",color:"light",class:"mx-1",onclick:()=>D("#",!1),children:(v,H)=>{var d=dn();r(v,d)},$$slots:{default:!0}});var P=a(c,2);be(P,{size:"xs",color:"light",class:"mx-1",onclick:()=>D("##",!1),children:(v,H)=>{var d=vn();r(v,d)},$$slots:{default:!0}});var te=a(P,2);be(te,{size:"xs",color:"light",class:"mx-1",onclick:()=>D("###",!1),children:(v,H)=>{var d=un();r(v,d)},$$slots:{default:!0}});var le=a(te,2);be(le,{size:"xs",color:"light",class:"mx-1",onclick:()=>D(x,!1),children:(v,H)=>{var d=cn();r(v,d)},$$slots:{default:!0}});var Le=a(le,2);be(Le,{size:"xs",color:"light",class:"mx-1",onclick:()=>D(T,!1),children:(v,H)=>{var d=_n();r(v,d)},$$slots:{default:!0}});var pe=a(z,2);Sa(pe,{children:(v,H)=>{var d=pn(),n=m(d);Ar(n,{open:!0,title:"Editor",children:(U,De)=>{var Y=fn(),Z=s(Y);Z.__keydown=u,Z.__input=()=>t("changed"),or(Z,ve=>M=ve,()=>M),Pr("select",Z,ae),Pr("blur",Z,ve=>{ve.preventDefault(),M.focus()}),Xr(Z,j),r(U,Y)},$$slots:{default:!0}});var y=a(n,2);Ar(y,{title:"Preview",children:(U,De)=>{var Y=mn(),Z=s(Y),ve=s(Z);na(ve,()=>wr(j())),r(U,Y)},$$slots:{default:!0}}),r(v,d)},$$slots:{default:!0}}),r(E,_e)},$$slots:{default:!0}}),It()}nr(["keydown","input"]);var $n=l("Content Type <!>",1),yn=l('<div role="status" class="max-w-sm animate-pulse"><div class="h-3 bg-gray-200 rounded-full dark:bg-gray-700 mx-2 my-2.5"></div></div>'),bn=l("Schema <!>",1),xn=l("<!> <!>",1),wn=l('<div role="status" class="max-w-sm animate-pulse"><div class="h-3 bg-gray-200 rounded-full dark:bg-gray-700 mx-2 my-2.5"></div></div>'),kn=l("Workflow shortname <!>",1),Pn=l('<textarea class="w-full h-full my-2"></textarea>'),Sn=l('<div class="my-2"><!></div>'),Rn=l("<!> <!> <!> <!> <!>  <!>",1);function Tn(g,o){var le,Le,pe;Mt(o,!0);const t=()=>Pt(jr,"$params",M),j=()=>Pt(Er,"$currentEntry",M),[M,ee]=ir();let b=dt(o,"isCreate",3,!0),ae=dt(o,"selectedSchema",15),T=dt(o,"contentType",15),x=dt(o,"selectedWorkflow",15),u=dt(o,"content",15),D=dt(o,"errorContent",15);const E=t().subpath;let X=[{name:"JSON",value:"json"},{name:"HTML",value:"html"},{name:"Markdown",value:"markdown"},{name:"Text",value:"text"}];function _e(v,H){v=v.filter(y=>!["tree","text","table"].includes(y.text));const d={separator:!0};return v.slice(0,v.length-2).concat([d,{space:!0}])}let z=ie(!1);async function I(){try{i(z,!1);const v=await At.retrieveEntry({resource_type:ge.schema,space_name:"management",subpath:"schema",shortname:"folder_rendering",retrieve_json_payload:!0,retrieve_attachments:!1,validate_schema:!0});u({json:v&&yr(v.payload.body)})}catch(v){D(v.response.data),i(z,!1)}finally{i(z,!0)}}Ot(()=>{b()&&o.selectedResourceType&&Yt(()=>{i(z,!1),o.selectedResourceType===ge.folder?I():(ae(null),u({json:{}}))})});const w=(pe=(Le=(le=j())==null?void 0:le.entry)==null?void 0:Le.payload)==null?void 0:pe.body;let O=[],B=ie(null);b()||At.query({space_name:t().space_name,type:Jt.search,subpath:"/schema",search:"@shortname:"+ae(),retrieve_json_payload:!0,limit:100}).then(v=>{if(v&&v.records&&v.records.length>0){O=v.records;const H=O.find(d=>d.shortname===ae());H&&i(B,H.attributes.payload.body,!0)}else i(B,null)}),o.selectedResourceType===ge.folder&&At.retrieveEntry({resource_type:ge.schema,space_name:"management",subpath:"schema",shortname:"folder_rendering",retrieve_json_payload:!0,retrieve_attachments:!0,validate_schema:!0}).then(v=>{ae("folder_rendering"),i(B,v.payload.body,!0),i(z,!0)}).catch(v=>{D(v.response.data),i(z,!1)}),Ot(()=>{T()===Lr.json&&(O&&ae()?Yt(async()=>{const v=O.find(H=>H.shortname===ae());v!==void 0&&(i(B,v.attributes.payload.body,!0),b()&&(o.selectedResourceType===ge.content&&ae()==="translation"?u({json:[]}):u({json:v&&yr(e(B))})))}):b()&&Yt(()=>{i(B,null),u({json:{}})}))});function oe(v){var y;if(O=v.records,v===null)return[{name:"None",value:null}];let H=[];const d=v.records.map(U=>U.shortname);o.selectedResourceType===ge.folder?H=["folder_rendering",...d]:H=d.filter(U=>!["meta_schema","folder_rendering"].includes(U));let n=H.map(U=>({name:U,value:U}));return w&&((y=w==null?void 0:w.content_schema_shortnames)!=null&&y.length)&&(n=n.filter(U=>w.content_schema_shortnames.includes(U.value))),n.unshift({name:"None",value:null}),n}Ot(()=>{b()&&T()===Lr.json&&(o.selectedInputMode===Vt.json?Yt(()=>{u({text:JSON.stringify(tr(Qt(u())),null,2)})}):o.selectedInputMode===Vt.form&&Yt(()=>{u({json:tr(Qt(u()))})}))});var c=$e(),P=m(c);{var te=v=>{var H=Rn(),d=m(H);{var n=ke=>{var Me=xn(),ne=m(Me);{var ue=he=>{A(he,{class:"mt-3",children:(Re,ze)=>{var Ce=$n(),we=a(m(Ce));$t(we,{class:"mt-2",get items(){return X},get value(){return T()},onchange:N=>{N.target.value!=="json"?u(""):u({json:{}}),T(N.target.value)}}),r(Re,Ce)},$$slots:{default:!0}})};h(ne,he=>{o.selectedResourceType===ge.content&&he(ue)})}var xe=a(ne,2);{var K=he=>{A(he,{class:"mt-3",children:(Re,ze)=>{var Ce=bn(),we=a(m(Ce));_r(we,()=>At.query({space_name:t().space_name,type:Jt.search,subpath:"/schema",search:"",retrieve_json_payload:!0,limit:100}),N=>{var Te=yn();r(N,Te)},(N,Te)=>{{let S=et(()=>oe(e(Te)));$t(N,{class:"mt-2",get items(){return e(S)},get value(){return ae()},set value(p){ae(p)}})}}),r(Re,Ce)},$$slots:{default:!0}})};h(xe,he=>{(T()==="json"||o.selectedResourceType!==ge.content)&&he(K)})}r(ke,Me)};h(d,ke=>{b()&&!["workflows","schema"].includes(E)&&![ge.folder,ge.role,ge.permission].includes(o.selectedResourceType)&&ke(n)})}var y=a(d,2);{var U=ke=>{var Me=$e(),ne=m(Me);{var ue=K=>{var he=$e(),Re=m(he);{var ze=we=>{var N=$e(),Te=m(N);{var S=p=>{Hr(p,{get content(){return u().json},set content(C){u(u().json=C,!0)}})};h(Te,p=>{u().json&&p(S)})}r(we,N)},Ce=we=>{Hr(we,{get content(){return u()},set content(N){u(N)}})};h(Re,we=>{b()?we(ze):we(Ce,!1)})}r(K,he)},xe=K=>{var he=$e(),Re=m(he);{var ze=Ce=>{br(Ce,{onRenderMenu:_e,get mode(){return xr.text},get content(){return u()},set content(we){u(we)}})};h(Re,Ce=>{b()&&o.selectedInputMode===Vt.json&&Ce(ze)},!0)}r(K,he)};h(ne,K=>{o.selectedInputMode===Vt.form?K(ue):K(xe,!1)})}r(ke,Me)};h(y,ke=>{o.selectedResourceType===ge.folder&&e(z)&&ke(U)})}var De=a(y,2);{var Y=ke=>{A(ke,{class:"mt-3",children:(Me,ne)=>{var ue=kn(),xe=a(m(ue));_r(xe,()=>Ea(t().space_name),K=>{var he=wn();r(K,he)},(K,he)=>{{let Re=et(()=>e(he).map(ze=>({name:ze.shortname,value:ze.shortname})));$t(K,{class:"mt-2",get items(){return e(Re)},placeholder:"Select Workflow",get value(){return x()},set value(ze){x(ze)}})}}),r(Me,ue)},$$slots:{default:!0}})};h(De,ke=>{b()&&o.selectedResourceType===ge.ticket&&ke(Y)})}var Z=a(De,2);{var ve=ke=>{var Me=$e(),ne=m(Me);{var ue=K=>{var he=$e(),Re=m(he);{var ze=we=>{var N=$e(),Te=m(N);{var S=p=>{Jr(p,{get content(){return u().json},set content(C){u(u().json=C,!0)}})};h(Te,p=>{u().json&&p(S)})}r(we,N)},Ce=we=>{Jr(we,{get content(){return u()},set content(N){u(N)}})};h(Re,we=>{b()?we(ze):we(Ce,!1)})}r(K,he)},xe=K=>{var he=$e(),Re=m(he);{var ze=Ce=>{br(Ce,{onRenderMenu:_e,get mode(){return xr.text},get content(){return u()},set content(we){u(we)}})};h(Re,Ce=>{b()&&o.selectedInputMode===Vt.json&&Ce(ze)},!0)}r(K,he)};h(ne,K=>{o.selectedInputMode===Vt.form?K(ue):K(xe,!1)})}r(ke,Me)};h(Z,ke=>{o.selectedResourceType===ge.schema&&ke(ve)})}var Oe=a(Z,2);{var He=ke=>{var Me=$e(),ne=m(Me);{var ue=xe=>{var K=$e(),he=m(K);{var Re=Ce=>{var we=$e(),N=m(we);{var Te=S=>{Gr(S,{get content(){return u().json},set content(p){u(u().json=p,!0)}})};h(N,S=>{u().json&&S(Te)})}r(Ce,we)},ze=Ce=>{Gr(Ce,{get content(){return u()},set content(we){u(we)}})};h(he,Ce=>{b()?Ce(Re):Ce(ze,!1)})}r(xe,K)};h(ne,xe=>{o.selectedInputMode===Vt.form&&xe(ue)})}r(ke,Me)};h(Oe,ke=>{E==="workflows"&&ke(He)})}var Fe=a(Oe,2);{var Pe=ke=>{var Me=$e(),ne=m(Me);{var ue=xe=>{var K=$e(),he=m(K);{var Re=Ce=>{{let we=et(()=>Object.keys(e(B).properties.items.items.properties));Kr(Ce,{get columns(){return e(we)},get entries(){return u().json},set entries(N){u(u().json=N,!0)}})}},ze=Ce=>{{let we=et(()=>Object.keys(e(B).properties.items.items.properties));Kr(Ce,{get columns(){return e(we)},get entries(){return u()},set entries(N){u(N)}})}};h(he,Ce=>{b()?Ce(Re):Ce(ze,!1)})}r(xe,K)};h(ne,xe=>{e(B)&&xe(ue)})}r(ke,Me)},Je=ke=>{var Me=$e(),ne=m(Me);{var ue=K=>{rn(K,{get content(){return u()},set content(he){u(he)}})},xe=K=>{var he=$e(),Re=m(he);{var ze=we=>{gn(we,{get content(){return u()},set content(N){u(N)}})},Ce=we=>{var N=$e(),Te=m(N);{var S=C=>{var _=Pn();Xr(_,u),r(C,_)},p=C=>{var _=Sn(),R=s(_);{var de=se=>{var L=$e(),q=m(L);{var k=V=>{var fe=$e(),Ie=m(fe);{var Ee=J=>{var G=$e(),F=m(G);{var Ae=Ue=>{var re=$e(),qe=m(re);{var Se=Ve=>{Wr(Ve,{get schema(){return e(B)},get content(){return u().json},set content(Be){u(u().json=Be,!0)}})};h(qe,Ve=>{u().json&&Ve(Se)})}r(Ue,re)},je=Ue=>{Wr(Ue,{get schema(){return e(B)},get content(){return u()},set content(re){u(re)}})};h(F,Ue=>{b()?Ue(Ae):Ue(je,!1)})}r(J,G)};h(Ie,J=>{e(B)&&J(Ee)})}r(V,fe)},ce=V=>{var fe=$e(),Ie=m(fe);{var Ee=J=>{br(J,{onRenderMenu:_e,get mode(){return xr.text},get content(){return u()},set content(G){u(G)}})};h(Ie,J=>{b()&&o.selectedInputMode===Vt.json&&J(Ee)},!0)}r(V,fe)};h(q,V=>{o.selectedInputMode===Vt.form?V(k):V(ce,!1)})}r(se,L)};h(R,se=>{ra.includes(o.selectedResourceType)&&se(de)})}r(C,_)};h(Te,C=>{o.selectedResourceType===ge.content&&T()==="text"?C(S):C(p,!1)},!0)}r(we,N)};h(Re,we=>{o.selectedResourceType===ge.content&&T()==="markdown"?we(ze):we(Ce,!1)},!0)}r(K,he)};h(ne,K=>{o.selectedResourceType===ge.content&&T()==="html"?K(ue):K(xe,!1)},!0)}r(ke,Me)};h(Fe,ke=>{o.selectedResourceType===ge.content&&ae()==="translation"?ke(Pe):ke(Je,!1)})}r(v,H)};h(P,v=>{Ha.includes(o.selectedResourceType)||v(te)})}r(g,c),It(),ee()}var Cn=l("<h3>Create New Entry</h3>"),On=l("<!> ",1),jn=l("<div></div>"),Dn=l("<!> Creating ...",1),En=l('<div class="w-full flex flex-row justify-between"><!> <div><!> <!></div></div>'),Fn=l('<span class="font-medium"> </span>'),zn=l("Resource Type <!>",1),Ln=l('<div id="error-content" class="mt-3"><!></div>'),An=l("<!> <div><!> <!> <!> <!> <!></div>",1);function qn(g,o){var Le,pe,v;Mt(o,!0);const t=()=>Pt(Er,"$currentEntry",ee),j=()=>Pt(ar,"$currentListView",ee),M=()=>Pt(Ja,"$spaceChildren",ee),[ee,b]=ir();let ae=dt(o,"isOpen",15,!1);const T=(v=(pe=(Le=t())==null?void 0:Le.entry)==null?void 0:pe.payload)==null?void 0:v.body;let x=ie(mt(ge.content)),u=ie(mt([])),D=ie(mt(Vt.form));function E(){if(o.space_name==="management")if(o.subpath==="users"){if(Wt("create","management","users",ge.user)){i(u,[{name:ge.user.toString(),value:ge.user}],!0);return}}else if(o.subpath==="roles"){if(Wt("create","management","roles",ge.role)){i(u,[{name:ge.role.toString(),value:ge.role}],!0);return}}else if(o.subpath==="permissions"){if(Wt("create","management","permissions",ge.permission)){i(u,[{name:ge.permission.toString(),value:ge.permission}],!0);return}}else i(u,[{name:ge.content.toString(),value:ge.content}],!0);if(o.subpath==="schema"){if(Wt("create",o.space_name,"schema",ge.schema)){i(u,[{name:ge.schema.toString(),value:ge.schema}],!0);return}}else if(o.subpath==="workflows"){if(Wt("create",o.space_name,"workflows",ge.content)){i(u,[{name:ge.content.toString(),value:ge.content}],!0);return}}else i(u,[],!0),Wt("create",o.space_name,o.subpath,ge.content)&&i(u,[...e(u),{name:ge.content.toString(),value:ge.content}],!0),Wt("create",o.space_name,o.subpath,ge.ticket)&&i(u,[...e(u),{name:ge.ticket.toString(),value:ge.ticket}],!0),Wt("create",o.space_name,o.subpath,ge.folder)&&i(u,[...e(u),{name:ge.folder.toString(),value:ge.folder}],!0)}function X(){var H;E(),T&&((H=T==null?void 0:T.content_resource_types)!=null&&H.length)&&i(u,e(u).filter(d=>T.content_resource_types.includes(d.value)),!0),i(x,e(u)[0].value,!0)}X();let _e=ie(null),z=ie(mt({json:{}})),I=ie(mt({})),w=ie("json"),O=ie(null),B,oe,c=ie(!1),P=ie(null);async function te(){if(i(P,null),!B()){i(P,"Please fill all required fields in the meta form.");return}if([ge.user,ge.role,ge.permission].includes(e(x))&&!oe()){i(P,"Please fill all required fields in the respective resource type form.");return}try{i(c,!0);let H=null;const d=Qt(e(I)),n=d.shortname;delete d.shortname;const y={resource_type:e(x),shortname:n,subpath:o.subpath,attributes:{...d}};e(x)===ge.ticket?y.attributes={...y.attributes,workflow_shortname:e(le),payload:{body:tr(Qt(e(z))),schema_shortname:e(_e),content_type:"json"}}:e(x)===ge.schema?y.attributes={...y.attributes,payload:{body:tr(Qt(e(z))),schema_shortname:"meta_schema",content_type:"json"}}:e(x)===ge.content&&o.subpath==="workflows"?y.attributes={...y.attributes,payload:{body:tr(Qt(e(z))),schema_shortname:"workflow",content_type:"json"}}:e(x)===ge.content?y.attributes={...y.attributes,payload:{body:tr(Qt(e(z))),schema_shortname:e(w)==="json"?e(_e):null,content_type:e(w)}}:e(_e)?y.attributes={...y.attributes,payload:{body:tr(Qt(e(z))),schema_shortname:e(_e),content_type:"json"}}:(y.attributes={...y.attributes,payload:{body:tr(Qt(e(z))),schema_shortname:null,content_type:"json"}},y.attributes.payload===null&&y.attributes.schema_shortname===null&&delete y.attributes.payload);const U={space_name:o.space_name,request_type:lr.create,records:[{resource_type:e(x),subpath:o.subpath,shortname:e(I).shortname,attributes:ka(y.attributes)}]};if(H=await At.request(U),H.attributes&&H.attributes.error){i(c,!1),i(O,H.attributes.error,!0);return}await j().fetchPageRecords(),e(x)===ge.folder&&M().refresh(o.space_name,o.subpath,!0),ae(!1),zt(Lt.info,"Entry created successfully.")}catch(H){i(O,H.response.data,!0),ia().then(()=>{os("error-content")})}finally{i(c,!1)}i(c,!1)}let le=ie(null);Ot(()=>{ae()===!1&&(i(z,{json:{}},!0),i(I,{},!0),i(w,"json"),i(O,null),i(_e,null),i(le,null),i(D,Vt.form,!0))}),Ot(()=>{e(u).length===1&&Yt(()=>{i(x,e(u)[0].value,!0)})}),vr(g,{bodyClass:"h-s75vh justify-center",size:"lg",get open(){return ae()},set open(n){ae(n)},header:n=>{var y=Cn();r(n,y)},footer:n=>{var y=En(),U=s(y);{var De=Fe=>{be(Fe,{class:"cursor-pointer text-green-700 hover:text-green-500 mx-1",outline:!0,onclick:()=>i(D,e(D)===Vt.form?Vt.json:Vt.form,!0),children:(Pe,Je)=>{var ke=On(),Me=m(ke);{var ne=K=>{za(K,{})},ue=K=>{La(K,{})};h(Me,K=>{e(D)===Vt.form?K(ne):K(ue,!1)})}var xe=a(Me);Ye(()=>Ze(xe,` ${e(D)===Vt.form?"Json":"Form"} Mode`)),r(Pe,ke)},$$slots:{default:!0}})},Y=Fe=>{var Pe=jn();r(Fe,Pe)};h(U,Fe=>{([ge.schema,...ra].includes(e(x))||o.subpath==="workflows")&&(e(x)!==ge.content||e(w)==="json")?Fe(De):Fe(Y,!1)})}var Z=a(U,2),ve=s(Z);{var Oe=Fe=>{be(Fe,{class:"cursor-pointer text-primary hover:text-primary mx-1",outline:!0,onclick:()=>ae(!1),children:(Pe,Je)=>{var ke=$("Close");r(Pe,ke)},$$slots:{default:!0}})};h(ve,Fe=>{e(c)||Fe(Oe)})}var He=a(ve,2);be(He,{class:"cursor-pointer bg-primary mx-1",onclick:te,children:(Fe,Pe)=>{var Je=$e(),ke=m(Je);{var Me=ue=>{var xe=Dn(),K=m(xe);fr(K,{class:"me-3",size:"4",color:"blue"}),r(ue,xe)},ne=ue=>{var xe=$("Create");r(ue,xe)};h(ke,ue=>{e(c)?ue(Me):ue(ne,!1)})}r(Fe,Je)},$$slots:{default:!0}}),r(n,y)},children:(n,y)=>{var U=An(),De=m(U);{var Y=ne=>{Ra(ne,{color:"red",children:(ue,xe)=>{var K=Fn(),he=s(K);Ye(()=>Ze(he,e(P))),r(ue,K)},$$slots:{default:!0}})};h(De,ne=>{e(P)&&ne(Y)})}var Z=a(De,2),ve=s(Z);A(ve,{children:(ne,ue)=>{var xe=zn(),K=a(m(xe));{let he=et(()=>e(u).length===1);$t(K,{class:"my-2",get items(){return e(u)},get disabled(){return e(he)},get value(){return e(x)},set value(Re){i(x,Re,!0)}})}r(ne,xe)},$$slots:{default:!0}});var Oe=a(ve,2);wa(Oe,{isCreate:!0,get formData(){return e(I)},set formData(ne){i(I,ne,!0)},get validateFn(){return B},set validateFn(ne){B=ne}});var He=a(Oe,2);{var Fe=ne=>{Ps(ne,{get formData(){return e(I)},set formData(ue){i(I,ue,!0)},get validateFn(){return oe},set validateFn(ue){oe=ue}})},Pe=ne=>{var ue=$e(),xe=m(ue);{var K=Re=>{zs(Re,{get formData(){return e(I)},set formData(ze){i(I,ze,!0)},get validateFn(){return oe},set validateFn(ze){oe=ze}})},he=Re=>{var ze=$e(),Ce=m(ze);{var we=N=>{ko(N,{get formData(){return e(I)},set formData(Te){i(I,Te,!0)},get validateFn(){return oe},set validateFn(Te){oe=Te}})};h(Ce,N=>{e(x)===ge.permission&&N(we)},!0)}r(Re,ze)};h(xe,Re=>{e(x)===ge.role?Re(K):Re(he,!1)},!0)}r(ne,ue)};h(He,ne=>{e(x)===ge.user?ne(Fe):ne(Pe,!1)})}var Je=a(He,2);Tn(Je,{get selectedResourceType(){return e(x)},set selectedResourceType(ne){i(x,ne,!0)},get selectedSchema(){return e(_e)},set selectedSchema(ne){i(_e,ne,!0)},get selectedWorkflow(){return e(le)},set selectedWorkflow(ne){i(le,ne,!0)},get selectedInputMode(){return e(D)},set selectedInputMode(ne){i(D,ne,!0)},get contentType(){return e(w)},set contentType(ne){i(w,ne,!0)},get content(){return e(z)},set content(ne){i(z,ne,!0)},get errorContent(){return e(O)},set errorContent(ne){i(O,ne,!0)}});var ke=a(Je,2);{var Me=ne=>{var ue=Ln(),xe=s(ue);Or(xe,{get code(){return e(O)},language:"json"}),r(ne,ue)};h(ke,ne=>{e(O)&&ne(Me)})}r(n,U)},$$slots:{header:!0,footer:!0,default:!0}}),It(),b()}var Mn=l("<h3>Upload CSV</h3>"),In=l("<!> Uploading...",1),Vn=l("<!> <!>",1),Bn=l('<p class="text-red-500 text-xs mt-1">Resource type is required</p>'),Un=l("Resource Type <!> <!>",1),Hn=l('<p class="text-red-500 text-xs mt-1">Schema is required</p>'),Jn=l("<!> <!>",1),Gn=l('<div role="status" class="max-w-sm animate-pulse"><div class="h-3 bg-gray-200 rounded-full dark:bg-gray-700 mx-2 my-2.5"></div></div>'),Wn=l("Schema <!>",1),Kn=l('CSV File <input type="file" accept=".csv" class="mt-2 block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400"/>',1),Qn=l('<input type="checkbox" class="mt-1 mr-3 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"/> <div class="flex-1"><span class="text-sm font-medium text-gray-900 dark:text-gray-300">Update entries</span> <p class="text-xs text-gray-500 dark:text-gray-400 mt-1"><!></p></div>',1),Xn=l('<div class="mt-4 p-4 border border-red-300 bg-red-50 rounded"><h4 class="text-red-800 font-semibold mb-2">Some entries failed to upload:</h4> <!></div>'),Yn=l("<div><!> <!> <!> <!> <!></div>");function Zn(g,o){Mt(o,!0);const t=()=>Pt(ar,"$currentListView",j),[j,M]=ir();let ee=dt(o,"isOpen",15,!1),b=ie(mt(ge.content)),ae=ie(null),T=ie(mt([])),x=ie(!1),u=ie(!1),D=ie(!1),E=ie(null),X=ie(!1);function _e(w){if(w===null)return[];let O=[];return O=w.records.map(c=>c.shortname).filter(c=>!["meta_schema","folder_rendering"].includes(c)),O.map(c=>({name:c,value:c}))}function z(w){const O=w.target.files;O.length>0&&i(T,Array.from(O),!0)}async function I(){var O;i(u,!1),i(D,!1);let w=!1;if(e(b)||(zt(Lt.warn,"Please select a resource type"),i(u,!0),w=!0),e(ae)||(zt(Lt.warn,"Please select a schema"),i(D,!0),w=!0),e(T).length||(zt(Lt.warn,"Please select a CSV file"),w=!0),!w)try{i(x,!0);const B=await At.resourcesFromCsv({space_name:o.space_name,subpath:o.subpath,resourceType:e(b),schema:e(ae),payload:e(T)[0],isUpdate:e(X)});B.status==="success"?(((O=B==null?void 0:B.attributes)==null?void 0:O.failed_shortnames)??[]).length!==0?(zt(Lt.warn,"Some entries failed to upload"),i(E,B.attributes.failed_shortnames,!0)):(zt(Lt.info,"CSV uploaded successfully"),await t().fetchPageRecords(),ee(!1)):zt(Lt.warn,"Failed to upload CSV")}catch{zt(Lt.warn,"Error uploading CSV")}finally{i(x,!1)}}vr(g,{bodyClass:"h-auto justify-center",size:"md",get open(){return ee()},set open(B){ee(B)},header:B=>{var oe=Mn();r(B,oe)},footer:B=>{var oe=Vn(),c=m(oe);be(c,{color:"alternative",onclick:()=>ee(!1),children:(te,le)=>{var Le=$("Cancel");r(te,Le)},$$slots:{default:!0}});var P=a(c,2);be(P,{class:"bg-primary",onclick:I,get disabled(){return e(x)},children:(te,le)=>{var Le=$e(),pe=m(Le);{var v=d=>{var n=In(),y=m(n);fr(y,{size:"sm",class:"mr-2"}),r(d,n)},H=d=>{var n=$("Upload");r(d,n)};h(pe,d=>{e(x)?d(v):d(H,!1)})}r(te,Le)},$$slots:{default:!0}}),r(B,oe)},children:(B,oe)=>{var c=Yn(),P=s(c);A(P,{children:(H,d)=>{var n=Un(),y=a(m(n));{let Y=et(()=>e(u)?"border-red-500":""),Z=et(()=>[{name:ge.content.toString(),value:ge.content},{name:ge.folder.toString(),value:ge.folder},{name:ge.ticket.toString(),value:ge.ticket}]);$t(y,{get class(){return`my-2 ${e(Y)??""}`},get items(){return e(Z)},onchange:()=>i(u,!1),get value(){return e(b)},set value(ve){i(b,ve,!0)}})}var U=a(y,2);{var De=Y=>{var Z=Bn();r(Y,Z)};h(U,Y=>{e(u)&&Y(De)})}r(H,n)},$$slots:{default:!0}});var te=a(P,2);A(te,{class:"mt-3",children:(H,d)=>{var n=Wn(),y=a(m(n));_r(y,()=>At.query({space_name:o.space_name,type:Jt.search,subpath:"/schema",search:"",retrieve_json_payload:!0,limit:100}),U=>{var De=Gn();r(U,De)},(U,De)=>{var Y=Jn(),Z=m(Y);{let He=et(()=>e(D)?"border-red-500":""),Fe=et(()=>_e(e(De)));$t(Z,{get class(){return`mt-2 ${e(He)??""}`},get items(){return e(Fe)},onchange:()=>i(D,!1),get value(){return e(ae)},set value(Pe){i(ae,Pe,!0)}})}var ve=a(Z,2);{var Oe=He=>{var Fe=Hn();r(He,Fe)};h(ve,He=>{e(D)&&He(Oe)})}r(U,Y)}),r(H,n)},$$slots:{default:!0}});var le=a(te,2);A(le,{class:"mt-3",children:(H,d)=>{var n=Kn(),y=a(m(n));y.__change=z,r(H,n)},$$slots:{default:!0}});var Le=a(le,2);A(Le,{class:"mt-3 flex items-start",children:(H,d)=>{var n=Qn(),y=m(n),U=a(y,2),De=a(s(U),2),Y=s(De);{var Z=Oe=>{var He=$("• Will update existing entries with matching shortname");r(Oe,He)},ve=Oe=>{var He=$("• Will create new entries from CSV data");r(Oe,He)};h(Y,Oe=>{e(X)?Oe(Z):Oe(ve,!1)})}da(y,()=>e(X),Oe=>i(X,Oe)),r(H,n)},$$slots:{default:!0}});var pe=a(Le,2);{var v=H=>{var d=Xn(),n=a(s(d),2);Or(n,{get code(){return e(E)}}),r(H,d)};h(pe,H=>{e(E)&&H(v)})}r(B,c)},$$slots:{header:!0,footer:!0,default:!0}}),It(),M()}nr(["change"]);var Nn=l('<div><h3 class="mb-5 text-lg font-normal text-gray-500 dark:text-gray-400">CSV Download Options</h3> <div class="mb-4"><!> <!></div> <div class="mb-4"><!> <!></div> <div class="mb-4"><!> <!></div> <div class="mb-4"><!></div> <div class="flex justify-center gap-4"><!> <!></div></div>');function ei(g,o){Mt(o,!0);const t=()=>Pt(ar,"$currentListView",j),[j,M]=ir();let ee=dt(o,"isOpen",15),b=ie(!1),ae=ie(""),T=ie(""),x=ie(""),u=ie(!1);async function D(){try{i(u,!0);const E={...t().query};e(b)?(E.limit=1e6,delete E.from_date,delete E.to_date):(e(ae)&&(E.limit=parseInt(e(ae))),e(T)&&(E.from_date=e(T)),e(x)&&(E.to_date=e(x))),E.space_name||(E.space_name=o.space_name),E.subpath||(E.subpath=o.subpath),E.type||(E.type=Jt.search);const X=await At.csv(E);Xa(X,`${o.space_name}/${o.subpath}.csv`,"text/csv"),ee(!1)}catch{zt(Lt.warn)}finally{i(u,!1)}}vr(g,{size:"xs",autoclose:!1,class:"w-full",get open(){return ee()},set open(E){ee(E)},children:(E,X)=>{var _e=Nn(),z=a(s(_e),2),I=s(z);A(I,{for:"limit",class:"mb-2",children:(d,n)=>{var y=$("Limit");r(d,y)},$$slots:{default:!0}});var w=a(I,2);me(w,{id:"limit",type:"number",placeholder:"Enter limit",min:"1",get disabled(){return e(b)},get value(){return e(ae)},set value(d){i(ae,d,!0)}});var O=a(z,2),B=s(O);A(B,{for:"startDate",class:"mb-2",children:(d,n)=>{var y=$("Start Date");r(d,y)},$$slots:{default:!0}});var oe=a(B,2);me(oe,{id:"startDate",type:"date",get disabled(){return e(b)},get value(){return e(T)},set value(d){i(T,d,!0)}});var c=a(O,2),P=s(c);A(P,{for:"endDate",class:"mb-2",children:(d,n)=>{var y=$("End Date");r(d,y)},$$slots:{default:!0}});var te=a(P,2);me(te,{id:"endDate",type:"date",get disabled(){return e(b)},get value(){return e(x)},set value(d){i(x,d,!0)}});var le=a(c,2),Le=s(le);kt(Le,{id:"downloadAll",get checked(){return e(b)},set checked(d){i(b,d,!0)},children:(d,n)=>{var y=$("Download all");r(d,y)},$$slots:{default:!0}});var pe=a(le,2),v=s(pe);be(v,{color:"alternative",onclick:()=>ee(!1),children:(d,n)=>{var y=$("Cancel");r(d,y)},$$slots:{default:!0}});var H=a(v,2);be(H,{class:"bg-primary",get disabled(){return e(u)},onclick:D,children:(d,n)=>{var y=$("Download");r(d,y)},$$slots:{default:!0}}),r(E,_e)},$$slots:{default:!0}}),It(),M()}var ti=l("<!> ",1),ri=l('<div class="flex justify-between w-full"><!> <!></div>'),ai=l("Destination Space <!>",1),si=l("Destination Subpath (Root Folders) <!>",1),oi=l('<div class="space-y-4"><!> <!></div>');function li(g,o){Mt(o,!0);const t=()=>Pt(Xt,"$bulkBucket",ee),j=()=>Pt(ar,"$currentListView",ee),M=()=>Pt(Nr,"$spaces",ee),[ee,b]=ir();let ae=dt(o,"isOpen",15,!1),T=dt(o,"actionType",3,"move"),x=ie(""),u=ie("/"),D=ie(!1),E=ie(mt([{name:"/",value:"/"}]));Ot(()=>{ae()&&(i(x,o.space_name,!0),i(u,"/"),X(e(x)))});async function X(w){if(w)try{const O=await ta(w,"/",100);let B=[{name:"/",value:"/"}];O&&O.records&&O.records.forEach(oe=>{oe.resource_type===ge.folder&&B.push({name:oe.shortname,value:"/"+oe.shortname})}),i(E,B,!0)}catch(O){console.error("Failed to fetch subpaths",O),i(E,[{name:"/",value:"/"}],!0)}}function _e(){i(u,"/"),X(e(x))}async function z(){if(t().length){i(D,!0);try{const w=[],O=T()==="move";t().forEach(P=>{if(O){const te=o.subpath||"/",le={src_space_name:o.space_name,src_subpath:te,src_shortname:P.shortname,dest_space_name:e(x),dest_subpath:e(u),dest_shortname:P.shortname};w.push({resource_type:P.resource_type,shortname:P.shortname,subpath:te,attributes:le})}else{const te={...P.attributes};"uuid"in te&&delete te.uuid,w.push({resource_type:P.resource_type,shortname:P.shortname,subpath:e(u),attributes:te})}});const B=O?lr.move:lr.create,oe=O?o.space_name:e(x),c=await At.request({space_name:oe,request_type:B,records:w});(c==null?void 0:c.status)==="success"?(zt(Lt.info,`Entries ${O?"moved":"copied"} successfully`),await j().fetchPageRecords(),Xt.set([]),ae(!1)):zt(Lt.warn,`Failed to ${T()} entries`)}catch(w){zt(Lt.warn,`Error during bulk ${T()}`),console.error(w)}finally{i(D,!1)}}}let I=et(()=>M()?M().map(w=>({name:w.shortname,value:w.shortname})):[]);{const w=B=>{var oe=ri(),c=s(oe);be(c,{color:"alternative",onclick:()=>ae(!1),children:(te,le)=>{var Le=$("Cancel");r(te,Le)},$$slots:{default:!0}});var P=a(c,2);be(P,{class:"bg-primary",onclick:z,get disabled(){return e(D)},children:(te,le)=>{var Le=$e(),pe=m(Le);{var v=d=>{var n=ti(),y=m(n);fr(y,{size:"sm",class:"mr-2"});var U=a(y);Ye(()=>Ze(U,` ${T()==="move"?"Moving...":"Copying..."}`)),r(d,n)},H=d=>{var n=$();Ye(()=>Ze(n,T()==="move"?"Move":"Copy")),r(d,n)};h(pe,d=>{e(D)?d(v):d(H,!1)})}r(te,Le)},$$slots:{default:!0}}),r(B,oe)};let O=et(()=>`Bulk ${T()==="move"?"Move":"Copy"}`);vr(g,{size:"md",get title(){return e(O)},get open(){return ae()},set open(B){ae(B)},footer:w,children:(B,oe)=>{var c=oi(),P=s(c);A(P,{children:(le,Le)=>{var pe=ai(),v=a(m(pe));$t(v,{class:"mt-2",get items(){return e(I)},onchange:_e,get value(){return e(x)},set value(H){i(x,H,!0)}}),r(le,pe)},$$slots:{default:!0}});var te=a(P,2);A(te,{children:(le,Le)=>{var pe=si(),v=a(m(pe));$t(v,{class:"mt-2",get items(){return e(E)},get value(){return e(u)},set value(H){i(u,H,!0)}}),r(le,pe)},$$slots:{default:!0}}),r(B,c)},$$slots:{footer:!0,default:!0}})}It(),b()}var ni=l("<!> <!> <!>",1),ii=l("<!> Create",1),di=l("<!> Upload",1),vi=l("<!> Download",1),ui=l("<!> Delete",1),ci=l("<!> Restore",1),_i=l("<!> Bulk Move",1),fi=l("<!> Bulk Copy",1),mi=l("<!> Bulk delete",1),pi=l("<!> <!> <!>",1),hi=l('<p class="text-center mb-6">Are you sure you want to delete <span class="font-bold"> </span> <br/> This action cannot be undone.</p> <div class="flex justify-between w-full"><!> <!></div>',1),gi=l('<div class="flex flex-col md:flex-row justify-between items-center my-2 mx-3"><div class="w-1/2"><form><!></form></div> <div><!> <!> <!> <!> <!></div></div> <!> <!> <!> <!> <!>',1);function $i(g,o){Mt(o,!0);const t=()=>Pt(Yr,"$goto",x),j=()=>Pt(Ya,"$user",x),M=()=>Pt(Er,"$currentEntry",x),ee=()=>Pt(Xt,"$bulkBucket",x),b=()=>Pt(ar,"$currentListView",x),ae=()=>Pt($r,"$searchListView",x),T=()=>Pt(jr,"$params",x),[x,u]=ir();t();let D=ie(!1),E=ie(!1),X=ie(!1),_e=ie(!1),z=ie(!1);const I=o.space_name==="personal"&&o.subpath.startsWith(`people/${j().shortname}/trash`);dr(()=>{var S,p,C,_,R,de;if((C=(p=(S=M().entry)==null?void 0:S.payload)==null?void 0:p.body)!=null&&C.allow_csv&&i(X,!0),(de=(R=(_=M().entry)==null?void 0:_.payload)==null?void 0:R.body)!=null&&de.allow_upload_csv&&i(E,!0),o.space_name==="management"&&o.subpath==="/"){i(D,!1),i(_e,!1),i(E,!1);return}else if(o.space_name==="management"&&o.subpath==="health_check"){i(D,!1),i(E,!1);return}o.space_name==="management"?Ga.includes(o.subpath)?i(D,Wt("create",o.space_name,o.subpath,o.subpath.slice(0,-1)),!0):i(D,Wt("create",o.space_name,o.subpath,"content"),!0):i(D,Wt("create",o.space_name,o.subpath,"content")||Wt("create",o.space_name,o.subpath,"folder"),!0)});let w=ie(!1),O=ie(!1),B=ie(!1);function oe(){i(B,!0)}async function c(){if(ee().length)try{i(O,!0);const S=[];ee().map(_=>{S.push({resource_type:_.resource_type,shortname:_.shortname,subpath:o.subpath||"/",attributes:{}})});const p={space_name:o.space_name,request_type:lr.delete,records:S},C=await At.request(p);(C==null?void 0:C.status)==="success"?zt(Lt.info):zt(Lt.warn),await b().fetchPageRecords(),Xt.set([])}catch{zt(Lt.warn,"Failed to delete entries. Please try again later.")}finally{i(O,!1),i(B,!1)}}let P=ie(mt(ae()));async function te(S){$r.set(e(P)),e(P)?t()("$leaf",{...T(),search:e(P)}):(delete T().search,t()("$leaf",T()))}let le=ie(!1);function Le(){i(le,!0)}async function pe(){i(O,!0);try{const S=[];ee().map(p=>{const _=p.subpath.split("/").slice(3),R=_[0],de=_.slice(1).join("/"),se=p.resource_type||p.subpath&&ge.folder||ge.space,L={src_space_name:"personal",src_subpath:p.subpath.replaceAll("-","/"),src_shortname:p.shortname,dest_space_name:R,dest_subpath:de.replaceAll("-","/"),dest_shortname:p.shortname};S.push({resource_type:se,shortname:p.shortname,subpath:p.subpath.replaceAll("-","/"),attributes:L})}),await At.request({space_name:"personal",request_type:lr.move,records:S}),await b().fetchPageRecords(),zt(Lt.info,"Entries restored successfully")}catch{zt(Lt.warn,"Failed to restore the entries!")}finally{i(O,!1)}}let v=ie(!1),H=ie("move");function d(){i(H,"move"),i(v,!0)}function n(){i(H,"copy"),i(v,!0)}var y=gi(),U=m(y),De=s(U),Y=s(De),Z=s(Y);Ta(Z,{class:"w-full",children:(S,p)=>{var C=ni(),_=m(C);me(_,{id:"website-admin",placeholder:"Search...",type:"search",get value(){return e(P)},set value(L){i(P,L,!0)}});var R=a(_,2);{var de=L=>{qr(L,{class:"cursor-pointer",onclick:q=>{i(P,""),te()},children:(q,k)=>{Aa(q,{class:"h-4 w-4 text-gray-500 dark:text-gray-400"})},$$slots:{default:!0}})};h(R,L=>{e(P).length>0&&L(de)})}var se=a(R,2);qr(se,{class:"cursor-pointer",onclick:te,children:(L,q)=>{gr(L,{class:"h-4 w-4 text-gray-500 dark:text-gray-400"})},$$slots:{default:!0}}),r(S,C)},$$slots:{default:!0}});var ve=a(De,2),Oe=s(ve);{var He=S=>{be(S,{class:"bg-primary cursor-pointer",size:"xs",onclick:()=>i(w,!0),children:(p,C)=>{var _=ii(),R=m(_);qa(R,{size:"md"}),r(p,_)},$$slots:{default:!0}})};h(Oe,S=>{e(D)&&S(He)})}var Fe=a(Oe,2);{var Pe=S=>{be(S,{class:"text-primary cursor-pointer hover:text-primary",size:"xs",outline:!0,onclick:Le,children:(p,C)=>{var _=di(),R=m(_);Ma(R,{size:"md"}),r(p,_)},$$slots:{default:!0}})};h(Fe,S=>{e(E)&&S(Pe)})}var Je=a(Fe,2);{var ke=S=>{be(S,{class:"text-primary cursor-pointer hover:text-primary",size:"xs",outline:!0,onclick:()=>i(z,!0),children:(p,C)=>{var _=vi(),R=m(_);Ia(R,{size:"md"}),r(p,_)},$$slots:{default:!0}})};h(Je,S=>{e(X)&&S(ke)})}var Me=a(Je,2);{var ne=S=>{be(S,{class:"text-red-600 cursor-pointer hover:text-red-600",size:"xs",outline:!0,children:(p,C)=>{var _=ui(),R=m(_);rr(R,{size:"md"}),r(p,_)},$$slots:{default:!0}})};h(Me,S=>{e(_e)&&S(ne)})}var ue=a(Me,2);{var xe=S=>{var p=$e(),C=m(p);{var _=de=>{be(de,{class:"text-primary cursor-pointer hover:text-primary",size:"xs",outline:!0,onclick:pe,children:(se,L)=>{var q=ci(),k=m(q);Va(k,{size:"md"}),r(se,q)},$$slots:{default:!0}})},R=de=>{var se=pi(),L=m(se);be(L,{class:"text-primary cursor-pointer hover:text-primary",size:"xs",outline:!0,onclick:d,children:(ce,V)=>{var fe=_i(),Ie=m(fe);Ba(Ie,{size:"md"}),r(ce,fe)},$$slots:{default:!0}});var q=a(L,2);be(q,{class:"text-primary cursor-pointer hover:text-primary",size:"xs",outline:!0,onclick:n,children:(ce,V)=>{var fe=fi(),Ie=m(fe);Ua(Ie,{size:"md"}),r(ce,fe)},$$slots:{default:!0}});var k=a(q,2);be(k,{class:"text-red-600 cursor-pointer hover:text-red-600",size:"xs",outline:!0,onclick:oe,children:(ce,V)=>{var fe=mi(),Ie=m(fe);rr(Ie,{size:"md"}),r(ce,fe)},$$slots:{default:!0}}),r(de,se)};h(C,de=>{I?de(_):de(R,!1)})}r(S,p)};h(ue,S=>{ee().length&&S(xe)})}var K=a(U,2);{var he=S=>{qn(S,{get space_name(){return o.space_name},get subpath(){return o.subpath},get isOpen(){return e(w)},set isOpen(p){i(w,p,!0)}})};h(K,S=>{e(D)&&S(he)})}var Re=a(K,2);{var ze=S=>{Zn(S,{get space_name(){return o.space_name},get subpath(){return o.subpath},get isOpen(){return e(le)},set isOpen(p){i(le,p,!0)}})};h(Re,S=>{e(E)&&S(ze)})}var Ce=a(Re,2);{var we=S=>{ei(S,{get space_name(){return o.space_name},get subpath(){return o.subpath},get isOpen(){return e(z)},set isOpen(p){i(z,p,!0)}})};h(Ce,S=>{e(X)&&S(we)})}var N=a(Ce,2);li(N,{get space_name(){return o.space_name},get subpath(){return o.subpath},get actionType(){return e(H)},get isOpen(){return e(v)},set isOpen(S){i(v,S,!0)}});var Te=a(N,2);vr(Te,{size:"md",title:"Confirm Deletion",get open(){return e(B)},set open(S){i(B,S,!0)},children:(S,p)=>{var C=hi(),_=m(C),R=a(s(_)),de=s(R),se=a(R),L=a(_,2),q=s(L);be(q,{color:"alternative",onclick:()=>i(B,!1),children:(ce,V)=>{var fe=$("Cancel");r(ce,fe)},$$slots:{default:!0}});var k=a(q,2);be(k,{color:"red",onclick:c,get disabled(){return e(O)},children:(ce,V)=>{var fe=$();Ye(()=>Ze(fe,e(O)?"Deleting...":"Delete")),r(ce,fe)},$$slots:{default:!0}}),Ye(ce=>{Ze(de,ce),Ze(se,` ${ee().length===1?"entry":"entries"}?`)},[()=>ee().map(ce=>ce.shortname).join(", ")]),r(S,C)},$$slots:{default:!0}}),Pr("submit",Y,va(te)),r(g,y),It(),u()}function sa(g,o,t){return o===null?zr(Ur)("not_applicable"):g.length==1&&g[0].length>0&&typeof o=="object"&&g[0]in o?t=="json"?JSON.stringify(o[g[0]],void 0,1):o[g[0]]:g.length>1&&g[0].length>0&&g[0]in o?sa(g.slice(1),o[g[0]],t):zr(Ur)("not_applicable")}function yi(){return parseInt(typeof localStorage<"u"&&localStorage.getItem("rowPerPage"))||15}var bi=l('<div class="modal-header"><h5 class="modal-title"> </h5>  <button type="button" class="btn-close" aria-label="Close"></button></div> <div><!></div> <div><!> <!></div>',1),xi=l('<div class="flex flex-col w-full"><!></div>'),wi=l('<div class="text-center pt-5 text-lg font-semibold text-gray-700">No records found.</div>'),ki=l("<div><!></div>"),Pi=l("<!> <!>",1),Si=l('<span style="all: unset;display: contents;"><!></span>'),Ri=l('<div style="all: unset;display: contents;"><!> <!></div>'),Ti=l("<!> <!>",1),Ci=l("<option>15</option> <option>30</option> <option>50</option> <option>100</option>",1),Oi=l('<!> <div class="flex flex-col md:flex-row justify-between items-center mt-4"><!> <p class="text-sm text-gray-600"> </p> <!></div>',1),ji=l('<!> <div class="mx-3"><!></div>',1),Di=l('<div class="w-full"><!></div>'),Ei=l("<!> <!> <!>",1);function od(g,o){Mt(o,!0);const t=()=>Pt(Yr,"$goto",T),j=()=>Pt(Xt,"$bulkBucket",T),M=()=>Pt(ar,"$currentListView",T),ee=()=>Pt(jr,"$params",T),b=()=>Pt($r,"$searchListView",T),ae=()=>Pt(Nr,"$spaces",T),[T,x]=ir();t(),sr(Xt,[]);let u=dt(o,"shortname",11,null),D=dt(o,"type",27,()=>mt(Jt.search)),E=dt(o,"folderColumns",11,null),X=dt(o,"sort_by",11,null),_e=dt(o,"sort_order",11,null),z=dt(o,"query",11,null),I=dt(o,"is_clickable",11,!0),w=dt(o,"canDelete",11,!1),O=dt(o,"exact_subpath",11,!0),B=dt(o,"scope",11,"managed");sr(ar,{fetchPageRecords:He});let oe=ie(null);E()===null||E().length===0?i(oe,as,!0):i(oe,ss(E()),!0),Object.keys(e(oe)).includes("undefined")&&i(oe,{shortname:{path:"shortname",title:"shortname",type:"string",width:"20%"}},!0);let c=ie(null);const{sortBy:P,sortOrder:te,page:le,search:Le}=ee();Le&&sr($r,Le);let pe={sort_by:(P??X())||"shortname",sort_order:(te??_e())||"ascending"},v=ie(mt(ha({parData:[],parRowsPerPage:typeof localStorage<"u"&&localStorage.getItem("rowPerPage")||"15",parSearchString:"",parSortBy:(P??X())||"shortname",parSortOrder:(te??_e())||"ascending",parActivePage:Number(le)||1})));Ot(()=>{e(v).arraySearchableColumns=Object.keys(e(oe))});let H=ie(0),d=le||1,n=ie(1),y=yi(),U=et(()=>e(v).numberRowsPerPage*(e(v).numberActivePage-1)+1),De=et(()=>e(v).numberRowsPerPage*e(v).numberActivePage>=e(c)?e(c):e(v).numberRowsPerPage*e(v).numberActivePage);function Y(){i(n,Math.ceil(e(c)/y),!0),localStorage.setItem("rowPerPage",y.toString()),Br.delay_total_count&&(e(v).numberRowsPerPage=y)}let Z={};async function ve(_){_.type=Jt.counters,_.retrieve_total=!0;const R=await At.query(_,B());i(c,R.attributes.total,!0),e(v).arrayRawData=[...e(v).arrayRawData],Y()}let Oe=ie(!1);async function He(_=!0,R={}){var q,k;const de=Br.delay_total_count===!0;i(Oe,!0);let se=b();if(o.subpath==="/"){(ae()===null||ae().length===0)&&await ea();const V=ae().find(fe=>fe.shortname===o.space_name).attributes.hide_folders;V.length&&(se+=` -@shortname:${V.join("|")}`)}(q=z())!=null&&q.type&&((k=z())!=null&&k.search)&&(se+=` ${z().search.trim()}`),Z={filter_shortnames:u()?[u()]:[],type:D(),space_name:o.space_name,subpath:o.subpath,exact_subpath:O(),limit:e(v).numberRowsPerPage,sort_by:e(v).stringSortBy.toString(),sort_type:xa[e(v).stringSortOrder],offset:e(v).numberRowsPerPage*(e(v).numberActivePage-1),search:se.trim(),...R,retrieve_json_payload:!0,retrieve_total:!de},de&&ve({...Z});const L=await At.query({...Z},B());b(),de===!1?i(c,L.attributes.total,!0):i(c,-1),e(v).arrayRawData=L.records,_&&(e(v).arrayRawData.length===0?i(n,0):de===!1&&Y()),i(Oe,!1)}let Fe=ie(mt({})),Pe=ie(!1);async function Je(_,R){var de,se,L;if(I()){if(D()===Jt.events){i(Pe,!0);const q=["sec","content-type","accept","host","connection"];i(Fe,JSON.parse(JSON.stringify(R)),!0),(L=(se=(de=e(Fe))==null?void 0:de.attributes)==null?void 0:se.attributes)!=null&&L.request_headers&&(e(Fe).attributes.attributes.request_headers=Object.keys(e(Fe).attributes.attributes.request_headers).reduce((k,ce)=>q.some(V=>ce.includes(V))?k:{...k,[ce]:e(Fe).attributes.attributes.request_headers[ce]},{}));return}if(R.resource_type==="folder"){let q=`${R.subpath}/${R.shortname}`.replace(/\/+/g,"/");q.length>0&&o.subpath[0]==="/"&&(q=q.substring(1)),q.length>0&&q[q.length-1]==="/"&&(q=q.slice(0,-1)),t()("/management/content/[space_name]/[subpath]",{space_name:o.space_name,subpath:q.replaceAll("/","-")});return}Me(R)}}function ke(_){t()("$leaf",{..._})}function Me(_){const R=_.shortname,de=_.subpath.replaceAll("/","-");t()("/management/content/[space_name]/[subpath]/[shortname]/[resource_type]",{space_name:o.space_name,subpath:de,shortname:R,resource_type:_.resource_type})}Ot(()=>{if(e(v)&&!Pa(pe,{sort_by:e(v).stringSortBy,sort_order:e(v).stringSortOrder})){const _={sort_by:e(v).stringSortBy.toString(),sort_order:e(v).stringSortOrder};ke({...ee(),sortBy:e(v).stringSortBy.toString(),sortOrder:e(v).stringSortOrder}),Yt(()=>{He(!0,{sort_by:e(v).stringSortBy.toString(),sort_type:e(v).stringSortOrder})}),pe=structuredClone(_)}}),Ot(()=>{e(v).numberRowsPerPage!==y&&(y=e(v).numberRowsPerPage,typeof localStorage<"u"&&localStorage.setItem("rowPerPage",y.toString()),(async()=>(await He(!0,{}),K(null,xe)))())}),Ot(()=>{e(v).numberActivePage!==d&&ke({...ee(),page:e(v).numberActivePage.toString()})});const ne=()=>{i(Pe,!e(Pe))};function ue(_){_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation();try{const{name:R,checked:de}=_.target,se=e(v).arrayRawData[R].shortname;if(de){const L=e(v).arrayRawData[R].resource_type;sr(Xt,[...j(),{shortname:se,resource_type:L,subpath:e(v).arrayRawData[R].subpath}])}else sr(Xt,j().filter(L=>L.shortname!==e(v).arrayRawData[R].shortname))}catch(R){zt(Lt.warn,"Error processing bulk selection"),R.target.checked=!1}}let xe=!1;function K(_,R=null){xe=R===null?!xe:R,_&&(_.target.checked=xe),e(v).arrayRawData.map((de,se)=>{const L=de.shortname,q=document.getElementById(L);if(q!==null)if(q.checked=xe,q.checked){const k=e(v).arrayRawData[se].resource_type;sr(Xt,[...j(),{shortname:L,resource_type:k}])}else sr(Xt,j().filter(k=>k.shortname!==e(v).arrayRawData[se].shortname))})}function he(_){return setTimeout(()=>{const R=_.querySelector('span[role="button"][style*="cursor:pointer"][style*="white-space: nowrap"]');if(R){R.style.cssText="cursor:pointer;display: flex;white-space: nowrap;";const de=Array.from(R.childNodes);R.innerHTML="",de.reverse().forEach(se=>{se.nodeName==="svg"&&se.classList.add("mr-2"),R.appendChild(se)})}},0),{destroy(){}}}Ot(()=>{Z&&Yt(()=>{ua(ar,Yt(M).query=Z,Yt(M))})}),He(!0,{});var Re={setQueryParam:ke,redirectToEntry:Me},ze=Ei(),Ce=m(ze);vr(Ce,{size:"lg",get open(){return e(Pe)},set open(_){i(Pe,_,!0)},children:(_,R)=>{var de=bi(),se=m(de),L=s(se),q=s(L),k=a(L,2);k.__click=ne;var ce=a(se,2),V=s(ce);Or(V,{get code(){return e(Fe)}});var fe=a(ce,2),Ie=s(fe);be(Ie,{color:"secondary",onclick:()=>i(Pe,!1),children:(J,G)=>{var F=$("Close");r(J,F)},$$slots:{default:!0}});var Ee=a(Ie,2);be(Ee,{color:"primary",onclick:()=>{i(Pe,!1),Me(e(Fe))},children:(J,G)=>{var F=$("Entry");r(J,F)},$$slots:{default:!0}}),Ye(()=>Ze(q,e(Fe).shortname)),r(_,de)},$$slots:{default:!0}});var we=a(Ce,2);{var N=_=>{$i(_,{get space_name(){return o.space_name},get subpath(){return o.subpath}})};h(we,_=>{D()!==Jt.events&&_(N)})}var Te=a(we,2);{var S=_=>{var R=xi(),de=s(R);Mr(de,{class:"m-5",size:"lg",style:"width: 100vw"}),r(_,R)},p=_=>{var R=Di(),de=s(R);{var se=q=>{Mr(q,{class:"m-5",size:"lg",style:"width: 100vw"})},L=q=>{var k=ji(),ce=m(k);{var V=G=>{ga(G,{get propDatatable(){return e(v)},set propDatatable(F){i(v,F,!0)}})};h(ce,G=>{e(v)&&G(V)})}var fe=a(ce,2),Ie=s(fe);{var Ee=G=>{var F=wi();r(G,F)},J=G=>{var F=Oi(),Ae=m(F);Zr(Ae,{striped:!0,class:"border-collapse border w-full border-gray-300 mt-2",children:(Ve,Be)=>{var Ge=Ti(),st=m(Ge);Ca(st,{class:"bg-gray-100",children:(We,Ke)=>{var rt=Pi(),Ne=m(rt);{var ot=Tt=>{Ir(Tt,{class:"p-2 border border-gray-300",children:(yt,ct)=>{kt(yt,{class:"bg-white",onchange:K})},$$slots:{default:!0}})};h(Ne,Tt=>{w()&&Tt(ot)})}var nt=a(Ne,2);Qe(nt,17,()=>Object.keys(e(oe)),Xe,(Tt,yt)=>{Ir(Tt,{class:"border border-gray-300",children:(ct,jt)=>{var vt=ki(),Dt=s(vt);$a(Dt,{get propColumn(){return e(yt)},get propDatatable(){return e(v)},set propDatatable(Ct){i(v,Ct,!0)},children:(Ct,tt)=>{var lt=$();Ye(()=>Ze(lt,e(oe)[e(yt)].title)),r(Ct,lt)},$$slots:{default:!0}}),ma(vt,Ct=>he==null?void 0:he(Ct)),r(ct,vt)},$$slots:{default:!0}})}),r(We,rt)},$$slots:{default:!0}});var ye=a(st,2);Oa(ye,{children:(We,Ke)=>{var rt=$e(),Ne=m(rt);Qe(Ne,17,()=>e(v).arrayRawData,Xe,(ot,nt,Tt)=>{ja(ot,{class:"hover:bg-gray-200",onclick:yt=>Je(yt,e(nt)),children:(yt,ct)=>{var jt=Ri(),vt=s(jt);{var Dt=tt=>{var lt=Si();lt.__click=pt=>{pt.stopPropagation();const ht=pt.currentTarget.querySelector('input[type="checkbox"]');if(ht){ht.checked=!ht.checked;const bt=new Event("change",{bubbles:!0});ht.dispatchEvent(bt)}};var xt=s(lt);Vr(xt,{class:"p-2 border border-gray-300",children:(pt,ht)=>{{let bt=et(()=>Tt.toString()),Ft=et(()=>j().some(St=>St.shortname===e(nt).shortname));kt(pt,{class:"bg-white",get id(){return e(nt).shortname},get name(){return e(bt)},get checked(){return e(Ft)},onchange:ue,onclick:St=>St.stopPropagation()})}},$$slots:{default:!0}}),r(tt,lt)};h(vt,tt=>{w()&&tt(Dt)})}var Ct=a(vt,2);Qe(Ct,17,()=>Object.keys(e(oe)),Xe,(tt,lt)=>{Vr(tt,{class:"p-2 border border-gray-300 cursor-pointer",children:(xt,pt)=>{var ht=$();Ye(bt=>Ze(ht,bt),[()=>sa(e(oe)[e(lt)].path.split("."),e(nt),e(oe)[e(lt)].type)]),r(xt,ht)},$$slots:{default:!0}})}),r(yt,jt)},$$slots:{default:!0}})}),r(We,rt)},$$slots:{default:!0}}),r(Ve,Ge)},$$slots:{default:!0}});var je=a(Ae,2),Ue=s(je);ya(Ue,{class:"form-select form-select-sm w-auto",get propDatatable(){return e(v)},set propDatatable(Ve){i(v,Ve,!0)},children:(Ve,Be)=>{var Ge=Ci(),st=m(Ge);st.value=st.__value="15";var ye=a(st,2);ye.value=ye.__value="30";var We=a(ye,2);We.value=We.__value="50";var Ke=a(We,2);Ke.value=Ke.__value="100",r(Ve,Ge)},$$slots:{default:!0}});var re=a(Ue,2),qe=s(re),Se=a(re,2);pa(Se,()=>e(n),Ve=>{ba(Ve,{maxPageDisplay:5,propSize:"default",get propDatatable(){return e(v)},set propDatatable(Be){i(v,Be,!0)},get propNumberOfPages(){return e(n)},set propNumberOfPages(Be){i(n,Be,!0)}})}),Ye(()=>Ze(qe,`Showing ${e(U)??""} to ${e(De)??""} of ${e(c)??""} entries`)),r(G,F)};h(Ie,G=>{var F;((F=e(v))==null?void 0:F.arraySearched.length)===0?G(Ee):G(J,!1)})}_a(3,fe,()=>fa,()=>({delay:25})),r(q,k)};h(de,q=>{e(c)===null?q(se):q(L,!1)})}r(_,R)};h(Te,_=>{e(Oe)?_(S):_(p,!1)})}ca("innerHeight",_=>i(H,_,!0)),r(g,ze);var C=It(Re);return x(),C}nr(["click"]);export{rn as H,od as L,gn as M,Tn as P,ko as a,Xt as b,Wt as c,Ps as d,zs as e,$r as s};
