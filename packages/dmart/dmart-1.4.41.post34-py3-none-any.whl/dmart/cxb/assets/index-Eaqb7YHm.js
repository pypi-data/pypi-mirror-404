import{p as ma,L as sa,a8 as N,a9 as ua,B as p,h as w,e as z,ai as _,k as e,E as f,F as r,j as I,c as a,R as h,I as fa,f as Q,O as H,ak as T,l as ha,H as $a,af as ba,a6 as d}from"./svelte-B9Ye91X-.js";import{g as ga,p as ya}from"./@roxi-Bw7qXphd.js";import{M as xa,B as W,i as Pa,j as E,h as wa}from"./flowbite-svelte-Caf58qKG.js";import{R as X,D as la}from"./@edraj-D-9hi9vU.js";import{B as Ea}from"./BreadCrumbLite-28-Sst8b.js";import"./clsx-B-dksMZM.js";import"./esm-env-rsSWfq8L.js";import"./hookar-BMRD9G9H.js";import"./consolite-DlCuI0F9.js";import"./@floating-ui-BwwcF-xh.js";import"./tailwind-variants-Cj20BoQ3.js";import"./tailwind-merge-CJvxXMcu.js";import"./flowbite-svelte-icons-DXemwXNH.js";var ka=p('<div class="space-y-2"><p><b>UUID:</b> </p> <p><b>Space name:</b> </p> <p><b>Subpath:</b> </p> <p><b>Issues:</b> </p> <p><b>Exception:</b><br/> </p></div>'),Ia=p('<div slot="header" class="text-lg font-semibold"> </div>'),ja=p('<div slot="footer" class="flex justify-between"><!> <!></div>'),Ba=p("<!> <!>",1),La=p("<span><!></span>"),Da=p("<!> <!>",1),Ca=p("<!> <!> <!>",1),Ra=p("<!> <!>",1),za=p("<!> <!> <!> <!>",1),Aa=p('<p class="text-red-500"> </p>'),Fa=p('<div class="flex flex-col w-full"><!></div>'),Ma=p('<!> <!> <div class="mx-2 mt-3 mb-3"></div> <!>',1);function Ya(da,ia){ma(ia,!0);const Y=()=>sa(ga,"$goto",Z),j=()=>sa(ya,"$params",Z),[Z,na]=$a();Y();let $=N(ua({subpath:"",shortname:"",resource_type:X.content,uuid:"",issues:[],exception:""}));function va(){Y()("/management/content/[space_name]/[subpath]/[shortname]/[resource_type]",{space_name:j().shortname,subpath:a($).subpath.replaceAll("/","-"),shortname:a($).shortname,resource_type:a($).resource_type,validate_schema:"false"})}let U=N(!1),q=N(!1);async function _a(s,t){z($,{...s,...t},!0);try{await la.retrieveEntry({resource_type:a($).resource_type,space_name:j().space_name,subpath:j().subpath.replaceAll("-","/"),shortname:j().shortname,retrieve_json_payload:!1,retrieve_attachments:!1,validate_schema:!1}),z(q,!0)}catch{z(q,!1)}z(U,!0)}var aa=Ma(),ea=w(aa);xa(ea,{size:"lg",class:"w-full",get open(){return a(U)},set open(s){z(U,s,!0)},children:(s,t)=>{var o=ka(),b=f(o),D=r(f(b)),B=r(b,2),A=r(f(B)),i=r(B,2),x=r(f(i)),k=r(i,2),L=r(f(k)),G=r(k,2),l=r(f(G),2);h(()=>{d(D,` ${a($).uuid??""}`),d(A,` ${j().shortname??""}`),d(x,` ${a($).subpath??""}`),d(L,` ${a($).issues??""}`),d(l,` ${a($).exception??""}`)}),e(s,o)},$$slots:{default:!0,header:(s,t)=>{var o=Ia(),b=f(o);h(()=>d(b,a($).shortname)),e(s,o)},footer:(s,t)=>{var o=ja(),b=f(o);W(b,{color:"alternative",onclick:()=>z(U,!1),children:(i,x)=>{var k=_("Close");e(i,k)},$$slots:{default:!0}});var D=r(b,2);{var B=i=>{W(i,{color:"primary",onclick:va,children:(x,k)=>{var L=_("Edit");e(x,L)},$$slots:{default:!0}})},A=i=>{W(i,{color:"yellow",children:(x,k)=>{var L=_("Entry does not exist");e(x,L)},$$slots:{default:!0}})};I(D,i=>{a(q)?i(B):i(A,!1)})}e(s,o)}}});var ta=r(ea,2);Ea(ta,{space_name:"management",subpath:"health_check",get resource_type(){return X.content},schema_name:"health_check",get shortname(){return j().space_name}});var pa=r(ta,4);fa(pa,()=>la.retrieveEntry({resource_type:X.content,space_name:"management",subpath:"/health_check",shortname:j().space_name,retrieve_json_payload:!0,retrieve_attachments:!0,validate_schema:!0}),s=>{var t=Fa(),o=f(t);wa(o,{class:"m-5",size:"lg",style:"width: 100vw"}),e(s,t)},(s,t)=>{Pa(s,{class:"w-full px-5",children:(o,b)=>{var D=za(),B=w(D);{var A=l=>{var P=Ba(),g=w(P);E(g,{class:"bg-blue-500 text-white",children:(n,y)=>{var v=_();h(()=>d(v,`Invalid folders (${a(t).payload.body.invalid_folders.length} invalid entires)`)),e(n,v)},$$slots:{default:!0}});var F=r(g,2);{var c=n=>{var y=Q(),v=w(y);H(v,17,()=>a(t).payload.body.invalid_folders,T,(M,O)=>{E(M,{class:"bg-gray-200",children:(S,m)=>{var u=_();h(()=>d(u,a(O))),e(S,u)},$$slots:{default:!0}})}),e(n,y)};I(F,n=>{a(t).payload.body.invalid_folders.length&&n(c)})}e(l,P)};I(B,l=>{a(t).payload.body.invalid_folders&&l(A)})}var i=r(B,2);E(i,{class:"bg-blue-500 text-white",children:(l,P)=>{var g=_();g.nodeValue="Folders report",e(l,g)},$$slots:{default:!0}});var x=r(i,2);{var k=l=>{var P=Q(),g=w(P);H(g,17,()=>Object.keys(a(t).payload.body.folders_report),T,(F,c)=>{var n=Ca(),y=w(n);E(y,{class:"bg-gray-200",children:(m,u)=>{var C=_();h(()=>d(C,a(c))),e(m,C)},$$slots:{default:!0}});var v=r(y,2);{var M=m=>{E(m,{class:"bg-green-500 text-white",children:(u,C)=>{var V=_();h(()=>d(V,`Valid entries ${a(t).payload.body.folders_report[a(c)].valid_entries}`)),e(u,V)},$$slots:{default:!0}})};I(v,m=>{a(t).payload.body.folders_report[a(c)].valid_entries&&m(M)})}var O=r(v,2);{var S=m=>{var u=Da(),C=w(u);E(C,{class:"bg-red-500 text-white",children:(J,K)=>{var R=_();h(()=>d(R,`Invalid entries ${a(t).payload.body.folders_report[a(c)].invalid_entries.length}`)),e(J,R)},$$slots:{default:!0}});var V=r(C,2);H(V,17,()=>a(t).payload.body.folders_report[a(c)].invalid_entries,T,(J,K)=>{var R=La();R.__click=ra=>{_a(a(K),{subpath:a(c)})};var ca=f(R);E(ca,{class:"cursor-pointer hover:bg-gray-100 border",children:(ra,Oa)=>{var oa=_();h(()=>d(oa,a(K).shortname)),e(ra,oa)},$$slots:{default:!0}}),e(J,R)}),e(m,u)};I(O,m=>{a(t).payload.body.folders_report[a(c)].invalid_entries&&m(S)})}e(F,n)}),e(l,P)};I(x,l=>{a(t).payload.body.folders_report&&l(k)})}var L=r(x,2);{var G=l=>{var P=Ra(),g=w(P);E(g,{class:"bg-blue-500 text-white",children:(n,y)=>{var v=_();h(()=>d(v,`Invalid meta folders (${a(t).payload.body.invalid_meta_folders.length} invalid entires)`)),e(n,v)},$$slots:{default:!0}});var F=r(g,2);{var c=n=>{var y=Q(),v=w(y);H(v,17,()=>a(t).payload.body.invalid_meta_folders,T,(M,O)=>{E(M,{class:"bg-gray-200",children:(S,m)=>{var u=_();h(()=>d(u,a(O))),e(S,u)},$$slots:{default:!0}})}),e(n,y)};I(F,n=>{a(t).payload.body.invalid_meta_folders.length&&n(c)})}e(l,P)};I(L,l=>{a(t).payload.body.invalid_meta_folders&&l(G)})}e(o,D)},$$slots:{default:!0}})},(s,t)=>{var o=Aa(),b=f(o);h(()=>d(b,a(t).message)),e(s,o)}),e(da,aa),ha(),na()}ba(["click"]);export{Ya as default};
