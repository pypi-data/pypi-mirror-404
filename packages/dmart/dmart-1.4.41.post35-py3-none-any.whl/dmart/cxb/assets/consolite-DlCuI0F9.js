var _=Object.defineProperty;var p=(s,e,t)=>e in s?_(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var o=(s,e,t)=>p(s,typeof e!="symbol"?e+"":e,t);const h={filter:"",level:3,levels:{default:3,error:1,warn:2,debug:4,trace:4}},v=s=>s,m=(s,e,t)=>t.indexOf(s)===e,w=s=>s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),b=s=>typeof s=="string"?w(s):s;class M{constructor(e,t,r){o(this,"_filter",null);o(this,"_level",null);o(this,"_levels",{});o(this,"_prefix",[]);o(this,"_delimiter",null);o(this,"logMethods",{});o(this,"levels",new Proxy(this._levels,{ownKeys:e=>{var t;return[...Object.keys(h.levels),...Object.keys(((t=this.parent)==null?void 0:t.levels)||{}),...Reflect.ownKeys(e)].filter(m)},getOwnPropertyDescriptor:(e,t)=>({value:e[t],enumerable:!0,configurable:!0}),get:(e,t)=>{var r,f;return e[t]||e.default||((r=this.parent)==null?void 0:r.levels[t])||((f=this.parent)==null?void 0:f.levels.default)||h.levels[t]||h.levels.default},set:(e,t,r)=>e[t]=r}));this.parent=e,this.options=t,e||(this.logMethods={...console}),Object.assign(this.logMethods,t==null?void 0:t.methods),this._prefix=r,Object.defineProperties(this,{_filter:{enumerable:!1},_level:{enumerable:!1},_levels:{enumerable:!1},_prefix:{enumerable:!1}})}createChild(e,...t){const r=typeof e=="object",f=r?e:{};return!r&&e&&t.unshift(e),d(this,f,t)}register(e,t){this.logMethods[e]=t}getNearest(e){const t=typeof e=="string"||typeof e=="symbol"?f=>f[e]:e,r=t(this);return r??(this.parent&&this.parent.getNearest(t))}get prefix(){let e=this;const t=[...this._prefix];for(;e=e.parent;)t.unshift(...e._prefix);return t}get formattedPrefixes(){if(this.delimiter){const e=[];return this.prefix.forEach(t=>e.push(t,this.delimiter)),e}else return this.prefix}get delimiter(){return this.getNearest("_delimiter")}set delimiter(e){this._delimiter=e}set prefix(e){this._prefix=Array.isArray(e)?e:[e]}get level(){const e=this.getNearest("_level")??h.level;return typeof e=="function"?e():e}set level(e){this._level=e}get filter(){return this.getNearest("_filter")??h.filter}set filter(e){this._filter=e}get __self(){return this}get root(){var e;return((e=this.parent)==null?void 0:e.root)||this}}const d=(s,e,t)=>{const r=new M(s,e,t);return new Proxy(r,{get(l,n){if(Reflect.has(l,n))return Reflect.get(l,n);const i=l.getNearest(u=>u.logMethods[n]);if(i){const u=c=>l.levels[c]<=l.level,a=()=>typeof l.filter=="function"?l.filter(l.prefix,n):l.prefix.join("").match(b(l.filter)),y=typeof i=="function",g=u(n)&&a()&&y,x=l.formattedPrefixes.map(c=>typeof c=="string"?c:c(n));return g?i.bind(console,...x):v}},set(l,n,i){if(Reflect.has(l,n))l[n]=i;else if(i instanceof Function)l.logMethods[n]=i;else return!1;return!0},ownKeys(l){const n=[...Reflect.ownKeys(l),...Reflect.ownKeys(l.logMethods)];let i=l;for(;i=i.parent;)n.push(...Reflect.ownKeys(i.logMethods));return n},getOwnPropertyDescriptor(l,n){return Reflect.get(l,n)?Object.getOwnPropertyDescriptor(l,n):s&&s.getNearest(i=>Object.getOwnPropertyDescriptor(i.logMethods,n))||void 0}})},P=(s,...e)=>{const t={};return e.unshift(s),d(void 0,t,e)};export{P as c};
