import{p as N,B as y,h as j,F as u,R as $,L as O,a6 as v,k as p,E as d,aj as I,j as k,c as o,a8 as E,f as Q,a2 as V,l as Y,H as Z,e as g}from"./svelte-B2XmcTi_.js";import{b as aa}from"./svelte-i18n-CT2KkQaN.js";import{s as h,L as x}from"./toast-B9WDyfyI.js";import{D as H}from"./@edraj-CS4NwVbD.js";import{C as ea,g as ta,L as sa,F as ra,B as oa}from"./flowbite-svelte-BLvjb-sa.js";import{X as ia}from"./flowbite-svelte-icons-D8uFOOjS.js";import"./clsx-B-dksMZM.js";import"./esm-env-rsSWfq8L.js";import"./deepmerge-rn4rBaHU.js";import"./ajv-Cpj98o6Y.js";import"./intl-messageformat-Dc5UU-HB.js";import"./tslib-pJfR_DrR.js";import"./@formatjs-yKEsAtjs.js";import"./@zerodevx-BlBZjKxu.js";import"./@floating-ui-BwwcF-xh.js";import"./tailwind-variants-Cj20BoQ3.js";import"./tailwind-merge-CJvxXMcu.js";var la=y('<span class="font-medium"><b> </b></span> ',1),na=y('<p class="text-sm text-gray-600 mt-1"> </p>'),pa=y('<div class="space-y-4"><!> <div class="space-y-4"><div><!> <!> <!></div> <div class="flex justify-center"><!></div></div></div>'),da=y('<div class="min-w-11/12 m-6"><!></div>');function La(T,U){N(U,!0);const a=()=>O(aa,"$_",A),[A,M]=Z();let t=E(null),w=E(!1);function R(i){const b=i.target,s=b.files;if(s&&s.length>0){const f=s[0];f.type==="application/zip"||f.name.toLowerCase().endsWith(".zip")?g(t,f,!0):(h(x.warn,a()("invalid_file_type")),b.value="",g(t,null))}}async function S(){if(!o(t)){h(x.warn,a()("please_select_zip_file"));return}g(w,!0);try{const i=new FormData;if(i.append("zip_file",o(t)),(await H.axiosDmartInstance.post("managed/import",i,{headers:{...H.getHeaders(),"Content-Type":"multipart/form-data"}})).status===200){h(x.info,a()("import_successful")),g(t,null);const s=document.getElementById("zip_file");s&&(s.value="")}else h(x.warn,a()("import_failed"))}catch(i){console.error("Import error:",i),h(x.warn,a()("import_failed"))}finally{g(w,!1)}}var L=da(),W=d(L);ea(W,{class:"min-w-full p-4",children:(i,b)=>{var s=pa(),f=d(s);ta(f,{color:"red",class:"mb-4",children:(e,m)=>{var l=la(),r=j(l),_=d(r),z=d(_),F=u(r);$((n,c)=>{v(z,`${n??""}!`),v(F,` ${c??""}`)},[()=>a()("warning"),()=>a()("import_warning_message")]),p(e,l)},$$slots:{default:!0,icon:(e,m)=>{ia(e,{slot:"icon",class:"w-4 h-4"})}}});var X=u(f,2),B=d(X),D=d(B);sa(D,{for:"zip_file",class:"mb-2",children:(e,m)=>{var l=I();$(r=>v(l,r),[()=>a()("select_zip_file")]),p(e,l)},$$slots:{default:!0}});var P=u(D,2);ra(P,{id:"zip_file",accept:".zip,application/zip",onchange:R,class:"mb-2"});var q=u(P,2);{var G=e=>{var m=na(),l=d(m);$((r,_)=>v(l,`${r??""}: ${o(t).name??""} (${_??""} MB)`),[()=>a()("selected_file"),()=>(o(t).size/1024/1024).toFixed(2)]),p(e,m)};k(q,e=>{o(t)&&e(G)})}var J=u(B,2),K=d(J);{let e=V(()=>!o(t)||o(w));oa(K,{onclick:S,color:"blue",get disabled(){return o(e)},class:"px-6 py-2",children:(m,l)=>{var r=Q(),_=j(r);{var z=n=>{var c=I();$(C=>v(c,`${C??""}...`),[()=>a()("uploading")]),p(n,c)},F=n=>{var c=I();$(C=>v(c,C),[()=>a()("upload_and_import")]),p(n,c)};k(_,n=>{o(w)?n(z):n(F,!1)})}p(m,r)},$$slots:{default:!0}})}p(i,s)},$$slots:{default:!0}}),p(T,L),Y(),M()}export{La as default};
