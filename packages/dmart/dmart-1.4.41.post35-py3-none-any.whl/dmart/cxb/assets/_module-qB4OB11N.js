import{p as ae,B as c,k as t,E as e,F as o,aj as Z,R as F,L as B,a6 as G,c as v,a2 as C,h as L,f as V,j as M,a8 as ee,S as De,l as se,H as oe,e as q,i as he,I as xe,ag as je,U as ue,q as ze}from"./svelte-B2XmcTi_.js";import{g as we,a as Re}from"./@roxi-CGMFK4i8.js";import{D as me}from"./@edraj-CS4NwVbD.js";import{s as Ee,w as fe}from"./index-CIe9TrOS.js";import{a as Te}from"./axios-CG2WSiiR.js";import{H as Ae,L as pe,I as ge,c as Ie,B as te,S as be,A as re,D as Be,a as _e,b as Ue}from"./flowbite-svelte-BLvjb-sa.js";import{a as He,u as ye,s as Oe}from"./user-DeK_NB5v.js";import{E as qe,a as Fe,F as Me,b as Ne,U as We,O as Ce}from"./flowbite-svelte-icons-D8uFOOjS.js";import{b as Ge,$ as Ke}from"./svelte-i18n-CT2KkQaN.js";import{g as Ve,a as Je}from"./dmart_services-BN8RAjGS.js";import{s as Qe,L as Xe}from"./toast-B9WDyfyI.js";import"./clsx-B-dksMZM.js";import"./esm-env-rsSWfq8L.js";import"./hookar-BMRD9G9H.js";import"./consolite-DlCuI0F9.js";import"./@zerodevx-BlBZjKxu.js";import"./deepmerge-rn4rBaHU.js";import"./ajv-Cpj98o6Y.js";import"./intl-messageformat-Dc5UU-HB.js";import"./tslib-pJfR_DrR.js";import"./@formatjs-yKEsAtjs.js";import"./@floating-ui-BwwcF-xh.js";import"./tailwind-variants-Cj20BoQ3.js";import"./tailwind-merge-CJvxXMcu.js";import"./spaces-0oyGvpii.js";var Ye=c("Welcome back <br/> log in to your account",1),Ze=c("<!> <!>",1),er=c("<!> Loading ...",1),rr=c('<p class="text-red-600 mt-2"> </p>'),tr=c('<div class="flex row h-svh"><div class="flex justify-center w-1/2 p-12 flex flex-col"><!> <form class="mt-12"><!> <!> <div class="mt-6"></div> <!> <!> <div class="mt-6"></div> <!> <!></form></div> <div class="flex content-center items-center justify-center w-1/2 bg-primary"></div></div>');function $e(x,$){ae($,!0);const l=()=>B(Ge,"$_",w),[w,D]=oe();let P,f,p=ee(null),b=ee(!1),i=ee(!1);async function k(a){var n,r,u;a.preventDefault(),q(p,null),q(i,!1);try{q(i,!0),await He(P,f),window.location.reload()}catch(T){q(p,((u=(r=(n=T.response)==null?void 0:n.data)==null?void 0:r.error)==null?void 0:u.message)??"Something went wrong, please try again.",!0)}q(i,!1)}function y(){q(b,!v(b))}var j=tr(),z=e(j),U=e(z);Ae(U,{class:"text-primary",children:(a,n)=>{var r=Ye();t(a,r)},$$slots:{default:!0}});var m=o(U,2),R=e(m);pe(R,{for:"username",children:(a,n)=>{var r=Z();F(u=>G(r,u),[()=>l()("username")]),t(a,r)},$$slots:{default:!0}});var E=o(R,2);{let a=C(()=>l()("shortname")),n=C(()=>v(p)?"red":"default");ge(E,{id:"username",get placeholder(){return v(a)},type:"text",get color(){return v(n)},required:!0,get value(){return P},set value(r){P=r}})}var H=o(E,4);pe(H,{for:"password",children:(a,n)=>{var r=Z();F(u=>G(r,u),[()=>l()("password")]),t(a,r)},$$slots:{default:!0}});var O=o(H,2);Ie(O,{class:"w-full",children:(a,n)=>{var r=Ze(),u=L(r);{let S=C(()=>l()("password")),g=C(()=>v(b)?"text":"password"),d=C(()=>v(p)?"red":"default");ge(u,{id:"password",get placeholder(){return v(S)},get type(){return v(g)},get color(){return v(d)},minlength:8,maxlength:24,required:!0,get value(){return f},set value(h){f=h}})}var T=o(u,2);te(T,{class:"flex items-center border-s-0",color:"light",onclick:y,"aria-controls":"password",children:(S,g)=>{var d=V(),h=L(d);{var Q=_=>{qe(_,{})},s=_=>{Fe(_,{})};M(h,_=>{v(b)?_(Q):_(s,!1)})}t(S,d)},$$slots:{default:!0}}),t(a,r)},$$slots:{default:!0}});var N=o(O,4);te(N,{type:"submit",class:"w-full bg-primary",style:"cursor: pointer",children:(a,n)=>{var r=V(),u=L(r);{var T=g=>{var d=er(),h=L(d);be(h,{class:"me-3",size:"4",color:"blue"}),t(g,d)},S=g=>{var d=Z();F(h=>G(d,h),[()=>l()("login")]),t(g,d)};M(u,g=>{v(i)?g(T):g(S,!1)})}t(a,r)},$$slots:{default:!0}});var J=o(N,2);{var K=a=>{var n=rr(),r=e(n);F(()=>G(r,v(p))),t(a,n)};M(J,a=>{v(p)&&a(K)})}De("submit",m,k),t(x,j),se(),D()}var ar=c('<div class="absolute bottom-0 left-0 right-0 h-1 bg-primary"></div>'),sr=c('<div class="absolute bottom-0 left-0 right-0 h-1 bg-primary"></div>'),or=c('<div class="flex items-center gap-2"><!> My Profile</div>'),ir=c('<div class="flex items-center gap-2 text-red-600"><!> Logout</div>'),lr=c("<!> <!> <!>",1),nr=c('<!> <span class="text-sm"> </span> <!>',1),dr=c('<div class="flex items-center justify-between border-b border-gray-200 px-5"><ul class="flex flex-row gap-8 mr-auto"><li class="flex items-center gap-1 relative cursor-pointer"><div><div class="flex flex-row my-3"><!> <span class="mx-1">Spaces</span></div> <div><!></div></div></li>  <li class="flex items-center gap-1 relative cursor-pointer"><div><div class="flex flex-row my-2"><!> <span>Tools</span></div> <div><!></div></div></li></ul> <div class="flex items-center gap-4"><div class="flex rounded-full bg-gray-100 p-1"><div class="flex rounded-full bg-gray-100 p-1"><button>EN</button> <button>AR</button></div></div> <!></div></div>');function vr(x,$){ae($,!1);const l=()=>B(we,"$goto",f),w=()=>B(Re,"$activeRoute",f),D=()=>B(Ke,"$locale",f),P=()=>B(ye,"$user",f),[f,p]=oe();l();function b(s){Ee(s)}function i(s){s.preventDefault(),s.stopPropagation(),l()("/management/profile")}function k(s){s.preventDefault(),s.stopPropagation(),Oe()}he();var y=dr(),j=e(y),z=e(j);z.__click=()=>l()("/management/content");var U=e(z),m=e(U),R=e(m);Me(R,{size:"md"});var E=o(m,2),H=e(E);{var O=s=>{var _=ar();t(s,_)};M(H,s=>{w().url.includes("/management/content")&&s(O)})}var N=o(z,2);N.__click=()=>l()("/management/tools");var J=e(N),K=e(J),a=e(K);Ne(a,{size:"md"});var n=o(K,2),r=e(n);{var u=s=>{var _=sr();t(s,_)};M(r,s=>{w().url.includes("/management/tools")&&s(u)})}var T=o(j,2),S=e(T),g=e(S),d=e(g);d.__click=()=>b("en");var h=o(d,2);h.__click=()=>b("ar");var Q=o(S,2);te(Q,{pill:!0,color:"light",class:"flex items-center gap-2 py-1 px-3",id:"avatar_with_name",children:(s,_)=>{var ie=nr(),le=L(ie);xe(le,()=>Ve(P().shortname),A=>{re(A,{src:null,size:"xs",class:"ring-2 ring-white"})},(A,X)=>{re(A,{get src(){return v(X)},size:"xs",class:"ring-2 ring-white"})},(A,X)=>{re(A,{src:null,size:"xs",class:"ring-2 ring-white"})});var ne=o(le,2),Pe=e(ne),ke=o(ne,2);Be(ke,{simple:!0,triggeredBy:"#avatar_with_name",children:(A,X)=>{var de=lr(),ve=L(de);_e(ve,{onclick:I=>i(I),children:(I,Le)=>{var W=or(),Y=e(W);We(Y,{size:"sm"}),t(I,W)},$$slots:{default:!0}});var ce=o(ve,2);Ue(ce,{});var Se=o(ce,2);_e(Se,{onclick:I=>k(I),children:(I,Le)=>{var W=ir(),Y=e(W);Ce(Y,{size:"sm"}),t(I,W)},$$slots:{default:!0}}),t(A,de)},$$slots:{default:!0}}),F(()=>G(Pe,P().shortname)),t(s,ie)},$$slots:{default:!0}}),F(()=>{ue(d,1,`w-8 h-8 flex items-center justify-center rounded-full text-sm font-medium transition-all
                    ${D()==="en"?"bg-white border-2 border-primary shadow-sm":"text-gray-600 hover:color-primary"}`),ue(h,1,`w-8 h-8 flex items-center justify-center rounded-full text-sm font-medium transition-all
                    ${D()==="ar"?"bg-white border-2 border-primary shadow-sm":"text-gray-600 hover:color-primary"}`)}),t(x,y),se(),p()}je(["click"]);function cr(x,$){let l;return(...w)=>{clearTimeout(l),l=setTimeout(()=>x(...w),$)}}const ur=cr((x,$)=>{Qe(x,$)},300);var mr=c('<div class="flex flex-col h-screen"><!> <div class="flex-grow overflow-auto"><!></div></div>'),fr=c('<div class="flex w-svw h-svh justify-center items-center"><!></div>');function qr(x,$){ae($,!1);const l=()=>B(we,"$goto",D),w=()=>B(ye,"$user",D),[D,P]=oe();l();const f=Te.create({baseURL:fe.backend,withCredentials:!0,timeout:fe.backend_timeout});f.interceptors.response.use(i=>i,i=>(i.code==="ERR_NETWORK"&&ur(Xe.warn,`Network error.
Please check your connection or the server is down.`),Promise.reject(i))),me.setAxiosInstance(f),Je(),he();var p=V(),b=L(p);xe(b,()=>me.getProfile(),i=>{var k=fr(),y=e(k);be(y,{color:"blue",size:"16"}),t(i,k)},(i,k)=>{var y=V(),j=L(y);{var z=m=>{$e(m,{})},U=m=>{var R=mr(),E=e(R);vr(E,{});var H=o(E,2),O=e(H);ze(O,$,"default",{},null),t(m,R)};M(j,m=>{!w()||!w().signedin?m(z):m(U,!1)})}t(i,y)},(i,k)=>{$e(i,{})}),t(x,p),se(),P()}export{qr as default};
