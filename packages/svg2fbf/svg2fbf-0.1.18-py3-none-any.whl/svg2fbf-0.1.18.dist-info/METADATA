Metadata-Version: 2.4
Name: svg2fbf
Version: 0.1.18
Summary: SVG Frame-by-Frame Animation Generator - Create optimized FBF SVG animations from SVG sequences
Project-URL: Homepage, https://github.com/Emasoft/svg2fbf
Project-URL: Documentation, https://github.com/Emasoft/svg2fbf#readme
Project-URL: Repository, https://github.com/Emasoft/svg2fbf.git
Project-URL: Issues, https://github.com/Emasoft/svg2fbf/issues
Project-URL: Changelog, https://github.com/Emasoft/svg2fbf/blob/main/CHANGELOG.md
Author-email: Emasoft <713559+Emasoft@users.noreply.github.com>
Maintainer-email: Emasoft <713559+Emasoft@users.noreply.github.com>
License: Apache-2.0
License-File: LICENSE
Keywords: animation,fbf,frame-by-frame,mesh-gradient,smil,svg,svg2fbf,vector-animation
Classifier: Development Status :: 3 - Alpha
Classifier: Environment :: Console
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: End Users/Desktop
Classifier: License :: OSI Approved :: Apache Software License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Multimedia :: Graphics :: Editors :: Vector-Based
Classifier: Topic :: Multimedia :: Graphics :: Graphics Conversion
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Typing :: Typed
Requires-Python: >=3.10
Requires-Dist: fonttools>=4.60.1
Requires-Dist: lxml>=6.0.2
Requires-Dist: numpy>=2.2.0
Requires-Dist: python-bidi>=0.6.7
Requires-Dist: pyyaml>=6.0
Requires-Dist: tomli-w>=1.2.0
Requires-Dist: tomli>=2.0.0; python_version < '3.11'
Provides-Extra: text2path
Requires-Dist: svg-text2path>=0.4.3; (python_version >= '3.11') and extra == 'text2path'
Description-Content-Type: text/markdown

<!-- Animated Header with FBF.SVG Title -->
<p align="center">
  <img src="assets/panther_bird_header.fbf.svg" alt="FBF.SVG Animated Header - Panther and Bird Animation with Title" width="100%" style="max-width: 1280px; height: auto;"/>
</p>

<h1 align="center">svg2fbf</h1>

<p align="center">
  <strong>SVG Frame-by-Frame Animation Generator</strong>
</p>

<p align="center">
  <a href="https://opensource.org/licenses/Apache-2.0"><img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" alt="License"></a>
  <a href="https://www.python.org/downloads/"><img src="https://img.shields.io/badge/python-3.10+-blue.svg" alt="Python"></a>
  <a href="https://github.com/Emasoft/svg2fbf/releases"><img src="https://img.shields.io/github/v/release/Emasoft/svg2fbf?include_prereleases" alt="Version"></a>
</p>

<p align="center">
  <a href="https://github.com/opentoonz/opentoonz"><img src="https://img.shields.io/badge/Part%20of-OpenToonz%20Open%20Source%20Effort-ff6b35?style=for-the-badge&logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iI2ZmZmZmZiIgZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFMxNy41MiAyIDEyIDJ6bTAgMThjLTQuNDEgMC04LTMuNTktOC04czMuNTktOCA4LTggOCAzLjU5IDggOC0zLjU5IDgtOCA4em0tNS01bDctNC00IDd6Ii8+PC9zdmc+" alt="Part of OpenToonz Open Source Effort"></a>
</p>

<p align="center">
  <em>FBF.SVG format is discussed here: <a href="https://github.com/opentoonz/opentoonz/issues/5346">OpenToonz Issue #5346</a> - bringing vector frame-by-frame animation to the web</em>
</p>

---

> **‚ö†Ô∏è ALPHA SOFTWARE**: svg2fbf is currently in **alpha development**. While functional and tested, the API, command-line interface, and FBF format specification may change between releases. Use in production with caution and expect breaking changes until the stable 1.0 release. Check the [releases page](https://github.com/Emasoft/svg2fbf/releases) for the latest version.

---

## Table of Contents

- [About FBF.SVG Format](#about-fbfsvg-format)
  - [Design Principles](#design-principles)
  - [Format Specification & Schema](#format-specification--schema)
- [FBF.SVG Official Logo](#fbfsvg-official-logo)
- [Comparison to Other Web Vector Animation Formats](#comparison-to-other-web-vector-animation-formats)
  - [üèÜ FBF.SVG vs. The Competition: Web & Mobile](#-fbfsvg-vs-the-competition-web--mobile)
  - [üí° The Verdict](#-the-verdict)
  - [Understanding the Difference: Formats vs. Implementation Methods](#understanding-the-difference-formats-vs-implementation-methods)
  - [Why FBF.SVG Stands Out: A Standard Image File, Not Code](#why-fbfsvg-stands-out-a-standard-image-file-not-code)
  - [üìö Full Documentation](#-full-documentation)
- [Description](#description)
  - [Key Features](#key-features)
- [Output Examples](#output-examples)
- [Requirements](#requirements)
- [Installation](#installation)
  - [Install uv](#install-uv)
  - [Install svg2fbf](#install-svg2fbf)
  - [Alternative Installation Methods](#alternative-installation-methods)
  - [Verify Installation](#verify-installation)
  - [Upgrading](#upgrading)
  - [Uninstalling](#uninstalling)
- [SVG ViewBox Repair Utility](#svg-viewbox-repair-utility)
  - [Why ViewBox Repair?](#why-viewbox-repair)
  - [Automatic Dependency Installation](#automatic-dependency-installation)
  - [Usage](#usage)
  - [Animation Sequence Mode](#animation-sequence-mode)
  - [Example Output](#example-output)
- [Quick Start](#quick-start)
  - [Basic Usage](#basic-usage)
  - [Using FBF Generation Cards](#using-fbf-generation-cards)
  - [Animation Types](#animation-types)
  - [Generate an Animated Button](#generate-an-animated-button)
- [CLI Parameters](#cli-parameters)
  - [Core Options](#core-options)
  - [Advanced Options](#advanced-options)
  - [Metadata Options](#metadata-options)
  - [Animation Types](#animation-types-1)
- [FBF Generation Cards](#fbf-generation-cards)
  - [What Are Generation Cards?](#what-are-generation-cards)
  - [Using Generation Cards](#using-generation-cards)
  - [How svg2fbf Works](#how-svg2fbf-works)
  - [Advanced Capabilities: Streaming & Interactive Visual Communication](#advanced-capabilities-streaming--interactive-visual-communication)
  - [SVG 2.0 Mesh Gradient Support](#svg-20-mesh-gradient-support)
- [Input Frame Requirements](#input-frame-requirements)
  - [File Naming](#file-naming)
  - [SVG Format Requirements](#svg-format-requirements)
  - [Resources and Assets](#resources-and-assets)
- [Documentation](#documentation)
- [Tools & Scripts](#tools--scripts)
- [Troubleshooting](#troubleshooting)
- [Contributing](#contributing)
- [License](#license)
- [Acknowledgments](#acknowledgments)
- [Origin](#origin)

---

## About FBF.SVG Format

**FBF.SVG** (Frame-by-Frame SVG) is a proposed **candidate substandard of the SVG specification**, analogous to SVG Tiny and SVG Basic. It defines a constrained, optimized profile for declarative frame-by-frame animations that are valid SVG 1.1/2.0 documents with additional structural and conformance requirements.

<p align="center">
  <img src="assets/quote_aqua_transparent.svg" alt="Why we need a vector video format - quote from FBF.SVG creator" width="100%" style="max-width: 1200px; height: auto;"/>
</p>

### Design Principles

The FBF.SVG format is designed around eight core principles:

1. **SVG Compatibility** - Every FBF.SVG document is a valid SVG document
2. **Declarative Animation** - Uses SMIL timing, not imperative scripting
3. **Security First** - No external resources; strict Content Security Policy compliance
4. **Optimization** - Smart deduplication and shared definitions minimize file size
5. **Validatability** - Mechanically validatable against formal schema
6. **Self-Documentation** - Comprehensive embedded metadata in RDF/XML format
7. **Streaming Architecture** - Unlimited real-time frame addition without playback interruption
8. **Interactive Visual Communication** - Bidirectional LLM-to-user visual interaction protocol

### Format Specification & Schema

**üìÇ [FBF.SVG Format Standard](FBF.SVG/)** ‚Äî Complete format specification in dedicated folder

Core documents:
- **üìã [Specification](FBF.SVG/FBF_SVG_SPECIFICATION.md)** - Complete format specification
- **üìê [XML Schema (XSD)](FBF.SVG/fbf-svg.xsd)** - Formal schema definition for validation
- **üìä [Metadata Spec](FBF.SVG/FBF_METADATA_SPEC.md)** - RDF/XML metadata requirements
- **üìù [Format Guide](FBF.SVG/FBF_FORMAT.md)** - Technical implementation details
- **üìÑ [Proposal](FBF.SVG/FBF_SVG_PROPOSAL.md)** - Original proposal with use cases

The specification defines two conformance levels:
- **FBF.SVG Basic** - Core structural and animation requirements
- **FBF.SVG Full** - Adds comprehensive RDF/XML metadata

The **svg2fbf** tool generates FBF.SVG Full conformant documents.

---

## FBF.SVG Official Logo:

<div align="center">
  <a href="https://github.com/Emasoft/svg2fbf">
    <picture>
      <source media="(prefers-color-scheme: light)" srcset=".github/images/fbf_svg_logo_plain_white.svg">
      <source media="(prefers-color-scheme: dark)" srcset=".github/images/fbf_svg_logo_plain_black.svg">
      <img alt="FBF.SVG Official Logo" src=".github/images/fbf_svg_logo_plain_white.svg" width="100%" style="max-width: 80%; height: auto;">
    </picture>
  </a>
</div>


---

## Comparison to Other Web Vector Animation Formats

**üéØ FBF.SVG is a Perfectly Standard SVG Image File**

FBF.SVG files are **100% standard SVG images** ‚Äî nothing more, nothing less:
- ‚úÖ **NO JavaScript code** inside the file
- ‚úÖ **NO CSS code** inside the file
- ‚úÖ **NO external dependencies**
- ‚úÖ Just pure, standard SVG markup (XML)

**Compatible with millions of software tools:**
- Opens in **any web browser** (Chrome, Firefox, Safari, Edge)
- Opens in **any SVG editor** (Inkscape, Illustrator, Affinity Designer, CorelDRAW)
- Opens in **any image viewer** that supports SVG
- Opens in **video editors** (Premiere, Final Cut, DaVinci Resolve, Kdenlive)
- Opens in **design tools** (Figma, Sketch, Canva)
- Works in **mobile apps** (iOS, Android native SVG support)

**The ZERO CODE Advantage:** FBF.SVG is the **only** web vector animation format that contains **ZERO CODE**:
- ‚úÖ **0 CODE to create** ‚Äî Use visual tools (Inkscape, Krita, OpenToonz, Blender)
- ‚úÖ **0 CODE in the file** ‚Äî Pure SVG image, no JavaScript, no CSS
- ‚úÖ **0 CODE to edit** ‚Äî Edit output in any SVG graphic application
- ‚úÖ **0 CODE to play** ‚Äî Native browser support, open and it animates

This comparison highlights what makes FBF.SVG unique in the web animation ecosystem. Questions are framed to show capabilities that matter for professional animation workflows.

**üìä [View Full Detailed Comparison Tables](FBF.SVG/COMPARISON_TABLE.md)** ‚Äî Complete comparison with **separate detailed tables for web formats and mobile platforms**, plus all formats, tools, pricing, and 78 documented references

### üèÜ FBF.SVG vs. The Competition: Web & Mobile

**One format. Zero code. Works everywhere.** This comparison evaluates the most popular alternatives across web and mobile to show why FBF.SVG is superior.

| **What Makes a Great Animation Format?** | **üéØ FBF.SVG** | **Lottie** (Bodymovin) | **OCA** (Open Cel) | **Rive** | **Spine** | **Alembic** (.abc) |
|---|:---:|:---:|:---:|:---:|:---:|:---:|
| **Output is a standard SVG image file?** | ‚úÖ **YES!** | ‚ùå NO, outputs JSON | ‚ùå NO, outputs JSON+PNG | ‚ùå NO, outputs .riv binary | ‚ùå NO, outputs binary+atlas | ‚ùå NO, outputs .abc scene data (interchange format) |
| **Compatible with millions of SVG tools?** | ‚úÖ **YES!** (Inkscape, Illustrator, etc.) | ‚ùå NO, proprietary format | ‚ùå NO, limited to animation tools | ‚ùå NO, proprietary format | ‚ùå NO, proprietary format | ‚ùå NO, requires 3D/VFX tools |
| **Playable in any app that supports SVG 1.1?** | ‚úÖ **YES!** | ‚ùå NO, requires JavaScript library | ‚ùå NO, must export to video first | ‚ùå NO, requires runtime library | ‚ùå NO, requires runtime library | ‚ùå NO, requires 3D software (Maya, Houdini, Blender) |
| **Can artists create without coding?** | ‚úÖ **YES!** | ‚úÖ YES, but requires Adobe After Effects ($275/yr subscription) | ‚úÖ **YES!** using Krita/Blender/OpenToonz | ‚úÖ YES, but free version has feature limits | ‚úÖ YES, but requires purchase ($70-330 one-time) | ‚úÖ YES, using 3D tools (Maya, Houdini, Blender) |
| **Can play without JavaScript?** | ‚úÖ **YES!** | ‚ùå NO, requires lottie-web.js library | ‚úÖ YES, if exported as video (loses interactivity) | ‚ùå NO, requires Rive runtime library | ‚ùå NO, requires Spine runtime library | N/A (data exchange format, not playback) |
| **Can artists edit output without coding?** | ‚úÖ **YES!** in any SVG editor (Inkscape, Illustrator, Boxy SVG, etc.) | ‚ùå NO, requires Adobe After Effects | ‚úÖ **YES!** in Krita/Blender/OpenToonz | ‚ùå NO, requires Rive Editor | ‚ùå NO, requires Spine Editor | ‚úÖ YES, in 3D/VFX software |
| **Can deploy without programmer's help?** | ‚úÖ **YES!** | ‚ùå NO, developer must integrate lottie-web.js | ‚úÖ **YES!** (as video file) | ‚ùå NO, developer must integrate Rive runtime | ‚ùå NO, developer must integrate Spine runtime | ‚ùå NO, production pipeline format (not for end-user deployment) |
| **Free creation tools available?** | ‚úÖ **YES, $0!** (Inkscape, Krita, Blender, etc.) | ‚ùå NO, requires After Effects subscription ($275/year) | ‚úÖ **YES, $0!** (Krita, Blender, OpenToonz) | ‚úÖ YES, but $168-540/year for professional features | ‚ùå NO, requires purchase ($70-330 one-time) | ‚úÖ YES, Blender is free (Maya/Houdini are paid) |
| **Free runtime/playback libraries?** | ‚úÖ **YES, $0!** (native browser SVG support) | ‚úÖ YES, $0 (lottie-web is MIT license) | ‚úÖ YES, $0 (no runtime needed if exported as video) | ‚úÖ YES, $0 (Rive runtimes are MIT license) | ‚úÖ YES, $0 (Spine runtimes are free, see license) | N/A (interchange format, not runtime) |
| **Per-app licensing fees for mobile?** | ‚úÖ **NO, $0!** | ‚úÖ NO, $0 | ‚úÖ NO, $0 | ‚úÖ NO, $0 | ‚ùå NO normally, but YES $3,300/app for enterprise license | N/A (not used in mobile apps) |
| **Per-install runtime fees?** | ‚úÖ **NO, $0!** | ‚úÖ NO, $0 | ‚úÖ NO, $0 | ‚úÖ NO, $0 | ‚úÖ NO, $0 | N/A |
| **Export fees for production use?** | ‚úÖ **NO, $0!** | ‚úÖ NO, $0 | ‚úÖ NO, $0 | ‚ùå YES, requires paid subscription ($168-540/year) for full features | ‚úÖ NO, $0 | ‚úÖ NO, $0 (open source) |
| **Revenue sharing required?** | ‚úÖ **NO!** | ‚úÖ NO | ‚úÖ NO | ‚úÖ NO | ‚úÖ NO | ‚úÖ NO |
| **Edit output in standard graphic apps?** | ‚úÖ **YES!** in Inkscape, Illustrator, Affinity Designer, etc. | ‚ùå NO, requires After Effects | ‚úÖ YES, in animation apps (Krita, Blender, OpenToonz) | ‚ùå NO, requires Rive Editor | ‚ùå NO, requires Spine Editor | ‚ùå NO, requires 3D/VFX tools (not 2D graphic apps) |
| **Can edit output then re-export to same format?** | ‚úÖ **YES!** (edit SVG ‚Üí save as SVG) | ‚ùå NO, cannot round-trip (AE ‚Üí JSON, but JSON ‚Üõ AE) | ‚úÖ YES, within same animation app | ‚ùå NO, cannot round-trip | ‚ùå NO, cannot round-trip | ‚úÖ YES, within 3D tools |
| **Usable as exchange format between apps?** | ‚úÖ **YES!** (SVG is universal standard) | ‚ùå NO, locked to After Effects | ‚úÖ **YES!** (OCA's main purpose: interchange) | ‚ùå NO, locked to Rive Editor | ‚ùå NO, locked to Spine Editor | ‚úÖ **YES!** (Alembic's main purpose: VFX interchange) |
| **Based on official W3C web standard?** | ‚úÖ **YES!** (SVG 1.1/2.0 standard) | ‚ùå NO, proprietary spec (though open-source) | ‚ùå NO, community format (GPL-3.0) | ‚ùå NO, proprietary format | ‚ùå NO, proprietary format | ‚ùå NO, open VFX standard (Lucasfilm/Sony) |
| **Works on web in all browsers?** | ‚úÖ **YES!** natively (no libraries needed) | ‚úÖ YES, requires adding lottie-web.js library (~160KB) | ‚úÖ YES, if exported as video (HTML5 video tag) | ‚úÖ YES, requires adding Rive runtime library | ‚úÖ YES, requires adding Spine runtime library | ‚ùå NO, scene interchange format (not for web playback) |
| **Works in iOS mobile apps?** | ‚úÖ **YES!** using free SVG libraries (SVGKit, Macaw, etc.) | ‚úÖ YES, using lottie-ios library | ‚úÖ YES, if exported as video (AVPlayer) | ‚úÖ YES, using rive-ios library | ‚úÖ YES, using spine-ios library | ‚ùå NO, production pipeline format (not for mobile) |
| **Works in Android mobile apps?** | ‚úÖ **YES!** using free SVG libraries (AndroidSVG, etc.) | ‚úÖ YES, using lottie-android library | ‚úÖ YES, if exported as video (VideoView) | ‚úÖ YES, using rive-android library | ‚úÖ YES, using spine-android library | ‚ùå NO, production pipeline format (not for mobile) |
| **Works in video games and consoles?** | ‚úÖ **YES!** as texture/sprite sequence (Unity, Godot, Unreal, etc.) | ‚ùå NO, requires web runtime (not available) | ‚ùå NO, video format not suitable for games | ‚ùå NO, runtime not available on consoles | ‚úÖ YES, but Spine is designed for games (requires runtime) | ‚ö†Ô∏è PARTIAL, engines can import .abc for 3D assets (not runtime animation) |
| **Imports into video editors (Premiere, Final Cut)?** | ‚úÖ **YES!** as image sequence or direct import | ‚ùå NO, must convert to video first | ‚úÖ YES, exports as video natively | ‚ùå NO, must convert to video first | ‚ùå NO, must convert to video first | ‚úÖ YES, via 3D render pipeline |
| **Self-contained single file?** | ‚úÖ **YES!** everything embedded in one SVG | ‚úÖ YES, single JSON file (images as base64) | ‚ùå NO, JSON + separate PNG frame files | ‚úÖ YES, single .riv file | ‚ùå NO, binary + separate image atlas file | ‚úÖ YES, single .abc file |

**üìù Note on Alembic:** Alembic is included in this comparison because it's sometimes suggested for exporting animations from OpenToonz. **Alembic IS valuable for interoperability** - it's a **scene hierarchy editing format** that allows OpenToonz to exchange layered 2D/3D scene hierarchies (including z-depth for parallax effects) with other animation tools like Blender, Maya, and Houdini. However, **Alembic and FBF.SVG serve different purposes that don't interfere with each other**: Alembic is for **editing** (scene hierarchy interchange between professional tools), while FBF.SVG is for **output** (deployable vector video standard). Alembic cannot be played in browsers, mobile apps, or displayed directly as animation for public consumption. Use Alembic for production pipeline interchange (OpenToonz ‚Üî Blender), and FBF.SVG (or video export) for deploying animations to end users.

### üí° The Verdict

**FBF.SVG is the ONLY format that:**
- ‚úÖ Is a standard SVG image (not code, not proprietary data)
- ‚úÖ Requires ZERO code at every stage (create, edit, play)
- ‚úÖ Costs $0 for everything (tools, runtime, per-app, exports)
- ‚úÖ Works EVERYWHERE (web, mobile, desktop, video editors, games)
- ‚úÖ Opens in millions of applications (Inkscape, Illustrator, Final Cut, browsers, mobile apps, game engines, etc.)
- ‚úÖ Eliminates need for programmers (artists-only workflow)

**Table Legend:**
- ‚úÖ **YES** = Fully supported without limitations
- ‚úÖ YES, but [condition] = Supported with specific requirement or cost
- ‚ùå NO, [reason] = Not supported, with explanation
- ‚ùå **NO** = Not supported at all

### Understanding the Difference: Formats vs. Implementation Methods

It's important to distinguish between **deliverable animation formats** (what you ship) and **implementation methods** (how you code them):

**Deliverable Formats (this table):**
- **FBF.SVG** ‚Äî Self-contained SVG file (0 code required)
- **Lottie** ‚Äî JSON file + JavaScript runtime (code required)
- **Rive** ‚Äî .riv file + proprietary runtime (code required)
- **Adobe Animate** ‚Äî Various exports (SVG, Canvas, Video)

**Implementation Methods (NOT competing formats):**
- **SMIL** ‚Äî Part of SVG standard (FBF.SVG uses this internally!)
- **CSS Animations** ‚Äî Requires writing CSS code
- **Web Animations API** ‚Äî Requires writing JavaScript code
- **JavaScript Libraries** ‚Äî Requires writing/loading code (Snap.svg, GSAP, etc.)

**Why this matters:** FBF.SVG uses SMIL internally, but that's transparent to users. You never write SMIL code ‚Äî you create frames visually and svg2fbf generates the animation automatically. In contrast, CSS and WAAPI require you to write code yourself.

### Why FBF.SVG Stands Out: A Standard Image File, Not Code

Looking at the table above, FBF.SVG is the **only deliverable format** that is a **pure image file with ZERO CODE**:

**üìÑ It's Just an Image File!**

FBF.SVG output is a **perfectly standard SVG image file** ‚Äî the same format used for logos, icons, and illustrations everywhere:
- **Not a code file** ‚Äî It's an image, like a .jpg or .png
- **Not a data file** ‚Äî It's not JSON, XML, or binary data that needs interpretation
- **Not a script** ‚Äî Contains zero lines of JavaScript or CSS
- **Just SVG** ‚Äî Pure W3C SVG markup, understood by millions of applications

**üåç Universal Compatibility:**

> **"Anything can play an FBF.SVG video. Anything! If it supports SVG 1.1, it can reproduce it!"**

**This means:**
- ‚úÖ Open it in **Adobe Illustrator** ‚Äî it works
- ‚úÖ Open it in **Inkscape** ‚Äî it works and you can edit it
- ‚úÖ Open it in **Google Chrome** ‚Äî it works and animates
- ‚úÖ Open it in **Final Cut Pro** ‚Äî it works
- ‚úÖ Use it in **game engines** (Unity, Godot, etc.) ‚Äî it works as texture sequence
- ‚úÖ Send it in an **email** ‚Äî recipient can open it, no special software
- ‚úÖ Upload to **any website** ‚Äî it just works, no code deployment
- ‚úÖ Import into **any design tool** ‚Äî Figma, Sketch, Canva, all work

**üéØ ZERO CODE at Every Stage:**
1. **Creation** ‚Äî Draw frames in Inkscape/Krita/Blender, no coding
2. **Processing** ‚Äî svg2fbf generates the image file, no coding
3. **The File Itself** ‚Äî Pure SVG image, contains zero code
4. **Editing** ‚Äî Edit the image in any SVG graphic app, no coding
5. **Playback** ‚Äî Open the image file in browser, it animates (no JavaScript needed)

**üé® Artist-Friendly Workflow:**
- Create animation frames in familiar visual tools
- No need to learn coding, JavaScript, or CSS
- Edit output directly in Inkscape, Illustrator, etc.
- True round-trip workflow: edit ‚Üí export ‚Üí edit again

**üõ†Ô∏è Developer-Friendly Format:**

A company that wants to create a graphic editor for FBF.SVG **doesn't need to support the complexity of a CSS rendering engine or a JavaScript runtime!** All it needs is to support the plain, bare **SVG 1.1 or SVG 2.0 standard**.

- ‚úÖ **Simple implementation** ‚Äî Just implement SVG standard
- ‚úÖ **No CSS engine required** ‚Äî Zero CSS to parse or render
- ‚úÖ **No JavaScript runtime required** ‚Äî Zero scripts to execute
- ‚úÖ **Lower complexity** ‚Äî Smaller codebase, fewer bugs
- ‚úÖ **Faster development** ‚Äî Build tools faster
- ‚úÖ **Better performance** ‚Äî Native rendering, no scripting overhead

**üîì No Vendor Lock-in:**
- Output is standard SVG (works in any SVG tool)
- Not tied to proprietary editor or runtime
- Can switch tools at any time
- Future-proof: based on W3C standard

**üì¶ Self-Contained & Universal:**
- Single SVG file, no external dependencies
- No JavaScript bundle to load (~0KB vs. Lottie's 160KB)
- Works everywhere: web, print, video editors, presentations
- Native browser performance, hardware-accelerated

**üí∞ Economic Advantages:**

> **"With FBF.SVG there is no need to hire programmers anymore to create animations. Artists are all you need."**

- **Lower production costs** ‚Äî No need for programming team
- **Faster hiring** ‚Äî Artists are easier to find than animation programmers
- **Simpler workflow** ‚Äî Artists work with familiar visual tools
- **No code maintenance** ‚Äî Zero codebase to debug or update
- **Apache 2.0 license** ‚Äî Permissive, commercial-friendly
- **Works with free tools** ‚Äî Inkscape, Krita, OpenToonz, Blender
- **No subscription fees** ‚Äî No runtime licensing costs
- **No distribution fees** ‚Äî Free for commercial streaming

**When to Choose FBF.SVG:**
- ‚úÖ Frame-by-frame vector animation (cartoons, anime, traditional animation)
- ‚úÖ Want complete workflow without writing any code
- ‚úÖ Need standard SVG output editable in graphic applications
- ‚úÖ Require self-contained files with 0 external dependencies
- ‚úÖ Building with free/open source tools
- ‚úÖ Need true bidirectional workflow (edit anywhere, anytime)
- ‚úÖ JavaScript-free playback for performance/security
- ‚úÖ Commercial projects requiring permissive licensing

**When to Consider Alternatives:**
- **Lottie**: Already invested in After Effects, comfortable with JavaScript runtime dependency
- **Rive**: Need interactive game-like animations with complex state machines and don't mind proprietary format
- **Adobe Animate**: Already have Creative Cloud subscription, need multiple export formats
- **Spine**: Building 2D games with skeletal animation, need advanced rigging

### üìö Full Documentation

The table above is a curated selection of the most important comparisons. For complete details:

üìä **[View Full Detailed Comparison Tables](FBF.SVG/COMPARISON_TABLE.md)** with:
- **Web Animation Formats** ‚Äî Complete 8-format comparison table with all technical details
- **Mobile Animation Formats** ‚Äî Dedicated mobile table with iOS/Android library details, per-app fees, and hidden costs
- **JavaScript Libraries** ‚Äî 7 animation libraries compared
- **Animation Authoring Tools** ‚Äî 8 creation tools compared
- **78 Documented References** ‚Äî Every claim backed by official sources

**Cost Breakdown Examples:**
- **5 mobile apps, 1 year**: FBF.SVG $0 vs Lottie $275 vs Rive $168-540 vs Spine Enterprise (per-product) $16,500
- **Free SVG libraries**: iOS (SVGKit, SVGView, Macaw), Android (AndroidSVG, SVG-Android), Cross-platform (React Native SVG, Flutter SVG) - all MIT/Apache 2.0

---

## Description

**svg2fbf** is a command-line tool that transforms sequences of SVG files into FBF (Frame-by-Frame) SVG animations using SMIL declarative animation. The tool processes a directory of SVG frames, applies element deduplication and optimization algorithms, and generates a single, self-contained animated SVG document conformant to the FBF.SVG specification.

### Key Features

#### Core Animation Features
- üé¨ **Frame-by-frame animation** - Sequential SVG frame composition with SMIL timing control
- üîÑ **Element deduplication** - Hash-based identification and elimination of redundant SVG elements across frames
- üì¶ **Gradient optimization** - Intelligent merging of identical gradient definitions
- üéûÔ∏è **Animation modes** - Eight playback modes (once, loop, pingpong, with forward/reverse variants)
- üñºÔ∏è **ViewBox normalization** - Automatic transformation of heterogeneous frame dimensions
- üåà **SVG 2.0 mesh gradients** - Native support with conditional JavaScript polyfill injection
- üìã **Structured metadata** - RDF/XML metadata conformant to Dublin Core and custom FBF vocabulary
- ‚öôÔ∏è **FBF Generation Cards** - Declarative YAML-based project configuration for reproducible builds

#### Advanced Capabilities
- üåä **Streaming architecture** - Real-time frame appending without playback interruption via frames-at-end design
- ü§ñ **LLM visual protocol** - Bidirectional visual communication interface for AI-to-user interaction
- üì° **Interactive coordination** - SVG element identification and coordinate-based user input handling
- üéØ **Dynamic composition** - Runtime modification of three Z-order extension points (background, foreground, overlay)
- üîÑ **Progressive rendering** - Frame definitions positioned after animation structure for streaming optimization

---

## Output Examples

![SVG Animation Examples](assets/svg_animation_examples_header_onion_skin.webp)

Here are examples of FBF animations generated by svg2fbf. All examples are located in the `examples/` directory.

### 1. üéØ CODE-FREE Interactive Splat Button
<p align="center">
  <img src="assets/splat_button.fbf.svg" alt="Splat Button Animation - Click Me!" width="300"/>
</p>

**‚ú® ZERO JavaScript Required!** Interactive button with click-triggered splash effect animation - pure SVG, no code needed!

- **Frames**: 11
- **FPS**: Variable (pingpong loop)
- **Trigger**: Click event (`begin="click"`)
- **Features**: Click-triggered animation, effects, filters, blending modes
- **Output**: `examples/splat_button/fbf_output/splat_button.fbf.svg`
- **Config**: [`examples/splat_button/splat_button.yaml`](examples/splat_button/splat_button.yaml)

*Click the button above to trigger the animation!*

> **üí° Future Enhancement**: We're planning to add callback function support, allowing you to specify custom JavaScript callbacks when the animation completes.

### 2. Panther and Bird
<p align="center">
  <img src="assets/panther_bird.fbf.svg" alt="Panther and Bird Animation" width="100%" style="max-width: 1280px; height: auto;"/>
</p>

Cinematic-quality animation featuring a prowling panther and flying bird with synchronized movement.

- **Frames**: 17 (panther), 9 (bird) - independently animated
- **Dimensions**: 1280√ó720px (widescreen format)
- **FPS**: Variable (0.75s per frame)
- **Features**:
  - Multi-entity animation (separate animation cycles)
  - Complex vector artwork with gradients
  - Optimized file size through intelligent element reuse
  - Professional-grade character animation
- **Output**: `examples/panther_bird/fbf_output/panther_bird.fbf.svg`

This example demonstrates advanced FBF.SVG capabilities, including multiple independently-cycling animated groups sharing the same scene.

### 3. üö∂ Walk Cycle Animation
<p align="center">
  <img src="assets/walk_cycle.fbf.svg" alt="Walk Cycle Animation" width="512"/>
</p>

Professional character walk cycle demonstrating classic animation principles.

- **Frames**: Multiple keyframes
- **Dimensions**: 512√ó512px
- **FPS**: Variable
- **Features**:
  - Classic animation walk cycle principles
  - Smooth looping motion
  - Character animation fundamentals
  - Ideal for learning frame-by-frame animation techniques
- **Output**: `examples/walk_cycle/fbf_output/walk_cycle.fbf.svg`
- **Config**: [`examples/walk_cycle/walk_cycle.yaml`](examples/walk_cycle/walk_cycle.yaml)

Perfect for studying how traditional animation principles translate to FBF.SVG format.

### 4. ü¶Ö Seagull Flight Animation
<p align="center">
  <img src="assets/seagull.fbf.svg" alt="Seagull Animation" width="400"/>
</p>

Simple seagull flying animation with basic shapes and gradients.

- **Frames**: 10
- **FPS**: 12
- **Features**:
  - Simple looping animation
  - Basic shapes and gradients
  - Lightweight file size
  - Great for learning FBF.SVG basics
- **Output**: `examples/seagull/fbf_output/seagull.fbf.svg`
- **Config**: [`examples/seagull/seagull.yaml`](examples/seagull/seagull.yaml)

### 5. üé≠ Anime Character Animation
<p align="center">
  <img src="assets/anime_girl.fbf.svg" alt="Anime Girl Animation" width="400" height="400" />
</p>

Complex character animation.

- **Frames**: 35
- **FPS**: 24
- **Features**:
  - Complex character animation
  - Mesh gradients and detailed artwork
  - High frame count for smooth motion
  - Advanced SVG techniques
- **Output**: `examples/anime_girl/fbf_output/anime_girl.fbf.svg`
- **Config**: [`examples/anime_girl/anime_girl.yaml`](examples/anime_girl/anime_girl.yaml)

---

## Requirements

- **Python**: ‚â•3.10
- **[uv](https://github.com/astral-sh/uv)**: Package and tool manager

---

## Installation

svg2fbf is installed as a **uv tool**, which makes it available globally on your system.

### Install uv

```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

### Install svg2fbf

Choose the release channel that fits your needs:

#### Stable Release (Recommended for Production)

```bash
# Install from PyPI (recommended - production-ready)
uv tool install svg2fbf --python 3.10

# Or install from GitHub stable branch
uv tool install git+https://github.com/Emasoft/svg2fbf.git@master --python 3.10
```

#### Pre-Release Channels

```bash
# Release Candidate (rc) - Final testing before stable
uv tool install git+https://github.com/Emasoft/svg2fbf.git@review --python 3.10

# Beta - Bug fixes and testing
uv tool install git+https://github.com/Emasoft/svg2fbf.git@testing --python 3.10

# Alpha - Latest features (may be unstable)
uv tool install git+https://github.com/Emasoft/svg2fbf.git@dev --python 3.10
```

**Release Pipeline:**
- **Alpha** (dev branch) ‚Üí Active development, new features
- **Beta** (testing branch) ‚Üí Bug hunting and fixes
- **RC** (review branch) ‚Üí Release candidate, final approval
- **Stable** (master branch) ‚Üí Production-ready, published to PyPI

### Alternative Installation Methods

<details>
<summary>Click to expand alternative installation options</summary>

#### Install from GitHub Releases

```bash
# This script automatically finds and installs the latest stable release
LATEST_URL=$(curl -s https://api.github.com/repos/Emasoft/svg2fbf/releases/latest | grep "browser_download_url.*\.whl" | cut -d '"' -f 4)
uv tool install "$LATEST_URL" --python 3.10
```

#### Install from Local Wheel File

```bash
# Install from local wheel in dist/ directory
uv tool install dist/svg2fbf-*.whl --python 3.10

# Or with absolute path
uv tool install /path/to/svg2fbf-*.whl --python 3.10
```

</details>

### Verify Installation

```bash
# Check version
svg2fbf --version

# Display help
svg2fbf --help
```

**That's it!** All dependencies (including Node.js and Puppeteer for the viewBox repair utility) will be **automatically installed** on first use.

### Upgrading

#### Check Current Version

```bash
# See what version you have installed
svg2fbf --version
```

#### Upgrade to Latest Stable

```bash
# Upgrade from PyPI (recommended)
uv tool upgrade svg2fbf

# Or reinstall from GitHub master branch
uv tool install git+https://github.com/Emasoft/svg2fbf.git@master --python 3.10
```

#### Upgrade to Specific Release Channel

```bash
# Reinstall with release candidate (rc)
uv tool install git+https://github.com/Emasoft/svg2fbf.git@review --python 3.10

# Reinstall with beta
uv tool install git+https://github.com/Emasoft/svg2fbf.git@testing --python 3.10

# Reinstall with alpha (bleeding edge)
uv tool install git+https://github.com/Emasoft/svg2fbf.git@dev --python 3.10
```

#### Force Reinstall (Clean Upgrade)

If you encounter issues, perform a clean reinstall:

```bash
# Recommended: Uninstall then install (clean reinstall)
uv tool uninstall svg2fbf
uv tool install svg2fbf --python 3.10
```

### Uninstalling

Remove svg2fbf completely from your system:

```bash
# Uninstall svg2fbf
uv tool uninstall svg2fbf
```

**Verify uninstallation:**

```bash
# This should show "command not found" or similar
svg2fbf --version
# Or check uv tools list
uv tool list
```

**What gets removed:**
- The `svg2fbf` command
- The `svg-repair-viewbox` utility
- All dependencies installed for svg2fbf
- Python virtual environment for the tool

**What stays:**
- Your SVG files and FBF.SVG outputs
- Configuration files you created
- The `uv` package manager itself

---

## SVG ViewBox Repair Utility

svg2fbf includes a **viewBox repair utility** (`svg-repair-viewbox`) that automatically calculates and adds viewBox attributes to SVG files using Puppeteer/headless Chrome for accurate bounding box calculation.

### Why ViewBox Repair?

Many SVG files lack proper viewBox attributes, which can cause:
- Incorrect rendering dimensions
- Frame-to-frame jumping in animations
- Scaling and positioning issues

The repair utility uses Puppeteer's `getBBox()` to calculate actual content bounds including fill, stroke, and markers.

### Automatic Dependency Installation

**No manual setup required!** On first use, `svg-repair-viewbox` will automatically:

1. ‚úÖ Detect your operating system and package manager
2. ‚úÖ Install Node.js if not already present (using brew/apt/dnf/pacman/choco)
3. ‚úÖ Install Puppeteer globally

Just run the command and it handles everything!

### Usage

```bash
# Repair a single SVG file
svg-repair-viewbox image.svg

# Repair multiple SVG files (animation sequence)
svg-repair-viewbox frame001.svg frame002.svg frame003.svg

# Repair all SVG files in a directory
svg-repair-viewbox /path/to/svg/directory

# Quiet mode (no progress output)
svg-repair-viewbox --quiet *.svg
```

### Animation Sequence Mode

For animation sequences, the utility uses a **union bbox strategy**:

1. Calculates individual bounding box for each frame
2. Computes union bbox that encompasses all frames
3. Applies the SAME viewBox to ALL frames

This ensures consistent dimensions across all frames, preventing frame-to-frame jumping in animations.

### Example Output

**First run** (automatic dependency installation):

```bash
$ svg-repair-viewbox /tmp/animation_frames

‚öôÔ∏è  First-time setup: Installing required dependencies...

======================================================================
üîß svg-repair-viewbox Automatic Dependency Setup
======================================================================

üéØ Detected package manager: brew

üì¶ Installing Node.js...
‚úÖ Node.js installed successfully (v20.10.0)

üì¶ Installing Puppeteer (this will download ~170MB Chromium)...
‚úÖ Puppeteer installed successfully

======================================================================
‚úÖ All dependencies installed successfully!
======================================================================

Found 23 SVG file(s)

======================================================================
   üé¨ ANIMATION SEQUENCE VIEWBOX REPAIR
======================================================================
   Files with viewBox: 0
   Files missing viewBox: 23

   üìê Calculating union bbox across 23 frames...
      Frame 01: x=  -2.04, y=  -2.05, w= 237.19, h= 452.63
      Frame 02: x=  -2.00, y=  -2.01, w= 238.13, h= 452.21
      ...

   ‚úÖ Union bbox: x=-2.06, y=-2.06, width=247.62, height=453.10
      This viewBox will be applied to ALL 23 frames

   üîß Applying union viewBox to all frames...
      ‚úì Frame 01: frame00001.svg
      ‚úì Frame 02: frame00002.svg
      ...

   ‚úÖ Successfully applied union viewBox to 23 frames!
======================================================================

‚úÖ Successfully repaired 23 file(s)
```

**Subsequent runs** (dependencies already installed):

```bash
$ svg-repair-viewbox /tmp/animation_frames

Found 23 SVG file(s)

======================================================================
   üé¨ ANIMATION SEQUENCE VIEWBOX REPAIR
======================================================================
   ...
```

---

## Quick Start

### Basic Usage

```bash
# Simple animation from folder
svg2fbf -i svg_frames/ -o output/ -f animation.fbf.svg -s 24

# Loop animation
svg2fbf -i frames/ -o output/ -f loop.fbf.svg -a loop -s 12

# Animation starts on click
svg2fbf -i frames/ -o output/ -f interactive.fbf.svg -s 24 -p

# Process only the first 10 frames
svg2fbf -i large_animation/ -o output/ -f preview.fbf.svg -s 12 -m 10

# Suppress status messages
svg2fbf -i frames/ -o output/ -f animation.fbf.svg -s 24 -q
```

### Using FBF Generation Cards

A **FBF Generation Card** is a declarative YAML configuration file that specifies all parameters needed to generate an FBF.SVG animation. Generation cards enable reproducible, version-controlled animation builds and serve as documentation of your animation's configuration.

Create a generation card file:

```yaml
# config.yaml
metadata:
  title: "My Animation"
  creators: "Your Name"

generation_parameters:
  input_folder: "frames/"
  output_path: "output/"
  filename: "animation.fbf.svg"
  speed: 24.0
  animation_type: "loop"
```

Run with generation card:

```bash
# Use generation card
svg2fbf my_animation_card.yaml

# Override generation card settings with CLI
svg2fbf my_animation_card.yaml --speed 30.0 --title "Custom Title"
```

**Creating Your FBF Animations:**

1. **Prepare SVG frames**: Create a sequence of SVG files (frame_001.svg, frame_002.svg, ...)
2. **Organize folder**: Place all frames in a single folder
3. **Create generation card**: Use the generation-card template or the examples cards as starting point
4. **Run svg2fbf**: Execute with your generation card
5. **Test output**: Open the generated FBF file in a browser (Google Chrome recommended for best svg standard support)

**Recommended SVG Creation Tools**:
- **[Inkscape](https://github.com/inkscape/inkscape)** - Full-featured SVG editor with mesh gradient support
- **[OpenToonz](https://github.com/opentoonz/opentoonz)** - Professional 2D animation software with SVG export
- **[Blender](https://github.com/blender/blender)** (Grease Pencil) - 3D software with powerful 2D animation tools and SVG export

---


### Animation Types

svg2fbf supports multiple animation playback modes via the `-a` or `--animation_type` parameter:

| Animation Type | Behavior | Use Case |
|----------------|----------|----------|
| `once` | START ‚Üí END, then STOP | Single playback (splash screens, transitions) |
| `once_reversed` | END ‚Üí START, then STOP | Reverse single playback |
| `loop` | START ‚Üí END, repeat FOREVER | Continuous forward loop (background animations) |
| `loop_reversed` | END ‚Üí START, repeat FOREVER | Continuous reverse loop |
| `pingpong_once` | START ‚Üí END ‚Üí START, then STOP | Single bounce effect |
| `pingpong_loop` | START ‚Üí END ‚Üí START, repeat FOREVER | Smooth character animations, breathing effects |
| `pingpong_once_reversed` | END ‚Üí START ‚Üí END, then STOP | Reverse bounce effect |
| `pingpong_loop_reversed` | END ‚Üí START ‚Üí END, repeat FOREVER | Reverse continuous bounce |

**Animation Types CLI Examples:**

```bash
# Play once then stop
svg2fbf -i frames/ -o output/ -f once.fbf.svg -s 24 -a once

# Loop forever (default for most animations)
svg2fbf -i frames/ -o output/ -f loop.fbf.svg -s 12 -a loop

# Ping-pong loop (forward then backward, repeat forever)
svg2fbf -i frames/ -o output/ -f pingpong.fbf.svg -s 24 -a pingpong_loop

# Reverse playback loop
svg2fbf -i frames/ -o output/ -f reverse.fbf.svg -s 12 -a loop_reversed

# Play on click
svg2fbf -i frames/ -o output/ -f loop.fbf.svg -s 12 -p -a once
```

**Animation Types Generation Card Example:**

```yaml
generation_parameters:
  animation_type: pingpong_loop  # or any type from the table above
```


### Generate an Animated Button
```bash
# Play on click (animated button mode)
svg2fbf -i frames/ -o output/ -f loop.fbf.svg -s 12 -p -a pingpong_once_reversed
```

---

## CLI Parameters

### Core Options

| Option | Description | Default |
|--------|-------------|---------|
| `-v, --version` | Show version and exit | - |
| `-h, --help` | Show help message and exit | - |
| `-i, --input_folder` | üìÇ Input folder containing SVG frames | `svg_frames/` |
| `-o, --output_path` | üìÅ Output path for FBF animation | `./` |
| `-f, --filename` | üìÑ Output filename | `animation.fbf.svg` |
| `-s, --speed` | ‚è±Ô∏è  Frame rate (frames per second) | `1.0` |
| `-a, --animation_type` | üéûÔ∏è  Animation type | `once` |

### Advanced Options

| Option | Description | Default |
|--------|-------------|---------|
| `-m, --max_frames` | üî¢ Limit number of frames to load | No limit |
| `-p, --play_on_click` | ‚èØÔ∏è  Start animation on click | `False` |
| `-b, --backdrop` | üñºÔ∏è  Path to backdrop image | None |
| `-q, --quiet` | üîá Suppress status messages | `False` |
| `--keep-xml-space` | Keep xml:space="preserve" attribute | `False` |
| `--no-keep-ratio` | Don't add preserveAspectRatio | `False` |

### Metadata Options

| Option | Description | Default |
|--------|-------------|---------|
| `--config` | ‚öôÔ∏è  Path to generation card (YAML file) | None |
| `--title` | üìù Animation title | None |
| `--episode-number` | üé¨ Episode number in series | None |
| `--episode-title` | üé¨ Episode-specific title | None |
| `--creators` | üë• Current creators (comma-separated) | None |
| `--original-creators` | üë• Original content creators | None |
| `--copyrights` | ¬© Copyright statement | None |
| `--website` | üåê Official website or info page URL | None |
| `--language` | üåç Content language code (e.g., 'en', 'it') | None |
| `--original-language` | üåç Original production language (e.g., 'en-US') | None |
| `--keywords` | üè∑Ô∏è  Search keywords (comma-separated) | None |
| `--description` | üìÑ Animation description or synopsis | None |
| `--rights` | ‚öñÔ∏è  License or usage rights | None |
| `--source` | üé® Original source software/tool | None |

### Animation Types

| Type | Behavior |
|------|----------|
| `once` | START ‚Üí END, then STOP |
| `once_reversed` | END ‚Üí START, then STOP |
| `loop` | START ‚Üí END, repeat FOREVER |
| `loop_reversed` | END ‚Üí START, repeat FOREVER |
| `pingpong_once` | START ‚Üí END ‚Üí START, then STOP |
| `pingpong_loop` | START ‚Üí END ‚Üí START, repeat FOREVER |
| `pingpong_once_reversed` | END ‚Üí START ‚Üí END, then STOP |
| `pingpong_loop_reversed` | END ‚Üí START ‚Üí END, repeat FOREVER |

---

## FBF Generation Cards

### What Are Generation Cards?

**FBF Generation Cards** (also called **fbf-generation-cards**) are declarative YAML-based configuration files that specify all parameters needed to generate a complete FBF.SVG animation. They serve as:

- **Project blueprints** - Complete specification of animation configuration in version-control-friendly YAML format
- **Reproducible builds** - Generate identical animations across different machines and time periods
- **Documentation** - Self-documenting animation metadata and parameters
- **Automation** - Enable scripted batch animation generation and CI/CD workflows

Every example in the `examples/` directory includes a generation card, making it easy to understand and replicate each animation's configuration.


### Using Generation Cards

**Generate an animation from a generation card:**

```bash
# Run with generation card
svg2fbf examples/splat_button/splat_button.yaml

# Override generation card settings with CLI
svg2fbf examples/splat_button/splat_button.yaml --speed 30 --quiet
```
**üìñ For complete documentation, see [FBF Generation Cards Guide](docs/FBF_GENERATION_CARDS.md)**

**üìù For a ready-to-use template, see [Generation Card Template](templates/generation-card-template.yaml)**

For comprehensive information about generation cards and all available configuration options, see:
- **[FBF Generation Cards Documentation](docs/GETTING_STARTED.md)** - Complete guide to creating and using generation cards


---

### How svg2fbf Works

svg2fbf implements a multi-phase transformation pipeline that converts a temporally-ordered sequence of SVG documents into a single FBF.SVG animation. The transformation process applies element deduplication algorithms, gradient merging optimizations, and SMIL timing generation to produce compact, self-contained animated SVG documents.

#### FBF File Structure

<p align="center">
  <img src="FBF.SVG/fbf_schema.svg" alt="FBF File Structure Schema" width="900"/>
</p>

**Complete FBF Structure Tree:**

```
SVG Root
‚îú‚îÄ‚îÄ metadata (optional)
‚îú‚îÄ‚îÄ desc (required)
‚îú‚îÄ‚îÄ ANIMATION_BACKDROP
‚îÇ   ‚îú‚îÄ‚îÄ STAGE_BACKGROUND (Z-order: behind animation)
‚îÇ   ‚îú‚îÄ‚îÄ ANIMATION_STAGE
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ANIMATED_GROUP
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ PROSKENION
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ <animate>
‚îÇ   ‚îî‚îÄ‚îÄ STAGE_FOREGROUND (Z-order: in front of animation)
‚îú‚îÄ‚îÄ OVERLAY_LAYER (Z-order: superimposed on all)
‚îú‚îÄ‚îÄ defs
‚îÇ   ‚îú‚îÄ‚îÄ SHARED_DEFINITIONS
‚îÇ   ‚îî‚îÄ‚îÄ FRAME00001, FRAME00002, ...
‚îî‚îÄ‚îÄ script (optional, last)
```

**Strict Element Ordering** (mandatory for specification conformance):

The FBF.SVG specification mandates a deterministic hierarchical structure with precise element ordering. This structural constraint enables FBF-conformant renderers to perform efficient parsing, predictable streaming, and safe runtime composition via three designated extension points:

1. **SVG root** ‚Üí `<metadata>` (optional) ‚Üí `<desc>` (required)
2. **ANIMATION_BACKDROP** (`<g>`) ‚Äî *Extensibility point for layered composition*
   - **STAGE_BACKGROUND** (`<g>`) ‚Äî Background layer (Z-order: behind animation, dynamic API)
   - **ANIMATION_STAGE** (`<g>`) ‚Äî Animation container
     - **ANIMATED_GROUP** (`<g>`) ‚Äî Timing orchestration
       - **PROSKENION** (`<use>`) ‚Äî Frame reference with SMIL `<animate>` child
   - **STAGE_FOREGROUND** (`<g>`) ‚Äî Foreground layer (Z-order: in front of animation, dynamic API)
3. **OVERLAY_LAYER** (`<g>`) ‚Äî Overlay layer (Z-order: superimposed on all, dynamic API for badges/titles/logos/subtitles/borders/PiP)
4. **defs** ‚Äî All reusable definitions in strict order:
   - **SHARED_DEFINITIONS** (first child) ‚Äî Shared elements (gradients, symbols, paths)
   - **FRAME00001, FRAME00002, FRAME00003, ...** (sequential) ‚Äî Individual frames
5. **script** (optional, last) ‚Äî Mesh gradient polyfill only

**Structural Rationale:**
- **Streaming Optimization**: Deterministic element ordering enables single-pass parsing without full DOM traversal or backtracking
- **Safe Composition**: Three designated extension point groups (STAGE_BACKGROUND, STAGE_FOREGROUND, OVERLAY_LAYER) permit runtime content injection without corrupting required animation structure
- **Z-Order Layering**: Prescribed nesting order establishes three composable layers with deterministic rendering precedence (background < animation < foreground < overlay)
- **Security Validation**: Structural constraints enable mechanical verification of conformance and prevention of element injection attacks

### Advanced Capabilities: Streaming & Interactive Visual Communication

FBF.SVG provides architectural support for two advanced use cases that extend beyond traditional frame-by-frame animation:

#### üåä Real-Time Streaming Architecture
The frames-at-end structural design enables dynamic frame appending during playback:
- **Live presentations**: Real-time vector conversion of presentation slides, whiteboard captures, or screen recordings
- **LLM-generated content**: On-demand AI generation of character poses, scene elements, or interface components
- **Remote vector rendering**: Resolution-independent remote desktop visualization
- **Synchronized narrative visualization**: Dynamic scene generation coordinated with textual or audio content

The specification's requirement that frame definitions appear after the animation control structure permits incremental frame appending without interrupting SMIL playback state, enabling streaming applications including live data visualization, interactive tutorials, and real-time generative art.

#### ü§ñ Interactive Visual Communication Protocol
FBF.SVG supports bidirectional visual communication between language models and users through declarative SVG generation:

**Traditional Text-Based Interaction**: LLM emits textual procedure description ‚Üí User parses natural language ‚Üí Potential comprehension errors for spatial/visual tasks

**FBF.SVG Visual Interaction**: LLM generates interactive SVG frames ‚Üí User provides coordinate-based input with element identification ‚Üí LLM responds with contextual visual updates

**Technical Characteristics**:
- **Declarative output**: LLM produces pure SVG markup without imperative JavaScript/HTML/CSS code generation
- **Context adaptation**: Generated interfaces dynamically adjust to conversational state, user proficiency level, and device capabilities
- **Bidirectional coordination**: User interaction coordinates and SVG element IDs transmitted to LLM for state updates
- **Deterministic execution**: Declarative SVG eliminates runtime errors inherent in generated imperative code

**Application Domains**:
- **Technical repair guidance**: Component identification in circuit board diagrams with progressive detail revelation upon user selection
- **Visual information retrieval**: Dynamic menu generation with semantic annotations, responding to user selection with detailed data visualization
- **Diagnostic analysis**: Schematic generation with state visualization, interactive element selection triggering contextual explanations

This architectural approach enables language models to function as **declarative visual interface generators**, producing dynamic, context-specific user interfaces without requiring pre-programmed GUI implementations or imperative scripting.

For complete technical details, see:
- [Section 13: Streaming Capabilities](FBF.SVG/FBF_SVG_SPECIFICATION.md#13-streaming-capabilities)
- [Section 14: Interactive Visual Communication Protocol](FBF.SVG/FBF_SVG_SPECIFICATION.md#14-interactive-visual-communication-protocol)
- [FBF.SVG Full Specification](FBF.SVG/FBF_SVG_SPECIFICATION.md)

### SVG 2.0 Mesh Gradient Support

svg2fbf provides native support for **SVG 2.0 mesh gradients** (`<meshgradient>` elements) present in input frame documents. Mesh gradient creation is supported by SVG 2.0-conformant editors including **[Inkscape](https://inkscape.org/)** and other tools implementing the SVG 2.0 specification.

When mesh gradient elements are detected during processing, svg2fbf conditionally injects a lightweight JavaScript polyfill (~16KB) to ensure cross-browser rendering compatibility, including user agents lacking native SVG 2.0 mesh gradient support. This polyfill constitutes the **only** permissible JavaScript content in FBF.SVG documents per specification.

For a complete list of supported SVG features, see **[SUPPORTED_SVG_FEATURES.md](docs/SUPPORTED_SVG_FEATURES.md)**.

---

## Input Frame Requirements

svg2fbf accepts a sequence of SVG files as input frames. Each frame must meet these requirements:

### File Naming

**Recommended format**: Use 5-digit zero-padded numbering for best compatibility:
```
frame_00001.svg
frame_00002.svg
frame_00003.svg
...
frame_00099.svg
```

This format ensures proper alphabetical sorting and clear frame ordering. Other numbering schemes work but may cause sorting issues with some tools.

### SVG Format Requirements

- **Valid SVG files**: Each frame must be a valid SVG 1.0, 1.1, or 2.0 document
- **Supported tools**: Export from [Inkscape](https://github.com/inkscape/inkscape), [OpenToonz](https://github.com/opentoonz/opentoonz), [Blender](https://github.com/blender/blender) (Grease Pencil), or any SVG editor
- **One frame per file**: Each SVG file should contain only one animation frame
- **Static content**: Frames must be static images (no SMIL animations or interactive elements)
- **Consistent dimensions**: Use the same viewBox and dimensions across all frames to avoid distortion

### Resources and Assets

- **External resources**: Linked images, fonts, and other resources are automatically downloaded and embedded as base64 data URIs
- **Embedded resources**: Already-embedded base64 resources are preserved
- **No external dependencies**: Final FBF.SVG file is completely self-contained

### Advanced Features

- **Mesh gradients**: SVG 2.0 mesh gradients fully supported (Inkscape-compatible)
- **Filters**: Supported but may impact playback performance on slower systems
- **CSS styles**: Parsed and converted to SVG attributes (native SVG attributes are faster)

### Not Supported

- SVG layers (content will be flattened)
- Nested SVG elements
- JavaScript in source frames
- SMIL animations in source frames

For detailed technical information, see [Supported SVG Features](docs/SUPPORTED_SVG_FEATURES.md).

---

## Documentation

### Format Specification

- **[üìÇ FBF.SVG Format Standard](FBF.SVG/)** - Complete format specification (spec, schema, metadata, proposal)
- **[FBF.SVG Validator](scripts/validate_fbf.py)** - Python validator script for FBF.SVG conformance

### Guides & Documentation

- **[FBF Generation Cards](docs/FBF_GENERATION_CARDS.md)** - Complete guide to generation card configuration
- **[Supported SVG Features](docs/SUPPORTED_SVG_FEATURES.md)** - SVG 1.1 and 2.0 feature support matrix
- **[FBF Frame Comparator](docs/FBF_FRAME_COMPARATOR.md)** - Compare two FBF animations pixel-by-pixel for regression testing
- **[Getting Started](docs/GETTING_STARTED.md)** - Tutorial and quick start guide
- **[Installation Guide](docs/INSTALLATION_GUIDE.md)** - Detailed installation instructions
- **[ViewBox Repair Utility](docs/VIEWBOX_REPAIR_UTILITY.md)** - Guide to using svg-repair-viewbox tool

### Development & Contributing

- **[Developer Workflow Guide](DEVELOPER_WORKFLOW.md)** - Complete workflow using Just task runner with all available commands
- **[Development Guide](DEVELOPMENT.md)** - Development setup, testing, and building
- **[Contributing - Tools](CONTRIBUTING.md)** - Code contribution guidelines (svg2fbf, players, servers)
- **[Contributing - Format (WHAT/WHY)](FBF.SVG/CONTRIBUTING_FORMAT.md)** - Vision, goals, and principles of FBF.SVG standardization
- **[Developing - Format (HOW)](FBF.SVG/DEVELOPING_FORMAT.md)** - Practical procedures for contributing to specification
- **[Roadmap](docs/ROADMAP.md)** - Project timeline and areas needing help
- **[Changelog](CHANGELOG.md)** - Version history and changes

### Legal & Credits

- **[License](LICENSE)** - Apache License 2.0
- **[Acknowledgments](ACKNOWLEDGMENTS.md)** - Credits and attributions

### Support & Community

- üêõ **[Issue Tracker](https://github.com/Emasoft/svg2fbf/issues)** - Report bugs and request features
- üí¨ **[Discussions](https://github.com/Emasoft/svg2fbf/discussions)** - Ask questions and share ideas

---

## Tools & Scripts

svg2fbf includes several validation and utility scripts to help you work with FBF.SVG files and generation cards.

### FBF.SVG Validator

The `validate_fbf.py` script provides comprehensive validation of FBF.SVG documents against the formal specification.

**Usage:**

```bash
# Validate a FBF.SVG file
uv run python scripts/validate_fbf.py output/animation.fbf.svg

# Verbose output with detailed validation steps
uv run python scripts/validate_fbf.py output/animation.fbf.svg --verbose

# Strict mode (warnings treated as errors)
uv run python scripts/validate_fbf.py output/animation.fbf.svg --strict
```

**What It Validates:**

- ‚úÖ **XML well-formedness** - Valid XML syntax
- ‚úÖ **SVG validity** - Proper SVG namespace and attributes
- ‚úÖ **FBF structural requirements** - Required elements and strict ordering
- ‚úÖ **SMIL animation correctness** - Valid animation timing and frame references
- ‚úÖ **Security constraints** - No external resources or forbidden scripts
- ‚úÖ **Metadata completeness** - RDF/XML metadata conformance
- ‚úÖ **ID naming conventions** - Proper frame and element IDs
- ‚úÖ **Frame reference integrity** - Sequential frame numbering
- ‚úÖ **XSD schema validation** - Optional validation against fbf-svg.xsd (requires lxml)

**Exit Codes:**

- `0` - Valid FBF.SVG document
- `1` - Invalid structure
- `2` - Invalid metadata
- `3` - Security violation
- `4` - XML parsing error

**Conformance Levels:**

- **Basic**: Valid structure and animation (usable FBF.SVG)
- **Full**: Basic + complete RDF/XML metadata + strict naming (production-ready)

**Example Output:**

```
[INFO] Validating: examples/seagull/fbf_output/seagull.fbf.svg
[INFO] Parsing XML...
[INFO] ‚úì XML parsed successfully (root: {http://www.w3.org/2000/svg}svg)
[INFO] Validating SVG root element...
[INFO] ‚úì SVG root element validated
[INFO] Validating FBF structure...
[INFO] ‚úì Found 10 frame groups
[INFO] ‚úì FBF structure validated

‚úÖ VALID FBF.SVG (FULL CONFORMANCE)
```

### YAML Configuration Validator

The `validate_yaml_config.py` script validates FBF Generation Card (YAML) files before use.

**Usage:**

```bash
# Validate a generation card
uv run python scripts/validate_yaml_config.py examples/splat_button/splat_button.yaml

# Validate your custom configuration
uv run python scripts/validate_yaml_config.py my_animation.yaml
```

**What It Validates:**

- ‚úÖ **YAML syntax** - Valid YAML structure
- ‚úÖ **File structure** - Proper metadata and generation_parameters sections
- ‚úÖ **Metadata fields** - Dublin Core and FBF custom fields with correct types
- ‚úÖ **Generation parameters** - Valid animation settings and file paths
- ‚úÖ **Animation types** - Valid playback modes (once, loop, pingpong, etc.)
- ‚úÖ **Value ranges** - FPS and other numeric constraints
- ‚úÖ **Required fields** - Input/output paths and essential configuration

**Exit Codes:**

- `0` - Valid YAML configuration
- `1` - Invalid YAML configuration (errors found)
- `2` - File not found or cannot be read

**Common Validation Checks:**

- Animation type must be one of: `once`, `once_reversed`, `loop`, `loop_reversed`, `pingpong_once`, `pingpong_loop`, `pingpong_once_reversed`, `pingpong_loop_reversed`
- Speed (FPS) must be between 0.1 and 120.0
- Either `input_folder` or `frames` list must be specified
- Metadata fields must be correct types (string, int, float, boolean)

**Example Output:**

```
‚úÖ VALID YAML CONFIGURATION

WARNINGS:
  ‚ö†Ô∏è  [METADATA] Recommended fields missing or empty: description, language
```

**Why Use These Validators?**

- **Catch errors early** - Validate before processing to avoid wasted time
- **Ensure conformance** - Verify your FBF.SVG meets specification requirements
- **Debug issues** - Detailed error messages help identify problems quickly
- **Quality assurance** - Validate production files meet Full Conformance level
- **CI/CD integration** - Use exit codes in automated testing pipelines

---

## Troubleshooting

### Common Issues and Solutions

#### Problem: "No SVG files found in input directory"

**Cause**: svg2fbf cannot find `.svg` files in the specified directory.

**Solutions**:
- Verify the directory path: `ls your_directory/` should show `.svg` files
- Ensure files have `.svg` extension (not `.SVG` or `.svg.txt`)
- Use absolute paths if relative paths aren't working:
  ```bash
  svg2fbf -i /full/path/to/frames/ -o /full/path/to/output/
  ```
- Check file permissions: `ls -la your_directory/`

#### Problem: "Invalid viewBox" or misaligned frames

**Cause**: SVG frames have inconsistent `viewBox` attributes.

**Solutions**:
- Open all frame SVGs and ensure they have identical `viewBox` values
- Example: All frames should have `viewBox="0 0 800 600"`
- Use your SVG editor to standardize the canvas size before exporting
- svg2fbf will warn you about viewBox inconsistencies

#### Problem: Animation plays too fast or too slow

**Cause**: Incorrect FPS setting for the desired animation speed.

**Solutions**:
- Calculate target FPS: `fps = total_frames / desired_duration_in_seconds`
- Example: 120 frames over 5 seconds = 24 FPS
- Adjust with `-s` or `--speed` parameter:
  ```bash
  svg2fbf -i frames/ -o output/ -f animation.fbf.svg -s 24
  ```
- Common FPS values:
  - 12 FPS: Choppy, retro style
  - 24 FPS: Cinema standard
  - 30 FPS: Smooth animation
  - 60 FPS: Very smooth, high-quality

#### Problem: Huge file size

**Cause**: Lack of element deduplication.

**Solutions**:
- Ensure consistent elements across frames (identical objects should be pixel-perfect duplicates)
- Remove unnecessary complexity from source SVGs:
  - Simplify paths in your SVG editor (Path ‚Üí Simplify in Inkscape)
  - Merge similar colors
  - Remove hidden or duplicate elements
- Check deduplication is working: svg2fbf should report shared elements found

#### Problem: Validation errors

**Cause**: Generated FBF.SVG doesn't meet format requirements.

**Solutions**:
- Run the validator to see specific errors:
  ```bash
  python scripts/validate_fbf.py output/animation.fbf.svg --verbose
  ```
- Common validation issues:
  - **External resources**: Embed all images as data URIs (svg2fbf does this automatically)
  - **Scripts**: Remove `<script>` elements from source SVGs
  - **Invalid metadata**: Use `--title`, `--creator` flags to add proper metadata
  - **Frame ID mismatch**: Let svg2fbf generate IDs automatically

#### Problem: Animation doesn't loop

**Cause**: Animation mode not set correctly.

**Solutions**:
- Use `--loop` flag for infinite looping (default):
  ```bash
  svg2fbf -i frames/ -o output/ -f animation.fbf.svg --loop
  ```
- For single playthrough:
  ```bash
  svg2fbf -i frames/ -o output/ -f animation.fbf.svg --once
  ```
- For ping-pong (forward then backward):
  ```bash
  svg2fbf -i frames/ -o output/ -f animation.fbf.svg --pingpong
  ```

#### Problem: Browser doesn't show animation

**Cause**: Browser doesn't support SMIL animations or SVG file is malformed.

**Solutions**:
- Check browser compatibility:
  - ‚úÖ Chrome/Edge: Full support
  - ‚úÖ Firefox: Full support
  - ‚úÖ Safari: Full support
  - ‚ùå IE11: No SMIL support (use modern browser)
- Validate the SVG:
  ```bash
  python scripts/validate_fbf.py output/animation.fbf.svg
  ```
- Try opening in a different browser
- Check browser console for errors (F12 ‚Üí Console tab)
- Ensure file was saved correctly (not truncated or corrupted)

#### Problem: Click-triggered animation doesn't work

**Cause**: Interactive features may not be properly configured or browser security settings.

**Solutions**:
- Ensure `begin="click"` is present in the animation element
- Try opening the file via `file://` protocol directly in browser
- Some browsers may block events on SVGs loaded in `<img>` tags - use `<object>` or `<embed>`:
  ```html
  <object data="animation.fbf.svg" type="image/svg+xml"></object>
  ```
- Check browser console for security errors

#### Problem: Memory issues with large animations

**Cause**: Hundreds of frames or very complex frames.

**Solutions**:
- Split long animations into episodes/chapters
- Reduce frame complexity (simplify paths, merge elements)
- Consider streaming approach for very long animations (see FBF.SVG specification)

### Still Having Issues?

1. Check the [GitHub Issues](https://github.com/Emasoft/svg2fbf/issues) for similar problems
2. Run validator with `--verbose` flag for detailed diagnostics
3. Try with one of the working examples first to verify your setup
4. Open a new issue with:
   - svg2fbf version (`svg2fbf --version`)
   - Python version (`python --version`)
   - Operating system
   - Complete error message
   - Minimal reproduction example

---

## Contributing

We welcome contributions! There are **two types of contributions**:

### üîß Tool Development
Contributing to **implementation tools** (svg2fbf converter, players, servers):
- **[CONTRIBUTING.md](CONTRIBUTING.md)** - Code contribution guidelines
- **[DEVELOPMENT.md](DEVELOPMENT.md)** - Development setup, testing, and building

### üìê Standard Development
Contributing to the **FBF.SVG format specification** (spec, docs, use cases):
- **[CONTRIBUTING_FORMAT.md](FBF.SVG/CONTRIBUTING_FORMAT.md)** - Vision, goals, and principles (WHAT/WHY)
- **[DEVELOPING_FORMAT.md](FBF.SVG/DEVELOPING_FORMAT.md)** - Practical procedures and style guide (HOW)
- **[docs/ROADMAP.md](docs/ROADMAP.md)** - Project roadmap and areas needing help

### Quick Contribution Workflow

**For code/tools**:
1. Fork the repository
2. Create a feature branch
3. Make your changes with tests
4. Run linting and tests (`ruff`, `pytest`)
5. Submit a pull request

**For specification/documentation**:
1. Fork the repository
2. Create a feature branch
3. Make your changes (spec text, examples, test cases)
4. Validate examples and check for consistency
5. Submit a pull request

See [CONTRIBUTING.md](CONTRIBUTING.md) or [CONTRIBUTING_STANDARD.md](CONTRIBUTING_STANDARD.md) based on your contribution type.

---

## License

svg2fbf is licensed under the **Apache License 2.0**, a permissive open-source license that allows you to:

‚úÖ **Use** the software for any purpose (commercial or non-commercial)
‚úÖ **Modify** the source code to suit your needs
‚úÖ **Distribute** original or modified versions
‚úÖ **Patent grant** - protection from patent claims by contributors
‚úÖ **Sublicense** - include in proprietary software

**Requirements:**
- Include the Apache 2.0 license and copyright notice in distributions
- State significant changes made to the software
- Preserve all copyright, patent, trademark, and attribution notices

**Limitations:**
- No trademark rights granted (except as needed to reproduce notices)
- No warranty or liability - software provided "as is"

For full legal text, see [LICENSE](LICENSE) file.

---

## Acknowledgments

Special thanks to:

- **[Scour Project](https://github.com/scour-project/scour)** - SVG optimization algorithms
- **W3C** - SVG specification and standards
- **NumPy Project** - Numerical operations library

See [ACKNOWLEDGMENTS.md](ACKNOWLEDGMENTS.md) for full credits.

---

## Origin

The need of a specific format for vector animations was clear when the OpenToonz program was made open source.
As a member of the OpenToonz community I started to study a way to create a format that would be open, widely compatible and easily reproduced. 
The FBF.SVG format was the result of my research: a subset of the SVG 2.0 standard designed to become the MP4 of vector animations.
The first fbf.svg files were published on [CodePen](https://codepen.io/Emasoft/pen/vYWwdZm) on June 2022.
svg2fbf is the first tool implementing the frame-by-frame SVG animation, inspired by early experiments in SVG animation builders.


---

<p align="center">
  <strong>Made with ‚ù§Ô∏è for the OpenToonz community</strong>
</p>

<p align="center">
  <a href="https://github.com/Emasoft/svg2fbf">GitHub</a> ‚Ä¢
  <a href="https://github.com/Emasoft/svg2fbf/issues">Issues</a> ‚Ä¢
  <a href="https://github.com/Emasoft/svg2fbf/discussions">Discussions</a>
</p>
