<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 1510" width="900" height="1510">
  <defs>
    <style>
      .box { fill: none; stroke: #333; stroke-width: 2; }
      .svg-box { fill: #e1f5ff; stroke: #0366d6; stroke-width: 3; }
      .header-box { fill: #f0f0f0; stroke: #666; stroke-width: 1.5; }
      .metadata-box { fill: #fff3cd; stroke: #856404; stroke-width: 1.5; }
      .desc-box { fill: #d4edda; stroke: #155724; stroke-width: 1.5; }
      .backdrop-box { fill: #fff3cd; stroke: #856404; stroke-width: 2; }
      .stage-box { fill: #d4edda; stroke: #155724; stroke-width: 2; }
      .animgroup-box { fill: #cce5ff; stroke: #004085; stroke-width: 2; }
      .proskenion-box { fill: #e7e7ff; stroke: #6610f2; stroke-width: 2; }
      .defs-box { fill: #f8d7da; stroke: #721c24; stroke-width: 2; }
      .shared-box { fill: #d1ecf1; stroke: #0c5460; stroke-width: 1.5; }
      .frame-box { fill: #e2e3e5; stroke: #383d41; stroke-width: 1.5; }
      .label { font-family: 'Courier New', monospace; font-size: 14px; font-weight: bold; }
      .small-label { font-family: Arial, sans-serif; font-size: 11px; fill: #666; }
      .title { font-family: Arial, sans-serif; font-size: 20px; font-weight: bold; }
    </style>
  </defs>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" class="title">FBF SVG File Structure Schema</text>

  <!-- Outermost: SVG -->
  <rect x="20" y="50" width="860" height="1440" class="svg-box"/>
  <text x="30" y="75" class="label">&lt;svg&gt;</text>
  <text x="30" y="92" class="small-label">Frame-by-Frame Animation Root</text>

  <!-- 1. Header -->
  <rect x="40" y="110" width="820" height="50" class="header-box"/>
  <text x="50" y="135" class="label">XML/SVG Headers</text>
  <text x="50" y="150" class="small-label">xmlns, viewBox, version, preserveAspectRatio</text>

  <!-- 2. Metadata -->
  <rect x="40" y="180" width="820" height="50" class="metadata-box"/>
  <text x="50" y="205" class="label">&lt;metadata&gt;</text>
  <text x="50" y="220" class="small-label">RDF metadata (animation info, format, etc.)</text>

  <!-- 3. Desc -->
  <rect x="40" y="250" width="820" height="50" class="desc-box"/>
  <text x="50" y="275" class="label">&lt;desc&gt;</text>
  <text x="50" y="290" class="small-label">FBFSVG format description and specifications</text>

  <!-- 4. ANIMATION_BACKDROP -->
  <rect x="40" y="320" width="820" height="530" class="backdrop-box"/>
  <text x="50" y="345" class="label">&lt;g id="ANIMATION_BACKDROP"&gt;</text>
  <text x="50" y="360" class="small-label">Static background container (always visible, never changes)</text>

  <!-- Inside BACKDROP: STAGE_BACKGROUND (NEW!) -->
  <rect x="60" y="375" width="780" height="35" class="header-box"/>
  <text x="70" y="395" class="label">&lt;g id="STAGE_BACKGROUND"&gt;&lt;/g&gt;</text>
  <text x="70" y="407" class="small-label">Background layer (Z-order: behind animation, same resolution as viewBox)</text>

  <!-- Inside BACKDROP: ANIMATION_STAGE -->
  <rect x="60" y="425" width="780" height="365" class="stage-box"/>
  <text x="70" y="450" class="label">&lt;g id="ANIMATION_STAGE"&gt;</text>
  <text x="70" y="465" class="small-label">Animation stage container</text>

  <!-- Inside STAGE: ANIMATED_GROUP -->
  <rect x="80" y="485" width="740" height="285" class="animgroup-box"/>
  <text x="90" y="510" class="label">&lt;g id="ANIMATED_GROUP"&gt;</text>
  <text x="90" y="525" class="small-label">Animation orchestration group</text>

  <!-- Inside ANIMATED_GROUP: PROSKENION -->
  <rect x="100" y="545" width="700" height="205" class="proskenion-box"/>
  <text x="110" y="570" class="label">&lt;use id="PROSKENION" xlink:href="#FRAME001"&gt;</text>
  <text x="110" y="585" class="small-label">Single &lt;use&gt; element that references the current frame</text>
  <text x="110" y="600" class="small-label">Greek theatrical term: "stage area in front of backdrop"</text>

  <!-- Inside PROSKENION: animate element -->
  <rect x="120" y="620" width="660" height="110" class="header-box"/>
  <text x="130" y="645" class="label">&lt;animate</text>
  <text x="140" y="665" class="small-label">attributeName="xlink:href"</text>
  <text x="140" y="680" class="small-label">begin="0s"</text>
  <text x="140" y="695" class="small-label">calcMode="discrete"</text>
  <text x="140" y="710" class="small-label">values="#FRAME001;#FRAME002;#FRAME003;..."</text>
  <text x="130" y="725" class="label">/&gt;</text>

  <text x="110" y="745" class="label">&lt;/use&gt;</text>
  <text x="90" y="765" class="label">&lt;/g&gt;</text>
  <text x="70" y="785" class="label">&lt;/g&gt;</text>

  <!-- Inside BACKDROP: STAGE_FOREGROUND (NEW!) -->
  <rect x="60" y="800" width="780" height="35" class="header-box"/>
  <text x="70" y="820" class="label">&lt;g id="STAGE_FOREGROUND"&gt;&lt;/g&gt;</text>
  <text x="70" y="832" class="small-label">Foreground layer (Z-order: in front of animation, same resolution as viewBox)</text>

  <text x="50" y="845" class="label">&lt;/g&gt;</text>

  <!-- 5. OVERLAY_LAYER (NEW!) -->
  <rect x="40" y="865" width="820" height="50" class="backdrop-box"/>
  <text x="50" y="890" class="label">&lt;g id="OVERLAY_LAYER"&gt;&lt;/g&gt;</text>
  <text x="50" y="905" class="small-label">Overlay layer (Z-order: superimposed on all, badges/titles/logos/subtitles/borders/PiP)</text>

  <!-- 6. DEFS -->
  <rect x="40" y="935" width="820" height="530" class="defs-box"/>
  <text x="50" y="960" class="label">&lt;defs&gt;</text>
  <text x="50" y="975" class="small-label">All reusable element definitions</text>

  <!-- Inside DEFS: SHARED_DEFINITIONS -->
  <rect x="60" y="995" width="780" height="90" class="shared-box"/>
  <text x="70" y="1020" class="label">&lt;g id="SHARED_DEFINITIONS"&gt;</text>
  <text x="70" y="1035" class="small-label">Elements shared across multiple frames</text>
  <text x="70" y="1050" class="small-label">gradients, paths, symbols, patterns, filters</text>
  <text x="70" y="1065" class="small-label">Referenced via &lt;use xlink:href="#element-id"&gt;</text>
  <text x="70" y="1080" class="label">&lt;/g&gt;</text>

  <!-- Inside DEFS: FRAME001 -->
  <rect x="60" y="1105" width="780" height="80" class="frame-box"/>
  <text x="70" y="1130" class="label">&lt;g id="FRAME001"&gt;</text>
  <text x="70" y="1145" class="small-label">All elements for frame 1</text>
  <text x="70" y="1160" class="small-label">Unique elements + &lt;use&gt; references to SHARED_DEFINITIONS</text>
  <text x="70" y="1175" class="label">&lt;/g&gt;</text>

  <!-- Inside DEFS: FRAME002 -->
  <rect x="60" y="1200" width="780" height="80" class="frame-box"/>
  <text x="70" y="1225" class="label">&lt;g id="FRAME002"&gt;</text>
  <text x="70" y="1240" class="small-label">All elements for frame 2</text>
  <text x="70" y="1255" class="small-label">Unique elements + &lt;use&gt; references to SHARED_DEFINITIONS</text>
  <text x="70" y="1270" class="label">&lt;/g&gt;</text>

  <!-- Inside DEFS: FRAME003 -->
  <rect x="60" y="1295" width="780" height="80" class="frame-box"/>
  <text x="70" y="1320" class="label">&lt;g id="FRAME003"&gt;</text>
  <text x="70" y="1335" class="small-label">All elements for frame 3</text>
  <text x="70" y="1350" class="small-label">Unique elements + &lt;use&gt; references to SHARED_DEFINITIONS</text>
  <text x="70" y="1365" class="label">&lt;/g&gt;</text>

  <!-- Inside DEFS: ... more frames -->
  <rect x="60" y="1390" width="780" height="55" class="frame-box" stroke-dasharray="5,5"/>
  <text x="400" y="1420" text-anchor="middle" class="small-label" font-style="italic">... additional FRAME groups (FRAME004, FRAME005, etc.) ...</text>

  <text x="50" y="1460" class="label">&lt;/defs&gt;</text>

  <text x="30" y="1480" class="label">&lt;/svg&gt;</text>
</svg>
