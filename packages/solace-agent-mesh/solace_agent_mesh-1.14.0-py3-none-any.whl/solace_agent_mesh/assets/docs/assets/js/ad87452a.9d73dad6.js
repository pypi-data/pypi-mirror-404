"use strict";(self.webpackChunksolace_agenitc_mesh_docs=self.webpackChunksolace_agenitc_mesh_docs||[]).push([[1625],{2585:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"documentation/installing-and-configuring/session-storage","title":"Session Storage","description":"This guide explains how to configure session storage in Agent Mesh, enabling user conversations to persist across restarts and providing rich conversation history for both the WebUI Gateway and individual agents.","source":"@site/docs/documentation/installing-and-configuring/session-storage.md","sourceDirName":"documentation/installing-and-configuring","slug":"/documentation/installing-and-configuring/session-storage","permalink":"/solace-agent-mesh/docs/documentation/installing-and-configuring/session-storage","draft":false,"unlisted":false,"editUrl":"https://github.com/SolaceLabs/solace-agent-mesh/edit/main/docs/docs/documentation/installing-and-configuring/session-storage.md","tags":[],"version":"current","sidebarPosition":350,"frontMatter":{"title":"Session Storage","sidebar_position":350},"sidebar":"docSidebar","previous":{"title":"User Feedback","permalink":"/solace-agent-mesh/docs/documentation/installing-and-configuring/user-feedback"},"next":{"title":"Artifact Storage","permalink":"/solace-agent-mesh/docs/documentation/installing-and-configuring/artifact-storage"}}');var a=s(4848),t=s(8453);const r={title:"Session Storage",sidebar_position:350},o="Configuring Session Storage",l={},c=[{value:"Understanding Session Storage Architecture",id:"understanding-session-storage-architecture",level:2},{value:"How Session Storage Works",id:"how-session-storage-works",level:3},{value:"Where Data Is Stored",id:"where-data-is-stored",level:3},{value:"Session Storage Scenarios",id:"session-storage-scenarios",level:2},{value:"Scenario A: Both WebUI Gateway and Agents Have Persistence (Recommended)",id:"scenario-a-both-webui-gateway-and-agents-have-persistence-recommended",level:3},{value:"Scenario B: Neither Has Persistence (Ephemeral Only)",id:"scenario-b-neither-has-persistence-ephemeral-only",level:3},{value:"Scenario C: Only Agents Have Persistence (Limited Experience)",id:"scenario-c-only-agents-have-persistence-limited-experience",level:3},{value:"Scenario D: Only WebUI Gateway Has Persistence (Broken Experience)",id:"scenario-d-only-webui-gateway-has-persistence-broken-experience",level:3},{value:"Configuring WebUI Gateway Session Storage",id:"configuring-webui-gateway-session-storage",level:2},{value:"Environment Variables",id:"environment-variables",level:3},{value:"Gateway Configuration File",id:"gateway-configuration-file",level:3},{value:"Database Backend Options",id:"database-backend-options",level:3},{value:"SQLite (Development)",id:"sqlite-development",level:4},{value:"PostgreSQL (Production)",id:"postgresql-production",level:4},{value:"MySQL/MariaDB (Production)",id:"mysqlmariadb-production",level:4},{value:"Configuring Agent Session Storage",id:"configuring-agent-session-storage",level:2},{value:"Agent Configuration File",id:"agent-configuration-file",level:3},{value:"Environment Variables",id:"environment-variables-1",level:3},{value:"Database Isolation Between Agents",id:"database-isolation-between-agents",level:3},{value:"Shared Configuration Pattern",id:"shared-configuration-pattern",level:3},{value:"Migrating from Ephemeral to Persistent",id:"migrating-from-ephemeral-to-persistent",level:2},{value:"Step 1: Configure WebUI Gateway Database",id:"step-1-configure-webui-gateway-database",level:3},{value:"Step 2: Configure Agent Databases",id:"step-2-configure-agent-databases",level:3},{value:"Step 3: Restart Application",id:"step-3-restart-application",level:3},{value:"Step 4: Verify Migration",id:"step-4-verify-migration",level:3},{value:"Migration Considerations",id:"migration-considerations",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"configuring-session-storage",children:"Configuring Session Storage"})}),"\n",(0,a.jsx)(n.p,{children:"This guide explains how to configure session storage in Agent Mesh, enabling user conversations to persist across restarts and providing rich conversation history for both the WebUI Gateway and individual agents."}),"\n",(0,a.jsx)(n.h2,{id:"understanding-session-storage-architecture",children:"Understanding Session Storage Architecture"}),"\n",(0,a.jsx)(n.p,{children:"Agent Mesh uses a distributed session architecture where the WebUI Gateway and agents maintain separate but coordinated session storage systems connected via session IDs."}),"\n",(0,a.jsx)(n.h3,{id:"how-session-storage-works",children:"How Session Storage Works"}),"\n",(0,a.jsx)(n.p,{children:"When a user starts a conversation:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["The WebUI Gateway generates a session ID (",(0,a.jsx)(n.code,{children:"web-session-<UUID>"}),")"]}),"\n",(0,a.jsx)(n.li,{children:"The WebUI Gateway sends the session ID to the agent with each message"}),"\n",(0,a.jsx)(n.li,{children:"The agent receives the session ID and uses it to look up or store its own session context"}),"\n",(0,a.jsx)(n.li,{children:"The WebUI Gateway and agent store different data in their own databases"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"This architecture allows:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"The WebUI Gateway to show conversation history in the user interface"}),"\n",(0,a.jsx)(n.li,{children:"Agents to maintain their own conversation context and memory"}),"\n",(0,a.jsx)(n.li,{children:"Multiple agents in a conversation to share the same session ID while maintaining isolated storage"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"where-data-is-stored",children:"Where Data Is Stored"}),"\n",(0,a.jsx)(n.p,{children:"The WebUI Gateway database stores:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Session metadata (session ID, user ID, timestamps)"}),"\n",(0,a.jsx)(n.li,{children:"Chat history displayed in the UI"}),"\n",(0,a.jsx)(n.li,{children:"Message bubbles and formatted responses"}),"\n",(0,a.jsx)(n.li,{children:"Task metadata (agent names, status, feedback)"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Each agent database stores:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Agent's conversation context and memory"}),"\n",(0,a.jsx)(n.li,{children:"Message history from the agent's perspective"}),"\n",(0,a.jsx)(n.li,{children:"Agent internal state and tool execution history"}),"\n",(0,a.jsx)(n.li,{children:"Session events and actions"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"These are separate databases. Each agent has its own independent database (with separate credentials), and the WebUI Gateway has its own database. They coordinate via the session ID."}),"\n",(0,a.jsx)(n.h2,{id:"session-storage-scenarios",children:"Session Storage Scenarios"}),"\n",(0,a.jsx)(n.p,{children:"The behavior of your deployment depends on whether the WebUI Gateway and agents have persistent storage enabled. Understanding these scenarios helps you configure correctly for your needs."}),"\n",(0,a.jsx)(n.h3,{id:"scenario-a-both-webui-gateway-and-agents-have-persistence-recommended",children:"Scenario A: Both WebUI Gateway and Agents Have Persistence (Recommended)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'# WebUI Gateway Configuration\nsession_service:\n  type: "sql"\n  database_url: "${WEB_UI_GATEWAY_DATABASE_URL}"\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'# Agent Configuration\nsession_service:\n  type: "sql"\n  database_url: "${AGENT_DATABASE_URL, sqlite:///agent-session.db}"\n  default_behavior: "PERSISTENT"\n'})}),"\n",(0,a.jsx)(n.p,{children:"What happens:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"User sees full chat history in the UI after restarts"}),"\n",(0,a.jsx)(n.li,{children:"Agents remember full conversation context across restarts"}),"\n",(0,a.jsx)(n.li,{children:"Multi-turn conversations work perfectly"}),"\n",(0,a.jsx)(n.li,{children:"Browser refresh preserves everything"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Use this for:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Production deployments"}),"\n",(0,a.jsx)(n.li,{children:"Multi-turn interactive experiences"}),"\n",(0,a.jsx)(n.li,{children:"Any deployment where users expect conversation continuity"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"scenario-b-neither-has-persistence-ephemeral-only",children:"Scenario B: Neither Has Persistence (Ephemeral Only)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'# WebUI Gateway Configuration\nsession_service:\n  type: "memory"\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'# Agent Configuration\nsession_service:\n  type: "memory"\n'})}),"\n",(0,a.jsx)(n.p,{children:"What happens:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Sessions exist only in browser cookies"}),"\n",(0,a.jsx)(n.li,{children:"No conversation history after browser refresh"}),"\n",(0,a.jsx)(n.li,{children:"No persistence across restarts"}),"\n",(0,a.jsx)(n.li,{children:"Everything lost when cookies expire"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Use this for:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Local development and testing only"}),"\n",(0,a.jsx)(n.li,{children:"Rapid prototyping"}),"\n",(0,a.jsx)(n.li,{children:"Scenarios where no persistence is needed"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Do not use for:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Production deployments"}),"\n",(0,a.jsx)(n.li,{children:"Multi-turn conversations"}),"\n",(0,a.jsx)(n.li,{children:"Any scenario requiring conversation continuity"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"scenario-c-only-agents-have-persistence-limited-experience",children:"Scenario C: Only Agents Have Persistence (Limited Experience)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'# WebUI Gateway Configuration\nsession_service:\n  type: "memory"  # No database\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'# Agent Configuration\nsession_service:\n  type: "sql"\n  database_url: "${AGENT_DATABASE_URL}"\n  default_behavior: "PERSISTENT"\n'})}),"\n",(0,a.jsx)(n.p,{children:"What happens:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"User sees no chat history in the UI after browser refresh"}),"\n",(0,a.jsx)(n.li,{children:"Agents maintain conversation context internally"}),"\n",(0,a.jsx)(n.li,{children:"Conversation works but UI does not show history"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Use this for:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Rare scenarios where UI history is not needed"}),"\n",(0,a.jsx)(n.li,{children:"Headless or API-only deployments without WebUI"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"scenario-d-only-webui-gateway-has-persistence-broken-experience",children:"Scenario D: Only WebUI Gateway Has Persistence (Broken Experience)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'# WebUI Gateway Configuration\nsession_service:\n  type: "sql"\n  database_url: "${WEB_UI_GATEWAY_DATABASE_URL}"\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'# Agent Configuration\nsession_service:\n  type: "memory"  # No database\n'})}),"\n",(0,a.jsxs)(n.admonition,{title:"Broken Experience",type:"warning",children:[(0,a.jsx)(n.p,{children:"What happens:"}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"User sees full chat history in the UI"}),"\n",(0,a.jsx)(n.li,{children:"Agent receives session ID but has no database to store context"}),"\n",(0,a.jsx)(n.li,{children:"Agent processes current message but forgets previous turns"}),"\n",(0,a.jsx)(n.li,{children:"The UI shows history, but the agent acts like every message is the first one"}),"\n"]}),(0,a.jsx)(n.p,{children:"The UI misleads the user by showing conversation history that the agent cannot actually use. Users get frustrated when the agent does not remember what they just said."}),(0,a.jsx)(n.p,{children:"Avoid this scenario because it creates a confusing and broken user experience."})]}),"\n",(0,a.jsx)(n.h2,{id:"configuring-webui-gateway-session-storage",children:"Configuring WebUI Gateway Session Storage"}),"\n",(0,a.jsx)(n.p,{children:"The WebUI Gateway requires two configuration elements to enable persistent session storage."}),"\n",(0,a.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"SESSION_SECRET_KEY"})," (Required)"]}),"\n",(0,a.jsx)(n.p,{children:"A secret key used to sign session cookies. This must be the same across all instances if you run multiple pods or processes."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'export SESSION_SECRET_KEY="your-secret-key-here"\n'})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"WEB_UI_GATEWAY_DATABASE_URL"})," (Required for persistent mode)"]}),"\n",(0,a.jsx)(n.p,{children:"The database connection string specifying where to store session data."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'export WEB_UI_GATEWAY_DATABASE_URL="postgresql://user:pass@host:5432/webui_db"\n'})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"PLATFORM_DATABASE_URL"})," (Optional, required for enterprise features)"]}),"\n",(0,a.jsx)(n.p,{children:"The database connection string for platform features such as agents, connectors, and deployments. If not configured, platform endpoints return 501 (Not Implemented)."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'export PLATFORM_DATABASE_URL="postgresql://user:pass@host:5432/platform_db"\n'})}),"\n",(0,a.jsx)(n.p,{children:"For development, you can use SQLite:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'export PLATFORM_DATABASE_URL="sqlite:///platform.db"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"gateway-configuration-file",children:"Gateway Configuration File"}),"\n",(0,a.jsx)(n.p,{children:"Update your WebUI Gateway configuration to use the database:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'session_service:\n  type: "sql"\n  database_url: "${WEB_UI_GATEWAY_DATABASE_URL}"\n\nplatform_service:\n  database_url: "${PLATFORM_DATABASE_URL, sqlite:///platform.db}"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"database-backend-options",children:"Database Backend Options"}),"\n",(0,a.jsx)(n.h4,{id:"sqlite-development",children:"SQLite (Development)"}),"\n",(0,a.jsx)(n.p,{children:"SQLite stores session data in a local file, ideal for development without external infrastructure."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'session_service:\n  type: "sql"\n  database_url: "sqlite:///webui-gateway.db"\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'export WEB_UI_GATEWAY_DATABASE_URL="sqlite:///webui-gateway.db"\n'})}),"\n",(0,a.jsx)(n.p,{children:"Advantages:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"No external dependencies"}),"\n",(0,a.jsx)(n.li,{children:"Instant setup"}),"\n",(0,a.jsx)(n.li,{children:"Perfect for local development"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Limitations:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Not suitable for production"}),"\n",(0,a.jsx)(n.li,{children:"Cannot be shared across multiple instances"}),"\n",(0,a.jsx)(n.li,{children:"No built-in replication or backup"}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"postgresql-production",children:"PostgreSQL (Production)"}),"\n",(0,a.jsx)(n.p,{children:"PostgreSQL provides robust, scalable database suitable for production deployments."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'session_service:\n  type: "sql"\n  database_url: "postgresql://user:password@host:5432/webui_db"\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'export WEB_UI_GATEWAY_DATABASE_URL="postgresql://webui_user:secure_pass@db.example.com:5432/webui_db"\n'})}),"\n",(0,a.jsx)(n.p,{children:"Advantages:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Production-grade reliability"}),"\n",(0,a.jsx)(n.li,{children:"Horizontal scalability (multiple instances share same database)"}),"\n",(0,a.jsx)(n.li,{children:"Cloud-managed options (AWS RDS, Google Cloud SQL, Azure Database)"}),"\n",(0,a.jsx)(n.li,{children:"Connection pooling support"}),"\n",(0,a.jsx)(n.li,{children:"ACID compliance"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Connection string format:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"postgresql://[user[:password]@][host][:port]/[dbname][?param1=value1&...]\n"})}),"\n",(0,a.jsx)(n.h4,{id:"mysqlmariadb-production",children:"MySQL/MariaDB (Production)"}),"\n",(0,a.jsx)(n.p,{children:"MySQL and MariaDB are popular open-source databases suitable for production."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'session_service:\n  type: "sql"\n  database_url: "mysql+pymysql://user:password@host:3306/webui_db"\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'export WEB_UI_GATEWAY_DATABASE_URL="mysql+pymysql://webui_user:secure_pass@db.example.com:3306/webui_db"\n'})}),"\n",(0,a.jsx)(n.p,{children:"Advantages:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Open-source and widely available"}),"\n",(0,a.jsx)(n.li,{children:"Strong community support"}),"\n",(0,a.jsx)(n.li,{children:"Cloud-managed options available"}),"\n",(0,a.jsx)(n.li,{children:"ACID compliance (with InnoDB)"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Connection string format:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"mysql+pymysql://[user[:password]@][host][:port]/[database]\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Agent Mesh uses ",(0,a.jsx)(n.code,{children:"pymysql"})," as the Python driver."]}),"\n",(0,a.jsx)(n.h2,{id:"configuring-agent-session-storage",children:"Configuring Agent Session Storage"}),"\n",(0,a.jsx)(n.p,{children:"Agents use the ADK (Agent Development Kit) session configuration system. Each agent can be configured independently with its own database."}),"\n",(0,a.jsx)(n.h3,{id:"agent-configuration-file",children:"Agent Configuration File"}),"\n",(0,a.jsxs)(n.p,{children:["Add the ",(0,a.jsx)(n.code,{children:"session_service"})," section to your agent's YAML configuration:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'session_service:\n  type: "sql"\n  database_url: "${AGENT_DATABASE_URL, sqlite:///agent-session.db}"\n  default_behavior: "PERSISTENT"\n'})}),"\n",(0,a.jsx)(n.p,{children:"Parameters:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"type"}),": ",(0,a.jsx)(n.code,{children:'"memory"'})," (ephemeral) or ",(0,a.jsx)(n.code,{children:'"sql"'})," (persistent)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"database_url"}),": Connection string for the agent's database"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"default_behavior"}),": ",(0,a.jsx)(n.code,{children:'"PERSISTENT"'})," (reuse sessions) or ",(0,a.jsx)(n.code,{children:'"RUN_BASED"'})," (new session per run)"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"environment-variables-1",children:"Environment Variables"}),"\n",(0,a.jsx)(n.p,{children:"Each agent can have its own database credentials:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'export AGENT_DATABASE_URL="postgresql://agent_user:agent_pass@host:5432/agent_db"\n'})}),"\n",(0,a.jsx)(n.p,{children:"Or use a default with fallback in the YAML:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'database_url: "${AGENT_DATABASE_URL, sqlite:///agent-session.db}"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"database-isolation-between-agents",children:"Database Isolation Between Agents"}),"\n",(0,a.jsx)(n.p,{children:"Each agent should have:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Its own separate database (not just a schema)"}),"\n",(0,a.jsx)(n.li,{children:"Its own separate credentials (username and password)"}),"\n",(0,a.jsx)(n.li,{children:"Complete isolation from other agents' data"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Example for two agents:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'# Agent A Configuration\nsession_service:\n  type: "sql"\n  database_url: "${AGENT_A_DATABASE_URL, sqlite:///agent-a.db}"\n  default_behavior: "PERSISTENT"\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'# Agent B Configuration\nsession_service:\n  type: "sql"\n  database_url: "${AGENT_B_DATABASE_URL, sqlite:///agent-b.db}"\n  default_behavior: "PERSISTENT"\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Environment variables for isolation\nexport AGENT_A_DATABASE_URL="postgresql://agent_a_user:pass@host:5432/agent_a_db"\nexport AGENT_B_DATABASE_URL="postgresql://agent_b_user:pass@host:5432/agent_b_db"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"shared-configuration-pattern",children:"Shared Configuration Pattern"}),"\n",(0,a.jsx)(n.p,{children:"If all agents should use the same session storage configuration, use YAML anchors:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'# Shared configuration\nsession_service: &default_session_service\n  type: "sql"\n  database_url: "${SESSION_DATABASE_URL, sqlite:///session.db}"\n  default_behavior: "PERSISTENT"\n\n# Agent references shared config\nagents:\n  - name: agent-a\n    session_service: *default_session_service\n\n  - name: agent-b\n    session_service: *default_session_service\n'})}),"\n",(0,a.jsx)(n.h2,{id:"migrating-from-ephemeral-to-persistent",children:"Migrating from Ephemeral to Persistent"}),"\n",(0,a.jsx)(n.p,{children:"Moving from ephemeral mode to persistent mode can be done without losing active sessions."}),"\n",(0,a.jsx)(n.h3,{id:"step-1-configure-webui-gateway-database",children:"Step 1: Configure WebUI Gateway Database"}),"\n",(0,a.jsx)(n.p,{children:"Set the environment variables:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'export SESSION_SECRET_KEY="your-secret-key"\nexport WEB_UI_GATEWAY_DATABASE_URL="postgresql://user:pass@host:5432/webui_db"\n'})}),"\n",(0,a.jsx)(n.p,{children:"Update your WebUI Gateway configuration:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'session_service:\n  type: "sql"\n  database_url: "${WEB_UI_GATEWAY_DATABASE_URL}"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"step-2-configure-agent-databases",children:"Step 2: Configure Agent Databases"}),"\n",(0,a.jsx)(n.p,{children:"For each agent, set the database URL:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'export AGENT_DATABASE_URL="postgresql://agent_user:pass@host:5432/agent_db"\n'})}),"\n",(0,a.jsx)(n.p,{children:"Update agent configuration:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'session_service:\n  type: "sql"\n  database_url: "${AGENT_DATABASE_URL}"\n  default_behavior: "PERSISTENT"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"step-3-restart-application",children:"Step 3: Restart Application"}),"\n",(0,a.jsx)(n.p,{children:"When the application restarts:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Database migrations run automatically"}),"\n",(0,a.jsx)(n.li,{children:"Tables are created for session storage"}),"\n",(0,a.jsx)(n.li,{children:"No manual database setup required"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Tables created:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"sessions"})," - Session metadata"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"chat_tasks"})," - Conversation messages"]}),"\n",(0,a.jsx)(n.li,{children:"Supporting indexes for performance"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"step-4-verify-migration",children:"Step 4: Verify Migration"}),"\n",(0,a.jsx)(n.p,{children:"Test that persistence is working:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Start a conversation with an agent"}),"\n",(0,a.jsx)(n.li,{children:"Send a message"}),"\n",(0,a.jsx)(n.li,{children:"Restart the application"}),"\n",(0,a.jsx)(n.li,{children:"Refresh your browser"}),"\n",(0,a.jsx)(n.li,{children:"Verify conversation history is visible"}),"\n",(0,a.jsx)(n.li,{children:"Send another message to the same agent"}),"\n",(0,a.jsx)(n.li,{children:"Verify agent remembers previous conversation context"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"migration-considerations",children:"Migration Considerations"}),"\n",(0,a.jsx)(n.p,{children:"Existing cookies remain valid. Sessions stored only in cookies before migration continue to work until cookies expire."}),"\n",(0,a.jsx)(n.p,{children:"Database initialization happens once on first startup. Subsequent restarts connect to the existing database."}),"\n",(0,a.jsx)(n.p,{children:"Migration adds new storage without affecting existing sessions."}),"\n",(0,a.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,a.jsx)(n.p,{children:"After configuring session storage, you may want to:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Configure ",(0,a.jsx)(n.a,{href:"/solace-agent-mesh/docs/documentation/installing-and-configuring/artifact-storage",children:"Artifact Storage"})," for agent-generated files"]}),"\n",(0,a.jsxs)(n.li,{children:["Review ",(0,a.jsx)(n.a,{href:"/solace-agent-mesh/docs/documentation/deploying/deployment-options",children:"deployment options"})," for production considerations"]}),"\n",(0,a.jsxs)(n.li,{children:["Set up ",(0,a.jsx)(n.a,{href:"/solace-agent-mesh/docs/documentation/deploying/observability",children:"monitoring and observability"})," to track session activity"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>o});var i=s(6540);const a={},t=i.createContext(a);function r(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);