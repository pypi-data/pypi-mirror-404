"use strict";(self.webpackChunksolace_agenitc_mesh_docs=self.webpackChunksolace_agenitc_mesh_docs||[]).push([[8396],{1781:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"documentation/migrations/platform-service-split","title":"Migration to Platform Service (Enterprise v1.27.0+)","description":"\u2705 This Guide Applies To:","source":"@site/docs/documentation/migrations/platform-service-split.md","sourceDirName":"documentation/migrations","slug":"/documentation/migrations/platform-service-split","permalink":"/solace-agent-mesh/docs/documentation/migrations/platform-service-split","draft":false,"unlisted":false,"editUrl":"https://github.com/SolaceLabs/solace-agent-mesh/edit/main/docs/docs/documentation/migrations/platform-service-split.md","tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"title":"Migration to Platform Service (Enterprise v1.27.0+)","sidebar_position":20},"sidebar":"docSidebar","previous":{"title":"Proxy Configuration","permalink":"/solace-agent-mesh/docs/documentation/deploying/proxy_configuration"},"next":{"title":"Migration Guide: Upgrading to the A2A SDK","permalink":"/solace-agent-mesh/docs/documentation/migrations/a2a-upgrade/a2a-gateway-upgrade-to-0.3.0"}}');var s=i(4848),r=i(8453);const a={title:"Migration to Platform Service (Enterprise v1.27.0+)",sidebar_position:20},o=void 0,l={},c=[{value:"\u2705 This Guide Applies To:",id:"-this-guide-applies-to",level:3},{value:"\u274c This Guide Does NOT Apply To:",id:"-this-guide-does-not-apply-to",level:3},{value:"Overview",id:"overview",level:2},{value:"What&#39;s Changing",id:"whats-changing",level:2},{value:"Split",id:"split",level:3},{value:"Functionality Distribution",id:"functionality-distribution",level:3},{value:"Migration Steps",id:"migration-steps",level:2},{value:"Step 1: Create Platform Service Configuration",id:"step-1-create-platform-service-configuration",level:3},{value:"Step 2: Update WebUI Configuration",id:"step-2-update-webui-configuration",level:3},{value:"Step 3: Run Platform Service",id:"step-3-run-platform-service",level:3},{value:"Verification",id:"verification",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h3,{id:"-this-guide-applies-to",children:"\u2705 This Guide Applies To:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Users running SAM manually with YAML files"})," - Typically after generating your SAM application with ",(0,s.jsx)(n.code,{children:"sam init"}),", you run SAM directly using configuration files (e.g., ",(0,s.jsx)(n.code,{children:"sam run configs/gateways/webui.yaml"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Users using Enterprise features and have an existing ",(0,s.jsx)(n.code,{children:"platform.db"})]})," - You are using features like Agent Builder, Connectors, or other enterprise capabilities that have created a ",(0,s.jsx)(n.code,{children:"platform.db"})," file"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"-this-guide-does-not-apply-to",children:"\u274c This Guide Does NOT Apply To:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Users using Docker images"})," - If you're using Solace's pre-packaged Docker images via the Docker quickstart or Kubernetes deployments with Helm charts, this migration is handled automatically"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Users with no existing ",(0,s.jsx)(n.code,{children:"platform.db"})]})," - If you don't have an existing ",(0,s.jsx)(n.code,{children:"platform.db"})," file or have not been using enterprise features"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SAM Community Edition users"})," - This migration only applies to SAM Enterprise"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"Previously, backend enterprise functionality was served from the WebUI Gateway. With version 1.27.0+, the architecture splits the WebUI Gateway into two separate services:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"WebUI Gateway"})," (port 8000): Handles chat sessions, task submissions, and real-time streaming"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Platform Service"})," (port 8001): Handles Agent Builder, Connector management, and deployment orchestration"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"whats-changing",children:"What's Changing"}),"\n",(0,s.jsx)(n.h3,{id:"split",children:"Split"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{children:"Until v1.24.x"}),(0,s.jsx)(n.th,{children:"After v1.27.0"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Architecture"})}),(0,s.jsx)(n.td,{children:"WebUI Gateway"}),(0,s.jsx)(n.td,{children:"WebUI Gateway + Platform Service"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Ports"})}),(0,s.jsx)(n.td,{children:"Single port (8000)"}),(0,s.jsx)(n.td,{children:"WebUI (8000) + Platform (8001)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Configuration"})}),(0,s.jsx)(n.td,{children:"One YAML file"}),(0,s.jsx)(n.td,{children:"Two YAML files"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"functionality-distribution",children:"Functionality Distribution"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"WebUI Gateway (port 8000)"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Chat interface and sessions"}),"\n",(0,s.jsx)(n.li,{children:"Task submission and management"}),"\n",(0,s.jsx)(n.li,{children:"Server-Sent Events (SSE) streaming"}),"\n",(0,s.jsx)(n.li,{children:"Artifact management"}),"\n",(0,s.jsx)(n.li,{children:"Real-time agent interactions"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Platform Service (port 8001)"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Agent Builder (UI-based agent creation)"}),"\n",(0,s.jsx)(n.li,{children:"Connector management"}),"\n",(0,s.jsx)(n.li,{children:"Deployment orchestration"}),"\n",(0,s.jsx)(n.li,{children:"Background tasks (heartbeat monitoring, deployment tracking)"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"If you upgrade to v1.27.0+ without completing this migration, users will lose access to the Agent Builder, Connector management, and dynamic agent deployment capabilities. Chat functionality will continue to work, but enterprise features will be unavailable."})}),"\n",(0,s.jsx)(n.h2,{id:"migration-steps",children:"Migration Steps"}),"\n",(0,s.jsx)(n.h3,{id:"step-1-create-platform-service-configuration",children:"Step 1: Create Platform Service Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Create a new file ",(0,s.jsx)(n.code,{children:"configs/services/platform.yaml"})," in your project with the contents from ",(0,s.jsx)(n.a,{href:"https://raw.githubusercontent.com/SolaceLabs/solace-agent-mesh/main/templates/platform.yaml",children:"templates/platform.yaml"}),":"]}),"\n",(0,s.jsx)(n.admonition,{type:"important",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"app_config.database_url"})," must point to the existing ",(0,s.jsx)(n.code,{children:"platform.db"})," to retain agent and deployment data."]})}),"\n",(0,s.jsx)(n.h3,{id:"step-2-update-webui-configuration",children:"Step 2: Update WebUI Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Update your existing ",(0,s.jsx)(n.code,{children:"configs/gateways/webui.yaml"})," to include the Platform Service URL:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'apps:\n  - name: a2a_webui_app\n    app_module: solace_agent_mesh.gateway.http_sse.app\n     \n    # Omitted sections for brevity...\n\n    app_config:\n      namespace: ${NAMESPACE}\n\n      # Add the following section to point to the Platform Service\n      platform_service:\n        url: "${PLATFORM_SERVICE_URL, http://localhost:8001}"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Delete ",(0,s.jsx)(n.code,{children:"platform_service.database_url"})," from your WebUI yaml, as it is no longer needed."]}),"\n",(0,s.jsx)(n.h3,{id:"step-3-run-platform-service",children:"Step 3: Run Platform Service"}),"\n",(0,s.jsx)(n.p,{children:"In addition to running the WebUI Gateway, also start the Platform Service:"}),"\n",(0,s.jsx)(n.p,{children:"Within the same process:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sam run configs/gateways/webui.yaml configs/services/platform.yaml\n"})}),"\n",(0,s.jsx)(n.p,{children:"Or within its own process:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sam run configs/services/platform.yaml\n"})}),"\n",(0,s.jsx)(n.h2,{id:"verification",children:"Verification"}),"\n",(0,s.jsx)(n.p,{children:"After completing the migration, verify both services are running correctly:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Check WebUI Gateway"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl http://localhost:8000/health\n# Should return: {"status":"A2A Web UI Backend is running"}\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Check Platform Service"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl http://localhost:8001/health\n# Should return: {"status":"healthy","service":"Platform Service"}\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Verify Frontend Configuration"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl http://localhost:8000/api/v1/config\n# Should include frontend_platform_server_url set to the Platform Service URL"\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Test Agent Builder"})," - Access the web UI and navigate to Agent Builder. You should be able to create and manage agents through the UI."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>o});var t=i(6540);const s={},r=t.createContext(s);function a(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);