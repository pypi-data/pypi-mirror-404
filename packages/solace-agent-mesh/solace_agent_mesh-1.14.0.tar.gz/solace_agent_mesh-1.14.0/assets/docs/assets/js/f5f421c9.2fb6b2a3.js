"use strict";(self.webpackChunksolace_agenitc_mesh_docs=self.webpackChunksolace_agenitc_mesh_docs||[]).push([[365],{9940:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"documentation/components/workflows","title":"Workflows","description":"Workflows orchestrate multiple agents through YAML configuration. Unlike the orchestrator, which uses AI to dynamically decide how to accomplish tasks, workflows follow explicit paths you define. Each step, branch, and iteration is specified in configuration.","source":"@site/docs/documentation/components/workflows.md","sourceDirName":"documentation/components","slug":"/documentation/components/workflows","permalink":"/solace-agent-mesh/docs/documentation/components/workflows","draft":false,"unlisted":false,"editUrl":"https://github.com/SolaceLabs/solace-agent-mesh/edit/main/docs/docs/documentation/components/workflows.md","tags":[],"version":"current","sidebarPosition":225,"frontMatter":{"title":"Workflows","sidebar_position":225},"sidebar":"docSidebar","previous":{"title":"Agents","permalink":"/solace-agent-mesh/docs/documentation/components/agents"},"next":{"title":"Orchestrator","permalink":"/solace-agent-mesh/docs/documentation/components/orchestrator"}}');var d=s(4848),i=s(8453);const t={title:"Workflows",sidebar_position:225},l="Workflows",o={},c=[{value:"Workflows vs. Orchestrator",id:"workflows-vs-orchestrator",level:2},{value:"Configuration Overview",id:"configuration-overview",level:2},{value:"Top-Level Fields",id:"top-level-fields",level:3},{value:"App-Level Settings",id:"app-level-settings",level:3},{value:"Node Types",id:"node-types",level:2},{value:"Agent Node",id:"agent-node",level:3},{value:"Switch Node",id:"switch-node",level:3},{value:"Map Node",id:"map-node",level:3},{value:"Loop Node",id:"loop-node",level:3},{value:"Workflow Node",id:"workflow-node",level:3},{value:"Template Expressions",id:"template-expressions",level:2},{value:"Available References",id:"available-references",level:3},{value:"Operators",id:"operators",level:3},{value:"Condition Expressions",id:"condition-expressions",level:2},{value:"Dependencies and Parallelism",id:"dependencies-and-parallelism",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Retry Strategy",id:"retry-strategy",level:3},{value:"Exit Handlers",id:"exit-handlers",level:3},{value:"Fail-Fast Behavior",id:"fail-fast-behavior",level:3},{value:"Workflow Discovery",id:"workflow-discovery",level:2},{value:"Schema Reference",id:"schema-reference",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"workflows",children:"Workflows"})}),"\n",(0,d.jsxs)(n.p,{children:["Workflows orchestrate multiple agents through YAML configuration. Unlike the ",(0,d.jsx)(n.a,{href:"/solace-agent-mesh/docs/documentation/components/orchestrator",children:"orchestrator"}),", which uses AI to dynamically decide how to accomplish tasks, workflows follow explicit paths you define. Each step, branch, and iteration is specified in configuration."]}),"\n",(0,d.jsx)(n.p,{children:"Use workflows when you need:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Predictable execution that follows the same path every time"}),"\n",(0,d.jsx)(n.li,{children:"Business processes with compliance or audit requirements"}),"\n",(0,d.jsx)(n.li,{children:"Visual representation of agent interactions in the UI"}),"\n",(0,d.jsx)(n.li,{children:"Fine-grained control over error handling and retries"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"workflows-vs-orchestrator",children:"Workflows vs. Orchestrator"}),"\n",(0,d.jsx)(n.p,{children:"The orchestrator excels at open-ended tasks where the AI determines the best approach. Workflows are better when you know exactly what steps need to happen and in what order."}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Aspect"}),(0,d.jsx)(n.th,{children:"Orchestrator"}),(0,d.jsx)(n.th,{children:"Workflows"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Control flow"}),(0,d.jsx)(n.td,{children:"AI decides"}),(0,d.jsx)(n.td,{children:"You define"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Visibility"}),(0,d.jsx)(n.td,{children:"Emergent behavior"}),(0,d.jsx)(n.td,{children:"Explicit DAG"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Best for"}),(0,d.jsx)(n.td,{children:"Exploratory tasks"}),(0,d.jsx)(n.td,{children:"Repeatable processes"})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"configuration-overview",children:"Configuration Overview"}),"\n",(0,d.jsxs)(n.p,{children:["A workflow is defined in the ",(0,d.jsx)(n.code,{children:"workflow"})," section of your YAML configuration file:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'apps:\n  - name: my_workflow\n    app_module: solace_agent_mesh.workflow.app\n    broker:\n      # ... broker configuration\n\n    app_config:\n      namespace: ${NAMESPACE}\n      agent_name: "MyWorkflow"\n\n      workflow:\n        description: "Process incoming orders"\n        version: "1.0.0"\n\n        input_schema:\n          type: object\n          properties:\n            order_id:\n              type: string\n          required: [order_id]\n\n        nodes:\n          - id: validate_order\n            type: agent\n            agent_name: "OrderValidator"\n            input:\n              order_id: "{{workflow.input.order_id}}"\n\n          - id: process_payment\n            type: agent\n            agent_name: "PaymentProcessor"\n            depends_on: [validate_order]\n            input:\n              order_data: "{{validate_order.output}}"\n\n        output_mapping:\n          status: "{{process_payment.output.status}}"\n          confirmation: "{{process_payment.output.confirmation_number}}"\n'})}),"\n",(0,d.jsx)(n.h3,{id:"top-level-fields",children:"Top-Level Fields"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Field"}),(0,d.jsx)(n.th,{children:"Required"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"description"})}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:"What the workflow does"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"nodes"})}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:"The workflow steps"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"output_mapping"})}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:"Maps node outputs to final workflow output"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"version"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:'Semantic version (default: "1.0.0")'})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"input_schema"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"JSON Schema for workflow input validation"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"output_schema"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"JSON Schema for workflow output validation"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"skills"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Skills exposed in the agent card"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"on_exit"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Exit handler for cleanup"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"fail_fast"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Stop on first failure (default: true)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"max_call_depth"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Limit for nested workflows (default: 10)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"retry_strategy"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Default retry configuration for all nodes"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"app-level-settings",children:"App-Level Settings"}),"\n",(0,d.jsxs)(n.p,{children:["These settings go in ",(0,d.jsx)(n.code,{children:"app_config"}),", outside the ",(0,d.jsx)(n.code,{children:"workflow"})," block:"]}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Field"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"max_workflow_execution_time_seconds"})}),(0,d.jsx)(n.td,{children:"1800"}),(0,d.jsx)(n.td,{children:"Maximum total workflow runtime (30 minutes)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"default_node_timeout_seconds"})}),(0,d.jsx)(n.td,{children:"300"}),(0,d.jsx)(n.td,{children:"Default timeout per node (5 minutes)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"default_max_map_items"})}),(0,d.jsx)(n.td,{children:"100"}),(0,d.jsx)(n.td,{children:"Safety limit for map node iterations"})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"node-types",children:"Node Types"}),"\n",(0,d.jsx)(n.h3,{id:"agent-node",children:"Agent Node"}),"\n",(0,d.jsx)(n.p,{children:"Invokes an agent and captures its output."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'- id: analyze_data\n  type: agent\n  agent_name: "DataAnalyzer"\n  input:\n    dataset: "{{workflow.input.dataset}}"\n    parameters: "{{workflow.input.analysis_params}}"\n  instruction: "Focus on anomalies in the {{workflow.input.target_field}} field"\n  timeout: "10m"\n'})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Field"}),(0,d.jsx)(n.th,{children:"Required"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"id"})}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:"Unique identifier for this node"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"type"})}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsxs)(n.td,{children:["Must be ",(0,d.jsx)(n.code,{children:"agent"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"agent_name"})}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:"Name of the agent to call"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"input"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Input data mapping (template expressions allowed)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"instruction"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Additional context for the agent"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"depends_on"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Node IDs that must complete first"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"timeout"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:'Override default timeout (e.g., "30s", "5m", "1h")'})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"retry_strategy"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Override default retry behavior"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"input_schema_override"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Override agent's input schema"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"output_schema_override"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Override agent's output schema"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"switch-node",children:"Switch Node"}),"\n",(0,d.jsx)(n.p,{children:"Routes execution based on conditions. Cases are evaluated in order; the first match wins."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"- id: route_by_priority\n  type: switch\n  depends_on: [classify_ticket]\n  cases:\n    - condition: \"{{classify_ticket.output.priority}} == 'critical'\"\n      node: escalate_immediately\n    - condition: \"{{classify_ticket.output.priority}} == 'high'\"\n      node: assign_senior_agent\n  default: add_to_queue\n"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Field"}),(0,d.jsx)(n.th,{children:"Required"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"id"})}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:"Unique identifier"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"type"})}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsxs)(n.td,{children:["Must be ",(0,d.jsx)(n.code,{children:"switch"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cases"})}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:"List of condition/node pairs"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"default"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Node to execute if no case matches"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"depends_on"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Node IDs that must complete first"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:"Each case has:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"condition"}),": Expression to evaluate (see ",(0,d.jsx)(n.a,{href:"#condition-expressions",children:"Condition Expressions"}),")"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"node"}),": ID of the node to execute if condition is true"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Nodes in branches that aren't selected are skipped entirely."}),"\n",(0,d.jsx)(n.h3,{id:"map-node",children:"Map Node"}),"\n",(0,d.jsx)(n.p,{children:"Executes a node for each item in a collection. Items are processed in parallel by default."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'- id: process_all_items\n  type: map\n  depends_on: [fetch_items]\n  items: "{{fetch_items.output.item_list}}"\n  node: process_single_item\n  concurrency_limit: 5\n  max_items: 50\n\n- id: process_single_item\n  type: agent\n  agent_name: "ItemProcessor"\n  input:\n    item: "{{_map_item}}"\n'})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Field"}),(0,d.jsx)(n.th,{children:"Required"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"id"})}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:"Unique identifier"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"type"})}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsxs)(n.td,{children:["Must be ",(0,d.jsx)(n.code,{children:"map"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"node"})}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:"Node ID to execute for each item"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"items"})}),(0,d.jsx)(n.td,{children:"Yes*"}),(0,d.jsx)(n.td,{children:"Template expression resolving to an array"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"depends_on"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Node IDs that must complete first"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"concurrency_limit"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Max parallel executions (unlimited if not set)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"max_items"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Safety limit (default: 100)"})]})]})]}),"\n",(0,d.jsxs)(n.p,{children:["*Or use ",(0,d.jsx)(n.code,{children:"withItems"})," for a static list, or ",(0,d.jsx)(n.code,{children:"withParam"})," for Argo-style syntax."]}),"\n",(0,d.jsxs)(n.p,{children:["The target node accesses the current item via ",(0,d.jsx)(n.code,{children:"{{_map_item}}"})," or ",(0,d.jsx)(n.code,{children:"{{_map_item.field}}"}),". The current index is available as ",(0,d.jsx)(n.code,{children:"{{_map_index}}"}),"."]}),"\n",(0,d.jsxs)(n.p,{children:["After all iterations complete, the map node's output contains a ",(0,d.jsx)(n.code,{children:"results"})," array with each iteration's output in order."]}),"\n",(0,d.jsx)(n.h3,{id:"loop-node",children:"Loop Node"}),"\n",(0,d.jsx)(n.p,{children:"Repeats a node until a condition becomes false. The first iteration always runs; the condition is checked before subsequent iterations."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'- id: poll_until_ready\n  type: loop\n  node: check_status\n  condition: "{{check_status.output.ready}} == false"\n  max_iterations: 30\n  delay: "10s"\n\n- id: check_status\n  type: agent\n  agent_name: "StatusChecker"\n  input:\n    task_id: "{{workflow.input.task_id}}"\n'})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Field"}),(0,d.jsx)(n.th,{children:"Required"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"id"})}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:"Unique identifier"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"type"})}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsxs)(n.td,{children:["Must be ",(0,d.jsx)(n.code,{children:"loop"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"node"})}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:"Node ID to execute repeatedly"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"condition"})}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:"Continue while this is true"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"depends_on"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Node IDs that must complete first"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"max_iterations"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:"Safety limit (default: 100)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"delay"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:'Wait between iterations (e.g., "5s", "1m")'})]})]})]}),"\n",(0,d.jsxs)(n.p,{children:["The current iteration number (starting at 0) is available as ",(0,d.jsx)(n.code,{children:"{{_loop_iteration}}"}),"."]}),"\n",(0,d.jsx)(n.h3,{id:"workflow-node",children:"Workflow Node"}),"\n",(0,d.jsx)(n.p,{children:"Invokes another workflow as a sub-workflow."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'- id: run_validation_workflow\n  type: workflow\n  workflow_name: "ValidationWorkflow"\n  input:\n    data: "{{workflow.input.payload}}"\n  timeout: "15m"\n'})}),"\n",(0,d.jsxs)(n.p,{children:["The fields match agent nodes, except ",(0,d.jsx)(n.code,{children:"workflow_name"})," replaces ",(0,d.jsx)(n.code,{children:"agent_name"}),". Workflows cannot call themselves directly."]}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"max_call_depth"})," setting (default: 10) limits how deeply workflows can nest to prevent infinite recursion."]}),"\n",(0,d.jsx)(n.h2,{id:"template-expressions",children:"Template Expressions"}),"\n",(0,d.jsxs)(n.p,{children:["Template expressions reference data from workflow input or node outputs using ",(0,d.jsx)(n.code,{children:"{{...}}"})," syntax."]}),"\n",(0,d.jsx)(n.h3,{id:"available-references",children:"Available References"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Expression"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{{workflow.input.field}}"})}),(0,d.jsx)(n.td,{children:"Workflow input field"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{{node_id.output.field}}"})}),(0,d.jsx)(n.td,{children:"Output from a completed node"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{{_map_item}}"})}),(0,d.jsx)(n.td,{children:"Current item in a map iteration"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{{_map_item.field}}"})}),(0,d.jsx)(n.td,{children:"Field from current map item"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{{_map_index}}"})}),(0,d.jsx)(n.td,{children:"Current map iteration index (0-based)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"{{_loop_iteration}}"})}),(0,d.jsx)(n.td,{children:"Current loop iteration number (0-based)"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"operators",children:"Operators"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"coalesce"})," returns the first non-null value:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'output_mapping:\n  result:\n    coalesce:\n      - "{{primary_source.output.value}}"\n      - "{{fallback_source.output.value}}"\n      - "default_value"\n'})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"concat"})," joins values as strings:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'input:\n  message:\n    concat:\n      - "Processing order "\n      - "{{workflow.input.order_id}}"\n      - " for customer "\n      - "{{workflow.input.customer_name}}"\n'})}),"\n",(0,d.jsx)(n.h2,{id:"condition-expressions",children:"Condition Expressions"}),"\n",(0,d.jsx)(n.p,{children:"Switch conditions and loop conditions use a safe expression syntax:"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Comparisons:"})," ",(0,d.jsx)(n.code,{children:"=="}),", ",(0,d.jsx)(n.code,{children:"!="}),", ",(0,d.jsx)(n.code,{children:"<"}),", ",(0,d.jsx)(n.code,{children:"<="}),", ",(0,d.jsx)(n.code,{children:">"}),", ",(0,d.jsx)(n.code,{children:">="}),", ",(0,d.jsx)(n.code,{children:"in"}),", ",(0,d.jsx)(n.code,{children:"not in"})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Boolean:"})," ",(0,d.jsx)(n.code,{children:"and"}),", ",(0,d.jsx)(n.code,{children:"or"}),", ",(0,d.jsx)(n.code,{children:"not"})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Literals:"})," strings (quoted), numbers, ",(0,d.jsx)(n.code,{children:"true"}),", ",(0,d.jsx)(n.code,{children:"false"}),", ",(0,d.jsx)(n.code,{children:"null"})]}),"\n",(0,d.jsx)(n.p,{children:"Examples:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"# Equality\n\"{{node.output.status}} == 'complete'\"\n\n# Numeric comparison\n\"{{node.output.count}} > 10\"\n\n# Boolean logic\n\"{{node.output.ready}} == true and {{node.output.errors}} == 0\"\n\n# Membership\n\"{{node.output.category}} in ['A', 'B', 'C']\"\n"})}),"\n",(0,d.jsx)(n.h2,{id:"dependencies-and-parallelism",children:"Dependencies and Parallelism"}),"\n",(0,d.jsxs)(n.p,{children:["Nodes declare dependencies with ",(0,d.jsx)(n.code,{children:"depends_on"}),". A node executes only after all its dependencies complete."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'nodes:\n  - id: fetch_user\n    type: agent\n    agent_name: "UserService"\n\n  - id: fetch_orders\n    type: agent\n    agent_name: "OrderService"\n\n  # These two run in parallel (no dependencies between them)\n\n  - id: generate_report\n    type: agent\n    agent_name: "ReportGenerator"\n    depends_on: [fetch_user, fetch_orders]  # Waits for both\n'})}),"\n",(0,d.jsx)(n.p,{children:"Nodes with no dependencies (or whose dependencies are all satisfied) run in parallel automatically."}),"\n",(0,d.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,d.jsx)(n.h3,{id:"retry-strategy",children:"Retry Strategy"}),"\n",(0,d.jsx)(n.p,{children:"Configure retries at the workflow level (applies to all nodes) or per-node:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'workflow:\n  retry_strategy:\n    limit: 3\n    retry_policy: "OnFailure"\n    backoff:\n      duration: "2s"\n      factor: 2.0\n      max_duration: "30s"\n'})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Field"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"limit"})}),(0,d.jsx)(n.td,{children:"3"}),(0,d.jsx)(n.td,{children:"Maximum retry attempts"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"retry_policy"})}),(0,d.jsx)(n.td,{children:'"OnFailure"'}),(0,d.jsx)(n.td,{children:'When to retry: "Always", "OnFailure", "OnError"'})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"backoff.duration"})}),(0,d.jsx)(n.td,{children:'"1s"'}),(0,d.jsx)(n.td,{children:"Initial wait before first retry"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"backoff.factor"})}),(0,d.jsx)(n.td,{children:"2.0"}),(0,d.jsx)(n.td,{children:"Multiplier for each subsequent retry"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"backoff.max_duration"})}),(0,d.jsx)(n.td,{children:"None"}),(0,d.jsx)(n.td,{children:"Cap on backoff duration"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"exit-handlers",children:"Exit Handlers"}),"\n",(0,d.jsx)(n.p,{children:"Run cleanup or notification nodes when the workflow completes:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"workflow:\n  on_exit: cleanup_resources  # Always runs\n"})}),"\n",(0,d.jsx)(n.p,{children:"Or specify different handlers for different outcomes:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"workflow:\n  on_exit:\n    on_success: send_success_notification\n    on_failure: send_failure_alert\n    on_cancel: cleanup_partial_state\n    always: log_completion\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Exit handler nodes must be defined in the ",(0,d.jsx)(n.code,{children:"nodes"})," array like any other node."]}),"\n",(0,d.jsx)(n.h3,{id:"fail-fast-behavior",children:"Fail-Fast Behavior"}),"\n",(0,d.jsxs)(n.p,{children:["By default (",(0,d.jsx)(n.code,{children:"fail_fast: true"}),"), when a node fails, no new nodes are scheduled. Nodes already running continue to completion."]}),"\n",(0,d.jsxs)(n.p,{children:["Set ",(0,d.jsx)(n.code,{children:"fail_fast: false"})," to allow independent branches to continue executing even when one branch fails."]}),"\n",(0,d.jsx)(n.h2,{id:"workflow-discovery",children:"Workflow Discovery"}),"\n",(0,d.jsx)(n.p,{children:"Workflows register themselves as agents and publish agent cards for discovery. Other agents and the orchestrator can invoke workflows just like any other agent."}),"\n",(0,d.jsx)(n.p,{children:"The workflow's input and output schemas appear in the agent card, along with any skills you define:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'workflow:\n  skills:\n    - id: "process_order"\n      name: "Process Order"\n      description: "Validates and processes a customer order"\n      tags: ["orders", "processing"]\n'})}),"\n",(0,d.jsx)(n.h2,{id:"schema-reference",children:"Schema Reference"}),"\n",(0,d.jsxs)(n.p,{children:["The complete JSON Schema for workflow definitions is available at ",(0,d.jsx)(n.a,{href:"https://github.com/SolaceDev/solace-agent-mesh/blob/main/src/solace_agent_mesh/common/schemas/workflow_schema.json",children:(0,d.jsx)(n.code,{children:"src/solace_agent_mesh/common/schemas/workflow_schema.json"})}),"."]}),"\n",(0,d.jsx)(n.p,{children:"Use this schema with your IDE or YAML validator for autocompletion and validation while writing workflow configurations."}),"\n",(0,d.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,d.jsxs)(n.p,{children:["For a hands-on guide to building workflows, see ",(0,d.jsx)(n.a,{href:"/solace-agent-mesh/docs/documentation/developing/creating-workflows",children:"Creating Workflows"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var r=s(6540);const d={},i=r.createContext(d);function t(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:t(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);