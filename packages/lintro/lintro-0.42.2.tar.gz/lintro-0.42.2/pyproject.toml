[build-system]
requires = ["setuptools==80.9.0", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "lintro"
version = "0.42.2"
description = "A unified CLI tool for code formatting, linting, and quality assurance"
keywords = [
  "linting",
  "formatting",
  "code-quality",
  "cli",
  "python",
  "javascript",
  "yaml",
  "docker",
]
classifiers = [
  "Development Status :: 4 - Beta",
  "Intended Audience :: Developers",
  "Operating System :: OS Independent",
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
  "Topic :: Software Development :: Quality Assurance",
  "Topic :: Software Development :: Libraries :: Python Modules",
  "Topic :: Utilities",
]
requires-python = ">=3.11"
dependencies = [
  "click==8.1.8",
  "coverage-badge==1.1.2",
  "loguru==0.7.3",
  "packaging>=25.0",
  "pathspec>=0.12.1",
  "pydantic>=2.12.5",
  "rich>=14.2.0",
  "tabulate==0.9.0",
  "yamllint==1.37.1",
  "httpx==0.28.1",
  "defusedxml==0.7.1",
  "ruff>=0.14.10",
  "black>=25.12.0",
  "bandit>=1.9.2",
  "mypy>=1.19.1",
  "pydoclint>=0.8.3",
]
authors = [{ name = "lgtm-hq", email = "turbocoder13@gmail.com" }]

[project.license]
file = "LICENSE"

[project.readme]
file = "README.md"
content-type = "text/markdown"

[project.optional-dependencies]
dev = [
  "pytest==9.0.2",
  "pytest-cov==7.0.0",
  "pytest-mock==3.15.1",
  "pytest-xdist==3.8.0",
  "pytest-sugar==1.1.1",
  "tox==4.34.1",
  "allure-pytest==2.15.3",
  "ruff",
  "mypy",
  "coverage-badge==1.1.2",
  "python-semantic-release==10.5.3",
  "assertpy==1.1",
  "httpx==0.28.1",
]
test = [
  "pytest==9.0.2",
  "pytest-cov==7.0.0",
  "pytest-mock==3.15.1",
  "pytest-xdist==3.8.0",
  "assertpy==1.1",
]
typing = ["types-setuptools==80.9.0.20251223", "types-tabulate==0.9.0.20241207"]
tools = ["semgrep>=1.85.0", "sqlfluff>=4.0.0"]

[project.scripts]
lintro = "lintro.cli:main"

[project.urls]
Homepage = "https://github.com/lgtm-hq/py-lintro"
Documentation = "https://github.com/lgtm-hq/py-lintro/docs"
Source = "https://github.com/lgtm-hq/py-lintro"

[project.entry-points."lintro.plugins"]

[dependency-groups]
dev = [
  "build==1.4.0",
  "pytest==9.0.2",
  "pytest-cov==7.0.0",
  "pytest-xdist==3.8.0",
  "twine==6.2.0",
  "assertpy==1.1",
  "pytest-mock==3.15.1",
  "bandit==1.9.2",
  "black==25.12.0",
  "ruff==0.14.10",
  "yamllint==1.37.1",
  "pytest-timeout==2.4.0",
  "mypy==1.19.1",
  "types-PyYAML>=6.0.12.20250915",
  "types-tabulate==0.9.0.20241207",
  "types-defusedxml>=0.7.0.20250822",
  "pip-audit>=2.9.0",
  "tomlkit>=0.13.3",
]
build = ["nuitka>=2.8.9", "ordered-set>=4.1.0", "zstandard>=0.25.0"]

[tool.setuptools]
packages = [
  "lintro",
  "lintro.cli_utils",
  "lintro.cli_utils.commands",
  "lintro.config",
  "lintro.enums",
  "lintro.exceptions",
  "lintro.formatters",
  "lintro.formatters.core",
  "lintro.formatters.styles",
  "lintro.models",
  "lintro.models.core",
  "lintro.parsers",
  "lintro.parsers.actionlint",
  "lintro.parsers.bandit",
  "lintro.parsers.black",
  "lintro.parsers.cargo_audit",
  "lintro.parsers.clippy",
  "lintro.parsers.gitleaks",
  "lintro.parsers.hadolint",
  "lintro.parsers.markdownlint",
  "lintro.parsers.pytest",
  "lintro.parsers.ruff",
  "lintro.parsers.rustfmt",
  "lintro.parsers.semgrep",
  "lintro.parsers.yamllint",
  "lintro.parsers.mypy",
  "lintro.parsers.oxfmt",
  "lintro.parsers.oxlint",
  "lintro.parsers.prettier",
  "lintro.parsers.shellcheck",
  "lintro.parsers.shfmt",
  "lintro.parsers.sqlfluff",
  "lintro.parsers.taplo",
  "lintro.parsers.pydoclint",
  "lintro.parsers.tsc",
  "lintro.plugins",
  "lintro.tools",
  "lintro.tools.core",
  "lintro.tools.definitions",
  "lintro.tools.implementations",
  "lintro.tools.implementations.pytest",
  "lintro.tools.implementations.ruff",
  "lintro.utils",
  "lintro.utils.console",
  "lintro.utils.execution",
  "lintro.utils.output",
]

[tool.semantic_release]
branch = "main"
version_variables = [
  "pyproject.toml:project.version",
  "lintro/__init__.py:__version__",
]
upload_to_release = false
build_command = ""
changelog_file = "CHANGELOG.md"
commit_parser = "angular"
tag_format = "v{version}"
major_on_zero = false

[tool.ruff]
line-length = 88
target-version = "py311"
unsafe-fixes = false
exclude = [
  ".venv",
  "venv",
  "env",
  "build",
  "dist",
  "__pycache__",
  "test_samples",
]

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
skip-magic-trailing-comma = false

[tool.ruff.lint]
select = ["E", "F", "W", "I", "COM", "N", "D", "DOC", "UP", "B", "C4", "SIM"]
ignore = []
preview = true
explicit-preview-rules = true

[tool.ruff.lint.per-file-ignores]
"tests/**/*.py" = ["E501", "SIM117", "SIM105"]
".lintro/**/*.py" = ["E501"]
"**/__init__.py" = ["D104"]
"test_samples/**/*.py" = ["ALL"]

[tool.ruff.lint.pydocstyle]
convention = "google"

[tool.black]
line-length = 88
target-version = ["py311", "py312", "py313"]
exclude = "/(\n    \\.git\n    | \\.venv\n    | venv\n    | build\n    | dist\n    | __pycache__\n    | test_samples\n    | node_modules\n)/\n"

[tool.bandit]
exclude_dirs = ["test_samples"]
skips = ["B101", "B404", "B603", "B607", "B108"]

[tool.lintro]
line_length = 88
tool_order = "priority"

[tool.lintro.post_checks]
enabled = true
tools = ["black"]
enforce_failure = true

[tool.lintro.ruff]

[tool.mypy]
python_version = "3.11"
strict = true
ignore_missing_imports = false
warn_unused_ignores = true
warn_unused_configs = true
explicit_package_bases = true
namespace_packages = true
exclude = [
  "^test_samples/",
  "^node_modules/",
  "^dist/",
  "^build/",
  "^\\.venv/",
  "^venv/",
  "^env/",
  "^__pycache__/",
  "^\\.lintro/",
]

[[tool.mypy.overrides]]
module = ["assertpy"]
ignore_missing_imports = true

[[tool.mypy.overrides]]
module = [
  "tests",
  "tests.*",
  "tests.unit",
  "tests.unit.*",
  "tests.utils",
  "tests.utils.*",
  "tests.scripts",
  "tests.scripts.*",
  "tests.integration",
  "tests.integration.*",
]
disallow_untyped_defs = false
disallow_untyped_calls = false
check_untyped_defs = true

[[tool.mypy.overrides]]
module = ["scripts", "scripts.*", "scripts.utils", "scripts.utils.*"]
disallow_untyped_defs = false
check_untyped_defs = true

[tool.uv]
constraint-dependencies = [
  # Security fix: TOCTOU vulnerability in directory creation (dependabot alert #4)
  "virtualenv>=20.36.1",
]

[tool.pydoclint]
style = "google"
arg-type-hints-in-docstring = false
arg-type-hints-in-signature = true
check-return-types = false
check-arg-order = true
skip-checking-short-docstrings = true
allow-init-docstring = true

[tool.pytest.ini_options]
testpaths = ["tests"]
python_files = "test_*.py"
python_classes = "Test*"
python_functions = "test_*"
