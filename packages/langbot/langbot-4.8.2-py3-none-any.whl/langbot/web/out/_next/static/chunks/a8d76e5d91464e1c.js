(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27301,e=>{e.v({homeLayoutContainer:"layout-module__H-M-ya__homeLayoutContainer",main:"layout-module__H-M-ya__main",mainContent:"layout-module__H-M-ya__mainContent",sidebar:"layout-module__H-M-ya__sidebar"})},98520,e=>{e.v({langbotIcon:"HomeSidebar-module__G73Z0G__langbotIcon",langbotIconContainer:"HomeSidebar-module__G73Z0G__langbotIconContainer",langbotText:"HomeSidebar-module__G73Z0G__langbotText",langbotTextContainer:"HomeSidebar-module__G73Z0G__langbotTextContainer",langbotVersion:"HomeSidebar-module__G73Z0G__langbotVersion",sidebarBottomChildContainer:"HomeSidebar-module__G73Z0G__sidebarBottomChildContainer",sidebarBottomContainer:"HomeSidebar-module__G73Z0G__sidebarBottomContainer",sidebarChildContainer:"HomeSidebar-module__G73Z0G__sidebarChildContainer",sidebarChildIcon:"HomeSidebar-module__G73Z0G__sidebarChildIcon",sidebarChildName:"HomeSidebar-module__G73Z0G__sidebarChildName",sidebarContainer:"HomeSidebar-module__G73Z0G__sidebarContainer",sidebarItemsContainer:"HomeSidebar-module__G73Z0G__sidebarItemsContainer",sidebarSelected:"HomeSidebar-module__G73Z0G__sidebarSelected",sidebarTopContainer:"HomeSidebar-module__G73Z0G__sidebarTopContainer",sidebarUnselected:"HomeSidebar-module__G73Z0G__sidebarUnselected"})},80913,e=>{e.v({helpLink:"HomeTittleBar-module__7UVHBq__helpLink",subtitleText:"HomeTittleBar-module__7UVHBq__subtitleText",titleBarContainer:"HomeTittleBar-module__7UVHBq__titleBarContainer",titleText:"HomeTittleBar-module__7UVHBq__titleText"})},15285,e=>{"use strict";var t=e.i(40320),s=e.i(27301),a=e.i(98520),l=e.i(98255);class n{id;icon;name;route;description;helpLink;constructor(e){this.id=e.id,this.icon=e.icon,this.name=e.name,this.route=e.route,this.description=e.description,this.helpLink=e.helpLink}}function o({icon:e,name:s,isSelected:l,onClick:n}){return(0,t.jsxs)("div",{className:`${a.default.sidebarChildContainer} ${l?a.default.sidebarSelected:a.default.sidebarUnselected}`,onClick:n,children:[(0,t.jsx)("div",{className:`${a.default.sidebarChildIcon}`,children:e}),(0,t.jsx)("span",{className:`${a.default.sidebarChildName}`,children:s})]})}var i=e.i(23658),r=e.i(2389);let d=[new n({id:"bots",name:r.default.t("bots.title"),icon:(0,t.jsx)("svg",{className:`${a.default.sidebarChildIcon}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M13.5 2C13.5 2.44425 13.3069 2.84339 13 3.11805V5H18C19.6569 5 21 6.34315 21 8V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V8C3 6.34315 4.34315 5 6 5H11V3.11805C10.6931 2.84339 10.5 2.44425 10.5 2C10.5 1.17157 11.1716 0.5 12 0.5C12.8284 0.5 13.5 1.17157 13.5 2ZM6 7C5.44772 7 5 7.44772 5 8V18C5 18.5523 5.44772 19 6 19H18C18.5523 19 19 18.5523 19 18V8C19 7.44772 18.5523 7 18 7H13H11H6ZM2 10H0V16H2V10ZM22 10H24V16H22V10ZM9 14.5C9.82843 14.5 10.5 13.8284 10.5 13C10.5 12.1716 9.82843 11.5 9 11.5C8.17157 11.5 7.5 12.1716 7.5 13C7.5 13.8284 8.17157 14.5 9 14.5ZM15 14.5C15.8284 14.5 16.5 13.8284 16.5 13C16.5 12.1716 15.8284 11.5 15 11.5C14.1716 11.5 13.5 12.1716 13.5 13C13.5 13.8284 14.1716 14.5 15 14.5Z"})}),route:"/home/bots",description:r.default.t("bots.description"),helpLink:{en_US:"https://docs.langbot.app/en/usage/platforms/readme.html",zh_Hans:"https://docs.langbot.app/zh/usage/platforms/readme.html",ja_JP:"https://docs.langbot.app/ja/usage/platforms/readme.html"}}),new n({id:"pipelines",name:r.default.t("pipelines.title"),icon:(0,t.jsx)("svg",{className:`${a.default.sidebarChildIcon}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M6 21.5C4.067 21.5 2.5 19.933 2.5 18C2.5 16.067 4.067 14.5 6 14.5C7.5852 14.5 8.92427 15.5539 9.35481 16.9992L15 16.9994V15L17 14.9994V9.24339L14.757 6.99938H9V9.00003H3V3.00003H9V4.99939H14.757L18 1.75739L22.2426 6.00003L19 9.24139V14.9994L21 15V21H15V18.9994L9.35499 19.0003C8.92464 20.4459 7.58543 21.5 6 21.5ZM6 16.5C5.17157 16.5 4.5 17.1716 4.5 18C4.5 18.8285 5.17157 19.5 6 19.5C6.82843 19.5 7.5 18.8285 7.5 18C7.5 17.1716 6.82843 16.5 6 16.5ZM19 17H17V19H19V17ZM18 4.58581L16.5858 6.00003L18 7.41424L19.4142 6.00003L18 4.58581ZM7 5.00003H5V7.00003H7V5.00003Z"})}),route:"/home/pipelines",description:r.default.t("pipelines.description"),helpLink:{en_US:"https://docs.langbot.app/en/usage/pipelines/readme.html",zh_Hans:"https://docs.langbot.app/zh/usage/pipelines/readme.html",ja_JP:"https://docs.langbot.app/ja/usage/pipelines/readme.html"}}),new n({id:"monitoring",name:r.default.t("monitoring.title"),icon:(0,t.jsx)("svg",{className:`${a.default.sidebarChildIcon}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM4 5V19H20V5H4ZM6 7H18V9H6V7ZM6 11H18V13H6V11ZM6 15H12V17H6V15Z"})}),route:"/home/monitoring",description:r.default.t("monitoring.description"),helpLink:{en_US:"https://docs.langbot.app/en/features/monitoring.html",zh_Hans:"https://docs.langbot.app/zh/features/monitoring.html"}}),new n({id:"knowledge",name:r.default.t("knowledge.title"),icon:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M3 18.5V5C3 3.34315 4.34315 2 6 2H20C20.5523 2 21 2.44772 21 3V21C21 21.5523 20.5523 22 20 22H6.5C4.567 22 3 20.433 3 18.5ZM19 20V17H6.5C5.67157 17 5 17.6716 5 18.5C5 19.3284 5.67157 20 6.5 20H19ZM10 4H6C5.44772 4 5 4.44772 5 5V15.3368C5.45463 15.1208 5.9632 15 6.5 15H19V4H17V12L13.5 10L10 12V4Z"})}),route:"/home/knowledge",description:r.default.t("knowledge.description"),helpLink:{en_US:"https://docs.langbot.app/en/usage/knowledge/readme.html",zh_Hans:"https://docs.langbot.app/zh/usage/knowledge/readme.html",ja_JP:"https://docs.langbot.app/ja/usage/knowledge/readme.html"}}),new n({id:"plugins",name:r.default.t("plugins.title"),icon:(0,t.jsx)("svg",{className:`${a.default.sidebarChildIcon}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M7 5C7 2.79086 8.79086 1 11 1C13.2091 1 15 2.79086 15 5H18C18.5523 5 19 5.44772 19 6V9C21.2091 9 23 10.7909 23 13C23 15.2091 21.2091 17 19 17V20C19 20.5523 18.5523 21 18 21H4C3.44772 21 3 20.5523 3 20V6C3 5.44772 3.44772 5 4 5H7ZM11 3C9.89543 3 9 3.89543 9 5C9 5.23554 9.0403 5.45952 9.11355 5.66675C9.22172 5.97282 9.17461 6.31235 8.98718 6.57739C8.79974 6.84243 8.49532 7 8.17071 7H5V19H17V15.8293C17 15.5047 17.1576 15.2003 17.4226 15.0128C17.6877 14.8254 18.0272 14.7783 18.3332 14.8865C18.5405 14.9597 18.7645 15 19 15C20.1046 15 21 14.1046 21 13C21 11.8954 20.1046 11 19 11C18.7645 11 18.5405 11.0403 18.3332 11.1135C18.0272 11.2217 17.6877 11.1746 17.4226 10.9872C17.1576 10.7997 17 10.4953 17 10.1707V7H13.8293C13.5047 7 13.2003 6.84243 13.0128 6.57739C12.8254 6.31235 12.7783 5.97282 12.8865 5.66675C12.9597 5.45952 13 5.23555 13 5C13 3.89543 12.1046 3 11 3Z"})}),route:"/home/plugins",description:r.default.t("plugins.description"),helpLink:{en_US:"https://docs.langbot.app/en/usage/plugin/plugin-intro.html",zh_Hans:"https://docs.langbot.app/zh/usage/plugin/plugin-intro.html",ja_JP:"https://docs.langbot.app/ja/usage/plugin/plugin-intro.html"}})];var c=e.i(12982);e.i(37773);var m=e.i(98475),u=e.i(28924);e.i(94145);var h=e.i(44737),x=e.i(11877),p=e.i(74433),g=e.i(73614),j=e.i(39205);let f=(0,j.default)("circle-help",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),v=(0,j.default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),b=(0,j.default)("log-out",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),C=(0,j.default)("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);var w=e.i(32338),y=e.i(37822),N=e.i(19455),k=e.i(13547),S=e.i(87486),_=e.i(11939),M=e.i(76639),P=e.i(92024),L=e.i(94237),T=e.i(75157);e.i(72436);let H=(0,L.cva)("group/item flex items-center border border-transparent text-sm rounded-md transition-colors [a]:hover:bg-accent/50 [a]:transition-colors duration-100 flex-wrap outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",{variants:{variant:{default:"bg-transparent",outline:"border-border",muted:"bg-muted/50"},size:{default:"p-4 gap-4 ",sm:"py-3 px-4 gap-2.5"}},defaultVariants:{variant:"default",size:"default"}});function D({className:e,variant:s="default",size:a="default",asChild:l=!1,...n}){let o=l?P.Slot:"div";return(0,t.jsx)(o,{"data-slot":"item","data-variant":s,"data-size":a,className:(0,T.cn)(H({variant:s,size:a,className:e})),...n})}let z=(0,L.cva)("flex shrink-0 items-center justify-center gap-2 group-has-[[data-slot=item-description]]/item:self-start [&_svg]:pointer-events-none group-has-[[data-slot=item-description]]/item:translate-y-0.5",{variants:{variant:{default:"bg-transparent",icon:"size-8 border rounded-sm bg-muted [&_svg:not([class*='size-'])]:size-4",image:"size-10 rounded-sm overflow-hidden [&_img]:size-full [&_img]:object-cover"}},defaultVariants:{variant:"default"}});function I({className:e,variant:s="default",...a}){return(0,t.jsx)("div",{"data-slot":"item-media","data-variant":s,className:(0,T.cn)(z({variant:s,className:e})),...a})}function B({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"item-content",className:(0,T.cn)("flex flex-1 flex-col gap-1 [&+[data-slot=item-content]]:flex-none",e),...s})}function F({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"item-title",className:(0,T.cn)("flex w-fit items-center gap-2 text-sm leading-snug font-medium",e),...s})}function R({className:e,...s}){return(0,t.jsx)("p",{"data-slot":"item-description",className:(0,T.cn)("text-muted-foreground line-clamp-2 text-sm leading-normal font-normal text-balance","[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4",e),...s})}function V({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"item-actions",className:(0,T.cn)("flex items-center gap-2",e),...s})}var $=e.i(99894),E=e.i(96878),O=e.i(11472),A=e.i(37683),Z=e.i(32356),U=e.i(3133),q=e.i(93479);function G({open:e,onOpenChange:s,hasPassword:a=!0}){let{t:n}=(0,h.useTranslation)(),[o,i]=(0,l.useState)(!1),r=Z.z.object({currentPassword:a?Z.z.string().min(1,{message:n("common.currentPasswordRequired")}):Z.z.string().optional(),newPassword:Z.z.string().min(1,{message:n("common.newPasswordRequired")}),confirmNewPassword:Z.z.string().min(1,{message:n("common.confirmPasswordRequired")})}).refine(e=>e.newPassword===e.confirmNewPassword,{message:n("common.passwordsDoNotMatch"),path:["confirmNewPassword"]}),d=(0,O.useForm)({resolver:(0,A.zodResolver)(r),defaultValues:{currentPassword:"",newPassword:"",confirmNewPassword:""}});(0,l.useEffect)(()=>{e&&d.reset({currentPassword:"",newPassword:"",confirmNewPassword:""})},[e,a,d]);let c=async e=>{i(!0);try{a?(await u.httpClient.changePassword(e.currentPassword,e.newPassword),_.toast.success(n("common.changePasswordSuccess"))):(await u.httpClient.setPassword(e.newPassword,void 0),_.toast.success(n("account.passwordSetSuccess"))),d.reset(),s(!1)}catch{_.toast.error(n("common.changePasswordFailed"))}finally{i(!1)}};return(0,t.jsx)(M.Dialog,{open:e,onOpenChange:s,children:(0,t.jsxs)(M.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsx)(M.DialogHeader,{children:(0,t.jsx)(M.DialogTitle,{children:a?n("common.changePassword"):n("account.setPassword")})}),(0,t.jsx)(U.Form,{...d,children:(0,t.jsxs)("form",{onSubmit:d.handleSubmit(c),className:"space-y-4",children:[a&&(0,t.jsx)(U.FormField,{control:d.control,name:"currentPassword",render:({field:e})=>(0,t.jsxs)(U.FormItem,{children:[(0,t.jsx)(U.FormLabel,{children:n("common.currentPassword")}),(0,t.jsx)(U.FormControl,{children:(0,t.jsx)(q.Input,{type:"password",placeholder:n("common.enterCurrentPassword"),...e})}),(0,t.jsx)(U.FormMessage,{})]})}),(0,t.jsx)(U.FormField,{control:d.control,name:"newPassword",render:({field:e})=>(0,t.jsxs)(U.FormItem,{children:[(0,t.jsx)(U.FormLabel,{children:n("common.newPassword")}),(0,t.jsx)(U.FormControl,{children:(0,t.jsx)(q.Input,{type:"password",placeholder:n("common.enterNewPassword"),...e})}),(0,t.jsx)(U.FormMessage,{})]})}),(0,t.jsx)(U.FormField,{control:d.control,name:"confirmNewPassword",render:({field:e})=>(0,t.jsxs)(U.FormItem,{children:[(0,t.jsx)(U.FormLabel,{children:n("common.confirmNewPassword")}),(0,t.jsx)(U.FormControl,{children:(0,t.jsx)(q.Input,{type:"password",placeholder:n("common.enterConfirmPassword"),...e})}),(0,t.jsx)(U.FormMessage,{})]})}),(0,t.jsxs)(M.DialogFooter,{children:[(0,t.jsx)(N.Button,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:o,children:n("common.cancel")}),(0,t.jsx)(N.Button,{type:"submit",disabled:o,children:o?n("common.saving"):n("common.save")})]})]})})]})})}function K({open:e,onOpenChange:s}){let{t:a}=(0,h.useTranslation)(),[n,o]=(0,l.useState)("local"),[i,r]=(0,l.useState)(!1),[d,c]=(0,l.useState)(""),[x,p]=(0,l.useState)(!0),[g,j]=(0,l.useState)(!1),[f,v]=(0,l.useState)(!1);async function b(){p(!0);try{let e=await u.httpClient.getUserInfo();o(e.account_type),r(e.has_password),c(e.user)}catch{_.toast.error(a("common.error"))}finally{p(!1)}}(0,l.useEffect)(()=>{e&&b()},[e]);let w=async()=>{j(!0);try{let e=localStorage.getItem("token");if(!e){_.toast.error(a("common.error")),j(!1);return}let t=window.location.origin,s=`${t}/auth/space/callback?mode=bind`,l=await u.httpClient.getSpaceAuthorizeUrl(s,e);window.location.href=l.authorize_url}catch{_.toast.error(a("common.spaceLoginFailed")),j(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.Dialog,{open:e,onOpenChange:s,children:(0,t.jsxs)(M.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(M.DialogHeader,{children:[(0,t.jsx)(M.DialogTitle,{children:a("account.settings")}),(0,t.jsx)(M.DialogDescription,{children:d})]}),x?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)($.Loader2,{className:"h-6 w-6 animate-spin"})}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(D,{size:"sm",variant:"muted",className:"rounded-lg",children:[(0,t.jsx)(I,{variant:"icon",children:(0,t.jsx)(C,{className:"h-4 w-4"})}),(0,t.jsxs)(B,{children:[(0,t.jsx)(F,{children:a("account.passwordStatus")}),(0,t.jsx)(R,{children:i?a("account.passwordSetDescription"):a("account.setPasswordHint")})]}),(0,t.jsx)(V,{children:(0,t.jsx)(N.Button,{variant:"outline",size:"sm",onClick:()=>v(!0),disabled:!m.systemInfo.allow_modify_login_info,children:i?a("common.changePassword"):a("account.setPassword")})})]}),(0,t.jsxs)(D,{size:"sm",variant:"muted",className:"rounded-lg",children:[(0,t.jsx)(I,{variant:"icon",children:(0,t.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M2 17L12 22L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M2 12L12 17L22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,t.jsxs)(B,{children:[(0,t.jsx)(F,{children:a("account.spaceStatus")}),(0,t.jsx)(R,{children:"space"===n?a("account.spaceBoundDescription"):a("account.bindSpaceDescription")})]}),"local"===n&&(0,t.jsx)(V,{children:(0,t.jsxs)(N.Button,{variant:"outline",size:"sm",onClick:w,disabled:g||!m.systemInfo.allow_modify_login_info,children:[g?(0,t.jsx)($.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(E.ExternalLink,{className:"mr-2 h-4 w-4"}),a("account.bindSpaceButton")]})})]})]})]})}),(0,t.jsx)(G,{open:f,onOpenChange:e=>{v(e),e||b()},hasPassword:i})]})}var W=e.i(38929),J=e.i(59874);let X=(0,j.default)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var Y=e.i(38487),Q=e.i(77572),ee=e.i(99375),et=e.i(84774),es=e.i(94185),ea=e.i(89268),el=e.i(82406),en=e.i(91967),eo=e.i(68018),ei="AlertDialog",[er,ed]=(0,es.createContextScope)(ei,[el.createDialogScope]),ec=(0,el.createDialogScope)(),em=e=>{let{__scopeAlertDialog:s,...a}=e,l=ec(s);return(0,t.jsx)(el.Root,{...l,...a,modal:!0})};em.displayName=ei,l.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...l}=e,n=ec(a);return(0,t.jsx)(el.Trigger,{...n,...l,ref:s})}).displayName="AlertDialogTrigger";var eu=e=>{let{__scopeAlertDialog:s,...a}=e,l=ec(s);return(0,t.jsx)(el.Portal,{...l,...a})};eu.displayName="AlertDialogPortal";var eh=l.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...l}=e,n=ec(a);return(0,t.jsx)(el.Overlay,{...n,...l,ref:s})});eh.displayName="AlertDialogOverlay";var ex="AlertDialogContent",[ep,eg]=er(ex),ej=(0,eo.createSlottable)("AlertDialogContent"),ef=l.forwardRef((e,s)=>{let{__scopeAlertDialog:a,children:n,...o}=e,i=ec(a),r=l.useRef(null),d=(0,ea.useComposedRefs)(s,r),c=l.useRef(null);return(0,t.jsx)(el.WarningProvider,{contentName:ex,titleName:ev,docsSlug:"alert-dialog",children:(0,t.jsx)(ep,{scope:a,cancelRef:c,children:(0,t.jsxs)(el.Content,{role:"alertdialog",...i,...o,ref:d,onOpenAutoFocus:(0,en.composeEventHandlers)(o.onOpenAutoFocus,e=>{e.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(ej,{children:n}),(0,t.jsx)(eS,{contentRef:r})]})})})});ef.displayName=ex;var ev="AlertDialogTitle",eb=l.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...l}=e,n=ec(a);return(0,t.jsx)(el.Title,{...n,...l,ref:s})});eb.displayName=ev;var eC="AlertDialogDescription",ew=l.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...l}=e,n=ec(a);return(0,t.jsx)(el.Description,{...n,...l,ref:s})});ew.displayName=eC;var ey=l.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...l}=e,n=ec(a);return(0,t.jsx)(el.Close,{...n,...l,ref:s})});ey.displayName="AlertDialogAction";var eN="AlertDialogCancel",ek=l.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...l}=e,{cancelRef:n}=eg(eN,a),o=ec(a),i=(0,ea.useComposedRefs)(s,n);return(0,t.jsx)(el.Close,{...o,...l,ref:i})});ek.displayName=eN;var eS=({contentRef:e})=>{let t=`\`${ex}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ex}\` by passing a \`${eC}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ex}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null};let e_=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(eh,{className:(0,T.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:a}));e_.displayName=eh.displayName,l.forwardRef(({className:e,...s},a)=>(0,t.jsxs)(eu,{children:[(0,t.jsx)(e_,{}),(0,t.jsx)(ef,{ref:a,className:(0,T.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s})]})).displayName=ef.displayName;let eM=({className:e,...s})=>(0,t.jsx)("div",{className:(0,T.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...s});eM.displayName="AlertDialogHeader";let eP=({className:e,...s})=>(0,t.jsx)("div",{className:(0,T.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});eP.displayName="AlertDialogFooter";let eL=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(eb,{ref:a,className:(0,T.cn)("text-lg font-semibold",e),...s}));eL.displayName=eb.displayName;let eT=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(ew,{ref:a,className:(0,T.cn)("text-sm text-muted-foreground",e),...s}));eT.displayName=ew.displayName;let eH=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(ey,{ref:a,className:(0,T.cn)((0,N.buttonVariants)(),e),...s}));eH.displayName=ey.displayName;let eD=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(ek,{ref:a,className:(0,T.cn)((0,N.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",e),...s}));function ez({open:e,onOpenChange:s}){let{t:a}=(0,h.useTranslation)(),n=(0,i.useRouter)(),o=(0,i.usePathname)(),r=(0,i.useSearchParams)(),[d,c]=(0,l.useState)("apikeys"),[u,x]=(0,l.useState)([]),[p,g]=(0,l.useState)([]),[j,f]=(0,l.useState)(!1),[v,b]=(0,l.useState)(!1),[C,w]=(0,l.useState)(""),[y,k]=(0,l.useState)(""),[S,P]=(0,l.useState)(null),[L,T]=(0,l.useState)(null),[H,D]=(0,l.useState)(!1),[z,I]=(0,l.useState)(""),[B,F]=(0,l.useState)(""),[R,V]=(0,l.useState)(""),[$,E]=(0,l.useState)(!0),[O,A]=(0,l.useState)(null),[Z,U]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(e){let e=new URLSearchParams(r.toString());e.set("action","showApiIntegrationSettings"),n.replace(`${o}?${e.toString()}`,{scroll:!1})}},[e]),(0,l.useEffect)(()=>{if(!L&&!O){let e=()=>{document.body.style.removeProperty("pointer-events")};e();let t=setTimeout(e,100);return()=>clearTimeout(t)}},[L,O]),(0,l.useEffect)(()=>{e&&(G(),el())},[e]);let G=async()=>{f(!0);try{let e=await m.backendClient.get("/api/v1/apikeys");x(e.keys||[])}catch(e){_.toast.error(`Failed to load API keys: ${e}`)}finally{f(!1)}},K=async()=>{if(!C.trim())return void _.toast.error(a("common.apiKeyNameRequired"));try{let e=await m.backendClient.post("/api/v1/apikeys",{name:C,description:y});P(e.key),_.toast.success(a("common.apiKeyCreated")),w(""),k(""),b(!1),G()}catch(e){_.toast.error(`Failed to create API key: ${e}`)}},es=async e=>{try{await m.backendClient.delete(`/api/v1/apikeys/${e}`),_.toast.success(a("common.apiKeyDeleted")),G(),T(null)}catch(e){_.toast.error(`Failed to delete API key: ${e}`)}},ea=e=>{navigator.clipboard.writeText(e),U(e),setTimeout(()=>U(null),2e3)},el=async()=>{f(!0);try{let e=await m.backendClient.get("/api/v1/webhooks");g(e.webhooks||[])}catch(e){_.toast.error(`Failed to load webhooks: ${e}`)}finally{f(!1)}},en=async()=>{if(!z.trim())return void _.toast.error(a("common.webhookNameRequired"));if(!B.trim())return void _.toast.error(a("common.webhookUrlRequired"));try{await m.backendClient.post("/api/v1/webhooks",{name:z,url:B,description:R,enabled:$}),_.toast.success(a("common.webhookCreated")),I(""),F(""),V(""),E(!0),D(!1),el()}catch(e){_.toast.error(`Failed to create webhook: ${e}`)}},eo=async e=>{try{await m.backendClient.delete(`/api/v1/webhooks/${e}`),_.toast.success(a("common.webhookDeleted")),el(),A(null)}catch(e){_.toast.error(`Failed to delete webhook: ${e}`)}},ei=async e=>{try{await m.backendClient.put(`/api/v1/webhooks/${e.id}`,{enabled:!e.enabled}),el()}catch(e){_.toast.error(`Failed to update webhook: ${e}`)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.Dialog,{open:e,onOpenChange:e=>{if(e||!L&&!O){if(!e){let e=new URLSearchParams(r.toString());e.delete("action");let t=e.toString()?`${o}?${e.toString()}`:o;n.replace(t,{scroll:!1})}s(e)}},children:(0,t.jsxs)(M.DialogContent,{className:"sm:max-w-[800px] h-[26rem] flex flex-col",children:[(0,t.jsx)(M.DialogHeader,{children:(0,t.jsx)(M.DialogTitle,{children:a("common.manageApiIntegration")})}),(0,t.jsxs)(Q.Tabs,{value:d,onValueChange:c,className:"w-full flex-1 flex flex-col overflow-hidden",children:[(0,t.jsxs)(Q.TabsList,{className:"shadow-md py-3 bg-[#f0f0f0] dark:bg-[#2a2a2e]",children:[(0,t.jsx)(Q.TabsTrigger,{className:"px-5 py-4 cursor-pointer",value:"apikeys",children:a("common.apiKeys")}),(0,t.jsx)(Q.TabsTrigger,{className:"px-5 py-4 cursor-pointer",value:"webhooks",children:a("common.webhooks")})]}),(0,t.jsxs)(Q.TabsContent,{value:"apikeys",className:"space-y-4 flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)("div",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:a("common.apiKeyHint")}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(N.Button,{onClick:()=>b(!0),size:"sm",className:"gap-2",children:[(0,t.jsx)(Y.Plus,{className:"h-4 w-4"}),a("common.createApiKey")]})}),j?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:a("common.loading")}):0===u.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:a("common.noApiKeys")}):(0,t.jsx)("div",{className:"border rounded-md overflow-auto flex-1",children:(0,t.jsxs)(et.Table,{children:[(0,t.jsx)(et.TableHeader,{children:(0,t.jsxs)(et.TableRow,{children:[(0,t.jsx)(et.TableHead,{className:"min-w-[120px]",children:a("common.name")}),(0,t.jsx)(et.TableHead,{className:"min-w-[200px]",children:a("common.apiKeyValue")}),(0,t.jsx)(et.TableHead,{className:"w-[100px]",children:a("common.actions")})]})}),(0,t.jsx)(et.TableBody,{children:u.map(e=>{var s;return(0,t.jsxs)(et.TableRow,{children:[(0,t.jsx)(et.TableCell,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),e.description&&(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.description})]})}),(0,t.jsx)(et.TableCell,{children:(0,t.jsx)("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:(s=e.key).length<=8?s:`${s.substring(0,8)}...${s.substring(s.length-4)}`})}),(0,t.jsx)(et.TableCell,{children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(N.Button,{variant:"ghost",size:"sm",onClick:()=>ea(e.key),title:a("common.copyApiKey"),children:Z===e.key?(0,t.jsx)(J.Check,{className:"h-4 w-4 text-green-600"}):(0,t.jsx)(W.Copy,{className:"h-4 w-4"})}),(0,t.jsx)(N.Button,{variant:"ghost",size:"sm",onClick:()=>T(e.id),title:a("common.delete"),children:(0,t.jsx)(X,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]}),(0,t.jsxs)(Q.TabsContent,{value:"webhooks",className:"space-y-4 flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)("div",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:a("common.webhookHint")}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(N.Button,{onClick:()=>D(!0),size:"sm",className:"gap-2",children:[(0,t.jsx)(Y.Plus,{className:"h-4 w-4"}),a("common.createWebhook")]})}),j?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:a("common.loading")}):0===p.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:a("common.noWebhooks")}):(0,t.jsx)("div",{className:"border rounded-md overflow-auto flex-1 max-w-full",children:(0,t.jsxs)(et.Table,{className:"table-fixed w-full",children:[(0,t.jsx)(et.TableHeader,{children:(0,t.jsxs)(et.TableRow,{children:[(0,t.jsx)(et.TableHead,{className:"w-[150px]",children:a("common.name")}),(0,t.jsx)(et.TableHead,{className:"w-[380px]",children:a("common.webhookUrl")}),(0,t.jsx)(et.TableHead,{className:"w-[80px]",children:a("common.webhookEnabled")}),(0,t.jsx)(et.TableHead,{className:"w-[80px]",children:a("common.actions")})]})}),(0,t.jsx)(et.TableBody,{children:p.map(e=>(0,t.jsxs)(et.TableRow,{children:[(0,t.jsx)(et.TableCell,{className:"truncate",children:(0,t.jsxs)("div",{className:"truncate",children:[(0,t.jsx)("div",{className:"font-medium truncate",title:e.name,children:e.name}),e.description&&(0,t.jsx)("div",{className:"text-sm text-muted-foreground truncate",title:e.description,children:e.description})]})}),(0,t.jsx)(et.TableCell,{children:(0,t.jsx)("div",{className:"overflow-x-auto max-w-[380px]",children:(0,t.jsx)("code",{className:"text-sm bg-muted px-2 py-1 rounded whitespace-nowrap inline-block",children:e.url})})}),(0,t.jsx)(et.TableCell,{children:(0,t.jsx)(ee.Switch,{checked:e.enabled,onCheckedChange:()=>ei(e)})}),(0,t.jsx)(et.TableCell,{children:(0,t.jsx)(N.Button,{variant:"ghost",size:"sm",onClick:()=>A(e.id),title:a("common.delete"),children:(0,t.jsx)(X,{className:"h-4 w-4"})})})]},e.id))})]})})]})]}),(0,t.jsx)(M.DialogFooter,{children:(0,t.jsx)(N.Button,{variant:"outline",onClick:()=>s(!1),children:a("common.close")})})]})}),(0,t.jsx)(M.Dialog,{open:v,onOpenChange:b,children:(0,t.jsxs)(M.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsx)(M.DialogHeader,{children:(0,t.jsx)(M.DialogTitle,{children:a("common.createApiKey")})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:a("common.name")}),(0,t.jsx)(q.Input,{value:C,onChange:e=>w(e.target.value),placeholder:a("common.name"),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:a("common.description")}),(0,t.jsx)(q.Input,{value:y,onChange:e=>k(e.target.value),placeholder:a("common.description"),className:"mt-1"})]})]}),(0,t.jsxs)(M.DialogFooter,{children:[(0,t.jsx)(N.Button,{variant:"outline",onClick:()=>b(!1),children:a("common.cancel")}),(0,t.jsx)(N.Button,{onClick:K,children:a("common.create")})]})]})}),(0,t.jsx)(M.Dialog,{open:!!S,onOpenChange:()=>P(null),children:(0,t.jsxs)(M.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(M.DialogHeader,{children:[(0,t.jsx)(M.DialogTitle,{children:a("common.apiKeyCreated")}),(0,t.jsx)(M.DialogDescription,{children:a("common.apiKeyCreatedMessage")})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:a("common.apiKeyValue")}),(0,t.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,t.jsx)(q.Input,{value:S?.key||"",readOnly:!0}),(0,t.jsx)(N.Button,{onClick:()=>S&&ea(S.key),variant:"outline",size:"icon",children:Z===S?.key?(0,t.jsx)(J.Check,{className:"h-4 w-4 text-green-600"}):(0,t.jsx)(W.Copy,{className:"h-4 w-4"})})]})]})}),(0,t.jsx)(M.DialogFooter,{children:(0,t.jsx)(N.Button,{onClick:()=>P(null),children:a("common.close")})})]})}),(0,t.jsx)(M.Dialog,{open:H,onOpenChange:D,children:(0,t.jsxs)(M.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsx)(M.DialogHeader,{children:(0,t.jsx)(M.DialogTitle,{children:a("common.createWebhook")})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:a("common.name")}),(0,t.jsx)(q.Input,{value:z,onChange:e=>I(e.target.value),placeholder:a("common.webhookName"),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:a("common.webhookUrl")}),(0,t.jsx)(q.Input,{value:B,onChange:e=>F(e.target.value),placeholder:"https://example.com/webhook",className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:a("common.description")}),(0,t.jsx)(q.Input,{value:R,onChange:e=>V(e.target.value),placeholder:a("common.description"),className:"mt-1"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ee.Switch,{checked:$,onCheckedChange:E}),(0,t.jsx)("label",{className:"text-sm font-medium",children:a("common.webhookEnabled")})]})]}),(0,t.jsxs)(M.DialogFooter,{children:[(0,t.jsx)(N.Button,{variant:"outline",onClick:()=>D(!1),children:a("common.cancel")}),(0,t.jsx)(N.Button,{onClick:en,children:a("common.create")})]})]})}),(0,t.jsx)(M.Dialog,{open:!!S,onOpenChange:()=>P(null),children:(0,t.jsxs)(M.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(M.DialogHeader,{children:[(0,t.jsx)(M.DialogTitle,{children:a("common.apiKeyCreated")}),(0,t.jsx)(M.DialogDescription,{children:a("common.apiKeyCreatedMessage")})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:a("common.apiKeyValue")}),(0,t.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,t.jsx)(q.Input,{value:S?.key||"",readOnly:!0}),(0,t.jsx)(N.Button,{onClick:()=>S&&ea(S.key),variant:"outline",size:"icon",children:Z===S?.key?(0,t.jsx)(J.Check,{className:"h-4 w-4 text-green-600"}):(0,t.jsx)(W.Copy,{className:"h-4 w-4"})})]})]})}),(0,t.jsx)(M.DialogFooter,{children:(0,t.jsx)(N.Button,{onClick:()=>P(null),children:a("common.close")})})]})}),(0,t.jsx)(em,{open:!!L,children:(0,t.jsxs)(eu,{children:[(0,t.jsx)(e_,{className:"z-[60]",onClick:()=>T(null)}),(0,t.jsxs)(ef,{className:"fixed left-[50%] top-[50%] z-[60] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 sm:rounded-lg",onEscapeKeyDown:()=>T(null),children:[(0,t.jsxs)(eM,{children:[(0,t.jsx)(eL,{children:a("common.confirmDelete")}),(0,t.jsx)(eT,{children:a("common.apiKeyDeleteConfirm")})]}),(0,t.jsxs)(eP,{children:[(0,t.jsx)(eD,{onClick:()=>T(null),children:a("common.cancel")}),(0,t.jsx)(eH,{onClick:()=>L&&es(L),children:a("common.delete")})]})]})]})}),(0,t.jsx)(em,{open:!!O,children:(0,t.jsxs)(eu,{children:[(0,t.jsx)(e_,{className:"z-[60]",onClick:()=>A(null)}),(0,t.jsxs)(ef,{className:"fixed left-[50%] top-[50%] z-[60] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 sm:rounded-lg",onEscapeKeyDown:()=>A(null),children:[(0,t.jsxs)(eM,{children:[(0,t.jsx)(eL,{children:a("common.confirmDelete")}),(0,t.jsx)(eT,{children:a("common.webhookDeleteConfirm")})]}),(0,t.jsxs)(eP,{children:[(0,t.jsx)(eD,{onClick:()=>A(null),children:a("common.cancel")}),(0,t.jsx)(eH,{onClick:()=>O&&eo(O),children:a("common.delete")})]})]})]})})]})}eD.displayName=ek.displayName;var eI=e.i(4986),eB=e.i(12878),eF=e.i(71345),eR=e.i(88168),eV=e.i(9925);function e$({open:e,onOpenChange:s,release:a}){let{t:l}=(0,h.useTranslation)();return a?(0,t.jsx)(M.Dialog,{open:e,onOpenChange:s,children:(0,t.jsxs)(M.DialogContent,{className:"sm:max-w-[600px] max-h-[80vh] flex flex-col",children:[(0,t.jsx)(M.DialogHeader,{className:"flex-shrink-0",children:(0,t.jsxs)(M.DialogTitle,{className:"flex items-center gap-2",children:[l("version.newVersionAvailable"),(0,t.jsx)("span",{className:"text-primary font-mono",children:a.tag_name})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto min-h-0 pr-2",children:(0,t.jsx)("div",{className:"markdown-body max-w-none text-sm",children:(0,t.jsx)(eI.default,{remarkPlugins:[eB.default],rehypePlugins:[eF.default,eR.default],components:{ul:({children:e})=>(0,t.jsx)("ul",{className:"list-disc",children:e}),ol:({children:e})=>(0,t.jsx)("ol",{className:"list-decimal",children:e}),li:({children:e})=>(0,t.jsx)("li",{className:"ml-4",children:e}),a:({href:e,children:s})=>(0,t.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:s})},children:a.body||l("version.noReleaseNotes")})})}),(0,t.jsxs)(M.DialogFooter,{className:"flex-shrink-0 flex flex-col sm:flex-row gap-2 pt-2",children:[(0,t.jsx)(N.Button,{variant:"outline",onClick:()=>s(!1),className:"w-full sm:w-auto",children:l("common.close")}),(0,t.jsxs)(N.Button,{onClick:()=>{let e;window.open("zh-Hans"===(e=eV.default.language)||"zh-Hant"===e?"https://docs.langbot.app/zh/deploy/update.html":"ja-JP"===e?"https://docs.langbot.app/ja/deploy/update.html":"https://docs.langbot.app/en/deploy/update.html","_blank")},className:"w-full sm:w-auto flex items-center gap-2",children:[l("version.viewUpdateGuide"),(0,t.jsx)(E.ExternalLink,{className:"w-4 h-4"})]})]})]})}):null}let eE=(0,j.default)("boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);var eO=e.i(67489),eA=e.i(19159);function eZ({providerId:e,onFormSubmit:s,onFormCancel:a}){let{t:n}=(0,h.useTranslation)(),o=Z.z.object({name:Z.z.string().min(1,{message:n("models.providerNameRequired")}),requester:Z.z.string().min(1,{message:n("models.requesterRequired")}),base_url:Z.z.string(),api_key:Z.z.string().optional()}),i=(0,O.useForm)({resolver:(0,A.zodResolver)(o),defaultValues:{name:"",requester:"",base_url:"",api_key:""}}),[r,d]=(0,l.useState)([]);async function c(){d((await u.httpClient.getProviderRequesters()).requesters.filter(e=>"space-chat-completions"!==e.name).map(e=>({label:(0,eA.extractI18nObject)(e.label),value:e.name,category:e.spec.provider_category||"manufacturer",defaultUrl:e.spec.config.find(e=>"base_url"===e.name)?.default?.toString()||"",description:(0,eA.extractI18nObject)(e.description)})))}async function m(e){let t=(await u.httpClient.getModelProvider(e)).provider;i.setValue("name",t.name),i.setValue("requester",t.requester),i.setValue("base_url",t.base_url),i.setValue("api_key",t.api_keys?.[0]||"")}async function x(t){let a={name:t.name,requester:t.requester,base_url:t.base_url,api_keys:t.api_key?[t.api_key]:[]};try{e?(await u.httpClient.updateModelProvider(e,a),_.toast.success(n("models.providerSaved"))):(await u.httpClient.createModelProvider(a),_.toast.success(n("models.providerCreated"))),s()}catch(e){_.toast.error(n("models.providerSaveError")+e.msg)}}return(0,l.useEffect)(()=>{c(),e&&m(e)},[e]),(0,t.jsx)(U.Form,{...i,children:(0,t.jsxs)("form",{onSubmit:i.handleSubmit(x),className:"space-y-4",children:[(0,t.jsx)(U.FormField,{control:i.control,name:"name",render:({field:e})=>(0,t.jsxs)(U.FormItem,{children:[(0,t.jsxs)(U.FormLabel,{children:[n("models.providerName"),(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(U.FormControl,{children:(0,t.jsx)(q.Input,{...e})}),(0,t.jsx)(U.FormMessage,{})]})}),(0,t.jsx)(U.FormField,{control:i.control,name:"requester",render:({field:s})=>{let a=r.find(e=>e.value===s.value);return(0,t.jsxs)(U.FormItem,{children:[(0,t.jsxs)(U.FormLabel,{children:[n("models.requester"),(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)(eO.Select,{onValueChange:t=>{s.onChange(t);let a=r.find(e=>e.value===t);!a||e&&i.getValues("base_url")||i.setValue("base_url",a.defaultUrl)},value:s.value,children:[(0,t.jsx)(eO.SelectTrigger,{className:"bg-background",children:a?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("img",{src:u.httpClient.getProviderRequesterIconURL(a.value),alt:a.label,className:"h-5 w-5 rounded"}),(0,t.jsx)("span",{children:a.label})]}):(0,t.jsx)(eO.SelectValue,{placeholder:n("models.selectRequester")})}),(0,t.jsxs)(eO.SelectContent,{children:[(0,t.jsxs)(eO.SelectGroup,{children:[(0,t.jsx)(eO.SelectLabel,{children:n("models.builtin")}),r.filter(e=>"builtin"===e.category).map(e=>(0,t.jsx)(eO.SelectItem,{value:e.value,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("img",{src:u.httpClient.getProviderRequesterIconURL(e.value),alt:e.label,className:"h-5 w-5 rounded"}),(0,t.jsx)("span",{children:e.label})]})},e.value))]}),(0,t.jsxs)(eO.SelectGroup,{children:[(0,t.jsx)(eO.SelectLabel,{children:n("models.modelManufacturer")}),r.filter(e=>"manufacturer"===e.category).map(e=>(0,t.jsx)(eO.SelectItem,{value:e.value,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("img",{src:u.httpClient.getProviderRequesterIconURL(e.value),alt:e.label,className:"h-5 w-5 rounded"}),(0,t.jsx)("span",{children:e.label})]})},e.value))]}),(0,t.jsxs)(eO.SelectGroup,{children:[(0,t.jsx)(eO.SelectLabel,{children:n("models.aggregationPlatform")}),r.filter(e=>"maas"===e.category).map(e=>(0,t.jsx)(eO.SelectItem,{value:e.value,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("img",{src:u.httpClient.getProviderRequesterIconURL(e.value),alt:e.label,className:"h-5 w-5 rounded"}),(0,t.jsx)("span",{children:e.label})]})},e.value))]}),(0,t.jsxs)(eO.SelectGroup,{children:[(0,t.jsx)(eO.SelectLabel,{children:n("models.selfDeployed")}),r.filter(e=>"self-hosted"===e.category).map(e=>(0,t.jsx)(eO.SelectItem,{value:e.value,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("img",{src:u.httpClient.getProviderRequesterIconURL(e.value),alt:e.label,className:"h-5 w-5 rounded"}),(0,t.jsx)("span",{children:e.label})]})},e.value))]})]})]}),(0,t.jsx)(U.FormMessage,{}),a?.description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description})]})}}),(0,t.jsx)(U.FormField,{control:i.control,name:"base_url",render:({field:e})=>(0,t.jsxs)(U.FormItem,{children:[(0,t.jsx)(U.FormLabel,{children:n("models.requestURL")}),(0,t.jsx)(U.FormControl,{children:(0,t.jsx)(q.Input,{...e})}),(0,t.jsx)(U.FormMessage,{})]})}),(0,t.jsx)(U.FormField,{control:i.control,name:"api_key",render:({field:e})=>(0,t.jsxs)(U.FormItem,{children:[(0,t.jsx)(U.FormLabel,{children:n("models.apiKey")}),(0,t.jsx)(U.FormControl,{children:(0,t.jsx)(q.Input,{...e,type:"password"})}),(0,t.jsx)(U.FormMessage,{})]})}),(0,t.jsxs)(M.DialogFooter,{children:[(0,t.jsx)(N.Button,{type:"submit",children:n("common.save")}),(0,t.jsx)(N.Button,{type:"button",variant:"outline",onClick:a,children:n("common.cancel")})]})]})})}var eU=e.i(70275),eq=e.i(10204);function eG({args:e,onChange:s,disabled:a=!1}){let{t:l}=(0,h.useTranslation)(),n=(t,a,l)=>{let n=[...e];n[t]={...n[t],[a]:l},s(n)};return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(eq.Label,{children:l("models.extraParameters")}),!a&&(0,t.jsxs)(N.Button,{type:"button",variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:()=>{s([...e,{key:"",type:"string",value:""}])},children:[(0,t.jsx)(Y.Plus,{className:"h-3 w-3 mr-1"}),l("models.addParameter")]})]}),0===e.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:l("common.none")}):e.map((o,i)=>(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)(q.Input,{placeholder:l("models.keyName"),value:o.key,className:"flex-1",disabled:a,onChange:e=>n(i,"key",e.target.value)}),(0,t.jsxs)(eO.Select,{value:o.type,disabled:a,onValueChange:e=>n(i,"type",e),children:[(0,t.jsx)(eO.SelectTrigger,{className:"w-24",children:(0,t.jsx)(eO.SelectValue,{})}),(0,t.jsxs)(eO.SelectContent,{children:[(0,t.jsx)(eO.SelectItem,{value:"string",children:l("models.string")}),(0,t.jsx)(eO.SelectItem,{value:"number",children:l("models.number")}),(0,t.jsx)(eO.SelectItem,{value:"boolean",children:l("models.boolean")})]})]}),(0,t.jsx)(q.Input,{placeholder:l("models.value"),value:o.value,className:"flex-1",disabled:a,onChange:e=>n(i,"value",e.target.value)}),!a&&(0,t.jsx)(N.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:()=>{s(e.filter((e,t)=>t!==i))},children:(0,t.jsx)(eU.X,{className:"h-4 w-4"})})]},i))]})}var eK=e.i(71045),eW=e.i(60952),eJ=e.i(33659);function eX(e){return e?Object.entries(e).map(([e,t])=>{let s="string";return"number"==typeof t?s="number":"boolean"==typeof t&&(s="boolean"),{key:e,type:s,value:String(t)}}):[]}function eY({model:e,modelType:s,isLangBotModels:a,editModelPopoverOpen:n,deleteConfirmOpen:o,onOpenEditModel:i,onCloseEditModel:r,onOpenDeleteConfirm:d,onCloseDeleteConfirm:c,onDeleteModel:u,onUpdateModel:x,onTestModel:p,isSubmitting:g,isTesting:j,testResult:f,onResetTestResult:v}){let{t:b}=(0,h.useTranslation)(),[C,w]=(0,l.useState)(e.name),[k,_]=(0,l.useState)("llm"===s&&e.abilities||[]),[M,P]=(0,l.useState)(eX(e.extra_args)),L=n===e.uuid,T=o===e.uuid;(0,l.useEffect)(()=>{L&&(w(e.name),_("llm"===s&&e.abilities||[]),P(eX(e.extra_args)),v())},[L]);let H=async()=>{await x(C,k,M)},D=async()=>{await p(C,k,M)},z=(e,t)=>{t?_([...k,e]):_(k.filter(t=>t!==e))},I=a&&m.userInfo?.account_type!=="space";return(0,t.jsxs)(y.Popover,{open:L&&!I,onOpenChange:t=>{I||(t?i(e.uuid):r())},children:[(0,t.jsx)(y.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)("div",{className:`flex items-center justify-between py-2 px-3 rounded-md border bg-background ${I?"cursor-not-allowed opacity-60":"hover:bg-accent cursor-pointer"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,t.jsx)(S.Badge,{variant:"secondary",className:"text-xs",children:b("llm"===s?"models.chat":"models.embedding")}),"llm"===s&&e.abilities?.includes("vision")&&(0,t.jsx)(S.Badge,{variant:"outline",className:"text-xs gap-1",children:(0,t.jsx)(eK.Eye,{className:"h-3 w-3"})}),"llm"===s&&e.abilities?.includes("func_call")&&(0,t.jsx)(S.Badge,{variant:"outline",className:"text-xs gap-1",children:(0,t.jsx)(eW.Wrench,{className:"h-3 w-3"})})]}),!a&&(0,t.jsxs)(y.Popover,{open:T,onOpenChange:t=>t?d(e.uuid):c(),children:[(0,t.jsx)(y.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(N.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 flex-shrink-0",onClick:e=>{e.stopPropagation()},children:(0,t.jsx)(X,{className:"h-4 w-4 text-muted-foreground hover:text-destructive"})})}),(0,t.jsx)(y.PopoverContent,{className:"w-64",align:"end",onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("p",{className:"text-sm",children:b("models.deleteConfirmation")}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsx)(N.Button,{variant:"outline",size:"sm",onClick:()=>c(),children:b("common.cancel")}),(0,t.jsx)(N.Button,{variant:"destructive",size:"sm",onClick:()=>{u(),c()},children:b("common.delete")})]})]})})]})]})}),(0,t.jsx)(y.PopoverContent,{className:"w-80",align:"start",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(eq.Label,{children:b("models.modelName")}),(0,t.jsx)(q.Input,{placeholder:b("models.modelName"),value:C,onChange:e=>w(e.target.value),disabled:a})]}),"llm"===s&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(eq.Label,{children:b("models.abilities")}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eJ.Checkbox,{id:`edit-vision-${e.uuid}`,checked:k.includes("vision"),disabled:a,onCheckedChange:e=>z("vision",e)}),(0,t.jsxs)(eq.Label,{htmlFor:`edit-vision-${e.uuid}`,className:"text-sm",children:[(0,t.jsx)(eK.Eye,{className:"h-3 w-3 inline mr-1"}),b("models.visionAbility")]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eJ.Checkbox,{id:`edit-func-call-${e.uuid}`,checked:k.includes("func_call"),disabled:a,onCheckedChange:e=>z("func_call",e)}),(0,t.jsxs)(eq.Label,{htmlFor:`edit-func-call-${e.uuid}`,className:"text-sm",children:[(0,t.jsx)(eW.Wrench,{className:"h-3 w-3 inline mr-1"}),b("models.functionCallAbility")]})]})]})]}),(0,t.jsx)(eG,{args:M,onChange:P,disabled:a}),(0,t.jsxs)("div",{className:"flex gap-2",children:[!a&&(0,t.jsx)(N.Button,{className:"flex-1",size:"sm",onClick:H,disabled:g||j,children:b(g?"common.saving":"common.save")}),(0,t.jsx)(N.Button,{className:a?"w-full":"flex-1",size:"sm",variant:"outline",onClick:D,disabled:g||j,children:j?b("common.loading"):f?.success?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(J.Check,{className:"h-4 w-4 mr-1 text-green-500"}),(f.duration/1e3).toFixed(1),"s"]}):b("common.test")})]})]})})]})}let eQ=(0,j.default)("message-square-text",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M13 8H7",key:"14i4kc"}],["path",{d:"M17 12H7",key:"16if0g"}]]),e0=(0,j.default)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]);function e1({isOpen:e,onOpen:s,onClose:a,onAddModel:n,onTestModel:o,isSubmitting:i,isTesting:r,testResult:d,onResetTestResult:c}){let{t:m}=(0,h.useTranslation)(),[u,x]=(0,l.useState)("llm"),[p,g]=(0,l.useState)(""),[j,f]=(0,l.useState)([]),[v,b]=(0,l.useState)([]);(0,l.useEffect)(()=>{e&&(x("llm"),g(""),f([]),b([]),c())},[e]);let C=async()=>{await n(u,p,j,v)},w=async()=>{await o(p,u,"llm"===u?j:[],v)},k=(e,t)=>{t?f([...j,e]):f(j.filter(t=>t!==e))};return(0,t.jsxs)(y.Popover,{open:e,onOpenChange:e=>e?s():a(),children:[(0,t.jsx)(y.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(N.Button,{variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)(Y.Plus,{className:"h-3 w-3 mr-1"}),m("models.addModel")]})}),(0,t.jsx)(y.PopoverContent,{className:"w-80",align:"end",onClick:e=>e.stopPropagation(),children:(0,t.jsxs)(Q.Tabs,{value:u,onValueChange:e=>x(e),children:[(0,t.jsxs)(Q.TabsList,{className:"grid w-full grid-cols-2",children:[(0,t.jsxs)(Q.TabsTrigger,{value:"llm",children:[(0,t.jsx)(eQ,{className:"h-4 w-4 mr-1"}),m("models.chat")]}),(0,t.jsxs)(Q.TabsTrigger,{value:"embedding",children:[(0,t.jsx)(e0,{className:"h-4 w-4 mr-1"}),m("models.embedding")]})]}),(0,t.jsxs)(Q.TabsContent,{value:"llm",className:"space-y-3 mt-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(eq.Label,{children:m("models.modelName")}),(0,t.jsx)(q.Input,{placeholder:m("models.modelName"),value:p,onChange:e=>g(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(eq.Label,{children:m("models.abilities")}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eJ.Checkbox,{id:"add-vision",checked:j.includes("vision"),onCheckedChange:e=>k("vision",e)}),(0,t.jsxs)(eq.Label,{htmlFor:"add-vision",className:"text-sm",children:[(0,t.jsx)(eK.Eye,{className:"h-3 w-3 inline mr-1"}),m("models.visionAbility")]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eJ.Checkbox,{id:"add-func-call",checked:j.includes("func_call"),onCheckedChange:e=>k("func_call",e)}),(0,t.jsxs)(eq.Label,{htmlFor:"add-func-call",className:"text-sm",children:[(0,t.jsx)(eW.Wrench,{className:"h-3 w-3 inline mr-1"}),m("models.functionCallAbility")]})]})]})]}),(0,t.jsx)(eG,{args:v,onChange:b}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(N.Button,{className:"flex-1",size:"sm",onClick:C,disabled:i||r,children:m(i?"common.saving":"common.add")}),(0,t.jsx)(N.Button,{className:"flex-1",size:"sm",variant:"outline",onClick:w,disabled:i||r,children:r?m("common.loading"):d?.success?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(J.Check,{className:"h-4 w-4 mr-1 text-green-500"}),(d.duration/1e3).toFixed(1),"s"]}):m("common.test")})]})]}),(0,t.jsxs)(Q.TabsContent,{value:"embedding",className:"space-y-3 mt-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(eq.Label,{children:m("models.modelName")}),(0,t.jsx)(q.Input,{placeholder:m("models.modelName"),value:p,onChange:e=>g(e.target.value)})]}),(0,t.jsx)(eG,{args:v,onChange:b}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(N.Button,{className:"flex-1",size:"sm",onClick:C,disabled:i||r,children:m(i?"common.saving":"common.add")}),(0,t.jsx)(N.Button,{className:"flex-1",size:"sm",variant:"outline",onClick:w,disabled:i||r,children:r?m("common.loading"):d?.success?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(J.Check,{className:"h-4 w-4 mr-1 text-green-500"}),(d.duration/1e3).toFixed(1),"s"]}):m("common.test")})]})]})]})})]})}var e2=e.i(89986),e5=e.i(43260),e4=e.i(26249);let e7=(0,j.default)("log-in",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var e3=e.i(70672),e8=e.i(37471),e9=e.i(42951),e6=e.i(66094),te=e.i(20344),tt="Collapsible",[ts,ta]=(0,es.createContextScope)(tt),[tl,tn]=ts(tt),to=l.forwardRef((e,s)=>{let{__scopeCollapsible:a,open:n,defaultOpen:o,disabled:i,onOpenChange:r,...d}=e,[c,m]=(0,e3.useControllableState)({prop:n,defaultProp:o??!1,onChange:r,caller:tt});return(0,t.jsx)(tl,{scope:a,disabled:i,contentId:(0,te.useId)(),open:c,onOpenToggle:l.useCallback(()=>m(e=>!e),[m]),children:(0,t.jsx)(e9.Primitive.div,{"data-state":tu(c),"data-disabled":i?"":void 0,...d,ref:s})})});to.displayName=tt;var ti="CollapsibleTrigger",tr=l.forwardRef((e,s)=>{let{__scopeCollapsible:a,...l}=e,n=tn(ti,a);return(0,t.jsx)(e9.Primitive.button,{type:"button","aria-controls":n.contentId,"aria-expanded":n.open||!1,"data-state":tu(n.open),"data-disabled":n.disabled?"":void 0,disabled:n.disabled,...l,ref:s,onClick:(0,en.composeEventHandlers)(e.onClick,n.onOpenToggle)})});tr.displayName=ti;var td="CollapsibleContent",tc=l.forwardRef((e,s)=>{let{forceMount:a,...l}=e,n=tn(td,e.__scopeCollapsible);return(0,t.jsx)(e6.Presence,{present:a||n.open,children:({present:e})=>(0,t.jsx)(tm,{...l,ref:s,present:e})})});tc.displayName=td;var tm=l.forwardRef((e,s)=>{let{__scopeCollapsible:a,present:n,children:o,...i}=e,r=tn(td,a),[d,c]=l.useState(n),m=l.useRef(null),u=(0,ea.useComposedRefs)(s,m),h=l.useRef(0),x=h.current,p=l.useRef(0),g=p.current,j=r.open||d,f=l.useRef(j),v=l.useRef(void 0);return l.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,e8.useLayoutEffect)(()=>{let e=m.current;if(e){v.current=v.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();h.current=t.height,p.current=t.width,f.current||(e.style.transitionDuration=v.current.transitionDuration,e.style.animationName=v.current.animationName),c(n)}},[r.open,n]),(0,t.jsx)(e9.Primitive.div,{"data-state":tu(r.open),"data-disabled":r.disabled?"":void 0,id:r.contentId,hidden:!j,...i,ref:u,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style},children:j&&o})});function tu(e){return e?"open":"closed"}function th({...e}){return(0,t.jsx)(to,{"data-slot":"collapsible",...e})}function tx({...e}){return(0,t.jsx)(tr,{"data-slot":"collapsible-trigger",...e})}function tp({...e}){return(0,t.jsx)(tc,{"data-slot":"collapsible-content",...e})}var tg=e.i(15288);function tj({provider:e,isLangBotModels:s=!1,isExpanded:a,isLoading:n,models:o,accountType:i,spaceCredits:r,addModelPopoverOpen:d,editModelPopoverOpen:x,deleteConfirmOpen:p,onToggle:g,onEditProvider:j,onDeleteProvider:f,onSpaceLogin:v,onOpenAddModel:b,onCloseAddModel:C,onAddModel:w,onOpenEditModel:k,onCloseEditModel:_,onUpdateModel:M,onOpenDeleteConfirm:P,onCloseDeleteConfirm:L,onDeleteModel:T,onTestModel:H,isSubmitting:D,isTesting:z,testResult:I,onResetTestResult:B}){var F;let{t:R}=(0,h.useTranslation)(),[V,$]=(0,l.useState)(!1),E=!s&&0===(e.llm_count||0)&&0===(e.embedding_count||0),O=(e.llm_count||0)+(e.embedding_count||0);return(0,t.jsx)(tg.Card,{className:"mb-2",children:(0,t.jsxs)(th,{open:a,onOpenChange:g,children:[(0,t.jsxs)(tg.CardHeader,{className:"py-0 px-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[s?(0,t.jsx)("div",{className:"w-9 h-9 rounded-lg overflow-hidden flex-shrink-0",children:(0,t.jsx)("img",{src:c.default.src,alt:"LangBot",className:"w-full h-full object-cover"})}):(0,t.jsx)("img",{src:u.httpClient.getProviderRequesterIconURL(e.requester),alt:e.name,className:"h-9 w-9 rounded-lg"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(tg.CardTitle,{className:"text-base",children:e.name}),(0,t.jsx)(S.Badge,{variant:"outline",className:"text-xs",children:R("models.modelsCount",{count:O})})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:s?R("models.langbotModelsDescription"):(0,t.jsxs)(t.Fragment,{children:[e.base_url,e.base_url&&e.api_keys?.length>0&&"  ",e.api_keys?.length>0&&((F=e.api_keys[0])?F.length<=8?"****":`${F.slice(0,4)}...${F.slice(-4)}`:"")]})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 ml-2",children:[s&&"space"!==i&&(0,t.jsxs)(N.Button,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),v()},children:[(0,t.jsx)(e7,{className:"h-4 w-4 mr-1"}),R("models.loginWithSpace")]}),s&&"space"===i&&null!==r&&(0,t.jsxs)("div",{className:"flex items-center gap-1 border rounded-md px-2 h-8 text-sm mr-2",children:[(0,t.jsxs)("span",{children:[(r/5e3).toFixed(2)," ",R("models.credits")]}),(0,t.jsx)(N.Button,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:e=>{e.stopPropagation(),window.open(`${m.systemInfo.cloud_service_url}/profile?tab=billing`,"_blank")},children:(0,t.jsx)(Y.Plus,{className:"h-3 w-3"})})]}),!s&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:e=>{e.stopPropagation(),j()},children:(0,t.jsx)(e4.Settings,{className:"h-4 w-4"})}),E&&(0,t.jsxs)(y.Popover,{open:V,onOpenChange:$,children:[(0,t.jsx)(y.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(N.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:e=>{e.stopPropagation()},children:(0,t.jsx)(X,{className:"h-4 w-4 text-destructive"})})}),(0,t.jsx)(y.PopoverContent,{className:"w-64",align:"end",onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("p",{className:"text-sm",children:R("models.deleteProviderConfirmation")}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsx)(N.Button,{variant:"outline",size:"sm",onClick:()=>$(!1),children:R("common.cancel")}),(0,t.jsx)(N.Button,{variant:"destructive",size:"sm",onClick:()=>{f(),$(!1)},children:R("common.delete")})]})]})})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[O>0?(0,t.jsxs)(tx,{className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground cursor-pointer",children:[a?(0,t.jsx)(e2.ChevronDown,{className:"h-3 w-3"}):(0,t.jsx)(e5.ChevronRight,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:R(a?"models.collapseModels":"models.expandModels")})]}):(0,t.jsx)("div",{}),!s&&(0,t.jsx)(e1,{isOpen:d===e.uuid,onOpen:b,onClose:C,onAddModel:w,onTestModel:H,isSubmitting:D,isTesting:z,testResult:I,onResetTestResult:B})]})]}),(0,t.jsx)(tp,{children:(0,t.jsx)(tg.CardContent,{className:"px-4 mt-2",children:n?(0,t.jsxs)("p",{className:"text-sm text-muted-foreground text-center py-4",children:[R("common.loading"),"..."]}):o?(0,t.jsxs)("div",{className:"space-y-2",children:[o.llm.map(e=>(0,t.jsx)(eY,{model:e,modelType:"llm",isLangBotModels:s,editModelPopoverOpen:x,deleteConfirmOpen:p,onOpenEditModel:k,onCloseEditModel:_,onOpenDeleteConfirm:P,onCloseDeleteConfirm:L,onDeleteModel:()=>T(e.uuid,"llm"),onUpdateModel:(t,s,a)=>M(e.uuid,"llm",t,s,a),onTestModel:(e,t,s)=>H(e,"llm",t,s),isSubmitting:D,isTesting:z,testResult:I,onResetTestResult:B},e.uuid)),o.embedding.map(e=>(0,t.jsx)(eY,{model:e,modelType:"embedding",isLangBotModels:s,editModelPopoverOpen:x,deleteConfirmOpen:p,onOpenEditModel:k,onCloseEditModel:_,onOpenDeleteConfirm:P,onCloseDeleteConfirm:L,onDeleteModel:()=>T(e.uuid,"embedding"),onUpdateModel:(t,s,a)=>M(e.uuid,"embedding",t,s,a),onTestModel:(e,t,s)=>H(e,"embedding",t,s),isSubmitting:D,isTesting:z,testResult:I,onResetTestResult:B},e.uuid)),0===o.llm.length&&0===o.embedding.length&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:R("models.noModels")})]}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:R("models.noModels")})})})]})})}let tf="space-chat-completions";function tv(e){let t={};return e.forEach(e=>{e.key.trim()&&("number"===e.type?t[e.key]=Number(e.value):"boolean"===e.type?t[e.key]="true"===e.value:t[e.key]=e.value)}),t}function tb({open:e,onOpenChange:s}){let{t:a}=(0,h.useTranslation)(),[n,o]=(0,l.useState)([]),[i,r]=(0,l.useState)("local"),[d,c]=(0,l.useState)(null),[x,p]=(0,l.useState)(new Set),[g,j]=(0,l.useState)({}),[f,v]=(0,l.useState)(new Set),[b,C]=(0,l.useState)(!1),[w,y]=(0,l.useState)(null),[k,S]=(0,l.useState)(null),[P,L]=(0,l.useState)(null),[T,H]=(0,l.useState)(null),[D,z]=(0,l.useState)(!1),[I,B]=(0,l.useState)(!1),[F,R]=(0,l.useState)(null),[V,$]=(0,l.useState)(!1),E=m.systemInfo.disable_models_service?void 0:n.find(e=>e.requester===tf),O=n.filter(e=>e.requester!==tf);async function A(){try{let e=await u.httpClient.getUserInfo();if(r(e.account_type),"space"===e.account_type){let e=await u.httpClient.getSpaceCredits();c(e.credits)}}catch{r("local")}}async function Z(){try{let e=await u.httpClient.getModelProviders();o(e.providers),$(!0)}catch(e){console.error("Failed to load providers",e),_.toast.error(a("models.loadError"))}}async function U(e,t=!1){if(!f.has(e)){t||v(t=>new Set(t).add(e));try{let[t,s]=await Promise.all([u.httpClient.getProviderLLMModels(e),u.httpClient.getProviderEmbeddingModels(e)]);j(a=>({...a,[e]:{llm:t.models,embedding:s.models}}))}catch(e){console.error("Failed to load models",e)}finally{t||v(t=>{let s=new Set(t);return s.delete(e),s})}}}async function q(e){try{await u.httpClient.deleteModelProvider(e),_.toast.success(a("models.providerDeleted")),Z()}catch(e){_.toast.error(a("models.providerDeleteError")+e.message)}}async function G(){try{let e=localStorage.getItem("token");if(!e)return void _.toast.error(a("common.error"));let t=window.location.origin,s=`${t}/auth/space/callback?mode=bind`,l=await u.httpClient.getSpaceAuthorizeUrl(s,e);window.location.href=l.authorize_url}catch{_.toast.error(a("common.spaceLoginFailed"))}}async function K(e,t,s,l,n){if(!s.trim())return void _.toast.error(a("models.modelNameRequired"));z(!0);try{let a=tv(n);"llm"===t?await u.httpClient.createProviderLLMModel({name:s,provider_uuid:e,abilities:l,extra_args:a}):await u.httpClient.createProviderEmbeddingModel({name:s,provider_uuid:e,extra_args:a}),S(null),U(e,!0),Z()}catch(e){_.toast.error(a("models.createError")+e.message)}finally{z(!1)}}async function W(e,t,s,l,n,o){if(!l.trim())return void _.toast.error(a("models.modelNameRequired"));z(!0);try{let a=tv(o);"llm"===s?await u.httpClient.updateProviderLLMModel(t,{name:l,provider_uuid:e,abilities:n,extra_args:a}):await u.httpClient.updateProviderEmbeddingModel(t,{name:l,provider_uuid:e,extra_args:a}),L(null),U(e,!0),Z()}catch(e){_.toast.error(a("models.saveError")+e.message)}finally{z(!1)}}async function J(e,t,s){try{"llm"===s?await u.httpClient.deleteProviderLLMModel(t):await u.httpClient.deleteProviderEmbeddingModel(t),_.toast.success(a("models.deleteSuccess")),U(e,!0),Z()}catch(e){_.toast.error(a("models.deleteError")+e.message)}}async function X(e,t,s,l,o){B(!0),R(null);let i=Date.now();try{let a=tv(o),r=n.find(t=>t.uuid===e),d={requester:r?.requester||"",base_url:r?.base_url||"",api_keys:r?.api_keys||[]};"llm"===s?await u.httpClient.testLLMModel("_",{uuid:"",name:t,provider_uuid:"",provider:d,abilities:l,extra_args:a}):await u.httpClient.testEmbeddingModel("_",{uuid:"",name:t,provider_uuid:"",provider:d,extra_args:a});let c=Date.now()-i;R({success:!0,duration:c})}catch(e){console.error("Failed to test model",e),_.toast.error(a("models.testError")+": "+e.msg),R(null)}finally{B(!1)}}function Q(e,s=!1){return(0,t.jsx)(tj,{provider:e,isLangBotModels:s,isExpanded:x.has(e.uuid),isLoading:f.has(e.uuid),models:g[e.uuid],accountType:i,spaceCredits:d,addModelPopoverOpen:k,editModelPopoverOpen:P,deleteConfirmOpen:T,onToggle:()=>{var t;return t=e.uuid,void p(e=>{let s=new Set(e);return s.has(t)?s.delete(t):(s.add(t),g[t]||U(t)),s})},onEditProvider:()=>{y(e.uuid),C(!0)},onDeleteProvider:()=>q(e.uuid),onSpaceLogin:G,onOpenAddModel:()=>S(e.uuid),onCloseAddModel:()=>S(null),onAddModel:(t,s,a,l)=>K(e.uuid,t,s,a,l),onOpenEditModel:e=>L(e),onCloseEditModel:()=>L(null),onUpdateModel:(t,s,a,l,n)=>W(e.uuid,t,s,a,l,n),onOpenDeleteConfirm:e=>H(e),onCloseDeleteConfirm:()=>H(null),onDeleteModel:(t,s)=>J(e.uuid,t,s),onTestModel:(t,s,a,l)=>X(e.uuid,t,s,a,l),isSubmitting:D,isTesting:I,testResult:F,onResetTestResult:()=>R(null)},e.uuid)}return(0,l.useEffect)(()=>{e&&(A(),Z())},[e]),(0,l.useEffect)(()=>{V&&E&&0===O.length&&!x.has(E.uuid)&&(p(new Set([E.uuid])),g[E.uuid]||U(E.uuid))},[V,n]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.Dialog,{open:e,onOpenChange:e=>{(e||!b)&&s(e)},children:(0,t.jsxs)(M.DialogContent,{className:"overflow-hidden p-0 h-[80vh] flex flex-col !max-w-[37rem]",children:[(0,t.jsx)(M.DialogHeader,{className:"px-6 pt-6 pb-0 flex-shrink-0",children:(0,t.jsx)(M.DialogTitle,{children:a("models.title")})}),(0,t.jsxs)("div",{className:"flex-1 overflow-auto px-6 pb-6 mt-0",children:[E&&Q(E,!0),(0,t.jsxs)("div",{className:"mb-3 flex justify-between items-center sticky top-0 bg-background py-2 z-10",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:0===O.length?a(m.systemInfo.disable_models_service?"models.addProviderHintSimple":"models.addProviderHint"):a("models.providerCount",{count:O.length})}),(0,t.jsxs)(N.Button,{size:"sm",variant:"outline",onClick:function(){y(null),C(!0)},children:[(0,t.jsx)(Y.Plus,{className:"h-4 w-4 mr-1"}),a("models.addProvider")]})]}),0===O.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[(0,t.jsx)(eE,{className:"h-12 w-12 mb-3 opacity-50"}),(0,t.jsx)("p",{className:"text-sm",children:a("models.noProviders")})]}):O.map(e=>Q(e))]})]})}),(0,t.jsx)(M.Dialog,{open:b,onOpenChange:C,children:(0,t.jsxs)(M.DialogContent,{className:"w-[600px] p-6",children:[(0,t.jsx)(M.DialogHeader,{children:(0,t.jsx)(M.DialogTitle,{children:w?a("models.editProvider"):a("models.addProvider")})}),(0,t.jsx)(eZ,{providerId:w||void 0,onFormSubmit:function(){C(!1),Z(),x.forEach(e=>U(e))},onFormCancel:()=>C(!1)})]})})]})}function tC({onSelectedChangeAction:e}){let s=(0,i.useRouter)(),n=(0,i.usePathname)(),r=(0,i.useSearchParams)();(0,l.useEffect)(()=>{var t=n;if("home"===t.split("/")[1]&&d.find(e=>e.route===t)){let s=d.find(e=>e.route===t);s&&(_(s),e(s))}},[n]),(0,l.useEffect)(()=>{"showModelSettings"===r.get("action")&&W(!0),"showAccountSettings"===r.get("action")&&z(!0),"showApiIntegrationSettings"===r.get("action")&&B(!0)},[r]);let[j,_]=(0,l.useState)(),{theme:M,setTheme:P}=(0,w.useTheme)(),{t:L}=(0,h.useTranslation)(),[T,H]=(0,l.useState)(!1),[D,z]=(0,l.useState)(!1),[I,B]=(0,l.useState)(!1),[F,R]=(0,l.useState)(!1),[V,$]=(0,l.useState)(null),[E,O]=(0,l.useState)(null),[A,Z]=(0,l.useState)(!1),[U,q]=(0,l.useState)(!1),[G,W]=(0,l.useState)(!1),[J,X]=(0,l.useState)("");function Y(e){if(W(e),e){let e=new URLSearchParams(r.toString());e.set("action","showModelSettings"),s.replace(`${n}?${e.toString()}`,{scroll:!1})}else{let e=new URLSearchParams(r.toString());e.delete("action");let t=e.toString()?`${n}?${e.toString()}`:n;s.replace(t,{scroll:!1})}}function Q(e){if(z(e),e){let e=new URLSearchParams(r.toString());e.set("action","showAccountSettings"),s.replace(`${n}?${e.toString()}`,{scroll:!1})}else{let e=new URLSearchParams(r.toString());e.delete("action");let t=e.toString()?`${n}?${e.toString()}`:n;s.replace(t,{scroll:!1})}}function ee(t){var a;_(t),a=t,s.push(`${a.route}`),e(t)}return(0,l.useEffect)(()=>{let e;(e=d.find(e=>e.route===n))?ee(e):ee(d[0]),localStorage.getItem("token")||(localStorage.setItem("token","test-token"),localStorage.setItem("userEmail","test@example.com"));let t=localStorage.getItem("userEmail");t?X(t):u.httpClient.getUserInfo().then(e=>{X(e.user),localStorage.setItem("userEmail",e.user)}).catch(()=>{}),(0,m.getCloudServiceClientSync)().get("/api/v1/dist/info/repo").then(e=>{$(e.repo.stargazers_count)}).catch(e=>{console.error("Failed to fetch GitHub star count:",e)}),(0,m.getCloudServiceClientSync)().getLangBotReleases().then(e=>{if(e&&e.length>0){let t=e.find(e=>!e.prerelease&&!e.draft)||e[0];O(t);let s=m.systemInfo?.version;s&&t.tag_name&&Z(function(e,t){let s=e.replace(/^v/,""),a=t.replace(/^v/,""),l=s.split(".").map(e=>parseInt(e,10)||0),n=a.split(".").map(e=>parseInt(e,10)||0),o=Math.max(l.length,n.length);for(let e=0;e<o;e++){let t=l[e]||0,s=n[e]||0;if(t>s)return!0;if(t<s)break}return!1}(t.tag_name,s))}}).catch(e=>{console.error("Failed to fetch releases:",e)})},[]),(0,t.jsxs)("div",{className:`${a.default.sidebarContainer}`,children:[(0,t.jsxs)("div",{className:`${a.default.sidebarTopContainer}`,children:[(0,t.jsxs)("div",{className:`${a.default.langbotIconContainer}`,children:[(0,t.jsx)("img",{className:`${a.default.langbotIcon}`,src:c.default.src,alt:"langbot-icon"}),(0,t.jsxs)("div",{className:`${a.default.langbotTextContainer}`,children:[(0,t.jsx)("div",{className:`${a.default.langbotText}`,children:"LangBot"}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:`${a.default.langbotVersion}`,children:m.systemInfo?.version}),A&&(0,t.jsx)(S.Badge,{onClick:()=>q(!0),className:"bg-red-500 hover:bg-red-600 text-white text-[0.6rem] px-1.5 py-0 h-4 cursor-pointer",children:L("plugins.new")})]})]})]}),(0,t.jsx)("div",{className:a.default.sidebarItemsContainer,children:d.map(e=>(0,t.jsx)("div",{onClick:()=>{ee(e)},children:(0,t.jsx)(o,{onClick:()=>{},isSelected:void 0!==j&&j.id===e.id,icon:e.icon,name:e.name})},e.id))})]}),(0,t.jsxs)("div",{className:`${a.default.sidebarBottomContainer}`,children:[null!==V&&(0,t.jsx)("div",{onClick:()=>{window.open("https://github.com/langbot-app/LangBot","_blank")},className:"flex justify-center cursor-pointer p-2 rounded-lg transition-colors",children:(0,t.jsxs)(S.Badge,{variant:"outline",className:"hover:bg-secondary/50 px-3 py-1.5 text-sm font-medium transition-colors border-border relative overflow-hidden group",children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.464-1.11-1.464-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"})}),(0,t.jsx)("div",{className:"absolute inset-0 -translate-x-full bg-gradient-to-r from-transparent via-white/20 to-transparent group-hover:translate-x-full transition-transform duration-1000 ease-out"}),V.toLocaleString()]})}),(0,t.jsx)(o,{onClick:()=>Y(!0),isSelected:!1,icon:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M10.6144 17.7956C10.277 18.5682 9.20776 18.5682 8.8704 17.7956L7.99275 15.7854C7.21171 13.9966 5.80589 12.5726 4.0523 11.7942L1.63658 10.7219C.868536 10.381.868537 9.26368 1.63658 8.92276L3.97685 7.88394C5.77553 7.08552 7.20657 5.60881 7.97427 3.75892L8.8633 1.61673C9.19319.821767 10.2916.821765 10.6215 1.61673L11.5105 3.75894C12.2782 5.60881 13.7092 7.08552 15.5079 7.88394L17.8482 8.92276C18.6162 9.26368 18.6162 10.381 17.8482 10.7219L15.4325 11.7942C13.6789 12.5726 12.2731 13.9966 11.492 15.7854L10.6144 17.7956ZM4.53956 9.82234C6.8254 10.837 8.68402 12.5048 9.74238 14.7996 10.8008 12.5048 12.6594 10.837 14.9452 9.82234 12.6321 8.79557 10.7676 7.04647 9.74239 4.71088 8.71719 7.04648 6.85267 8.79557 4.53956 9.82234ZM19.4014 22.6899 19.6482 22.1242C20.0882 21.1156 20.8807 20.3125 21.8695 19.8732L22.6299 19.5353C23.0412 19.3526 23.0412 18.7549 22.6299 18.5722L21.9121 18.2532C20.8978 17.8026 20.0911 16.9698 19.6586 15.9269L19.4052 15.3156C19.2285 14.8896 18.6395 14.8896 18.4628 15.3156L18.2094 15.9269C17.777 16.9698 16.9703 17.8026 15.956 18.2532L15.2381 18.5722C14.8269 18.7549 14.8269 19.3526 15.2381 19.5353L15.9985 19.8732C16.9874 20.3125 17.7798 21.1156 18.2198 22.1242L18.4667 22.6899C18.6473 23.104 19.2207 23.104 19.4014 22.6899ZM18.3745 19.0469 18.937 18.4883 19.4878 19.0469 18.937 19.5898 18.3745 19.0469Z"})}),name:L("models.title")}),(0,t.jsxs)(y.Popover,{open:T,onOpenChange:e=>{(e||!F)&&H(e)},children:[(0,t.jsx)(y.PopoverTrigger,{children:(0,t.jsx)(o,{onClick:()=>{},isSelected:!1,icon:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M12 3C10.9 3 10 3.9 10 5C10 6.1 10.9 7 12 7C13.1 7 14 6.1 14 5C14 3.9 13.1 3 12 3ZM12 17C10.9 17 10 17.9 10 19C10 20.1 10.9 21 12 21C13.1 21 14 20.1 14 19C14 17.9 13.1 17 12 17ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"})}),name:L("common.accountOptions")})}),(0,t.jsxs)(y.PopoverContent,{side:"right",align:"end",className:"w-auto p-2 flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-accent cursor-pointer",onClick:()=>{Q(!0),H(!1)},children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-medium",children:J?J.charAt(0).toUpperCase():"U"}),(0,t.jsx)("span",{className:"text-sm truncate max-w-[180px]",children:J||L("account.settings")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(k.LanguageSelector,{triggerClassName:"flex-1",onOpenChange:R}),(0,t.jsxs)(N.Button,{variant:"outline",size:"icon",onClick:()=>P("light"===M?"dark":"dark"===M?"system":"light"),className:"h-9 w-9 shrink-0",children:["light"===M&&(0,t.jsx)(p.Sun,{className:"h-[1.2rem] w-[1.2rem]"}),"dark"===M&&(0,t.jsx)(x.Moon,{className:"h-[1.2rem] w-[1.2rem]"}),"system"===M&&(0,t.jsx)(g.Monitor,{className:"h-[1.2rem] w-[1.2rem]"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)(N.Button,{variant:"ghost",className:"w-full justify-start font-normal",onClick:()=>{B(!0),H(!1)},children:[(0,t.jsx)(C,{className:"w-4 h-4 mr-2"}),L("common.apiIntegration")]}),(0,t.jsxs)(N.Button,{variant:"ghost",className:"w-full justify-start font-normal",onClick:()=>{let e=localStorage.getItem("langbot_language");"zh-Hans"===e||"zh-Hant"===e?window.open("https://docs.langbot.app/zh/insight/guide.html","_blank"):window.open("https://docs.langbot.app/en/insight/guide.html","_blank"),H(!1)},children:[(0,t.jsx)(f,{className:"w-4 h-4 mr-2"}),L("common.helpDocs")]}),(0,t.jsxs)(N.Button,{variant:"ghost",className:"w-full justify-start font-normal",onClick:()=>{window.open("https://github.com/langbot-app/LangBot/issues","_blank"),H(!1)},children:[(0,t.jsx)(v,{className:"w-4 h-4 mr-2"}),L("common.featureRequest")]}),(0,t.jsxs)(N.Button,{variant:"ghost",className:"w-full justify-start font-normal",onClick:()=>void(localStorage.removeItem("token"),localStorage.removeItem("userEmail"),window.location.href="/login"),children:[(0,t.jsx)(b,{className:"w-4 h-4 mr-2"}),L("common.logout")]})]})]})]})]}),(0,t.jsx)(K,{open:D,onOpenChange:Q}),(0,t.jsx)(ez,{open:I,onOpenChange:B}),(0,t.jsx)(e$,{open:U,onOpenChange:q,release:E}),(0,t.jsx)(tb,{open:G,onOpenChange:Y})]})}var tw=e.i(80913);function ty({title:e,subtitle:s,helpLink:a}){return(0,t.jsxs)("div",{className:`${tw.default.titleBarContainer}`,children:[(0,t.jsx)("div",{className:`${tw.default.titleText}`,children:e}),(0,t.jsxs)("div",{className:`${tw.default.subtitleText}`,children:[s,(0,t.jsx)("span",{className:`${tw.default.helpLink}`,children:(0,t.jsx)("div",{onClick:()=>{window.open((0,eA.extractI18nObject)(a),"_blank")},className:"cursor-pointer",children:(0,t.jsx)("svg",{className:"w-[1rem] h-[1rem]",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 15H13V17H11V15ZM13 13.3551V14H11V12.5C11 11.9477 11.4477 11.5 12 11.5C12.8284 11.5 13.5 10.8284 13.5 10C13.5 9.17157 12.8284 8.5 12 8.5C11.2723 8.5 10.6656 9.01823 10.5288 9.70577L8.56731 9.31346C8.88637 7.70919 10.302 6.5 12 6.5C13.933 6.5 15.5 8.067 15.5 10C15.5 11.5855 14.4457 12.9248 13 13.3551Z"})})})})]})]})}function tN({children:e}){let[a,n]=(0,l.useState)(""),[o,i]=(0,l.useState)(""),[r,d]=(0,l.useState)({en_US:"",zh_Hans:""});(0,l.useEffect)(()=>{m.userInfo||(0,m.initializeUserInfo)()},[]);let c=(0,l.useCallback)(e=>{n(e.name),i(e.description),d(e.helpLink)},[]),u=(0,l.useMemo)(()=>e,[e]);return(0,t.jsxs)("div",{className:s.default.homeLayoutContainer,children:[(0,t.jsx)("aside",{className:s.default.sidebar,children:(0,t.jsx)(l.Suspense,{fallback:(0,t.jsx)("div",{}),children:(0,t.jsx)(tC,{onSelectedChangeAction:c})})}),(0,t.jsxs)("div",{className:s.default.main,children:[(0,t.jsx)(ty,{title:a,subtitle:o,helpLink:r}),(0,t.jsx)("main",{className:s.default.mainContent,children:u})]})]})}e.s(["default",()=>tN],15285)}]);