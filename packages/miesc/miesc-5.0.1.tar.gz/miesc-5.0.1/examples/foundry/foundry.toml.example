# =============================================================================
# Example Foundry Configuration with MIESC Integration
# =============================================================================
# Copy this file to your Foundry project root and rename to foundry.toml
# Customize the settings as needed for your project.
# =============================================================================

[profile.default]
src = "src"
out = "out"
libs = ["lib"]
solc = "0.8.20"
optimizer = true
optimizer_runs = 200

# MIESC Security Scan after build (quick mode)
# Runs slither, aderyn, solhint, mythril
post_build_hook = "miesc audit quick ./src"

# Alternative: Use custom hook script for more control
# post_build_hook = "./scripts/miesc-hook.sh"

[profile.ci]
# CI Profile - stricter settings
src = "src"
out = "out"
libs = ["lib"]
solc = "0.8.20"
optimizer = true
optimizer_runs = 200
verbosity = 2

# Fail build on critical/high severity issues
post_build_hook = "miesc audit quick ./src --ci --fail-on high"

[profile.audit]
# Full Security Audit Profile
src = "src"
out = "out"
libs = ["lib"]
solc = "0.8.20"
optimizer = true
optimizer_runs = 200

# Run all 9 layers with full output
post_build_hook = "miesc audit full ./src --ci --output json > miesc-audit.json"

[profile.local]
# Local development - no security scan (faster builds)
src = "src"
out = "out"
libs = ["lib"]
solc = "0.8.20"
optimizer = false

# No post-build hook for fast iteration
# post_build_hook = ""

# =============================================================================
# Usage:
#   forge build                    # Uses default profile (quick scan)
#   forge build --profile ci       # Uses CI profile (strict)
#   forge build --profile audit    # Full security audit
#   forge build --profile local    # No security scan
# =============================================================================

[fmt]
line_length = 120
tab_width = 4
bracket_spacing = true

[fuzz]
runs = 256
max_test_rejects = 65536

[invariant]
runs = 256
depth = 15
fail_on_revert = false
