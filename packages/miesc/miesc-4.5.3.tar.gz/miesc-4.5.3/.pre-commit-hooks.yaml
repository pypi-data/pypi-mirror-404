# MIESC Pre-commit Hooks
# Official pre-commit hooks for smart contract security scanning
# https://github.com/fboiero/MIESC
#
# Usage in your project's .pre-commit-config.yaml:
#
#   repos:
#     - repo: https://github.com/fboiero/MIESC
#       rev: v4.3.2
#       hooks:
#         - id: miesc-quick
#           args: ['--fail-on', 'high,critical']
#
# Available hooks:
#   - miesc-quick: Fast 4-tool scan (~30s) - recommended for commits
#   - miesc-fast: Ultra-fast 2-tool scan (~10s) - for rapid iteration
#   - miesc-full: Complete 9-layer audit - manual stage only
#   - miesc-ci: CI-optimized scan with exit codes
#
# For more information: https://fboiero.github.io/MIESC

- id: miesc-quick
  name: MIESC Quick Security Scan
  description: Run quick security scan on Solidity contracts (slither, aderyn, solhint, mythril)
  entry: miesc scan
  language: python
  files: \.sol$
  types: [file]
  pass_filenames: true
  require_serial: true
  additional_dependencies: ['miesc>=4.3.2']

- id: miesc-fast
  name: MIESC Fast Security Scan
  description: Ultra-fast security scan (slither, aderyn only, ~10s)
  entry: miesc audit quick
  language: python
  files: \.sol$
  types: [file]
  pass_filenames: true
  require_serial: true
  args: ['--timeout', '60']
  additional_dependencies: ['miesc>=4.3.2']

- id: miesc-ci
  name: MIESC CI Mode
  description: Security scan with CI-friendly output (fails on critical/high issues)
  entry: miesc scan
  language: python
  files: \.sol$
  types: [file]
  pass_filenames: true
  require_serial: true
  args: ['--ci']
  additional_dependencies: ['miesc>=4.3.2']

- id: miesc-full
  name: MIESC Full Security Audit
  description: Complete 9-layer security audit with all 31 tools (run manually)
  entry: miesc audit full
  language: python
  files: \.sol$
  types: [file]
  pass_filenames: true
  require_serial: true
  stages: [manual]
  additional_dependencies: ['miesc>=4.3.2']

- id: miesc-layer
  name: MIESC Single Layer Scan
  description: Run specific layer analysis (default layer 1 - static analysis)
  entry: miesc audit layer 1
  language: python
  files: \.sol$
  types: [file]
  pass_filenames: true
  require_serial: true
  additional_dependencies: ['miesc>=4.3.2']
