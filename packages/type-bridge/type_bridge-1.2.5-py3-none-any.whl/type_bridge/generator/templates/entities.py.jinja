"""Entity type definitions generated from a TypeDB schema."""

from typing import ClassVar

from type_bridge import {{ imports | join(', ') }}

from . import attributes


{% for entity in entities %}
class {{ entity.class_name }}({{ entity.base_class }}):
    """{{ entity.docstring }}"""
    flags = TypeFlags({{ entity.flags_args | join(', ') }})
{% if entity.prefix %}
    prefix: ClassVar[str] = "{{ entity.prefix }}"
{% endif %}
{% if entity.plays %}
{% if entity.plays | length == 1 %}
    plays: ClassVar[tuple[str, ...]] = ("{{ entity.plays[0] }}",)
{% else %}
    plays: ClassVar[tuple[str, ...]] = (
{% for play in entity.plays %}
        "{{ play }}",
{% endfor %}
    )
{% endif %}
{% endif %}
{% for field in entity.fields %}
    {{ field }}
{% endfor %}
{% if entity.cascade_attrs %}
    # TODO: @cascade annotation (coming soon in TypeDB)
    # cascade_attrs: {{ entity.cascade_attrs }}
{% endif %}
{% if entity.subkey_groups %}
    # TODO: @subkey annotation (coming soon in TypeDB)
{% for group, attrs in entity.subkey_groups.items() %}
    # subkey_group "{{ group }}": {{ attrs }}
{% endfor %}
{% endif %}


{% endfor %}
__all__ = [
{% for name in all_names %}
    "{{ name }}",
{% endfor %}
]
