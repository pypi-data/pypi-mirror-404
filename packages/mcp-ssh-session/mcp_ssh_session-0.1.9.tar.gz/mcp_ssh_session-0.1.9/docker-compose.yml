version: '3.8'

services:
  mcp-ssh-session:
    build: .
    image: mcp-ssh-session:latest
    stdin_open: true
    tty: true
    environment:
      - PYTHONUNBUFFERED=1
      - PYTHONDONTWRITEBYTECODE=1
    volumes:
      # Mount SSH config (optional)
      # - ~/.ssh/config:/mounts/ssh-config/config:ro
      
      # Mount SSH keys directory (recommended)
      - ~/.ssh:/mounts/ssh-keys:ro
      
      # Mount log directory for persistence (optional)
      # - ./logs:/tmp/mcp_ssh_session_logs
      
      # Mount custom configuration (optional)
      # - ./config:/app/config:ro
    restart: unless-stopped
    # Add network configuration if needed
    # networks:
    #   - mcp-network

  # Example service that uses the MCP SSH session server
  # mcp-client:
  #   image: your-mcp-client:latest
  #   depends_on:
  #     - mcp-ssh-session
  #   stdin_open: true
  #   tty: true
  #   environment:
  #     - MCP_SERVER_URL=stdio://mcp-ssh-session
  #   networks:
  #     - mcp-network

# networks:
#   mcp-network:
#     driver: bridge