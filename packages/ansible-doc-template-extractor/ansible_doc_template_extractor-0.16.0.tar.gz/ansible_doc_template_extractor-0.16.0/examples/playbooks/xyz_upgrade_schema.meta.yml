# Spec file format for Ansible playbooks, using the format defined by this project.
argument_specs:
  xyz_upgrade_schema:
    short_description: Upgrade XYZ container to a new version (Embedded JSON schema format)
    description:
      - This playbook upgrades an XYZ container to a new version.
      - No version check is performed, this playbook simply replaces the container.
    requirements:
      - From where the playbook is run, there is network connectivity to the
        server running the XYZ container.
      - Permissions.
    version_added: "1.17"
    author:
      - Andreas Maier
    options_schema:
      # JSON schema format
      description: Playbook input variable 'params'.
      type: object
      additionalProperties: false
      required:
        - server
        - version
      properties:
        server:
          description: IP address or hostname of the server that runs the XYZ container.
          type: string
        version:
          description: Desired new version of the XYZ container.
          type: string
        foo_object:
          description: Demonstrate nested objects
          type: object
          additionalProperties: false
          required:
            - bar
          properties:
            bar:
              description: The bar.
              type: string
        foo_array:
          description: Demonstrate nested array of objects
          type: array
          items:
            type: object
            additionalProperties: false
            required:
              - bar
            properties:
              bar:
                description: The bar.
                type: string
    output_schema:
      # JSON schema format
      description: Playbook output variable 'output', in case of success.
      type: object
      additionalProperties: false
      required:
        - previous_version
      properties:
        previous_version:
          description: Version of the XYZ container before the upgrade.
          type: string
    examples:
      - short_description: Upgrade the XYZ container to a specified version
        command: |
          ansible-playbook xyz_upgrade
              -e '{"params": {"server": "10.11.12.13", "version": "1.8.0"}}'
