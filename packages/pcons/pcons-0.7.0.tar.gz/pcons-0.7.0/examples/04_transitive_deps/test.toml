# Test configuration for the transitive dependencies example

[test]
description = "Demonstrates transitive include directory propagation"

# Files that should exist after the build
# Object files are in obj.<target>/ subdirectories
# Paths are Unix-style; automatically adapted for Windows
expected_outputs = [
    "build/obj.simulator/math_lib.o",
    "build/obj.simulator/physics_lib.o",
    "build/obj.simulator/main.o",
    "build/simulator",
]

[verify]
# Run the built program and check output
# Commands are Unix-style; automatically adapted for Windows
commands = [
    { run = "./build/simulator", expect_stdout = "Mass: 10 kg" },
    { run = "./build/simulator", expect_stdout = "Kinetic Energy:" },
    { run = "./build/simulator", expect_stdout = "Momentum:" },
]

[skip]
# Works on all platforms with a C compiler
# Xcode builds to different output paths, so skip xcode testing
generators = ["xcode"]
