# Test configuration for the build variants example

[test]
description = "Demonstrates debug/release build variants using env.clone()"

# Files that should exist after the build
# Paths are Unix-style; automatically adapted for Windows
expected_outputs = [
    "build/debug/variant_demo",
    "build/release/variant_demo",
]

[verify]
# Debug variant should have DEBUG defined and assertions enabled
# Release variant should have NDEBUG defined (assertions disabled)
# Commands are Unix-style; automatically adapted for Windows
commands = [
    { run = "./build/debug/variant_demo", expect_stdout = "Running in DEBUG mode" },
    { run = "./build/debug/variant_demo", expect_stdout = "Assertions enabled" },
    { run = "./build/release/variant_demo", expect_stdout = "Running in RELEASE mode" },
    { run = "./build/release/variant_demo", expect_stdout = "Assertions disabled" },
]

[skip]
# Works on all platforms with a C compiler
# Xcode uses its own Debug/Release configuration system, not compatible with pcons variants
generators = ["xcode"]
