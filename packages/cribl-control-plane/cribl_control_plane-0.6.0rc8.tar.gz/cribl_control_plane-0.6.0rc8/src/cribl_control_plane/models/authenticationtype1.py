"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from .authenticationmethodoptionssasl1 import AuthenticationMethodOptionsSasl1
from .authenticationmethodoptionssasl2 import AuthenticationMethodOptionsSasl2
from .microsoftentraidauthenticationendpointoptionssasl import (
    MicrosoftEntraIDAuthenticationEndpointOptionsSasl,
)
from .saslmechanismoptionssasl1 import SaslMechanismOptionsSasl1
from cribl_control_plane import models
from cribl_control_plane.types import BaseModel, UNSET_SENTINEL
import pydantic
from pydantic import field_serializer, model_serializer
from typing import Optional
from typing_extensions import Annotated, NotRequired, TypedDict


class AuthenticationType1TypedDict(TypedDict):
    r"""Authentication parameters to use when connecting to brokers. Using TLS is highly recommended."""

    disabled: bool
    auth_type: NotRequired[AuthenticationMethodOptionsSasl1]
    r"""Enter password directly, or select a stored secret"""
    password: NotRequired[str]
    r"""Connection-string primary key, or connection-string secondary key, from the Event Hubs workspace"""
    text_secret: NotRequired[str]
    r"""Select or create a stored text secret"""
    mechanism: NotRequired[SaslMechanismOptionsSasl1]
    username: NotRequired[str]
    r"""The username for authentication. For Event Hubs, this should always be $ConnectionString."""
    client_secret_auth_type: NotRequired[AuthenticationMethodOptionsSasl2]
    client_secret: NotRequired[str]
    r"""client_secret to pass in the OAuth request parameter"""
    client_text_secret: NotRequired[str]
    r"""Select or create a stored text secret"""
    certificate_name: NotRequired[str]
    r"""Select or create a stored certificate"""
    cert_path: NotRequired[str]
    priv_key_path: NotRequired[str]
    passphrase: NotRequired[str]
    oauth_endpoint: NotRequired[MicrosoftEntraIDAuthenticationEndpointOptionsSasl]
    r"""Endpoint used to acquire authentication tokens from Azure"""
    client_id: NotRequired[str]
    r"""client_id to pass in the OAuth request parameter"""
    tenant_id: NotRequired[str]
    r"""Directory ID (tenant identifier) in Azure Active Directory"""
    scope: NotRequired[str]
    r"""Scope to pass in the OAuth request parameter"""


class AuthenticationType1(BaseModel):
    r"""Authentication parameters to use when connecting to brokers. Using TLS is highly recommended."""

    disabled: bool

    auth_type: Annotated[
        Optional[AuthenticationMethodOptionsSasl1], pydantic.Field(alias="authType")
    ] = None
    r"""Enter password directly, or select a stored secret"""

    password: Optional[str] = None
    r"""Connection-string primary key, or connection-string secondary key, from the Event Hubs workspace"""

    text_secret: Annotated[Optional[str], pydantic.Field(alias="textSecret")] = None
    r"""Select or create a stored text secret"""

    mechanism: Optional[SaslMechanismOptionsSasl1] = None

    username: Optional[str] = None
    r"""The username for authentication. For Event Hubs, this should always be $ConnectionString."""

    client_secret_auth_type: Annotated[
        Optional[AuthenticationMethodOptionsSasl2],
        pydantic.Field(alias="clientSecretAuthType"),
    ] = None

    client_secret: Annotated[Optional[str], pydantic.Field(alias="clientSecret")] = None
    r"""client_secret to pass in the OAuth request parameter"""

    client_text_secret: Annotated[
        Optional[str], pydantic.Field(alias="clientTextSecret")
    ] = None
    r"""Select or create a stored text secret"""

    certificate_name: Annotated[
        Optional[str], pydantic.Field(alias="certificateName")
    ] = None
    r"""Select or create a stored certificate"""

    cert_path: Annotated[Optional[str], pydantic.Field(alias="certPath")] = None

    priv_key_path: Annotated[Optional[str], pydantic.Field(alias="privKeyPath")] = None

    passphrase: Optional[str] = None

    oauth_endpoint: Annotated[
        Optional[MicrosoftEntraIDAuthenticationEndpointOptionsSasl],
        pydantic.Field(alias="oauthEndpoint"),
    ] = None
    r"""Endpoint used to acquire authentication tokens from Azure"""

    client_id: Annotated[Optional[str], pydantic.Field(alias="clientId")] = None
    r"""client_id to pass in the OAuth request parameter"""

    tenant_id: Annotated[Optional[str], pydantic.Field(alias="tenantId")] = None
    r"""Directory ID (tenant identifier) in Azure Active Directory"""

    scope: Optional[str] = None
    r"""Scope to pass in the OAuth request parameter"""

    @field_serializer("auth_type")
    def serialize_auth_type(self, value):
        if isinstance(value, str):
            try:
                return models.AuthenticationMethodOptionsSasl1(value)
            except ValueError:
                return value
        return value

    @field_serializer("mechanism")
    def serialize_mechanism(self, value):
        if isinstance(value, str):
            try:
                return models.SaslMechanismOptionsSasl1(value)
            except ValueError:
                return value
        return value

    @field_serializer("client_secret_auth_type")
    def serialize_client_secret_auth_type(self, value):
        if isinstance(value, str):
            try:
                return models.AuthenticationMethodOptionsSasl2(value)
            except ValueError:
                return value
        return value

    @field_serializer("oauth_endpoint")
    def serialize_oauth_endpoint(self, value):
        if isinstance(value, str):
            try:
                return models.MicrosoftEntraIDAuthenticationEndpointOptionsSasl(value)
            except ValueError:
                return value
        return value

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = set(
            [
                "authType",
                "password",
                "textSecret",
                "mechanism",
                "username",
                "clientSecretAuthType",
                "clientSecret",
                "clientTextSecret",
                "certificateName",
                "certPath",
                "privKeyPath",
                "passphrase",
                "oauthEndpoint",
                "clientId",
                "tenantId",
                "scope",
            ]
        )
        serialized = handler(self)
        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)

            if val != UNSET_SENTINEL:
                if val is not None or k not in optional_fields:
                    m[k] = val

        return m
