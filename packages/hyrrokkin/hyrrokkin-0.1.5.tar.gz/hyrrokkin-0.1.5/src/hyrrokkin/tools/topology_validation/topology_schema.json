{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "topology_schema.json",
  "title": "JSONSchema description of topology yaml files",
  "description": "Specify how topologies are defined in YAML",
  "type": "object",
  "additionalProperties": false,
  "required": [
  ],
  "properties": {
    "nodes": {
      "type": "object",
      "description": "mapping from a node id to its definition",
      "patternProperties": {
        ".*": {
          "type": "object",
          "additionalProperties": false,
          "required": [
          ],
          "properties": {
            "type": {
              "type": "string",
              "description": "specify the node's type as <package-id>:<node-type-id>",
              "pattern": "^\\s*[^\\s:]+:[^\\s]+\\s*$"
            },
            "data": {
              "type": "object",
              "description": "mapping from data keys to data file paths",
              "patternProperties": {
                ".*": {
                  "type": "string"
                }
              }
            },
            "properties": {
              "type": "object",
              "description": "mapping from property names to values",
              "patternProperties": {
                ".*": {
                }
              }
            }
          }
        }
      }
    },
    "links": {
      "type": "array",
      "description": "a list of strings describing links between nodes",
      "items": {
        "type": "string",
        "pattern": "^\\s*[^\\s:]+(:[^\\s]+)?\\s*=>\\s*[^\\s:]+(:[^\\s]+)?\\s*$"
      }
    },
    "metadata": {
      "type": "object",
      "description": "Attach metadata to this topology",
      "required": [
      ],
      "additionalProperties": true,
      "properties": {
        "name": {
          "type": "string",
          "description": "Provide a short descriptive name for this topology"
        },
        "description": {
          "type": "string",
          "description": "Provide a short description (~1 paragraph) of the purpose of this topology"
        }
      }
    }
  }
}
