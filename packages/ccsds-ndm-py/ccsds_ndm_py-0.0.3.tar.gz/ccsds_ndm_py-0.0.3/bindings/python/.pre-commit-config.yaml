fail_fast: true
default_install_hook_types: [pre-commit,pre-push]
exclude: |
  (?x)^(
    .*/(snapshots)/.*|
  )$

repos:
  - repo: local
    hooks:
      - id: local-ruff-check
        name: ruff check
        entry: just lint-python
        require_serial: true
        language: system
        types: [python]
        pass_filenames: false

      - id: local-ruff-format
        name: ruff format
        entry: just fmt-python
        require_serial: true
        language: system
        types: [python]
        pass_filenames: false

      - id: local-stub-check
        name: stub check
        entry: just stubs-check
        language: system
        pass_filenames: false
        always_run: true

      - id: sync-docstrings
        name: sync docstrings check
        entry: just sync-docs-check
        language: system
        pass_filenames: false
        files: ^(src/.*\.rs|../../ccsds-ndm/src/.*)$

      - id: audit-bindings
        name: audit bindings
        entry: just audit-strict
        language: system
        pass_filenames: false
        files: ^(src/.*\.rs|../../ccsds-ndm/src/.*)$
