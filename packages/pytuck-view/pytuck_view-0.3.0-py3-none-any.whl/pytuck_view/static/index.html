<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pytuck-view - Êï∞ÊçÆÂ∫ìÊü•ÁúãÂô®</title>
    <link rel="stylesheet" href="/static/app.css">
    <link rel="stylesheet" href="/static/components.css">
</head>
<body>
    <div id="app" v-cloak @click="handleGlobalClick">
        <!-- ËØ≠Ë®ÄÂàáÊç¢Âô®(Âè≥‰∏äËßí) -->
        <div class="language-switcher">
            <!-- Material Design ÁøªËØëÂõæÊ†á -->
            <svg
                class="language-toggle"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
                role="button"
                tabindex="0"
                @click="toggleLanguageMenu"
                @keydown.enter="toggleLanguageMenu"
                @keydown.space.prevent="toggleLanguageMenu"
                :aria-label="locale === 'zh_cn' ? 'ÂàáÊç¢ËØ≠Ë®Ä(ÂΩìÂâç:‰∏≠Êñá)' : 'Switch Language (Current: English)'"
                :aria-disabled="isLoadingLocale"
                :class="{ disabled: isLoadingLocale }"
            >
                <title>ËØ≠Ë®Ä/Language</title>
                <path d="M12.65,15.67 C12.79,15.31 12.7,14.9 12.42,14.62 L10.33,12.56 L10.36,12.53 C12.1,10.59 13.34,8.36 14.07,6 L16.01,6 C16.55,6 17,5.55 17,5.01 L17,4.99 C17,4.45 16.55,4 16.01,4 L10,4 L10,3 C10,2.45 9.55,2 9,2 C8.45,2 8,2.45 8,3 L8,4 L1.99,4 C1.45,4 1,4.45 1,4.99 C1,5.54 1.45,5.98 1.99,5.98 L12.17,5.98 C11.5,7.92 10.44,9.75 9,11.35 C8.19,10.46 7.51,9.49 6.94,8.47 C6.78,8.18 6.49,8 6.16,8 C5.47,8 5.03,8.75 5.37,9.35 C6,10.48 6.77,11.56 7.67,12.56 L3.3,16.87 C2.9,17.26 2.9,17.9 3.3,18.29 C3.69,18.68 4.32,18.68 4.72,18.29 L9,14 L11.02,16.02 C11.53,16.53 12.4,16.34 12.65,15.67 Z M17.5,10 C16.9,10 16.36,10.37 16.15,10.94 L12.48,20.74 C12.24,21.35 12.7,22 13.35,22 C13.74,22 14.09,21.76 14.23,21.39 L15.12,19 L19.87,19 L20.77,21.39 C20.91,21.75 21.26,22 21.65,22 C22.3,22 22.76,21.35 22.53,20.74 L18.86,10.94 C18.64,10.37 18.1,10 17.5,10 Z M15.88,17 L17.5,12.67 L19.12,17 L15.88,17 Z" fill="currentColor"/>
            </svg>
            <span v-if="isLoadingLocale" class="loading-indicator loading-overlay-icon">‚è≥</span>
            <div v-if="showLanguageMenu" class="language-menu">
                <div
                    class="language-menu-item"
                    :class="{ active: locale === 'zh_cn' }"
                    @click="switchLocale('zh_cn')"
                >
                    ÁÆÄ‰Ωì‰∏≠Êñá
                </div>
                <div
                    class="language-menu-item"
                    :class="{ active: locale === 'en_us' }"
                    @click="switchLocale('en_us')"
                >
                    English
                </div>
            </div>
        </div>

        <!-- Êñá‰ª∂ÈÄâÊã©Âô®È°µÈù¢ -->
        <div v-if="state.currentPage === 'file-selector'" class="file-selector">
            <header class="header">
                <h1>üìä pytuck-view</h1>
                <p>{{ t('common.selectDatabaseHint') }}</p>
            </header>

            <!-- Âç†‰ΩçÁ¨¶ÂäüËÉΩË≠¶Âëä -->
            <div v-if="state.placeholderWarning" class="warning">
                ‚ö†Ô∏è {{ state.placeholderWarning }}
                <button @click="state.placeholderWarning = null">√ó</button>
            </div>

            <div class="quick-actions">
                <button @click="openFileBrowser" class="btn btn-primary" :disabled="state.loading">
                    üìÅ {{ t('file.browseDirectory') }}
                </button>
            </div>

            <!-- ÂéÜÂè≤Êñá‰ª∂ÔºàÂç°ÁâáÔºâ -->
            <section v-if="state.recentFiles.length > 0" class="file-section">
                <h2>üìã {{ t('file.recentFiles') }}</h2>
                <div class="file-cards">
                    <div v-for="file in state.recentFiles" :key="file.file_id" class="file-card" @click="openFile(file.path)">
                        <div class="file-card-header">
                            <div class="file-card-title">
                                <span class="file-card-name">{{ file.name }}</span>
                                <span v-if="file.engine_name" class="engine-tag">{{ file.engine_name }}</span>
                            </div>
                            <button class="file-card-remove" :title="t('dataEdit.remove')" @click.stop="removeHistory(file.file_id)">√ó</button>
                        </div>
                        <div class="file-card-path">{{ file.path }}</div>
                        <div class="file-card-meta">
                            {{ formatFileSize(file.file_size) }} ‚Ä¢ {{ formatDate(file.last_opened) }}
                        </div>
                    </div>
                </div>
            </section>

            <!-- Á©∫Áä∂ÊÄÅ -->
            <div v-if="!state.loading && state.recentFiles.length === 0" class="empty-state">
                <p>üìÅ {{ t('file.noFilesYet') }}</p>
                <p>{{ t('common.selectDatabaseHint') }}</p>
            </div>
        </div>

        <!-- Êï∞ÊçÆÂ∫ìÊü•ÁúãÈ°µÈù¢ -->
        <div v-else-if="state.currentPage === 'database-view'" class="database-view">
            <header class="header">
                <button @click="backToFileSelector" class="btn btn-back">‚Üê {{ t('common.back') }}</button>
                <div class="db-info">
                    <h1>üìä {{ state.currentDatabase.name }}</h1>
                    <p>{{ state.currentDatabase.tables_count }} {{ t('common.tablesCount') }} ‚Ä¢ {{ formatFileSize(state.currentDatabase.file_size) }}</p>
                </div>
            </header>

            <!-- Âç†‰ΩçÁ¨¶ÂäüËÉΩË≠¶ÂëäÔºàÊï∞ÊçÆÂ∫ìÈ°µÈù¢Ôºâ -->
            <div v-if="state.placeholderWarning" class="warning">
                ‚ö†Ô∏è {{ state.placeholderWarning }}
                <button @click="state.placeholderWarning = null">√ó</button>
            </div>

            <div class="main-content">
                <!-- ‰æßËæπÊ†è - Ë°®ÂàóË°® -->
                <aside class="sidebar">
                    <h3>üìã {{ t('table.dataTables') }}</h3>
                    <div class="table-list">
                        <div v-for="table in state.tables" :key="table.name"
                             class="table-item"
                             :class="{
                                active: state.currentTable === table.name,
                                placeholder: table.name.startsWith('‚ö†Ô∏è') || table.name.startsWith('üí°') || table.name.startsWith('üìã')
                             }"
                             @click="selectTable(table.name)">
                            <div class="table-item-content">
                                <div class="table-item-name">{{ table.name }}</div>
                                <div v-if="table.comment" class="table-item-comment">{{ table.comment }}</div>
                            </div>
                            <button
                                v-if="!table.name.startsWith('‚ö†Ô∏è') && !table.name.startsWith('üí°') && !table.name.startsWith('üìã')"
                                class="table-item-edit btn-icon"
                                @click.stop="openTableEditModal(table)"
                                :title="t('dataEdit.edit')"
                            >‚úèÔ∏è</button>
                        </div>
                    </div>
                </aside>

                <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
                <main class="content">
                    <div v-if="!state.currentTable" class="welcome">
                        <h2>üëà {{ t('table.selectTableHint') }}</h2>
                    </div>

                    <div v-else>
                        <!-- Ë°®‰ø°ÊÅØ -->
                        <div v-if="state.tableSchema" class="table-info">
                            <div class="table-header">
                                <!-- Ë°®Âêç+Â§áÊ≥®+Ë°åÊï∞ ‰∏ÄË°åÊòæÁ§∫ -->
                                <div class="table-header-row">
                                    <div class="table-header-info">
                                        <h2>üìä {{ state.tableSchema.table_name }}</h2>
                                        <span v-if="state.tableSchema.table_comment" class="table-comment-inline">
                                            ({{ state.tableSchema.table_comment }})
                                        </span>
                                        <span v-if="!state.hasPrimaryKey" class="no-pk-warning">‚ö†Ô∏è {{ t('dataEdit.noPrimaryKey') }}</span>
                                    </div>
                                    <div class="table-header-meta">
                                        {{ state.tableSchema.row_count }} {{ t('table.rowsCount') }}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tab -->
                        <div class="tab-bar">
                            <button class="tab" :class="{active: state.activeTab === 'structure'}" @click="state.activeTab = 'structure'">{{ t('table.tabStructure') }}</button>
                            <button class="tab" :class="{active: state.activeTab === 'data'}" @click="switchToDataTab">{{ t('table.tabData') }}</button>
                        </div>

                        <!-- ÁªìÊûÑ Tab -->
                        <div v-if="state.activeTab === 'structure'" class="schema">
                            <div v-if="state.tableSchema && state.tableSchema.columns" class="schema-table-wrapper">
                                <table class="schema-table">
                                    <thead>
                                        <tr>
                                            <th>{{ t('table.colName') }}</th>
                                            <th>{{ t('table.colType') }}</th>
                                            <th>{{ t('table.colNullable') }}</th>
                                            <th>{{ t('table.colPrimaryKey') }}</th>
                                            <th>{{ t('table.colDefault') }}</th>
                                            <th>{{ t('table.colComment') }}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="col in state.tableSchema.columns" :key="col.name">
                                            <td class="col-name-cell">
                                                {{ col.name }}
                                            </td>
                                            <td class="col-type-cell">{{ col.type }}</td>
                                            <td class="col-nullable-cell">
                                                {{ col.nullable !== false ? t('common.yes') : t('common.no') }}
                                            </td>
                                            <td class="col-pk-cell">
                                                <span v-if="col.primary_key" class="pk-badge">üîë</span>
                                                <span v-else>-</span>
                                            </td>
                                            <td class="col-default-cell">
                                                {{ col.default_value || '-' }}
                                            </td>
                                            <td class="col-comment-cell">
                                                <template v-if="state.editingColumnComment !== col.name">
                                                    <div class="col-comment-display">
                                                        <span v-if="col.comment" class="col-comment-text">{{ col.comment }}</span>
                                                        <span v-else class="col-comment-text text-muted">-</span>
                                                        <button class="btn-icon btn-tiny" @click="startEditColumnComment(col.name, col.comment)" :title="t('dataEdit.editComment')">‚úèÔ∏è</button>
                                                    </div>
                                                </template>
                                                <template v-else>
                                                    <div class="col-comment-edit">
                                                        <input
                                                            v-model="state.editColumnCommentValue"
                                                            class="edit-input edit-input-small"
                                                            @keyup.enter="saveColumnComment(col.name)"
                                                            @keyup.escape="cancelEditColumnComment"
                                                        />
                                                        <button class="btn-icon btn-tiny btn-save" @click="saveColumnComment(col.name)" :title="t('dataEdit.save')">‚úì</button>
                                                        <button class="btn-icon btn-tiny btn-cancel" @click="cancelEditColumnComment" :title="t('common.cancel')">‚úï</button>
                                                    </div>
                                                </template>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Êï∞ÊçÆ Tab -->
                        <div v-else class="data-tab">
                            <!-- Â∑•ÂÖ∑Ê†è -->
                            <div class="data-toolbar">
                                <div class="toolbar-left">
                                    <button class="btn btn-small" @click="startAddRow" :disabled="state.isAddingRow">
                                        ‚ûï {{ t('dataEdit.addRow') }}
                                    </button>
                                    <span v-if="!state.hasPrimaryKey" class="toolbar-warning">
                                        ‚ö†Ô∏è {{ t('dataEdit.noPkEditLimit') }}
                                    </span>
                                </div>
                                <div class="toolbar-right">
                                    <button
                                        class="btn btn-small"
                                        :class="{ active: state.viewMode === 'table' }"
                                        @click="switchViewMode('table')"
                                    >
                                        üìã {{ t('dataEdit.tableView') }}
                                    </button>
                                    <button
                                        class="btn btn-small"
                                        :class="{ active: state.viewMode === 'record' }"
                                        @click="switchViewMode('record')"
                                        :disabled="!hasData"
                                    >
                                        üìÑ {{ t('dataEdit.recordView') }}
                                    </button>
                                </div>
                            </div>

                            <!-- Ë°®Ê†ºËßÜÂõæ -->
                            <template v-if="state.viewMode === 'table'">
                                <!-- Êñ∞Â¢ûË°åË°®Âçï -->
                                <div v-if="state.isAddingRow && state.tableSchema && state.tableSchema.columns" class="add-row-form">
                                    <h4>{{ t('dataEdit.newRecord') }}</h4>
                                    <div class="add-row-fields">
                                        <div v-for="col in state.tableSchema.columns" :key="col.name" class="add-row-field">
                                            <label>{{ col.name }}</label>
                                            <input
                                                v-model="state.newRowData[col.name]"
                                                :placeholder="col.type"
                                                class="edit-input"
                                            />
                                        </div>
                                    </div>
                                    <div class="add-row-actions">
                                        <button class="btn btn-primary btn-small" @click="saveNewRow">{{ t('dataEdit.save') }}</button>
                                        <button class="btn btn-small" @click="cancelAddRow">{{ t('common.cancel') }}</button>
                                    </div>
                                </div>

                                <!-- Êï∞ÊçÆË°®Ê†º -->
                                <div v-if="hasData && state.tableSchema && state.tableSchema.columns" class="data-table">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th class="action-col">{{ t('dataEdit.actions') }}</th>
                                                <th v-for="col in state.tableSchema.columns" :key="col.name"
                                                    @click="sortTable(col.name)"
                                                    class="sortable">
                                                    {{ col.name }}
                                                    <span v-if="state.sortBy === col.name">
                                                        <span v-if="state.sortOrder === 'asc'">‚Üë</span>
                                                        <span v-else>‚Üì</span>
                                                    </span>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="(row, index) in state.tableData" :key="index"
                                                :class="{
                                                    selected: state.selectedRowIndex === index,
                                                    editing: state.editRowIndex === index
                                                }"
                                                @click="selectRow(index)">
                                                <!-- Êìç‰ΩúÂàó -->
                                                <td class="action-col">
                                                    <template v-if="state.editRowIndex !== index">
                                                        <button
                                                            class="btn-icon btn-tiny"
                                                            @click.stop="startEditRow(index)"
                                                            :disabled="!state.hasPrimaryKey"
                                                            :title="t('dataEdit.edit')"
                                                        >‚úèÔ∏è</button>
                                                        <button
                                                            class="btn-icon btn-tiny btn-danger"
                                                            @click.stop="deleteRow(index)"
                                                            :disabled="!state.hasPrimaryKey"
                                                            :title="t('dataEdit.delete')"
                                                        >üóëÔ∏è</button>
                                                    </template>
                                                    <template v-else>
                                                        <button class="btn-icon btn-tiny btn-save" @click.stop="saveEditRow" :title="t('dataEdit.save')">‚úì</button>
                                                        <button class="btn-icon btn-tiny btn-cancel" @click.stop="cancelEditRow" :title="t('common.cancel')">‚úï</button>
                                                    </template>
                                                </td>
                                                <!-- Êï∞ÊçÆÂàó -->
                                                <td v-for="col in state.tableSchema.columns" :key="col.name">
                                                    <template v-if="state.editRowIndex !== index">
                                                        {{ row[col.name] }}
                                                    </template>
                                                    <template v-else>
                                                        <input
                                                            v-model="state.editBuffer[col.name]"
                                                            class="edit-input edit-input-cell"
                                                            :disabled="col.primary_key"
                                                        />
                                                    </template>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- Á©∫Êï∞ÊçÆÊèêÁ§∫ -->
                                <div v-else class="empty-data">
                                    <p>üì≠ {{ t('dataEdit.noData') }}</p>
                                </div>
                            </template>

                            <!-- ÈÄêÊù°ËÆ∞ÂΩïËßÜÂõæ -->
                            <template v-else-if="state.viewMode === 'record'">
                                <div v-if="hasData && state.selectedRowIndex !== null && state.tableSchema && state.tableSchema.columns" class="record-view">
                                    <!-- ËÆ∞ÂΩïÂØºËà™ -->
                                    <div class="record-nav">
                                        <button class="btn btn-small" @click="prevRecord" :disabled="state.selectedRowIndex === 0">
                                            ‚óÄ {{ t('dataEdit.prevRecord') }}
                                        </button>
                                        <span class="record-counter">
                                            {{ t('dataEdit.recordCounter').replace('{current}', state.selectedRowIndex + 1).replace('{total}', state.tableData.length) }}
                                        </span>
                                        <button class="btn btn-small" @click="nextRecord" :disabled="state.selectedRowIndex >= state.tableData.length - 1">
                                            {{ t('dataEdit.nextRecord') }} ‚ñ∂
                                        </button>
                                    </div>

                                    <!-- ËÆ∞ÂΩïËØ¶ÊÉÖ -->
                                    <div class="record-detail">
                                        <table class="record-table">
                                            <tbody>
                                                <tr v-for="col in state.tableSchema.columns" :key="col.name">
                                                    <th class="record-field-name">
                                                        <div class="field-name-wrapper">
                                                            {{ col.name }}
                                                            <span v-if="col.primary_key" class="pk-badge">üîë</span>
                                                        </div>
                                                        <div v-if="col.comment" class="field-comment">{{ col.comment }}</div>
                                                    </th>
                                                    <td class="record-field-value">
                                                        <template v-if="state.editRowIndex !== state.selectedRowIndex">
                                                            {{ state.tableData[state.selectedRowIndex][col.name] }}
                                                        </template>
                                                        <template v-else>
                                                            <textarea
                                                                v-if="col.type && (col.type.toLowerCase().includes('str') || col.type.toLowerCase().includes('text') || col.type.toLowerCase().includes('varchar') || col.type.toLowerCase().includes('char'))"
                                                                v-model="state.editBuffer[col.name]"
                                                                class="edit-input edit-textarea"
                                                                :disabled="col.primary_key"
                                                                rows="3"
                                                            ></textarea>
                                                            <input
                                                                v-else
                                                                v-model="state.editBuffer[col.name]"
                                                                class="edit-input"
                                                                :disabled="col.primary_key"
                                                            />
                                                        </template>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <!-- ËÆ∞ÂΩïÊìç‰Ωú -->
                                    <div class="record-actions">
                                        <template v-if="state.editRowIndex !== state.selectedRowIndex">
                                            <button
                                                class="btn btn-primary"
                                                @click="startEditRecord"
                                                :disabled="!state.hasPrimaryKey"
                                            >
                                                ‚úèÔ∏è {{ t('dataEdit.edit') }}
                                            </button>
                                            <button
                                                class="btn btn-danger"
                                                @click="deleteRecord"
                                                :disabled="!state.hasPrimaryKey"
                                            >
                                                üóëÔ∏è {{ t('dataEdit.delete') }}
                                            </button>
                                        </template>
                                        <template v-else>
                                            <button class="btn btn-primary" @click="saveEditRecord">
                                                ‚úì {{ t('dataEdit.save') }}
                                            </button>
                                            <button class="btn" @click="cancelEditRecord">
                                                ‚úï {{ t('common.cancel') }}
                                            </button>
                                        </template>
                                        <button class="btn" @click="switchViewMode('table')">
                                            üìã {{ t('dataEdit.returnTableView') }}
                                        </button>
                                    </div>
                                </div>
                                <div v-else class="empty-data">
                                    <p>üì≠ {{ t('dataEdit.noData') }}</p>
                                </div>
                            </template>

                            <!-- ÂàÜÈ°µ -->
                            <div v-if="totalPages > 1" class="pagination">
                                <button @click="goToPage(1)" :disabled="state.currentPageNum === 1">{{ t('dataEdit.firstPage') }}</button>
                                <button @click="goToPage(state.currentPageNum - 1)" :disabled="state.currentPageNum === 1">{{ t('dataEdit.prevPage') }}</button>
                                <span>{{ t('dataEdit.pageInfo').replace('{current}', state.currentPageNum).replace('{total}', totalPages) }}</span>
                                <button @click="goToPage(state.currentPageNum + 1)" :disabled="state.currentPageNum === totalPages">{{ t('dataEdit.nextPage') }}</button>
                                <button @click="goToPage(totalPages)" :disabled="state.currentPageNum === totalPages">{{ t('dataEdit.lastPage') }}</button>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>

        <!-- Êñá‰ª∂ÊµèËßàÂô®Ê®°ÊÄÅÊ°Ü -->
        <div v-if="fileBrowser.visible" class="file-browser-overlay" @click.self="closeFileBrowser">
            <div class="file-browser-modal">
                <div class="file-browser-header">
                    <h2>üìÅ {{ t('file.selectDatabaseFile') }}</h2>
                    <button class="file-browser-close" @click="closeFileBrowser">√ó</button>
                </div>

                <div class="file-browser-controls">
                    <div class="file-browser-path-input">
                        <input
                            v-model="fileBrowser.pathInput"
                            @keyup.enter="goToPath"
                            :placeholder="t('dataEdit.inputPath')"
                        />
                        <button @click="goToPath">{{ t('file.goTo') }}</button>
                    </div>

                    <div class="file-browser-breadcrumb">
                        <span
                            v-for="(part, index) in breadcrumbs"
                            :key="index"
                        >
                            <span class="breadcrumb-item" @click="goToBreadcrumb(index)">
                                {{ part.name }}
                            </span>
                            <span v-if="index < breadcrumbs.length - 1" class="breadcrumb-separator">/</span>
                        </span>
                    </div>
                </div>

                <div class="file-browser-content">
                    <div v-if="fileBrowser.loading" style="text-align: center; padding: 40px;">
                    </div>

                    <ul v-else-if="fileBrowser.entries.length > 0" class="file-browser-list">
                        <!-- ‰∏äÁ∫ßÁõÆÂΩï -->
                        <li v-if="canGoUp" class="file-browser-item" @click="goUp">
                            <div class="file-browser-item-info">
                                <span class="file-browser-item-icon">üìÅ</span>
                                <div>
                                    <div class="file-browser-item-name">..</div>
                                    <div class="file-browser-item-meta">{{ t('file.parentDirectory') }}</div>
                                </div>
                            </div>
                        </li>

                        <!-- ÁõÆÂΩïÂíåÊñá‰ª∂ -->
                        <li
                            v-for="entry in fileBrowser.entries"
                            :key="entry.path"
                            class="file-browser-item"
                            @click="entry.type === 'dir' ? browseTo(entry.path) : null"
                        >
                            <div class="file-browser-item-info">
                                <span class="file-browser-item-icon">
                                    {{ entry.type === 'dir' ? 'üìÅ' : 'üìÑ' }}
                                </span>
                                <div>
                                    <div class="file-browser-item-name">{{ entry.name }}</div>
                                    <div class="file-browser-item-meta">
                                        {{ entry.type === 'file' ? formatFileSize(entry.size) : '' }}
                                    </div>
                                </div>
                            </div>
                            <button
                                v-if="entry.type === 'file'"
                                class="file-browser-item-action"
                                @click.stop="selectAndOpenFile(entry.path)"
                            >
                                {{ t('common.open') }}
                            </button>
                        </li>
                    </ul>

                    <div v-else class="file-browser-empty">
                        <p>üìÇ {{ t('dataEdit.emptyDir') }}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ë°®ÁºñËæëÂºπÁ™ó -->
        <div v-if="state.showTableEditModal" class="modal-overlay" @click.self="closeTableEditModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>{{ t('dataEdit.editTableName') }}</h3>
                    <button class="btn-icon" @click="closeTableEditModal">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>{{ t('table.tableName') }}</label>
                        <input
                            v-model="state.tableEditForm.name"
                            class="edit-input"
                            @keyup.enter="saveTableEdit"
                        />
                    </div>
                    <div class="form-group">
                        <label>{{ t('table.colComment') }}</label>
                        <textarea
                            v-model="state.tableEditForm.comment"
                            class="edit-input"
                            rows="3"
                            :placeholder="t('dataEdit.inputTableComment')"
                        ></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn" @click="closeTableEditModal">{{ t('common.cancel') }}</button>
                    <button class="btn btn-primary" @click="saveTableEdit">{{ t('dataEdit.save') }}</button>
                </div>
            </div>
        </div>

        <!-- Toast Ê∂àÊÅØÊèêÁ§∫Ê°Ü -->
        <div v-if="state.error" class="toast toast-error">
            <div class="toast-content">{{ state.error }}</div>
            <div class="toast-actions">
                <button class="toast-btn" @click="state.error = null" :title="t('common.close')">‚ùå</button>
                <button class="toast-btn" @click="copyErrorMessage" :title="t('common.copy')">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                        <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- ÂÖ®Â±ÄÂä†ËΩΩÁä∂ÊÄÅ -->
        <div v-if="state.loading" class="loading-overlay">
            <div class="loading"></div>
        </div>
    </div>

    <!-- Vue.js 3.x Êú¨Âú∞Êñá‰ª∂ -->
    <script src="/static/vue.min.js"></script>
    <!-- Â∫îÁî®ÈÄªËæë -->
    <script src="/static/app.js"></script>

</body>
</html>
