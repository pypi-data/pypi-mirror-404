import{j as t,d,t as l}from"./vendor-tanstack-BcZfOOfy.js";import{D as p,B as x,g as b,h as i,bw as f,bF as g,bH as j,bI as h,bJ as v,bK as D,y as m}from"./index-B8vo2Lrg.js";import"./automation-schema-BIBsyp0j.js";import{A as B}from"./automation-wizard-Bmgt6nn8.js";import{t as N}from"./event-to-trigger-BEzU9b5I.js";import"./vendor-react-Bce9NwRC.js";import"./vendor-radix-BTiKGWfR.js";import"./vendor-recharts-BvvJP9Po.js";import"./vendor-forms-ClCIacbh.js";import"./vendor-date-wwuDAncJ.js";import"./zod-Cuos7J7w.js";import"./form-mws4law8.js";import"./use-stepper-DyIb3vlq.js";import"./textarea-DUhh6-kq.js";import"./index-D6ynV6U7.js";import"./radio-group-BUsmwdrt.js";import"./collapsible-B_NJS0uJ.js";import"./tags-input-DHrnkwjQ.js";const y=()=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(A,{}),t.jsx(p,{label:"Documentation",id:"automations-guide"})]}),A=()=>t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(x,{children:t.jsxs(b,{children:[t.jsx(i,{children:t.jsx(f,{to:"/automations",className:"text-xl font-semibold",children:"Automations"})}),t.jsx(g,{}),t.jsx(i,{className:"text-xl font-semibold",children:t.jsx(j,{children:"Create"})})]})})});function S(a){const[e,o,s]=a.split("-").map(Number);return new Date(e,o-1,s)}function E(){const{eventId:a,eventDate:e}=v.useSearch(),o=!!(a&&e),{data:s}=l({...D(a??"",e?S(e):new Date),enabled:o});if(!o||!s)return;const{trigger:n,triggerTemplate:r}=N(s);return{trigger:n,triggerTemplate:r}}function q(){const{createAutomation:a,isPending:e}=h(),o=d(),s=E(),n=r=>{const c={name:r.name,description:r.description??"",enabled:!0,trigger:r.trigger,actions:r.actions};a(c,{onSuccess:()=>{m.success("Automation created successfully"),o({to:"/automations"})},onError:u=>{m.error(`Failed to create automation: ${u.message}`)}})};return t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx(y,{}),t.jsx(B,{defaultValues:s,onSubmit:n,isSubmitting:e})]})}export{q as component};
//# sourceMappingURL=create-MoiIE9Ms.js.map
