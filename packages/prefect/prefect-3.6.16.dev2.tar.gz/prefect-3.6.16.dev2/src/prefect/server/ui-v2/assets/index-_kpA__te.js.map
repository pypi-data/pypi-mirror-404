{"version":3,"file":"index-_kpA__te.js","sources":["../../src/components/variables/data-table/cells.tsx","../../src/components/variables/data-table/data-table.tsx","../../src/components/variables/empty-state.tsx","../../src/components/variables/variable-dialog/use-variable-dialog.ts","../../src/components/variables/variable-dialog/variable-dialog.tsx","../../src/routes/variables/index.tsx?tsr-split=component"],"sourcesContent":["import type { CellContext } from \"@tanstack/react-table\";\nimport { useRef } from \"react\";\nimport { toast } from \"sonner\";\nimport type { components } from \"@/api/prefect\";\nimport { useDeleteVariable } from \"@/api/variables\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuLabel,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n\tHoverCard,\n\tHoverCardContent,\n\tHoverCardTrigger,\n} from \"@/components/ui/hover-card\";\nimport { Icon } from \"@/components/ui/icons\";\nimport { LazyJsonInput as JsonInput } from \"@/components/ui/json-input-lazy\";\nimport { useIsOverflowing } from \"@/hooks/use-is-overflowing\";\n\ntype ActionsCellProps = CellContext<\n\tcomponents[\"schemas\"][\"Variable\"],\n\tunknown\n> & {\n\tonVariableEdit: (variable: components[\"schemas\"][\"Variable\"]) => void;\n};\n\nexport const ActionsCell = ({ row, onVariableEdit }: ActionsCellProps) => {\n\tconst id = row.original.id;\n\tconst { deleteVariable } = useDeleteVariable();\n\tif (!id) return null;\n\n\tconst onVariableDelete = () => {\n\t\tdeleteVariable(id, {\n\t\t\tonSuccess: () => {\n\t\t\t\ttoast.success(\"Variable deleted\");\n\t\t\t},\n\t\t});\n\t};\n\n\treturn (\n\t\t<div className=\"flex flex-row justify-end\">\n\t\t\t<DropdownMenu>\n\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t<Button variant=\"outline\" className=\"size-8 p-0\">\n\t\t\t\t\t\t<span className=\"sr-only\">Open menu</span>\n\t\t\t\t\t\t<Icon id=\"MoreVertical\" className=\"size-4\" />\n\t\t\t\t\t</Button>\n\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t<DropdownMenuContent align=\"end\">\n\t\t\t\t\t<DropdownMenuLabel>Actions</DropdownMenuLabel>\n\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tvoid navigator.clipboard.writeText(id);\n\t\t\t\t\t\t\ttoast.success(\"ID copied\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tCopy ID\n\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tvoid navigator.clipboard.writeText(row.original.name);\n\t\t\t\t\t\t\ttoast.success(\"Name copied\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tCopy Name\n\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tconst copyValue =\n\t\t\t\t\t\t\t\ttypeof row.original.value !== \"string\"\n\t\t\t\t\t\t\t\t\t? JSON.stringify(row.original.value)\n\t\t\t\t\t\t\t\t\t: row.original.value;\n\t\t\t\t\t\t\tif (copyValue) {\n\t\t\t\t\t\t\t\tvoid navigator.clipboard.writeText(copyValue);\n\t\t\t\t\t\t\t\ttoast.success(\"Value copied\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tCopy Value\n\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t<DropdownMenuItem onClick={() => onVariableEdit(row.original)}>\n\t\t\t\t\t\tEdit\n\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t<DropdownMenuItem onClick={onVariableDelete}>Delete</DropdownMenuItem>\n\t\t\t\t</DropdownMenuContent>\n\t\t\t</DropdownMenu>\n\t\t</div>\n\t);\n};\n\nexport const ValueCell = (\n\tprops: CellContext<components[\"schemas\"][\"Variable\"], unknown>,\n) => {\n\tconst value = props.getValue();\n\tconst codeRef = useRef<HTMLDivElement>(null);\n\tconst isOverflowing = useIsOverflowing(codeRef);\n\n\tif (!value) return null;\n\treturn (\n\t\t// Disable the hover card if the value is not overflowing\n\t\t<HoverCard open={isOverflowing ? undefined : false}>\n\t\t\t<HoverCardTrigger asChild>\n\t\t\t\t<code\n\t\t\t\t\tref={codeRef}\n\t\t\t\t\tclassName=\"px-2 py-1 font-mono text-sm text-ellipsis overflow-hidden whitespace-nowrap block\"\n\t\t\t\t>\n\t\t\t\t\t{JSON.stringify(value, null, 2)}\n\t\t\t\t</code>\n\t\t\t</HoverCardTrigger>\n\t\t\t<HoverCardContent className=\"p-0\">\n\t\t\t\t<JsonInput value={JSON.stringify(value, null, 2)} disabled />\n\t\t\t</HoverCardContent>\n\t\t</HoverCard>\n\t);\n};\n","import {\n\ttype ColumnFiltersState,\n\tcreateColumnHelper,\n\tgetCoreRowModel,\n\ttype OnChangeFn,\n\ttype PaginationState,\n\tuseReactTable,\n} from \"@tanstack/react-table\";\nimport type React from \"react\";\nimport { useCallback, useMemo } from \"react\";\nimport type { components } from \"@/api/prefect\";\nimport { DataTable } from \"@/components/ui/data-table\";\nimport { SearchInput } from \"@/components/ui/input\";\nimport {\n\tSelect,\n\tSelectContent,\n\tSelectItem,\n\tSelectTrigger,\n\tSelectValue,\n} from \"@/components/ui/select\";\nimport { TagBadgeGroup } from \"@/components/ui/tag-badge-group\";\nimport { TagsInput } from \"@/components/ui/tags-input\";\nimport { pluralize } from \"@/utils\";\nimport { ActionsCell, ValueCell } from \"./cells\";\n\nconst columnHelper = createColumnHelper<components[\"schemas\"][\"Variable\"]>();\n\nconst createColumns = (\n\tonVariableEdit: (variable: components[\"schemas\"][\"Variable\"]) => void,\n) => [\n\tcolumnHelper.accessor(\"name\", {\n\t\theader: \"Name\",\n\t}),\n\tcolumnHelper.accessor(\"value\", {\n\t\theader: \"Value\",\n\t\tcell: ValueCell,\n\t}),\n\tcolumnHelper.accessor(\"updated\", {\n\t\theader: \"Updated\",\n\t\tcell: (props) => {\n\t\t\tconst updated = props.getValue();\n\t\t\tif (!updated) return null;\n\t\t\treturn new Date(updated ?? new Date())\n\t\t\t\t.toLocaleString(undefined, {\n\t\t\t\t\tyear: \"numeric\",\n\t\t\t\t\tmonth: \"numeric\",\n\t\t\t\t\tday: \"numeric\",\n\t\t\t\t\thour: \"numeric\",\n\t\t\t\t\tminute: \"numeric\",\n\t\t\t\t\tsecond: \"numeric\",\n\t\t\t\t\thour12: true,\n\t\t\t\t})\n\t\t\t\t.replace(\",\", \"\");\n\t\t},\n\t}),\n\tcolumnHelper.accessor(\"tags\", {\n\t\theader: () => null,\n\t\tcell: (props) => {\n\t\t\tconst tags = props.getValue();\n\t\t\tif (!tags) return null;\n\t\t\treturn <TagBadgeGroup tags={tags} maxTagsDisplayed={3} />;\n\t\t},\n\t}),\n\tcolumnHelper.display({\n\t\tid: \"actions\",\n\t\tcell: (props) => <ActionsCell {...props} onVariableEdit={onVariableEdit} />,\n\t}),\n];\n\ntype VariablesDataTableProps = {\n\tvariables: components[\"schemas\"][\"Variable\"][];\n\tcurrentVariableCount: number;\n\tpagination: PaginationState;\n\tonPaginationChange: (newPagination: PaginationState) => void;\n\tcolumnFilters: ColumnFiltersState;\n\tonColumnFiltersChange: (newColumnFilters: ColumnFiltersState) => void;\n\tsorting: components[\"schemas\"][\"VariableSort\"];\n\tonSortingChange: (sortKey: components[\"schemas\"][\"VariableSort\"]) => void;\n\tonVariableEdit: (variable: components[\"schemas\"][\"Variable\"]) => void;\n};\n\nexport const VariablesDataTable = ({\n\tvariables,\n\tcurrentVariableCount,\n\tpagination,\n\tonPaginationChange,\n\tcolumnFilters,\n\tonColumnFiltersChange,\n\tsorting,\n\tonSortingChange,\n\tonVariableEdit,\n}: VariablesDataTableProps) => {\n\tconst columns = useMemo(\n\t\t() => createColumns(onVariableEdit),\n\t\t[onVariableEdit],\n\t);\n\n\tconst nameSearchValue = columnFilters.find((filter) => filter.id === \"name\")\n\t\t?.value as string;\n\tconst tagsSearchValue = columnFilters.find((filter) => filter.id === \"tags\")\n\t\t?.value as string[];\n\tconst handleNameSearchChange = useCallback(\n\t\t(value?: string) => {\n\t\t\tconst filters = columnFilters.filter((filter) => filter.id !== \"name\");\n\t\t\tonColumnFiltersChange(\n\t\t\t\tvalue ? [...filters, { id: \"name\", value }] : filters,\n\t\t\t);\n\t\t},\n\t\t[onColumnFiltersChange, columnFilters],\n\t);\n\n\tconst handleTagsSearchChange: React.ChangeEventHandler<HTMLInputElement> &\n\t\t((tags: string[]) => void) = useCallback(\n\t\t(e: string[] | React.ChangeEvent<HTMLInputElement>) => {\n\t\t\tconst tags = Array.isArray(e) ? e : e.target.value;\n\t\t\tconst filters = columnFilters.filter((filter) => filter.id !== \"tags\");\n\t\t\tonColumnFiltersChange(\n\t\t\t\ttags.length ? [...filters, { id: \"tags\", value: tags }] : filters,\n\t\t\t);\n\t\t},\n\t\t[onColumnFiltersChange, columnFilters],\n\t);\n\n\tconst handlePaginationChange: OnChangeFn<PaginationState> = useCallback(\n\t\t(updater) => {\n\t\t\tlet newPagination = pagination;\n\t\t\tif (typeof updater === \"function\") {\n\t\t\t\tnewPagination = updater(pagination);\n\t\t\t} else {\n\t\t\t\tnewPagination = updater;\n\t\t\t}\n\t\t\tonPaginationChange(newPagination);\n\t\t},\n\t\t[pagination, onPaginationChange],\n\t);\n\n\tconst table = useReactTable({\n\t\tdata: variables,\n\t\tcolumns: columns,\n\t\tstate: {\n\t\t\tpagination,\n\t\t\tcolumnFilters,\n\t\t},\n\t\tgetCoreRowModel: getCoreRowModel(),\n\t\tmanualPagination: true,\n\t\tonPaginationChange: handlePaginationChange,\n\t\trowCount: currentVariableCount,\n\t\tdefaultColumn: {\n\t\t\tmaxSize: 300,\n\t\t},\n\t});\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"grid sm:grid-cols-2 md:grid-cols-6 lg:grid-cols-12 gap-2 pb-4 items-center\">\n\t\t\t\t<div className=\"sm:col-span-2 md:col-span-6 lg:col-span-4 order-last lg:order-first\">\n\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t{currentVariableCount} {pluralize(currentVariableCount, \"Variable\")}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"sm:col-span-2 md:col-span-2 lg:col-span-3\">\n\t\t\t\t\t<SearchInput\n\t\t\t\t\t\tplaceholder=\"Search variables\"\n\t\t\t\t\t\tvalue={nameSearchValue}\n\t\t\t\t\t\tonChange={(e) => handleNameSearchChange(e.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"xs:col-span-1 md:col-span-2 lg:col-span-3\">\n\t\t\t\t\t<TagsInput\n\t\t\t\t\t\tplaceholder=\"Filter by tags\"\n\t\t\t\t\t\tonChange={handleTagsSearchChange}\n\t\t\t\t\t\tvalue={tagsSearchValue}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"xs:col-span-1 md:col-span-2 lg:col-span-2\">\n\t\t\t\t\t<Select value={sorting} onValueChange={onSortingChange}>\n\t\t\t\t\t\t<SelectTrigger aria-label=\"Variable sort order\" className=\"w-full\">\n\t\t\t\t\t\t\t<SelectValue placeholder=\"Sort by\" />\n\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t<SelectItem value=\"CREATED_DESC\">Created</SelectItem>\n\t\t\t\t\t\t\t<SelectItem value=\"UPDATED_DESC\">Updated</SelectItem>\n\t\t\t\t\t\t\t<SelectItem value=\"NAME_ASC\">A to Z</SelectItem>\n\t\t\t\t\t\t\t<SelectItem value=\"NAME_DESC\">Z to A</SelectItem>\n\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t</Select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<DataTable table={table} />\n\t\t</div>\n\t);\n};\n","import { Button } from \"@/components/ui/button\";\nimport { DocsLink } from \"@/components/ui/docs-link\";\nimport {\n\tEmptyState,\n\tEmptyStateActions,\n\tEmptyStateDescription,\n\tEmptyStateIcon,\n\tEmptyStateTitle,\n} from \"@/components/ui/empty-state\";\nimport { Icon } from \"@/components/ui/icons\";\n\ntype VariablesEmptyStateProps = {\n\tonAddVariableClick: () => void;\n};\nexport const VariablesEmptyState = ({\n\tonAddVariableClick,\n}: VariablesEmptyStateProps) => (\n\t<EmptyState>\n\t\t<EmptyStateIcon id=\"Variable\" />\n\t\t<EmptyStateTitle>Add a variable to get started</EmptyStateTitle>\n\t\t<EmptyStateDescription>\n\t\t\tVariables store non-sensitive pieces of JSON.\n\t\t</EmptyStateDescription>\n\t\t<EmptyStateActions>\n\t\t\t<Button onClick={() => onAddVariableClick()}>\n\t\t\t\tAdd Variable <Icon id=\"Plus\" className=\"size-4 ml-2\" />\n\t\t\t</Button>\n\t\t\t<DocsLink id=\"variables-guide\" />\n\t\t</EmptyStateActions>\n\t</EmptyState>\n);\n","import { useCallback, useState } from \"react\";\nimport type { VariableDialogProps } from \"./variable-dialog\";\n\nexport const useVariableDialog = () => {\n\tconst handleVariableDialogOpenChange = useCallback((open: boolean) => {\n\t\tsetDialogState((prev) => ({\n\t\t\t...prev,\n\t\t\topen,\n\t\t}));\n\t}, []);\n\n\tconst [dialogState, setDialogState] = useState<VariableDialogProps>({\n\t\topen: false,\n\t\tonOpenChange: handleVariableDialogOpenChange,\n\t});\n\n\tconst handleVariableAddOrEdit = useCallback(\n\t\t(variableToEdit?: VariableDialogProps[\"variableToEdit\"]) => {\n\t\t\tsetDialogState((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\topen: true,\n\t\t\t\tvariableToEdit,\n\t\t\t}));\n\t\t},\n\t\t[],\n\t);\n\n\treturn [dialogState, handleVariableAddOrEdit] as const;\n};\n","import { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useEffect, useMemo } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { toast } from \"sonner\";\nimport { z } from \"zod\";\nimport type { components } from \"@/api/prefect\";\nimport { useCreateVariable, useUpdateVariable } from \"@/api/variables\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDialog,\n\tDialogClose,\n\tDialogContent,\n\tDialogDescription,\n\tDialogFooter,\n\tDialogHeader,\n\tDialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n\tForm,\n\tFormControl,\n\tFormField,\n\tFormItem,\n\tFormLabel,\n\tFormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { LazyJsonInput as JsonInput } from \"@/components/ui/json-input-lazy\";\nimport { TagsInput } from \"@/components/ui/tags-input\";\n\nexport type JSONValue =\n\t| string\n\t| number\n\t| boolean\n\t| Record<string, never>\n\t| unknown[]\n\t| null;\n\nconst formSchema = z.object({\n\tname: z.string().min(2, { message: \"Name must be at least 2 characters\" }),\n\tvalue: z.string(),\n\ttags: z.string().array().optional(),\n});\n\nexport type VariableDialogProps = {\n\tonOpenChange: (open: boolean) => void;\n\topen: boolean;\n\tvariableToEdit?: components[\"schemas\"][\"Variable\"];\n};\n\nconst VARIABLE_FORM_DEFAULT_VALUES = {\n\tname: \"\",\n\tvalue: \"\",\n\ttags: [],\n};\n\nexport const VariableDialog = ({\n\tonOpenChange,\n\topen,\n\tvariableToEdit,\n}: VariableDialogProps) => {\n\tconst form = useForm({\n\t\tresolver: zodResolver(formSchema),\n\t\tdefaultValues: VARIABLE_FORM_DEFAULT_VALUES,\n\t});\n\tconst initialValues = useMemo(() => {\n\t\tif (!variableToEdit) return undefined;\n\t\treturn {\n\t\t\tname: variableToEdit.name,\n\t\t\tvalue: JSON.stringify(variableToEdit.value, null, 2),\n\t\t\ttags: variableToEdit.tags,\n\t\t};\n\t}, [variableToEdit]);\n\n\tuseEffect(() => {\n\t\t// Ensure we start with the initial values when the dialog opens\n\t\tif (open) {\n\t\t\tform.reset(initialValues ?? VARIABLE_FORM_DEFAULT_VALUES);\n\t\t}\n\t}, [initialValues, form, open]);\n\n\tconst { createVariable, isPending: isCreating } = useCreateVariable();\n\n\tconst { updateVariable, isPending: isUpdating } = useUpdateVariable();\n\n\tconst onSubmit = (values: z.infer<typeof formSchema>) => {\n\t\ttry {\n\t\t\tconst value = JSON.parse(values.value) as JSONValue;\n\t\t\tif (variableToEdit?.id) {\n\t\t\t\tupdateVariable(\n\t\t\t\t\t{\n\t\t\t\t\t\tid: variableToEdit.id,\n\t\t\t\t\t\tname: values.name,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\ttags: values.tags,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\ttoast.success(\"Variable updated\");\n\t\t\t\t\t\t\tonOpenChange(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonError: (error) => {\n\t\t\t\t\t\t\tconst message =\n\t\t\t\t\t\t\t\terror.message || \"Unknown error while updating variable.\";\n\t\t\t\t\t\t\tform.setError(\"root\", {\n\t\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcreateVariable(\n\t\t\t\t\t{\n\t\t\t\t\t\tname: values.name,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\ttags: values.tags,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\ttoast.success(\"Variable created\");\n\t\t\t\t\t\t\tonOpenChange(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonError: (error) => {\n\t\t\t\t\t\t\tconst message =\n\t\t\t\t\t\t\t\terror.message || \"Unknown error while creating variable.\";\n\t\t\t\t\t\t\tform.setError(\"root\", {\n\t\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t} catch {\n\t\t\tform.setError(\"value\", { message: \"Value must be valid JSON\" });\n\t\t}\n\t};\n\tconst dialogTitle = variableToEdit ? \"Edit Variable\" : \"New Variable\";\n\tconst dialogDescription = variableToEdit\n\t\t? \"Edit the variable by changing the name, value, or tags.\"\n\t\t: \"Add a new variable by providing a name, value, and optional tags. Values can be any valid JSON value.\";\n\n\treturn (\n\t\t<Dialog open={open} onOpenChange={onOpenChange}>\n\t\t\t<DialogContent>\n\t\t\t\t<DialogHeader>\n\t\t\t\t\t<DialogTitle>{dialogTitle}</DialogTitle>\n\t\t\t\t</DialogHeader>\n\t\t\t\t<DialogDescription>{dialogDescription}</DialogDescription>\n\t\t\t\t<Form {...form}>\n\t\t\t\t\t<form\n\t\t\t\t\t\tonSubmit={(e) => void form.handleSubmit(onSubmit)(e)}\n\t\t\t\t\t\tclassName=\"space-y-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormMessage>{form.formState.errors.root?.message}</FormMessage>\n\t\t\t\t\t\t<FormField\n\t\t\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t\t\t<FormLabel>Name</FormLabel>\n\t\t\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t\t\t<Input autoComplete=\"off\" {...field} />\n\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<FormField\n\t\t\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\t\t\tname=\"value\"\n\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t\t\t<FormLabel>Value</FormLabel>\n\t\t\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t\t\t<JsonInput {...field} />\n\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<FormField\n\t\t\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\t\t\tname=\"tags\"\n\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t\t\t<FormLabel>Tags</FormLabel>\n\t\t\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t\t\t<TagsInput {...field} />\n\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t\t<DialogClose asChild>\n\t\t\t\t\t\t\t\t<Button type=\"button\" variant=\"outline\">\n\t\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</DialogClose>\n\t\t\t\t\t\t\t<Button type=\"submit\" loading={isCreating || isUpdating}>\n\t\t\t\t\t\t\t\t{variableToEdit ? \"Save\" : \"Create\"}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</DialogFooter>\n\t\t\t\t\t</form>\n\t\t\t\t</Form>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n};\n","import { useSuspenseQueries } from \"@tanstack/react-query\";\nimport type { ErrorComponentProps } from \"@tanstack/react-router\";\nimport { createFileRoute } from \"@tanstack/react-router\";\nimport type {\n\tColumnFiltersState,\n\tPaginationState,\n} from \"@tanstack/react-table\";\nimport { zodValidator } from \"@tanstack/zod-adapter\";\nimport { useCallback, useMemo } from \"react\";\nimport { z } from \"zod\";\nimport { categorizeError } from \"@/api/error-utils\";\nimport type { components } from \"@/api/prefect\";\nimport {\n\tbuildCountVariablesQuery,\n\tbuildFilterVariablesQuery,\n\ttype VariablesFilter,\n} from \"@/api/variables\";\nimport { RouteErrorState } from \"@/components/ui/route-error-state\";\nimport { VariablesDataTable } from \"@/components/variables/data-table\";\nimport { VariablesEmptyState } from \"@/components/variables/empty-state\";\nimport { VariablesPageHeader } from \"@/components/variables/header\";\nimport {\n\tuseVariableDialog,\n\tVariableDialog,\n} from \"@/components/variables/variable-dialog\";\n\n/**\n * Schema for validating URL search parameters for the variables page.\n * @property {number} offset - The number of items to skip (for pagination). Must be non-negative. Defaults to 0.\n * @property {number} limit - The maximum number of items to return. Must be positive. Defaults to 10.\n * @property {string} sort - The sort order for variables. Can be \"CREATED_DESC\", \"UPDATED_DESC\", \"NAME_ASC\", or \"NAME_DESC\". Defaults to \"CREATED_DESC\".\n * @property {string} name - Optional filter to search variables by name.\n * @property {string[]} tags - Optional array of tags to filter variables by.\n */\nconst searchParams = z.object({\n\toffset: z.number().int().nonnegative().optional().default(0).catch(0),\n\tlimit: z.number().int().positive().optional().default(10).catch(10),\n\tsort: z\n\t\t.enum([\"CREATED_DESC\", \"UPDATED_DESC\", \"NAME_ASC\", \"NAME_DESC\"])\n\t\t.optional()\n\t\t.default(\"CREATED_DESC\")\n\t\t.catch(\"CREATED_DESC\"),\n\tname: z.string().optional().catch(undefined),\n\ttags: z.array(z.string()).optional().catch(undefined),\n});\n\n/**\n * Builds a filter body for the variables API based on search parameters.\n * @param search - Optional search parameters containing offset, limit, sort, name filter, and tags filter\n * @returns An object containing pagination parameters and variable filters that can be passed to the variables API\n */\nconst buildFilterBody = (\n\tsearch?: z.infer<typeof searchParams>,\n): VariablesFilter => ({\n\toffset: search?.offset ?? 0,\n\tlimit: search?.limit ?? 10,\n\tsort: search?.sort ?? \"CREATED_DESC\",\n\tvariables: {\n\t\toperator: \"and_\" as const,\n\t\t...(search?.name && { name: { like_: search.name } }),\n\t\t...(search?.tags?.length && {\n\t\t\ttags: { operator: \"and_\" as const, all_: search.tags },\n\t\t}),\n\t},\n});\n\nfunction VariablesErrorComponent({ error, reset }: ErrorComponentProps) {\n\tconst serverError = categorizeError(error, \"Failed to load variables\");\n\n\t// Only handle API errors (server-error, client-error) at route level\n\t// Let network errors and unknown errors bubble up to root error component\n\tif (\n\t\tserverError.type !== \"server-error\" &&\n\t\tserverError.type !== \"client-error\"\n\t) {\n\t\tthrow error;\n\t}\n\n\treturn (\n\t\t<div className=\"flex flex-col gap-4\">\n\t\t\t<VariablesPageHeader />\n\t\t\t<RouteErrorState error={serverError} onRetry={reset} />\n\t\t</div>\n\t);\n}\n\nexport const Route = createFileRoute(\"/variables/\")({\n\tvalidateSearch: zodValidator(searchParams),\n\tcomponent: RouteComponent,\n\terrorComponent: VariablesErrorComponent,\n\tloaderDeps: ({ search }) => buildFilterBody(search),\n\tloader: ({ deps, context }) => {\n\t\t// Prefetch filtered variables\n\t\tvoid context.queryClient.prefetchQuery(buildFilterVariablesQuery(deps));\n\t\t// Prefetch filtered count\n\t\tvoid context.queryClient.prefetchQuery(buildCountVariablesQuery(deps));\n\t\t// Prefetch total count (no filter)\n\t\tvoid context.queryClient.prefetchQuery(buildCountVariablesQuery());\n\t},\n\twrapInSuspense: true,\n});\n\n/**\n * Hook to manage pagination state and navigation for variables table\n *\n * Calculates current page index and size from URL search parameters and provides\n * a callback to update pagination state. Updates the URL when pagination changes.\n *\n * @returns A tuple containing:\n * - pagination: Current pagination state with pageIndex and pageSize\n * - onPaginationChange: Callback to update pagination and navigate with new search params\n */\nconst usePagination = () => {\n\tconst search = Route.useSearch();\n\tconst navigate = Route.useNavigate();\n\n\tconst pageIndex = search.offset ? Math.ceil(search.offset / search.limit) : 0;\n\tconst pageSize = search.limit ?? 10;\n\tconst pagination: PaginationState = useMemo(\n\t\t() => ({\n\t\t\tpageIndex,\n\t\t\tpageSize,\n\t\t}),\n\t\t[pageIndex, pageSize],\n\t);\n\n\tconst onPaginationChange = useCallback(\n\t\t(newPagination: PaginationState) => {\n\t\t\tvoid navigate({\n\t\t\t\tto: \".\",\n\t\t\t\tsearch: (prev) => ({\n\t\t\t\t\t...prev,\n\t\t\t\t\toffset: newPagination.pageIndex * newPagination.pageSize,\n\t\t\t\t\tlimit: newPagination.pageSize,\n\t\t\t\t}),\n\t\t\t\treplace: true,\n\t\t\t});\n\t\t},\n\t\t[navigate],\n\t);\n\n\treturn [pagination, onPaginationChange] as const;\n};\n\n/**\n * Hook to manage column filtering state and navigation for variables table\n *\n * Handles filtering by name and tags, updating the URL search parameters when filters change.\n * Resets pagination offset when filters are updated.\n *\n * @returns A tuple containing:\n * - columnFilters: Current column filter state for name and tags\n * - onColumnFiltersChange: Callback to update filters and navigate with new search params\n */\nconst useVariableColumnFilters = () => {\n\tconst search = Route.useSearch();\n\tconst navigate = Route.useNavigate();\n\tconst columnFilters: ColumnFiltersState = useMemo(\n\t\t() => [\n\t\t\t{ id: \"name\", value: search.name },\n\t\t\t{ id: \"tags\", value: search.tags },\n\t\t],\n\t\t[search.name, search.tags],\n\t);\n\n\tconst onColumnFiltersChange = useCallback(\n\t\t(newColumnFilters: ColumnFiltersState) => {\n\t\t\tvoid navigate({\n\t\t\t\tto: \".\",\n\t\t\t\tsearch: (prev) => {\n\t\t\t\t\tconst name = newColumnFilters.find((filter) => filter.id === \"name\")\n\t\t\t\t\t\t?.value as string | undefined;\n\t\t\t\t\tconst tags = newColumnFilters.find((filter) => filter.id === \"tags\")\n\t\t\t\t\t\t?.value as string[] | undefined;\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\toffset: 0,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\ttags,\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\treplace: true,\n\t\t\t});\n\t\t},\n\t\t[navigate],\n\t);\n\n\treturn [columnFilters, onColumnFiltersChange] as const;\n};\n\n/**\n * Hook to manage sorting state and navigation for variables table\n *\n * Handles updating the URL search parameters when sort key changes.\n * Uses the current sort value from search params and provides a callback\n * to update sorting.\n *\n * @returns A tuple containing:\n * - sorting: Current sort key from search params\n * - onSortingChange: Callback to update sort and navigate with new search params\n */\nconst useVariableSorting = () => {\n\tconst search = Route.useSearch();\n\tconst navigate = Route.useNavigate();\n\n\tconst onSortingChange = useCallback(\n\t\t(sortKey: components[\"schemas\"][\"VariableSort\"]) => {\n\t\t\tvoid navigate({\n\t\t\t\tto: \".\",\n\t\t\t\tsearch: (prev) => ({ ...prev, sort: sortKey }),\n\t\t\t\treplace: true,\n\t\t\t});\n\t\t},\n\t\t[navigate],\n\t);\n\n\treturn [search.sort, onSortingChange] as const;\n};\n\nfunction RouteComponent() {\n\tconst search = Route.useSearch();\n\tconst [pagination, onPaginationChange] = usePagination();\n\tconst [columnFilters, onColumnFiltersChange] = useVariableColumnFilters();\n\tconst [sorting, onSortingChange] = useVariableSorting();\n\tconst [variableDialogState, onVariableAddOrEdit] = useVariableDialog();\n\n\tconst [{ data: variables }, { data: filteredCount }, { data: totalCount }] =\n\t\tuseSuspenseQueries({\n\t\t\tqueries: [\n\t\t\t\tbuildFilterVariablesQuery(buildFilterBody(search)),\n\t\t\t\tbuildCountVariablesQuery(buildFilterBody(search)),\n\t\t\t\tbuildCountVariablesQuery(),\n\t\t\t],\n\t\t});\n\n\tconst hasVariables = (totalCount ?? 0) > 0;\n\n\treturn (\n\t\t<div className=\"flex flex-col gap-4\">\n\t\t\t<VariablesPageHeader onAddVariableClick={onVariableAddOrEdit} />\n\t\t\t<VariableDialog {...variableDialogState} />\n\t\t\t{hasVariables ? (\n\t\t\t\t<VariablesDataTable\n\t\t\t\t\tvariables={variables ?? []}\n\t\t\t\t\tcurrentVariableCount={filteredCount ?? 0}\n\t\t\t\t\tpagination={pagination}\n\t\t\t\t\tonPaginationChange={onPaginationChange}\n\t\t\t\t\tcolumnFilters={columnFilters}\n\t\t\t\t\tonColumnFiltersChange={onColumnFiltersChange}\n\t\t\t\t\tsorting={sorting}\n\t\t\t\t\tonSortingChange={onSortingChange}\n\t\t\t\t\tonVariableEdit={onVariableAddOrEdit}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<VariablesEmptyState onAddVariableClick={onVariableAddOrEdit} />\n\t\t\t)}\n\t\t</div>\n\t);\n}\n"],"names":["ActionsCell","row","onVariableEdit","id","deleteVariable","useDeleteVariable","onVariableDelete","toast","jsx","DropdownMenu","DropdownMenuTrigger","jsxs","Button","Icon","DropdownMenuContent","DropdownMenuLabel","DropdownMenuItem","copyValue","ValueCell","props","value","codeRef","useRef","isOverflowing","useIsOverflowing","HoverCard","HoverCardTrigger","HoverCardContent","JsonInput","columnHelper","createColumnHelper","createColumns","updated","tags","TagBadgeGroup","VariablesDataTable","variables","currentVariableCount","pagination","onPaginationChange","columnFilters","onColumnFiltersChange","sorting","onSortingChange","columns","useMemo","nameSearchValue","filter","tagsSearchValue","handleNameSearchChange","useCallback","filters","handleTagsSearchChange","e","handlePaginationChange","updater","newPagination","table","useReactTable","getCoreRowModel","pluralize","SearchInput","TagsInput","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","DataTable","VariablesEmptyState","onAddVariableClick","EmptyState","EmptyStateIcon","EmptyStateTitle","EmptyStateDescription","EmptyStateActions","DocsLink","useVariableDialog","handleVariableDialogOpenChange","open","setDialogState","prev","dialogState","useState","handleVariableAddOrEdit","variableToEdit","formSchema","z.object","z.string","VARIABLE_FORM_DEFAULT_VALUES","VariableDialog","onOpenChange","form","useForm","zodResolver","initialValues","useEffect","createVariable","isCreating","useCreateVariable","updateVariable","isUpdating","useUpdateVariable","onSubmit","values","error","message","dialogTitle","dialogDescription","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","Form","FormMessage","FormField","field","FormItem","FormLabel","FormControl","Input","DialogFooter","DialogClose","buildFilterBody","search","offset","limit","sort","operator","name","like_","length","all_","usePagination","Route","useSearch","navigate","useNavigate","pageIndex","Math","ceil","pageSize","to","replace","useVariableColumnFilters","newColumnFilters","find","useVariableSorting","sortKey","RouteComponent","variableDialogState","onVariableAddOrEdit","data","filteredCount","totalCount","useSuspenseQueries","queries","buildFilterVariablesQuery","buildCountVariablesQuery","hasVariables","VariablesPageHeader"],"mappings":"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"}