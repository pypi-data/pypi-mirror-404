{"version":3,"file":"use-quick-run-B4Xj-YQQ.js","sources":["../../src/components/deployments/use-delete-deployment-confirmation-dialog.ts","../../src/components/deployments/use-quick-run.tsx"],"sourcesContent":["import { useNavigate } from \"@tanstack/react-router\";\nimport { toast } from \"sonner\";\nimport { type Deployment, useDeleteDeployment } from \"@/api/deployments\";\nimport { useDeleteConfirmationDialog } from \"@/components/ui/delete-confirmation-dialog\";\n\nexport const useDeleteDeploymentConfirmationDialog = () => {\n\tconst navigate = useNavigate();\n\tconst [dialogState, confirmDelete] = useDeleteConfirmationDialog();\n\n\tconst { deleteDeployment } = useDeleteDeployment();\n\n\tconst handleConfirmDelete = (\n\t\tdeployment: Deployment,\n\t\t{\n\t\t\tshouldNavigate = false,\n\t\t}: {\n\t\t\t/** Should navigate back to /deployments */\n\t\t\tshouldNavigate?: boolean;\n\t\t} = {},\n\t) =>\n\t\tconfirmDelete({\n\t\t\ttitle: \"Delete Deployment\",\n\t\t\tdescription: `Are you sure you want to delete ${deployment.name}? This action cannot be undone.`,\n\t\t\tonConfirm: () => {\n\t\t\t\tdeleteDeployment(deployment.id, {\n\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\ttoast.success(\"Deployment deleted\");\n\t\t\t\t\t\tif (shouldNavigate) {\n\t\t\t\t\t\t\tvoid navigate({ to: \"/deployments\" });\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonError: (error) => {\n\t\t\t\t\t\tconst message =\n\t\t\t\t\t\t\terror.message || \"Unknown error while deleting deployment.\";\n\t\t\t\t\t\tconsole.error(message);\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\n\treturn [dialogState, handleConfirmDelete] as const;\n};\n","import { Link } from \"@tanstack/react-router\";\nimport { toast } from \"sonner\";\nimport { useDeploymentCreateFlowRun } from \"@/api/flow-runs\";\nimport { Button } from \"@/components/ui/button\";\n\nconst DEPLOYMENT_QUICK_RUN_PAYLOAD = {\n\tstate: {\n\t\ttype: \"SCHEDULED\",\n\t\tmessage: \"Run from the Prefect UI with defaults\",\n\t\tstate_details: {\n\t\t\tdeferred: false,\n\t\t\tuntrackable_result: false,\n\t\t\tpause_reschedule: false,\n\t\t},\n\t},\n} as const;\n\n/**\n *\n * @returns a function that handles the mutation and UX when a deployment creates a quick run\n */\nexport const useQuickRun = () => {\n\tconst { createDeploymentFlowRun, isPending } = useDeploymentCreateFlowRun();\n\tconst onQuickRun = (id: string) => {\n\t\tcreateDeploymentFlowRun(\n\t\t\t{\n\t\t\t\tid,\n\t\t\t\t...DEPLOYMENT_QUICK_RUN_PAYLOAD,\n\t\t\t},\n\t\t\t{\n\t\t\t\tonSuccess: (res) => {\n\t\t\t\t\ttoast.success(\"Flow run created\", {\n\t\t\t\t\t\taction: (\n\t\t\t\t\t\t\t<Link to=\"/runs/flow-run/$id\" params={{ id: res.id }}>\n\t\t\t\t\t\t\t\t<Button size=\"sm\">View run</Button>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t),\n\t\t\t\t\t\tdescription: (\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<span className=\"font-bold\">{res.name}</span> scheduled to start{\" \"}\n\t\t\t\t\t\t\t\t<span className=\"font-bold\">now</span>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t),\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tonError: (error) => {\n\t\t\t\t\tconst message =\n\t\t\t\t\t\terror.message || \"Unknown error while creating flow run.\";\n\t\t\t\t\tconsole.error(message);\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t};\n\n\treturn { onQuickRun, isPending };\n};\n"],"names":["useDeleteDeploymentConfirmationDialog","navigate","useNavigate","dialogState","confirmDelete","useDeleteConfirmationDialog","deleteDeployment","useDeleteDeployment","deployment","shouldNavigate","toast","error","message","DEPLOYMENT_QUICK_RUN_PAYLOAD","useQuickRun","createDeploymentFlowRun","isPending","useDeploymentCreateFlowRun","id","res","jsx","Link","Button"],"mappings":"2LAKO,MAAMA,EAAwC,IAAM,CAC1D,MAAMC,EAAWC,EAAA,EACX,CAACC,EAAaC,CAAa,EAAIC,EAAA,EAE/B,CAAE,iBAAAC,CAAA,EAAqBC,EAAA,EA+B7B,MAAO,CAACJ,EA7BoB,CAC3BK,EACA,CACC,eAAAC,EAAiB,EAAA,EAId,CAAA,IAEJL,EAAc,CACb,MAAO,oBACP,YAAa,mCAAmCI,EAAW,IAAI,kCAC/D,UAAW,IAAM,CAChBF,EAAiBE,EAAW,GAAI,CAC/B,UAAW,IAAM,CAChBE,EAAM,QAAQ,oBAAoB,EAC9BD,GACER,EAAS,CAAE,GAAI,eAAgB,CAEtC,EACA,QAAUU,GAAU,CACnB,MAAMC,EACLD,EAAM,SAAW,2CAClB,QAAQ,MAAMC,CAAO,CACtB,CAAA,CACA,CACF,CAAA,CACA,CAEsC,CACzC,ECpCMC,EAA+B,CACpC,MAAO,CACN,KAAM,YACN,QAAS,wCACT,cAAe,CACd,SAAU,GACV,mBAAoB,GACpB,iBAAkB,EAAA,CACnB,CAEF,EAMaC,EAAc,IAAM,CAChC,KAAM,CAAE,wBAAAC,EAAyB,UAAAC,CAAA,EAAcC,EAAA,EAgC/C,MAAO,CAAE,WA/BWC,GAAe,CAClCH,EACC,CACC,GAAAG,EACA,GAAGL,CAAA,EAEJ,CACC,UAAYM,GAAQ,CACnBT,EAAM,QAAQ,mBAAoB,CACjC,OACCU,EAAAA,IAACC,EAAA,CAAK,GAAG,qBAAqB,OAAQ,CAAE,GAAIF,EAAI,EAAA,EAC/C,SAAAC,EAAAA,IAACE,EAAA,CAAO,KAAK,KAAK,oBAAQ,EAC3B,EAED,mBACE,IAAA,CACA,SAAA,CAAAF,EAAAA,IAAC,OAAA,CAAK,UAAU,YAAa,SAAAD,EAAI,KAAK,EAAO,sBAAoB,IACjEC,EAAAA,IAAC,OAAA,CAAK,UAAU,YAAY,SAAA,KAAA,CAAG,CAAA,CAAA,CAChC,CAAA,CAED,CACF,EACA,QAAUT,GAAU,CACnB,MAAMC,EACLD,EAAM,SAAW,yCAClB,QAAQ,MAAMC,CAAO,CACtB,CAAA,CACD,CAEF,EAEqB,UAAAI,CAAA,CACtB"}