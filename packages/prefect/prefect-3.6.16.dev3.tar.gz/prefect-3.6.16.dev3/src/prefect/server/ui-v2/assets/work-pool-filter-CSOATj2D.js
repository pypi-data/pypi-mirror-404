import{r as o,t as S,j as e}from"./vendor-tanstack-BcZfOOfy.js";import{d0 as C,ag as A,ah as w,ai as N,aj as g,ak as y,al as k,am as z,an as h,ao as x,ap as E,T as L}from"./index-B8vo2Lrg.js";const _=2,D=({selectedDeployments:s,onSelectDeployments:t})=>{const[i,u]=o.useState(""),n=o.useDeferredValue(i),{data:c=[]}=S(C({deployments:n?{operator:"and_",name:{like_:n}}:void 0,limit:100,offset:0,sort:"NAME_ASC"})),{data:f=[]}=S(C({deployments:s.size>0?{operator:"and_",id:{any_:Array.from(s)}}:void 0,limit:s.size||1,offset:0,sort:"NAME_ASC"},{enabled:s.size>0})),j=a=>{const r=new Set(s);s.has(a)?r.delete(a):r.add(a),t(r)},p=()=>{t(new Set)},b=()=>{if(s.size===0)return"All deployments";const a=f.filter(d=>s.has(d.id)).map(d=>d.name),r=a.slice(0,_),m=a.length-_;return e.jsxs("div",{className:"flex flex-1 min-w-0 items-center gap-2",children:[e.jsx("div",{className:"flex flex-1 min-w-0 items-center gap-2 overflow-hidden",children:e.jsx("span",{className:"truncate",children:r.join(", ")})}),m>0&&e.jsxs(E,{variant:"bodySmall",className:"shrink-0",children:["+ ",m]})]})},l=o.useMemo(()=>c.filter(a=>!n||a.name.toLowerCase().includes(n.toLowerCase())),[c,n]);return e.jsxs(A,{children:[e.jsx(w,{"aria-label":"Filter by deployment",selected:s.size===0,children:b()}),e.jsxs(N,{children:[e.jsx(g,{value:i,onValueChange:u,placeholder:"Search deployments..."}),e.jsxs(y,{children:[e.jsx(k,{children:"No deployments found"}),e.jsxs(z,{children:[e.jsxs(h,{"aria-label":"All deployments",onSelect:p,closeOnSelect:!1,value:"__all__",children:[e.jsx(x,{checked:s.size===0}),"All deployments"]}),l.map(a=>e.jsxs(h,{"aria-label":a.name,onSelect:()=>j(a.id),closeOnSelect:!1,value:a.id,children:[e.jsx(x,{checked:s.has(a.id)}),a.name]},a.id))]})]})]})]})},v=2,F=({selectedWorkPools:s,onSelectWorkPools:t})=>{const[i,u]=o.useState(""),n=o.useDeferredValue(i),{data:c=[]}=S(L({limit:100,offset:0})),f=l=>{const a=new Set(s);s.has(l)?a.delete(l):a.add(l),t(a)},j=()=>{t(new Set)},p=()=>{if(s.size===0)return"All work pools";const l=Array.from(s).sort((m,d)=>m.localeCompare(d)),a=l.slice(0,v),r=l.length-v;return e.jsxs("div",{className:"flex flex-1 min-w-0 items-center gap-2",children:[e.jsx("div",{className:"flex flex-1 min-w-0 items-center gap-2 overflow-hidden",children:e.jsx("span",{className:"truncate",children:a.join(", ")})}),r>0&&e.jsxs(E,{variant:"bodySmall",className:"shrink-0",children:["+ ",r]})]})},b=o.useMemo(()=>c.filter(l=>!n||l.name.toLowerCase().includes(n.toLowerCase())).sort((l,a)=>l.name.localeCompare(a.name)),[c,n]);return e.jsxs(A,{children:[e.jsx(w,{"aria-label":"Filter by work pool",selected:s.size===0,children:p()}),e.jsxs(N,{children:[e.jsx(g,{value:i,onValueChange:u,placeholder:"Search work pools..."}),e.jsxs(y,{children:[e.jsx(k,{children:"No work pools found"}),e.jsxs(z,{children:[e.jsxs(h,{"aria-label":"All work pools",onSelect:j,closeOnSelect:!1,value:"__all__",children:[e.jsx(x,{checked:s.size===0}),"All work pools"]}),b.map(l=>e.jsxs(h,{"aria-label":l.name,onSelect:()=>f(l.name),closeOnSelect:!1,value:l.name,children:[e.jsx(x,{checked:s.has(l.name)}),l.name]},l.name))]})]})]})]})};export{D,F as W};
//# sourceMappingURL=work-pool-filter-CSOATj2D.js.map
