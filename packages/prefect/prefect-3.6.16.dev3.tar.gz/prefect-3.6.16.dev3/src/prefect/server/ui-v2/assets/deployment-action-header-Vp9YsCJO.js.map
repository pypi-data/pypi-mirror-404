{"version":3,"file":"deployment-action-header-Vp9YsCJO.js","sources":["../../src/components/work-pools/work-queue-select/work-queue-select.tsx","../../src/components/deployments/deployment-action-header.tsx"],"sourcesContent":["import { useSuspenseQuery } from \"@tanstack/react-query\";\nimport { Suspense, useDeferredValue, useMemo, useState } from \"react\";\nimport { buildFilterWorkPoolWorkQueuesQuery } from \"@/api/work-queues\";\nimport {\n\tCombobox,\n\tComboboxCommandEmtpy,\n\tComboboxCommandGroup,\n\tComboboxCommandInput,\n\tComboboxCommandItem,\n\tComboboxCommandList,\n\tComboboxContent,\n\tComboboxTrigger,\n} from \"@/components/ui/combobox\";\n\ntype PresetOption = {\n\tlabel: string;\n\tvalue: string | null | undefined;\n};\n\ntype WorkQueueSelectProps = {\n\tpresetOptions?: Array<PresetOption>;\n\tselected: string | undefined | null;\n\tonSelect: (name: string | undefined | null) => void;\n\tworkPoolName: string;\n};\n\nexport const WorkQueueSelect = ({\n\tpresetOptions = [],\n\tselected,\n\tonSelect,\n\tworkPoolName,\n}: WorkQueueSelectProps) => {\n\treturn (\n\t\t<Suspense>\n\t\t\t<WorkQueueSelecImplementation\n\t\t\t\tpresetOptions={presetOptions}\n\t\t\t\tselected={selected}\n\t\t\t\tonSelect={onSelect}\n\t\t\t\tworkPoolName={workPoolName}\n\t\t\t/>\n\t\t</Suspense>\n\t);\n};\n\nconst WorkQueueSelecImplementation = ({\n\tpresetOptions = [],\n\tselected,\n\tonSelect,\n\tworkPoolName,\n}: WorkQueueSelectProps) => {\n\tconst [search, setSearch] = useState(\"\");\n\tconst { data } = useSuspenseQuery(\n\t\tbuildFilterWorkPoolWorkQueuesQuery({ work_pool_name: workPoolName }),\n\t);\n\n\t// nb: because work queues API does not have filtering _like by name, do client-side filtering\n\tconst deferredSearch = useDeferredValue(search);\n\tconst filteredData = useMemo(() => {\n\t\treturn data.filter((workQueue) =>\n\t\t\tworkQueue.name.toLowerCase().includes(deferredSearch.toLowerCase()),\n\t\t);\n\t}, [data, deferredSearch]);\n\n\tconst filteredPresetOptions = useMemo(() => {\n\t\treturn presetOptions.filter((option) =>\n\t\t\toption.label.toLowerCase().includes(deferredSearch.toLowerCase()),\n\t\t);\n\t}, [deferredSearch, presetOptions]);\n\n\treturn (\n\t\t<Combobox>\n\t\t\t<ComboboxTrigger\n\t\t\t\tselected={Boolean(selected)}\n\t\t\t\taria-label=\"Select a work queue\"\n\t\t\t>\n\t\t\t\t{selected}\n\t\t\t</ComboboxTrigger>\n\t\t\t<ComboboxContent>\n\t\t\t\t<ComboboxCommandInput\n\t\t\t\t\tvalue={search}\n\t\t\t\t\tonValueChange={setSearch}\n\t\t\t\t\tplaceholder=\"Search for a work queue...\"\n\t\t\t\t/>\n\t\t\t\t<ComboboxCommandEmtpy>No work queue found</ComboboxCommandEmtpy>\n\t\t\t\t<ComboboxCommandList>\n\t\t\t\t\t<ComboboxCommandGroup>\n\t\t\t\t\t\t{filteredPresetOptions.map((option) => (\n\t\t\t\t\t\t\t<ComboboxCommandItem\n\t\t\t\t\t\t\t\tkey={option.label}\n\t\t\t\t\t\t\t\tselected={selected === option.value}\n\t\t\t\t\t\t\t\tonSelect={() => {\n\t\t\t\t\t\t\t\t\tonSelect(option.value);\n\t\t\t\t\t\t\t\t\tsetSearch(\"\");\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t//nb: Stringifies label so that UX has a hoverable state\n\t\t\t\t\t\t\t\tvalue={String(option.label)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t</ComboboxCommandItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t{filteredData.map((workQueue) => (\n\t\t\t\t\t\t\t<ComboboxCommandItem\n\t\t\t\t\t\t\t\tkey={workQueue.id}\n\t\t\t\t\t\t\t\tselected={selected === workQueue.name}\n\t\t\t\t\t\t\t\tonSelect={(value) => {\n\t\t\t\t\t\t\t\t\tonSelect(value);\n\t\t\t\t\t\t\t\t\tsetSearch(\"\");\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tvalue={workQueue.name}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{workQueue.name}\n\t\t\t\t\t\t\t</ComboboxCommandItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ComboboxCommandGroup>\n\t\t\t\t</ComboboxCommandList>\n\t\t\t</ComboboxContent>\n\t\t</Combobox>\n\t);\n};\n","import type { Deployment } from \"@/api/deployments\";\nimport {\n\tBreadcrumb,\n\tBreadcrumbItem,\n\tBreadcrumbLink,\n\tBreadcrumbList,\n\tBreadcrumbPage,\n\tBreadcrumbSeparator,\n} from \"@/components/ui/breadcrumb\";\n\ntype DeploymentActionHeaderProps = {\n\tdeployment: Deployment;\n\taction: \"Edit\" | \"Duplicate\" | \"Run\";\n};\n\nexport const DeploymentActionHeader = ({\n\tdeployment,\n\taction,\n}: DeploymentActionHeaderProps) => {\n\treturn (\n\t\t<Breadcrumb>\n\t\t\t<BreadcrumbList>\n\t\t\t\t<BreadcrumbItem>\n\t\t\t\t\t<BreadcrumbLink to=\"/deployments\" className=\"text-xl font-semibold\">\n\t\t\t\t\t\tDeployments\n\t\t\t\t\t</BreadcrumbLink>\n\t\t\t\t</BreadcrumbItem>\n\t\t\t\t<BreadcrumbSeparator />\n\n\t\t\t\t<BreadcrumbItem>\n\t\t\t\t\t<BreadcrumbLink\n\t\t\t\t\t\tto=\"/deployments/deployment/$id\"\n\t\t\t\t\t\tparams={{ id: deployment.id }}\n\t\t\t\t\t\tclassName=\"text-xl font-semibold\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{deployment.name}\n\t\t\t\t\t</BreadcrumbLink>\n\t\t\t\t</BreadcrumbItem>\n\t\t\t\t<BreadcrumbSeparator />\n\n\t\t\t\t<BreadcrumbItem className=\"text-xl font-semibold\">\n\t\t\t\t\t<BreadcrumbPage>{action}</BreadcrumbPage>\n\t\t\t\t</BreadcrumbItem>\n\t\t\t</BreadcrumbList>\n\t\t</Breadcrumb>\n\t);\n};\n"],"names":["WorkQueueSelect","presetOptions","selected","onSelect","workPoolName","Suspense","jsx","WorkQueueSelecImplementation","search","setSearch","useState","data","useSuspenseQuery","buildFilterWorkPoolWorkQueuesQuery","deferredSearch","useDeferredValue","filteredData","useMemo","workQueue","filteredPresetOptions","option","Combobox","ComboboxTrigger","ComboboxContent","ComboboxCommandInput","ComboboxCommandEmtpy","ComboboxCommandList","jsxs","ComboboxCommandGroup","ComboboxCommandItem","value","DeploymentActionHeader","deployment","action","Breadcrumb","BreadcrumbList","BreadcrumbItem","BreadcrumbLink","BreadcrumbSeparator","BreadcrumbPage"],"mappings":"sNA0BO,MAAMA,EAAkB,CAAC,CAC/B,cAAAC,EAAgB,CAAA,EAChB,SAAAC,EACA,SAAAC,EACA,aAAAC,CACD,UAEGC,EAAAA,SAAA,CACA,SAAAC,EAAAA,IAACC,EAAA,CACA,cAAAN,EACA,SAAAC,EACA,SAAAC,EACA,aAAAC,CAAA,CAAA,EAEF,EAIIG,EAA+B,CAAC,CACrC,cAAAN,EAAgB,CAAA,EAChB,SAAAC,EACA,SAAAC,EACA,aAAAC,CACD,IAA4B,CAC3B,KAAM,CAACI,EAAQC,CAAS,EAAIC,EAAAA,SAAS,EAAE,EACjC,CAAE,KAAAC,GAASC,EAChBC,EAAmC,CAAE,eAAgBT,CAAA,CAAc,CAAA,EAI9DU,EAAiBC,EAAAA,iBAAiBP,CAAM,EACxCQ,EAAeC,EAAAA,QAAQ,IACrBN,EAAK,OAAQO,GACnBA,EAAU,KAAK,cAAc,SAASJ,EAAe,YAAA,CAAa,CAAA,EAEjE,CAACH,EAAMG,CAAc,CAAC,EAEnBK,EAAwBF,EAAAA,QAAQ,IAC9BhB,EAAc,OAAQmB,GAC5BA,EAAO,MAAM,cAAc,SAASN,EAAe,YAAA,CAAa,CAAA,EAE/D,CAACA,EAAgBb,CAAa,CAAC,EAElC,cACEoB,EAAA,CACA,SAAA,CAAAf,EAAAA,IAACgB,EAAA,CACA,SAAU,EAAQpB,EAClB,aAAW,sBAEV,SAAAA,CAAA,CAAA,SAEDqB,EAAA,CACA,SAAA,CAAAjB,EAAAA,IAACkB,EAAA,CACA,MAAOhB,EACP,cAAeC,EACf,YAAY,4BAAA,CAAA,EAEbH,EAAAA,IAACmB,GAAqB,SAAA,qBAAA,CAAmB,EACzCnB,EAAAA,IAACoB,EAAA,CACA,SAAAC,EAAAA,KAACC,EAAA,CACC,SAAA,CAAAT,EAAsB,IAAKC,GAC3Bd,EAAAA,IAACuB,EAAA,CAEA,SAAU3B,IAAakB,EAAO,MAC9B,SAAU,IAAM,CACfjB,EAASiB,EAAO,KAAK,EACrBX,EAAU,EAAE,CACb,EAEA,MAAO,OAAOW,EAAO,KAAK,EAEzB,SAAAA,EAAO,KAAA,EATHA,EAAO,KAAA,CAWb,EACAJ,EAAa,IAAKE,GAClBZ,EAAAA,IAACuB,EAAA,CAEA,SAAU3B,IAAagB,EAAU,KACjC,SAAWY,GAAU,CACpB3B,EAAS2B,CAAK,EACdrB,EAAU,EAAE,CACb,EACA,MAAOS,EAAU,KAEhB,SAAAA,EAAU,IAAA,EARNA,EAAU,EAAA,CAUhB,CAAA,CAAA,CACF,CAAA,CACD,CAAA,CAAA,CACD,CAAA,EACD,CAEF,ECvGaa,EAAyB,CAAC,CACtC,WAAAC,EACA,OAAAC,CACD,IAEE3B,EAAAA,IAAC4B,EAAA,CACA,SAAAP,EAAAA,KAACQ,EAAA,CACA,SAAA,CAAA7B,EAAAA,IAAC8B,EAAA,CACA,eAACC,EAAA,CAAe,GAAG,eAAe,UAAU,wBAAwB,uBAEpE,CAAA,CACD,QACCC,EAAA,EAAoB,QAEpBF,EAAA,CACA,SAAA9B,EAAAA,IAAC+B,EAAA,CACA,GAAG,8BACH,OAAQ,CAAE,GAAIL,EAAW,EAAA,EACzB,UAAU,wBAET,SAAAA,EAAW,IAAA,CAAA,EAEd,QACCM,EAAA,EAAoB,QAEpBF,EAAA,CAAe,UAAU,wBACzB,SAAA9B,EAAAA,IAACiC,EAAA,CAAgB,WAAO,CAAA,CACzB,CAAA,CAAA,CACD,CAAA,CACD"}