import{j as r,L as h,s as a,r as m}from"./vendor-tanstack-BcZfOOfy.js";import{d8 as T,d9 as b,da as N,db as g,c1 as D,as as W,cu as Q,cc as P,ar as E,a_ as l,I as L,b9 as w}from"./index-B8vo2Lrg.js";const S={"flow-run":"Play","task-run":"Cog",deployment:"Rocket",flow:"Workflow","work-pool":"Server","work-queue":"ListOrdered",automation:"Zap","block-document":"Box","concurrency-limit":"Gauge",unknown:"Circle"},$={"flow-run":"Flow run","task-run":"Task run",flow:"Flow",deployment:"Deployment","work-pool":"Work pool","work-queue":"Work queue",automation:"Automation","block-document":"Block document","concurrency-limit":"Concurrency limit",unknown:"Resource"};function k(e){return!e||typeof e!="string"?"unknown":e.startsWith("prefect.flow-run.")?"flow-run":e.startsWith("prefect.task-run.")?"task-run":e.startsWith("prefect.deployment.")?"deployment":e.startsWith("prefect.flow.")?"flow":e.startsWith("prefect.work-pool.")?"work-pool":e.startsWith("prefect.work-queue.")?"work-queue":e.startsWith("prefect.automation.")?"automation":e.startsWith("prefect.block-document.")?"block-document":e.startsWith("prefect.concurrency-limit.")?"concurrency-limit":"unknown"}function x(e){if(!e||typeof e!="string")return null;const t=e.split(".");return t.length<3?null:t.slice(2).join(".")}function p(e){return e["prefect.resource.name"]||e["prefect.name"]||e["prefect-cloud.name"]||null}function q(e){for(const t of e){const o=t["prefect.resource.id"]||"";if(k(o)==="work-pool")return t}return null}function C(e,t=[]){const o=e["prefect.resource.id"]||"",s=k(o),n=x(o);if(!n)return null;switch(s){case"flow-run":return{to:"/runs/flow-run/$id",params:{id:n}};case"task-run":return{to:"/runs/task-run/$id",params:{id:n}};case"deployment":return{to:"/deployments/deployment/$id",params:{id:n}};case"flow":return{to:"/flows/flow/$id",params:{id:n}};case"work-pool":return{to:"/work-pools/work-pool/$workPoolName",params:{workPoolName:p(e)||n}};case"automation":return{to:"/automations/automation/$id",params:{id:n}};case"block-document":return{to:"/blocks/block/$id",params:{id:n}};case"concurrency-limit":return{to:"/concurrency-limits/concurrency-limit/$id",params:{id:n}};case"work-queue":{const c=p(e);if(!c)return null;const d=q(t);if(!d)return null;const j=d["prefect.resource.id"]||"",R=x(j),y=p(d)||R;return y?{to:"/work-pools/work-pool/$workPoolName/queue/$workQueueName",params:{workPoolName:y,workQueueName:c}}:null}default:return null}}function i({resource:e,relatedResources:t=[],children:o,className:s}){const n=C(e,t);return n?r.jsx(h,{to:n.to,params:n.params,className:s,children:o}):r.jsx("span",{className:s,children:o})}function v({resourceId:e,className:t}){const{data:o}=a(E(e));return r.jsx(u,{resourceType:"flow-run",displayText:o.name??e,className:t})}function G({resourceId:e,className:t}){const{data:o}=a(P(e));return r.jsx(u,{resourceType:"task-run",displayText:o.name??e,className:t})}function F({resourceId:e,className:t}){const{data:o}=a(Q(e));return r.jsx(u,{resourceType:"deployment",displayText:o.name,className:t})}function B({resourceId:e,className:t}){const{data:o}=a(W(e));return r.jsx(u,{resourceType:"flow",displayText:o.name,className:t})}function A({resourceId:e,className:t}){const{data:o}=a(D(e));return r.jsx(u,{resourceType:"work-pool",displayText:o.name,className:t})}function O({resourceId:e,className:t}){const{data:o}=a(g(e));return r.jsx(u,{resourceType:"work-queue",displayText:o.name,className:t})}function _({resourceId:e,className:t}){const{data:o}=a(N(e));return r.jsx(u,{resourceType:"automation",displayText:o.name,className:t})}function U({resourceId:e,className:t}){const{data:o}=a(b(e));return r.jsx(u,{resourceType:"block-document",displayText:o.name??e,className:t})}function Y({resourceId:e,className:t}){const{data:o}=a(T(e));return r.jsx(u,{resourceType:"concurrency-limit",displayText:o.tag??e,className:t})}function Z({resourceType:e,resourceId:t,className:o}){switch(e){case"flow-run":return r.jsx(v,{resourceId:t,className:o});case"task-run":return r.jsx(G,{resourceId:t,className:o});case"deployment":return r.jsx(F,{resourceId:t,className:o});case"flow":return r.jsx(B,{resourceId:t,className:o});case"work-pool":return r.jsx(A,{resourceId:t,className:o});case"work-queue":return r.jsx(O,{resourceId:t,className:o});case"automation":return r.jsx(_,{resourceId:t,className:o});case"block-document":return r.jsx(U,{resourceId:t,className:o});case"concurrency-limit":return r.jsx(Y,{resourceId:t,className:o});default:return null}}function z(e){return e["prefect.resource.name"]||e["prefect.name"]||e["prefect-cloud.name"]||null}function H(e){return e["prefect.resource.id"]||""}function u({resourceType:e,displayText:t,className:o}){const s=S[e],n=$[e];return r.jsxs("div",{className:l("flex items-center gap-2",o),children:[n&&r.jsx("span",{children:n}),r.jsx(L,{id:s,className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{children:t})]})}function f(){return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(w,{className:"h-4 w-4 rounded-full"}),r.jsx(w,{className:"h-4 w-24"})]})}function M({event:e,className:t}){const o=z(e.resource),s=H(e.resource),n=k(s),c=x(s);return o?r.jsxs("div",{className:l("flex flex-col gap-0.5",t),children:[r.jsx("span",{className:"text-sm font-medium",children:"Resource"}),r.jsx(m.Suspense,{fallback:r.jsx(f,{}),children:r.jsx(i,{resource:e.resource,relatedResources:e.related??[],className:"hover:underline",children:r.jsx(u,{resourceType:n,displayText:o,className:"text-sm"})})})]}):c&&n!=="unknown"?r.jsxs("div",{className:l("flex flex-col gap-0.5",t),children:[r.jsx("span",{className:"text-sm font-medium",children:"Resource"}),r.jsx(m.Suspense,{fallback:r.jsx(f,{}),children:r.jsx(i,{resource:e.resource,relatedResources:e.related??[],className:"hover:underline",children:r.jsx(Z,{resourceType:n,resourceId:c,className:"text-sm"})})})]}):c?r.jsxs("div",{className:l("flex flex-col gap-0.5",t),children:[r.jsx("span",{className:"text-sm font-medium",children:"Resource"}),r.jsx(m.Suspense,{fallback:r.jsx(f,{}),children:r.jsx(i,{resource:e.resource,relatedResources:e.related??[],className:"hover:underline",children:r.jsx(u,{resourceType:n,displayText:c,className:"text-sm text-muted-foreground font-mono"})})})]}):s?r.jsxs("div",{className:l("flex flex-col gap-0.5",t),children:[r.jsx("span",{className:"text-sm font-medium",children:"Resource"}),r.jsx(i,{resource:e.resource,relatedResources:e.related??[],className:"hover:underline",children:r.jsx("div",{className:"text-sm text-muted-foreground",children:r.jsx("span",{className:"font-mono text-xs",children:s})})})]}):r.jsxs("div",{className:l("flex flex-col gap-0.5",t),children:[r.jsx("span",{className:"text-sm font-medium",children:"Resource"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:r.jsx("span",{className:"text-muted-foreground",children:"Unknown"})})]})}export{M as E,S as R,i as a,$ as b,u as c,f as d,x as e,Z as f,k as p};
//# sourceMappingURL=event-resource-display-CDRgVKd4.js.map
