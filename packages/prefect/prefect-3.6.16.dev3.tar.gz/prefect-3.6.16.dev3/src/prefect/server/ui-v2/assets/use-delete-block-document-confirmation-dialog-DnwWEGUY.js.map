{"version":3,"file":"use-delete-block-document-confirmation-dialog-DnwWEGUY.js","sources":["../../src/components/blocks/block-document-action-menu/block-document-action-menu.tsx","../../src/components/blocks/use-delete-block-document-confirmation-dialog.ts"],"sourcesContent":["import { Link } from \"@tanstack/react-router\";\nimport { toast } from \"sonner\";\nimport type { BlockDocument } from \"@/api/block-documents\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuLabel,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Icon } from \"@/components/ui/icons\";\n\nexport type BlockDocumentActionMenuProps = {\n\tblockDocument: BlockDocument;\n\tonDelete: () => void;\n};\n\nexport const BlockDocumentActionMenu = ({\n\tblockDocument,\n\tonDelete,\n}: BlockDocumentActionMenuProps) => {\n\tconst handleCopyName = (_name: string) => {\n\t\tvoid navigator.clipboard.writeText(_name);\n\t\ttoast.success(\"Copied to clipboard!\");\n\t};\n\n\tconst { id, name } = blockDocument;\n\n\treturn (\n\t\t<DropdownMenu>\n\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t<Button variant=\"outline\" className=\"size-8 p-0\">\n\t\t\t\t\t<span className=\"sr-only\">Open menu</span>\n\t\t\t\t\t<Icon id=\"MoreVertical\" className=\"size-4\" />\n\t\t\t\t</Button>\n\t\t\t</DropdownMenuTrigger>\n\t\t\t<DropdownMenuContent align=\"end\">\n\t\t\t\t<DropdownMenuLabel>Actions</DropdownMenuLabel>\n\t\t\t\t{name && (\n\t\t\t\t\t<DropdownMenuItem onClick={() => handleCopyName(name)}>\n\t\t\t\t\t\tCopy Name\n\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t)}\n\t\t\t\t<Link to=\"/blocks/block/$id/edit\" params={{ id }}>\n\t\t\t\t\t<DropdownMenuItem>Edit</DropdownMenuItem>\n\t\t\t\t</Link>\n\t\t\t\t<DropdownMenuItem onClick={onDelete}>Delete</DropdownMenuItem>\n\t\t\t</DropdownMenuContent>\n\t\t</DropdownMenu>\n\t);\n};\n","import { useNavigate } from \"@tanstack/react-router\";\nimport { toast } from \"sonner\";\nimport {\n\ttype BlockDocument,\n\tuseDeleteBlockDocument,\n} from \"@/api/block-documents\";\nimport { useDeleteConfirmationDialog } from \"@/components/ui/delete-confirmation-dialog\";\n\nexport const useDeleteBlockDocumentConfirmationDialog = () => {\n\tconst navigate = useNavigate();\n\tconst [dialogState, confirmDelete] = useDeleteConfirmationDialog();\n\n\tconst { deleteBlockDocument, mutateAsync } = useDeleteBlockDocument();\n\n\tconst handleConfirmDelete = (\n\t\t/** Pass a block document or list of block document ids for bulk edit */\n\t\tblockDocument: BlockDocument | Array<string>,\n\t\t{\n\t\t\tshouldNavigate = false,\n\t\t\tonSuccess = () => {},\n\t\t}: {\n\t\t\t/** Should navigate back to /blocks */\n\t\t\tshouldNavigate?: boolean;\n\t\t\tonSuccess?: () => void;\n\t\t} = {},\n\t) => {\n\t\tif (Array.isArray(blockDocument)) {\n\t\t\tconst handleDeleteBlockDocuments = async () => {\n\t\t\t\ttry {\n\t\t\t\t\tawait Promise.all(blockDocument.map((id) => mutateAsync(id)));\n\t\t\t\t\ttoast.success(\"Blocks deleted\");\n\t\t\t\t\tif (shouldNavigate) {\n\t\t\t\t\t\tvoid navigate({ to: \"/blocks\" });\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconst message =\n\t\t\t\t\t\terror instanceof Error\n\t\t\t\t\t\t\t? error.message\n\t\t\t\t\t\t\t: \"Unknown error while deleting block.\";\n\t\t\t\t\ttoast.error(message);\n\t\t\t\t\tconsole.error(message);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst description =\n\t\t\t\tblockDocument.length > 1\n\t\t\t\t\t? `Are you sure you want to delete these ${blockDocument.length} selected blocks?`\n\t\t\t\t\t: \"Are you sure you want to delete this selected block?\";\n\n\t\t\tconfirmDelete({\n\t\t\t\ttitle: \"Delete Blocks\",\n\t\t\t\tdescription,\n\t\t\t\tonConfirm: () => {\n\t\t\t\t\tvoid handleDeleteBlockDocuments();\n\t\t\t\t\tonSuccess();\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\tconfirmDelete({\n\t\t\t\ttitle: \"Delete Block\",\n\t\t\t\tdescription: `Are you sure you want to delete ${blockDocument.name ? blockDocument.name : \"this block\"}?`,\n\t\t\t\tonConfirm: () => {\n\t\t\t\t\tdeleteBlockDocument(blockDocument.id, {\n\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\ttoast.success(\"Block deleted\");\n\t\t\t\t\t\t\tif (shouldNavigate) {\n\t\t\t\t\t\t\t\tvoid navigate({ to: \"/blocks\" });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonSuccess();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonError: (error) => {\n\t\t\t\t\t\t\tconst message =\n\t\t\t\t\t\t\t\terror.message || \"Unknown error while deleting block.\";\n\t\t\t\t\t\t\ttoast.error(message);\n\t\t\t\t\t\t\tconsole.error(message);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t};\n\n\treturn [dialogState, handleConfirmDelete] as const;\n};\n"],"names":["BlockDocumentActionMenu","blockDocument","onDelete","handleCopyName","_name","toast","id","name","DropdownMenu","jsx","DropdownMenuTrigger","jsxs","Button","Icon","DropdownMenuContent","DropdownMenuLabel","DropdownMenuItem","Link","useDeleteBlockDocumentConfirmationDialog","navigate","useNavigate","dialogState","confirmDelete","useDeleteConfirmationDialog","deleteBlockDocument","mutateAsync","useDeleteBlockDocument","shouldNavigate","onSuccess","handleDeleteBlockDocuments","error","message","description"],"mappings":"2QAkBO,MAAMA,EAA0B,CAAC,CACvC,cAAAC,EACA,SAAAC,CACD,IAAoC,CACnC,MAAMC,EAAkBC,GAAkB,CACpC,UAAU,UAAU,UAAUA,CAAK,EACxCC,EAAM,QAAQ,sBAAsB,CACrC,EAEM,CAAE,GAAAC,EAAI,KAAAC,CAAA,EAASN,EAErB,cACEO,EAAA,CACA,SAAA,CAAAC,EAAAA,IAACC,EAAA,CAAoB,QAAO,GAC3B,SAAAC,EAAAA,KAACC,GAAO,QAAQ,UAAU,UAAU,aACnC,SAAA,CAAAH,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,YAAS,EACnCA,EAAAA,IAACI,EAAA,CAAK,GAAG,eAAe,UAAU,QAAA,CAAS,CAAA,CAAA,CAC5C,CAAA,CACD,EACAF,EAAAA,KAACG,EAAA,CAAoB,MAAM,MAC1B,SAAA,CAAAL,EAAAA,IAACM,GAAkB,SAAA,SAAA,CAAO,EACzBR,SACCS,EAAA,CAAiB,QAAS,IAAMb,EAAeI,CAAI,EAAG,SAAA,YAEvD,EAEDE,EAAAA,IAACQ,EAAA,CAAK,GAAG,yBAAyB,OAAQ,CAAE,GAAAX,CAAA,EAC3C,SAAAG,EAAAA,IAACO,EAAA,CAAiB,SAAA,MAAA,CAAI,CAAA,CACvB,EACAP,EAAAA,IAACO,EAAA,CAAiB,QAASd,EAAU,SAAA,QAAA,CAAM,CAAA,CAAA,CAC5C,CAAA,EACD,CAEF,EC3CagB,EAA2C,IAAM,CAC7D,MAAMC,EAAWC,EAAA,EACX,CAACC,EAAaC,CAAa,EAAIC,EAAA,EAE/B,CAAE,oBAAAC,EAAqB,YAAAC,CAAA,EAAgBC,EAAA,EAsE7C,MAAO,CAACL,EApEoB,CAE3BpB,EACA,CACC,eAAA0B,EAAiB,GACjB,UAAAC,EAAY,IAAM,CAAC,CAAA,EAKhB,KACA,CACJ,GAAI,MAAM,QAAQ3B,CAAa,EAAG,CACjC,MAAM4B,EAA6B,SAAY,CAC9C,GAAI,CACH,MAAM,QAAQ,IAAI5B,EAAc,IAAKK,GAAOmB,EAAYnB,CAAE,CAAC,CAAC,EAC5DD,EAAM,QAAQ,gBAAgB,EAC1BsB,GACER,EAAS,CAAE,GAAI,UAAW,CAEjC,OAASW,EAAO,CACf,MAAMC,EACLD,aAAiB,MACdA,EAAM,QACN,sCACJzB,EAAM,MAAM0B,CAAO,EACnB,QAAQ,MAAMA,CAAO,CACtB,CACD,EAEMC,EACL/B,EAAc,OAAS,EACpB,yCAAyCA,EAAc,MAAM,oBAC7D,uDAEJqB,EAAc,CACb,MAAO,gBACP,YAAAU,EACA,UAAW,IAAM,CACXH,EAAA,EACLD,EAAA,CACD,CAAA,CACA,CACF,MACCN,EAAc,CACb,MAAO,eACP,YAAa,mCAAmCrB,EAAc,KAAOA,EAAc,KAAO,YAAY,IACtG,UAAW,IAAM,CAChBuB,EAAoBvB,EAAc,GAAI,CACrC,UAAW,IAAM,CAChBI,EAAM,QAAQ,eAAe,EACzBsB,GACER,EAAS,CAAE,GAAI,UAAW,EAEhCS,EAAA,CACD,EACA,QAAUE,GAAU,CACnB,MAAMC,EACLD,EAAM,SAAW,sCAClBzB,EAAM,MAAM0B,CAAO,EACnB,QAAQ,MAAMA,CAAO,CACtB,CAAA,CACA,CACF,CAAA,CACA,CAEH,CAEwC,CACzC"}