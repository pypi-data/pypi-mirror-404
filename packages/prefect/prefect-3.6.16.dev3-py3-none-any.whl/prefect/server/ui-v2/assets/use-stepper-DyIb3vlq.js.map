{"version":3,"file":"use-stepper-DyIb3vlq.js","sources":["../../src/components/ui/stepper/stepper.tsx","../../src/hooks/use-set.ts","../../src/hooks/use-stepper.ts"],"sourcesContent":["import { Card } from \"@/components/ui/card\";\nimport { Icon } from \"@/components/ui/icons\";\nimport { Typography } from \"@/components/ui/typography\";\nimport { cn } from \"@/utils\";\n\ntype StepperProps = {\n\tcurrentStepNum: number;\n\tsteps: Array<string> | ReadonlyArray<string>;\n\tonClick: ({\n\t\tstepName,\n\t\tstepNum,\n\t}: {\n\t\tstepName: string;\n\t\tstepNum: number;\n\t}) => void;\n\tcompletedSteps: Set<number>;\n\tvisitedSteps: Set<number>;\n};\nconst Stepper = ({\n\tcurrentStepNum,\n\tonClick,\n\tsteps,\n\tcompletedSteps,\n\tvisitedSteps,\n}: StepperProps) => {\n\treturn (\n\t\t<Card className=\"p-4 flex flex-row items-center justify-around gap-4 overflow-x-auto\">\n\t\t\t{steps.map((step, i) => {\n\t\t\t\tconst isCurrentStep = currentStepNum === i;\n\t\t\t\tconst isStepVisited = visitedSteps.has(i);\n\t\t\t\tconst isStepComplete = completedSteps.has(i);\n\n\t\t\t\treturn (\n\t\t\t\t\t<Step\n\t\t\t\t\t\tkey={step}\n\t\t\t\t\t\tdisabled={!isStepVisited}\n\t\t\t\t\t\tonClick={() => onClick({ stepName: step, stepNum: i })}\n\t\t\t\t\t\tnumber={i}\n\t\t\t\t\t\tisActive={isCurrentStep}\n\t\t\t\t\t\tisComplete={isStepComplete}\n\t\t\t\t\t\tname={step}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t})}\n\t\t</Card>\n\t);\n};\n\ntype StepProps = {\n\tisActive?: boolean;\n\tisComplete?: boolean;\n\tdisabled?: boolean;\n\tnumber: number;\n\tname: string;\n\tonClick?: ({ number, name }: { number: number; name: string }) => void;\n};\n\nconst Step = ({\n\tisActive = false,\n\tisComplete = false,\n\tdisabled = false,\n\tonClick = () => {},\n\t/** Assume steps are indexed =0 */\n\tnumber,\n\tname,\n}: StepProps) => {\n\t// add 1 to number assuming index 0\n\tconst adjustedNumberDisplay = number + 1;\n\tconst numberLabel =\n\t\tadjustedNumberDisplay < 10\n\t\t\t? `0${adjustedNumberDisplay}`\n\t\t\t: String(adjustedNumberDisplay);\n\n\treturn (\n\t\t<button\n\t\t\ttype=\"button\"\n\t\t\tclassName={cn(\n\t\t\t\t\"flex items-center gap-3 text-nowrap\",\n\t\t\t\tdisabled && \"cursor-not-allowed\",\n\t\t\t)}\n\t\t\tdisabled={disabled}\n\t\t\tonClick={() => onClick({ number, name })}\n\t\t>\n\t\t\t{isComplete ? (\n\t\t\t\t<Icon\n\t\t\t\t\tid=\"CircleCheck\"\n\t\t\t\t\tcolor={isActive ? \"teal\" : \"grey\"}\n\t\t\t\t\tclassName=\"size-12\"\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<StepIcon isActive={isActive} label={numberLabel} />\n\t\t\t)}\n\t\t\t<Typography\n\t\t\t\tvariant=\"bodyLarge\"\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"text-gray-500 border-gray-500 whitespace-nowrap\",\n\t\t\t\t\tisActive && \"text-teal-700 border-teal-700\",\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{name}\n\t\t\t</Typography>\n\t\t</button>\n\t);\n};\n\ntype StepIconProps = {\n\tlabel: string;\n\tisActive?: boolean;\n};\nconst StepIcon = ({ isActive = false, label }: StepIconProps) => (\n\t<div\n\t\tclassName={cn(\n\t\t\t\"flex items-center justify-center size-12 rounded-full border-4 text-gray-500 border-gray-500\",\n\t\t\tisActive && \"text-teal-700 border-teal-700\",\n\t\t)}\n\t>\n\t\t<Typography\n\t\t\tvariant=\"bodyLarge\"\n\t\t\tclassName={cn(\n\t\t\t\t\"text-gray-500 border-gray-500\",\n\t\t\t\tisActive && \"text-teal-700 border-teal-700\",\n\t\t\t)}\n\t\t>\n\t\t\t{label}\n\t\t</Typography>\n\t</div>\n);\n\nexport { Step, Stepper };\n","import { useCallback, useMemo, useState } from \"react\";\n\ntype StableActions<K> = {\n\tadd: (key: K) => void;\n\tremove: (key: K) => void;\n\ttoggle: (key: K) => void;\n\treset: () => void;\n\tclear: () => void;\n};\n\ntype Actions<K> = StableActions<K> & {\n\thas: (key: K) => boolean;\n};\n\n/**\n * A hook that is used to declarative to keep state of a 'Set' type of data structure.\n * This is useful in cases where the UX needs to keep track of selected rows by id\n *\n * @param initialSet Initial state of a Set\n * @returns a Set object and utils as a tuple\n *\n * @example\n * ```tsx\n * function FlowCheckboxList() {\n *   const [selectedIDs, { has, toggle }] = useSet<string>();\n *\n *   return flows.map((flow) =>\n * \t\t<Checkbox\n * \t\t\tkey={flow.id}\n * \t\t\tchecked={has(flow.id)}\n * \t\t\tonCheck={() => toggle(flow.id)}\n * \t\t\tlabel={flow.name} />\n *\n * }\n * ```\n */\nexport const useSet = <K>(initialSet = new Set<K>()): [Set<K>, Actions<K>] => {\n\tconst [set, setSet] = useState(initialSet);\n\n\tconst stableActions = useMemo(() => {\n\t\tconst add = (item: K) =>\n\t\t\tsetSet((curr) => new Set([...Array.from(curr), item]));\n\t\tconst remove = (item: K) =>\n\t\t\tsetSet(\n\t\t\t\t(curr) => new Set([...Array.from(curr).filter((i) => i !== item)]),\n\t\t\t);\n\t\tconst toggle = (item: K) =>\n\t\t\tsetSet((curr) =>\n\t\t\t\tcurr.has(item)\n\t\t\t\t\t? new Set(Array.from(curr).filter((i) => i !== item))\n\t\t\t\t\t: new Set([...Array.from(curr), item]),\n\t\t\t);\n\t\tconst reset = () => setSet(initialSet);\n\t\tconst clear = () => setSet(new Set());\n\n\t\treturn { add, remove, toggle, clear, reset };\n\t}, [initialSet]);\n\n\tconst utils = {\n\t\thas: useCallback((item) => set.has(item), [set]),\n\t\t...stableActions,\n\t} as Actions<K>;\n\n\treturn [set, utils];\n};\n","import { useState } from \"react\";\nimport { useSet } from \"./use-set\";\n/**\n *\n * @param steps\n * @param startingStep\n * @returns state with declarative utilities to increment, decrement, or skip to a current state\n *\n * @example\n * ```ts\n * const STEPS = ['Trigger', 'Actions', 'Details'] as const\n *\n * const stepper = useStepper(STEPS.length);\n *\n * return (\n * <div>\n *   <h2>Current Step: {STEPS[stepper.currentStep]}</h2>\n *   <ul>\n *     {STEPS.map((step, i) => (\n * \t\t\t<li key={i} onClick={() => stepper.setStep(i)}>{step}</li>\n * \t\t)}\n *   </ul>\n *   <div>\n *     <Button disabled={stepper.isStartingStep} onClick={stepper.decrementStep()}>Previous</Button>\n *     <Button onClick={stepper.incrementStep()}>{stepper.isFinalStep ? 'Save' : 'Next'}</Button>\n *   </div>\n * </div>\n * )\n * ```\n */\nexport const useStepper = (\n\tnumSteps: number,\n\tstartingStep = 0,\n\tinitialVisitedSteps?: Set<number>,\n) => {\n\tconst [currentStep, setCurrentStep] = useState(startingStep);\n\tconst [visitedStepsSet, { add: addVisitedStep, reset: resetVisitedSteps }] =\n\t\tuseSet(initialVisitedSteps ?? new Set<number>([0]));\n\tconst [\n\t\tcompletedStepsSet,\n\t\t{ add: addCompletedStep, reset: resetCompletedSteps },\n\t] = useSet(new Set<number>());\n\n\tconst incrementStep = () => {\n\t\tif (currentStep < numSteps - 1) {\n\t\t\t// Marks step as visited\n\t\t\taddCompletedStep(currentStep);\n\t\t\taddVisitedStep(currentStep + 1);\n\t\t\tsetCurrentStep((curr) => curr + 1);\n\t\t}\n\t};\n\n\tconst decrementStep = () => {\n\t\tif (currentStep > 0) {\n\t\t\tsetCurrentStep((curr) => curr - 1);\n\t\t}\n\t};\n\n\tconst changeStep = (stepNum: number) => {\n\t\tsetCurrentStep(stepNum);\n\t};\n\n\tconst reset = () => {\n\t\tresetCompletedSteps();\n\t\tresetVisitedSteps();\n\t\tsetCurrentStep(startingStep);\n\t};\n\n\tconst isFinalStep = currentStep === numSteps - 1;\n\tconst isStartingStep = currentStep === 0;\n\n\treturn {\n\t\tchangeStep,\n\t\tcompletedStepsSet,\n\t\tcurrentStep,\n\t\tdecrementStep,\n\t\tincrementStep,\n\t\tisFinalStep,\n\t\tisStartingStep,\n\t\treset,\n\t\tvisitedStepsSet,\n\t};\n};\n"],"names":["Stepper","currentStepNum","onClick","steps","completedSteps","visitedSteps","jsx","Card","step","i","isCurrentStep","isStepVisited","isStepComplete","Step","isActive","isComplete","disabled","number","name","adjustedNumberDisplay","numberLabel","jsxs","cn","Icon","StepIcon","Typography","label","useSet","initialSet","set","setSet","useState","stableActions","useMemo","item","curr","utils","useCallback","useStepper","numSteps","startingStep","initialVisitedSteps","currentStep","setCurrentStep","visitedStepsSet","addVisitedStep","resetVisitedSteps","completedStepsSet","addCompletedStep","resetCompletedSteps","incrementStep","decrementStep","changeStep","stepNum","reset","isFinalStep"],"mappings":"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"}