import{j as e,r as _,s as p}from"./vendor-tanstack-BcZfOOfy.js";import{S as w,a as E,b as S,c as P,e as u,C as h,cE as W,ao as k,$ as z,au as O,ar as X,as as H,B as q,g as J,h as x,bw as m,bF as g,aQ as N,bX as v,bU as y,bV as C,I as D,bW as I,av as T,ap as K,q as Y,b9 as d,ba as Z,bb as R,bc as o,cF as ee,bd as se,be as te,cG as ae}from"./index-B8vo2Lrg.js";const je=({defaultValue:t,value:a,onSelect:s})=>e.jsxs(w,{defaultValue:t,value:a,onValueChange:s,children:[e.jsx(E,{"aria-label":"Task run sort order",className:"w-full",children:e.jsx(S,{placeholder:"Sort by"})}),e.jsxs(P,{children:[e.jsx(u,{value:"EXPECTED_START_TIME_DESC",children:"Newest to oldest"}),e.jsx(u,{value:"EXPECTED_START_TIME_ASC",children:"Oldest to newest"})]})]}),L=({taskRun:t,flow:a,flowRun:s,checked:r,onCheckedChange:l})=>{const i=typeof l=="function";return e.jsxs(h,{className:re({state:t.state?.type}),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsx(k,{checked:r??!1,onCheckedChange:l}),e.jsx(le,{taskRun:t,flow:a,flowRun:s})]}),e.jsx("div",{children:e.jsx(z,{tags:t.tags??[]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.state&&e.jsx(O,{type:t.state.type,name:t.state.name}),e.jsx(ie,{taskRun:t}),e.jsx(ne,{taskRun:t})]})]})},re=W("flex flex-col gap-2 p-4 border-l-8",{variants:{state:{COMPLETED:"border-l-green-600",FAILED:"border-l-red-600",RUNNING:"border-l-blue-700",CANCELLED:"border-l-gray-800",CANCELLING:"border-l-gray-800",CRASHED:"border-l-orange-600",PAUSED:"border-l-gray-800",PENDING:"border-l-gray-800",SCHEDULED:"border-l-yellow-700"}}}),le=({taskRun:t,flow:a,flowRun:s})=>e.jsx("div",{className:"flex items-center",children:e.jsx(q,{children:e.jsxs(J,{children:[a&&e.jsxs(e.Fragment,{children:[e.jsx(x,{children:e.jsx(m,{to:"/flows/flow/$id",params:{id:a.id},className:"font-semibold text-foreground",children:a.name})}),e.jsx(g,{})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx(x,{children:e.jsx(m,{to:"/runs/flow-run/$id",params:{id:s.id},children:s.name})}),e.jsx(g,{})]}),e.jsx(x,{className:"font-bold text-foreground",children:e.jsx(m,{to:"/runs/task-run/$id",params:{id:t.id},children:t.name})})]})})}),ie=({taskRun:t})=>{const a="start_time"in t?t.start_time:null,s="expected_start_time"in t?t.expected_start_time:null,{text:r,tooltipText:l}=_.useMemo(()=>{let i,n;return a?(i=N(a,"dateTimeNumeric"),n=new Date(a).toString()):s&&(i=`Scheduled for ${N(s,"dateTimeNumeric")}`,n=new Date(s).toString()),{text:i,tooltipText:n}},[s,a]);return e.jsx(v,{children:e.jsxs(y,{children:[e.jsx(C,{asChild:!0,disabled:!r,children:e.jsxs("div",{className:"text-xs font-mono flex gap-2 items-center",children:[e.jsx(D,{id:"Calendar",className:"size-4"}),r??"No start time"]})}),e.jsx(I,{children:l})]})})},ne=({taskRun:t})=>{const a="estimated_run_time"in t?t.estimated_run_time:null,s="total_run_time"in t?t.total_run_time:null,r=a??s??0;if(r===0)return null;const l=T(r*1e3,{maxDecimalPoints:2,units:["h","m","s"],round:!0}),i=T(r*1e3,{maxDecimalPoints:5,units:["h","m","s"]});return e.jsx(v,{children:e.jsxs(y,{children:[e.jsx(C,{asChild:!0,children:e.jsxs("div",{className:"flex gap-2 items-center text-xs font-mono",children:[e.jsx(D,{id:"Clock",className:"size-4"}),l]})}),e.jsx(I,{children:i})]})})},ce=({taskRun:t,flowRunId:a,checked:s,onCheckedChange:r})=>{const{data:l}=p(X(a)),{data:i}=p(H(l.flow_id));return e.jsx(L,{taskRun:t,flow:i,flowRun:l,checked:s,onCheckedChange:r})},de=({taskRun:t,checked:a,onCheckedChange:s})=>{const r=t.flow_run_id;return r?e.jsx(ce,{taskRun:t,flowRunId:r,checked:a,onCheckedChange:s}):e.jsx(L,{taskRun:t,checked:a,onCheckedChange:s})},oe=({taskRun:t,checked:a,onCheckedChange:s})=>e.jsx(_.Suspense,{fallback:e.jsxs(h,{className:"flex flex-col gap-2 p-4 border-l-8 border-l-gray-300 animate-pulse",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]}),children:e.jsx(de,{taskRun:t,checked:a,onCheckedChange:s})}),fe=({taskRuns:t,onClearFilters:a,onSelect:s,selectedRows:r})=>t?t.length===0?e.jsx("div",{className:"flex justify-center py-4",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(K,{children:"No runs found"}),a&&e.jsx(Y,{onClick:a,children:"Clear Filters"})]})}):e.jsx("ul",{className:"flex flex-col gap-2",children:t.map(l=>e.jsx("li",{children:e.jsx(oe,{taskRun:l,checked:r?.has(l.id),onCheckedChange:s?i=>s(l.id,i):void 0})},l.id))}):e.jsx(xe,{numSkeletons:5}),xe=({numSkeletons:t=1})=>e.jsx("ul",{className:"flex flex-col gap-1",children:Array.from({length:t}).map((a,s)=>e.jsx("li",{children:e.jsxs(h,{className:"flex flex-col gap-2 p-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(d,{className:"h-4 w-[350px]"}),e.jsx(d,{className:"h-4 w-[400px]"})]}),e.jsx(d,{className:"h-4 w-[400px]"}),e.jsx(d,{className:"h-4 w-[200px]"})]})},s))}),me=[5,10,25,50,100],be=({count:t,pages:a,pagination:s,onChangePagination:r,onPrefetchPage:l})=>{const i=()=>r({limit:s.limit,page:1}),n=()=>r({limit:s.limit,page:s.page-1}),B=()=>r({limit:s.limit,page:s.page+1}),F=()=>r({limit:s.limit,page:a}),A=()=>{s.page>1&&l?.(1)},M=()=>{s.page>1&&l?.(s.page-1)},G=()=>{s.page<a&&l?.(s.page+1)},V=()=>{s.page<a&&l?.(a)},j=s.page<=1,f=s.page>=a,$=c=>{const b=Number(c),Q=Math.ceil(t/b),U=Math.min(s.page,Q);r({limit:b,page:U})};return e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{className:"whitespace-nowrap",children:"Items per page"}),e.jsxs(w,{value:String(s.limit),onValueChange:$,children:[e.jsx(E,{"aria-label":"Items per page",children:e.jsx(S,{placeholder:"Theme"})}),e.jsx(P,{children:me.map(c=>e.jsx(u,{value:String(c),children:c},c))})]})]}),e.jsx(Z,{className:"justify-end",children:e.jsxs(R,{children:[e.jsxs(o,{children:[e.jsx(ee,{onClick:i,onMouseEnter:A,disabled:j}),e.jsx(se,{onClick:n,onMouseEnter:M,disabled:j})]}),e.jsxs(o,{className:"text-sm",children:["Page ",a===0?0:s.page," of ",a]}),e.jsx(o,{children:e.jsx(te,{onClick:B,onMouseEnter:G,disabled:f})}),e.jsx(o,{children:e.jsx(ae,{onClick:F,onMouseEnter:V,disabled:f})})]})})]})};export{je as T,be as a,fe as b};
//# sourceMappingURL=task-runs-pagination-DUy3147A.js.map
