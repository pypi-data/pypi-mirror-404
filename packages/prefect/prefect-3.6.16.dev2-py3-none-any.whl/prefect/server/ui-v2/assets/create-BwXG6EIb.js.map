{"version":3,"file":"create-BwXG6EIb.js","sources":["../../src/components/work-pools/create/information-step/information-step.tsx","../../src/components/work-pools/create/information-step/schema.ts","../../src/components/work-pools/create/infrastructure-configuration-step/infrastructure-configuration-step.tsx","../../src/components/work-pools/create/infrastructure-configuration-step/schema.ts","../../src/components/ui/logo-image/logo-image.tsx","../../src/components/work-pools/create/infrastructure-type-step/infrastructure-type-step.tsx","../../src/components/work-pools/create/work-pool-create-wizard.tsx","../../src/routes/work-pools/create.tsx?tsr-split=component"],"sourcesContent":["import { useFormContext } from \"react-hook-form\";\nimport {\n\tFormControl,\n\tFormField,\n\tFormItem,\n\tFormLabel,\n\tFormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport type { WorkPoolInformationFormValues } from \"./schema\";\n\nexport function InformationStep() {\n\tconst form = useFormContext<WorkPoolInformationFormValues>();\n\n\treturn (\n\t\t<>\n\t\t\t<FormField\n\t\t\t\tcontrol={form.control}\n\t\t\t\tname=\"name\"\n\t\t\t\trender={({ field }) => (\n\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t<FormLabel>Name</FormLabel>\n\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t<Input {...field} />\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t</FormItem>\n\t\t\t\t)}\n\t\t\t/>\n\n\t\t\t<FormField\n\t\t\t\tcontrol={form.control}\n\t\t\t\tname=\"description\"\n\t\t\t\trender={({ field }) => (\n\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t<FormLabel>Description (Optional)</FormLabel>\n\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\tvalue={field.value ?? \"\"}\n\t\t\t\t\t\t\t\trows={7}\n\t\t\t\t\t\t\t\tplaceholder=\"Enter a description for your work pool\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t</FormItem>\n\t\t\t\t)}\n\t\t\t/>\n\n\t\t\t<FormField\n\t\t\t\tcontrol={form.control}\n\t\t\t\tname=\"concurrencyLimit\"\n\t\t\t\trender={({ field }) => (\n\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t<FormLabel>Flow Run Concurrency (Optional)</FormLabel>\n\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tplaceholder=\"Unlimited\"\n\t\t\t\t\t\t\t\tvalue={field.value ?? \"\"}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tconst value = e.target.value;\n\t\t\t\t\t\t\t\t\tfield.onChange(value === \"\" ? null : Number(value));\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t</FormItem>\n\t\t\t\t)}\n\t\t\t/>\n\t\t</>\n\t);\n}\n","import { z } from \"zod\";\n\nexport const workPoolInformationSchema = z.object({\n\tname: z\n\t\t.string()\n\t\t.min(1, \"Name is required\")\n\t\t.refine(\n\t\t\t(value) => !value.toLowerCase().startsWith(\"prefect\"),\n\t\t\t\"Work pools starting with 'prefect' are reserved for internal use.\",\n\t\t),\n\tdescription: z.string().nullable().optional(),\n\tconcurrencyLimit: z.number().min(0).nullable().optional(),\n});\n\nexport type WorkPoolInformationFormValues = z.infer<\n\ttypeof workPoolInformationSchema\n>;\n","import { useFormContext } from \"react-hook-form\";\nimport { Card, CardContent, CardDescription } from \"@/components/ui/card\";\nimport { BaseJobTemplateFormSection } from \"./base-job-template-form-section\";\nimport type { WorkerBaseJobTemplate } from \"./schema\";\n\nexport function InfrastructureConfigurationStep() {\n\tconst form = useFormContext();\n\tconst baseJobTemplate = form.watch(\n\t\t\"baseJobTemplate\",\n\t) as WorkerBaseJobTemplate;\n\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<Card>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<CardDescription>\n\t\t\t\t\t\tThe fields below control the default values for the base job\n\t\t\t\t\t\ttemplate. These values can be overridden by deployments.\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<br />A work pools job template controls infrastructure\n\t\t\t\t\t\tconfiguration for all flow runs in the work pool, and specifies the\n\t\t\t\t\t\tconfiguration that can be overridden by deployments.\n\t\t\t\t\t</CardDescription>\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t<BaseJobTemplateFormSection\n\t\t\t\tbaseJobTemplate={baseJobTemplate}\n\t\t\t\tonBaseJobTemplateChange={(value) => {\n\t\t\t\t\tform.setValue(\"baseJobTemplate\", value);\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import { z } from \"zod\";\nimport type { WorkerBaseJobTemplate } from \"@/components/work-pools/types\";\n\nexport type { WorkerBaseJobTemplate };\n\nexport const infrastructureConfigurationSchema = z.object({\n\tbaseJobTemplate: z.record(z.unknown()).optional(),\n});\n\nexport type InfrastructureConfigurationFormValues = z.infer<\n\ttypeof infrastructureConfigurationSchema\n>;\n\nexport type WorkPoolFormValues = {\n\tname?: string;\n\tdescription?: string | null;\n\ttype?: string;\n\tisPaused?: boolean;\n\tconcurrencyLimit?: number | null;\n\tbaseJobTemplate?: WorkerBaseJobTemplate;\n};\n","import type React from \"react\";\nimport { cn } from \"@/utils\";\n\ntype LogoImageProps = {\n\turl: string | null;\n\talt: string;\n\tsize?: \"sm\" | \"md\" | \"lg\";\n\tclassName?: string;\n};\n\nconst sizeClasses = {\n\tsm: \"h-4 w-4\",\n\tmd: \"h-8 w-8\",\n\tlg: \"h-12 w-12\",\n};\n\nexport const LogoImage: React.FC<LogoImageProps> = ({\n\turl,\n\talt,\n\tsize = \"md\",\n\tclassName,\n}) => {\n\tif (!url) {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"rounded border bg-muted flex items-center justify-center text-muted-foreground text-xs\",\n\t\t\t\t\tsizeClasses[size],\n\t\t\t\t\tclassName,\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{alt.charAt(0).toUpperCase()}\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<img\n\t\t\tsrc={url}\n\t\t\talt={alt}\n\t\t\tclassName={cn(\n\t\t\t\t\"rounded border bg-background/50 backdrop-blur-sm object-contain\",\n\t\t\t\tsizeClasses[size],\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\tonError={(e) => {\n\t\t\t\tconst target = e.target as HTMLImageElement;\n\t\t\t\tconst fallback = document.createElement(\"div\");\n\t\t\t\tfallback.className = cn(\n\t\t\t\t\t\"rounded border bg-muted flex items-center justify-center text-muted-foreground text-xs\",\n\t\t\t\t\tsizeClasses[size],\n\t\t\t\t\tclassName,\n\t\t\t\t);\n\t\t\t\tfallback.textContent = alt.charAt(0).toUpperCase();\n\t\t\t\ttarget.parentNode?.replaceChild(fallback, target);\n\t\t\t}}\n\t\t/>\n\t);\n};\n","import { useSuspenseQuery } from \"@tanstack/react-query\";\nimport { useMemo } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { buildListWorkPoolTypesQuery } from \"@/api/collections/collections\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n\tFormControl,\n\tFormField,\n\tFormItem,\n\tFormLabel,\n\tFormMessage,\n} from \"@/components/ui/form\";\nimport { LogoImage } from \"@/components/ui/logo-image\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { titleCase } from \"@/utils\";\n\ntype WorkPoolTypeSelectOption = {\n\tlabel: string;\n\tvalue: string;\n\tlogoUrl: string;\n\tdescription: string;\n\tdocumentationUrl?: string;\n\tisBeta: boolean;\n};\n\nexport function InfrastructureTypeStep() {\n\tconst form = useFormContext();\n\tconst { data: workersResponse = {} } = useSuspenseQuery(\n\t\tbuildListWorkPoolTypesQuery(),\n\t);\n\n\tconst options = useMemo<WorkPoolTypeSelectOption[]>(() => {\n\t\tconst options: WorkPoolTypeSelectOption[] = [];\n\n\t\t// Transform the workers response to options array\n\t\tObject.values(workersResponse).forEach((collection) => {\n\t\t\tif (collection && typeof collection === \"object\") {\n\t\t\t\tObject.values(collection).forEach((worker) => {\n\t\t\t\t\tif (worker && typeof worker === \"object\" && \"type\" in worker) {\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\tdisplay_name: displayName,\n\t\t\t\t\t\t\tdescription,\n\t\t\t\t\t\t\tlogo_url: logoUrl,\n\t\t\t\t\t\t\tdocumentation_url: documentationUrl,\n\t\t\t\t\t\t\tis_beta: isBeta,\n\t\t\t\t\t\t} = worker as {\n\t\t\t\t\t\t\ttype?: string;\n\t\t\t\t\t\t\tdisplay_name?: string;\n\t\t\t\t\t\t\tdescription?: string;\n\t\t\t\t\t\t\tlogo_url?: string;\n\t\t\t\t\t\t\tdocumentation_url?: string;\n\t\t\t\t\t\t\tis_beta?: boolean;\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (type && logoUrl && description) {\n\t\t\t\t\t\t\toptions.push({\n\t\t\t\t\t\t\t\tlabel: displayName || titleCase(type),\n\t\t\t\t\t\t\t\tvalue: type,\n\t\t\t\t\t\t\t\tlogoUrl,\n\t\t\t\t\t\t\t\tdescription,\n\t\t\t\t\t\t\t\tdocumentationUrl,\n\t\t\t\t\t\t\t\tisBeta: isBeta || false,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// Sort options: non-beta first, then alphabetically by label\n\t\treturn options.sort((firstOption, secondOption) => {\n\t\t\tif (firstOption.isBeta && !secondOption.isBeta) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (!firstOption.isBeta && secondOption.isBeta) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn firstOption.label.localeCompare(secondOption.label);\n\t\t});\n\t}, [workersResponse]);\n\n\treturn (\n\t\t<FormField\n\t\t\tcontrol={form.control}\n\t\t\tname=\"type\"\n\t\t\trender={({ field, fieldState }) => (\n\t\t\t\t<FormItem>\n\t\t\t\t\t<FormLabel className=\"text-base font-medium\">\n\t\t\t\t\t\tSelect the infrastructure you want to use to execute your flow runs\n\t\t\t\t\t</FormLabel>\n\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t<RadioGroup\n\t\t\t\t\t\t\tvalue={field.value as string}\n\t\t\t\t\t\t\tonValueChange={(value: string) => field.onChange(value)}\n\t\t\t\t\t\t\tclassName=\"space-y-3\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{options.map(({ label, value, logoUrl, description, isBeta }) => (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tkey={value}\n\t\t\t\t\t\t\t\t\tclassName=\"flex items-center space-x-3 p-4 rounded-lg border hover:bg-accent/50\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<RadioGroupItem value={value} id={value} />\n\t\t\t\t\t\t\t\t\t<label htmlFor={value} className=\"flex-1 cursor-pointer\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-4\">\n\t\t\t\t\t\t\t\t\t\t\t<LogoImage url={logoUrl} alt={label} size=\"md\" />\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-col gap-2 flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-base font-medium flex items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{isBeta && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"secondary\" className=\"ml-2 text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tBeta\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{description}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t</FormControl>\n\t\t\t\t\t{fieldState.error && (\n\t\t\t\t\t\t<FormMessage>{fieldState.error.message}</FormMessage>\n\t\t\t\t\t)}\n\t\t\t\t</FormItem>\n\t\t\t)}\n\t\t/>\n\t);\n}\n","import { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useSuspenseQuery } from \"@tanstack/react-query\";\nimport { useRouter } from \"@tanstack/react-router\";\nimport { useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { toast } from \"sonner\";\nimport { z } from \"zod\";\nimport { buildListWorkPoolTypesQuery } from \"@/api/collections/collections\";\nimport { useCreateWorkPool, type WorkPoolCreate } from \"@/api/work-pools\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Form } from \"@/components/ui/form\";\nimport { Stepper } from \"@/components/ui/stepper\";\nimport { useStepper } from \"@/hooks/use-stepper\";\nimport { InformationStep } from \"./information-step\";\nimport { workPoolInformationSchema } from \"./information-step/schema\";\nimport { InfrastructureConfigurationStep } from \"./infrastructure-configuration-step\";\nimport { infrastructureConfigurationSchema } from \"./infrastructure-configuration-step/schema\";\nimport { InfrastructureTypeStep } from \"./infrastructure-type-step\";\n\nconst STEPS = [\"Infrastructure Type\", \"Details\", \"Configuration\"] as const;\n\n// Combined schema for all steps\nconst workPoolCreateSchema = z.object({\n\ttype: z.string().min(1, \"Infrastructure type is required\"),\n\t...workPoolInformationSchema.shape,\n\t...infrastructureConfigurationSchema.shape,\n});\n\ntype WorkPoolCreateFormValues = z.infer<typeof workPoolCreateSchema>;\n\nexport function WorkPoolCreateWizard() {\n\tconst router = useRouter();\n\tconst { createWorkPool, isPending } = useCreateWorkPool();\n\tconst { data: workersResponse = {} } = useSuspenseQuery(\n\t\tbuildListWorkPoolTypesQuery(),\n\t);\n\n\t// Stepper state management\n\tconst stepper = useStepper(STEPS.length);\n\n\t// Form state management\n\tconst form = useForm<WorkPoolCreateFormValues>({\n\t\tresolver: zodResolver(workPoolCreateSchema),\n\t\tdefaultValues: {\n\t\t\tdescription: null,\n\t\t\tconcurrencyLimit: null,\n\t\t},\n\t});\n\n\tconst workerType = form.watch(\"type\");\n\n\tuseEffect(() => {\n\t\tconst workerInfo = Object.values(workersResponse).find(\n\t\t\t(collection) =>\n\t\t\t\tcollection &&\n\t\t\t\ttypeof collection === \"object\" &&\n\t\t\t\tObject.values(collection).find(\n\t\t\t\t\t(workerInfo) =>\n\t\t\t\t\t\tworkerInfo &&\n\t\t\t\t\t\ttypeof workerInfo === \"object\" &&\n\t\t\t\t\t\t\"type\" in workerInfo &&\n\t\t\t\t\t\t(workerInfo as { type: string }).type === workerType,\n\t\t\t\t),\n\t\t) as Record<string, unknown> | undefined;\n\t\tif (\n\t\t\tworkerInfo &&\n\t\t\tworkerType in workerInfo &&\n\t\t\ttypeof workerInfo[workerType] === \"object\" &&\n\t\t\tworkerInfo[workerType] &&\n\t\t\t\"default_base_job_configuration\" in workerInfo[workerType]\n\t\t) {\n\t\t\tform.setValue(\n\t\t\t\t\"baseJobTemplate\",\n\t\t\t\tworkerInfo[workerType].default_base_job_configuration as Record<\n\t\t\t\t\tstring,\n\t\t\t\t\tunknown\n\t\t\t\t>,\n\t\t\t);\n\t\t}\n\t}, [workersResponse, form, workerType]);\n\n\tconst handleNext = async () => {\n\t\tconst fieldsToValidate = getFieldsForStep(stepper.currentStep);\n\t\tconst isStepValid = await form.trigger(fieldsToValidate);\n\n\t\tif (isStepValid) {\n\t\t\tif (stepper.isFinalStep) {\n\t\t\t\tawait handleSubmit();\n\t\t\t} else {\n\t\t\t\tstepper.incrementStep();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handleBack = () => {\n\t\tstepper.decrementStep();\n\t};\n\n\tconst handleCancel = () => {\n\t\tvoid router.navigate({ to: \"/work-pools\" });\n\t};\n\n\tconst handleSubmit = async () => {\n\t\tconst isValid = await form.trigger();\n\t\tif (!isValid) return;\n\n\t\tconst formData = form.getValues();\n\n\t\t// Validate required fields before submission\n\t\tif (!formData.name || !formData.type) {\n\t\t\ttoast.error(\"Please fill in all required fields\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst workPoolData: WorkPoolCreate = {\n\t\t\tname: formData.name,\n\t\t\ttype: formData.type,\n\t\t\tdescription: formData.description,\n\t\t\tis_paused: false,\n\t\t\tconcurrency_limit: formData.concurrencyLimit,\n\t\t\tbase_job_template:\n\t\t\t\t(formData.baseJobTemplate as Record<string, unknown>) || {},\n\t\t};\n\n\t\tcreateWorkPool(workPoolData, {\n\t\t\tonSuccess: (data) => {\n\t\t\t\ttoast.success(`Work pool \"${formData.name}\" created successfully`);\n\t\t\t\tvoid router.navigate({\n\t\t\t\t\tto: \"/work-pools/work-pool/$workPoolName\",\n\t\t\t\t\tparams: { workPoolName: data.data?.name || formData.name },\n\t\t\t\t});\n\t\t\t},\n\t\t\tonError: (error) => {\n\t\t\t\ttoast.error(`Failed to create work pool: ${error.message}`);\n\t\t\t},\n\t\t});\n\t};\n\n\tconst getFieldsForStep = (\n\t\tstepIndex: number,\n\t): (keyof WorkPoolCreateFormValues)[] => {\n\t\tswitch (stepIndex) {\n\t\t\tcase 0:\n\t\t\t\treturn [\"type\"];\n\t\t\tcase 1:\n\t\t\t\treturn [\"name\", \"description\", \"concurrencyLimit\"];\n\t\t\tcase 2:\n\t\t\t\treturn [\"baseJobTemplate\"];\n\t\t\tdefault:\n\t\t\t\treturn [];\n\t\t}\n\t};\n\n\tconst renderCurrentStep = () => {\n\t\tswitch (stepper.currentStep) {\n\t\t\tcase 0:\n\t\t\t\treturn <InfrastructureTypeStep />;\n\t\t\tcase 1:\n\t\t\t\treturn <InformationStep />;\n\t\t\tcase 2:\n\t\t\t\treturn <InfrastructureConfigurationStep />;\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<CardTitle>Create Work Pool</CardTitle>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<Stepper\n\t\t\t\t\t\tcurrentStepNum={stepper.currentStep}\n\t\t\t\t\t\tsteps={STEPS}\n\t\t\t\t\t\tonClick={({ stepNum }) => {\n\t\t\t\t\t\t\tif (stepper.visitedStepsSet.has(stepNum)) {\n\t\t\t\t\t\t\t\tstepper.changeStep(stepNum);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tcompletedSteps={stepper.completedStepsSet}\n\t\t\t\t\t\tvisitedSteps={stepper.visitedStepsSet}\n\t\t\t\t\t/>\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t<Card>\n\t\t\t\t<CardContent className=\"pt-6\">\n\t\t\t\t\t<Form {...form}>\n\t\t\t\t\t\t<form className=\"space-y-6\">{renderCurrentStep()}</form>\n\t\t\t\t\t</Form>\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t{/* Navigation buttons */}\n\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t<div>\n\t\t\t\t\t{!stepper.isStartingStep && (\n\t\t\t\t\t\t<Button variant=\"outline\" onClick={handleBack} disabled={isPending}>\n\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\tonClick={handleCancel}\n\t\t\t\t\t\tdisabled={isPending}\n\t\t\t\t\t\tclassName=\"ml-2\"\n\t\t\t\t\t>\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t<Button onClick={() => void handleNext()} disabled={isPending}>\n\t\t\t\t\t{isPending\n\t\t\t\t\t\t? \"Creating...\"\n\t\t\t\t\t\t: stepper.isFinalStep\n\t\t\t\t\t\t\t? \"Create Work Pool\"\n\t\t\t\t\t\t\t: \"Next\"}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { createFileRoute } from \"@tanstack/react-router\";\nimport { buildListWorkPoolTypesQuery } from \"@/api/collections/collections\";\nimport { WorkPoolCreateWizard } from \"@/components/work-pools/create\";\n\nexport const Route = createFileRoute(\"/work-pools/create\")({\n\tcomponent: WorkPoolCreateWizard,\n\tloader: ({ context: { queryClient } }) => {\n\t\t// Prefetch worker types for infrastructure selection\n\t\tvoid queryClient.prefetchQuery(buildListWorkPoolTypesQuery());\n\t},\n\twrapInSuspense: true,\n});\n"],"names":["InformationStep","form","useFormContext","jsxs","Fragment","jsx","FormField","field","FormItem","FormLabel","FormControl","Input","FormMessage","Textarea","e","value","workPoolInformationSchema","z.object","z.string","z.number","InfrastructureConfigurationStep","baseJobTemplate","Card","CardContent","CardDescription","BaseJobTemplateFormSection","infrastructureConfigurationSchema","z.record","z.unknown","sizeClasses","LogoImage","url","alt","size","className","cn","target","fallback","InfrastructureTypeStep","workersResponse","useSuspenseQuery","buildListWorkPoolTypesQuery","options","useMemo","collection","worker","type","displayName","description","logoUrl","documentationUrl","isBeta","titleCase","firstOption","secondOption","fieldState","RadioGroup","label","RadioGroupItem","Badge","STEPS","workPoolCreateSchema","WorkPoolCreateWizard","router","useRouter","createWorkPool","isPending","useCreateWorkPool","stepper","useStepper","useForm","zodResolver","workerType","useEffect","workerInfo","handleNext","fieldsToValidate","getFieldsForStep","handleSubmit","handleBack","handleCancel","formData","toast","workPoolData","data","error","stepIndex","renderCurrentStep","CardHeader","CardTitle","Stepper","stepNum","Form","Button","SplitComponent"],"mappings":"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"}