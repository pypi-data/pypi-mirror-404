const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/schema-form-BwTmkvJk.js","assets/vendor-tanstack-BcZfOOfy.js","assets/vendor-react-Bce9NwRC.js","assets/use-debounce-callback-CSs1BjLI.js","assets/index-B8vo2Lrg.js","assets/vendor-radix-BTiKGWfR.js","assets/vendor-recharts-BvvJP9Po.js","assets/vendor-forms-ClCIacbh.js","assets/vendor-date-wwuDAncJ.js","assets/index-m9O-nIOl.css","assets/dropdown-menu-D7Gwbd15.js","assets/toggle-group-7WUJn2Tx.js","assets/block-type-logo-CyAWq7mC.js","assets/textarea-DUhh6-kq.js","assets/zod-Cuos7J7w.js","assets/timezone-select-D4Q6VBtD.js","assets/form-mws4law8.js"])))=>i.map(i=>d[i]);
import{r as d,c as te,a as ct,j as L,s as _n}from"./vendor-tanstack-BcZfOOfy.js";import{a as so}from"./zod-Cuos7J7w.js";import{c as ao,o as co,s as lo}from"./vendor-forms-ClCIacbh.js";import{dh as Yn,cv as uo,b9 as It,cf as fo,a2 as ho,a3 as go,a4 as po,a5 as vo,di as bo,dj as mo,dk as yo,p as wo,a7 as xo,q as In,y as nn,dl as So}from"./index-B8vo2Lrg.js";import{u as Co}from"./use-debounce-callback-CSs1BjLI.js";import{c as Tt,g as Do}from"./vendor-react-Bce9NwRC.js";import"./toggle-group-7WUJn2Tx.js";import{T as Ro}from"./timezone-select-D4Q6VBtD.js";import{p as On,a2 as Mn,a3 as Eo}from"./vendor-date-wwuDAncJ.js";import{F as To,b as Ao,c as _o,d as Io,e as Oo,a as Mo}from"./form-mws4law8.js";function No(e=[]){const[t,n]=d.useState(e);return[t,n]}function jo(e={}){const[t,n]=d.useState(e);return[t,n]}var lt={exports:{}};lt.exports;var Nn;function Lo(){return Nn||(Nn=1,(function(e,t){var n=200,o="__lodash_hash_undefined__",i=800,a=16,c=9007199254740991,l="[object Arguments]",f="[object Array]",h="[object AsyncFunction]",p="[object Boolean]",g="[object Date]",b="[object Error]",v="[object Function]",x="[object GeneratorFunction]",y="[object Map]",w="[object Number]",D="[object Null]",C="[object Object]",S="[object Proxy]",_="[object RegExp]",O="[object Set]",M="[object String]",R="[object Undefined]",E="[object WeakMap]",B="[object ArrayBuffer]",$="[object DataView]",z="[object Float32Array]",re="[object Float64Array]",oe="[object Int8Array]",ce="[object Int16Array]",ze="[object Int32Array]",Ke="[object Uint8Array]",q="[object Uint8ClampedArray]",Ye="[object Uint16Array]",ge="[object Uint32Array]",ke=/[\\^$.*+?()[\]{}|]/g,Ge=/^\[object .+?Constructor\]$/,G=/^(?:0|[1-9]\d*)$/,T={};T[z]=T[re]=T[oe]=T[ce]=T[ze]=T[Ke]=T[q]=T[Ye]=T[ge]=!0,T[l]=T[f]=T[B]=T[p]=T[$]=T[g]=T[b]=T[v]=T[y]=T[w]=T[C]=T[_]=T[O]=T[M]=T[E]=!1;var Ce=typeof Tt=="object"&&Tt&&Tt.Object===Object&&Tt,Pe=typeof self=="object"&&self&&self.Object===Object&&self,V=Ce||Pe||Function("return this")(),Be=t&&!t.nodeType&&t,Z=Be&&!0&&e&&!e.nodeType&&e,le=Z&&Z.exports===Be,N=le&&Ce.process,_e=(function(){try{var r=Z&&Z.require&&Z.require("util").types;return r||N&&N.binding&&N.binding("util")}catch{}})(),ie=_e&&_e.isTypedArray;function Ie(r,s,u){switch(u.length){case 0:return r.call(s);case 1:return r.call(s,u[0]);case 2:return r.call(s,u[0],u[1]);case 3:return r.call(s,u[0],u[1],u[2])}return r.apply(s,u)}function pe(r,s){for(var u=-1,m=Array(r);++u<r;)m[u]=s(u);return m}function Oe(r){return function(s){return r(s)}}function Me(r,s){return r?.[s]}function yt(r,s){return function(u){return r(s(u))}}var wt=Array.prototype,et=Function.prototype,se=Object.prototype,Ne=V["__core-js_shared__"],Ae=et.toString,ve=se.hasOwnProperty,tt=(function(){var r=/[^.]+$/.exec(Ne&&Ne.keys&&Ne.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})(),xt=se.toString,Ut=Ae.call(Object),je=RegExp("^"+Ae.call(ve).replace(ke,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=le?V.Buffer:void 0,Le=V.Symbol,nt=V.Uint8Array;be&&be.allocUnsafe;var me=yt(Object.getPrototypeOf,Object),rt=Object.create,$t=se.propertyIsEnumerable,Xt=wt.splice,ye=Le?Le.toStringTag:void 0,Ue=(function(){try{var r=Gt(Object,"defineProperty");return r({},"",{}),r}catch{}})(),Ht=be?be.isBuffer:void 0,ot=Math.max,Vt=Date.now,St=Gt(V,"Map"),$e=Gt(Object,"create"),K=(function(){function r(){}return function(s){if(!Ve(s))return{};if(rt)return rt(s);r.prototype=s;var u=new r;return r.prototype=void 0,u}})();function U(r){var s=-1,u=r==null?0:r.length;for(this.clear();++s<u;){var m=r[s];this.set(m[0],m[1])}}function J(){this.__data__=$e?$e(null):{},this.size=0}function De(r){var s=this.has(r)&&delete this.__data__[r];return this.size-=s?1:0,s}function ee(r){var s=this.__data__;if($e){var u=s[r];return u===o?void 0:u}return ve.call(s,r)?s[r]:void 0}function Q(r){var s=this.__data__;return $e?s[r]!==void 0:ve.call(s,r)}function ue(r,s){var u=this.__data__;return this.size+=this.has(r)?0:1,u[r]=$e&&s===void 0?o:s,this}U.prototype.clear=J,U.prototype.delete=De,U.prototype.get=ee,U.prototype.has=Q,U.prototype.set=ue;function W(r){var s=-1,u=r==null?0:r.length;for(this.clear();++s<u;){var m=r[s];this.set(m[0],m[1])}}function X(){this.__data__=[],this.size=0}function Re(r){var s=this.__data__,u=Ct(s,r);if(u<0)return!1;var m=s.length-1;return u==m?s.pop():Xt.call(s,u,1),--this.size,!0}function de(r){var s=this.__data__,u=Ct(s,r);return u<0?void 0:s[u][1]}function we(r){return Ct(this.__data__,r)>-1}function Xe(r,s){var u=this.__data__,m=Ct(u,r);return m<0?(++this.size,u.push([r,s])):u[m][1]=s,this}W.prototype.clear=X,W.prototype.delete=Re,W.prototype.get=de,W.prototype.has=we,W.prototype.set=Xe;function fe(r){var s=-1,u=r==null?0:r.length;for(this.clear();++s<u;){var m=r[s];this.set(m[0],m[1])}}function Ee(){this.size=0,this.__data__={hash:new U,map:new(St||W),string:new U}}function He(r){var s=Rt(this,r).delete(r);return this.size-=s?1:0,s}function it(r){return Rt(this,r).get(r)}function wr(r){return Rt(this,r).has(r)}function xr(r,s){var u=Rt(this,r),m=u.size;return u.set(r,s),this.size+=u.size==m?0:1,this}fe.prototype.clear=Ee,fe.prototype.delete=He,fe.prototype.get=it,fe.prototype.has=wr,fe.prototype.set=xr;function We(r){var s=this.__data__=new W(r);this.size=s.size}function Sr(){this.__data__=new W,this.size=0}function Cr(r){var s=this.__data__,u=s.delete(r);return this.size=s.size,u}function Dr(r){return this.__data__.get(r)}function Rr(r){return this.__data__.has(r)}function Er(r,s){var u=this.__data__;if(u instanceof W){var m=u.__data__;if(!St||m.length<n-1)return m.push([r,s]),this.size=++u.size,this;u=this.__data__=new fe(m)}return u.set(r,s),this.size=u.size,this}We.prototype.clear=Sr,We.prototype.delete=Cr,We.prototype.get=Dr,We.prototype.has=Rr,We.prototype.set=Er;function Tr(r,s){var u=Jt(r),m=!u&&qt(r),I=!u&&!m&&Cn(r),F=!u&&!m&&!I&&Rn(r),k=u||m||I||F,j=k?pe(r.length,String):[],P=j.length;for(var xe in r)k&&(xe=="length"||I&&(xe=="offset"||xe=="parent")||F&&(xe=="buffer"||xe=="byteLength"||xe=="byteOffset")||xn(xe,P))||j.push(xe);return j}function Kt(r,s,u){(u!==void 0&&!Et(r[s],u)||u===void 0&&!(s in r))&&Yt(r,s,u)}function Ar(r,s,u){var m=r[s];(!(ve.call(r,s)&&Et(m,u))||u===void 0&&!(s in r))&&Yt(r,s,u)}function Ct(r,s){for(var u=r.length;u--;)if(Et(r[u][0],s))return u;return-1}function Yt(r,s,u){s=="__proto__"&&Ue?Ue(r,s,{configurable:!0,enumerable:!0,value:u,writable:!0}):r[s]=u}var _r=$r();function Dt(r){return r==null?r===void 0?R:D:ye&&ye in Object(r)?Xr(r):Wr(r)}function yn(r){return st(r)&&Dt(r)==l}function Ir(r){if(!Ve(r)||Yr(r))return!1;var s=Zt(r)?je:Ge;return s.test(Zr(r))}function Or(r){return st(r)&&Dn(r.length)&&!!T[Dt(r)]}function Mr(r){if(!Ve(r))return Gr(r);var s=Sn(r),u=[];for(var m in r)m=="constructor"&&(s||!ve.call(r,m))||u.push(m);return u}function wn(r,s,u,m,I){r!==s&&_r(s,function(F,k){if(I||(I=new We),Ve(F))Nr(r,s,k,u,wn,m,I);else{var j=m?m(Wt(r,k),F,k+"",r,s,I):void 0;j===void 0&&(j=F),Kt(r,k,j)}},En)}function Nr(r,s,u,m,I,F,k){var j=Wt(r,u),P=Wt(s,u),xe=k.get(P);if(xe){Kt(r,u,xe);return}var ae=F?F(j,P,u+"",r,s,k):void 0,at=ae===void 0;if(at){var en=Jt(P),tn=!en&&Cn(P),An=!en&&!tn&&Rn(P);ae=P,en||tn||An?Jt(j)?ae=j:eo(j)?ae=Pr(j):tn?(at=!1,ae=Fr(P)):An?(at=!1,ae=kr(P)):ae=[]:to(P)||qt(P)?(ae=j,qt(j)?ae=no(j):(!Ve(j)||Zt(j))&&(ae=Hr(P))):at=!1}at&&(k.set(P,ae),I(ae,P,m,F,k),k.delete(P)),Kt(r,u,ae)}function jr(r,s){return Jr(qr(r,s,Tn),r+"")}var Lr=Ue?function(r,s){return Ue(r,"toString",{configurable:!0,enumerable:!1,value:oo(s),writable:!0})}:Tn;function Fr(r,s){return r.slice()}function zr(r){var s=new r.constructor(r.byteLength);return new nt(s).set(new nt(r)),s}function kr(r,s){var u=zr(r.buffer);return new r.constructor(u,r.byteOffset,r.length)}function Pr(r,s){var u=-1,m=r.length;for(s||(s=Array(m));++u<m;)s[u]=r[u];return s}function Br(r,s,u,m){var I=!u;u||(u={});for(var F=-1,k=s.length;++F<k;){var j=s[F],P=void 0;P===void 0&&(P=r[j]),I?Yt(u,j,P):Ar(u,j,P)}return u}function Ur(r){return jr(function(s,u){var m=-1,I=u.length,F=I>1?u[I-1]:void 0,k=I>2?u[2]:void 0;for(F=r.length>3&&typeof F=="function"?(I--,F):void 0,k&&Vr(u[0],u[1],k)&&(F=I<3?void 0:F,I=1),s=Object(s);++m<I;){var j=u[m];j&&r(s,j,m,F)}return s})}function $r(r){return function(s,u,m){for(var I=-1,F=Object(s),k=m(s),j=k.length;j--;){var P=k[++I];if(u(F[P],P,F)===!1)break}return s}}function Rt(r,s){var u=r.__data__;return Kr(s)?u[typeof s=="string"?"string":"hash"]:u.map}function Gt(r,s){var u=Me(r,s);return Ir(u)?u:void 0}function Xr(r){var s=ve.call(r,ye),u=r[ye];try{r[ye]=void 0;var m=!0}catch{}var I=xt.call(r);return m&&(s?r[ye]=u:delete r[ye]),I}function Hr(r){return typeof r.constructor=="function"&&!Sn(r)?K(me(r)):{}}function xn(r,s){var u=typeof r;return s=s??c,!!s&&(u=="number"||u!="symbol"&&G.test(r))&&r>-1&&r%1==0&&r<s}function Vr(r,s,u){if(!Ve(u))return!1;var m=typeof s;return(m=="number"?Qt(u)&&xn(s,u.length):m=="string"&&s in u)?Et(u[s],r):!1}function Kr(r){var s=typeof r;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?r!=="__proto__":r===null}function Yr(r){return!!tt&&tt in r}function Sn(r){var s=r&&r.constructor,u=typeof s=="function"&&s.prototype||se;return r===u}function Gr(r){var s=[];if(r!=null)for(var u in Object(r))s.push(u);return s}function Wr(r){return xt.call(r)}function qr(r,s,u){return s=ot(s===void 0?r.length-1:s,0),function(){for(var m=arguments,I=-1,F=ot(m.length-s,0),k=Array(F);++I<F;)k[I]=m[s+I];I=-1;for(var j=Array(s+1);++I<s;)j[I]=m[I];return j[s]=u(k),Ie(r,this,j)}}function Wt(r,s){if(!(s==="constructor"&&typeof r[s]=="function")&&s!="__proto__")return r[s]}var Jr=Qr(Lr);function Qr(r){var s=0,u=0;return function(){var m=Vt(),I=a-(m-u);if(u=m,I>0){if(++s>=i)return arguments[0]}else s=0;return r.apply(void 0,arguments)}}function Zr(r){if(r!=null){try{return Ae.call(r)}catch{}try{return r+""}catch{}}return""}function Et(r,s){return r===s||r!==r&&s!==s}var qt=yn((function(){return arguments})())?yn:function(r){return st(r)&&ve.call(r,"callee")&&!$t.call(r,"callee")},Jt=Array.isArray;function Qt(r){return r!=null&&Dn(r.length)&&!Zt(r)}function eo(r){return st(r)&&Qt(r)}var Cn=Ht||io;function Zt(r){if(!Ve(r))return!1;var s=Dt(r);return s==v||s==x||s==h||s==S}function Dn(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=c}function Ve(r){var s=typeof r;return r!=null&&(s=="object"||s=="function")}function st(r){return r!=null&&typeof r=="object"}function to(r){if(!st(r)||Dt(r)!=C)return!1;var s=me(r);if(s===null)return!0;var u=ve.call(s,"constructor")&&s.constructor;return typeof u=="function"&&u instanceof u&&Ae.call(u)==Ut}var Rn=ie?Oe(ie):Or;function no(r){return Br(r,En(r))}function En(r){return Qt(r)?Tr(r):Mr(r)}var ro=Ur(function(r,s,u){wn(r,s,u)});function oo(r){return function(){return r}}function Tn(r){return r}function io(){return!1}e.exports=ro})(lt,lt.exports)),lt.exports}var Fo=Lo();const Ps=Do(Fo),zo=d.createContext(null);function Bs(){const e=d.useContext(zo);if(!e)throw new Error("useSchemaFormContext must be used within a SchemaFormProvider");return e}function ko(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>o=>{t.forEach(i=>i(o))},t)}const zt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Je(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function hn(e){return"nodeType"in e}function ne(e){var t,n;return e?Je(e)?e:hn(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function gn(e){const{Document:t}=ne(e);return e instanceof t}function vt(e){return Je(e)?!1:e instanceof ne(e).HTMLElement}function Gn(e){return e instanceof ne(e).SVGElement}function Qe(e){return e?Je(e)?e.document:hn(e)?gn(e)?e:vt(e)||Gn(e)?e.ownerDocument:document:document:document}const Te=zt?d.useLayoutEffect:d.useEffect;function pn(e){const t=d.useRef(e);return Te(()=>{t.current=e}),d.useCallback(function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t.current==null?void 0:t.current(...o)},[])}function Po(){const e=d.useRef(null),t=d.useCallback((o,i)=>{e.current=setInterval(o,i)},[]),n=d.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function ht(e,t){t===void 0&&(t=[e]);const n=d.useRef(e);return Te(()=>{n.current!==e&&(n.current=e)},t),n}function bt(e,t){const n=d.useRef();return d.useMemo(()=>{const o=e(n.current);return n.current=o,o},[...t])}function Mt(e){const t=pn(e),n=d.useRef(null),o=d.useCallback(i=>{i!==n.current&&t?.(i,n.current),n.current=i},[]);return[n,o]}function cn(e){const t=d.useRef();return d.useEffect(()=>{t.current=e},[e]),t.current}let rn={};function mt(e,t){return d.useMemo(()=>{if(t)return t;const n=rn[e]==null?0:rn[e]+1;return rn[e]=n,e+"-"+n},[e,t])}function Wn(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return o.reduce((a,c)=>{const l=Object.entries(c);for(const[f,h]of l){const p=a[f];p!=null&&(a[f]=p+e*h)}return a},{...t})}}const qe=Wn(1),gt=Wn(-1);function Bo(e){return"clientX"in e&&"clientY"in e}function vn(e){if(!e)return!1;const{KeyboardEvent:t}=ne(e.target);return t&&e instanceof t}function Uo(e){if(!e)return!1;const{TouchEvent:t}=ne(e.target);return t&&e instanceof t}function ln(e){if(Uo(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Bo(e)?{x:e.clientX,y:e.clientY}:null}const Nt=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Nt.Translate.toString(e),Nt.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:o}=e;return t+" "+n+"ms "+o}}}),jn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function $o(e){return e.matches(jn)?e:e.querySelector(jn)}const Xo={display:"none"};function Ho(e){let{id:t,value:n}=e;return te.createElement("div",{id:t,style:Xo},n)}function Vo(e){let{id:t,announcement:n,ariaLiveType:o="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return te.createElement("div",{id:t,style:i,role:"status","aria-live":o,"aria-atomic":!0},n)}function Ko(){const[e,t]=d.useState("");return{announce:d.useCallback(o=>{o!=null&&t(o)},[]),announcement:e}}const qn=d.createContext(null);function Yo(e){const t=d.useContext(qn);d.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Go(){const[e]=d.useState(()=>new Set),t=d.useCallback(o=>(e.add(o),()=>e.delete(o)),[e]);return[d.useCallback(o=>{let{type:i,event:a}=o;e.forEach(c=>{var l;return(l=c[i])==null?void 0:l.call(c,a)})},[e]),t]}const Wo={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},qo={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Jo(e){let{announcements:t=qo,container:n,hiddenTextDescribedById:o,screenReaderInstructions:i=Wo}=e;const{announce:a,announcement:c}=Ko(),l=mt("DndLiveRegion"),[f,h]=d.useState(!1);if(d.useEffect(()=>{h(!0)},[]),Yo(d.useMemo(()=>({onDragStart(g){let{active:b}=g;a(t.onDragStart({active:b}))},onDragMove(g){let{active:b,over:v}=g;t.onDragMove&&a(t.onDragMove({active:b,over:v}))},onDragOver(g){let{active:b,over:v}=g;a(t.onDragOver({active:b,over:v}))},onDragEnd(g){let{active:b,over:v}=g;a(t.onDragEnd({active:b,over:v}))},onDragCancel(g){let{active:b,over:v}=g;a(t.onDragCancel({active:b,over:v}))}}),[a,t])),!f)return null;const p=te.createElement(te.Fragment,null,te.createElement(Ho,{id:o,value:i.draggable}),te.createElement(Vo,{id:l,announcement:c}));return n?ct.createPortal(p,n):p}var H;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(H||(H={}));function jt(){}function Us(e,t){return d.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function $s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>[...t].filter(o=>o!=null),[...t])}const Se=Object.freeze({x:0,y:0});function Jn(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Qn(e,t){let{data:{value:n}}=e,{data:{value:o}}=t;return n-o}function Qo(e,t){let{data:{value:n}}=e,{data:{value:o}}=t;return o-n}function Ln(e){let{left:t,top:n,height:o,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+o},{x:t+i,y:n+o}]}function Zn(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Fn(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Xs=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:o}=e;const i=Fn(t,t.left,t.top),a=[];for(const c of o){const{id:l}=c,f=n.get(l);if(f){const h=Jn(Fn(f),i);a.push({id:l,data:{droppableContainer:c,value:h}})}}return a.sort(Qn)},Zo=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:o}=e;const i=Ln(t),a=[];for(const c of o){const{id:l}=c,f=n.get(l);if(f){const h=Ln(f),p=i.reduce((b,v,x)=>b+Jn(h[x],v),0),g=Number((p/4).toFixed(4));a.push({id:l,data:{droppableContainer:c,value:g}})}}return a.sort(Qn)};function ei(e,t){const n=Math.max(t.top,e.top),o=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),c=i-o,l=a-n;if(o<i&&n<a){const f=t.width*t.height,h=e.width*e.height,p=c*l,g=p/(f+h-p);return Number(g.toFixed(4))}return 0}const ti=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:o}=e;const i=[];for(const a of o){const{id:c}=a,l=n.get(c);if(l){const f=ei(l,t);f>0&&i.push({id:c,data:{droppableContainer:a,value:f}})}}return i.sort(Qo)};function ni(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function er(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Se}function ri(e){return function(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return i.reduce((c,l)=>({...c,top:c.top+e*l.y,bottom:c.bottom+e*l.y,left:c.left+e*l.x,right:c.right+e*l.x}),{...n})}}const oi=ri(1);function ii(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function si(e,t,n){const o=ii(t);if(!o)return e;const{scaleX:i,scaleY:a,x:c,y:l}=o,f=e.left-c-(1-i)*parseFloat(n),h=e.top-l-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),p=i?e.width/i:e.width,g=a?e.height/a:e.height;return{width:p,height:g,top:h,right:f+p,bottom:h+g,left:f}}const ai={ignoreTransform:!1};function Ze(e,t){t===void 0&&(t=ai);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:h,transformOrigin:p}=ne(e).getComputedStyle(e);h&&(n=si(n,h,p))}const{top:o,left:i,width:a,height:c,bottom:l,right:f}=n;return{top:o,left:i,width:a,height:c,bottom:l,right:f}}function zn(e){return Ze(e,{ignoreTransform:!0})}function ci(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function li(e,t){return t===void 0&&(t=ne(e).getComputedStyle(e)),t.position==="fixed"}function ui(e,t){t===void 0&&(t=ne(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=t[i];return typeof a=="string"?n.test(a):!1})}function kt(e,t){const n=[];function o(i){if(t!=null&&n.length>=t||!i)return n;if(gn(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!vt(i)||Gn(i)||n.includes(i))return n;const a=ne(e).getComputedStyle(i);return i!==e&&ui(i,a)&&n.push(i),li(i,a)?n:o(i.parentNode)}return e?o(e):n}function tr(e){const[t]=kt(e,1);return t??null}function on(e){return!zt||!e?null:Je(e)?e:hn(e)?gn(e)||e===Qe(e).scrollingElement?window:vt(e)?e:null:null}function nr(e){return Je(e)?e.scrollX:e.scrollLeft}function rr(e){return Je(e)?e.scrollY:e.scrollTop}function un(e){return{x:nr(e),y:rr(e)}}var Y;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Y||(Y={}));function or(e){return!zt||!e?!1:e===document.scrollingElement}function ir(e){const t={x:0,y:0},n=or(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},o={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,c=e.scrollTop>=o.y,l=e.scrollLeft>=o.x;return{isTop:i,isLeft:a,isBottom:c,isRight:l,maxScroll:o,minScroll:t}}const di={x:.2,y:.2};function fi(e,t,n,o,i){let{top:a,left:c,right:l,bottom:f}=n;o===void 0&&(o=10),i===void 0&&(i=di);const{isTop:h,isBottom:p,isLeft:g,isRight:b}=ir(e),v={x:0,y:0},x={x:0,y:0},y={height:t.height*i.y,width:t.width*i.x};return!h&&a<=t.top+y.height?(v.y=Y.Backward,x.y=o*Math.abs((t.top+y.height-a)/y.height)):!p&&f>=t.bottom-y.height&&(v.y=Y.Forward,x.y=o*Math.abs((t.bottom-y.height-f)/y.height)),!b&&l>=t.right-y.width?(v.x=Y.Forward,x.x=o*Math.abs((t.right-y.width-l)/y.width)):!g&&c<=t.left+y.width&&(v.x=Y.Backward,x.x=o*Math.abs((t.left+y.width-c)/y.width)),{direction:v,speed:x}}function hi(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:c}=window;return{top:0,left:0,right:a,bottom:c,width:a,height:c}}const{top:t,left:n,right:o,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:o,bottom:i,width:e.clientWidth,height:e.clientHeight}}function sr(e){return e.reduce((t,n)=>qe(t,un(n)),Se)}function gi(e){return e.reduce((t,n)=>t+nr(n),0)}function pi(e){return e.reduce((t,n)=>t+rr(n),0)}function vi(e,t){if(t===void 0&&(t=Ze),!e)return;const{top:n,left:o,bottom:i,right:a}=t(e);tr(e)&&(i<=0||a<=0||n>=window.innerHeight||o>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const bi=[["x",["left","right"],gi],["y",["top","bottom"],pi]];class bn{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const o=kt(n),i=sr(o);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,c,l]of bi)for(const f of c)Object.defineProperty(this,f,{get:()=>{const h=l(o),p=i[a]-h;return this.rect[f]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ut{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var o;return(o=this.target)==null?void 0:o.removeEventListener(...n)})},this.target=t}add(t,n,o){var i;(i=this.target)==null||i.addEventListener(t,n,o),this.listeners.push([t,n,o])}}function mi(e){const{EventTarget:t}=ne(e);return e instanceof t?e:Qe(e)}function sn(e,t){const n=Math.abs(e.x),o=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+o**2)>t:"x"in t&&"y"in t?n>t.x&&o>t.y:"x"in t?n>t.x:"y"in t?o>t.y:!1}var he;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(he||(he={}));function kn(e){e.preventDefault()}function yi(e){e.stopPropagation()}var A;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(A||(A={}));const ar={start:[A.Space,A.Enter],cancel:[A.Esc],end:[A.Space,A.Enter,A.Tab]},wi=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case A.Right:return{...n,x:n.x+25};case A.Left:return{...n,x:n.x-25};case A.Down:return{...n,y:n.y+25};case A.Up:return{...n,y:n.y-25}}};class cr{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new ut(Qe(n)),this.windowListeners=new ut(ne(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(he.Resize,this.handleCancel),this.windowListeners.add(he.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(he.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,o=t.node.current;o&&vi(o),n(Se)}handleKeyDown(t){if(vn(t)){const{active:n,context:o,options:i}=this.props,{keyboardCodes:a=ar,coordinateGetter:c=wi,scrollBehavior:l="smooth"}=i,{code:f}=t;if(a.end.includes(f)){this.handleEnd(t);return}if(a.cancel.includes(f)){this.handleCancel(t);return}const{collisionRect:h}=o.current,p=h?{x:h.left,y:h.top}:Se;this.referenceCoordinates||(this.referenceCoordinates=p);const g=c(t,{active:n,context:o.current,currentCoordinates:p});if(g){const b=gt(g,p),v={x:0,y:0},{scrollableAncestors:x}=o.current;for(const y of x){const w=t.code,{isTop:D,isRight:C,isLeft:S,isBottom:_,maxScroll:O,minScroll:M}=ir(y),R=hi(y),E={x:Math.min(w===A.Right?R.right-R.width/2:R.right,Math.max(w===A.Right?R.left:R.left+R.width/2,g.x)),y:Math.min(w===A.Down?R.bottom-R.height/2:R.bottom,Math.max(w===A.Down?R.top:R.top+R.height/2,g.y))},B=w===A.Right&&!C||w===A.Left&&!S,$=w===A.Down&&!_||w===A.Up&&!D;if(B&&E.x!==g.x){const z=y.scrollLeft+b.x,re=w===A.Right&&z<=O.x||w===A.Left&&z>=M.x;if(re&&!b.y){y.scrollTo({left:z,behavior:l});return}re?v.x=y.scrollLeft-z:v.x=w===A.Right?y.scrollLeft-O.x:y.scrollLeft-M.x,v.x&&y.scrollBy({left:-v.x,behavior:l});break}else if($&&E.y!==g.y){const z=y.scrollTop+b.y,re=w===A.Down&&z<=O.y||w===A.Up&&z>=M.y;if(re&&!b.x){y.scrollTo({top:z,behavior:l});return}re?v.y=y.scrollTop-z:v.y=w===A.Down?y.scrollTop-O.y:y.scrollTop-M.y,v.y&&y.scrollBy({top:-v.y,behavior:l});break}}this.handleMove(t,qe(gt(g,this.referenceCoordinates),v))}}}handleMove(t,n){const{onMove:o}=this.props;t.preventDefault(),o(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}cr.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:o=ar,onActivation:i}=t,{active:a}=n;const{code:c}=e.nativeEvent;if(o.start.includes(c)){const l=a.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),i?.({event:e.nativeEvent}),!0)}return!1}}];function Pn(e){return!!(e&&"distance"in e)}function Bn(e){return!!(e&&"delay"in e)}class mn{constructor(t,n,o){var i;o===void 0&&(o=mi(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:c}=a;this.props=t,this.events=n,this.document=Qe(c),this.documentListeners=new ut(this.document),this.listeners=new ut(o),this.windowListeners=new ut(ne(c)),this.initialCoordinates=(i=ln(a))!=null?i:Se,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:o}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(he.Resize,this.handleCancel),this.windowListeners.add(he.DragStart,kn),this.windowListeners.add(he.VisibilityChange,this.handleCancel),this.windowListeners.add(he.ContextMenu,kn),this.documentListeners.add(he.Keydown,this.handleKeydown),n){if(o!=null&&o({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Bn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Pn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:o,onPending:i}=this.props;i(o,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(he.Click,yi,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(he.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:o,initialCoordinates:i,props:a}=this,{onMove:c,options:{activationConstraint:l}}=a;if(!i)return;const f=(n=ln(t))!=null?n:Se,h=gt(i,f);if(!o&&l){if(Pn(l)){if(l.tolerance!=null&&sn(h,l.tolerance))return this.handleCancel();if(sn(h,l.distance))return this.handleStart()}if(Bn(l)&&sn(h,l.tolerance))return this.handleCancel();this.handlePending(l,h);return}t.cancelable&&t.preventDefault(),c(f)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===A.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const xi={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class lr extends mn{constructor(t){const{event:n}=t,o=Qe(n.target);super(t,xi,o)}}lr.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:o}=t;return!n.isPrimary||n.button!==0?!1:(o?.({event:n}),!0)}}];const Si={move:{name:"mousemove"},end:{name:"mouseup"}};var dn;(function(e){e[e.RightClick=2]="RightClick"})(dn||(dn={}));class Ci extends mn{constructor(t){super(t,Si,Qe(t.event.target))}}Ci.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:o}=t;return n.button===dn.RightClick?!1:(o?.({event:n}),!0)}}];const an={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Di extends mn{constructor(t){super(t,an)}static setup(){return window.addEventListener(an.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(an.move.name,t)};function t(){}}}Di.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:o}=t;const{touches:i}=n;return i.length>1?!1:(o?.({event:n}),!0)}}];var dt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(dt||(dt={}));var Lt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Lt||(Lt={}));function Ri(e){let{acceleration:t,activator:n=dt.Pointer,canScroll:o,draggingRect:i,enabled:a,interval:c=5,order:l=Lt.TreeOrder,pointerCoordinates:f,scrollableAncestors:h,scrollableAncestorRects:p,delta:g,threshold:b}=e;const v=Ti({delta:g,disabled:!a}),[x,y]=Po(),w=d.useRef({x:0,y:0}),D=d.useRef({x:0,y:0}),C=d.useMemo(()=>{switch(n){case dt.Pointer:return f?{top:f.y,bottom:f.y,left:f.x,right:f.x}:null;case dt.DraggableRect:return i}},[n,i,f]),S=d.useRef(null),_=d.useCallback(()=>{const M=S.current;if(!M)return;const R=w.current.x*D.current.x,E=w.current.y*D.current.y;M.scrollBy(R,E)},[]),O=d.useMemo(()=>l===Lt.TreeOrder?[...h].reverse():h,[l,h]);d.useEffect(()=>{if(!a||!h.length||!C){y();return}for(const M of O){if(o?.(M)===!1)continue;const R=h.indexOf(M),E=p[R];if(!E)continue;const{direction:B,speed:$}=fi(M,E,C,t,b);for(const z of["x","y"])v[z][B[z]]||($[z]=0,B[z]=0);if($.x>0||$.y>0){y(),S.current=M,x(_,c),w.current=$,D.current=B;return}}w.current={x:0,y:0},D.current={x:0,y:0},y()},[t,_,o,y,a,c,JSON.stringify(C),JSON.stringify(v),x,h,O,p,JSON.stringify(b)])}const Ei={x:{[Y.Backward]:!1,[Y.Forward]:!1},y:{[Y.Backward]:!1,[Y.Forward]:!1}};function Ti(e){let{delta:t,disabled:n}=e;const o=cn(t);return bt(i=>{if(n||!o||!i)return Ei;const a={x:Math.sign(t.x-o.x),y:Math.sign(t.y-o.y)};return{x:{[Y.Backward]:i.x[Y.Backward]||a.x===-1,[Y.Forward]:i.x[Y.Forward]||a.x===1},y:{[Y.Backward]:i.y[Y.Backward]||a.y===-1,[Y.Forward]:i.y[Y.Forward]||a.y===1}}},[n,t,o])}function Ai(e,t){const n=t!=null?e.get(t):void 0,o=n?n.node.current:null;return bt(i=>{var a;return t==null?null:(a=o??i)!=null?a:null},[o,t])}function _i(e,t){return d.useMemo(()=>e.reduce((n,o)=>{const{sensor:i}=o,a=i.activators.map(c=>({eventName:c.eventName,handler:t(c.handler,o)}));return[...n,...a]},[]),[e,t])}var pt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(pt||(pt={}));var fn;(function(e){e.Optimized="optimized"})(fn||(fn={}));const Un=new Map;function Ii(e,t){let{dragging:n,dependencies:o,config:i}=t;const[a,c]=d.useState(null),{frequency:l,measure:f,strategy:h}=i,p=d.useRef(e),g=w(),b=ht(g),v=d.useCallback(function(D){D===void 0&&(D=[]),!b.current&&c(C=>C===null?D:C.concat(D.filter(S=>!C.includes(S))))},[b]),x=d.useRef(null),y=bt(D=>{if(g&&!n)return Un;if(!D||D===Un||p.current!==e||a!=null){const C=new Map;for(let S of e){if(!S)continue;if(a&&a.length>0&&!a.includes(S.id)&&S.rect.current){C.set(S.id,S.rect.current);continue}const _=S.node.current,O=_?new bn(f(_),_):null;S.rect.current=O,O&&C.set(S.id,O)}return C}return D},[e,a,n,g,f]);return d.useEffect(()=>{p.current=e},[e]),d.useEffect(()=>{g||v()},[n,g]),d.useEffect(()=>{a&&a.length>0&&c(null)},[JSON.stringify(a)]),d.useEffect(()=>{g||typeof l!="number"||x.current!==null||(x.current=setTimeout(()=>{v(),x.current=null},l))},[l,g,v,...o]),{droppableRects:y,measureDroppableContainers:v,measuringScheduled:a!=null};function w(){switch(h){case pt.Always:return!1;case pt.BeforeDragging:return n;default:return!n}}}function ur(e,t){return bt(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Oi(e,t){return ur(e,t)}function Mi(e){let{callback:t,disabled:n}=e;const o=pn(t),i=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(o)},[o,n]);return d.useEffect(()=>()=>i?.disconnect(),[i]),i}function Pt(e){let{callback:t,disabled:n}=e;const o=pn(t),i=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(o)},[n]);return d.useEffect(()=>()=>i?.disconnect(),[i]),i}function Ni(e){return new bn(Ze(e),e)}function $n(e,t,n){t===void 0&&(t=Ni);const[o,i]=d.useState(null);function a(){i(f=>{if(!e)return null;if(e.isConnected===!1){var h;return(h=f??n)!=null?h:null}const p=t(e);return JSON.stringify(f)===JSON.stringify(p)?f:p})}const c=Mi({callback(f){if(e)for(const h of f){const{type:p,target:g}=h;if(p==="childList"&&g instanceof HTMLElement&&g.contains(e)){a();break}}}}),l=Pt({callback:a});return Te(()=>{a(),e?(l?.observe(e),c?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),c?.disconnect())},[e]),o}function ji(e){const t=ur(e);return er(e,t)}const Xn=[];function Li(e){const t=d.useRef(e),n=bt(o=>e?o&&o!==Xn&&e&&t.current&&e.parentNode===t.current.parentNode?o:kt(e):Xn,[e]);return d.useEffect(()=>{t.current=e},[e]),n}function Fi(e){const[t,n]=d.useState(null),o=d.useRef(e),i=d.useCallback(a=>{const c=on(a.target);c&&n(l=>l?(l.set(c,un(c)),new Map(l)):null)},[]);return d.useEffect(()=>{const a=o.current;if(e!==a){c(a);const l=e.map(f=>{const h=on(f);return h?(h.addEventListener("scroll",i,{passive:!0}),[h,un(h)]):null}).filter(f=>f!=null);n(l.length?new Map(l):null),o.current=e}return()=>{c(e),c(a)};function c(l){l.forEach(f=>{const h=on(f);h?.removeEventListener("scroll",i)})}},[i,e]),d.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,c)=>qe(a,c),Se):sr(e):Se,[e,t])}function Hn(e,t){t===void 0&&(t=[]);const n=d.useRef(null);return d.useEffect(()=>{n.current=null},t),d.useEffect(()=>{const o=e!==Se;o&&!n.current&&(n.current=e),!o&&n.current&&(n.current=null)},[e]),n.current?gt(e,n.current):Se}function zi(e){d.useEffect(()=>{if(!zt)return;const t=e.map(n=>{let{sensor:o}=n;return o.setup==null?void 0:o.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function ki(e,t){return d.useMemo(()=>e.reduce((n,o)=>{let{eventName:i,handler:a}=o;return n[i]=c=>{a(c,t)},n},{}),[e,t])}function dr(e){return d.useMemo(()=>e?ci(e):null,[e])}const Vn=[];function Pi(e,t){t===void 0&&(t=Ze);const[n]=e,o=dr(n?ne(n):null),[i,a]=d.useState(Vn);function c(){a(()=>e.length?e.map(f=>or(f)?o:new bn(t(f),f)):Vn)}const l=Pt({callback:c});return Te(()=>{l?.disconnect(),c(),e.forEach(f=>l?.observe(f))},[e]),i}function Bi(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return vt(t)?t:e}function Ui(e){let{measure:t}=e;const[n,o]=d.useState(null),i=d.useCallback(h=>{for(const{target:p}of h)if(vt(p)){o(g=>{const b=t(p);return g?{...g,width:b.width,height:b.height}:b});break}},[t]),a=Pt({callback:i}),c=d.useCallback(h=>{const p=Bi(h);a?.disconnect(),p&&a?.observe(p),o(p?t(p):null)},[t,a]),[l,f]=Mt(c);return d.useMemo(()=>({nodeRef:l,rect:n,setRef:f}),[n,l,f])}const $i=[{sensor:lr,options:{}},{sensor:cr,options:{}}],Xi={current:{}},Ot={draggable:{measure:zn},droppable:{measure:zn,strategy:pt.WhileDragging,frequency:fn.Optimized},dragOverlay:{measure:Ze}};class ft extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,o;return(n=(o=this.get(t))==null?void 0:o.node.current)!=null?n:void 0}}const Hi={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ft,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:jt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ot,measureDroppableContainers:jt,windowRect:null,measuringScheduled:!1},Vi={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:jt,draggableNodes:new Map,over:null,measureDroppableContainers:jt},Bt=d.createContext(Vi),fr=d.createContext(Hi);function Ki(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ft}}}function Yi(e,t){switch(t.type){case H.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case H.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case H.DragEnd:case H.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case H.RegisterDroppable:{const{element:n}=t,{id:o}=n,i=new ft(e.droppable.containers);return i.set(o,n),{...e,droppable:{...e.droppable,containers:i}}}case H.SetDroppableDisabled:{const{id:n,key:o,disabled:i}=t,a=e.droppable.containers.get(n);if(!a||o!==a.key)return e;const c=new ft(e.droppable.containers);return c.set(n,{...a,disabled:i}),{...e,droppable:{...e.droppable,containers:c}}}case H.UnregisterDroppable:{const{id:n,key:o}=t,i=e.droppable.containers.get(n);if(!i||o!==i.key)return e;const a=new ft(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function Gi(e){let{disabled:t}=e;const{active:n,activatorEvent:o,draggableNodes:i}=d.useContext(Bt),a=cn(o),c=cn(n?.id);return d.useEffect(()=>{if(!t&&!o&&a&&c!=null){if(!vn(a)||document.activeElement===a.target)return;const l=i.get(c);if(!l)return;const{activatorNode:f,node:h}=l;if(!f.current&&!h.current)return;requestAnimationFrame(()=>{for(const p of[f.current,h.current]){if(!p)continue;const g=$o(p);if(g){g.focus();break}}})}},[o,t,i,c,a]),null}function Wi(e,t){let{transform:n,...o}=t;return e!=null&&e.length?e.reduce((i,a)=>a({transform:i,...o}),n):n}function qi(e){return d.useMemo(()=>({draggable:{...Ot.draggable,...e?.draggable},droppable:{...Ot.droppable,...e?.droppable},dragOverlay:{...Ot.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Ji(e){let{activeNode:t,measure:n,initialRect:o,config:i=!0}=e;const a=d.useRef(!1),{x:c,y:l}=typeof i=="boolean"?{x:i,y:i}:i;Te(()=>{if(!c&&!l||!t){a.current=!1;return}if(a.current||!o)return;const h=t?.node.current;if(!h||h.isConnected===!1)return;const p=n(h),g=er(p,o);if(c||(g.x=0),l||(g.y=0),a.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const b=tr(h);b&&b.scrollBy({top:g.y,left:g.x})}},[t,c,l,o,n])}const hr=d.createContext({...Se,scaleX:1,scaleY:1});var Fe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Fe||(Fe={}));const Hs=d.memo(function(t){var n,o,i,a;let{id:c,accessibility:l,autoScroll:f=!0,children:h,sensors:p=$i,collisionDetection:g=ti,measuring:b,modifiers:v,...x}=t;const y=d.useReducer(Yi,void 0,Ki),[w,D]=y,[C,S]=Go(),[_,O]=d.useState(Fe.Uninitialized),M=_===Fe.Initialized,{draggable:{active:R,nodes:E,translate:B},droppable:{containers:$}}=w,z=R!=null?E.get(R):null,re=d.useRef({initial:null,translated:null}),oe=d.useMemo(()=>{var K;return R!=null?{id:R,data:(K=z?.data)!=null?K:Xi,rect:re}:null},[R,z]),ce=d.useRef(null),[ze,Ke]=d.useState(null),[q,Ye]=d.useState(null),ge=ht(x,Object.values(x)),ke=mt("DndDescribedBy",c),Ge=d.useMemo(()=>$.getEnabled(),[$]),G=qi(b),{droppableRects:T,measureDroppableContainers:Ce,measuringScheduled:Pe}=Ii(Ge,{dragging:M,dependencies:[B.x,B.y],config:G.droppable}),V=Ai(E,R),Be=d.useMemo(()=>q?ln(q):null,[q]),Z=$e(),le=Oi(V,G.draggable.measure);Ji({activeNode:R!=null?E.get(R):null,config:Z.layoutShiftCompensation,initialRect:le,measure:G.draggable.measure});const N=$n(V,G.draggable.measure,le),_e=$n(V?V.parentElement:null),ie=d.useRef({activatorEvent:null,active:null,activeNode:V,collisionRect:null,collisions:null,droppableRects:T,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:$,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ie=$.getNodeFor((n=ie.current.over)==null?void 0:n.id),pe=Ui({measure:G.dragOverlay.measure}),Oe=(o=pe.nodeRef.current)!=null?o:V,Me=M?(i=pe.rect)!=null?i:N:null,yt=!!(pe.nodeRef.current&&pe.rect),wt=ji(yt?null:N),et=dr(Oe?ne(Oe):null),se=Li(M?Ie??V:null),Ne=Pi(se),Ae=Wi(v,{transform:{x:B.x-wt.x,y:B.y-wt.y,scaleX:1,scaleY:1},activatorEvent:q,active:oe,activeNodeRect:N,containerNodeRect:_e,draggingNodeRect:Me,over:ie.current.over,overlayNodeRect:pe.rect,scrollableAncestors:se,scrollableAncestorRects:Ne,windowRect:et}),ve=Be?qe(Be,B):null,tt=Fi(se),xt=Hn(tt),Ut=Hn(tt,[N]),je=qe(Ae,xt),be=Me?oi(Me,Ae):null,Le=oe&&be?g({active:oe,collisionRect:be,droppableRects:T,droppableContainers:Ge,pointerCoordinates:ve}):null,nt=Zn(Le,"id"),[me,rt]=d.useState(null),$t=yt?Ae:qe(Ae,Ut),Xt=ni($t,(a=me?.rect)!=null?a:null,N),ye=d.useRef(null),Ue=d.useCallback((K,U)=>{let{sensor:J,options:De}=U;if(ce.current==null)return;const ee=E.get(ce.current);if(!ee)return;const Q=K.nativeEvent,ue=new J({active:ce.current,activeNode:ee,event:Q,options:De,context:ie,onAbort(X){if(!E.get(X))return;const{onDragAbort:de}=ge.current,we={id:X};de?.(we),C({type:"onDragAbort",event:we})},onPending(X,Re,de,we){if(!E.get(X))return;const{onDragPending:fe}=ge.current,Ee={id:X,constraint:Re,initialCoordinates:de,offset:we};fe?.(Ee),C({type:"onDragPending",event:Ee})},onStart(X){const Re=ce.current;if(Re==null)return;const de=E.get(Re);if(!de)return;const{onDragStart:we}=ge.current,Xe={activatorEvent:Q,active:{id:Re,data:de.data,rect:re}};ct.unstable_batchedUpdates(()=>{we?.(Xe),O(Fe.Initializing),D({type:H.DragStart,initialCoordinates:X,active:Re}),C({type:"onDragStart",event:Xe}),Ke(ye.current),Ye(Q)})},onMove(X){D({type:H.DragMove,coordinates:X})},onEnd:W(H.DragEnd),onCancel:W(H.DragCancel)});ye.current=ue;function W(X){return async function(){const{active:de,collisions:we,over:Xe,scrollAdjustedTranslate:fe}=ie.current;let Ee=null;if(de&&fe){const{cancelDrop:He}=ge.current;Ee={activatorEvent:Q,active:de,collisions:we,delta:fe,over:Xe},X===H.DragEnd&&typeof He=="function"&&await Promise.resolve(He(Ee))&&(X=H.DragCancel)}ce.current=null,ct.unstable_batchedUpdates(()=>{D({type:X}),O(Fe.Uninitialized),rt(null),Ke(null),Ye(null),ye.current=null;const He=X===H.DragEnd?"onDragEnd":"onDragCancel";if(Ee){const it=ge.current[He];it?.(Ee),C({type:He,event:Ee})}})}}},[E]),Ht=d.useCallback((K,U)=>(J,De)=>{const ee=J.nativeEvent,Q=E.get(De);if(ce.current!==null||!Q||ee.dndKit||ee.defaultPrevented)return;const ue={active:Q};K(J,U.options,ue)===!0&&(ee.dndKit={capturedBy:U.sensor},ce.current=De,Ue(J,U))},[E,Ue]),ot=_i(p,Ht);zi(p),Te(()=>{N&&_===Fe.Initializing&&O(Fe.Initialized)},[N,_]),d.useEffect(()=>{const{onDragMove:K}=ge.current,{active:U,activatorEvent:J,collisions:De,over:ee}=ie.current;if(!U||!J)return;const Q={active:U,activatorEvent:J,collisions:De,delta:{x:je.x,y:je.y},over:ee};ct.unstable_batchedUpdates(()=>{K?.(Q),C({type:"onDragMove",event:Q})})},[je.x,je.y]),d.useEffect(()=>{const{active:K,activatorEvent:U,collisions:J,droppableContainers:De,scrollAdjustedTranslate:ee}=ie.current;if(!K||ce.current==null||!U||!ee)return;const{onDragOver:Q}=ge.current,ue=De.get(nt),W=ue&&ue.rect.current?{id:ue.id,rect:ue.rect.current,data:ue.data,disabled:ue.disabled}:null,X={active:K,activatorEvent:U,collisions:J,delta:{x:ee.x,y:ee.y},over:W};ct.unstable_batchedUpdates(()=>{rt(W),Q?.(X),C({type:"onDragOver",event:X})})},[nt]),Te(()=>{ie.current={activatorEvent:q,active:oe,activeNode:V,collisionRect:be,collisions:Le,droppableRects:T,draggableNodes:E,draggingNode:Oe,draggingNodeRect:Me,droppableContainers:$,over:me,scrollableAncestors:se,scrollAdjustedTranslate:je},re.current={initial:Me,translated:be}},[oe,V,Le,be,E,Oe,Me,T,$,me,se,je]),Ri({...Z,delta:B,draggingRect:be,pointerCoordinates:ve,scrollableAncestors:se,scrollableAncestorRects:Ne});const Vt=d.useMemo(()=>({active:oe,activeNode:V,activeNodeRect:N,activatorEvent:q,collisions:Le,containerNodeRect:_e,dragOverlay:pe,draggableNodes:E,droppableContainers:$,droppableRects:T,over:me,measureDroppableContainers:Ce,scrollableAncestors:se,scrollableAncestorRects:Ne,measuringConfiguration:G,measuringScheduled:Pe,windowRect:et}),[oe,V,N,q,Le,_e,pe,E,$,T,me,Ce,se,Ne,G,Pe,et]),St=d.useMemo(()=>({activatorEvent:q,activators:ot,active:oe,activeNodeRect:N,ariaDescribedById:{draggable:ke},dispatch:D,draggableNodes:E,over:me,measureDroppableContainers:Ce}),[q,ot,oe,N,D,ke,E,me,Ce]);return te.createElement(qn.Provider,{value:S},te.createElement(Bt.Provider,{value:St},te.createElement(fr.Provider,{value:Vt},te.createElement(hr.Provider,{value:Xt},h)),te.createElement(Gi,{disabled:l?.restoreFocus===!1})),te.createElement(Jo,{...l,hiddenTextDescribedById:ke}));function $e(){const K=ze?.autoScrollEnabled===!1,U=typeof f=="object"?f.enabled===!1:f===!1,J=M&&!K&&!U;return typeof f=="object"?{...f,enabled:J}:{enabled:J}}}),Qi=d.createContext(null),Kn="button",Zi="Draggable";function es(e){let{id:t,data:n,disabled:o=!1,attributes:i}=e;const a=mt(Zi),{activators:c,activatorEvent:l,active:f,activeNodeRect:h,ariaDescribedById:p,draggableNodes:g,over:b}=d.useContext(Bt),{role:v=Kn,roleDescription:x="draggable",tabIndex:y=0}=i??{},w=f?.id===t,D=d.useContext(w?hr:Qi),[C,S]=Mt(),[_,O]=Mt(),M=ki(c,t),R=ht(n);Te(()=>(g.set(t,{id:t,key:a,node:C,activatorNode:_,data:R}),()=>{const B=g.get(t);B&&B.key===a&&g.delete(t)}),[g,t]);const E=d.useMemo(()=>({role:v,tabIndex:y,"aria-disabled":o,"aria-pressed":w&&v===Kn?!0:void 0,"aria-roledescription":x,"aria-describedby":p.draggable}),[o,v,y,w,x,p.draggable]);return{active:f,activatorEvent:l,activeNodeRect:h,attributes:E,isDragging:w,listeners:o?void 0:M,node:C,over:b,setNodeRef:S,setActivatorNodeRef:O,transform:D}}function ts(){return d.useContext(fr)}const ns="Droppable",rs={timeout:25};function os(e){let{data:t,disabled:n=!1,id:o,resizeObserverConfig:i}=e;const a=mt(ns),{active:c,dispatch:l,over:f,measureDroppableContainers:h}=d.useContext(Bt),p=d.useRef({disabled:n}),g=d.useRef(!1),b=d.useRef(null),v=d.useRef(null),{disabled:x,updateMeasurementsFor:y,timeout:w}={...rs,...i},D=ht(y??o),C=d.useCallback(()=>{if(!g.current){g.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{h(Array.isArray(D.current)?D.current:[D.current]),v.current=null},w)},[w]),S=Pt({callback:C,disabled:x||!c}),_=d.useCallback((E,B)=>{S&&(B&&(S.unobserve(B),g.current=!1),E&&S.observe(E))},[S]),[O,M]=Mt(_),R=ht(t);return d.useEffect(()=>{!S||!O.current||(S.disconnect(),g.current=!1,S.observe(O.current))},[O,S]),d.useEffect(()=>(l({type:H.RegisterDroppable,element:{id:o,key:a,disabled:n,node:O,rect:b,data:R}}),()=>l({type:H.UnregisterDroppable,key:a,id:o})),[o]),d.useEffect(()=>{n!==p.current.disabled&&(l({type:H.SetDroppableDisabled,id:o,key:a,disabled:n}),p.current.disabled=n)},[o,a,n,l]),{active:c,rect:b,isOver:f?.id===o,node:O,over:f,setNodeRef:M}}function gr(e,t,n){const o=e.slice();return o.splice(n<0?o.length+n:n,0,o.splice(t,1)[0]),o}function is(e,t){return e.reduce((n,o,i)=>{const a=t.get(o);return a&&(n[i]=a),n},Array(e.length))}function At(e){return e!==null&&e>=0}function ss(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function as(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const pr=e=>{let{rects:t,activeIndex:n,overIndex:o,index:i}=e;const a=gr(t,o,n),c=t[i],l=a[i];return!l||!c?null:{x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height}},_t={scaleX:1,scaleY:1},Vs=e=>{var t;let{activeIndex:n,activeNodeRect:o,index:i,rects:a,overIndex:c}=e;const l=(t=a[n])!=null?t:o;if(!l)return null;if(i===n){const h=a[c];return h?{x:0,y:n<c?h.top+h.height-(l.top+l.height):h.top-l.top,..._t}:null}const f=cs(a,i,n);return i>n&&i<=c?{x:0,y:-l.height-f,..._t}:i<n&&i>=c?{x:0,y:l.height+f,..._t}:{x:0,y:0,..._t}};function cs(e,t,n){const o=e[t],i=e[t-1],a=e[t+1];return o?n<t?i?o.top-(i.top+i.height):a?a.top-(o.top+o.height):0:a?a.top-(o.top+o.height):i?o.top-(i.top+i.height):0:0}const vr="Sortable",br=te.createContext({activeIndex:-1,containerId:vr,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:pr,disabled:{draggable:!1,droppable:!1}});function Ks(e){let{children:t,id:n,items:o,strategy:i=pr,disabled:a=!1}=e;const{active:c,dragOverlay:l,droppableRects:f,over:h,measureDroppableContainers:p}=ts(),g=mt(vr,n),b=l.rect!==null,v=d.useMemo(()=>o.map(M=>typeof M=="object"&&"id"in M?M.id:M),[o]),x=c!=null,y=c?v.indexOf(c.id):-1,w=h?v.indexOf(h.id):-1,D=d.useRef(v),C=!ss(v,D.current),S=w!==-1&&y===-1||C,_=as(a);Te(()=>{C&&x&&p(v)},[C,v,x,p]),d.useEffect(()=>{D.current=v},[v]);const O=d.useMemo(()=>({activeIndex:y,containerId:g,disabled:_,disableTransforms:S,items:v,overIndex:w,useDragOverlay:b,sortedRects:is(v,f),strategy:i}),[y,g,_.draggable,_.droppable,S,v,w,f,b,i]);return te.createElement(br.Provider,{value:O},t)}const ls=e=>{let{id:t,items:n,activeIndex:o,overIndex:i}=e;return gr(n,o,i).indexOf(t)},us=e=>{let{containerId:t,isSorting:n,wasDragging:o,index:i,items:a,newIndex:c,previousItems:l,previousContainerId:f,transition:h}=e;return!h||!o||l!==a&&i===c?!1:n?!0:c!==i&&t===f},ds={duration:200,easing:"ease"},mr="transform",fs=Nt.Transition.toString({property:mr,duration:0,easing:"linear"}),hs={roleDescription:"sortable"};function gs(e){let{disabled:t,index:n,node:o,rect:i}=e;const[a,c]=d.useState(null),l=d.useRef(n);return Te(()=>{if(!t&&n!==l.current&&o.current){const f=i.current;if(f){const h=Ze(o.current,{ignoreTransform:!0}),p={x:f.left-h.left,y:f.top-h.top,scaleX:f.width/h.width,scaleY:f.height/h.height};(p.x||p.y)&&c(p)}}n!==l.current&&(l.current=n)},[t,n,o,i]),d.useEffect(()=>{a&&c(null)},[a]),a}function Ys(e){let{animateLayoutChanges:t=us,attributes:n,disabled:o,data:i,getNewIndex:a=ls,id:c,strategy:l,resizeObserverConfig:f,transition:h=ds}=e;const{items:p,containerId:g,activeIndex:b,disabled:v,disableTransforms:x,sortedRects:y,overIndex:w,useDragOverlay:D,strategy:C}=d.useContext(br),S=ps(o,v),_=p.indexOf(c),O=d.useMemo(()=>({sortable:{containerId:g,index:_,items:p},...i}),[g,i,_,p]),M=d.useMemo(()=>p.slice(p.indexOf(c)),[p,c]),{rect:R,node:E,isOver:B,setNodeRef:$}=os({id:c,data:O,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...f}}),{active:z,activatorEvent:re,activeNodeRect:oe,attributes:ce,setNodeRef:ze,listeners:Ke,isDragging:q,over:Ye,setActivatorNodeRef:ge,transform:ke}=es({id:c,data:O,attributes:{...hs,...n},disabled:S.draggable}),Ge=ko($,ze),G=!!z,T=G&&!x&&At(b)&&At(w),Ce=!D&&q,Pe=Ce&&T?ke:null,Be=T?Pe??(l??C)({rects:y,activeNodeRect:oe,activeIndex:b,overIndex:w,index:_}):null,Z=At(b)&&At(w)?a({id:c,items:p,activeIndex:b,overIndex:w}):_,le=z?.id,N=d.useRef({activeId:le,items:p,newIndex:Z,containerId:g}),_e=p!==N.current.items,ie=t({active:z,containerId:g,isDragging:q,isSorting:G,id:c,index:_,items:p,newIndex:N.current.newIndex,previousItems:N.current.items,previousContainerId:N.current.containerId,transition:h,wasDragging:N.current.activeId!=null}),Ie=gs({disabled:!ie,index:_,node:E,rect:R});return d.useEffect(()=>{G&&N.current.newIndex!==Z&&(N.current.newIndex=Z),g!==N.current.containerId&&(N.current.containerId=g),p!==N.current.items&&(N.current.items=p)},[G,Z,g,p]),d.useEffect(()=>{if(le===N.current.activeId)return;if(le!=null&&N.current.activeId==null){N.current.activeId=le;return}const Oe=setTimeout(()=>{N.current.activeId=le},50);return()=>clearTimeout(Oe)},[le]),{active:z,activeIndex:b,attributes:ce,data:O,rect:R,index:_,newIndex:Z,items:p,isOver:B,isSorting:G,isDragging:q,listeners:Ke,node:E,overIndex:w,over:Ye,setNodeRef:Ge,setActivatorNodeRef:ge,setDroppableNodeRef:$,setDraggableNodeRef:ze,transform:Ie??Be,transition:pe()};function pe(){if(Ie||_e&&N.current.newIndex===_)return fs;if(!(Ce&&!vn(re)||!h)&&(G||ie))return Nt.Transition.toString({...h,property:mr})}}function ps(e,t){var n,o;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(o=e?.droppable)!=null?o:t.droppable}}function Ft(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const vs=[A.Down,A.Right,A.Up,A.Left],Gs=(e,t)=>{let{context:{active:n,collisionRect:o,droppableRects:i,droppableContainers:a,over:c,scrollableAncestors:l}}=t;if(vs.includes(e.code)){if(e.preventDefault(),!n||!o)return;const f=[];a.getEnabled().forEach(g=>{if(!g||g!=null&&g.disabled)return;const b=i.get(g.id);if(b)switch(e.code){case A.Down:o.top<b.top&&f.push(g);break;case A.Up:o.top>b.top&&f.push(g);break;case A.Left:o.left>b.left&&f.push(g);break;case A.Right:o.left<b.left&&f.push(g);break}});const h=Zo({collisionRect:o,droppableRects:i,droppableContainers:f});let p=Zn(h,"id");if(p===c?.id&&h.length>1&&(p=h[1].id),p!=null){const g=a.get(n.id),b=a.get(p),v=b?i.get(b.id):null,x=b?.node.current;if(x&&v&&g&&b){const w=kt(x).some((M,R)=>l[R]!==M),D=yr(g,b),C=bs(g,b),S=w||!D?{x:0,y:0}:{x:C?o.width-v.width:0,y:C?o.height-v.height:0},_={x:v.left,y:v.top};return S.x&&S.y?_:gt(_,S)}}}};function yr(e,t){return!Ft(e)||!Ft(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function bs(e,t){return!Ft(e)||!Ft(t)||!yr(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const{values:Ws,isValue:qs}=Yn([null,"json","jinja","workspace_variable"]);function Js(e){switch(e){case null:return"Use Form Input";case"json":return"Use JSON Input";case"jinja":return"Use Jinja Template";case"workspace_variable":return"Select Variable";default:throw new Error(`Unknown prefect kind: ${e}`)}}const{isValue:Qs}=Yn(["string","integer","number","boolean"]);async function ms(e,t){const{data:n}=await(await uo()).POST("/ui/schemas/validate",{body:{schema:e,values:t}});if(!n)throw new Error('"data" expected');return n}const ys=()=>{const[e,t]=jo(),[n,o]=No(),[i,a]=d.useState(!1),c=d.useRef(null),l=d.useCallback(async p=>{if(c.current)try{const{errors:g,valid:b}=await ms(c.current,e);o(b?[]:g)}catch{if(p?.throwOnError)throw new Error("Server error occurred validating schema")}},[e,o]),f=Co(l,1e3);return d.useEffect(()=>{i&&n.length>0&&c.current&&f()},[i,n.length,f]),{setValues:t,values:e,errors:n,validateForm:async({schema:p})=>{c.current=p,await l({throwOnError:!0}),a(!0)}}},ws=d.lazy(()=>fo(()=>import("./schema-form-BwTmkvJk.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])).then(e=>({default:e.SchemaForm})));function xs(e){return L.jsx(d.Suspense,{fallback:L.jsx(It,{className:"min-h-[300px] w-full"}),children:L.jsx(ws,{...e})})}const Ss=/^[a-zA-Z0-9-]+$/,Cs=co({blockName:lo().regex(Ss,{message:"Name must only contain lowercase letters, numbers, and dashes"})}),Ds={blockName:""},Zs=({open:e,onOpenChange:t,blockTypeSlug:n,onCreated:o})=>L.jsx(ho,{open:e,onOpenChange:t,children:L.jsxs(go,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[L.jsx(po,{children:L.jsx(vo,{children:"Create New Block"})}),L.jsx(d.Suspense,{fallback:L.jsx(Rs,{}),children:L.jsx(Es,{blockTypeSlug:n,onCreated:o,onOpenChange:t})})]})}),Rs=()=>L.jsxs("div",{className:"flex flex-col gap-4",children:[L.jsx(It,{className:"h-10 w-full"}),L.jsx(It,{className:"h-32 w-full"}),L.jsx(It,{className:"h-10 w-24 ml-auto"})]}),Es=({blockTypeSlug:e,onCreated:t,onOpenChange:n})=>{const{data:o}=_n(bo(e)),{data:i}=_n(mo({block_schemas:{operator:"and_",block_type_id:{any_:[o.id]}},offset:0,limit:1})),a=i[0];return a?L.jsx(Ts,{blockTypeId:o.id,blockSchemaId:a.id,blockSchemaFields:a.fields,onCreated:t,onOpenChange:n}):L.jsx("div",{className:"text-muted-foreground",children:"No schema found for this block type."})},Ts=({blockTypeId:e,blockSchemaId:t,blockSchemaFields:n,onCreated:o,onOpenChange:i})=>{const{values:a,setValues:c,errors:l,validateForm:f}=ys(),{createBlockDocument:h,isPending:p}=yo(),g=ao({resolver:so(Cs),defaultValues:Ds}),b=async v=>{try{if(await f({schema:a}),l.length>0)return;h({block_schema_id:t,block_type_id:e,is_anonymous:!1,data:a,name:v.blockName},{onSuccess:x=>{nn.success("Block created successfully"),o(x.id),i(!1)},onError:x=>{const y="Unknown error while creating block.";nn.error(y),console.error(y,x)}})}catch(x){const y="Unknown error while validating block data.";nn.error(y),console.error(y,x)}};return L.jsx(To,{...g,children:L.jsxs("form",{className:"flex flex-col gap-4",onSubmit:v=>{g.handleSubmit(b)(v)},children:[L.jsx(Ao,{control:g.control,name:"blockName",render:({field:v})=>L.jsxs(_o,{children:[L.jsx(Io,{children:"Name"}),L.jsx(Oo,{children:L.jsx(wo,{...v,value:v.value})}),L.jsx(Mo,{})]})}),L.jsx(xs,{values:a,onValuesChange:c,errors:l,kinds:["json"],schema:n}),L.jsxs(xo,{children:[L.jsx(In,{variant:"secondary",type:"button",onClick:()=>i(!1),children:"Cancel"}),L.jsx(In,{loading:p,type:"submit",children:"Create"})]})]})})},As=Intl.DateTimeFormat().resolvedOptions().timeZone;function ea({value:e,onValueChange:t,id:n}){const[o,i]=d.useState(As);function a(l){if(!l){t(void 0);return}const f=On(l),h=Mn(f,o,"yyyy-MM-dd'T'HH:mm:ssXXX");t(h)}function c(l){if(i(l),e){const f=On(e),h=Eo(f,l),p=Mn(h,l,"yyyy-MM-dd'T'HH:mm:ssXXX");t(p)}}return L.jsxs("div",{className:"flex flex-col gap-2",children:[L.jsx(So,{value:e,onValueChange:a,id:n}),L.jsx(Ro,{selectedValue:o,onSelect:c})]})}export{Zs as B,Nt as C,Hs as D,cr as K,xs as L,lr as P,Ks as S,jo as a,No as b,Bs as c,Ys as d,$s as e,Us as f,Js as g,Xs as h,qs as i,Qs as j,ea as k,zo as l,Ps as m,Ws as p,Gs as s,ys as u,Vs as v};
//# sourceMappingURL=schema-form-input-string-format-datetime-nrb3g-JJ.js.map
