{"version":3,"file":"timezone-select-D4Q6VBtD.js","sources":["../../src/components/ui/timezone-select/timezone-select.tsx"],"sourcesContent":["import { useDeferredValue, useMemo, useState } from \"react\";\nimport {\n\tCombobox,\n\tComboboxCommandEmtpy,\n\tComboboxCommandGroup,\n\tComboboxCommandInput,\n\tComboboxCommandItem,\n\tComboboxCommandList,\n\tComboboxContent,\n\tComboboxTrigger,\n} from \"@/components/ui/combobox\";\nimport {\n\tDropdownMenuLabel,\n\tDropdownMenuSeparator,\n} from \"@/components/ui/dropdown-menu\";\n\nfunction getTimezoneLabel(value: string): string {\n\treturn value.replaceAll(\"/\", \" / \").replaceAll(\"_\", \" \");\n}\n\nconst localTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n\nconst SUGGESTED_TIMEZONES = [\n\t{ label: \"UTC\", value: \"Etc/UTC\" },\n\t{\n\t\tlabel: getTimezoneLabel(localTimezone),\n\t\tvalue: localTimezone,\n\t},\n];\n\nconst TIMEZONES = Intl.supportedValuesOf(\"timeZone\")\n\t.map((timezone) => ({\n\t\tlabel: getTimezoneLabel(timezone),\n\t\tvalue: timezone,\n\t}))\n\t.slice(0, 5);\n\nconst ALL_TIMEZONES = [...SUGGESTED_TIMEZONES, ...TIMEZONES];\n\ntype TimezoneSelectProps = {\n\tselectedValue: string | undefined | null;\n\tonSelect: (value: string) => void;\n};\n\nexport const TimezoneSelect = ({\n\tselectedValue = \"\",\n\tonSelect,\n}: TimezoneSelectProps) => {\n\tconst [search, setSearch] = useState(\"\");\n\n\tconst deferredSearch = useDeferredValue(search);\n\n\tconst filteredSuggestedTimezones = useMemo(() => {\n\t\treturn SUGGESTED_TIMEZONES.filter(\n\t\t\t(timeZone) =>\n\t\t\t\ttimeZone.label.toLowerCase().includes(deferredSearch.toLowerCase()) ||\n\t\t\t\ttimeZone.value.toLowerCase().includes(deferredSearch.toLowerCase()),\n\t\t);\n\t}, [deferredSearch]);\n\n\tconst filteredTimezones = useMemo(() => {\n\t\treturn TIMEZONES.filter(\n\t\t\t(timeZone) =>\n\t\t\t\ttimeZone.label.toLowerCase().includes(deferredSearch.toLowerCase()) ||\n\t\t\t\ttimeZone.value.toLowerCase().includes(deferredSearch.toLowerCase()),\n\t\t);\n\t}, [deferredSearch]);\n\n\tconst selectedTimezone = useMemo(\n\t\t() => ALL_TIMEZONES.find(({ value }) => value === selectedValue),\n\t\t[selectedValue],\n\t);\n\n\treturn (\n\t\t<Combobox>\n\t\t\t<ComboboxTrigger\n\t\t\t\tselected={Boolean(selectedValue)}\n\t\t\t\taria-label=\"Select timezone\"\n\t\t\t>\n\t\t\t\t{selectedTimezone?.label ?? \"Select timezone\"}\n\t\t\t</ComboboxTrigger>\n\t\t\t<ComboboxContent>\n\t\t\t\t<ComboboxCommandInput\n\t\t\t\t\tvalue={search}\n\t\t\t\t\tonValueChange={setSearch}\n\t\t\t\t\tplaceholder=\"Search\"\n\t\t\t\t/>\n\t\t\t\t<ComboboxCommandEmtpy>No timezone found</ComboboxCommandEmtpy>\n\t\t\t\t<ComboboxCommandList>\n\t\t\t\t\t<ComboboxCommandGroup>\n\t\t\t\t\t\t{filteredSuggestedTimezones.length > 0 && (\n\t\t\t\t\t\t\t<DropdownMenuLabel>Suggested timezones</DropdownMenuLabel>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{filteredSuggestedTimezones.map(({ label, value }) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<ComboboxCommandItem\n\t\t\t\t\t\t\t\t\tkey={value}\n\t\t\t\t\t\t\t\t\tselected={selectedValue === value}\n\t\t\t\t\t\t\t\t\tonSelect={(value) => {\n\t\t\t\t\t\t\t\t\t\tonSelect(value);\n\t\t\t\t\t\t\t\t\t\tsetSearch(\"\");\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t\t</ComboboxCommandItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t{filteredTimezones.length > 0 && (\n\t\t\t\t\t\t\t<DropdownMenuLabel>All timezones</DropdownMenuLabel>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{filteredTimezones.map(({ label, value }) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<ComboboxCommandItem\n\t\t\t\t\t\t\t\t\tkey={value}\n\t\t\t\t\t\t\t\t\tselected={selectedValue === value}\n\t\t\t\t\t\t\t\t\tonSelect={(value) => {\n\t\t\t\t\t\t\t\t\t\tonSelect(value);\n\t\t\t\t\t\t\t\t\t\tsetSearch(\"\");\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t\t</ComboboxCommandItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ComboboxCommandGroup>\n\t\t\t\t</ComboboxCommandList>\n\t\t\t</ComboboxContent>\n\t\t</Combobox>\n\t);\n};\n"],"names":["getTimezoneLabel","value","localTimezone","SUGGESTED_TIMEZONES","TIMEZONES","timezone","ALL_TIMEZONES","TimezoneSelect","selectedValue","onSelect","search","setSearch","useState","deferredSearch","useDeferredValue","filteredSuggestedTimezones","useMemo","timeZone","filteredTimezones","selectedTimezone","Combobox","jsx","ComboboxTrigger","ComboboxContent","ComboboxCommandInput","ComboboxCommandEmtpy","ComboboxCommandList","jsxs","ComboboxCommandGroup","DropdownMenuLabel","label","ComboboxCommandItem","DropdownMenuSeparator"],"mappings":"iNAgBA,SAASA,EAAiBC,EAAuB,CAChD,OAAOA,EAAM,WAAW,IAAK,KAAK,EAAE,WAAW,IAAK,GAAG,CACxD,CAEA,MAAMC,EAAgB,KAAK,iBAAiB,kBAAkB,SAExDC,EAAsB,CAC3B,CAAE,MAAO,MAAO,MAAO,SAAA,EACvB,CACC,MAAOH,EAAiBE,CAAa,EACrC,MAAOA,CAAA,CAET,EAEME,EAAY,KAAK,kBAAkB,UAAU,EACjD,IAAKC,IAAc,CACnB,MAAOL,EAAiBK,CAAQ,EAChC,MAAOA,CACR,EAAE,EACD,MAAM,EAAG,CAAC,EAENC,EAAgB,CAAC,GAAGH,EAAqB,GAAGC,CAAS,EAO9CG,EAAiB,CAAC,CAC9B,cAAAC,EAAgB,GAChB,SAAAC,CACD,IAA2B,CAC1B,KAAM,CAACC,EAAQC,CAAS,EAAIC,EAAAA,SAAS,EAAE,EAEjCC,EAAiBC,EAAAA,iBAAiBJ,CAAM,EAExCK,EAA6BC,EAAAA,QAAQ,IACnCb,EAAoB,OACzBc,GACAA,EAAS,MAAM,YAAA,EAAc,SAASJ,EAAe,YAAA,CAAa,GAClEI,EAAS,MAAM,YAAA,EAAc,SAASJ,EAAe,aAAa,CAAA,EAElE,CAACA,CAAc,CAAC,EAEbK,EAAoBF,EAAAA,QAAQ,IAC1BZ,EAAU,OACfa,GACAA,EAAS,MAAM,YAAA,EAAc,SAASJ,EAAe,YAAA,CAAa,GAClEI,EAAS,MAAM,YAAA,EAAc,SAASJ,EAAe,aAAa,CAAA,EAElE,CAACA,CAAc,CAAC,EAEbM,EAAmBH,EAAAA,QACxB,IAAMV,EAAc,KAAK,CAAC,CAAE,MAAAL,CAAA,IAAYA,IAAUO,CAAa,EAC/D,CAACA,CAAa,CAAA,EAGf,cACEY,EAAA,CACA,SAAA,CAAAC,EAAAA,IAACC,EAAA,CACA,SAAU,EAAQd,EAClB,aAAW,kBAEV,YAAkB,OAAS,iBAAA,CAAA,SAE5Be,EAAA,CACA,SAAA,CAAAF,EAAAA,IAACG,EAAA,CACA,MAAOd,EACP,cAAeC,EACf,YAAY,QAAA,CAAA,EAEbU,EAAAA,IAACI,GAAqB,SAAA,mBAAA,CAAiB,EACvCJ,EAAAA,IAACK,EAAA,CACA,SAAAC,EAAAA,KAACC,EAAA,CACC,SAAA,CAAAb,EAA2B,OAAS,GACpCM,EAAAA,IAACQ,EAAA,CAAkB,SAAA,sBAAmB,EAEtCd,EAA2B,IAAI,CAAC,CAAE,MAAAe,EAAO,MAAA7B,KAExCoB,EAAAA,IAACU,EAAA,CAEA,SAAUvB,IAAkBP,EAC5B,SAAWA,GAAU,CACpBQ,EAASR,CAAK,EACdU,EAAU,EAAE,CACb,EACA,MAAAV,EAEC,SAAA6B,CAAA,EARI7B,CAAA,CAWP,QACA+B,EAAA,EAAsB,EACtBd,EAAkB,OAAS,GAC3BG,EAAAA,IAACQ,GAAkB,SAAA,gBAAa,EAEhCX,EAAkB,IAAI,CAAC,CAAE,MAAAY,EAAO,MAAA7B,KAE/BoB,EAAAA,IAACU,EAAA,CAEA,SAAUvB,IAAkBP,EAC5B,SAAWA,GAAU,CACpBQ,EAASR,CAAK,EACdU,EAAU,EAAE,CACb,EACA,MAAAV,EAEC,SAAA6B,CAAA,EARI7B,CAAA,CAWP,CAAA,CAAA,CACF,CAAA,CACD,CAAA,CAAA,CACD,CAAA,EACD,CAEF"}