import{i as e,n as t}from"./rolldown-runtime-BKYq3fBv.js";import{$n as n,Cr as r,Er as i,Hn as a,Mr as o,Nn as s,Or as c,Pr as l,Qn as u,Rr as d,Un as f,Xn as p,Xr as m,Zn as h,ai as g,ar as _,er as ee,hr as v,kr as y,li as te,mr as b,mt as x,pt as S,ri as C,si as w,sr as T,zr as ne}from"./vendor-primevue-Cg-HmKZY.js";import{fn as re,ot as E,pn as ie,st as ae}from"./vendor-other-CoxDvJ0a.js";import{r as D,t as oe}from"./widget-D00AxrDc.js";import{n as O,r as k,t as A}from"./tailwindUtil-F1kyO01s.js";import{n as j,t as M}from"./Button-YQy7RkKq.js";import{n as N,t as P}from"./_plugin-vue_export-helper-Ckv1EJQX.js";import{n as F,t as I}from"./Slider-DMqJVvz2.js";import{a as L,o as R,r as se,s as z}from"./widgetPropFilter-BN2p2qia.js";import{n as B,t as V}from"./layout-76mT7BZg.js";import{n as H,t as U}from"./WidgetLayoutField-Cnd0sCOy.js";import{n as ce,t as le}from"./WidgetWithControl-BUzdEyX7.js";var W,G,K,q,J,Y=t((()=>{s(),re(),E(),j(),D(),A(),z(),B(),H(),W=[`aria-label`],G={class:`absolute size-full rounded-lg pointer-events-none overflow-clip`},K={class:`relative min-w-[4ch] flex-1 py-1.5 my-0.25`},q=[`aria-valuenow`,`aria-valuemin`,`aria-valuemax`,`value`,`disabled`],J=T({__name:`WidgetInputNumberInput`,props:b({widget:{}},{modelValue:{default:0},modelModifiers:{}}),emits:[`update:modelValue`],setup(e){let{n:t}=ae(),s=e,_=l(`widgetContainer`),y=l(`inputField`),b=m(!1);ie(_,()=>{b.value&&=!1});let x=p(()=>t(1.1).replace(/\p{Number}/gu,``)),S=p(()=>t(11111).replace(/\p{Number}/gu,``));function unformatValue(e){return e.replaceAll(S.value,``).replaceAll(x.value,`.`)}let C=o(e,`modelValue`),T=p(()=>{let e=P.value??C.value;return e===``||!isFinite(e)?`${e}`:t(e,{useGrouping:j.value,minimumFractionDigits:k.value,maximumFractionDigits:k.value})});function updateValue(e){let{target:t}=e;if(!(t instanceof HTMLInputElement))return;let n=oe(unformatValue(t.value));n===void 0?t.value=T.value:C.value=Math.min(D.value.max,Math.max(D.value.min,n)),b.value=!1}let re=p(()=>C.value>D.value.min&&!s.widget.options?.disabled),E=p(()=>C.value<D.value.max&&!s.widget.options?.disabled),D=p(()=>R(s.widget.options,se)),k=p(()=>{let e=s.widget.options?.precision;return typeof e==`number`&&e>=0?e:void 0}),A=p(()=>{if(s.widget.options?.step2!==void 0)return Number(s.widget.options.step2);let e=s.widget.options?.step;return e!==void 0&&e>10?Number(e)/10:k.value===void 0?0:k.value===0?1:Number((1/10**k.value).toFixed(k.value))}),j=p(()=>s.widget.options?.useGrouping===!0),N=p(()=>{let e=C.value??0;return!Number.isFinite(e)||Math.abs(e)>2**53-1});function updateValueBy(e){C.value=Math.min(D.value.max,Math.max(D.value.min,C.value+e))}let P=m(),F=m(0);function handleMouseDown(e){if(e.button>0||s.widget.options?.disabled)return;let{target:t}=e;t instanceof HTMLElement&&(t.setPointerCapture(e.pointerId),P.value=C.value,F.value=0)}function handleMouseMove(e){if(P.value===void 0)return;F.value+=e.movementX;let t=P.value+(F.value/10|0)*A.value;F.value%=10,P.value=Math.min(D.value.max,Math.max(D.value.min,t))}function handleMouseUp(){let e=P.value;e!==void 0&&(e===C.value&&(b.value=!0,y.value?.focus(),y.value?.setSelectionRange(0,-1)),C.value=e,P.value=void 0,F.value=0)}let I=p(()=>N.value?`Increment/decrement disabled: value exceeds JavaScript precision limit (Â±2^53)`:null),L=p(()=>{let{max:e,min:t,step:n}=D.value;return t===void 0||e===void 0||n===void 0||(e-t)/n>=100?0:(((P.value??C.value)-t)/(e-t)*100).toFixed(0)});return(e,t)=>{let o=c(`tooltip`);return r(),u(U,{widget:e.widget},{default:d(()=>[ne((r(),ee(`div`,v({ref_key:`widgetContainer`,ref:_},D.value,{"aria-label":e.widget.name,class:g(O)(g(V),`grow text-xs flex h-7 relative`)}),[h(`div`,G,[h(`div`,{class:`bg-primary-background/15 size-full`,style:te({width:`${L.value}%`})},null,4)]),N.value?n(``,!0):(r(),u(M,{key:0,"data-testid":`decrement`,class:`h-full w-8 rounded-r-none hover:bg-base-foreground/20 disabled:opacity-30`,variant:`muted-textonly`,disabled:!re.value,tabindex:`-1`,onClick:t[0]||=e=>C.value-=A.value},{default:d(()=>t[8]||=[h(`i`,{class:`pi pi-minus`},null,-1)]),_:1},8,[`disabled`])),h(`div`,K,[h(`input`,{ref_key:`inputField`,ref:y,"aria-valuenow":P.value??C.value,"aria-valuemin":D.value.min,"aria-valuemax":D.value.max,class:w(g(O)(`bg-transparent border-0 focus:outline-0 p-1 truncate text-sm absolute inset-0`)),inputmode:`decimal`,value:T.value,role:`spinbutton`,tabindex:`0`,disabled:e.widget.options?.disabled,autocomplete:`off`,autocorrect:`off`,spellcheck:`false`,onBlur:updateValue,onKeyup:a(updateValue,[`enter`]),onKeydown:[t[1]||=a(f(e=>updateValueBy(A.value),[`prevent`]),[`up`]),t[2]||=a(f(e=>updateValueBy(-A.value),[`prevent`]),[`down`]),t[3]||=a(f(e=>updateValueBy(10*A.value),[`prevent`]),[`page-up`]),t[4]||=a(f(e=>updateValueBy(-10*A.value),[`prevent`]),[`page-down`])],onDragstart:t[5]||=f(()=>{},[`prevent`])},null,42,q),h(`div`,{class:w(g(O)(`absolute inset-0 z-10 cursor-ew-resize`,b.value&&`hidden pointer-events-none`)),onPointerdown:handleMouseDown,onPointermove:handleMouseMove,onPointerup:handleMouseUp,onPointercancel:t[6]||=()=>{P.value=void 0,F.value=0}},null,34)]),i(e.$slots,`default`),N.value?n(``,!0):(r(),u(M,{key:1,"data-testid":`increment`,class:`h-full w-8 rounded-l-none hover:bg-base-foreground/20 disabled:opacity-30`,variant:`muted-textonly`,disabled:!E.value,tabindex:`-1`,onClick:t[7]||=e=>C.value+=A.value},{default:d(()=>t[9]||=[h(`i`,{class:`pi pi-plus`},null,-1)]),_:1},8,[`disabled`]))],16,W)),[[o,I.value]])]),_:3},8,[`widget`])}}})})),X,ue=t((()=>{Y(),Y(),X=J}));function useNumberStepCalculation(e,t,n=!1){return p(()=>{let r=C(t);if(e?.step2!==void 0)return Number(e.step2);let i=e?.step;if(i!==void 0&&i>10)return Number(i)/10;if(r===void 0)return n?void 0:0;if(r===0)return 1;let a=1/10**r;return n?a:Number(a.toFixed(r))})}var de=t((()=>{s()}));function useNumberWidgetButtonPt(e){let{roundedLeft:t=!1,roundedRight:n=!1}=e??{},r=O(Z,n&&`rounded-r-lg`),i=O(Z,t&&`rounded-l-lg`);return{incrementButton:{class:r},decrementButton:{class:i}}}var Z,fe=t((()=>{k(),Z=O(`inline-flex items-center justify-center border-0 bg-transparent text-inherit transition-colors duration-150 ease-in-out `,`hover:bg-node-component-surface-hovered active:bg-node-component-surface-selected`,`disabled:bg-node-component-disabled disabled:text-node-icon-disabled disabled:cursor-not-allowed`)})),Q,pe=t((()=>{s(),S(),F(),A(),z(),de(),fe(),B(),H(),Q=T({__name:`WidgetInputNumberSlider`,props:b({widget:{}},{modelValue:{default:0},modelModifiers:{}}),emits:[`update:modelValue`],setup(e){let t=o(e,`modelValue`),n=m(0),updateLocalValue=e=>{e?.length&&(t.value=e[0])},handleNumberInputUpdate=e=>{if(e!==void 0){updateLocalValue([e]);return}n.value+=1},i=p(()=>R(e.widget.options,L)),a=e.widget.options?.precision,s=typeof a==`number`&&a>=0?a:void 0,c=useNumberStepCalculation(e.widget.options,s,!0),l=useNumberWidgetButtonPt({roundedLeft:!0,roundedRight:!0});return(e,a)=>(r(),u(U,{widget:e.widget},{default:d(()=>[h(`div`,{class:w(g(O)(g(V),`flex items-center gap-2 pl-3 pr-2`))},[_(I,v({"model-value":[t.value]},i.value,{class:`flex-grow text-xs`,step:g(c),"aria-label":e.widget.name,"onUpdate:modelValue":updateLocalValue}),null,16,[`model-value`,`step`,`aria-label`]),(r(),u(g(x),v({key:n.value,"model-value":t.value},i.value,{step:g(c),"min-fraction-digits":g(s),"max-fraction-digits":g(s),"aria-label":e.widget.name,size:`small`,"pt:pc-input-text:root":`min-w-[4ch] bg-transparent border-none text-center truncate`,class:`w-16`,pt:g(l),"onUpdate:modelValue":handleNumberInputUpdate}),null,16,[`model-value`,`step`,`min-fraction-digits`,`max-fraction-digits`,`aria-label`,`pt`]))],2)]),_:1},8,[`widget`]))}})})),me=t((()=>{})),$,he=t((()=>{pe(),pe(),me(),N(),$=P(Q,[[`__scopeId`,`data-v-989ee2f9`]])})),ge,_e=t((()=>{s(),ue(),he(),ce(),ge=T({__name:`WidgetInputNumber`,props:b({widget:{}},{modelValue:{default:0},modelModifiers:{}}),emits:[`update:modelValue`],setup(e){let t=e,n=o(e,`modelValue`),i=p(()=>!!t.widget.controlWidget);return(e,t)=>i.value?(r(),u(le,{key:0,modelValue:n.value,"onUpdate:modelValue":t[0]||=e=>n.value=e,widget:e.widget,component:e.widget.type===`slider`?$:X},null,8,[`modelValue`,`widget`,`component`])):(r(),u(y(e.widget.type===`slider`?$:X),v({key:1,modelValue:n.value,"onUpdate:modelValue":t[1]||=e=>n.value=e,widget:e.widget},e.$attrs),null,16,[`modelValue`,`widget`]))}})})),ve,ye=t((()=>{_e(),_e(),ve=ge}));export{ye as n,ve as t};
//# sourceMappingURL=WidgetInputNumber-BehYYh3r.js.map