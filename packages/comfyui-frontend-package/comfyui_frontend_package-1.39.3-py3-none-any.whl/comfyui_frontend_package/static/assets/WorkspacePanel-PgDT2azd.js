import{i as e,n as t}from"./rolldown-runtime-BKYq3fBv.js";import{$n as n,A as r,C as i,Cr as a,D as o,En as s,Gn as c,Nn as l,O as u,Or as ee,Q as d,Qn as f,Rr as p,S as te,Tn as m,Tr as h,Xn as g,Xr as _,Z as v,Zn as y,ai as b,ar as x,b as S,br as C,er as w,ir as T,k as E,si as D,sr as O,ui as k,w as A,x as j,y as M,zr as N}from"./vendor-primevue-Cg-HmKZY.js";import{ot as P,st as F}from"./vendor-other-CoxDvJ0a.js";import{i as I,r as L}from"./vendor-vue-J4jYbuLn.js";import{n as R,t as z}from"./tailwindUtil-F1kyO01s.js";import{i as B,n as V,r as H,t as U}from"./Button-YQy7RkKq.js";import{Co as W,Da as G,Ea as K,_ as q,c as J,g as ne,n as Y,s as X,t as Z,wo as re}from"./dialogService-DvYmp2_F.js";import{n as ie,t as Q}from"./UserAvatar-BHBnMJq5.js";import{n as ae,t as oe}from"./useWorkspaceUI-DgiliDDq.js";import{n as se,t as ce}from"./SubscriptionPanelContentWorkspace-927KK1ZO.js";var le,ue,de,fe,pe,me,he,ge,_e,ve,ye,be,xe,Se,Ce,we,Te,Ee,De,Oe,ke,Ae,je,Me,Ne,Pe,Fe,Ie,Le,Re,ze,Be,Ve,He,Ue,We,Ge,Ke,qe,Je=t((()=>{l(),L(),v(),m(),P(),G(),ie(),V(),W(),oe(),X(),Z(),z(),le={class:`grow overflow-auto pt-6`},ue={class:`flex size-full flex-col gap-2 rounded-2xl border border-interface-stroke border-inter p-6`},de={class:`flex w-full items-center gap-9`},fe={class:`flex min-w-0 flex-1 items-baseline gap-2`},pe={key:0,class:`text-base font-semibold text-base-foreground`},me={key:0,class:`flex items-start gap-2`},he={class:`flex min-h-0 flex-1 flex-col`},ge={class:`flex items-center gap-2`},_e={key:0},ve={class:`min-h-0 flex-1 overflow-y-auto`},ye={class:`flex items-center gap-3`},be={class:`flex min-w-0 flex-1 flex-col gap-1`},xe={class:`flex items-center gap-2`},Se={class:`text-sm text-base-foreground`},Ce={class:`text-muted-foreground`},we={key:0,class:`text-[10px] font-bold uppercase text-base-background bg-base-foreground px-1 py-0.5 rounded-full`},Te={class:`text-sm text-muted-foreground`},Ee={class:`flex items-center gap-3`},De={class:`flex min-w-0 flex-1 flex-col gap-1`},Oe={class:`flex items-center gap-2`},ke={class:`text-sm text-base-foreground`},Ae={key:0,class:`text-muted-foreground`},je={key:0,class:`text-[10px] font-bold uppercase text-base-background bg-base-foreground px-1 py-0.5 rounded-full`},Me={class:`text-sm text-muted-foreground`},Ne={key:0,class:`text-sm text-muted-foreground text-right`},Pe={key:1,class:`flex items-center justify-end`},Fe={class:`flex items-center gap-3`},Ie={class:`flex size-8 shrink-0 items-center justify-center rounded-full bg-secondary-background`},Le={class:`text-sm font-bold text-base-foreground`},Re={class:`flex min-w-0 flex-1 flex-col gap-1`},ze={class:`text-sm text-base-foreground`},Be={class:`text-sm text-muted-foreground`},Ve={class:`text-sm text-muted-foreground`},He={class:`text-sm text-muted-foreground`},Ue={class:`flex items-center justify-end gap-2`},We={key:0,class:`flex w-full items-center justify-center py-8 text-sm text-muted-foreground`},Ge={key:0,class:`flex items-center`},Ke={class:`text-sm text-muted-foreground`},qe=O({__name:`MembersPanelContent`,setup(e){let{d:t,t:r}=F(),i=s(),{userPhotoUrl:o,userEmail:l,userDisplayName:u}=re(),{showRemoveMemberDialog:te,showRevokeInviteDialog:m,showCreateWorkspaceDialog:v}=Y(),S=J(),{members:C,pendingInvites:E,isInPersonalWorkspace:O}=I(S),{copyInviteLink:A}=S,{permissions:j,uiConfig:M}=ae(),P=_(``),L=_(`active`),z=_(`inviteDate`),B=_(`desc`),V=_(null),H=_(null);function getInviteDisplayName(e){return e.split(`@`)[0]}function getInviteInitial(e){return e.charAt(0).toUpperCase()}let W=g(()=>[{label:r(`workspacePanel.members.actions.removeMember`),icon:`pi pi-user-minus`,command:()=>{H.value&&handleRemoveMember(H.value)}}]);function showMemberMenu(e,t){H.value=t,V.value?.toggle(e)}function isCurrentUser(e){return e.email.toLowerCase()===l.value?.toLowerCase()}let G=g(()=>{let e=[...C.value];if(P.value){let t=P.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t))}return e.sort((e,t)=>{if(e.role===`owner`&&t.role!==`owner`)return-1;if(e.role!==`owner`&&t.role===`owner`)return 1;let n=isCurrentUser(e),r=isCurrentUser(t);if(n&&!r)return-1;if(!n&&r)return 1;let i=e.joinDate.getTime(),a=t.joinDate.getTime();return B.value===`asc`?i-a:a-i}),e});function getRoleBadgeLabel(e){return r(e===`owner`?`workspaceSwitcher.roleOwner`:`workspaceSwitcher.roleMember`)}let q=g(()=>{let e=[...E.value];if(P.value){let t=P.value.toLowerCase();e=e.filter(e=>e.email.toLowerCase().includes(t))}let t=z.value===`joinDate`?`inviteDate`:z.value;return e.sort((e,n)=>{let r=e[t],i=n[t];if(!r||!i)return 0;let a=r.getTime(),o=i.getTime();return B.value===`asc`?a-o:o-a}),e});function toggleSort(e){z.value===e?B.value=B.value===`asc`?`desc`:`asc`:(z.value=e,B.value=`desc`)}function formatDate(e){return t(e,{dateStyle:`medium`})}async function handleCopyInviteLink(e){try{await A(e.id),i.add({severity:`success`,summary:r(`g.copied`),life:2e3})}catch{i.add({severity:`error`,summary:r(`g.error`),life:3e3})}}function handleRevokeInvite(e){m(e.id)}function handleCreateWorkspace(){v()}function handleRemoveMember(e){te(e.id)}return(e,t)=>{let r=ee(`tooltip`);return a(),w(`div`,le,[y(`div`,ue,[y(`div`,de,[y(`div`,fe,[b(M).showMembersList?(a(),w(`span`,pe,[L.value===`active`?(a(),w(c,{key:0},[T(k(e.$t(`workspacePanel.members.membersCount`,{count:b(C).length})),1)],64)):b(j).canViewPendingInvites?(a(),w(c,{key:1},[T(k(e.$t(`workspacePanel.members.pendingInvitesCount`,b(E).length)),1)],64)):n(``,!0)])):n(``,!0)]),b(M).showSearch?(a(),w(`div`,me,[x(K,{modelValue:P.value,"onUpdate:modelValue":t[0]||=e=>P.value=e,placeholder:e.$t(`g.search`),size:`lg`,class:`w-64`},null,8,[`modelValue`,`placeholder`])])):n(``,!0)]),y(`div`,he,[b(M).showMembersList?(a(),w(`div`,{key:0,class:D(b(R)(`grid w-full items-center py-2`,L.value===`pending`?b(M).pendingGridCols:b(M).headerGridCols))},[y(`div`,ge,[x(U,{variant:L.value===`active`?`secondary`:`muted-textonly`,size:`md`,onClick:t[1]||=e=>L.value=`active`},{default:p(()=>[T(k(e.$t(`workspacePanel.members.tabs.active`)),1)]),_:1},8,[`variant`]),b(M).showPendingTab?(a(),f(U,{key:0,variant:L.value===`pending`?`secondary`:`muted-textonly`,size:`md`,onClick:t[2]||=e=>L.value=`pending`},{default:p(()=>[T(k(e.$t(`workspacePanel.members.tabs.pendingCount`,b(E).length)),1)]),_:1},8,[`variant`])):n(``,!0)]),L.value===`pending`?(a(),w(c,{key:0},[x(U,{variant:`muted-textonly`,size:`sm`,class:`justify-start`,onClick:t[3]||=e=>toggleSort(`inviteDate`)},{default:p(()=>[T(k(e.$t(`workspacePanel.members.columns.inviteDate`))+` `,1),t[6]||=y(`i`,{class:`icon-[lucide--chevrons-up-down] size-4`},null,-1)]),_:1}),x(U,{variant:`muted-textonly`,size:`sm`,class:`justify-start`,onClick:t[4]||=e=>toggleSort(`expiryDate`)},{default:p(()=>[T(k(e.$t(`workspacePanel.members.columns.expiryDate`))+` `,1),t[7]||=y(`i`,{class:`icon-[lucide--chevrons-up-down] size-4`},null,-1)]),_:1}),t[8]||=y(`div`,null,null,-1)],64)):(a(),w(c,{key:1},[x(U,{variant:`muted-textonly`,size:`sm`,class:`justify-end`,onClick:t[5]||=e=>toggleSort(`joinDate`)},{default:p(()=>[T(k(e.$t(`workspacePanel.members.columns.joinDate`))+` `,1),t[9]||=y(`i`,{class:`icon-[lucide--chevrons-up-down] size-4`},null,-1)]),_:1}),b(j).canRemoveMembers?(a(),w(`div`,_e)):n(``,!0)],64))],2)):n(``,!0),y(`div`,ve,[L.value===`active`?(a(),w(c,{key:0},[b(O)?(a(),w(`div`,{key:0,class:D(b(R)(`grid w-full items-center rounded-lg p-2`,b(M).membersGridCols))},[y(`div`,ye,[x(Q,{class:`size-8`,"photo-url":b(o),"pt:icon:class":{"text-xl!":!b(o)}},null,8,[`photo-url`,`pt:icon:class`]),y(`div`,be,[y(`div`,xe,[y(`span`,Se,[T(k(b(u))+` `,1),y(`span`,Ce,` (`+k(e.$t(`g.you`))+`) `,1)]),b(M).showRoleBadge?(a(),w(`span`,we,k(e.$t(`workspaceSwitcher.roleOwner`)),1)):n(``,!0)]),y(`span`,Te,k(b(l)),1)])])],2)):(a(),w(c,{key:1},[(a(!0),w(c,null,h(G.value,(i,s)=>(a(),w(`div`,{key:i.id,class:D(b(R)(`grid w-full items-center rounded-lg p-2`,b(M).membersGridCols,s%2==1&&`bg-secondary-background/50`))},[y(`div`,Ee,[x(Q,{class:`size-8`,"photo-url":isCurrentUser(i)?b(o):void 0,"pt:icon:class":{"text-xl!":!isCurrentUser(i)||!b(o)}},null,8,[`photo-url`,`pt:icon:class`]),y(`div`,De,[y(`div`,Oe,[y(`span`,ke,[T(k(i.name)+` `,1),isCurrentUser(i)?(a(),w(`span`,Ae,` (`+k(e.$t(`g.you`))+`) `,1)):n(``,!0)]),b(M).showRoleBadge?(a(),w(`span`,je,k(getRoleBadgeLabel(i.role)),1)):n(``,!0)]),y(`span`,Me,k(i.email),1)])]),b(M).showDateColumn?(a(),w(`span`,Ne,k(formatDate(i.joinDate)),1)):n(``,!0),b(j).canRemoveMembers?(a(),w(`div`,Pe,[isCurrentUser(i)?n(``,!0):N((a(),f(U,{key:0,variant:`muted-textonly`,size:`icon`,"aria-label":e.$t(`g.moreOptions`),onClick:e=>showMemberMenu(e,i)},{default:p(()=>t[10]||=[y(`i`,{class:`pi pi-ellipsis-h`},null,-1)]),_:2},1032,[`aria-label`,`onClick`])),[[r,{value:e.$t(`g.moreOptions`),showDelay:300}]])])):n(``,!0)],2))),128)),x(b(d),{ref_key:`memberMenu`,ref:V,model:W.value,popup:!0},null,8,[`model`])],64))],64)):(a(),w(c,{key:1},[(a(!0),w(c,null,h(q.value,(n,i)=>(a(),w(`div`,{key:n.id,class:D(b(R)(`grid w-full items-center rounded-lg p-2`,b(M).pendingGridCols,i%2==1&&`bg-secondary-background/50`))},[y(`div`,Fe,[y(`div`,Ie,[y(`span`,Le,k(getInviteInitial(n.email)),1)]),y(`div`,Re,[y(`span`,ze,k(getInviteDisplayName(n.email)),1),y(`span`,Be,k(n.email),1)])]),y(`span`,Ve,k(formatDate(n.inviteDate)),1),y(`span`,He,k(formatDate(n.expiryDate)),1),y(`div`,Ue,[N((a(),f(U,{variant:`secondary`,size:`md`,"aria-label":e.$t(`workspacePanel.members.actions.copyLink`),onClick:e=>handleCopyInviteLink(n)},{default:p(()=>t[11]||=[y(`i`,{class:`icon-[lucide--link] size-4`},null,-1)]),_:2},1032,[`aria-label`,`onClick`])),[[r,{value:e.$t(`workspacePanel.members.actions.copyLink`),showDelay:300}]]),N((a(),f(U,{variant:`secondary`,size:`md`,"aria-label":e.$t(`workspacePanel.members.actions.revokeInvite`),onClick:e=>handleRevokeInvite(n)},{default:p(()=>t[12]||=[y(`i`,{class:`icon-[lucide--mail-x] size-4`},null,-1)]),_:2},1032,[`aria-label`,`onClick`])),[[r,{value:e.$t(`workspacePanel.members.actions.revokeInvite`),showDelay:300}]])])],2))),128)),q.value.length===0?(a(),w(`div`,We,k(e.$t(`workspacePanel.members.noInvites`)),1)):n(``,!0)],64))])])]),b(O)?(a(),w(`div`,Ge,[y(`p`,Ke,k(e.$t(`workspacePanel.members.personalWorkspaceMessage`)),1),y(`button`,{class:`underline bg-transparent border-none cursor-pointer`,onClick:handleCreateWorkspace},k(e.$t(`workspacePanel.members.createNewWorkspace`)),1)])):n(``,!0)])}}})})),$,Ye=t((()=>{Je(),Je(),$=qe})),Xe,Ze,Qe,$e,et,tt,nt=t((()=>{l(),L(),v(),E(),o(),i(),j(),M(),P(),q(),Ye(),V(),B(),se(),z(),oe(),X(),Z(),Xe={class:`flex h-full w-full flex-col`},Ze={class:`pb-8 flex items-center gap-4`},Qe={class:`text-3xl text-base-foreground`},$e={class:`flex w-full items-center`},et=[`onClick`],tt=O({__name:`WorkspacePanelContent`,props:{defaultTab:{default:`plan`}},setup(e){let{t}=F(),{showLeaveWorkspaceDialog:i,showDeleteWorkspaceDialog:o,showInviteMemberDialog:s,showEditWorkspaceDialog:l}=Y(),m=J(),{workspaceName:h,members:v,isInviteLimitReached:E,isWorkspaceSubscribed:O,isInPersonalWorkspace:j}=I(m),{fetchMembers:M,fetchPendingInvites:P}=m,{activeTab:L,setActiveTab:z,workspaceRole:B,permissions:V,uiConfig:W}=ae(),G=_(null);function handleLeaveWorkspace(){i()}function handleDeleteWorkspace(){o()}function handleEditWorkspace(){l()}let K=g(()=>W.value.workspaceMenuAction===`delete`&&O.value),q=g(()=>{if(!K.value)return null;let e=W.value.workspaceMenuDisabledTooltip;return e?t(e):null}),X=g(()=>E.value?t(`workspacePanel.inviteLimitReached`):null);function handleInviteMember(){E.value||s()}let Z=g(()=>{let e=[];W.value.showEditWorkspaceMenuItem&&e.push({label:t(`workspacePanel.menu.editWorkspace`),icon:`pi pi-pencil`,command:handleEditWorkspace});let n=W.value.workspaceMenuAction;return n===`delete`?e.push({label:t(`workspacePanel.menu.deleteWorkspace`),icon:`pi pi-trash`,class:K.value?`text-danger/50 cursor-not-allowed`:`text-danger`,disabled:K.value,command:K.value?void 0:handleDeleteWorkspace}):n===`leave`&&e.push({label:t(`workspacePanel.menu.leaveWorkspace`),icon:`pi pi-sign-out`,command:handleLeaveWorkspace}),e});return C(()=>{z(e.defaultTab),M(),P()}),(e,t)=>{let i=ee(`tooltip`);return a(),w(`div`,Xe,[y(`div`,Ze,[x(ne,{class:`size-12 !text-3xl`,"workspace-name":b(h)},null,8,[`workspace-name`]),y(`h1`,Qe,k(b(h)),1)]),x(b(S),{unstyled:``,value:b(L),"onUpdate:value":b(z)},{default:p(()=>[y(`div`,$e,[x(b(u),{unstyled:``,class:`flex w-full gap-2`},{default:p(()=>[x(b(r),{value:`plan`,class:D(b(R)(b(H)({variant:b(L)===`plan`?`secondary`:`textonly`,size:`md`}),b(L)===`plan`&&`text-base-foreground no-underline`))},{default:p(()=>[T(k(e.$t(`workspacePanel.tabs.planCredits`)),1)]),_:1},8,[`class`]),x(b(r),{value:`members`,class:D(b(R)(b(H)({variant:b(L)===`members`?`secondary`:`textonly`,size:`md`}),b(L)===`members`&&`text-base-foreground no-underline`,`ml-2`))},{default:p(()=>[T(k(e.$t(`workspacePanel.tabs.membersCount`,{count:b(j)?1:b(v).length})),1)]),_:1},8,[`class`])]),_:1}),b(V).canInviteMembers?N((a(),f(U,{key:0,variant:`secondary`,size:`lg`,disabled:b(E),class:D(b(E)&&`opacity-50 cursor-not-allowed`),"aria-label":e.$t(`workspacePanel.inviteMember`),onClick:handleInviteMember},{default:p(()=>[T(k(e.$t(`workspacePanel.invite`))+` `,1),t[1]||=y(`i`,{class:`pi pi-plus ml-1 text-sm`},null,-1)]),_:1},8,[`disabled`,`class`,`aria-label`])),[[i,X.value?{value:X.value,showDelay:0}:{value:e.$t(`workspacePanel.inviteMember`),showDelay:300}]]):n(``,!0),b(V).canAccessWorkspaceMenu?(a(),w(c,{key:1},[N((a(),f(U,{class:`ml-2`,variant:`secondary`,size:`lg`,"aria-label":e.$t(`g.moreOptions`),onClick:t[0]||=e=>G.value?.toggle(e)},{default:p(()=>t[2]||=[y(`i`,{class:`pi pi-ellipsis-h`},null,-1)]),_:1},8,[`aria-label`])),[[i,{value:e.$t(`g.moreOptions`),showDelay:300}]]),x(b(d),{ref_key:`menu`,ref:G,model:Z.value,popup:!0},{item:p(({item:e})=>[N((a(),w(`div`,{class:D([`flex items-center gap-2 px-3 py-2`,e.class,e.disabled?`pointer-events-auto`:`cursor-pointer`]),onClick:t=>e.command?.({originalEvent:t,item:e})},[y(`i`,{class:D(e.icon)},null,2),y(`span`,null,k(e.label),1)],10,et)),[[i,e.disabled&&q.value?{value:q.value,showDelay:0}:null]])]),_:1},8,[`model`])],64)):n(``,!0)]),x(b(te),{unstyled:``},{default:p(()=>[x(b(A),{value:`plan`},{default:p(()=>[x(ce)]),_:1}),x(b(A),{value:`members`},{default:p(()=>[(a(),f($,{key:b(B)}))]),_:1})]),_:1})]),_:1},8,[`value`,`onUpdate:value`])])}}})})),rt,it=t((()=>{nt(),nt(),rt=tt})),at,ot=t((()=>{l(),i(),it(),at=O({__name:`WorkspacePanel`,setup(e){return(e,t)=>(a(),f(b(A),{value:`Workspace`,class:`h-full`},{default:p(()=>[x(rt)]),_:1}))}})})),st;t((()=>{ot(),ot(),st=at}))();export{st as default};
//# sourceMappingURL=WorkspacePanel-PgDT2azd.js.map