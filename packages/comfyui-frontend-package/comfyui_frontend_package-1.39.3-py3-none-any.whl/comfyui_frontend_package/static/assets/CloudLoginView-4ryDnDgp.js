import{i as e,n as t}from"./rolldown-runtime-BKYq3fBv.js";import{$n as n,Cr as r,Dr as i,Gt as a,J as o,Kt as s,Nn as c,Qn as l,Rr as u,Ut as d,Wt as f,Xn as ee,Xr as p,Zn as m,_n as h,a as te,ai as g,an as ne,ar as _,er as v,i as re,ir as y,on as b,q as x,r as ie,s as ae,si as oe,sr as S,ui as C,vn as w}from"./vendor-primevue-Cg-HmKZY.js";import{cn as se,ln as ce,ot as T,sn as le,st as E}from"./vendor-other-CoxDvJ0a.js";import{in as ue,rn as de}from"./api-CJ30itpV.js";import{n as D,t as O}from"./Button-YQy7RkKq.js";import{Ao as fe,Ho as pe,T as me,Vo as he,ko as ge,w as _e}from"./dialogService-DvYmp2_F.js";import{n as ve,t as k}from"./_plugin-vue_export-helper-Ckv1EJQX.js";import{n as ye,t as be}from"./previousFullPath-p7j9JQSU.js";var A,j,M,N,P,F,I,L,R=t((()=>{c(),te(),ie(),ne(),h(),x(),a(),T(),D(),_e(),he(),A={class:`flex flex-col gap-2`},j={key:0,class:`text-red-500`},M={class:`flex flex-col gap-2`},N={class:`mb-2 flex items-center justify-between`},P={class:`text-base font-medium opacity-80`,for:`cloud-sign-in-password`},F={key:0,class:`text-red-500`},I=`cloud-sign-in-email`,L=S({__name:`CloudSignInForm`,props:{authError:{}},emits:[`submit`],setup(e,{emit:t}){let a=pe(),c=ee(()=>a.loading),{t:d}=E(),f=t,onSubmit=e=>{e.valid&&f(`submit`,e.values)};return(e,t)=>{let a=i(`router-link`);return r(),l(g(ae),{class:`flex flex-col gap-6`,resolver:g(re)(g(me)),onSubmit},{default:u(t=>[m(`div`,A,[m(`label`,{class:`mb-2 text-base font-medium opacity-80`,for:I},C(g(d)(`auth.login.emailLabel`)),1),_(g(b),{id:I,autocomplete:`email`,class:`h-10`,name:`email`,type:`text`,placeholder:g(d)(`auth.login.emailPlaceholder`),invalid:t.email?.invalid},null,8,[`placeholder`,`invalid`]),t.email?.invalid?(r(),v(`small`,j,C(t.email.error.message),1)):n(``,!0)]),m(`div`,M,[m(`div`,N,[m(`label`,P,C(g(d)(`auth.login.passwordLabel`)),1)]),_(g(o),{"input-id":`cloud-sign-in-password`,"pt:pc-input-text:root:autocomplete":`current-password`,name:`password`,feedback:!1,"toggle-mask":``,placeholder:g(d)(`auth.login.passwordPlaceholder`),class:oe([{"p-invalid":t.password?.invalid},`h-10`]),fluid:``},null,8,[`placeholder`,`class`]),t.password?.invalid?(r(),v(`small`,F,C(t.password.error.message),1)):n(``,!0),_(a,{to:{name:`cloud-forgot-password`},class:`text-sm font-medium text-muted no-underline`},{default:u(()=>[y(C(g(d)(`auth.login.forgotPassword`)),1)]),_:1})]),e.authError?(r(),l(g(w),{key:0,severity:`error`},{default:u(()=>[y(C(e.authError),1)]),_:1})):n(``,!0),c.value?(r(),l(g(s),{key:1,class:`h-8 w-8`})):(r(),l(O,{key:2,type:`submit`,class:`mt-4 h-10 font-medium text-white`,disabled:!t.valid},{default:u(()=>[y(C(g(d)(`auth.login.loginButton`)),1)]),_:2},1032,[`disabled`]))]),_:1},8,[`resolver`])}}})})),xe=t((()=>{})),z,Se=t((()=>{R(),R(),xe(),ve(),z=k(L,[[`__scopeId`,`data-v-52efce83`]])})),B,V,H,U,W,G,K,q,J,Y,X,Z,Q=t((()=>{c(),d(),h(),T(),le(),D(),ge(),Se(),ye(),de(),B={class:`flex h-full items-center justify-center p-8`},V={class:`max-w-screen p-2 lg:w-96`},H={class:`mt-6 mb-8 flex flex-col gap-4`},U={class:`my-0 text-xl leading-normal font-medium`},W={class:`my-0 text-base`},G={class:`text-muted`},K={class:`text-muted`},q={class:`flex flex-col gap-6`},J={class:`mt-5 text-sm text-gray-600`},Y={href:`https://www.comfy.org/terms-of-service`,target:`_blank`,class:`cursor-pointer text-blue-400 no-underline`},X={href:`https://www.comfy.org/privacy-policy`,target:`_blank`,class:`cursor-pointer text-blue-400 no-underline`},Z=S({__name:`CloudLoginView`,setup(e){let{t}=E(),i=ce(),a=se(),o=fe(),s=globalThis.isSecureContext,c=p(``),d=ue(),navigateToSignup=async()=>{await i.push({name:`cloud-signup`,query:a.query})},onSuccess=async()=>{d.add({severity:`success`,summary:`Login Completed`,life:2e3});let e=be(a.query);if(e){await i.replace(e);return}await i.push({name:`cloud-user-check`})},signInWithGoogle=async()=>{c.value=``,await o.signInWithGoogle()&&await onSuccess()},signInWithGithub=async()=>{c.value=``,await o.signInWithGithub()&&await onSuccess()},signInWithEmail=async e=>{c.value=``,await o.signInWithEmail(e.email,e.password)&&await onSuccess()};return(e,i)=>(r(),v(`div`,B,[m(`div`,V,[m(`div`,H,[m(`h1`,U,C(g(t)(`auth.login.title`)),1),m(`p`,W,[m(`span`,G,C(g(t)(`auth.login.newUser`)),1),m(`span`,{class:`ml-1 cursor-pointer text-blue-500`,onClick:navigateToSignup},C(g(t)(`auth.login.signUp`)),1)])]),g(s)?n(``,!0):(r(),l(g(w),{key:0,severity:`warn`,class:`mb-4`},{default:u(()=>[y(C(g(t)(`auth.login.insecureContextWarning`)),1)]),_:1})),_(z,{"auth-error":c.value,onSubmit:signInWithEmail},null,8,[`auth-error`]),_(g(f),{align:`center`,layout:`horizontal`,class:`my-8`},{default:u(()=>[m(`span`,K,C(g(t)(`auth.login.orContinueWith`)),1)]),_:1}),m(`div`,q,[_(O,{type:`button`,class:`h-10 bg-[#2d2e32]`,variant:`secondary`,onClick:signInWithGoogle},{default:u(()=>[i[0]||=m(`i`,{class:`pi pi-google mr-2`},null,-1),y(` `+C(g(t)(`auth.login.loginWithGoogle`)),1)]),_:1}),_(O,{type:`button`,class:`h-10 bg-[#2d2e32]`,variant:`secondary`,onClick:signInWithGithub},{default:u(()=>[i[1]||=m(`i`,{class:`pi pi-github mr-2`},null,-1),y(` `+C(g(t)(`auth.login.loginWithGithub`)),1)]),_:1})]),m(`p`,J,[y(C(g(t)(`auth.login.termsText`))+` `,1),m(`a`,Y,C(g(t)(`auth.login.termsLink`)),1),y(` `+C(g(t)(`auth.login.andText`))+` `,1),m(`a`,X,C(g(t)(`auth.login.privacyLink`)),1),i[2]||=y(`. `)])])]))}})})),$;t((()=>{Q(),Q(),$=Z}))();export{$ as default};
//# sourceMappingURL=CloudLoginView-4ryDnDgp.js.map