{"version":3,"file":"graphHasMissingNodes-CoyewBrF.js","names":[],"sources":["../../src/workbench/extensions/manager/utils/graphHasMissingNodes.ts"],"sourcesContent":["import { unref } from 'vue'\nimport type { MaybeRef } from 'vue'\n\nimport type {\n  LGraph,\n  LGraphNode,\n  Subgraph\n} from '@/lib/litegraph/src/litegraph'\nimport type { ComfyNodeDefImpl } from '@/stores/nodeDefStore'\nimport { collectAllNodes } from '@/utils/graphTraversalUtil'\n\nexport type NodeDefLookup = Record<string, ComfyNodeDefImpl | undefined>\n\nconst isNodeMissingDefinition = (\n  node: LGraphNode,\n  nodeDefsByName: NodeDefLookup\n) => {\n  const nodeName = node?.type\n  if (!nodeName) return false\n  return !nodeDefsByName[nodeName]\n}\n\nexport const collectMissingNodes = (\n  graph: LGraph | Subgraph | null | undefined,\n  nodeDefsByName: MaybeRef<NodeDefLookup>\n): LGraphNode[] => {\n  if (!graph) return []\n  const lookup = unref(nodeDefsByName)\n  return collectAllNodes(graph, (node) => isNodeMissingDefinition(node, lookup))\n}\n\nexport const graphHasMissingNodes = (\n  graph: LGraph | Subgraph | null | undefined,\n  nodeDefsByName: MaybeRef<NodeDefLookup>\n) => {\n  return collectMissingNodes(graph, nodeDefsByName).length > 0\n}\n"],"mappings":"qPAAsB,IASU,CAI1B,yBACJ,EACA,IACG,CACH,IAAM,EAAW,GAAM,KAEvB,OADK,EACE,CAAC,EAAe,GADD,IAIX,qBACX,EACA,IACiB,CACjB,GAAI,CAAC,EAAO,MAAO,EAAE,CACrB,IAAM,EAAS,EAAM,EAAe,CACpC,OAAO,EAAgB,EAAQ,GAAS,wBAAwB,EAAM,EAAO,CAAC,EAGnE,sBACX,EACA,IAEO,oBAAoB,EAAO,EAAe,CAAC,OAAS"}