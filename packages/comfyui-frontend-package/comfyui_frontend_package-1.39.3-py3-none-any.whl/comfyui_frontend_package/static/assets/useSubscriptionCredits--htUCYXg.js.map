{"version":3,"file":"useSubscriptionCredits--htUCYXg.js","names":[],"sources":["../../src/platform/cloud/subscription/composables/useSubscriptionCredits.ts"],"sourcesContent":["import { computed } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport { formatCreditsFromCents } from '@/base/credits/comfyCredits'\nimport { useFirebaseAuthStore } from '@/stores/firebaseAuthStore'\n\n/**\n * Composable for handling subscription credit calculations and formatting\n */\nexport function useSubscriptionCredits() {\n  const authStore = useFirebaseAuthStore()\n  const { locale } = useI18n()\n\n  const formatBalance = (maybeCents?: number) => {\n    // Backend returns cents despite the *_micros naming convention.\n    const cents = maybeCents ?? 0\n    const amount = formatCreditsFromCents({\n      cents,\n      locale: locale.value,\n      numberOptions: {\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 0\n      }\n    })\n    return amount\n  }\n\n  const totalCredits = computed(() =>\n    formatBalance(authStore.balance?.amount_micros)\n  )\n\n  const monthlyBonusCredits = computed(() =>\n    formatBalance(authStore.balance?.cloud_credit_balance_micros)\n  )\n\n  const prepaidCredits = computed(() =>\n    formatBalance(authStore.balance?.prepaid_balance_micros)\n  )\n\n  const isLoadingBalance = computed(() => authStore.isFetchingBalance)\n\n  return {\n    totalCredits,\n    monthlyBonusCredits,\n    prepaidCredits,\n    isLoadingBalance\n  }\n}\n"],"mappings":"sPASA,SAAgB,wBAAyB,CACvC,IAAM,EAAY,GAAsB,CAClC,CAAE,UAAW,GAAS,CAEtB,cAAiB,GAGN,EAAuB,CACpC,MAFY,GAAc,EAG1B,OAAQ,EAAO,MACf,cAAe,CACb,sBAAuB,EACvB,sBAAuB,EACxB,CACF,CAAC,CAkBJ,MAAO,CACL,aAfmB,MACnB,cAAc,EAAU,SAAS,cAAc,CAChD,CAcC,oBAZ0B,MAC1B,cAAc,EAAU,SAAS,4BAA4B,CAC9D,CAWC,eATqB,MACrB,cAAc,EAAU,SAAS,uBAAuB,CACzD,CAQC,iBANuB,MAAe,EAAU,kBAAkB,CAOnE,kBA9CsB,IACD,IAEe,IACF"}