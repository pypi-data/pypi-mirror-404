{"version":3,"file":"useSubscriptionActions-C7hMido6.js","names":[],"sources":["../../src/platform/cloud/subscription/composables/useSubscriptionActions.ts"],"sourcesContent":["import { onMounted, ref } from 'vue'\n\nimport { useFirebaseAuthActions } from '@/composables/auth/useFirebaseAuthActions'\nimport { useSubscription } from '@/platform/cloud/subscription/composables/useSubscription'\nimport { isCloud } from '@/platform/distribution/types'\nimport { useTelemetry } from '@/platform/telemetry'\nimport { useDialogService } from '@/services/dialogService'\nimport { useCommandStore } from '@/stores/commandStore'\n\n/**\n * Composable for handling subscription panel actions and loading states\n */\nexport function useSubscriptionActions() {\n  const dialogService = useDialogService()\n  const authActions = useFirebaseAuthActions()\n  const commandStore = useCommandStore()\n  const telemetry = useTelemetry()\n  const { fetchStatus } = useSubscription()\n\n  const isLoadingSupport = ref(false)\n\n  onMounted(() => {\n    void handleRefresh()\n  })\n\n  const handleAddApiCredits = () => {\n    dialogService.showTopUpCreditsDialog()\n  }\n\n  const handleMessageSupport = async () => {\n    try {\n      isLoadingSupport.value = true\n      if (isCloud) {\n        telemetry?.trackHelpResourceClicked({\n          resource_type: 'help_feedback',\n          is_external: true,\n          source: 'subscription'\n        })\n      }\n      await commandStore.execute('Comfy.ContactSupport')\n    } catch (error) {\n      console.error('[useSubscriptionActions] Error contacting support:', error)\n    } finally {\n      isLoadingSupport.value = false\n    }\n  }\n\n  const handleRefresh = async () => {\n    try {\n      await Promise.all([authActions.fetchBalance(), fetchStatus()])\n    } catch (error) {\n      console.error('[useSubscriptionActions] Error refreshing data:', error)\n    }\n  }\n\n  const handleLearnMoreClick = () => {\n    window.open('https://docs.comfy.org/get_started/cloud', '_blank')\n  }\n\n  return {\n    isLoadingSupport,\n    handleAddApiCredits,\n    handleMessageSupport,\n    handleRefresh,\n    handleLearnMoreClick\n  }\n}\n"],"mappings":"mSAYA,SAAgB,wBAAyB,CACvC,IAAM,EAAgB,GAAkB,CAClC,EAAc,GAAwB,CACtC,EAAe,GAAiB,CAChC,EAAY,GAAc,CAC1B,CAAE,eAAgB,GAAiB,CAEnC,EAAmB,EAAI,GAAM,CAEnC,MAAgB,CACT,eAAe,EACpB,CAEF,IAAM,wBAA4B,CAChC,EAAc,wBAAwB,EAGlC,qBAAuB,SAAY,CACvC,GAAI,CACF,EAAiB,MAAQ,GACrB,GACF,GAAW,yBAAyB,CAClC,cAAe,gBACf,YAAa,GACb,OAAQ,eACT,CAAC,CAEJ,MAAM,EAAa,QAAQ,uBAAuB,OAC3C,EAAO,CACd,QAAQ,MAAM,qDAAsD,EAAM,QAClE,CACR,EAAiB,MAAQ,KAIvB,cAAgB,SAAY,CAChC,GAAI,CACF,MAAM,QAAQ,IAAI,CAAC,EAAY,cAAc,CAAE,GAAa,CAAC,CAAC,OACvD,EAAO,CACd,QAAQ,MAAM,kDAAmD,EAAM,GAIrE,yBAA6B,CACjC,OAAO,KAAK,2CAA4C,SAAS,EAGnE,MAAO,CACL,mBACA,oBACA,qBACA,cACA,qBACD,kBAjE4B,IAEQ,IACP,IACR,IACK,IACI,IACD"}