const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./nodeTemplates-DUDiWGdC.js","./dialogService-DvYmp2_F.js","./_plugin-vue_export-helper-Ckv1EJQX.js","./rolldown-runtime-BKYq3fBv.js","./vendor-primevue-Cg-HmKZY.js","./vendor-other-CoxDvJ0a.js","./vendor-three-J548ptDO.js","./vendor-tiptap-B3MquJdf.js","./vendor-vue-J4jYbuLn.js","./vendor-other-CaaUC6Qe.css","./vendor-reka-ui-C5bN2j5U.js","./vendor-xterm-CLifWSRJ.js","./vendor-xterm-kHJ-D0s7.css","./PanelTemplate-hGipIJT8.js","./api-CJ30itpV.js","./i18n-gOSvTADh.js","./widget-D00AxrDc.js","./colorUtil-Do_0yTBp.js","./tailwindUtil-F1kyO01s.js","./Button-YQy7RkKq.js","./Slider-DMqJVvz2.js","./useErrorHandling-tavTBerX.js","./remoteConfig-CyTTjg6h.js","./userStore-Dm97A6Ww.js","./widgetTypes-B2p76Yu_.js","./markdownRendererUtil-DmdQK-pX.js","./dialogService-DwOUltBv.css","./groupNode-ldGk52Ai.js","./groupNode-CZraG87T.css","./cloudRemoteConfig-lGXiftQH.js","./refreshRemoteConfig-WEXOjGVw.js","./cloudBadges-h3vcMzMJ.js","./cloudSessionCookie-BX0BTRc5.js","./cloudSubscription-BMDjBcJT.js","./cloudFeedbackTopbarButton-mkpE3Vva.js","./config-CvQxtlWe.js","./nightlyBadges-CYZhoIXH.js"])))=>i.map(i=>d[i]);
import{i as e,n as t,o as n}from"./rolldown-runtime-BKYq3fBv.js";import{Nn as r,Zr as i,bn as a,gr as o,yn as s}from"./vendor-primevue-Cg-HmKZY.js";import{Ct as c,i as l,pt as u,r as d,wt as f}from"./vendor-other-CoxDvJ0a.js";import{A as p,M as ee,O as te,Vt as ne,an as re,at as ie,cn as ae,dn as oe,i as m,in as h,k as g,ln as se,on as _,ot as ce,r as v,rn as y,un as le,v as b,x,y as S}from"./api-CJ30itpV.js";import{r as C,s as w}from"./i18n-gOSvTADh.js";import{D as ue,N as de,P as fe,x as pe,y as me}from"./PanelTemplate-hGipIJT8.js";import{$o as T,$r as E,Ei as D,Fi as he,Ga as O,Go as k,Gt as A,Ht as ge,Ii as _e,Jr as ve,Ka as ye,Ko as j,Kt as be,Li as xe,Mi as Se,Ni as Ce,Pi as we,Q as Te,Qo as Ee,Qr as De,Ut as Oe,Wt as ke,X as Ae,Xa as je,Yr as Me,Za as Ne,ai as Pe,at as M,bi as N,da as Fe,ei as Ie,fo as Le,go as Re,hs as ze,ii as P,it as F,ki as I,n as L,ni as R,po as z,qa as Be,qo as B,qt as Ve,ri as He,rt as V,t as Ue,ti as We,ua as Ge,vo as Ke,xi as H,ys as qe}from"./dialogService-DvYmp2_F.js";import{n as Je,t as U}from"./Load3D-th-Bn6Y1.js";import{a as Ye,c as Xe,i as Ze,o as Qe,r as $e,s as et}from"./groupNode-ldGk52Ai.js";import{i as tt,n as W,r as nt}from"./audioUtils-D6gqopTc.js";import{n as G,t as rt}from"./audioService-BaXZa7El.js";var K,it=t((()=>{M(),Be(),K=class ClipspaceDialog extends ye{static items=[];static instance=null;static registerButton(e,t,n){let r=O(`button`,{type:`button`,textContent:e,contextPredicate:t,onclick:n});ClipspaceDialog.items.push(r)}static invalidatePreview(){if(V.clipspace&&V.clipspace.imgs&&V.clipspace.imgs.length>0){let e=document.getElementById(`clipspace_preview`);e&&(e.src=V.clipspace.imgs[V.clipspace.selectedIndex].src,e.style.maxHeight=`100%`,e.style.maxWidth=`100%`)}}static invalidate(){if(ClipspaceDialog.instance){let e=ClipspaceDialog.instance,t=e.createImgSettings(),n=O(`div.comfy-modal-content`,[...t?[t]:[],...e.createButtons()]);e.element?(e.element.firstChild&&e.element.removeChild(e.element.firstChild),e.element.appendChild(n)):e.element=O(`div.comfy-modal`,{parent:document.body},[n]),e.element.children[0].children.length<=1&&e.element.children[0].appendChild(O(`p`,{},[`Unable to find the features to edit content of a format stored in the current Clipspace.`])),ClipspaceDialog.invalidatePreview()}}constructor(){super()}createButtons(){let e=[];for(let t in ClipspaceDialog.items){let n=ClipspaceDialog.items[t];(!n.contextPredicate||n.contextPredicate())&&e.push(ClipspaceDialog.items[t])}return e.push(O(`button`,{type:`button`,textContent:`Close`,onclick:()=>{this.close()}})),e}createImgSettings(){if(V.clipspace?.imgs){let e=[],t=V.clipspace.imgs;for(let n=0;n<t.length;n++)e.push(O(`option`,{value:n},[`${n}`]));let n=O(`select`,{id:`clipspace_img_selector`,onchange:e=>{e.target&&V.clipspace&&(V.clipspace.selectedIndex=e.target.selectedIndex,ClipspaceDialog.invalidatePreview())}},e),r=O(`tr`,{},[O(`td`,{},[O(`font`,{color:`white`},[`Select Image`])]),O(`td`,{},[n])]),i=O(`select`,{id:`clipspace_img_paste_mode`,onchange:e=>{e.target&&V.clipspace&&(V.clipspace.img_paste_mode=e.target.value)}},[O(`option`,{value:`selected`},`selected`),O(`option`,{value:`all`},`all`)]);return i.value=V.clipspace.img_paste_mode,O(`table`,{},[r,O(`tr`,{},[O(`td`,{},[O(`font`,{color:`white`},[`Paste Mode`])]),O(`td`,{},[i])]),O(`tr`,{},[O(`td`,{align:`center`,width:`100px`,height:`100px`,colSpan:`2`},[O(`img`,{id:`clipspace_preview`,ondragstart:()=>!1},[])])])])}else return null}createImgPreview(){return V.clipspace?.imgs?O(`img`,{id:`clipspace_preview`,ondragstart:()=>!1}):null}show(){ClipspaceDialog.invalidate(),this.element.style.display=`block`}},F.registerExtension({name:`Comfy.Clipspace`,init(){F.openClipspace=function(){K.instance||(K.instance=new K,V.clipspace_invalidate_handler=K.invalidate),V.clipspace?K.instance.show():F.ui.dialog.show(`Clipspace is Empty!`)}}}),window.comfyAPI=window.comfyAPI||{},window.comfyAPI.clipspace=window.comfyAPI.clipspace||{},window.comfyAPI.clipspace.ClipspaceDialog=K})),at=t((()=>{S(),M(),F.registerExtension({name:`Comfy.ContextMenuFilter`,init(){let e=b.ContextMenu;b.ContextMenu=function(t,n){let r=new e(t,n);if(n?.className===`dark`&&t?.length>4){let e=document.createElement(`input`);e.classList.add(`comfy-context-menu-filter`),e.placeholder=`Filter list`,r.root.prepend(e);let i=Array.from(r.root.querySelectorAll(`.litemenu-entry`)),a=[...i],o=a.length;requestAnimationFrame(()=>{let s=x.active_canvas.current_node?.widgets?.filter(e=>ee(e)&&e.options.values?.length===t.length).find(e=>e.options.values?.every((e,n)=>e===t[n]))?.value,c=s?t.findIndex(e=>e===s):0;c<0&&(c=0);let l=a[c];updateSelected();function updateSelected(){l?.style.setProperty(`background-color`,``),l?.style.setProperty(`color`,``),l=a[c],l?.style.setProperty(`background-color`,`#ccc`,`important`),l?.style.setProperty(`color`,`#000`,`important`)}let positionList=()=>{if(r.root.getBoundingClientRect().top<0){let e=1-r.root.getBoundingClientRect().height/r.root.clientHeight,t=r.root.clientHeight*e/2;r.root.style.top=-t+`px`}};e.addEventListener(`keydown`,e=>{switch(e.key){case`ArrowUp`:e.preventDefault(),c===0?c=o-1:c--,updateSelected();break;case`ArrowRight`:e.preventDefault(),c=o-1,updateSelected();break;case`ArrowDown`:e.preventDefault(),c===o-1?c=0:c++,updateSelected();break;case`ArrowLeft`:e.preventDefault(),c=0,updateSelected();break;case`Enter`:l?.click();break;case`Escape`:r.close();break}}),e.addEventListener(`input`,()=>{let t=e.value.toLocaleLowerCase();if(a=i.filter(e=>{let n=!t||e.textContent?.toLocaleLowerCase().includes(t);return e.style.display=n?`block`:`none`,n}),c=0,a.includes(l)&&(c=a.findIndex(e=>e===l)),o=a.length,updateSelected(),n.event){let e=n.event.clientY-10,t=document.body.getBoundingClientRect(),i=r.root.getBoundingClientRect();t.height&&e>t.height-i.height-10&&(e=Math.max(0,t.height-i.height-10)),r.root.style.top=e+`px`,positionList()}}),requestAnimationFrame(()=>{e.focus(),positionList()})})}return r},b.ContextMenu.prototype=e.prototype}})}));function applyToGraph(e=[]){if(!this.outputs[0].links?.length||!this.graph)return;let t=[...this.outputs[0].links.map(e=>this.graph.links[e]),...e],n=this.widgets?.[0].value;for(let e of t){let t=this.graph?.getNodeById(e.target_id),r=t?.inputs[e.target_slot];if(!r){console.warn(`Unable to resolve node or input for link`,e);continue}let i=r.widget?.name;if(!i){console.warn(`Invalid widget or widget name`,r.widget);continue}let a=t.widgets?.find(e=>e.name===i);if(!a){console.warn(`Unable to find widget "${i}" on node [${t.id}]`);continue}a.value=n,a.callback?.(a.value,F.canvas,t,F.canvas.graph_mouse,{})}}function onCustomComboCreated(){this.applyToGraph=applyToGraph;let e=this.widgets[0],t=i([]);e.options.values=t;let updateCombo=()=>{t.splice(0,t.length,...this.widgets.filter(e=>e.name.startsWith(`option`)&&e.value).map(e=>`${e.value}`)),!F.configuringGraph&&(t.includes(`${e.value}`)||(e.value=t[0]??``,e.callback?.(e.value)))};e.callback=T(e.callback,()=>this.applyToGraph());function addOption(e){if(!e.widgets)return;let t=e.widgets.length-1;e.addWidget(`string`,`option${t}`,``,()=>{});let n=e.widgets.at(-1);if(!n)return;let r=``;Object.defineProperty(n,`value`,{get(){return r},set(t){if(r=t,updateCombo(),!e.widgets)return;let n=e.widgets.at(-1);if(n===this){t&&addOption(e);return}t||e.widgets.at(-2)!==this||n?.value||(e.widgets.pop(),e.computeSize(e.size),this.callback(t))}})}let n=this.widgets;n.push({name:`index`,type:`hidden`,get value(){return n.slice(2).findIndex(t=>t.value===e.value)},set value(e){},draw:()=>void 0,computeSize:()=>[0,-4],options:{hidden:!0},y:0}),addOption(this)}function onCustomIntCreated(){let e=this.widgets?.[0];e&&(Object.defineProperty(e.options,`min`,{get:()=>this.properties.min??-(2**63),set:t=>{this.properties.min=t,e.callback?.(e.value)}}),Object.defineProperty(e.options,`max`,{get:()=>this.properties.max??2**63,set:t=>{this.properties.max=t,e.callback?.(e.value)}}),Object.defineProperty(e.options,`step2`,{get:()=>this.properties.step??1,set:t=>{this.properties.step=t,e.callback?.(e.value)}}))}function onCustomFloatCreated(){let e=this.widgets?.[0];e&&(Object.defineProperty(e.options,`min`,{get:()=>this.properties.min??-1/0,set:t=>{this.properties.min=t,e.callback?.(e.value)}}),Object.defineProperty(e.options,`max`,{get:()=>this.properties.max??1/0,set:t=>{this.properties.max=t,e.callback?.(e.value)}}),Object.defineProperty(e.options,`precision`,{get:()=>this.properties.precision??1,set:t=>{this.properties.precision=t,e.callback?.(e.value)}}),Object.defineProperty(e.options,`step2`,{get:()=>{if(this.properties.step)return this.properties.step;let{precision:e}=this.properties;return typeof e==`number`?5*10**-e:1},set:e=>this.properties.step=e}),Object.defineProperty(e.options,`round`,{get:()=>{if(this.properties.round)return this.properties.round;let{precision:e}=this.properties;return typeof e==`number`?10**-e:.1},set:t=>{this.properties.round=t,e.callback?.(e.value)}}))}var ot=t((()=>{r(),Ee(),p(),S(),M(),F.registerExtension({name:`Comfy.CustomWidgets`,beforeRegisterNodeDef(e,t){t?.name===`CustomCombo`?e.prototype.onNodeCreated=T(e.prototype.onNodeCreated,onCustomComboCreated):t?.name===`PrimitiveInt`?e.prototype.onNodeCreated=T(e.prototype.onNodeCreated,onCustomIntCreated):t?.name===`PrimitiveFloat`&&(e.prototype.onNodeCreated=T(e.prototype.onNodeCreated,onCustomFloatCreated))}})})),st=t((()=>{N(),me(),H().registerExtension({name:`Comfy.DynamicPrompts`,nodeCreated(e){if(e.widgets){let t=e.widgets.filter(e=>e.dynamicPrompts);for(let e of t)e.serializeValue=(t,n)=>{if(typeof e.value!=`string`)return e.value;let r=ue(e.value);return t?.widgets_values&&(t.widgets_values[n]=r),r}}}})})),ct=t((()=>{M(),F.registerExtension({name:`Comfy.EditAttention`,init(){let e=F.ui.settings.addSetting({id:`Comfy.EditAttention.Delta`,category:[`Comfy`,`EditTokenWeight`,`Delta`],name:`Ctrl+up/down precision`,type:`slider`,attrs:{min:.01,max:.5,step:.01},defaultValue:.05});function incrementWeight(e,t){let n=parseFloat(e);if(isNaN(n))return e;let r=n+t;return String(Number(r.toFixed(10)))}function findNearestEnclosure(e,t){let n=t,r=t,i=0,a=0;for(;n>=0&&(n--,!(e[n]===`(`&&i===a));)e[n]===`(`&&i++,e[n]===`)`&&a++;if(n<0)return null;for(i=0,a=0;r<e.length&&!(e[r]===`)`&&i===a);)e[r]===`(`&&i++,e[r]===`)`&&a++,r++;return r===e.length?null:{start:n+1,end:r}}function addWeightToParentheses(e){let t=e.match(/^\((.*)\)$/),n=e.match(/:([+-]?(\d*\.)?\d+([eE][+-]?\d+)?)/);return t&&!n?`(${t[1]}:1.0)`:e}function editAttention(t){let n=t.composedPath()[0],r=parseFloat(e.value);if(n.tagName!==`TEXTAREA`||!(t.key===`ArrowUp`||t.key===`ArrowDown`)||!t.ctrlKey&&!t.metaKey)return;t.preventDefault();let i=n.selectionStart,a=n.selectionEnd,o=n.value.substring(i,a);if(!o){let e=findNearestEnclosure(n.value,i);if(e)i=e.start,a=e.end,o=n.value.substring(i,a);else{let e=` .,\\/!?%^*;:{}=-_\`~()\r
	`;for(;!e.includes(n.value[i-1])&&i>0;)i--;for(;!e.includes(n.value[a])&&a<n.value.length;)a++;if(o=n.value.substring(i,a),!o)return}}o[o.length-1]===` `&&(o=o.substring(0,o.length-1),--a),n.value[i-1]===`(`&&n.value[a]===`)`&&(--i,a+=1,o=n.value.substring(i,a)),(o[0]!==`(`||o[o.length-1]!==`)`)&&(o=`(${o})`),o=addWeightToParentheses(o);let s=t.key===`ArrowUp`?r:-r,c=o.replace(/\((.*):([+-]?\d+(?:\.\d+)?)\)/,(e,t,n)=>(n=incrementWeight(n,s),n==1?t:`(${t}:${n})`));n.setSelectionRange(i,a),document.execCommand(`insertText`,!1,c),n.setSelectionRange(i,i+c.length)}window.addEventListener(`keydown`,editAttention)}})})),lt,ut=t((()=>{lt={settingId:`Comfy-Desktop.UV.PythonInstallMirror`,mirror:`https://github.com/astral-sh/python-build-standalone/releases/download`,fallbackMirror:`https://python-standalone.org/mirror/astral-sh/python-build-standalone`,validationPathSuffix:`/20250115/cpython-3.10.16+20250115-aarch64-apple-darwin-debug-full.tar.zst.sha256`}})),checkMirrorReachable,dt=t((()=>{le(),me(),checkMirrorReachable=async e=>pe(e)&&await se().NetWork.canAccessUrl(e)})),q,ft=t((()=>{q=n(u(),1),de(),ut(),C(),y(),Ae(),M(),Ue(),dt(),le(),(async()=>{if(!oe())return;let e=se(),t=await e.getElectronVersion(),n=Te(),r=h(),{staticUrls:i,buildDocsUrl:a}=fe(),onChangeRestartApp=(t,n)=>{n!==void 0&&t!==n&&e.restartApp(`Restart ComfyUI to apply changes.`,1500)};F.registerExtension({name:`Comfy.ElectronAdapter`,settings:[{id:`Comfy-Desktop.AutoUpdate`,category:[`Comfy-Desktop`,`General`,`AutoUpdate`],name:`Automatically check for updates`,type:`boolean`,defaultValue:!0,onChange:onChangeRestartApp},{id:`Comfy-Desktop.SendStatistics`,category:[`Comfy-Desktop`,`General`,`Send Statistics`],name:`Send anonymous usage metrics`,type:`boolean`,defaultValue:!0,onChange:onChangeRestartApp},{id:`Comfy-Desktop.WindowStyle`,category:[`Comfy-Desktop`,`General`,`Window Style`],name:`Window Style`,tooltip:`Custom: Replace the system title bar with ComfyUI's Top menu`,type:`combo`,experimental:!0,defaultValue:`default`,options:[`default`,`custom`],onChange:(t,n)=>{n&&e.Config.setWindowStyle(t)}},{id:`Comfy-Desktop.UV.PythonInstallMirror`,name:`Python Install Mirror`,tooltip:`Managed Python installations are downloaded from the Astral python-build-standalone project. This variable can be set to a mirror URL to use a different source for Python installations. The provided URL will replace https://github.com/astral-sh/python-build-standalone/releases/download in, e.g., https://github.com/astral-sh/python-build-standalone/releases/download/20240713/cpython-3.12.4%2B20240713-aarch64-apple-darwin-install_only.tar.gz. Distributions can be read from a local directory by using the file:// URL scheme.`,type:`url`,defaultValue:``,attrs:{validateUrlFn(e){return checkMirrorReachable(e+lt.validationPathSuffix)}}},{id:`Comfy-Desktop.UV.PypiInstallMirror`,name:`Pypi Install Mirror`,tooltip:`Default pip install mirror`,type:`url`,defaultValue:``,attrs:{validateUrlFn:checkMirrorReachable}},{id:`Comfy-Desktop.UV.TorchInstallMirror`,name:`Torch Install Mirror`,tooltip:`Pip install mirror for pytorch`,type:`url`,defaultValue:``,attrs:{validateUrlFn:checkMirrorReachable}}],commands:[{id:`Comfy-Desktop.Folders.OpenLogsFolder`,label:`Open Logs Folder`,icon:`pi pi-folder-open`,function(){e.openLogsFolder()}},{id:`Comfy-Desktop.Folders.OpenModelsFolder`,label:`Open Models Folder`,icon:`pi pi-folder-open`,function(){e.openModelsFolder()}},{id:`Comfy-Desktop.Folders.OpenOutputsFolder`,label:`Open Outputs Folder`,icon:`pi pi-folder-open`,function(){e.openOutputsFolder()}},{id:`Comfy-Desktop.Folders.OpenInputsFolder`,label:`Open Inputs Folder`,icon:`pi pi-folder-open`,function(){e.openInputsFolder()}},{id:`Comfy-Desktop.Folders.OpenCustomNodesFolder`,label:`Open Custom Nodes Folder`,icon:`pi pi-folder-open`,function(){e.openCustomNodesFolder()}},{id:`Comfy-Desktop.Folders.OpenModelConfig`,label:`Open extra_model_paths.yaml`,icon:`pi pi-file`,function(){e.openModelConfig()}},{id:`Comfy-Desktop.OpenDevTools`,label:`Open DevTools`,icon:`pi pi-code`,function(){e.openDevTools()}},{id:`Comfy-Desktop.OpenUserGuide`,label:`Desktop User Guide`,icon:`pi pi-book`,function(){window.open(a(`/installation/desktop`,{includeLocale:!0,platform:!0}),`_blank`)}},{id:`Comfy-Desktop.CheckForUpdates`,label:`Check for Updates`,icon:`pi pi-sync`,async function(){try{let t=await e.checkForUpdates({disableUpdateReadyAction:!0});if(!t.isUpdateAvailable){r.add({severity:`info`,summary:w(`desktopUpdate.noUpdateFound`),life:5e3});return}if(await L().confirm({title:w(`desktopUpdate.updateFoundTitle`,{version:t.version}),message:w(`desktopUpdate.updateAvailableMessage`),type:`default`}))try{e.restartAndInstall()}catch(e){q.default.error(`Error installing update:`,e),r.add({severity:`error`,summary:w(`g.error`),detail:w(`desktopUpdate.errorInstallingUpdate`),life:1e4})}}catch(e){q.default.error(`Error checking for updates:`,e),r.add({severity:`error`,summary:w(`g.error`),detail:w(`desktopUpdate.errorCheckingUpdate`),life:1e4})}}},{id:`Comfy-Desktop.Reinstall`,label:`Reinstall`,icon:`pi pi-refresh`,async function(){await L().confirm({message:w(`desktopMenu.confirmReinstall`),title:w(`desktopMenu.reinstall`),type:`reinstall`})&&e.reinstall()}},{id:`Comfy-Desktop.Restart`,label:`Restart`,icon:`pi pi-refresh`,function(){e.restartApp()}},{id:`Comfy-Desktop.Quit`,label:`Quit`,icon:`pi pi-sign-out`,async function(){n.modifiedWorkflows.length>0&&!await L().confirm({message:w(`desktopMenu.confirmQuit`),title:w(`desktopMenu.quit`),type:`default`})||e.quit()}}],menuCommands:[{path:[`Help`],commands:[`Comfy-Desktop.OpenUserGuide`]},{path:[`Help`],commands:[`Comfy-Desktop.OpenDevTools`]},{path:[`Help`,`Open Folder`],commands:[`Comfy-Desktop.Folders.OpenLogsFolder`,`Comfy-Desktop.Folders.OpenModelsFolder`,`Comfy-Desktop.Folders.OpenOutputsFolder`,`Comfy-Desktop.Folders.OpenInputsFolder`,`Comfy-Desktop.Folders.OpenCustomNodesFolder`,`Comfy-Desktop.Folders.OpenModelConfig`]},{path:[`Help`],commands:[`Comfy-Desktop.CheckForUpdates`,`Comfy-Desktop.Reinstall`]}],keybindings:[{commandId:`Workspace.CloseWorkflow`,combo:{key:`w`,ctrl:!0}}],aboutPageBadges:[{label:`ComfyUI_desktop v`+t,url:i.githubElectron,icon:`pi pi-github`}]})})()}));function setNodeMode(e,t){e.mode=t,e.graph?.change()}function addNodesToGroup(e,t){let n=z().get(`Comfy.GroupSelectedNodes.Padding`);e.resizeTo([...e.children,...t],n)}var pt=t((()=>{S(),Le(),M(),F.registerExtension({name:`Comfy.GroupOptions`,getCanvasMenuItems(e){let t=[],n=e.graph.getGroupOnPos(e.graph_mouse[0],e.graph_mouse[1]);if(!n)return e.selectedItems.size>0&&t.push({content:`Add Group For Selected Nodes`,callback:()=>{let t=new te;addNodesToGroup(t,e.selectedItems),e.graph.add(t),e.graph.change(),t.recomputeInsideNodes()}}),t;n.recomputeInsideNodes();let r=n.nodes;if(t.push({content:`Add Selected Nodes To Group`,disabled:!e.selectedItems?.size,callback:()=>{addNodesToGroup(n,e.selectedItems),e.graph.change()}}),r.length===0)return t;t.push(null);let i=!0;for(let e=1;e<r.length;e++)if(r[e].mode!==r[0].mode){i=!1;break}if(t.push({content:`Fit Group To Nodes`,callback:()=>{n.recomputeInsideNodes();let t=z().get(`Comfy.GroupSelectedNodes.Padding`);n.resizeTo(n.children,t),e.graph.change()}}),t.push({content:`Select Nodes`,callback:()=>{e.selectNodes(r),e.graph.change(),e.canvas.focus()}}),i)switch(r[0].mode){case 0:t.push({content:`Set Group Nodes to Never`,callback:()=>{for(let e of r)setNodeMode(e,2)}}),t.push({content:`Bypass Group Nodes`,callback:()=>{for(let e of r)setNodeMode(e,4)}});break;case 2:t.push({content:`Set Group Nodes to Always`,callback:()=>{for(let e of r)setNodeMode(e,0)}}),t.push({content:`Bypass Group Nodes`,callback:()=>{for(let e of r)setNodeMode(e,4)}});break;case 4:t.push({content:`Set Group Nodes to Always`,callback:()=>{for(let e of r)setNodeMode(e,0)}}),t.push({content:`Set Group Nodes to Never`,callback:()=>{for(let e of r)setNodeMode(e,2)}});break;default:t.push({content:`Set Group Nodes to Always`,callback:()=>{for(let e of r)setNodeMode(e,0)}}),t.push({content:`Set Group Nodes to Never`,callback:()=>{for(let e of r)setNodeMode(e,2)}}),t.push({content:`Bypass Group Nodes`,callback:()=>{for(let e of r)setNodeMode(e,4)}});break}else t.push({content:`Set Group Nodes to Always`,callback:()=>{for(let e of r)setNodeMode(e,0)}}),t.push({content:`Set Group Nodes to Never`,callback:()=>{for(let e of r)setNodeMode(e,2)}}),t.push({content:`Bypass Group Nodes`,callback:()=>{for(let e of r)setNodeMode(e,4)}});return t}})})),mt=t((()=>{m(),M(),N(),H().registerExtension({name:`Comfy.ImageCompare`,async nodeCreated(e){if(e.constructor.comfyClass!==`ImageCompare`)return;let[t,n]=e.size;e.setSize([Math.max(t,400),Math.max(n,350)]);let r=e.onExecuted;e.onExecuted=function(t){r?.call(this,t);let{a_images:n,b_images:i}=t,a=F.getRandParam(),o=n&&n.length>0?v.apiURL(`/view?${new URLSearchParams(n[0])}${a}`):``,s=i&&i.length>0?v.apiURL(`/view?${new URLSearchParams(i[0])}${a}`):``,c=e.widgets?.find(e=>e.type===`imagecompare`);c&&(c.value={before:o,after:s},c.callback?.(c.value))}}})})),ht=t((()=>{N(),H().registerExtension({name:`Comfy.ImageCrop`,async nodeCreated(e){if(e.constructor.comfyClass!==`ImageCrop`)return;let[t,n]=e.size;e.setSize([Math.max(t,300),Math.max(n,450)])}})}));function createExportMenuItems(e){return[null,{content:`Save`,has_submenu:!0,callback:(t,n,r,i)=>{let a=gt.map(t=>({content:t.label,callback:()=>{(async()=>{try{await e.exportModel(t.value),h().add({severity:`success`,summary:w(`toastMessages.exportSuccess`,{format:t.label})})}catch(e){console.error(`Export failed:`,e),h().addAlert(w(`toastMessages.failedToExportModel`,{format:t.label}))}})()}}));new b.ContextMenu(a,{event:r,parentMenu:i})}}]}var gt,_t=t((()=>{C(),y(),He(),S(),gt=[{label:`GLB`,value:`glb`},{label:`OBJ`,value:`obj`},{label:`STL`,value:`stl`}],window.comfyAPI=window.comfyAPI||{},window.comfyAPI.exportMenuHelper=window.comfyAPI.exportMenuHelper||{},window.comfyAPI.exportMenuHelper.createExportMenuItems=createExportMenuItems})),Load3DConfiguration,J,vt=t((()=>{He(),Pe(),Le(),m(),Load3DConfiguration=class{constructor(e,t){this.load3d=e,this.properties=t}configureForSaveMesh(e,t){this.setupModelHandlingForSaveMesh(t,e),this.setupDefaultProperties()}configure(e){this.setupModelHandling(e.modelWidget,e.loadFolder,e.cameraState),this.setupTargetSize(e.width,e.height),this.setupDefaultProperties(e.bgImagePath)}setupTargetSize(e,t){e&&t&&(this.load3d.setTargetSize(e.value,t.value),e.callback=e=>{this.load3d.setTargetSize(e,t.value)},t.callback=t=>{this.load3d.setTargetSize(e.value,t)})}setupModelHandlingForSaveMesh(e,t){let n=this.createModelUpdateHandler(t);e&&n(e)}setupModelHandling(e,t,n){let r=this.createModelUpdateHandler(t,n);e.value&&r(e.value);let i=e.callback,a=e.value;Object.defineProperty(e,`value`,{get(){return a},set(t){a=t,e.callback&&t!==void 0&&t!==``&&e.callback(t)},enumerable:!0,configurable:!0}),e.callback=e=>{r(e),i&&i(e)}}setupDefaultProperties(e){let t=this.loadSceneConfig();this.applySceneConfig(t,e);let n=this.loadCameraConfig();this.applyCameraConfig(n);let r=this.loadLightConfig();this.applyLightConfig(r)}loadSceneConfig(){return this.properties&&`Scene Config`in this.properties?this.properties[`Scene Config`]:{showGrid:z().get(`Comfy.Load3D.ShowGrid`),backgroundColor:`#`+z().get(`Comfy.Load3D.BackgroundColor`),backgroundImage:``}}loadCameraConfig(){return this.properties&&`Camera Config`in this.properties?this.properties[`Camera Config`]:{cameraType:z().get(`Comfy.Load3D.CameraType`),fov:35}}loadLightConfig(){return this.properties&&`Light Config`in this.properties?this.properties[`Light Config`]:{intensity:z().get(`Comfy.Load3D.LightIntensity`)}}loadModelConfig(){return this.properties&&`Model Config`in this.properties?this.properties[`Model Config`]:{upDirection:`original`,materialMode:`original`,showSkeleton:!1}}applySceneConfig(e,t){if(this.load3d.toggleGrid(e.showGrid),this.load3d.setBackgroundColor(e.backgroundColor),e.backgroundImage){if(t&&t!=e.backgroundImage)return;this.load3d.setBackgroundImage(e.backgroundImage),e.backgroundRenderMode&&this.load3d.setBackgroundRenderMode(e.backgroundRenderMode)}}applyCameraConfig(e){this.load3d.toggleCamera(e.cameraType),this.load3d.setFOV(e.fov),e.state&&this.load3d.setCameraState(e.state)}applyLightConfig(e){this.load3d.setLightIntensity(e.intensity)}applyModelConfig(e){this.load3d.setUpDirection(e.upDirection),this.load3d.setMaterialMode(e.materialMode)}createModelUpdateHandler(e,t){let n=!0;return async r=>{if(!r)return;let i=r;this.setResourceFolder(i);let a=v.apiURL(P.getResourceURL(...P.splitFilePath(i),e));await this.load3d.loadModel(a,i);let o=this.loadModelConfig();if(this.applyModelConfig(o),n&&t){try{this.load3d.setCameraState(t)}catch(e){console.warn(`Failed to restore camera state:`,e)}n=!1}}}setResourceFolder(e){let t=e.split(`/`).filter(e=>e.trim());if(t.length<=2)return;let n=t.slice(1,-1).join(`/`);n&&this.properties&&(this.properties[`Resource Folder`]=n)}},J=Load3DConfiguration}));async function handleModelUpload(e,t){if(!e?.length)return;let n=t.widgets?.find(e=>e.name===`model_file`);try{let r=t.properties[`Resource Folder`]||``,i=r.trim()?`3d/${r.trim()}`:`3d`,a=await P.uploadFile(e[0],i);if(!a){h().addAlert(w(`toastMessages.fileUploadFailed`));return}let o=v.apiURL(P.getResourceURL(...P.splitFilePath(a),`input`));R(t).waitForLoad3d(e=>{try{e.loadModel(o)}catch{h().addAlert(w(`toastMessages.failedToLoadModel`))}}),a&&n&&(n.options?.values?.includes(a)||n.options?.values?.push(a),n.value=a)}catch(e){console.error(`Model upload failed:`,e),h().addAlert(w(`toastMessages.fileUploadFailed`))}}async function handleResourcesUpload(e,t){if(e?.length)try{let n=t.properties[`Resource Folder`]||``,r=n.trim()?`3d/${n.trim()}`:`3d`;await P.uploadMultipleFiles(e,r)}catch(e){console.error(`Extra resources upload failed:`,e),h().addAlert(w(`toastMessages.extraResourcesUploadFailed`))}}function createFileInput(e,t=!1){let n=document.createElement(`input`);return n.type=`file`,n.accept=e,n.multiple=t,n.style.display=`none`,n}var yt,Y,bt=t((()=>{r(),Je(),Me(),Ie(),_t(),vt(),Pe(),C(),y(),m(),M(),B(),N(),De(),Ge(),ze(),yt={name:`image`,type:`Load3D`,isPreview:!1},Y={name:`image`,type:`Preview3D`,isPreview:!0},H().registerExtension({name:`Comfy.Load3D`,settings:[{id:`Comfy.Load3D.ShowGrid`,category:[`3D`,`Scene`,`Initial Grid Visibility`],name:`Initial Grid Visibility`,tooltip:`Controls whether the grid is visible by default when a new 3D widget is created. This default can still be toggled individually for each widget after creation.`,type:`boolean`,defaultValue:!0,experimental:!0},{id:`Comfy.Load3D.BackgroundColor`,category:[`3D`,`Scene`,`Initial Background Color`],name:`Initial Background Color`,tooltip:`Controls the default background color of the 3D scene. This setting determines the background appearance when a new 3D widget is created, but can be adjusted individually for each widget after creation.`,type:`color`,defaultValue:`282828`,experimental:!0},{id:`Comfy.Load3D.CameraType`,category:[`3D`,`Camera`,`Initial Camera Type`],name:`Initial Camera Type`,tooltip:`Controls whether the camera is perspective or orthographic by default when a new 3D widget is created. This default can still be toggled individually for each widget after creation.`,type:`combo`,options:[`perspective`,`orthographic`],defaultValue:`perspective`,experimental:!0},{id:`Comfy.Load3D.LightIntensity`,category:[`3D`,`Light`,`Initial Light Intensity`],name:`Initial Light Intensity`,tooltip:`Sets the default brightness level of lighting in the 3D scene. This value determines how intensely lights illuminate objects when a new 3D widget is created, but can be adjusted individually for each widget after creation.`,type:`number`,defaultValue:3,experimental:!0},{id:`Comfy.Load3D.LightIntensityMaximum`,category:[`3D`,`Light`,`Light Intensity Maximum`],name:`Light Intensity Maximum`,tooltip:`Sets the maximum allowable light intensity value for 3D scenes. This defines the upper brightness limit that can be set when adjusting lighting in any 3D widget.`,type:`number`,defaultValue:10,experimental:!0},{id:`Comfy.Load3D.LightIntensityMinimum`,category:[`3D`,`Light`,`Light Intensity Minimum`],name:`Light Intensity Minimum`,tooltip:`Sets the minimum allowable light intensity value for 3D scenes. This defines the lower brightness limit that can be set when adjusting lighting in any 3D widget.`,type:`number`,defaultValue:1,experimental:!0},{id:`Comfy.Load3D.LightAdjustmentIncrement`,category:[`3D`,`Light`,`Light Adjustment Increment`],name:`Light Adjustment Increment`,tooltip:`Controls the increment size when adjusting light intensity in 3D scenes. A smaller step value allows for finer control over lighting adjustments, while a larger value results in more noticeable changes per adjustment.`,type:`slider`,attrs:{min:.1,max:1,step:.1},defaultValue:.5,experimental:!0},{id:`Comfy.Load3D.3DViewerEnable`,category:[`3D`,`3DViewer`,`Enable`],name:`Enable 3D Viewer (Beta)`,tooltip:`Enables the 3D Viewer (Beta) for selected nodes. This feature allows you to visualize and interact with 3D models directly within the full size 3d viewer.`,type:`boolean`,defaultValue:!1,experimental:!0},{id:`Comfy.Load3D.PLYEngine`,category:[`3D`,`PLY`,`PLY Engine`],name:`PLY Engine`,tooltip:`Select the engine for loading PLY files. "threejs" uses the native Three.js PLYLoader (best for mesh PLY files). "fastply" uses an optimized loader for ASCII point cloud PLY files. "sparkjs" uses Spark.js for 3D Gaussian Splatting PLY files.`,type:`combo`,options:[`threejs`,`fastply`,`sparkjs`],defaultValue:`threejs`,experimental:!0}],commands:[{id:`Comfy.3DViewer.Open3DViewer`,icon:`pi pi-pencil`,label:`Open 3D Viewer (Beta) for Selected Node`,function:()=>{let e=F.canvas.selected_nodes;if(!e||Object.keys(e).length!==1)return;let t=e[Object.keys(e)[0]];if(!qe(t))return;V.copyToClipspace(t),V.clipspace_return_node=t;let n={node:t};Fe().showDialog({key:`global-load3d-viewer`,title:w(`load3d.viewer.title`),component:ve,props:n,dialogComponentProps:{style:`width: 80vw; height: 80vh;`,maximizable:!0,onClose:async()=>{await E().handleViewerClose(n.node)}}})}}],getCustomWidgets(){return{LOAD_3D(e){let t=createFileInput(`.gltf,.glb,.obj,.fbx,.stl,.ply,.spz,.splat,.ksplat`,!1);e.properties[`Resource Folder`]=``,t.onchange=async()=>{await handleModelUpload(t.files,e)},e.addWidget(`button`,`upload 3d model`,`upload3dmodel`,()=>{t.click()});let n=createFileInput(`*`,!0);n.onchange=async()=>{await handleResourcesUpload(n.files,e),n.value=``},e.addWidget(`button`,`upload extra resources`,`uploadExtraResources`,()=>{n.click()}),e.addWidget(`button`,`clear`,`clear`,()=>{R(e).waitForLoad3d(e=>{e.clearModel()});let t=e.widgets?.find(e=>e.name===`model_file`);t&&(t.value=``)});let r=new k({node:e,name:`image`,component:U,inputSpec:yt,options:{}});return r.type=`load3D`,j(e,r),{widget:r}}}},getNodeMenuItems(e){if(e.constructor.comfyClass!==`Load3D`)return[];let t=E().getLoad3d(e);return!t||t.isSplatModel()?[]:createExportMenuItems(t)},async nodeCreated(e){if(e.constructor.comfyClass!==`Load3D`)return;let[t,n]=e.size;e.setSize([Math.max(t,300),Math.max(n,600)]),await o(),R(e).waitForLoad3d(t=>{let n=e.properties[`Camera Config`]?.state,r=new J(t,e.properties),i=e.widgets?.find(e=>e.name===`model_file`),a=e.widgets?.find(e=>e.name===`width`),o=e.widgets?.find(e=>e.name===`height`),s=e.widgets?.find(e=>e.name===`image`);if(i&&a&&o&&s){let t={loadFolder:`input`,modelWidget:i,cameraState:n,width:a,height:o};r.configure(t),s.serializeValue=async()=>{let t=We.get(e);if(!t)return console.error(`No load3d instance found for node`),null;let n=e.properties[`Camera Config`]||{cameraType:t.getCurrentCameraType(),fov:t.cameraManager.perspectiveCamera.fov};n.state=t.getCameraState(),e.properties[`Camera Config`]=n,t.stopRecording();let{scene:r,mask:i,normal:s}=await t.captureScene(a.value,o.value),[c,l,u]=await Promise.all([P.uploadTempImage(r,`scene`),P.uploadTempImage(i,`scene_mask`),P.uploadTempImage(s,`scene_normal`)]);t.handleResize();let d={image:`threed/${c.name} [temp]`,mask:`threed/${l.name} [temp]`,normal:`threed/${u.name} [temp]`,camera_info:e.properties[`Camera Config`]?.state||null,recording:``},f=t.getRecordingData();if(f){let[e]=await Promise.all([P.uploadTempImage(f,`recording`,`mp4`)]);d.recording=`threed/${e.name} [temp]`}return d}}})}}),H().registerExtension({name:`Comfy.Preview3D`,async beforeRegisterNodeDef(e,t){t.name===`Preview3D`&&(t.input.required.image=[`PREVIEW_3D`])},getNodeMenuItems(e){if(e.constructor.comfyClass!==`Preview3D`)return[];let t=E().getLoad3d(e);return!t||t.isSplatModel()?[]:createExportMenuItems(t)},getCustomWidgets(){return{PREVIEW_3D(e){let t=new k({node:e,name:Y.name,component:U,inputSpec:Y,options:{}});return t.type=`load3D`,j(e,t),{widget:t}}}},async nodeCreated(e){if(e.constructor.comfyClass!==`Preview3D`)return;let[t,n]=e.size;e.setSize([Math.max(t,400),Math.max(n,550)]),await o();let r=e.onExecuted;R(e).waitForLoad3d(t=>{let n=new J(t,e.properties),i=e.widgets?.find(e=>e.name===`model_file`);if(i){let a=e.properties[`Last Time Model File`];if(a){i.value=a;let t={loadFolder:`output`,modelWidget:i,cameraState:e.properties[`Camera Config`]?.state};n.configure(t)}e.onExecuted=function(a){r?.call(this,a);let o=a.result,s=o?.[0];if(!s){let e=w(`toastMessages.unableToGetModelFilePath`);console.error(e),h().addAlert(e)}let c=o?.[1],l=o?.[2];i.value=s?.replaceAll(`\\`,`/`),e.properties[`Last Time Model File`]=i.value;let u={loadFolder:`output`,modelWidget:i,cameraState:c,bgImagePath:l};n.configure(u),l&&t.setBackgroundImage(l)}}})}})}));function openMaskEditor(e){if(!e){console.error(`[MaskEditor] No node provided`);return}if(!e.imgs?.length&&e.previewMediaType!==`image`){console.error(`[MaskEditor] Node has no images`);return}Oe().openMaskEditor(e)}function openMaskEditorFromClipspace(){let e=V.clipspace_return_node;if(!e){console.error(`[MaskEditor] No clipspace_return_node found`);return}openMaskEditor(e)}function isOpened(){return Fe().isDialogOpen(`global-mask-editor`)}var changeBrushSize,xt=t((()=>{c(),M(),be(),Ge(),ge(),ke(),changeBrushSize=async e=>{if(!isOpened())return;let t=Ve(),n=t.brushSettings.size,r=e(n);t.setBrushSize(r)},F.registerExtension({name:`Comfy.MaskEditor`,settings:[{id:`Comfy.MaskEditor.BrushAdjustmentSpeed`,category:[`Mask Editor`,`BrushAdjustment`,`Sensitivity`],name:`Brush adjustment speed multiplier`,tooltip:`Controls how quickly the brush size and hardness change when adjusting. Higher values mean faster changes.`,type:`slider`,attrs:{min:.1,max:2,step:.1},defaultValue:1,versionAdded:`1.0.0`},{id:`Comfy.MaskEditor.UseDominantAxis`,category:[`Mask Editor`,`BrushAdjustment`,`UseDominantAxis`],name:`Lock brush adjustment to dominant axis`,tooltip:`When enabled, brush adjustments will only affect size OR hardness based on which direction you move more`,type:`boolean`,defaultValue:!0}],commands:[{id:`Comfy.MaskEditor.OpenMaskEditor`,icon:`pi pi-pencil`,label:`Open Mask Editor for Selected Node`,function:()=>{let e=F.canvas.selected_nodes;if(!e||Object.keys(e).length!==1)return;let t=e[Object.keys(e)[0]];openMaskEditor(t)}},{id:`Comfy.MaskEditor.BrushSize.Increase`,icon:`pi pi-plus-circle`,label:`Increase Brush Size in MaskEditor`,function:()=>changeBrushSize(e=>f.clamp(e+2,1,250))},{id:`Comfy.MaskEditor.BrushSize.Decrease`,icon:`pi pi-minus-circle`,label:`Decrease Brush Size in MaskEditor`,function:()=>changeBrushSize(e=>f.clamp(e-2,1,250))},{id:`Comfy.MaskEditor.ColorPicker`,icon:`pi pi-palette`,label:`Open Color Picker in MaskEditor`,function:()=>{isOpened()&&Ve().colorInput?.click()}},{id:`Comfy.MaskEditor.Rotate.Right`,icon:`pi pi-refresh`,label:`Rotate Right in MaskEditor`,function:async()=>{isOpened()&&await A().rotateClockwise()}},{id:`Comfy.MaskEditor.Rotate.Left`,icon:`pi pi-undo`,label:`Rotate Left in MaskEditor`,function:async()=>{isOpened()&&await A().rotateCounterclockwise()}},{id:`Comfy.MaskEditor.Mirror.Horizontal`,icon:`pi pi-arrows-h`,label:`Mirror Horizontal in MaskEditor`,function:async()=>{isOpened()&&await A().mirrorHorizontal()}},{id:`Comfy.MaskEditor.Mirror.Vertical`,icon:`pi pi-arrows-v`,label:`Mirror Vertical in MaskEditor`,function:async()=>{isOpened()&&await A().mirrorVertical()}}],init(){V.open_maskeditor=openMaskEditorFromClipspace,console.warn(`[MaskEditor] ComfyApp.open_maskeditor is deprecated. Plugins should migrate to using the command system or direct node context menu integration.`)}})})),St=t((()=>{S(),M(),I(),F.registerExtension({name:`Comfy.NoteNode`,registerCustomNodes(){class NoteNode extends g{static category;static collapsable;static title_mode;groupcolor=x.node_colors.yellow.groupcolor;isVirtualNode;constructor(e){super(e),this.color=x.node_colors.yellow.color,this.bgcolor=x.node_colors.yellow.bgcolor,this.properties||={text:``},D.STRING(this,`text`,[`STRING`,{default:this.properties.text,multiline:!0}],F),this.serialize_widgets=!0,this.isVirtualNode=!0}}b.registerNodeType(`Note`,Object.assign(NoteNode,{title_mode:b.NORMAL_TITLE,title:`Note`,collapsable:!0})),NoteNode.category=`utils`;class MarkdownNoteNode extends g{static title=`Markdown Note`;groupcolor=x.node_colors.yellow.groupcolor;constructor(e){super(e),this.color=x.node_colors.yellow.color,this.bgcolor=x.node_colors.yellow.bgcolor,this.properties||={text:``},D.MARKDOWN(this,`text`,[`STRING`,{default:this.properties.text}],F),this.serialize_widgets=!0,this.isVirtualNode=!0}}b.registerNodeType(`MarkdownNote`,MarkdownNoteNode),MarkdownNoteNode.category=`utils`}})})),Ct=t((()=>{M(),B(),I(),N(),H().registerExtension({name:`Comfy.PreviewAny`,async beforeRegisterNodeDef(e,t){if(t.name===`PreviewAny`){let t=e.prototype.onNodeCreated;e.prototype.onNodeCreated=function(){t&&t.apply(this,[]);let e=D.MARKDOWN(this,`preview`,[`MARKDOWN`,{}],F).widget,n=D.STRING(this,`preview`,[`STRING`,{multiline:!0}],F).widget,r=D.BOOLEAN(this,`previewMode`,[`BOOLEAN`,{label_on:`Markdown`,label_off:`Plaintext`,default:!1}],F);r.widget.callback=t=>{e.hidden=!t,e.options.hidden=!t,n.hidden=t,n.options.hidden=t},e.hidden=!0,e.options.hidden=!0,e.options.read_only=!0,e.element.readOnly=!0,e.element.disabled=!0,e.serialize=!1,n.hidden=!1,n.options.hidden=!1,n.options.read_only=!0,n.element.readOnly=!0,n.element.disabled=!0,n.serialize=!1};let n=e.prototype.onExecuted;e.prototype.onExecuted=function(e){n?.apply(this,[e]);let t=this.widgets?.filter(e=>e.name===`preview`)??[];for(let n of t){let t=e.text??``;n.value=Array.isArray(t)?t?.join(`

`)??``:t}}}}})})),wt=t((()=>{S(),M(),Ye(),F.registerExtension({name:`Comfy.RerouteNode`,registerCustomNodes(){class RerouteNode extends g{static category;static defaultVisibility=!1;constructor(e){super(e??``),this.properties||={},this.properties.showOutputText=RerouteNode.defaultVisibility,this.properties.horizontal=!1,this.addInput(``,`*`),this.addOutput(this.properties.showOutputText?`*`:``,`*`),this.isVirtualNode=!0}onAfterGraphConfigured(){requestAnimationFrame(()=>{this.onConnectionsChange(b.INPUT,void 0,!0)})}clone(){let e=super.clone();return e&&(e.removeOutput(0),e.addOutput(this.properties.showOutputText?`*`:``,`*`),e.setSize(e.computeSize()),e)}onConnectionsChange(e,t,n){let{graph:r}=this;if(!r||F.configuringGraph)return;if(n&&e===b.OUTPUT&&new Set(this.outputs[0].links?.map(e=>r.links[e]?.type)?.filter(e=>e&&e!==`*`)??[]).size>1){let e=[];for(let t of this.outputs[0].links??[]){let n=r.links[t];e.push(n)}e.pop();for(let t of e)r.getNodeById(t.target_id)?.disconnectInput(t.target_slot)}let i=this,a=[],o=null,s=null;for(;i;){a.unshift(i);let e=i.inputs[0].link;if(e!==null){let t=r.links[e];if(!t)return;let n=r.getNodeById(t.origin_id);if(!n)return;if(n instanceof RerouteNode)n===this?(i.disconnectInput(t.target_slot),i=null):i=n;else{s=i,o=n.outputs[t.origin_slot]?.type??null;break}}else{i=null;break}}let c=[this],l=null;for(;c.length;){i=c.pop();let e=i.outputs?.[0]?.links??[];for(let t of e){let e=r.links[t];if(!e)continue;let n=r.getNodeById(e.target_id);if(n)if(n instanceof RerouteNode)c.push(n),a.push(n);else{let t=n.inputs[e.target_slot],r=t.type,i=!o||!r||b.isValidConnection(o,r);if(!i){n.disconnectInput(e.target_slot);continue}n.onConnectionsChange?.(b.INPUT,e.target_slot,i,e,t),l=n.inputs[e.target_slot].type}}}let u=o||l||`*`,d=x.link_type_colors[u],f,p;for(let e of a){e.outputs[0].type=o||`*`,e.__outputType=u,e.outputs[0].name=e.properties.showOutputText?`${u}`:``,e.setSize(e.computeSize());for(let t of e.outputs[0].links||[]){let e=r.links[t];if(!e||(e.color=d,F.configuringGraph))continue;let n=r.getNodeById(e.target_id);if(!n)continue;let i=n.inputs?.[e.target_slot];if(i?.widget){let e=Ze(i);f||(f=e[1]??{},p=e[0]);let t=Qe(i,[e[0],f]);t.customConfig&&(f=t.customConfig)}}}for(let e of a)f&&l?(e.inputs[0].widget={name:`value`},et(e.inputs[0],[p??`${u}`,f])):et(e.inputs[0],void 0);if(s?.inputs?.[0]?.link){let e=r.links[s.inputs[0].link];e&&(e.color=d)}}getExtraMenuOptions(e,t){return t.unshift({content:(this.properties.showOutputText?`Hide`:`Show`)+` Type`,callback:()=>{this.properties.showOutputText=!this.properties.showOutputText,this.properties.showOutputText?this.outputs[0].name=`${this.__outputType||this.outputs[0].type}`:this.outputs[0].name=``,this.setSize(this.computeSize()),F.canvas.setDirty(!0,!0)}},{content:(RerouteNode.defaultVisibility?`Hide`:`Show`)+` Type By Default`,callback:()=>{RerouteNode.setDefaultTextVisibility(!RerouteNode.defaultVisibility)}}),[]}computeSize(){return[this.properties.showOutputText&&this.outputs&&this.outputs.length?Math.max(75,b.NODE_TEXT_SIZE*this.outputs[0].name.length*.6+40):75,26]}static setDefaultTextVisibility(e){RerouteNode.defaultVisibility=e,e?localStorage[`Comfy.RerouteNode.DefaultVisibility`]=`true`:delete localStorage[`Comfy.RerouteNode.DefaultVisibility`]}}RerouteNode.setDefaultTextVisibility(!!localStorage[`Comfy.RerouteNode.DefaultVisibility`]),b.registerNodeType(`Reroute`,Object.assign(RerouteNode,{title_mode:b.NO_TITLE,title:`Reroute`,collapsable:!1})),RerouteNode.category=`utils`}})})),Tt,Et=t((()=>{Ne(),M(),Tt=new Set([`SaveImage`,`SaveVideo`,`SaveAnimatedWEBP`,`SaveWEBM`,`SaveAudio`,`SaveGLB`,`SaveAnimatedPNG`,`CLIPSave`,`VAESave`,`ModelSave`,`LoraSave`,`SaveLatent`]),F.registerExtension({name:`Comfy.SaveImageExtraOutput`,async beforeRegisterNodeDef(e,t){if(Tt.has(t.name)){let t=e.prototype.onNodeCreated;e.prototype.onNodeCreated=function(){let e=t?t.apply(this,arguments):void 0,n=this.widgets.find(e=>e.name===`filename_prefix`);return n.serializeValue=()=>je(F.graph,n.value),e}}else{let t=e.prototype.onNodeCreated;e.prototype.onNodeCreated=function(){let e=t?t.apply(this,arguments):void 0;return(!this.properties||!(`Node name for S&R`in this.properties))&&this.addProperty(`Node name for S&R`,this.constructor.type,`string`),e}}}})})),X,Dt=t((()=>{r(),Je(),Ie(),_t(),vt(),Pe(),B(),N(),De(),X={name:`image`,type:`Preview3D`,isPreview:!0},H().registerExtension({name:`Comfy.SaveGLB`,async beforeRegisterNodeDef(e,t){t.name===`SaveGLB`&&(t.input.required.image=[`PREVIEW_3D`])},getCustomWidgets(){return{PREVIEW_3D(e){let t=new k({node:e,name:X.name,component:U,inputSpec:X,options:{}});return t.type=`load3D`,j(e,t),{widget:t}}}},getNodeMenuItems(e){if(e.constructor.comfyClass!==`SaveGLB`)return[];let t=E().getLoad3d(e);return!t||t.isSplatModel()?[]:createExportMenuItems(t)},async nodeCreated(e){if(e.constructor.comfyClass!==`SaveGLB`)return;let[t,n]=e.size;e.setSize([Math.max(t,400),Math.max(n,550)]),await o();let r=e.onExecuted;e.onExecuted=function(t){r?.call(this,t);let n=t[`3d`]?.[0];n&&R(e).waitForLoad3d(t=>{let r=e.widgets?.find(e=>e.name===`image`);if(t&&r){let i=(n.subfolder??``)+`/`+(n.filename??``);r.value=i;let a=new J(t,e.properties),o=n.type,onModelLoaded=()=>{t.removeEventListener(`modelLoadingEnd`,onModelLoaded),P.generateThumbnailIfNeeded(t,i,o)};t.addEventListener(`modelLoadingEnd`,onModelLoaded),a.configureForSaveMesh(o,i)}})}}})}));function drawSelectionBorder(e,t){let n=t.selectedItems;if(n.size<=1)return;let r=ne(n,10);if(!r)return;let[i,a,o,s]=r;e.save(),e.lineWidth=2/t.ds.scale,e.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue(`--border-color`).trim()||`#ffffff66`;let c=5/t.ds.scale;e.setLineDash([c,c]),e.beginPath(),e.roundRect(i,a,o,s,8/t.ds.scale),e.stroke(),e.restore()}var Ot=t((()=>{S(),M(),F.registerExtension({name:`Comfy.SelectionBorder`,async init(){let e=F.canvas.onDrawForeground;F.canvas.onDrawForeground=function(t,n){e?.call(this,t,n),drawSelectionBorder(t,F.canvas)}}})})),Z,Q,kt,At,jt=t((()=>{S(),M(),Z=!1,Q=0,F.registerExtension({name:`Comfy.SimpleTouchSupport`,setup(){let e=null,t=null,n=null,r=null;function getMultiTouchPos(e){return Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY)}function getMultiTouchCenter(e){return{clientX:(e.touches[0].clientX+e.touches[1].clientX)/2,clientY:(e.touches[0].clientY+e.touches[1].clientY)/2}}F.canvasEl.parentElement?.addEventListener(`touchstart`,i=>{Q+=i.changedTouches.length,n=null,r=null,i.touches?.length===1?(t=new Date,n=i.touches[0]):(t=null,i.touches?.length===2&&(r=F.canvas.ds.scale,n=getMultiTouchCenter(i),e=getMultiTouchPos(i),F.canvas.pointer.isDown=!1))},!0),F.canvasEl.parentElement?.addEventListener(`touchend`,e=>{if(Q-=e.changedTouches.length,e.touches?.length!==1&&(Z=!1),t&&!e.touches?.length){if(new Date().getTime()-t.getTime()>600&&e.target===F.canvasEl){let t={button:2,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY,pointerId:1,isPrimary:!0};F.canvasEl.dispatchEvent(new PointerEvent(`pointerdown`,t)),setTimeout(()=>{F.canvasEl.dispatchEvent(new PointerEvent(`pointerup`,t))}),e.preventDefault()}t=null}});let resetTouchState=()=>{Q=0,Z=!1,t=null,n=null,r=null,e=null};document.addEventListener(`visibilitychange`,()=>{document.hidden&&resetTouchState()}),F.canvasEl.parentElement?.addEventListener(`touchcancel`,resetTouchState),F.canvasEl.parentElement?.addEventListener(`touchmove`,i=>{if(t&&n&&i.touches?.length===1){let e=i.touches[0],r=e.clientX-n.clientX,a=e.clientY-n.clientY;r*r+a*a>30&&(t=null)}if(i.touches?.length===2&&n&&!i.ctrlKey&&!i.shiftKey){i.preventDefault(),F.canvas.pointer.isDown=!1,Z=!0,b.closeAllContextMenus(window),F.canvas.search_box?.close();let t=getMultiTouchPos(i),s=getMultiTouchCenter(i);if(r===null||e===null)return;let c=r*t/e,l=(s.clientX-n.clientX)/c,u=(s.clientY-n.clientY)/c;c<F.canvas.ds.min_scale?c=F.canvas.ds.min_scale:c>F.canvas.ds.max_scale&&(c=F.canvas.ds.max_scale);let d=F.canvas.ds.scale;F.canvas.ds.scale=c,Math.abs(F.canvas.ds.scale-1)<.01&&(F.canvas.ds.scale=1);let f=F.canvas.ds.scale,convertScaleToOffset=e=>[s.clientX/e-F.canvas.ds.offset[0],s.clientY/e-F.canvas.ds.offset[1]];var a=convertScaleToOffset(d),o=convertScaleToOffset(f);F.canvas.ds.offset[0]+=l+o[0]-a[0],F.canvas.ds.offset[1]+=u+o[1]-a[1],n.clientX=s.clientX,n.clientY=s.clientY,F.canvas.setDirty(!0,!0)}},!0)}}),kt=x.prototype.processMouseDown,x.prototype.processMouseDown=function(e){if(!(Z||Q))return F.canvas.pointer.isDown=!1,kt.apply(this,[e])},At=x.prototype.processMouseMove,x.prototype.processMouseMove=function(e){if(!(Z||Q>1))return At.apply(this,[e])}})),Mt=t((()=>{S(),M(),I(),F.registerExtension({name:`Comfy.SlotDefaults`,suggestionsNumber:null,init(){b.search_filter_enabled=!0,b.middle_click_slot_add_default_node=!0,this.suggestionsNumber=F.ui.settings.addSetting({id:`Comfy.NodeSuggestions.number`,category:[`Comfy`,`Node Search Box`,`NodeSuggestions`],name:`Number of nodes suggestions`,tooltip:`Only for litegraph searchbox/context menu`,type:`slider`,attrs:{min:1,max:100,step:1},defaultValue:5,onChange:e=>{this.setDefaults(e)}})},slot_types_default_out:{},slot_types_default_in:{},async beforeRegisterNodeDef(e,t){var n=t.name;let r=t.input?.required;for(let t in r){var i=r[t];if(typeof i[0]!=`string`)continue;var a=i[0];if(a in D&&!i[1]?.forceInput||(a in this.slot_types_default_out||(this.slot_types_default_out[a]=[`Reroute`]),this.slot_types_default_out[a].includes(n)))continue;this.slot_types_default_out[a].push(n);let o=a.toLocaleLowerCase();o in b.registered_slot_in_types||(b.registered_slot_in_types[o]={nodes:[]}),b.registered_slot_in_types[o].nodes.push(e.comfyClass)}var o=t.output??[];for(let t of o){let r=t;r in this.slot_types_default_in||(this.slot_types_default_in[r]=[`Reroute`]),!this.slot_types_default_in[r].includes(n)&&(this.slot_types_default_in[r].push(n),r in b.registered_slot_out_types||(b.registered_slot_out_types[r]={nodes:[]}),b.registered_slot_out_types[r].nodes.push(e.comfyClass),b.slot_types_out.includes(r)||b.slot_types_out.push(r))}var s=this.suggestionsNumber.value;this.setDefaults(s)},setDefaults(e){for(let t in b.slot_types_default_out={},b.slot_types_default_in={},this.slot_types_default_out)b.slot_types_default_out[t]=this.slot_types_default_out[t].slice(0,e);for(let t in this.slot_types_default_in)b.slot_types_default_in[t]=this.slot_types_default_in[t].slice(0,e)}})}));function updateUIWidget(e,t=``){e.element.src=t,e.value=t,e.callback?.(t),t?e.element.classList.remove(`empty-audio-widget`):e.element.classList.add(`empty-audio-widget`)}async function uploadFile(e,t,n,r,i=!1){try{let a=new FormData;a.append(`image`,n),i&&a.append(`subfolder`,`pasted`);let o=await v.fetchApi(`/upload/image`,{method:`POST`,body:a});if(o.status===200){let n=await o.json(),i=n.name;n.subfolder&&(i=n.subfolder+`/`+i),e.options.values.includes(i)||e.options.values.push(i),r&&(updateUIWidget(t,v.apiURL(W(...tt(i)))),e.callback?.(i))}else h().addAlert(o.status+` - `+o.statusText)}catch(e){h().addAlert(e)}}var Nt=t((()=>{d(),_e(),we(),Se(),C(),y(),nt(),rt(),ce(),m(),M(),F.registerExtension({name:`Comfy.AudioWidget`,async beforeRegisterNodeDef(e,t){[`LoadAudio`,`SaveAudio`,`PreviewAudio`,`SaveAudioMP3`,`SaveAudioOpus`].includes(e.prototype.comfyClass)&&(t.input.required.audioUI=[`AUDIO_UI`,{}])},getCustomWidgets(){return{AUDIO_UI(e,t){let n=document.createElement(`audio`);n.controls=!0,n.classList.add(`comfy-audio`),n.setAttribute(`name`,`media`);let r=e.addDOMWidget(t,`audioUI`,n);r.serialize=!1;let{nodeData:i}=e.constructor;if(i==null)throw TypeError(`nodeData is null`);if(i.output_node){r.element.classList.add(`empty-audio-widget`);let t=e.onExecuted;e.onExecuted=function(e){t?.call(this,e);let n=e.audio;if(!n?.length)return;let i=n[0],a=W(i.subfolder??``,i.filename??``,i.type);updateUIWidget(r,v.apiURL(a))}}let a=``;return r.options.getValue=()=>a,r.options.setValue=e=>a=e,{widget:r}}}},onNodeOutputsUpdated(e){for(let[t,n]of Object.entries(e)){if(!n.audio?.length)continue;let e=ie(F.rootGraph,t);if(!e)continue;let r=e.widgets?.find(e=>e.name===`audioUI`),i=n.audio[0],a=W(i.subfolder??``,i.filename??``,i.type);updateUIWidget(r,v.apiURL(a))}}}),F.registerExtension({name:`Comfy.UploadAudio`,async beforeRegisterNodeDef(e,t){t?.input?.required?.audio?.[1]?.audio_upload===!0&&(t.input.required.upload=[`AUDIOUPLOAD`,{}])},getCustomWidgets(){return{AUDIOUPLOAD(e,t){let n=e.widgets.find(e=>e.name===`audio`),r=e.widgets.find(e=>e.name===`audioUI`),onAudioWidgetUpdate=()=>{updateUIWidget(r,v.apiURL(W(...tt(n.value??``))))};onAudioWidgetUpdate(),n.callback=onAudioWidgetUpdate;let i=e.onGraphConfigured;e.onGraphConfigured=function(){i?.apply(this,arguments),onAudioWidgetUpdate()};let handleUpload=async e=>(e?.length&&uploadFile(n,r,e[0],!0),e),isAudioFile=e=>e.type.startsWith(`audio/`),{openFileSelection:a}=he(e,{accept:`audio/*`,onSelect:handleUpload}),o=e.addWidget(`button`,t,``,a,{serialize:!1,canvasOnly:!0});return o.label=w(`g.choose_file_to_upload`),xe(e,{fileFilter:isAudioFile,onDrop:handleUpload}),Ce(e,{fileFilter:isAudioFile,onPaste:handleUpload}),e.previewMediaType=`audio`,{widget:o}}}}}),F.registerExtension({name:`Comfy.RecordAudio`,getCustomWidgets(){return{AUDIO_RECORD(e,t){let n=document.createElement(`audio`);n.controls=!0,n.classList.add(`comfy-audio`),n.setAttribute(`name`,`media`);let r=e.addDOMWidget(t,`audioUI`,n);r.options.canvasOnly=!1;let i=null,a=!1,o=[],s=null,c=null,u=null,d=null;r.serializeValue=async()=>{a&&i&&(u=new Promise(e=>{d=e}),i.stop(),await u);let e=r.element.src;if(!e)return h().addAlert(w(`g.noAudioRecorded`)),``;let t=await fetch(e).then(e=>e.blob());return await G().convertBlobToFileAndSubmit(t)},c=e.addWidget(`button`,t,``,async()=>{if(a)i&&a&&i.stop();else try{s=await navigator.mediaDevices.getUserMedia({audio:!0}),i=new l(s,{mimeType:`audio/wav`}),o=[],i.ondataavailable=e=>{o.push(e.data)},i.onstop=async()=>{let e=new Blob(o,{type:`audio/wav`});G().stopAllTracks(s),r.element.src&&r.element.src.startsWith(`blob:`)&&URL.revokeObjectURL(r.element.src),updateUIWidget(r,URL.createObjectURL(e)),a=!1,c&&(c.label=w(`g.startRecording`)),d&&(d(),d=null,u=null)},i.onerror=e=>{console.error(`MediaRecorder error:`,e),G().stopAllTracks(s),a=!1,c&&(c.label=w(`g.startRecording`)),d&&(d(),d=null,u=null)},i.start(),a=!0,c&&(c.label=w(`g.stopRecording`))}catch(e){if(console.error(`Error accessing microphone:`,e),h().addAlert(w(`g.micPermissionDenied`)),i)try{i.stop()}catch{}G().stopAllTracks(s),s=null,a=!1,c&&(c.label=w(`g.startRecording`))}},{serialize:!1,canvasOnly:!1}),c.label=w(`g.startRecording`),c.type=`audiorecord`;let f=e.onRemoved;return e.onRemoved=function(){a&&i&&i.stop(),G().stopAllTracks(s),r.element.src?.startsWith(`blob:`)&&URL.revokeObjectURL(r.element.src),f?.call(this)},{widget:c}}}},async nodeCreated(e){e.constructor.comfyClass===`RecordAudio`&&await G().registerWavEncoder()}})})),isMediaUploadComboInput,createUploadInput,Pt=t((()=>{Re(),M(),isMediaUploadComboInput=e=>{let[t,n]=e;return n?(n.image_upload===!0||n.video_upload===!0||n.animated_image_upload===!0)&&(Ke(e)||t===`COMBO`):!1},createUploadInput=(e,t)=>[`IMAGEUPLOAD`,{...t[1],imageInputName:e}],F.registerExtension({name:`Comfy.UploadImage`,beforeRegisterNodeDef(e,t){let{input:n}=t??{},{required:r}=n??{};if(!r)return;let i=Object.entries(r).find(([e,t])=>isMediaUploadComboInput(t));if(i){let[e,t]=i;r.upload=createUploadInput(e,t)}}})})),$,Ft=t((()=>{C(),y(),m(),M(),$=Symbol(),F.registerExtension({name:`Comfy.WebcamCapture`,getCustomWidgets(){return{WEBCAM(e,t){let n;e[$]=new Promise(e=>n=e);let r=document.createElement(`div`);r.style.background=`rgba(0,0,0,0.25)`,r.style.textAlign=`center`;let i=document.createElement(`video`);i.style.height=i.style.width=`100%`;let loadVideo=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});r.replaceChildren(i),setTimeout(()=>n(i),500),i.addEventListener(`loadedmetadata`,()=>n(i),!1),i.srcObject=e,i.play()}catch(e){let t=document.createElement(`div`);t.style.color=`red`,t.style.overflow=`auto`,t.style.maxHeight=`100%`,t.style.whiteSpace=`pre-wrap`,window.isSecureContext?t.textContent=`Unable to load webcam, please ensure access is granted:
`+e.message:t.textContent=`Unable to load webcam. A secure context is required, if you are not accessing ComfyUI on localhost (127.0.0.1) you will have to enable TLS (https)

`+e.message,r.replaceChildren(t)}};return loadVideo(),{widget:e.addDOMWidget(t,`WEBCAM`,r)}}}},nodeCreated(e){if(e.type,e.constructor.comfyClass!==`WebcamCapture`)return;let t,n=e.widgets.find(e=>e.name===`image`),r=e.widgets.find(e=>e.name===`width`),i=e.widgets.find(e=>e.name===`height`),a=e.widgets.find(e=>e.name===`capture_on_queue`),o=document.createElement(`canvas`),capture=()=>{o.width=r.value,o.height=i.value,o.getContext(`2d`).drawImage(t,0,0,r.value,i.value);let n=o.toDataURL(`image/png`),a=new Image;a.onload=()=>{e.imgs=[a],F.canvas.setDirty(!0)},a.src=n},s=e.addWidget(`button`,`waiting for camera...`,`capture`,capture,{canvasOnly:!0});s.disabled=!0,s.serializeValue=()=>void 0,n.serializeValue=async()=>{if(a.value)capture();else if(!e.imgs?.length){let e=`No webcam image captured`;throw h().addAlert(e),Error(e)}let t=await new Promise(e=>o.toBlob(e)),n=`${+new Date}.png`,r=new File([t],n),i=new FormData;i.append(`image`,r),i.append(`subfolder`,`webcam`),i.append(`type`,`temp`);let s=await v.fetchApi(`/upload/image`,{method:`POST`,body:i});if(s.status!==200){let e=`Error uploading camera image: ${s.status} - ${s.statusText}`;throw h().addAlert(e),Error(e)}return`webcam/${n} [temp]`},e[$].then(e=>{t=e,r.value||(r.value=t.videoWidth||640,i.value=t.videoHeight||480),s.disabled=!1,s.label=w(`g.capture`)})}})}));await t((async()=>{re(),it(),at(),ot(),st(),ct(),ft(),$e(),Xe(),pt(),mt(),ht(),bt(),xt(),St(),Ct(),wt(),Et(),Dt(),Ot(),jt(),Mt(),Nt(),Pt(),Ft(),Ye(),a(),_||await s(()=>import(`./nodeTemplates-DUDiWGdC.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28]),import.meta.url),_&&(await s(()=>import(`./cloudRemoteConfig-lGXiftQH.js`),__vite__mapDeps([29,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,30]),import.meta.url),await s(()=>import(`./cloudBadges-h3vcMzMJ.js`),__vite__mapDeps([31,4,3,1,2,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url),await s(()=>import(`./cloudSessionCookie-BX0BTRc5.js`),__vite__mapDeps([32,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url),window.__CONFIG__?.subscription_required&&await s(()=>import(`./cloudSubscription-BMDjBcJT.js`),__vite__mapDeps([33,4,3,1,2,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url)),await s(()=>import(`./cloudFeedbackTopbarButton-mkpE3Vva.js`),__vite__mapDeps([34,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,35]),import.meta.url),_||await s(()=>import(`./nightlyBadges-CYZhoIXH.js`),__vite__mapDeps([36,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url)}))();
//# sourceMappingURL=core-DH5YMzUy.js.map