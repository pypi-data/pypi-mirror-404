{"version":3,"file":"useWorkspaceUI-DgiliDDq.js","names":[],"sources":["../../src/platform/workspace/composables/useWorkspaceUI.ts"],"sourcesContent":["import { computed, ref } from 'vue'\nimport { createSharedComposable } from '@vueuse/core'\n\nimport type { WorkspaceRole, WorkspaceType } from '../api/workspaceApi'\nimport { useTeamWorkspaceStore } from '../stores/teamWorkspaceStore'\n\n/** Permission flags for workspace actions */\ninterface WorkspacePermissions {\n  canViewOtherMembers: boolean\n  canViewPendingInvites: boolean\n  canInviteMembers: boolean\n  canManageInvites: boolean\n  canRemoveMembers: boolean\n  canLeaveWorkspace: boolean\n  canAccessWorkspaceMenu: boolean\n  canManageSubscription: boolean\n}\n\n/** UI configuration for workspace role */\ninterface WorkspaceUIConfig {\n  showMembersList: boolean\n  showPendingTab: boolean\n  showSearch: boolean\n  showDateColumn: boolean\n  showRoleBadge: boolean\n  membersGridCols: string\n  pendingGridCols: string\n  headerGridCols: string\n  showEditWorkspaceMenuItem: boolean\n  workspaceMenuAction: 'leave' | 'delete' | null\n  workspaceMenuDisabledTooltip: string | null\n}\n\nfunction getPermissions(\n  type: WorkspaceType,\n  role: WorkspaceRole\n): WorkspacePermissions {\n  if (type === 'personal') {\n    return {\n      canViewOtherMembers: false,\n      canViewPendingInvites: false,\n      canInviteMembers: false,\n      canManageInvites: false,\n      canRemoveMembers: false,\n      canLeaveWorkspace: false,\n      canAccessWorkspaceMenu: false,\n      canManageSubscription: true\n    }\n  }\n\n  if (role === 'owner') {\n    return {\n      canViewOtherMembers: true,\n      canViewPendingInvites: true,\n      canInviteMembers: true,\n      canManageInvites: true,\n      canRemoveMembers: true,\n      canLeaveWorkspace: true,\n      canAccessWorkspaceMenu: true,\n      canManageSubscription: true\n    }\n  }\n\n  // member role\n  return {\n    canViewOtherMembers: true,\n    canViewPendingInvites: false,\n    canInviteMembers: false,\n    canManageInvites: false,\n    canRemoveMembers: false,\n    canLeaveWorkspace: true,\n    canAccessWorkspaceMenu: true,\n    canManageSubscription: false\n  }\n}\n\nfunction getUIConfig(\n  type: WorkspaceType,\n  role: WorkspaceRole\n): WorkspaceUIConfig {\n  if (type === 'personal') {\n    return {\n      showMembersList: false,\n      showPendingTab: false,\n      showSearch: false,\n      showDateColumn: false,\n      showRoleBadge: false,\n      membersGridCols: 'grid-cols-1',\n      pendingGridCols: 'grid-cols-[50%_20%_20%_10%]',\n      headerGridCols: 'grid-cols-1',\n      showEditWorkspaceMenuItem: false,\n      workspaceMenuAction: null,\n      workspaceMenuDisabledTooltip: null\n    }\n  }\n\n  if (role === 'owner') {\n    return {\n      showMembersList: true,\n      showPendingTab: true,\n      showSearch: true,\n      showDateColumn: true,\n      showRoleBadge: true,\n      membersGridCols: 'grid-cols-[50%_40%_10%]',\n      pendingGridCols: 'grid-cols-[50%_20%_20%_10%]',\n      headerGridCols: 'grid-cols-[50%_40%_10%]',\n      showEditWorkspaceMenuItem: true,\n      workspaceMenuAction: 'delete',\n      workspaceMenuDisabledTooltip:\n        'workspacePanel.menu.deleteWorkspaceDisabledTooltip'\n    }\n  }\n\n  // member role\n  return {\n    showMembersList: true,\n    showPendingTab: false,\n    showSearch: true,\n    showDateColumn: true,\n    showRoleBadge: true,\n    membersGridCols: 'grid-cols-[1fr_auto]',\n    pendingGridCols: 'grid-cols-[50%_20%_20%_10%]',\n    headerGridCols: 'grid-cols-[1fr_auto]',\n    showEditWorkspaceMenuItem: false,\n    workspaceMenuAction: 'leave',\n    workspaceMenuDisabledTooltip: null\n  }\n}\n\n/**\n * Internal implementation of UI configuration composable.\n */\nfunction useWorkspaceUIInternal() {\n  const store = useTeamWorkspaceStore()\n\n  // Tab management (shared UI state)\n  const activeTab = ref<string>('plan')\n\n  function setActiveTab(tab: string | number) {\n    activeTab.value = String(tab)\n  }\n\n  const workspaceType = computed<WorkspaceType>(\n    () => store.activeWorkspace?.type ?? 'personal'\n  )\n\n  const workspaceRole = computed<WorkspaceRole>(\n    () => store.activeWorkspace?.role ?? 'owner'\n  )\n\n  const permissions = computed<WorkspacePermissions>(() =>\n    getPermissions(workspaceType.value, workspaceRole.value)\n  )\n\n  const uiConfig = computed<WorkspaceUIConfig>(() =>\n    getUIConfig(workspaceType.value, workspaceRole.value)\n  )\n\n  return {\n    // Tab management\n    activeTab: computed(() => activeTab.value),\n    setActiveTab,\n\n    // Permissions and config\n    permissions,\n    uiConfig,\n    workspaceType,\n    workspaceRole\n  }\n}\n\n/**\n * UI configuration composable derived from workspace state.\n * Controls what UI elements are visible/enabled based on role and workspace type.\n * Uses createSharedComposable to ensure tab state is shared across components.\n */\nexport const useWorkspaceUI = createSharedComposable(useWorkspaceUIInternal)\n"],"mappings":"4OAiCA,SAAS,eACP,EACA,EACsB,CA4BtB,OA3BI,IAAS,WACJ,CACL,oBAAqB,GACrB,sBAAuB,GACvB,iBAAkB,GAClB,iBAAkB,GAClB,iBAAkB,GAClB,kBAAmB,GACnB,uBAAwB,GACxB,sBAAuB,GACxB,CAGC,IAAS,QACJ,CACL,oBAAqB,GACrB,sBAAuB,GACvB,iBAAkB,GAClB,iBAAkB,GAClB,iBAAkB,GAClB,kBAAmB,GACnB,uBAAwB,GACxB,sBAAuB,GACxB,CAII,CACL,oBAAqB,GACrB,sBAAuB,GACvB,iBAAkB,GAClB,iBAAkB,GAClB,iBAAkB,GAClB,kBAAmB,GACnB,uBAAwB,GACxB,sBAAuB,GACxB,CAGH,SAAS,YACP,EACA,EACmB,CAmCnB,OAlCI,IAAS,WACJ,CACL,gBAAiB,GACjB,eAAgB,GAChB,WAAY,GACZ,eAAgB,GAChB,cAAe,GACf,gBAAiB,cACjB,gBAAiB,8BACjB,eAAgB,cAChB,0BAA2B,GAC3B,oBAAqB,KACrB,6BAA8B,KAC/B,CAGC,IAAS,QACJ,CACL,gBAAiB,GACjB,eAAgB,GAChB,WAAY,GACZ,eAAgB,GAChB,cAAe,GACf,gBAAiB,0BACjB,gBAAiB,8BACjB,eAAgB,0BAChB,0BAA2B,GAC3B,oBAAqB,SACrB,6BACE,qDACH,CAII,CACL,gBAAiB,GACjB,eAAgB,GAChB,WAAY,GACZ,eAAgB,GAChB,cAAe,GACf,gBAAiB,uBACjB,gBAAiB,8BACjB,eAAgB,uBAChB,0BAA2B,GAC3B,oBAAqB,QACrB,6BAA8B,KAC/B,CAMH,SAAS,wBAAyB,CAChC,IAAM,EAAQ,GAAuB,CAG/B,EAAY,EAAY,OAAO,CAErC,SAAS,aAAa,EAAsB,CAC1C,EAAU,MAAQ,OAAO,EAAI,CAG/B,IAAM,EAAgB,MACd,EAAM,iBAAiB,MAAQ,WACtC,CAEK,EAAgB,MACd,EAAM,iBAAiB,MAAQ,QACtC,CAEK,EAAc,MAClB,eAAe,EAAc,MAAO,EAAc,MAAM,CACzD,CAEK,EAAW,MACf,YAAY,EAAc,MAAO,EAAc,MAAM,CACtD,CAED,MAAO,CAEL,UAAW,MAAe,EAAU,MAAM,CAC1C,aAGA,cACA,WACA,gBACA,gBACD,oBAxK2B,IACS,IAGD,CA4KzB,EAAiB,EAAuB,uBAAuB"}