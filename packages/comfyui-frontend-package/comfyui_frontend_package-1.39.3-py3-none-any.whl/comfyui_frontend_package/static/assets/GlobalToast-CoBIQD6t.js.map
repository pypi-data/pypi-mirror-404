{"version":3,"file":"GlobalToast-CoBIQD6t.js","names":[],"sources":["../../src/components/toast/GlobalToast.vue","../../src/components/toast/GlobalToast.vue"],"sourcesContent":["<template>\n  <Toast />\n</template>\n\n<script setup lang=\"ts\">\nimport Toast from 'primevue/toast'\nimport { useToast } from 'primevue/usetoast'\nimport { nextTick, watch } from 'vue'\n\nimport { useSettingStore } from '@/platform/settings/settingStore'\nimport { useToastStore } from '@/platform/updates/common/toastStore'\n\nconst toast = useToast()\nconst toastStore = useToastStore()\nconst settingStore = useSettingStore()\n\nwatch(\n  () => toastStore.messagesToAdd,\n  (newMessages) => {\n    if (newMessages.length === 0) {\n      return\n    }\n\n    newMessages.forEach((message) => {\n      toast.add(message)\n    })\n    toastStore.messagesToAdd = []\n  },\n  { deep: true }\n)\n\nwatch(\n  () => toastStore.messagesToRemove,\n  (messagesToRemove) => {\n    if (messagesToRemove.length === 0) {\n      return\n    }\n\n    messagesToRemove.forEach((message) => {\n      toast.remove(message)\n    })\n    toastStore.messagesToRemove = []\n  },\n  { deep: true }\n)\n\nwatch(\n  () => toastStore.removeAllRequested,\n  (requested) => {\n    if (requested) {\n      toast.removeAllGroups()\n      toastStore.removeAllRequested = false\n    }\n  }\n)\n\nfunction updateToastPosition() {\n  const styleElement =\n    document.getElementById('dynamic-toast-style') || createStyleElement()\n  const rect = document\n    .querySelector('.graph-canvas-container')\n    ?.getBoundingClientRect()\n  if (!rect) return\n\n  styleElement.textContent = `\n    .p-toast.p-component.p-toast-top-right {\n      top: ${rect.top + 100}px !important;\n      right: ${window.innerWidth - (rect.left + rect.width) + 20}px !important;\n       z-index: 10000 !important;\n    }\n  `\n}\n\nfunction createStyleElement() {\n  const style = document.createElement('style')\n  style.id = 'dynamic-toast-style'\n  document.head.appendChild(style)\n  return style\n}\n\nwatch(\n  () => settingStore.get('Comfy.UseNewMenu'),\n  () => nextTick(updateToastPosition),\n  { immediate: true }\n)\nwatch(\n  () => settingStore.get('Comfy.Sidebar.Location'),\n  () => nextTick(updateToastPosition),\n  { immediate: true }\n)\n</script>\n","<template>\n  <Toast />\n</template>\n\n<script setup lang=\"ts\">\nimport Toast from 'primevue/toast'\nimport { useToast } from 'primevue/usetoast'\nimport { nextTick, watch } from 'vue'\n\nimport { useSettingStore } from '@/platform/settings/settingStore'\nimport { useToastStore } from '@/platform/updates/common/toastStore'\n\nconst toast = useToast()\nconst toastStore = useToastStore()\nconst settingStore = useSettingStore()\n\nwatch(\n  () => toastStore.messagesToAdd,\n  (newMessages) => {\n    if (newMessages.length === 0) {\n      return\n    }\n\n    newMessages.forEach((message) => {\n      toast.add(message)\n    })\n    toastStore.messagesToAdd = []\n  },\n  { deep: true }\n)\n\nwatch(\n  () => toastStore.messagesToRemove,\n  (messagesToRemove) => {\n    if (messagesToRemove.length === 0) {\n      return\n    }\n\n    messagesToRemove.forEach((message) => {\n      toast.remove(message)\n    })\n    toastStore.messagesToRemove = []\n  },\n  { deep: true }\n)\n\nwatch(\n  () => toastStore.removeAllRequested,\n  (requested) => {\n    if (requested) {\n      toast.removeAllGroups()\n      toastStore.removeAllRequested = false\n    }\n  }\n)\n\nfunction updateToastPosition() {\n  const styleElement =\n    document.getElementById('dynamic-toast-style') || createStyleElement()\n  const rect = document\n    .querySelector('.graph-canvas-container')\n    ?.getBoundingClientRect()\n  if (!rect) return\n\n  styleElement.textContent = `\n    .p-toast.p-component.p-toast-top-right {\n      top: ${rect.top + 100}px !important;\n      right: ${window.innerWidth - (rect.left + rect.width) + 20}px !important;\n       z-index: 10000 !important;\n    }\n  `\n}\n\nfunction createStyleElement() {\n  const style = document.createElement('style')\n  style.id = 'dynamic-toast-style'\n  document.head.appendChild(style)\n  return style\n}\n\nwatch(\n  () => settingStore.get('Comfy.UseNewMenu'),\n  () => nextTick(updateToastPosition),\n  { immediate: true }\n)\nwatch(\n  () => settingStore.get('Comfy.Sidebar.Location'),\n  () => nextTick(updateToastPosition),\n  { immediate: true }\n)\n</script>\n"],"mappings":"0TCKkB,IACO,IAGO,IACF,oCAE9B,IAAM,EAAQ,GAAS,CACjB,EAAa,GAAc,CAC3B,EAAe,GAAgB,CAErC,MACQ,EAAW,cAChB,GAAgB,CACX,EAAY,SAAW,IAI3B,EAAY,QAAS,GAAY,CAC/B,EAAM,IAAI,EAAO,EAClB,CACD,EAAW,cAAgB,EAAC,GAE9B,CAAE,KAAM,GAAK,CACf,CAEA,MACQ,EAAW,iBAChB,GAAqB,CAChB,EAAiB,SAAW,IAIhC,EAAiB,QAAS,GAAY,CACpC,EAAM,OAAO,EAAO,EACrB,CACD,EAAW,iBAAmB,EAAC,GAEjC,CAAE,KAAM,GAAK,CACf,CAEA,MACQ,EAAW,mBAChB,GAAc,CACT,IACF,EAAM,iBAAgB,CACtB,EAAW,mBAAqB,KAGtC,CAEA,SAAS,qBAAsB,CAC7B,IAAM,EACJ,SAAS,eAAe,sBAAsB,EAAI,oBAAmB,CACjE,EAAO,SACV,cAAc,0BAAyB,EACtC,uBAAsB,CACrB,IAEL,EAAa,YAAc;;aAEhB,EAAK,IAAM,IAAI;eACb,OAAO,YAAc,EAAK,KAAO,EAAK,OAAS,GAAG;;;KAMjE,SAAS,oBAAqB,CAC5B,IAAM,EAAQ,SAAS,cAAc,QAAO,CAG5C,MAFA,GAAM,GAAK,sBACX,SAAS,KAAK,YAAY,EAAK,CACxB,SAGT,MACQ,EAAa,IAAI,mBAAmB,KACpC,EAAS,oBAAoB,CACnC,CAAE,UAAW,GAAK,CACpB,CACA,MACQ,EAAa,IAAI,yBAAyB,KAC1C,EAAS,oBAAoB,CACnC,CAAE,UAAW,GAAK,CACpB"}