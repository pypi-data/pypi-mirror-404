{"version":3,"file":"remoteConfig-CyTTjg6h.js","names":[],"sources":["../../src/platform/remoteConfig/remoteConfig.ts"],"sourcesContent":["/**\n * Remote configuration service\n *\n * Fetches configuration from the server at runtime, enabling:\n * - Feature flags without rebuilding\n * - Server-side feature discovery\n * - Version compatibility management\n * - Avoiding vendor lock-in for native apps\n *\n * This module is tree-shaken in OSS builds.\n */\n\nimport { computed, ref } from 'vue'\n\nimport type { RemoteConfig } from './types'\n\n/**\n * Load state for remote configuration.\n * - 'unloaded': No config loaded yet\n * - 'anonymous': Config loaded without auth (bootstrap)\n * - 'authenticated': Config loaded with auth (user-specific flags available)\n * - 'error': Failed to load config\n */\ntype RemoteConfigState = 'unloaded' | 'anonymous' | 'authenticated' | 'error'\n\n/**\n * Current load state of remote configuration\n */\nexport const remoteConfigState = ref<RemoteConfigState>('unloaded')\n\n/**\n * Whether the authenticated config has been loaded.\n * Use this to gate access to user-specific feature flags like teamWorkspacesEnabled.\n */\nexport const isAuthenticatedConfigLoaded = computed(\n  () => remoteConfigState.value === 'authenticated'\n)\n\n/**\n * Reactive remote configuration\n * Updated whenever config is loaded from the server\n */\nexport const remoteConfig = ref<RemoteConfig>({})\n\nexport function configValueOrDefault<K extends keyof RemoteConfig>(\n  remoteConfig: RemoteConfig,\n  key: K,\n  defaultValue: NonNullable<RemoteConfig[K]>\n): NonNullable<RemoteConfig[K]> {\n  const configValue = remoteConfig[key]\n  return configValue || defaultValue\n}\n"],"mappings":"6HA4CA,SAAgB,qBACd,EACA,EACA,EAC8B,CAE9B,OADoB,EAAa,IACX,yBAtCM,CAgBjB,EAAoB,EAAuB,WAAW,CAMtD,EAA8B,MACnC,EAAkB,QAAU,gBACnC,CAMY,EAAe,EAAkB,EAAE,CAAC"}