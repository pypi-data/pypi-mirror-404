import{i as e,n as t}from"./rolldown-runtime-BKYq3fBv.js";import{an as n,on as r}from"./api-DwS-Gkat.js";import{r as i,s as a}from"./i18n-DJtXHmer.js";import{Go as o,Ho as s,Ko as c,Uo as l,Wo as u}from"./dialogService-DMnraGWZ.js";async function performSubscriptionCheckout(e,t,n=!0){if(!r)return;let{getFirebaseAuthHeader:i}=u(),c=await i();if(!c)throw new s(a(`toastMessages.userNotAuthenticated`));let l=getCheckoutTier(e,t),d=await fetch(`${o()}/customers/cloud-subscription-checkout/${l}`,{method:`POST`,headers:{...c,"Content-Type":`application/json`}});if(!d.ok){let e=`Failed to initiate checkout`;try{e=(await d.json()).message||e}catch{try{e=await d.text()||`HTTP ${d.status} ${d.statusText}`}catch{e=`HTTP ${d.status} ${d.statusText}`}}throw new s(a(`toastMessages.failedToInitiateSubscription`,{error:e}))}let f=await d.json();f.checkout_url&&(n?window.open(f.checkout_url,`_blank`):globalThis.location.href=f.checkout_url)}var getCheckoutTier,d=t((()=>{c(),i(),n(),l(),getCheckoutTier=(e,t)=>t===`yearly`?`${e}-yearly`:e}));export{performSubscriptionCheckout as n,d as t};
//# sourceMappingURL=subscriptionCheckoutUtil-Dgxk0YMw.js.map