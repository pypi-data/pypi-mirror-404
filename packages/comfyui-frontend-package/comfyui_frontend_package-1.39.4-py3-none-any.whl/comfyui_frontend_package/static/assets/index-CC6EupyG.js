const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CloudLayoutView-CqrApL-3.js","./_plugin-vue_export-helper-Ckv1EJQX.js","./rolldown-runtime-BKYq3fBv.js","./vendor-primevue-Cg-HmKZY.js","./vendor-other-CoxDvJ0a.js","./vendor-three-J548ptDO.js","./vendor-tiptap-B3MquJdf.js","./vendor-vue-J4jYbuLn.js","./vendor-other-CaaUC6Qe.css","./GlobalToast-DxmODWzE.js","./dialogService-DMnraGWZ.js","./vendor-reka-ui-C5bN2j5U.js","./vendor-xterm-CLifWSRJ.js","./vendor-xterm-kHJ-D0s7.css","./PanelTemplate-C_M5tiqP.js","./api-DwS-Gkat.js","./i18n-DJtXHmer.js","./widget-D00AxrDc.js","./colorUtil-Do_0yTBp.js","./tailwindUtil-F1kyO01s.js","./Button-YQy7RkKq.js","./Slider-DMqJVvz2.js","./useErrorHandling-CgXJfHhY.js","./remoteConfig-CyTTjg6h.js","./userStore-CZZm9e-w.js","./widgetTypes-B2p76Yu_.js","./markdownRendererUtil-DmdQK-pX.js","./dialogService-DwhbWF6i.css","./BaseViewTemplate-BQ-ELnEU.js","./CloudLayoutView-CRIL4g5f.css","./CloudLoginView-6L_Vs4K5.js","./previousFullPath-p7j9JQSU.js","./CloudLoginView-1gcQ_jIf.css","./useCurrentUser-d9pvkIF1.js","./CloudSignupView-RzUSRJXa.js","./CloudSignupView-YgrB8UJ5.css","./CloudForgotPasswordView-DDZT0x9t.js","./CloudForgotPasswordView-BSMBvT-Y.css","./CloudSurveyView-CQ__k8b8.js","./auth-xg_2pn9E.js","./CloudSurveyView-BS7kjG6B.css","./UserCheckView-Cfip06ad.js","./CloudSorryContactSupportView-DUiutQfd.js","./CloudSorryContactSupportView-cvR6d1qS.css","./CloudAuthTimeoutView-DhcV6R8u.js","./CloudSubscriptionRedirectView-BtMFBOM0.js","./subscriptionCheckoutUtil-Dgxk0YMw.js","./GraphView-GQDcw8cU.js","./LazyImage-BcC2lrC2.js","./UserAvatar-BHBnMJq5.js","./Load3DControls-DvTHFQEV.js","./TopbarBadge-B9brXSIU.js","./WidgetWithControl-C6Aj5JzC.js","./SubscribeButton-DtRpmn6W.js","./SubscribeToRun-jwzANeiM.js","./useSubscriptionDialog-CMPayoTE.js","./keybindingService-DZhmCwkU.js","./config-XBTb1J8Z.js","./releaseStore-CsGj-cqH.js","./WidgetInputNumber-DoSAt0wP.js","./WidgetLayoutField-Cnd0sCOy.js","./layout-76mT7BZg.js","./widgetPropFilter-BN2p2qia.js","./WidgetInputNumber-rqpFMwbY.css","./bootstrapStore-DdVzr2cO.js","./serverConfigStore-CmQbpqO8.js","./graphHasMissingNodes-Q92Pb3-q.js","./GraphView-CXynyf1I.css","./UserSelectView-DahgUR6u.js","./auth-DZ3N8E7k.js","./refreshRemoteConfig-B-2pgM9d.js","./refreshRemoteConfig-DRgA6yA3.js"])))=>i.map(i=>d[i]);
import{i as e,n as t}from"./rolldown-runtime-BKYq3fBv.js";import{$n as n,An as r,Cn as i,Cr as a,Dn as o,Dr as ee,Er as te,Et as ne,Gn as s,Gt as c,Jt as re,Kt as ie,Ln as ae,Nn as l,On as oe,Qn as u,Rr as d,Sn as se,Tr as ce,Tt as le,Xn as ue,Xr as de,Zn as fe,ai as f,ar as p,bn as m,br as h,er as g,fi as _,hi as pe,hr as v,kn as me,kr as y,mi as he,nr as ge,pi as _e,qt as ve,sr as b,ui as ye,wn as be,xn as xe,yn as x}from"./vendor-primevue-Cg-HmKZY.js";import{Ct as Se,Er as Ce,Or as we,Tn as Te,Tr as Ee,Un as De,Xn as S,an as Oe,ar as ke,fn as C,in as Ae,ir as je,jt as Me,kr as Ne,on as Pe,or as Fe,sn as Ie,wr as Le}from"./vendor-other-CoxDvJ0a.js";import{i as w,r as T,t as Re}from"./vendor-vue-J4jYbuLn.js";import{an as E,dn as D,ln as ze,on as O,un as k}from"./api-DwS-Gkat.js";import{i as Be,n as Ve}from"./remoteConfig-CyTTjg6h.js";import{n as He,r as Ue}from"./i18n-DJtXHmer.js";import{i as A,r as j}from"./useErrorHandling-CgXJfHhY.js";import{B as We,H as Ge,Uo as M,V as Ke,Wo as N,at as qe,c as Je,d as Ye,da as Xe,hn as P,it as Ze,l as F,m as Qe,mn as $e,n as et,p as tt,s as nt,t as rt,u as it,ua as at,z as ot}from"./dialogService-DMnraGWZ.js";import{n as st,t as ct}from"./userStore-CZZm9e-w.js";import{n as lt,t as ut}from"./refreshRemoteConfig-DRgA6yA3.js";import{n as dt,t as ft}from"./bootstrapStore-DdVzr2cO.js";var pt=t((()=>{(function polyfill(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))processPreload(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&processPreload(e)}).observe(document,{childList:!0,subtree:!0});function getFetchOpts(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function processPreload(e){if(e.ep)return;e.ep=!0;let t=getFetchOpts(e);fetch(e.href,t)}})()})),mt=t((()=>{}));function getFirebaseConfig(){return O?Be.value.firebase_config??I:I}var I,ht=t((()=>{E(),Ve(),I={apiKey:`AIzaSyC2-fomLqgCjb7ELwta1I9cEarPK8ziTGs`,authDomain:`dreamboothy.firebaseapp.com`,databaseURL:`https://dreamboothy-default-rtdb.firebaseio.com`,projectId:`dreamboothy`,storageBucket:`dreamboothy.appspot.com`,messagingSenderId:`357148958219`,appId:`1:357148958219:web:f5917f72e5f36a2015310e`,measurementId:`G-3ZBD3MBTG4`}})),gt=t((()=>{})),L,R,z,B,V=t((()=>{l(),C(),T(),c(),j(),E(),ut(),nt(),M(),L={key:1,class:`fixed inset-0 z-[1100] flex items-center justify-center bg-[var(--p-mask-background)]`},R=16e3,z=1e4,B=b({__name:`WorkspaceAuthGate`,setup(e){let t=de(!O);async function initialize(){if(!O)return;let{isInitialized:e,currentUser:n}=w(N());try{if(e.value||await S(e).toBe(!0,{timeout:R}),!n.value){t.value=!0;return}try{await Promise.race([lt({useAuth:!0}),De(z).then(()=>{throw Error(`Config refresh timeout`)})])}catch(e){console.warn(`[WorkspaceAuthGate] Failed to refresh remote config:`,e)}let{flags:r}=A();if(!r.teamWorkspacesEnabled){t.value=!0;return}await initializeWorkspaceMode()}catch(e){console.error(`[WorkspaceAuthGate] Initialization failed:`,e)}finally{t.value=!0}}async function initializeWorkspaceMode(){try{let e=Je();e.initState===`uninitialized`&&await e.initialize()}catch(e){console.warn(`[WorkspaceAuthGate] Failed to initialize workspace store:`,e)}}return h(()=>{initialize()}),(e,n)=>t.value?te(e.$slots,`default`,{key:0}):(a(),g(`div`,L,[p(f(ie))]))}})})),H,_t=t((()=>{V(),V(),H=B})),vt,U,W=t((()=>{l(),C(),_t(),vt={class:`relative h-full w-full overflow-hidden`},U=b({__name:`LayoutDefault`,setup(e){return Te(`/assets/favicon.ico`),(e,t)=>{let n=ee(`router-view`);return a(),u(H,null,{default:d(()=>[fe(`main`,vt,[p(n)])]),_:1})}}})})),G,yt=t((()=>{W(),W(),G=U})),installPreservedQueryTracker,bt=t((()=>{Qe(),installPreservedQueryTracker=(e,t)=>{let n=t.map(e=>({...e}));e.beforeEach((e,t,r)=>{let i=new Set(Object.keys(e.query));n.forEach(({namespace:t,keys:n})=>{tt(t),n.some(e=>i.has(e))&&Ye(t,e.query,n)}),r()})}})),K,xt=t((()=>{m(),K=[{path:`/cloud`,component:()=>x(()=>import(`./CloudLayoutView-CqrApL-3.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]),import.meta.url),children:[{path:`login`,name:`cloud-login`,component:()=>x(()=>import(`./CloudLoginView-6L_Vs4K5.js`),__vite__mapDeps([30,1,2,3,10,4,5,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,31,32]),import.meta.url),beforeEnter:async(e,t,n)=>{if(!e.query.switchAccount){let{useCurrentUser:e}=await x(async()=>{let{useCurrentUser:e}=await import(`./useCurrentUser-d9pvkIF1.js`);return{useCurrentUser:e}},__vite__mapDeps([33,10,1,2,3,4,5,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]),import.meta.url),{isLoggedIn:t}=e();if(t.value)return n({name:`cloud-user-check`})}n()}},{path:`signup`,name:`cloud-signup`,component:()=>x(()=>import(`./CloudSignupView-RzUSRJXa.js`),__vite__mapDeps([34,1,2,3,10,4,5,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,31,35]),import.meta.url)},{path:`forgot-password`,name:`cloud-forgot-password`,component:()=>x(()=>import(`./CloudForgotPasswordView-DDZT0x9t.js`),__vite__mapDeps([36,1,2,3,10,4,5,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,37]),import.meta.url)},{path:`survey`,name:`cloud-survey`,component:()=>x(()=>import(`./CloudSurveyView-CQ__k8b8.js`),__vite__mapDeps([38,1,2,3,10,4,5,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,39,40]),import.meta.url),meta:{requiresAuth:!0}},{path:`user-check`,name:`cloud-user-check`,component:()=>x(()=>import(`./UserCheckView-Cfip06ad.js`),__vite__mapDeps([41,3,2,4,5,6,7,8,20,11,19,22,15,16,17,18,23,39]),import.meta.url),meta:{requiresAuth:!0}},{path:`sorry-contact-support`,name:`cloud-sorry-contact-support`,component:()=>x(()=>import(`./CloudSorryContactSupportView-DUiutQfd.js`),__vite__mapDeps([42,1,2,3,4,5,6,7,8,43]),import.meta.url)},{path:`auth-timeout`,name:`cloud-auth-timeout`,component:()=>x(()=>import(`./CloudAuthTimeoutView-DhcV6R8u.js`),__vite__mapDeps([44,3,2,10,1,4,5,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]),import.meta.url),props:!0},{path:`subscribe`,name:`cloud-subscribe`,component:()=>x(()=>import(`./CloudSubscriptionRedirectView-BtMFBOM0.js`),__vite__mapDeps([45,3,2,10,1,4,5,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,46]),import.meta.url),meta:{requiresAuth:!0}}]}]}));function getBasePath(){return D()?`/`:O?`./`:window.location.pathname}var q,J,Y,X,St=t((()=>{if(C(),T(),Ie(),j(),E(),rt(),M(),ct(),k(),yt(),bt(),it(),xt(),m(),q=window.location.protocol===`file:`,J=getBasePath(),Y=Ae({history:q?Oe():Pe(J),routes:[...O?K:[],{path:`/`,component:G,children:[{path:``,name:`GraphView`,component:()=>x(()=>import(`./GraphView-GQDcw8cU.js`),__vite__mapDeps([47,1,2,3,10,4,5,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,48,49,50,9,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67]),import.meta.url),beforeEnter:async(e,t,n)=>{let r=st();await r.initialize(),r.needsLogin?n(`/user-select`):n()}},{path:`user-select`,name:`UserSelectView`,component:()=>x(()=>import(`./UserSelectView-DahgUR6u.js`),__vite__mapDeps([68,3,2,4,5,6,7,8,20,11,19,24,15,16,17,18,28]),import.meta.url)}]}],scrollBehavior(e,t,n){return n||{top:0}}}),installPreservedQueryTracker(Y,[{namespace:F.TEMPLATE,keys:[`template`,`source`,`mode`]},{namespace:F.INVITE,keys:[`invite`]}]),O){let{flags:e}=A(),t=new Set([`cloud-login`,`cloud-signup`,`cloud-forgot-password`,`cloud-sorry-contact-support`]),n=new Set([`/cloud/login`,`/cloud/signup`,`/cloud/forgot-password`,`/cloud/sorry-contact-support`]);function isPublicRoute(e){let r=String(e.name);if(t.has(r))return!0;let i=e.path;return n.has(i)}Y.beforeEach(async(t,n,r)=>{let i=N();if(!i.isInitialized)try{let{isInitialized:e}=w(i);await S(e).toBe(!0,{timeout:16e3})}catch(e){return console.error(`Auth initialization failed:`,e),r({name:`cloud-auth-timeout`})}let a=!!await i.getAuthHeader();if(isPublicRoute(t))return r();if(t.name===`cloud-user-check`)return t.meta.requiresAuth&&!a?r({name:`cloud-login`}):r();if(n.name===`cloud-user-check`&&t.path===`/`)return r();let o=t.fullPath===`/`?void 0:{previousFullPath:encodeURIComponent(t.fullPath)};if(t.meta.requiresAuth&&!a)return r({name:`cloud-login`,query:o});if(!a)return D()?await et().showSignInDialog()?r():r(!1):r({name:`cloud-login`,query:o});if(!D()&&a&&t.path===`/`){if(!e.onboardingSurveyEnabled)return r();let{getSurveyCompletedStatus:t}=await x(async()=>{let{getSurveyCompletedStatus:e}=await import(`./auth-DZ3N8E7k.js`);return{getSurveyCompletedStatus:e}},__vite__mapDeps([69,39,4,3,2,5,6,7,8,15,16,17,18]),import.meta.url);try{if(!await t())return r({name:`cloud-survey`})}catch(e){return console.error(`Failed to check user status:`,e),r({name:`cloud-user-check`})}}return r()})}X=Y})),Ct,Z,wt,Tt=t((()=>{l(),Se(),ve(),j(),E(),at(),Ct={key:0},Z=[`id`],wt=b({__name:`GlobalDialog`,setup(e){let{flags:t}=A(),r=ue(()=>O&&t.teamWorkspacesEnabled),i=Xe();function getDialogPt(e){let t=e.key===`global-settings`&&r.value,n=e.dialogComponentProps.pt||{};return t?Me(n,{mask:{class:`p-8`}}):n}return(e,t)=>(a(!0),g(s,null,ce(f(i).dialogStack,e=>(a(),u(f(re),v({key:e.key,visible:e.visible,"onUpdate:visible":t=>e.visible=t,class:[`global-dialog`,e.key===`global-settings`&&r.value?`settings-dialog-workspace`:``],ref_for:!0},e.dialogComponentProps,{pt:getDialogPt(e),"aria-labelledby":e.key}),ge({header:d(()=>[e.dialogComponentProps?.headless?n(``,!0):(a(),g(`div`,Ct,[e.headerComponent?(a(),u(y(e.headerComponent),v({key:0,ref_for:!0},e.headerProps,{id:e.key}),null,16,[`id`])):(a(),g(`h3`,{key:1,id:e.key},ye(e.title||` `),9,Z))]))]),default:d(()=>[(a(),u(y(e.component),v({ref_for:!0},e.contentProps,{maximized:e.dialogComponentProps.maximized}),null,16,[`maximized`]))]),_:2},[e.footerComponent?{name:`footer`,fn:d(()=>[(a(),u(y(e.footerComponent),v({ref_for:!0},e.footerProps),null,16))]),key:`0`}:void 0]),1040,[`visible`,`onUpdate:visible`,`class`,`pt`,`aria-labelledby`]))),128))}})})),Et=t((()=>{})),Dt,Ot=t((()=>{Tt(),Tt(),Et(),Dt=wt})),kt,At=t((()=>{l(),le(),c(),Ot(),Ge(),$e(),ot(),k(),qe(),kt=b({__name:`App`,setup(e){let t=P();Ze.extensionManager=P();let r=We(),i=ue(()=>t.spinner),showContextMenu=e=>{let{target:t}=e;switch(!0){case t instanceof HTMLTextAreaElement:case t instanceof HTMLInputElement&&t.type===`text`:ze()?.showContextMenu({type:`text`});return}};return h(()=>{window.__COMFYUI_FRONTEND_VERSION__=Ke.app_version,D()&&document.addEventListener(`contextmenu`,showContextMenu),window.addEventListener(`vite:preloadError`,e=>{e.preventDefault(),console.error(`[vite:preloadError]`,e.payload)}),r.initializeConflictDetection()}),(e,t)=>{let r=ee(`router-view`);return a(),g(s,null,[p(r),i.value?(a(),u(f(ie),{key:0,class:`absolute inset-0 flex h-[unset] items-center justify-center`})):n(``,!0),p(Dt),p(f(ne),{"full-screen":``,blocked:i.value},null,8,[`blocked`])],64)}}})})),jt,Mt=t((()=>{At(),At(),jt=kt})),Nt=t((()=>{})),Pt,Ft,Q,$,It=t((async()=>{if(he(),_e(),we(),Ee(),T(),Le(),me(),oe(),be(),se(),l(),Fe(),ht(),gt(),St(),ft(),Mt(),Nt(),Ue(),E(),m(),O){let{refreshRemoteConfig:e}=await x(async()=>{let{refreshRemoteConfig:e}=await import(`./refreshRemoteConfig-B-2pgM9d.js`);return{refreshRemoteConfig:e}},__vite__mapDeps([70,71,15,3,2,4,5,6,7,8,16,17,18,23]),import.meta.url);await e({useAuth:!1})}Pt=pe(_,{semantic:{primary:_.primitive.blue}}),Ft=Ce(getFirebaseConfig()),Q=ae(jt),$=Re(),Ne({app:Q,dsn:`https://e2d0c0bd392ffdce48e856c2a055f437@o4507954455314432.ingest.us.sentry.io/4508621568475136`,enabled:!0,release:`1.39.4`,normalizeDepth:8,tracesSampleRate:O?1:0,replaysSessionSampleRate:0,replaysOnErrorSampleRate:0,...O?{}:{integrations:[],autoSessionTracking:!1,defaultIntegrations:!1}}),Q.directive(`tooltip`,xe),Q.use(X).use(r,{theme:{preset:Pt,options:{prefix:`p`,cssLayer:{name:`primevue`,order:`theme, base, primevue`},darkModeSelector:`.dark-theme, :root:has(.dark-theme)`}}}).use(o).use(i).use($).use(He).use(je,{firebaseApp:Ft,modules:[ke()]}),dt($).startStoreBootstrap(),Q.mount(`#vue-app`)}));await t((async()=>{pt(),mt(),await It()}))();
//# sourceMappingURL=index-CC6EupyG.js.map