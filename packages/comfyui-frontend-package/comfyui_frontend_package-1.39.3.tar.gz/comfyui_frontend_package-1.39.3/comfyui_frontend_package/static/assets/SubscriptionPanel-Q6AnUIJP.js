const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SubscriptionPanelContentWorkspace-Sag7WE0L.js","./SubscriptionPanelContentWorkspace-927KK1ZO.js","./_plugin-vue_export-helper-Ckv1EJQX.js","./rolldown-runtime-BKYq3fBv.js","./vendor-primevue-Cg-HmKZY.js","./dialogService-DvYmp2_F.js","./vendor-other-CoxDvJ0a.js","./vendor-three-J548ptDO.js","./vendor-tiptap-B3MquJdf.js","./vendor-vue-J4jYbuLn.js","./vendor-other-CaaUC6Qe.css","./vendor-reka-ui-C5bN2j5U.js","./vendor-xterm-CLifWSRJ.js","./vendor-xterm-kHJ-D0s7.css","./PanelTemplate-hGipIJT8.js","./api-CJ30itpV.js","./i18n-gOSvTADh.js","./widget-D00AxrDc.js","./colorUtil-Do_0yTBp.js","./tailwindUtil-F1kyO01s.js","./Button-YQy7RkKq.js","./Slider-DMqJVvz2.js","./useErrorHandling-tavTBerX.js","./remoteConfig-CyTTjg6h.js","./userStore-Dm97A6Ww.js","./widgetTypes-B2p76Yu_.js","./markdownRendererUtil-DmdQK-pX.js","./dialogService-DwOUltBv.css","./useSubscriptionActions-C7hMido6.js","./useSubscriptionCredits--htUCYXg.js","./useSubscriptionDialog-B-H7bxB0.js","./useWorkspaceUI-DgiliDDq.js","./SubscriptionPanelContentWorkspace-DxiZIsXc.css"])))=>i.map(i=>d[i]);
import{i as e,n as t}from"./rolldown-runtime-BKYq3fBv.js";import{$n as n,C as r,Cr as i,Gn as a,Nn as o,Qn as s,Rr as c,Tr as l,Xn as u,Zn as d,ai as f,ar as p,bn as m,br as h,er as g,gn as _,hn as v,ir as y,or as ee,si as te,sr as b,ui as x,vr as ne,w as S,yn as C}from"./vendor-primevue-Cg-HmKZY.js";import{ot as w,st as re}from"./vendor-other-CoxDvJ0a.js";import{an as T,on as ie}from"./api-CJ30itpV.js";import{i as E,r as D}from"./useErrorHandling-tavTBerX.js";import{n as ae,t as O}from"./tailwindUtil-F1kyO01s.js";import{n as k,t as A}from"./Button-YQy7RkKq.js";import{N as j,P as M}from"./PanelTemplate-hGipIJT8.js";import{Ao as oe,Fo as se,Io as ce,Lo as le,Mo as N,No as ue,Ro as de,jo as P,ko as F,zo as I}from"./dialogService-DvYmp2_F.js";import{n as L,t as R}from"./_plugin-vue_export-helper-Ckv1EJQX.js";import{n as z,t as B}from"./useSubscriptionActions-C7hMido6.js";import{n as fe,t as V}from"./useSubscriptionCredits--htUCYXg.js";import{n as pe,t as me}from"./useSubscriptionDialog-B-H7bxB0.js";import{n as he,t as ge}from"./SubscribeButton-CNO16TVz.js";import{n as _e,t as ve}from"./CloudBadge-vCjVtcuF.js";var H,U,W,G,K,q,J,Y,X,Z,ye,be,xe,Se,Ce,we,Te,Ee,De,Oe,ke,Ae,je,Me,Ne,Pe,Fe,Ie,Le,Re,ze,Be,Q,Ve,$,He=t((()=>{o(),v(),w(),k(),F(),he(),P(),B(),V(),me(),I(),O(),H={class:`grow overflow-auto`},U={class:`rounded-2xl border border-interface-stroke p-6`},W={class:`flex items-center justify-between gap-2`},G={class:`flex flex-col gap-2`},K={class:`text-sm font-bold text-text-primary`},q={class:`flex items-baseline gap-1 font-inter font-semibold`},J={class:`text-2xl`},Y={class:`text-base`},X={key:0,class:`text-sm text-text-secondary`},Z={class:`flex flex-col lg:flex-row gap-6 pt-9`},ye={class:`flex flex-col shrink-0`},be={class:`flex flex-col gap-3`},xe={class:`flex flex-col gap-2`},Se={class:`text-sm text-muted`},Ce={key:1,class:`text-2xl font-bold`},we={class:`text-sm text-muted`},Te={class:`pr-4 font-bold text-left align-middle`},Ee={key:1},De=[`title`],Oe={class:`pr-4 font-bold text-left align-middle`},ke={key:1},Ae=[`title`],je={class:`flex items-center justify-between`},Me={href:`https://platform.comfy.org/profile/usage`,target:`_blank`,rel:`noopener noreferrer`,class:`text-sm underline text-center text-muted`},Ne={class:`flex flex-col gap-2`},Pe={class:`text-sm text-text-primary`},Fe={class:`flex flex-col gap-0`},Ie={key:0,class:`pi pi-check text-xs text-text-primary`},Le={key:1,class:`text-sm font-normal whitespace-nowrap text-text-primary`},Re={class:`text-sm text-muted`},ze={class:`flex items-center gap-2 py-4`},Be={href:`https://www.comfy.org/cloud/pricing`,target:`_blank`,rel:`noopener noreferrer`,class:`text-sm underline hover:opacity-80 text-muted`},Q=`pending_topup_timestamp`,Ve=300*1e3,$=b({__name:`SubscriptionPanelContentLegacy`,setup(e){let t=oe(),{t:r,n:o}=re(),{isActiveSubscription:m,isCancelled:v,formattedRenewalDate:ee,formattedEndDate:b,subscriptionTier:S,subscriptionTierName:C,subscriptionStatus:w,isYearlySubscription:T}=N(),{show:ie}=pe(),E=u(()=>{let e=S.value;return e?se[e]??`standard`:ue}),D=u(()=>de(E.value,T.value)),O=u(()=>{if(!w.value?.renewal_date)return``;let e=new Date(w.value.renewal_date),t=String(e.getDate()).padStart(2,`0`);return`${String(e.getMonth()+1).padStart(2,`0`)}/${t}/${String(e.getFullYear()).slice(-2)}`}),k=u(()=>T.value?r(`subscription.creditsRemainingThisYear`,{date:O.value}):r(`subscription.creditsRemainingThisMonth`,{date:O.value})),j=u(()=>{let e=ce(E.value);return o(T.value?e*12:e)}),M=u(()=>`${I.value} / ${j.value}`),P=u(()=>{let e=E.value,t=[{key:`maxDuration`,type:`metric`,value:r(`subscription.maxDuration.${e}`),label:r(`subscription.maxDurationLabel`)},{key:`gpu`,type:`feature`,label:r(`subscription.gpuLabel`)},{key:`addCredits`,type:`feature`,label:r(`subscription.addCreditsLabel`)}];return le(e).customLoRAs&&t.push({key:`customLoRAs`,type:`feature`,label:r(`subscription.customLoRAsLabel`)}),t}),{totalCredits:F,monthlyBonusCredits:I,prepaidCredits:L,isLoadingBalance:R}=fe(),{handleAddApiCredits:B,handleRefresh:V}=z();function handleWindowFocus(){let e=localStorage.getItem(Q);if(!e)return;let t=parseInt(e,10);if(Date.now()-t>Ve){localStorage.removeItem(Q);return}V(),localStorage.removeItem(Q)}return h(()=>{window.addEventListener(`focus`,handleWindowFocus)}),ne(()=>{window.removeEventListener(`focus`,handleWindowFocus)}),(e,r)=>(i(),g(`div`,H,[d(`div`,U,[d(`div`,null,[d(`div`,W,[d(`div`,G,[d(`div`,K,x(f(C)),1),d(`div`,q,[d(`span`,J,`$`+x(D.value),1),d(`span`,Y,x(e.$t(`subscription.perMonth`)),1)]),f(m)?(i(),g(`div`,X,[f(v)?(i(),g(a,{key:0},[y(x(e.$t(`subscription.expiresDate`,{date:f(b)})),1)],64)):(i(),g(a,{key:1},[y(x(e.$t(`subscription.renewsDate`,{date:f(ee)})),1)],64))])):n(``,!0)]),f(m)?(i(),s(A,{key:0,variant:`secondary`,class:`ml-auto rounded-lg px-4 py-2 text-sm font-normal text-text-primary bg-interface-menu-component-surface-selected`,onClick:r[0]||=async()=>{await f(t).accessBillingPortal()}},{default:c(()=>[y(x(e.$t(`subscription.manageSubscription`)),1)]),_:1})):n(``,!0),f(m)?(i(),s(A,{key:1,variant:`primary`,class:`rounded-lg px-4 py-2 text-sm font-normal text-text-primary`,onClick:f(ie)},{default:c(()=>[y(x(e.$t(`subscription.upgradePlan`)),1)]),_:1},8,[`onClick`])):n(``,!0),f(m)?n(``,!0):(i(),s(ge,{key:2,label:e.$t(`subscription.subscribeNow`),size:`sm`,fluid:!1,class:`text-xs`,onSubscribed:f(V)},null,8,[`label`,`onSubscribed`]))])]),d(`div`,Z,[d(`div`,ye,[d(`div`,be,[d(`div`,{class:te(f(ae)(`relative flex flex-col gap-6 rounded-2xl p-5`,`bg-modal-panel-background`))},[p(A,{variant:`muted-textonly`,size:`icon-sm`,class:`absolute top-4 right-4`,loading:f(R),onClick:f(V)},{default:c(()=>r[1]||=[d(`i`,{class:`pi pi-sync text-text-secondary text-sm`},null,-1)]),_:1},8,[`loading`,`onClick`]),d(`div`,xe,[d(`div`,Se,x(e.$t(`subscription.totalCredits`)),1),f(R)?(i(),s(f(_),{key:0,width:`8rem`,height:`2rem`})):(i(),g(`div`,Ce,x(f(F)),1))]),d(`table`,we,[d(`tbody`,null,[d(`tr`,null,[d(`td`,Te,[f(R)?(i(),s(f(_),{key:0,width:`5rem`,height:`1rem`})):(i(),g(`span`,Ee,x(M.value),1))]),d(`td`,{class:`align-middle`,title:k.value},x(k.value),9,De)]),d(`tr`,null,[d(`td`,Oe,[f(R)?(i(),s(f(_),{key:0,width:`3rem`,height:`1rem`})):(i(),g(`span`,ke,x(f(L)),1))]),d(`td`,{class:`align-middle`,title:e.$t(`subscription.creditsYouveAdded`)},x(e.$t(`subscription.creditsYouveAdded`)),9,Ae)])])]),d(`div`,je,[d(`a`,Me,x(e.$t(`subscription.viewUsageHistory`)),1),f(m)?(i(),s(A,{key:0,variant:`secondary`,class:`p-2 min-h-8 rounded-lg text-sm font-normal text-text-primary bg-interface-menu-component-surface-selected`,onClick:f(B)},{default:c(()=>[y(x(e.$t(`subscription.addCredits`)),1)]),_:1},8,[`onClick`])):n(``,!0)])],2)])]),d(`div`,Ne,[d(`div`,Pe,x(e.$t(`subscription.yourPlanIncludes`)),1),d(`div`,Fe,[(i(!0),g(a,null,l(P.value,e=>(i(),g(`div`,{key:e.key,class:`flex items-center gap-2 py-2`},[e.type===`feature`?(i(),g(`i`,Ie)):e.type===`metric`&&e.value?(i(),g(`span`,Le,x(e.value),1)):n(``,!0),d(`span`,Re,x(e.label),1)]))),128))])])])]),d(`div`,ze,[r[2]||=d(`i`,{class:`pi pi-external-link text-muted`},null,-1),d(`a`,Be,x(e.$t(`subscription.viewMoreDetailsPlans`)),1)])]))}})})),Ue=t((()=>{})),We,Ge=t((()=>{He(),He(),Ue(),L(),We=R($,[[`__scopeId`,`data-v-610ca59a`]])})),Ke,qe,Je,Ye,Xe,Ze,Qe,$e=t((()=>{o(),r(),_e(),k(),j(),D(),Ge(),P(),B(),T(),m(),Ke={class:`flex h-full flex-col gap-6`},qe={class:`flex items-center gap-2`},Je={class:`text-2xl font-inter font-semibold leading-tight`},Ye={class:`pt-1`},Xe={class:`flex items-center justify-between border-t border-interface-stroke pt-3`},Ze={class:`flex gap-2`},Qe=b({__name:`SubscriptionPanel`,setup(e){let t=ee(()=>C(()=>import(`./SubscriptionPanelContentWorkspace-Sag7WE0L.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]),import.meta.url)),{flags:n}=E(),r=u(()=>ie&&n.teamWorkspacesEnabled),{buildDocsUrl:a,docsPaths:o}=M(),{isActiveSubscription:l,handleInvoiceHistory:m}=N(),{isLoadingSupport:h,handleMessageSupport:g,handleLearnMoreClick:_}=z(),handleOpenPartnerNodesInfo=()=>{window.open(a(o.partnerNodesPricing,{includeLocale:!0}),`_blank`)};return(e,n)=>(i(),s(f(S),{value:`PlanCredits`,class:`subscription-container h-full`},{default:c(()=>[d(`div`,Ke,[d(`div`,qe,[d(`span`,Je,x(f(l)?e.$t(`subscription.title`):e.$t(`subscription.titleUnsubscribed`)),1),d(`div`,Ye,[p(ve,{"reverse-order":``,"background-color":`var(--p-dialog-background)`})])]),r.value?(i(),s(f(t),{key:0})):(i(),s(We,{key:1})),d(`div`,Xe,[d(`div`,Ze,[p(A,{variant:`muted-textonly`,class:`text-xs text-text-secondary`,onClick:f(_)},{default:c(()=>[n[0]||=d(`i`,{class:`pi pi-question-circle text-text-secondary text-xs`},null,-1),y(` `+x(e.$t(`subscription.learnMore`)),1)]),_:1},8,[`onClick`]),p(A,{variant:`muted-textonly`,class:`text-xs text-text-secondary`,onClick:handleOpenPartnerNodesInfo},{default:c(()=>[n[1]||=d(`i`,{class:`pi pi-question-circle text-text-secondary text-xs`},null,-1),y(` `+x(e.$t(`subscription.partnerNodesCredits`)),1)]),_:1}),p(A,{variant:`muted-textonly`,class:`text-xs text-text-secondary`,loading:f(h),onClick:f(g)},{default:c(()=>[n[2]||=d(`i`,{class:`pi pi-comment text-text-secondary text-xs`},null,-1),y(` `+x(e.$t(`subscription.messageSupport`)),1)]),_:1},8,[`loading`,`onClick`])]),p(A,{variant:`muted-textonly`,class:`text-xs text-text-secondary`,onClick:f(m)},{default:c(()=>[y(x(e.$t(`subscription.invoiceHistory`))+` `,1),n[3]||=d(`i`,{class:`pi pi-external-link text-text-secondary text-xs`},null,-1)]),_:1},8,[`onClick`])])])]),_:1}))}})})),et;t((()=>{$e(),$e(),et=Qe}))();export{et as default};
//# sourceMappingURL=SubscriptionPanel-Q6AnUIJP.js.map