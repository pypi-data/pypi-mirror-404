{"version":3,"file":"CreateWorkspaceDialogContent-Blu9S9hL.js","names":[],"sources":["../../src/components/dialog/content/workspace/CreateWorkspaceDialogContent.vue","../../src/components/dialog/content/workspace/CreateWorkspaceDialogContent.vue"],"sourcesContent":["<template>\n  <div\n    class=\"flex w-full max-w-[400px] flex-col rounded-2xl border border-border-default bg-base-background\"\n  >\n    <!-- Header -->\n    <div\n      class=\"flex h-12 items-center justify-between border-b border-border-default px-4\"\n    >\n      <h2 class=\"m-0 text-sm font-normal text-base-foreground\">\n        {{ $t('workspacePanel.createWorkspaceDialog.title') }}\n      </h2>\n      <button\n        class=\"cursor-pointer rounded border-none bg-transparent p-0 text-muted-foreground transition-colors hover:text-base-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-secondary-foreground\"\n        :aria-label=\"$t('g.close')\"\n        @click=\"onCancel\"\n      >\n        <i class=\"pi pi-times size-4\" />\n      </button>\n    </div>\n\n    <!-- Body -->\n    <div class=\"flex flex-col gap-4 px-4 py-4\">\n      <p class=\"m-0 text-sm text-muted-foreground\">\n        {{ $t('workspacePanel.createWorkspaceDialog.message') }}\n      </p>\n      <div class=\"flex flex-col gap-2\">\n        <label class=\"text-sm text-base-foreground\">\n          {{ $t('workspacePanel.createWorkspaceDialog.nameLabel') }}\n        </label>\n        <input\n          v-model=\"workspaceName\"\n          type=\"text\"\n          class=\"w-full rounded-lg border border-border-default bg-transparent px-3 py-2 text-sm text-base-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-secondary-foreground\"\n          :placeholder=\"\n            $t('workspacePanel.createWorkspaceDialog.namePlaceholder')\n          \"\n          @keydown.enter=\"isValidName && onCreate()\"\n        />\n      </div>\n    </div>\n\n    <!-- Footer -->\n    <div class=\"flex items-center justify-end gap-4 px-4 py-4\">\n      <Button variant=\"muted-textonly\" @click=\"onCancel\">\n        {{ $t('g.cancel') }}\n      </Button>\n      <Button\n        variant=\"primary\"\n        size=\"lg\"\n        :loading\n        :disabled=\"!isValidName\"\n        @click=\"onCreate\"\n      >\n        {{ $t('workspacePanel.createWorkspaceDialog.create') }}\n      </Button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useToast } from 'primevue/usetoast'\nimport { computed, ref } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport Button from '@/components/ui/button/Button.vue'\nimport { useTeamWorkspaceStore } from '@/platform/workspace/stores/teamWorkspaceStore'\nimport { useDialogStore } from '@/stores/dialogStore'\n\nconst { onConfirm } = defineProps<{\n  onConfirm?: (name: string) => void | Promise<void>\n}>()\n\nconst { t } = useI18n()\nconst dialogStore = useDialogStore()\nconst toast = useToast()\nconst workspaceStore = useTeamWorkspaceStore()\nconst loading = ref(false)\nconst workspaceName = ref('')\n\nconst isValidName = computed(() => {\n  const name = workspaceName.value.trim()\n  const safeNameRegex = /^[a-zA-Z0-9][a-zA-Z0-9\\s\\-_'.,()&+]*$/\n  return name.length >= 1 && name.length <= 50 && safeNameRegex.test(name)\n})\n\nfunction onCancel() {\n  dialogStore.closeDialog({ key: 'create-workspace' })\n}\n\nasync function onCreate() {\n  if (!isValidName.value) return\n  loading.value = true\n  try {\n    const name = workspaceName.value.trim()\n    // Call optional callback if provided\n    await onConfirm?.(name)\n    dialogStore.closeDialog({ key: 'create-workspace' })\n    // Create workspace and switch to it (triggers reload internally)\n    await workspaceStore.createWorkspace(name)\n  } catch (error) {\n    console.error('[CreateWorkspaceDialog] Failed to create workspace:', error)\n    toast.add({\n      severity: 'error',\n      summary: t('workspacePanel.toast.failedToCreateWorkspace'),\n      detail: error instanceof Error ? error.message : t('g.unknownError'),\n      life: 5000\n    })\n  } finally {\n    loading.value = false\n  }\n}\n</script>\n","<template>\n  <div\n    class=\"flex w-full max-w-[400px] flex-col rounded-2xl border border-border-default bg-base-background\"\n  >\n    <!-- Header -->\n    <div\n      class=\"flex h-12 items-center justify-between border-b border-border-default px-4\"\n    >\n      <h2 class=\"m-0 text-sm font-normal text-base-foreground\">\n        {{ $t('workspacePanel.createWorkspaceDialog.title') }}\n      </h2>\n      <button\n        class=\"cursor-pointer rounded border-none bg-transparent p-0 text-muted-foreground transition-colors hover:text-base-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-secondary-foreground\"\n        :aria-label=\"$t('g.close')\"\n        @click=\"onCancel\"\n      >\n        <i class=\"pi pi-times size-4\" />\n      </button>\n    </div>\n\n    <!-- Body -->\n    <div class=\"flex flex-col gap-4 px-4 py-4\">\n      <p class=\"m-0 text-sm text-muted-foreground\">\n        {{ $t('workspacePanel.createWorkspaceDialog.message') }}\n      </p>\n      <div class=\"flex flex-col gap-2\">\n        <label class=\"text-sm text-base-foreground\">\n          {{ $t('workspacePanel.createWorkspaceDialog.nameLabel') }}\n        </label>\n        <input\n          v-model=\"workspaceName\"\n          type=\"text\"\n          class=\"w-full rounded-lg border border-border-default bg-transparent px-3 py-2 text-sm text-base-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-secondary-foreground\"\n          :placeholder=\"\n            $t('workspacePanel.createWorkspaceDialog.namePlaceholder')\n          \"\n          @keydown.enter=\"isValidName && onCreate()\"\n        />\n      </div>\n    </div>\n\n    <!-- Footer -->\n    <div class=\"flex items-center justify-end gap-4 px-4 py-4\">\n      <Button variant=\"muted-textonly\" @click=\"onCancel\">\n        {{ $t('g.cancel') }}\n      </Button>\n      <Button\n        variant=\"primary\"\n        size=\"lg\"\n        :loading\n        :disabled=\"!isValidName\"\n        @click=\"onCreate\"\n      >\n        {{ $t('workspacePanel.createWorkspaceDialog.create') }}\n      </Button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useToast } from 'primevue/usetoast'\nimport { computed, ref } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport Button from '@/components/ui/button/Button.vue'\nimport { useTeamWorkspaceStore } from '@/platform/workspace/stores/teamWorkspaceStore'\nimport { useDialogStore } from '@/stores/dialogStore'\n\nconst { onConfirm } = defineProps<{\n  onConfirm?: (name: string) => void | Promise<void>\n}>()\n\nconst { t } = useI18n()\nconst dialogStore = useDialogStore()\nconst toast = useToast()\nconst workspaceStore = useTeamWorkspaceStore()\nconst loading = ref(false)\nconst workspaceName = ref('')\n\nconst isValidName = computed(() => {\n  const name = workspaceName.value.trim()\n  const safeNameRegex = /^[a-zA-Z0-9][a-zA-Z0-9\\s\\-_'.,()&+]*$/\n  return name.length >= 1 && name.length <= 50 && safeNameRegex.test(name)\n})\n\nfunction onCancel() {\n  dialogStore.closeDialog({ key: 'create-workspace' })\n}\n\nasync function onCreate() {\n  if (!isValidName.value) return\n  loading.value = true\n  try {\n    const name = workspaceName.value.trim()\n    // Call optional callback if provided\n    await onConfirm?.(name)\n    dialogStore.closeDialog({ key: 'create-workspace' })\n    // Create workspace and switch to it (triggers reload internally)\n    await workspaceStore.createWorkspace(name)\n  } catch (error) {\n    console.error('[CreateWorkspaceDialog] Failed to create workspace:', error)\n    toast.add({\n      severity: 'error',\n      summary: t('workspacePanel.toast.failedToCreateWorkspace'),\n      detail: error instanceof Error ? error.message : t('g.unknownError'),\n      life: 5000\n    })\n  } finally {\n    loading.value = false\n  }\n}\n</script>\n"],"mappings":"+bC4DyB,IAED,IAEL,IACmB,IACP,glBAM/B,GAAM,CAAE,GAAM,GAAQ,CAChB,EAAc,GAAe,CAC7B,EAAQ,GAAS,CACjB,EAAiB,GAAsB,CACvC,EAAU,EAAI,GAAK,CACnB,EAAgB,EAAI,GAAE,CAEtB,EAAc,MAAe,CACjC,IAAM,EAAO,EAAc,MAAM,MAAK,CAEtC,OAAO,EAAK,QAAU,GAAK,EAAK,QAAU,IADpB,wCACwC,KAAK,EAAI,EACxE,CAED,SAAS,UAAW,CAClB,EAAY,YAAY,CAAE,IAAK,mBAAoB,CAAA,CAGrD,eAAe,UAAW,CACnB,KAAY,MACjB,GAAQ,MAAQ,GAChB,GAAI,CACF,IAAM,EAAO,EAAc,MAAM,MAAK,CAEtC,MAAM,EAAA,YAAY,EAAI,CACtB,EAAY,YAAY,CAAE,IAAK,mBAAoB,CAAA,CAEnD,MAAM,EAAe,gBAAgB,EAAI,OAClC,EAAO,CACd,QAAQ,MAAM,sDAAuD,EAAK,CAC1E,EAAM,IAAI,CACR,SAAU,QACV,QAAS,EAAE,+CAA+C,CAC1D,OAAQ,aAAiB,MAAQ,EAAM,QAAU,EAAE,iBAAiB,CACpE,KAAM,IACP,CAAA,QACO,CACR,EAAQ,MAAQ"}