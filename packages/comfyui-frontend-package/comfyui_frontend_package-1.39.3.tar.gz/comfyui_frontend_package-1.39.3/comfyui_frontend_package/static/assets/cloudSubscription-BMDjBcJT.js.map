{"version":3,"file":"cloudSubscription-BMDjBcJT.js","names":[],"sources":["../../src/extensions/core/cloudSubscription.ts"],"sourcesContent":["import { watch } from 'vue'\n\nimport { useCurrentUser } from '@/composables/auth/useCurrentUser'\nimport { useSubscription } from '@/platform/cloud/subscription/composables/useSubscription'\nimport { useExtensionService } from '@/services/extensionService'\n\n/**\n * Cloud-only extension that enforces active subscription requirement\n */\nuseExtensionService().registerExtension({\n  name: 'Comfy.Cloud.Subscription',\n\n  setup: async () => {\n    const { isLoggedIn } = useCurrentUser()\n    const { requireActiveSubscription } = useSubscription()\n\n    const checkSubscriptionStatus = () => {\n      if (!isLoggedIn.value) return\n      void requireActiveSubscription()\n    }\n\n    watch(() => isLoggedIn.value, checkSubscriptionStatus, {\n      immediate: true\n    })\n  }\n})\n"],"mappings":"yNAAsB,IAES,IACC,IACI,CAKpC,GAAqB,CAAC,kBAAkB,CACtC,KAAM,2BAEN,MAAO,SAAY,CACjB,GAAM,CAAE,cAAe,GAAgB,CACjC,CAAE,6BAA8B,GAAiB,CAEjD,4BAAgC,CAC/B,EAAW,OACX,GAA2B,EAGlC,MAAY,EAAW,MAAO,wBAAyB,CACrD,UAAW,GACZ,CAAC,EAEL,CAAC"}