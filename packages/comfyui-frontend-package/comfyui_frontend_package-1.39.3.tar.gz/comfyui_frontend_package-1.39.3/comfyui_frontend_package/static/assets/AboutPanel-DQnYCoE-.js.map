{"version":3,"file":"AboutPanel-DQnYCoE-.js","names":[],"sources":["../../src/components/common/DeviceInfo.vue","../../src/components/common/DeviceInfo.vue","../../src/components/common/SystemStatsPanel.vue","../../src/components/common/SystemStatsPanel.vue","../../src/stores/aboutPanelStore.ts","../../src/components/dialog/content/setting/AboutPanel.vue","../../src/components/dialog/content/setting/AboutPanel.vue"],"sourcesContent":["<template>\n  <div class=\"grid grid-cols-2 gap-2\">\n    <template v-for=\"col in deviceColumns\" :key=\"col.field\">\n      <div class=\"font-medium\">\n        {{ col.header }}\n      </div>\n      <div>\n        {{ formatValue(props.device[col.field], col.field) }}\n      </div>\n    </template>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport type { DeviceStats } from '@/schemas/apiSchema'\nimport { formatSize } from '@/utils/formatUtil'\n\nconst props = defineProps<{\n  device: DeviceStats\n}>()\n\nconst deviceColumns: { field: keyof DeviceStats; header: string }[] = [\n  { field: 'name', header: 'Name' },\n  { field: 'type', header: 'Type' },\n  { field: 'vram_total', header: 'VRAM Total' },\n  { field: 'vram_free', header: 'VRAM Free' },\n  { field: 'torch_vram_total', header: 'Torch VRAM Total' },\n  { field: 'torch_vram_free', header: 'Torch VRAM Free' }\n]\n\nconst formatValue = (value: any, field: string) => {\n  if (\n    ['vram_total', 'vram_free', 'torch_vram_total', 'torch_vram_free'].includes(\n      field\n    )\n  ) {\n    return formatSize(value)\n  }\n  return value\n}\n</script>\n","<template>\n  <div class=\"grid grid-cols-2 gap-2\">\n    <template v-for=\"col in deviceColumns\" :key=\"col.field\">\n      <div class=\"font-medium\">\n        {{ col.header }}\n      </div>\n      <div>\n        {{ formatValue(props.device[col.field], col.field) }}\n      </div>\n    </template>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport type { DeviceStats } from '@/schemas/apiSchema'\nimport { formatSize } from '@/utils/formatUtil'\n\nconst props = defineProps<{\n  device: DeviceStats\n}>()\n\nconst deviceColumns: { field: keyof DeviceStats; header: string }[] = [\n  { field: 'name', header: 'Name' },\n  { field: 'type', header: 'Type' },\n  { field: 'vram_total', header: 'VRAM Total' },\n  { field: 'vram_free', header: 'VRAM Free' },\n  { field: 'torch_vram_total', header: 'Torch VRAM Total' },\n  { field: 'torch_vram_free', header: 'Torch VRAM Free' }\n]\n\nconst formatValue = (value: any, field: string) => {\n  if (\n    ['vram_total', 'vram_free', 'torch_vram_total', 'torch_vram_free'].includes(\n      field\n    )\n  ) {\n    return formatSize(value)\n  }\n  return value\n}\n</script>\n","<template>\n  <div class=\"system-stats\">\n    <div class=\"mb-6\">\n      <h2 class=\"mb-4 text-2xl font-semibold\">\n        {{ $t('g.systemInfo') }}\n      </h2>\n      <div class=\"grid grid-cols-2 gap-2\">\n        <template v-for=\"col in systemColumns\" :key=\"col.field\">\n          <div class=\"font-medium\">\n            {{ col.header }}\n          </div>\n          <div>{{ getDisplayValue(col) }}</div>\n        </template>\n      </div>\n    </div>\n\n    <template v-if=\"hasDevices\">\n      <Divider />\n\n      <div>\n        <h2 class=\"mb-4 text-2xl font-semibold\">\n          {{ $t('g.devices') }}\n        </h2>\n        <TabView v-if=\"props.stats.devices.length > 1\">\n          <TabPanel\n            v-for=\"device in props.stats.devices\"\n            :key=\"device.index\"\n            :header=\"device.name\"\n            :value=\"device.index\"\n          >\n            <DeviceInfo :device=\"device\" />\n          </TabPanel>\n        </TabView>\n        <DeviceInfo v-else :device=\"props.stats.devices[0]\" />\n      </div>\n    </template>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Divider from 'primevue/divider'\nimport TabPanel from 'primevue/tabpanel'\nimport TabView from 'primevue/tabview'\nimport { computed } from 'vue'\n\nimport DeviceInfo from '@/components/common/DeviceInfo.vue'\nimport { isCloud } from '@/platform/distribution/types'\nimport type { SystemStats } from '@/schemas/apiSchema'\nimport { formatCommitHash, formatSize } from '@/utils/formatUtil'\n\nconst props = defineProps<{\n  stats: SystemStats\n}>()\n\nconst systemInfo = computed(() => ({\n  ...props.stats.system,\n  argv: props.stats.system.argv.join(' ')\n}))\n\nconst hasDevices = computed(() => props.stats.devices.length > 0)\n\ntype SystemInfoKey = keyof SystemStats['system']\n\ntype ColumnDef = {\n  field: SystemInfoKey\n  header: string\n  format?: (value: string) => string\n  formatNumber?: (value: number) => string\n}\n\n/** Columns for local distribution */\nconst localColumns: ColumnDef[] = [\n  { field: 'os', header: 'OS' },\n  { field: 'python_version', header: 'Python Version' },\n  { field: 'embedded_python', header: 'Embedded Python' },\n  { field: 'pytorch_version', header: 'Pytorch Version' },\n  { field: 'argv', header: 'Arguments' },\n  { field: 'ram_total', header: 'RAM Total', formatNumber: formatSize },\n  { field: 'ram_free', header: 'RAM Free', formatNumber: formatSize }\n]\n\n/** Columns for cloud distribution */\nconst cloudColumns: ColumnDef[] = [\n  { field: 'cloud_version', header: 'Cloud Version' },\n  {\n    field: 'comfyui_version',\n    header: 'ComfyUI Version',\n    format: formatCommitHash\n  },\n  {\n    field: 'comfyui_frontend_version',\n    header: 'Frontend Version',\n    format: formatCommitHash\n  },\n  { field: 'workflow_templates_version', header: 'Templates Version' }\n]\n\nconst systemColumns = computed(() => (isCloud ? cloudColumns : localColumns))\n\nconst getDisplayValue = (column: ColumnDef) => {\n  const value = systemInfo.value[column.field]\n  if (column.formatNumber && typeof value === 'number') {\n    return column.formatNumber(value)\n  }\n  if (column.format && typeof value === 'string') {\n    return column.format(value)\n  }\n  return value\n}\n</script>\n","<template>\n  <div class=\"system-stats\">\n    <div class=\"mb-6\">\n      <h2 class=\"mb-4 text-2xl font-semibold\">\n        {{ $t('g.systemInfo') }}\n      </h2>\n      <div class=\"grid grid-cols-2 gap-2\">\n        <template v-for=\"col in systemColumns\" :key=\"col.field\">\n          <div class=\"font-medium\">\n            {{ col.header }}\n          </div>\n          <div>{{ getDisplayValue(col) }}</div>\n        </template>\n      </div>\n    </div>\n\n    <template v-if=\"hasDevices\">\n      <Divider />\n\n      <div>\n        <h2 class=\"mb-4 text-2xl font-semibold\">\n          {{ $t('g.devices') }}\n        </h2>\n        <TabView v-if=\"props.stats.devices.length > 1\">\n          <TabPanel\n            v-for=\"device in props.stats.devices\"\n            :key=\"device.index\"\n            :header=\"device.name\"\n            :value=\"device.index\"\n          >\n            <DeviceInfo :device=\"device\" />\n          </TabPanel>\n        </TabView>\n        <DeviceInfo v-else :device=\"props.stats.devices[0]\" />\n      </div>\n    </template>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Divider from 'primevue/divider'\nimport TabPanel from 'primevue/tabpanel'\nimport TabView from 'primevue/tabview'\nimport { computed } from 'vue'\n\nimport DeviceInfo from '@/components/common/DeviceInfo.vue'\nimport { isCloud } from '@/platform/distribution/types'\nimport type { SystemStats } from '@/schemas/apiSchema'\nimport { formatCommitHash, formatSize } from '@/utils/formatUtil'\n\nconst props = defineProps<{\n  stats: SystemStats\n}>()\n\nconst systemInfo = computed(() => ({\n  ...props.stats.system,\n  argv: props.stats.system.argv.join(' ')\n}))\n\nconst hasDevices = computed(() => props.stats.devices.length > 0)\n\ntype SystemInfoKey = keyof SystemStats['system']\n\ntype ColumnDef = {\n  field: SystemInfoKey\n  header: string\n  format?: (value: string) => string\n  formatNumber?: (value: number) => string\n}\n\n/** Columns for local distribution */\nconst localColumns: ColumnDef[] = [\n  { field: 'os', header: 'OS' },\n  { field: 'python_version', header: 'Python Version' },\n  { field: 'embedded_python', header: 'Embedded Python' },\n  { field: 'pytorch_version', header: 'Pytorch Version' },\n  { field: 'argv', header: 'Arguments' },\n  { field: 'ram_total', header: 'RAM Total', formatNumber: formatSize },\n  { field: 'ram_free', header: 'RAM Free', formatNumber: formatSize }\n]\n\n/** Columns for cloud distribution */\nconst cloudColumns: ColumnDef[] = [\n  { field: 'cloud_version', header: 'Cloud Version' },\n  {\n    field: 'comfyui_version',\n    header: 'ComfyUI Version',\n    format: formatCommitHash\n  },\n  {\n    field: 'comfyui_frontend_version',\n    header: 'Frontend Version',\n    format: formatCommitHash\n  },\n  { field: 'workflow_templates_version', header: 'Templates Version' }\n]\n\nconst systemColumns = computed(() => (isCloud ? cloudColumns : localColumns))\n\nconst getDisplayValue = (column: ColumnDef) => {\n  const value = systemInfo.value[column.field]\n  if (column.formatNumber && typeof value === 'number') {\n    return column.formatNumber(value)\n  }\n  if (column.format && typeof value === 'string') {\n    return column.format(value)\n  }\n  return value\n}\n</script>\n","import { defineStore } from 'pinia'\nimport { computed } from 'vue'\n\nimport { useExternalLink } from '@/composables/useExternalLink'\nimport { isCloud } from '@/platform/distribution/types'\nimport type { AboutPageBadge } from '@/types/comfy'\nimport { electronAPI, isElectron } from '@/utils/envUtil'\nimport { formatCommitHash } from '@/utils/formatUtil'\n\nimport { useExtensionStore } from './extensionStore'\nimport { useSystemStatsStore } from './systemStatsStore'\n\nexport const useAboutPanelStore = defineStore('aboutPanel', () => {\n  const frontendVersion = __COMFYUI_FRONTEND_VERSION__\n  const extensionStore = useExtensionStore()\n  const systemStatsStore = useSystemStatsStore()\n  const { staticUrls } = useExternalLink()\n  const coreVersion = computed(\n    () => systemStatsStore?.systemStats?.system?.comfyui_version ?? ''\n  )\n\n  const coreBadges = computed<AboutPageBadge[]>(() => [\n    // In electron, the ComfyUI is packaged without the git repo,\n    // so the python server's API doesn't have the version info.\n    {\n      label: `ComfyUI ${\n        isElectron()\n          ? 'v' + electronAPI().getComfyUIVersion()\n          : formatCommitHash(coreVersion.value)\n      }`,\n      url: isCloud ? staticUrls.comfyOrg : staticUrls.github,\n      icon: isCloud ? 'pi pi-cloud' : 'pi pi-github'\n    },\n    {\n      label: `ComfyUI_frontend v${frontendVersion}`,\n      url: staticUrls.githubFrontend,\n      icon: 'pi pi-github'\n    },\n    {\n      label: 'Discord',\n      url: staticUrls.discord,\n      icon: 'pi pi-discord'\n    },\n    { label: 'ComfyOrg', url: staticUrls.comfyOrg, icon: 'pi pi-globe' }\n  ])\n\n  const allBadges = computed<AboutPageBadge[]>(() => [\n    ...coreBadges.value,\n    ...extensionStore.extensions.flatMap((e) => e.aboutPageBadges ?? [])\n  ])\n\n  return {\n    badges: allBadges\n  }\n})\n","<template>\n  <PanelTemplate value=\"About\" class=\"about-container\">\n    <h2 class=\"mb-2 text-2xl font-bold\">\n      {{ $t('g.about') }}\n    </h2>\n    <div class=\"space-y-2\">\n      <a\n        v-for=\"badge in aboutPanelStore.badges\"\n        :key=\"badge.url\"\n        :href=\"badge.url\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        class=\"about-badge inline-flex items-center no-underline\"\n        :title=\"badge.url\"\n      >\n        <Tag class=\"mr-2\">\n          <template #icon>\n            <i :class=\"[badge.icon, 'mr-2 text-xl']\" />\n          </template>\n          {{ badge.label }}\n        </Tag>\n      </a>\n    </div>\n\n    <Divider />\n\n    <SystemStatsPanel\n      v-if=\"systemStatsStore.systemStats\"\n      :stats=\"systemStatsStore.systemStats\"\n    />\n  </PanelTemplate>\n</template>\n\n<script setup lang=\"ts\">\nimport Divider from 'primevue/divider'\nimport Tag from 'primevue/tag'\n\nimport SystemStatsPanel from '@/components/common/SystemStatsPanel.vue'\nimport { useAboutPanelStore } from '@/stores/aboutPanelStore'\nimport { useSystemStatsStore } from '@/stores/systemStatsStore'\n\nimport PanelTemplate from './PanelTemplate.vue'\n\nconst systemStatsStore = useSystemStatsStore()\nconst aboutPanelStore = useAboutPanelStore()\n</script>\n","<template>\n  <PanelTemplate value=\"About\" class=\"about-container\">\n    <h2 class=\"mb-2 text-2xl font-bold\">\n      {{ $t('g.about') }}\n    </h2>\n    <div class=\"space-y-2\">\n      <a\n        v-for=\"badge in aboutPanelStore.badges\"\n        :key=\"badge.url\"\n        :href=\"badge.url\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        class=\"about-badge inline-flex items-center no-underline\"\n        :title=\"badge.url\"\n      >\n        <Tag class=\"mr-2\">\n          <template #icon>\n            <i :class=\"[badge.icon, 'mr-2 text-xl']\" />\n          </template>\n          {{ badge.label }}\n        </Tag>\n      </a>\n    </div>\n\n    <Divider />\n\n    <SystemStatsPanel\n      v-if=\"systemStatsStore.systemStats\"\n      :stats=\"systemStatsStore.systemStats\"\n    />\n  </PanelTemplate>\n</template>\n\n<script setup lang=\"ts\">\nimport Divider from 'primevue/divider'\nimport Tag from 'primevue/tag'\n\nimport SystemStatsPanel from '@/components/common/SystemStatsPanel.vue'\nimport { useAboutPanelStore } from '@/stores/aboutPanelStore'\nimport { useSystemStatsStore } from '@/stores/systemStatsStore'\n\nimport PanelTemplate from './PanelTemplate.vue'\n\nconst systemStatsStore = useSystemStatsStore()\nconst aboutPanelStore = useAboutPanelStore()\n</script>\n"],"mappings":"ujBCe2B,gHAE3B,IAAM,EAAQ,EAIR,EAAgE,CACpE,CAAE,MAAO,OAAQ,OAAQ,OAAQ,CACjC,CAAE,MAAO,OAAQ,OAAQ,OAAQ,CACjC,CAAE,MAAO,aAAc,OAAQ,aAAc,CAC7C,CAAE,MAAO,YAAa,OAAQ,YAAa,CAC3C,CAAE,MAAO,mBAAoB,OAAQ,mBAAoB,CACzD,CAAE,MAAO,kBAAmB,OAAQ,mBACtC,CAEM,aAAe,EAAY,IAE7B,CAAC,aAAc,YAAa,mBAAoB,kBAAkB,CAAC,SACjE,EACF,CAEO,EAAW,EAAK,CAElB,+OEEW,IACC,IACD,KAGG,IACC,IAEqB,+OAE7C,IAAM,EAAQ,EAIR,EAAa,OAAgB,CACjC,GAAG,EAAM,MAAM,OACf,KAAM,EAAM,MAAM,OAAO,KAAK,KAAK,IAAA,CACpC,EAAC,CAEI,EAAa,MAAe,EAAM,MAAM,QAAQ,OAAS,EAAC,CAY1D,EAA4B,CAChC,CAAE,MAAO,KAAM,OAAQ,KAAM,CAC7B,CAAE,MAAO,iBAAkB,OAAQ,iBAAkB,CACrD,CAAE,MAAO,kBAAmB,OAAQ,kBAAmB,CACvD,CAAE,MAAO,kBAAmB,OAAQ,kBAAmB,CACvD,CAAE,MAAO,OAAQ,OAAQ,YAAa,CACtC,CAAE,MAAO,YAAa,OAAQ,YAAa,aAAc,EAAY,CACrE,CAAE,MAAO,WAAY,OAAQ,WAAY,aAAc,GACzD,CAGM,EAA4B,CAChC,CAAE,MAAO,gBAAiB,OAAQ,gBAAiB,CACnD,CACE,MAAO,kBACP,OAAQ,kBACR,OAAQ,EACT,CACD,CACE,MAAO,2BACP,OAAQ,mBACR,OAAQ,EACT,CACD,CAAE,MAAO,6BAA8B,OAAQ,qBACjD,CAEM,EAAgB,MAAgB,EAAU,EAAe,EAAa,CAEtE,gBAAmB,GAAsB,CAC7C,IAAM,EAAQ,EAAW,MAAM,EAAO,OAOtC,OANI,EAAO,cAAgB,OAAO,GAAU,SACnC,EAAO,aAAa,EAAK,CAE9B,EAAO,QAAU,OAAO,GAAU,SAC7B,EAAO,OAAO,EAAK,CAErB,irBC3GmB,IACH,KAEO,IACR,KAEgB,IACP,KAEC,IACE,CAEvB,EAAqB,GAAY,iBAAoB,CAChE,IACM,EAAiB,GAAmB,CACpC,EAAmB,GAAqB,CACxC,CAAE,cAAe,IAAiB,CAClC,EAAc,MACZ,GAAkB,aAAa,QAAQ,iBAAmB,GACjE,CAEK,EAAa,MAAiC,CAGlD,CACE,MAAO,WACL,GAAY,CACR,IAAM,IAAa,CAAC,mBAAmB,CACvC,EAAiB,EAAY,MAAM,GAEzC,IAAK,EAAU,EAAW,SAAW,EAAW,OAChD,KAAM,EAAU,cAAgB,eACjC,CACD,CACE,MAAO,2BACP,IAAK,EAAW,eAChB,KAAM,eACP,CACD,CACE,MAAO,UACP,IAAK,EAAW,QAChB,KAAM,gBACP,CACD,CAAE,MAAO,WAAY,IAAK,EAAW,SAAU,KAAM,cAAe,CACrE,CAAC,CAOF,MAAO,CACL,OANgB,MAAiC,CACjD,GAAG,EAAW,MACd,GAAG,EAAe,WAAW,QAAS,GAAM,EAAE,iBAAmB,EAAE,CAAC,CACrE,CAAC,CAID,EACD,6BEpBkB,IACJ,IAEa,KACM,IACC,KAEV,gHAE1B,IAAM,EAAmB,GAAoB,CACvC,EAAkB,GAAmB"}