import{i as e,n as t}from"./rolldown-runtime-BKYq3fBv.js";import{$n as n,Bt as r,Cr as i,Mr as ee,Nn as a,Pr as te,Rr as o,U as s,W as c,Xn as l,Xr as u,Zn as d,ai as f,ar as p,er as m,li as h,mr as g,sr as _,ui as v,zt as y}from"./vendor-primevue-Cg-HmKZY.js";import{fn as b,ot as x,rr as S,st as C}from"./vendor-other-CoxDvJ0a.js";import{n as w,t as T}from"./tailwindUtil-F1kyO01s.js";import{n as E,t as D}from"./_plugin-vue_export-helper-Ckv1EJQX.js";import{r as O,t as k}from"./audioUtils-D6gqopTc.js";var A,j,M,N,P,F,I,L,R,z,B,V,H,U,W,G,K,q,J,Y,X,Z,Q=t((()=>{a(),y(),s(),x(),b(),T(),O(),A={class:`relative`},j={key:0,class:`bg-component-node-widget-background box-border flex gap-4 items-center justify-start relative rounded-lg w-full h-16 px-4 py-0`},M=[`src`],N={class:`relative flex shrink-0 items-center justify-start gap-2`},P=[`aria-label`],F={key:0,class:`text-secondary icon-[lucide--play] size-4`},I={key:1,class:`text-secondary icon-[lucide--pause] size-4`},L={class:`text-sm font-normal text-nowrap text-base-foreground`},R={class:`relative h-0.5 flex-1 rounded-full bg-interface-stroke`},z=[`value`,`aria-label`],B={class:`relative flex shrink-0 items-center justify-start gap-2`},V=[`aria-label`],H={key:0,class:`text-secondary icon-[lucide--volume-2] size-4`},U={key:1,class:`text-secondary icon-[lucide--volume-1] size-4`},W={key:2,class:`text-secondary icon-[lucide--volume-x] size-4`},G=[`aria-label`],K={key:0,class:`w-48 px-4 py-2`},q={class:`mb-2 block text-xs text-base-foreground`},J=[`onClick`],Y={class:`text-base-foreground`},X={key:0,class:`ml-auto icon-[lucide--check] size-4 text-base-foreground`},Z=_({__name:`AudioPreviewPlayer`,props:g({hideWhenEmpty:{type:Boolean,default:!0},showOptionsButton:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:[`update:modelValue`],setup(e){let{t}=C(),a=te(`audioRef`),s=u(),g=u(!1),_=u(!1),y=u(1),b=u(0),x=u(0),T=u(1),E=l(()=>!x.value||x.value===0?0:b.value/x.value*100),D=ee(e,`modelValue`),O=l(()=>!_.value&&y.value>.5),Z=l(()=>_.value&&y.value>0),togglePlayPause=()=>{!a.value||!a.value.src||(g.value?a.value.pause():a.value.play(),g.value=!g.value)},toggleMute=()=>{a.value&&(_.value=!_.value,a.value.muted=_.value)},handleSeek=e=>{let t=e.target,n=parseFloat(t.value);if(a.value&&x.value>0){let e=n/100*x.value;a.value.currentTime=e,b.value=e}},handleLoadedMetadata=()=>{a.value&&(x.value=a.value.duration)},handleTimeUpdate=()=>{a.value&&(b.value=a.value.currentTime)},handleEnded=()=>{g.value=!1,b.value=0},toggleOptionsMenu=e=>{s.value?.toggle(e)},setPlaybackSpeed=e=>{T.value=e,a.value&&(a.value.playbackRate=e)},handleVolumeChange=e=>{y.value=(Array.isArray(e)?e[0]:e)/10,a.value&&(a.value.volume=y.value,y.value>0&&_.value&&(_.value=!1,a.value.muted=!1))},Q=l(()=>[{label:t(`g.playbackSpeed`),items:[{label:t(`g.halfSpeed`),onClick:()=>setPlaybackSpeed(.5),selected:T.value===.5},{label:t(`g.1x`),onClick:()=>setPlaybackSpeed(1),selected:T.value===1},{label:t(`g.2x`),onClick:()=>setPlaybackSpeed(2),selected:T.value===2}]},{label:t(`g.volume`),key:`volume`}]);return S(D,()=>{g.value=!1,a.value?.pause(),a.value?.load()},{immediate:!0}),(e,t)=>(i(),m(`div`,A,[!e.hideWhenEmpty||D.value?(i(),m(`div`,j,[d(`audio`,{ref_key:`audioRef`,ref:a,src:D.value,onLoadedmetadata:handleLoadedMetadata,onTimeupdate:handleTimeUpdate,onEnded:handleEnded},null,40,M),d(`div`,N,[d(`div`,{role:`button`,tabindex:0,"aria-label":e.$t(`g.playPause`),class:`flex size-6 cursor-pointer items-center justify-center rounded hover:bg-interface-menu-component-surface-hovered`,onClick:togglePlayPause},[g.value?(i(),m(`i`,I)):(i(),m(`i`,F))],8,P),d(`div`,L,v(f(k)(b.value))+` / `+v(f(k)(x.value)),1)]),d(`div`,R,[d(`div`,{class:`absolute top-0 left-0 h-full rounded-full bg-button-icon transition-all`,style:h({width:`${E.value}%`})},null,4),d(`input`,{type:`range`,value:E.value,min:`0`,max:`100`,step:`0.1`,"aria-label":e.$t(`g.audioProgress`),class:`absolute inset-0 w-full cursor-pointer opacity-0`,onInput:handleSeek},null,40,z)]),d(`div`,B,[d(`div`,{role:`button`,tabindex:0,"aria-label":e.$t(`g.volume`),class:`flex size-6 cursor-pointer items-center justify-center rounded hover:bg-interface-menu-component-surface-hovered`,onClick:toggleMute},[O.value?(i(),m(`i`,H)):Z.value?(i(),m(`i`,U)):(i(),m(`i`,W))],8,V),e.showOptionsButton?(i(),m(`div`,{key:0,role:`button`,tabindex:0,"aria-label":e.$t(`g.moreOptions`),class:`flex size-6 cursor-pointer items-center justify-center rounded hover:bg-interface-menu-component-surface-hovered`,onClick:toggleOptionsMenu},t[0]||=[d(`i`,{class:`text-secondary icon-[lucide--more-vertical] size-4`},null,-1)],8,G)):n(``,!0)]),p(f(c),{ref_key:`optionsMenu`,ref:s,model:Q.value,popup:``,class:`audio-player-menu`,"pt:root:class":f(w)(`bg-component-node-widget-background border-component-node-border`),"pt:submenu:class":f(w)(`bg-component-node-widget-background`)},{item:o(({item:e})=>[e.key===`volume`?(i(),m(`div`,K,[d(`label`,q,v(e.label),1),p(f(r),{"model-value":y.value*10,min:0,max:10,step:1,class:`w-full`,"onUpdate:modelValue":handleVolumeChange},null,8,[`model-value`])])):(i(),m(`div`,{key:1,class:`flex cursor-pointer items-center px-4 py-2 text-xs hover:bg-white/10`,onClick:t=>e.onClick?.()},[d(`span`,Y,v(e.label),1),e.selected?(i(),m(`i`,X)):n(``,!0)],8,J))]),_:1},8,[`model`,`pt:root:class`,`pt:submenu:class`])])):n(``,!0)]))}})})),ne=t((()=>{})),$;t((()=>{Q(),Q(),ne(),E(),$=D(Z,[[`__scopeId`,`data-v-50a0cfc0`]])}))();export{$ as default};
//# sourceMappingURL=AudioPreviewPlayer-BC5ZGbpl.js.map