{"version":3,"file":"InviteMemberDialogContent-BQ50rAuG.js","names":[],"sources":["../../src/components/dialog/content/workspace/InviteMemberDialogContent.vue","../../src/components/dialog/content/workspace/InviteMemberDialogContent.vue"],"sourcesContent":["<template>\n  <div\n    class=\"flex w-full max-w-[512px] flex-col rounded-2xl border border-border-default bg-base-background\"\n  >\n    <!-- Header -->\n    <div\n      class=\"flex h-12 items-center justify-between border-b border-border-default px-4\"\n    >\n      <h2 class=\"m-0 text-sm font-normal text-base-foreground\">\n        {{\n          step === 'email'\n            ? $t('workspacePanel.inviteMemberDialog.title')\n            : $t('workspacePanel.inviteMemberDialog.linkStep.title')\n        }}\n      </h2>\n      <button\n        class=\"cursor-pointer rounded border-none bg-transparent p-0 text-muted-foreground transition-colors hover:text-base-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-secondary-foreground\"\n        :aria-label=\"$t('g.close')\"\n        @click=\"onCancel\"\n      >\n        <i class=\"pi pi-times size-4\" />\n      </button>\n    </div>\n\n    <!-- Body: Email Step -->\n    <template v-if=\"step === 'email'\">\n      <div class=\"flex flex-col gap-4 px-4 py-4\">\n        <p class=\"m-0 text-sm text-muted-foreground\">\n          {{ $t('workspacePanel.inviteMemberDialog.message') }}\n        </p>\n        <input\n          v-model=\"email\"\n          type=\"email\"\n          class=\"w-full rounded-lg border border-border-default bg-transparent px-3 py-2 text-sm text-base-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-secondary-foreground\"\n          :placeholder=\"$t('workspacePanel.inviteMemberDialog.placeholder')\"\n        />\n      </div>\n\n      <!-- Footer: Email Step -->\n      <div class=\"flex items-center justify-end gap-4 px-4 py-4\">\n        <Button variant=\"muted-textonly\" @click=\"onCancel\">\n          {{ $t('g.cancel') }}\n        </Button>\n        <Button\n          variant=\"primary\"\n          size=\"lg\"\n          :loading\n          :disabled=\"!isValidEmail\"\n          @click=\"onCreateLink\"\n        >\n          {{ $t('workspacePanel.inviteMemberDialog.createLink') }}\n        </Button>\n      </div>\n    </template>\n\n    <!-- Body: Link Step -->\n    <template v-else>\n      <div class=\"flex flex-col gap-4 px-4 py-4\">\n        <p class=\"m-0 text-sm text-muted-foreground\">\n          {{ $t('workspacePanel.inviteMemberDialog.linkStep.message') }}\n        </p>\n        <p class=\"m-0 text-sm font-medium text-base-foreground\">\n          {{ email }}\n        </p>\n        <div class=\"relative\">\n          <input\n            :value=\"generatedLink\"\n            readonly\n            class=\"w-full cursor-pointer rounded-lg border border-border-default bg-transparent px-3 py-2 pr-10 text-sm text-base-foreground focus:outline-none\"\n            @click=\"onSelectLink\"\n          />\n          <div\n            class=\"absolute right-4 top-2 cursor-pointer\"\n            @click=\"onCopyLink\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"16\"\n              height=\"16\"\n              viewBox=\"0 0 16 16\"\n              fill=\"none\"\n            >\n              <g clip-path=\"url(#clip0_2127_14348)\">\n                <path\n                  d=\"M2.66634 10.6666C1.93301 10.6666 1.33301 10.0666 1.33301 9.33325V2.66659C1.33301 1.93325 1.93301 1.33325 2.66634 1.33325H9.33301C10.0663 1.33325 10.6663 1.93325 10.6663 2.66659M6.66634 5.33325H13.333C14.0694 5.33325 14.6663 5.93021 14.6663 6.66658V13.3333C14.6663 14.0696 14.0694 14.6666 13.333 14.6666H6.66634C5.92996 14.6666 5.33301 14.0696 5.33301 13.3333V6.66658C5.33301 5.93021 5.92996 5.33325 6.66634 5.33325Z\"\n                  stroke=\"white\"\n                  stroke-width=\"1.3\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                />\n              </g>\n              <defs>\n                <clipPath id=\"clip0_2127_14348\">\n                  <rect width=\"16\" height=\"16\" fill=\"white\" />\n                </clipPath>\n              </defs>\n            </svg>\n          </div>\n        </div>\n      </div>\n\n      <!-- Footer: Link Step -->\n      <div class=\"flex items-center justify-end gap-4 px-4 py-4\">\n        <Button variant=\"muted-textonly\" @click=\"onCancel\">\n          {{ $t('g.cancel') }}\n        </Button>\n        <Button variant=\"primary\" size=\"lg\" @click=\"onCopyLink\">\n          {{ $t('workspacePanel.inviteMemberDialog.linkStep.copyLink') }}\n        </Button>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useToast } from 'primevue/usetoast'\nimport { computed, ref } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport Button from '@/components/ui/button/Button.vue'\nimport { useTeamWorkspaceStore } from '@/platform/workspace/stores/teamWorkspaceStore'\nimport { useDialogStore } from '@/stores/dialogStore'\n\nconst dialogStore = useDialogStore()\nconst toast = useToast()\nconst { t } = useI18n()\nconst workspaceStore = useTeamWorkspaceStore()\n\nconst loading = ref(false)\nconst email = ref('')\nconst step = ref<'email' | 'link'>('email')\nconst generatedLink = ref('')\n\nconst isValidEmail = computed(() => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n  return emailRegex.test(email.value)\n})\n\nfunction onCancel() {\n  dialogStore.closeDialog({ key: 'invite-member' })\n}\n\nasync function onCreateLink() {\n  if (!isValidEmail.value) return\n  loading.value = true\n  try {\n    generatedLink.value = await workspaceStore.createInviteLink(email.value)\n    step.value = 'link'\n  } catch (error) {\n    toast.add({\n      severity: 'error',\n      summary: t('workspacePanel.inviteMemberDialog.linkCopyFailed'),\n      detail: error instanceof Error ? error.message : undefined,\n      life: 3000\n    })\n  } finally {\n    loading.value = false\n  }\n}\n\nasync function onCopyLink() {\n  try {\n    await navigator.clipboard.writeText(generatedLink.value)\n    toast.add({\n      severity: 'success',\n      summary: t('workspacePanel.inviteMemberDialog.linkCopied'),\n      life: 2000\n    })\n  } catch {\n    toast.add({\n      severity: 'error',\n      summary: t('workspacePanel.inviteMemberDialog.linkCopyFailed'),\n      life: 3000\n    })\n  }\n}\n\nfunction onSelectLink(event: Event) {\n  const input = event.target as HTMLInputElement\n  input.select()\n}\n</script>\n","<template>\n  <div\n    class=\"flex w-full max-w-[512px] flex-col rounded-2xl border border-border-default bg-base-background\"\n  >\n    <!-- Header -->\n    <div\n      class=\"flex h-12 items-center justify-between border-b border-border-default px-4\"\n    >\n      <h2 class=\"m-0 text-sm font-normal text-base-foreground\">\n        {{\n          step === 'email'\n            ? $t('workspacePanel.inviteMemberDialog.title')\n            : $t('workspacePanel.inviteMemberDialog.linkStep.title')\n        }}\n      </h2>\n      <button\n        class=\"cursor-pointer rounded border-none bg-transparent p-0 text-muted-foreground transition-colors hover:text-base-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-secondary-foreground\"\n        :aria-label=\"$t('g.close')\"\n        @click=\"onCancel\"\n      >\n        <i class=\"pi pi-times size-4\" />\n      </button>\n    </div>\n\n    <!-- Body: Email Step -->\n    <template v-if=\"step === 'email'\">\n      <div class=\"flex flex-col gap-4 px-4 py-4\">\n        <p class=\"m-0 text-sm text-muted-foreground\">\n          {{ $t('workspacePanel.inviteMemberDialog.message') }}\n        </p>\n        <input\n          v-model=\"email\"\n          type=\"email\"\n          class=\"w-full rounded-lg border border-border-default bg-transparent px-3 py-2 text-sm text-base-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-secondary-foreground\"\n          :placeholder=\"$t('workspacePanel.inviteMemberDialog.placeholder')\"\n        />\n      </div>\n\n      <!-- Footer: Email Step -->\n      <div class=\"flex items-center justify-end gap-4 px-4 py-4\">\n        <Button variant=\"muted-textonly\" @click=\"onCancel\">\n          {{ $t('g.cancel') }}\n        </Button>\n        <Button\n          variant=\"primary\"\n          size=\"lg\"\n          :loading\n          :disabled=\"!isValidEmail\"\n          @click=\"onCreateLink\"\n        >\n          {{ $t('workspacePanel.inviteMemberDialog.createLink') }}\n        </Button>\n      </div>\n    </template>\n\n    <!-- Body: Link Step -->\n    <template v-else>\n      <div class=\"flex flex-col gap-4 px-4 py-4\">\n        <p class=\"m-0 text-sm text-muted-foreground\">\n          {{ $t('workspacePanel.inviteMemberDialog.linkStep.message') }}\n        </p>\n        <p class=\"m-0 text-sm font-medium text-base-foreground\">\n          {{ email }}\n        </p>\n        <div class=\"relative\">\n          <input\n            :value=\"generatedLink\"\n            readonly\n            class=\"w-full cursor-pointer rounded-lg border border-border-default bg-transparent px-3 py-2 pr-10 text-sm text-base-foreground focus:outline-none\"\n            @click=\"onSelectLink\"\n          />\n          <div\n            class=\"absolute right-4 top-2 cursor-pointer\"\n            @click=\"onCopyLink\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"16\"\n              height=\"16\"\n              viewBox=\"0 0 16 16\"\n              fill=\"none\"\n            >\n              <g clip-path=\"url(#clip0_2127_14348)\">\n                <path\n                  d=\"M2.66634 10.6666C1.93301 10.6666 1.33301 10.0666 1.33301 9.33325V2.66659C1.33301 1.93325 1.93301 1.33325 2.66634 1.33325H9.33301C10.0663 1.33325 10.6663 1.93325 10.6663 2.66659M6.66634 5.33325H13.333C14.0694 5.33325 14.6663 5.93021 14.6663 6.66658V13.3333C14.6663 14.0696 14.0694 14.6666 13.333 14.6666H6.66634C5.92996 14.6666 5.33301 14.0696 5.33301 13.3333V6.66658C5.33301 5.93021 5.92996 5.33325 6.66634 5.33325Z\"\n                  stroke=\"white\"\n                  stroke-width=\"1.3\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                />\n              </g>\n              <defs>\n                <clipPath id=\"clip0_2127_14348\">\n                  <rect width=\"16\" height=\"16\" fill=\"white\" />\n                </clipPath>\n              </defs>\n            </svg>\n          </div>\n        </div>\n      </div>\n\n      <!-- Footer: Link Step -->\n      <div class=\"flex items-center justify-end gap-4 px-4 py-4\">\n        <Button variant=\"muted-textonly\" @click=\"onCancel\">\n          {{ $t('g.cancel') }}\n        </Button>\n        <Button variant=\"primary\" size=\"lg\" @click=\"onCopyLink\">\n          {{ $t('workspacePanel.inviteMemberDialog.linkStep.copyLink') }}\n        </Button>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useToast } from 'primevue/usetoast'\nimport { computed, ref } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport Button from '@/components/ui/button/Button.vue'\nimport { useTeamWorkspaceStore } from '@/platform/workspace/stores/teamWorkspaceStore'\nimport { useDialogStore } from '@/stores/dialogStore'\n\nconst dialogStore = useDialogStore()\nconst toast = useToast()\nconst { t } = useI18n()\nconst workspaceStore = useTeamWorkspaceStore()\n\nconst loading = ref(false)\nconst email = ref('')\nconst step = ref<'email' | 'link'>('email')\nconst generatedLink = ref('')\n\nconst isValidEmail = computed(() => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n  return emailRegex.test(email.value)\n})\n\nfunction onCancel() {\n  dialogStore.closeDialog({ key: 'invite-member' })\n}\n\nasync function onCreateLink() {\n  if (!isValidEmail.value) return\n  loading.value = true\n  try {\n    generatedLink.value = await workspaceStore.createInviteLink(email.value)\n    step.value = 'link'\n  } catch (error) {\n    toast.add({\n      severity: 'error',\n      summary: t('workspacePanel.inviteMemberDialog.linkCopyFailed'),\n      detail: error instanceof Error ? error.message : undefined,\n      life: 3000\n    })\n  } finally {\n    loading.value = false\n  }\n}\n\nasync function onCopyLink() {\n  try {\n    await navigator.clipboard.writeText(generatedLink.value)\n    toast.add({\n      severity: 'success',\n      summary: t('workspacePanel.inviteMemberDialog.linkCopied'),\n      life: 2000\n    })\n  } catch {\n    toast.add({\n      severity: 'error',\n      summary: t('workspacePanel.inviteMemberDialog.linkCopyFailed'),\n      life: 3000\n    })\n  }\n}\n\nfunction onSelectLink(event: Event) {\n  const input = event.target as HTMLInputElement\n  input.select()\n}\n</script>\n"],"mappings":"+cCmHyB,IAED,IAEL,IACmB,IACP,8sBAE/B,IAAM,EAAc,GAAe,CAC7B,EAAQ,GAAS,CACjB,CAAE,KAAM,GAAQ,CAChB,EAAiB,GAAsB,CAEvC,EAAU,EAAI,GAAK,CACnB,EAAQ,EAAI,GAAE,CACd,EAAO,EAAsB,QAAO,CACpC,EAAgB,EAAI,GAAE,CAEtB,EAAe,MACA,6BACD,KAAK,EAAM,MAAK,CACnC,CAED,SAAS,UAAW,CAClB,EAAY,YAAY,CAAE,IAAK,gBAAiB,CAAA,CAGlD,eAAe,cAAe,CACvB,KAAa,MAClB,GAAQ,MAAQ,GAChB,GAAI,CACF,EAAc,MAAQ,MAAM,EAAe,iBAAiB,EAAM,MAAK,CACvE,EAAK,MAAQ,aACN,EAAO,CACd,EAAM,IAAI,CACR,SAAU,QACV,QAAS,EAAE,mDAAmD,CAC9D,OAAQ,aAAiB,MAAQ,EAAM,QAAU,IAAA,GACjD,KAAM,IACP,CAAA,QACO,CACR,EAAQ,MAAQ,KAIpB,eAAe,YAAa,CAC1B,GAAI,CACF,MAAM,UAAU,UAAU,UAAU,EAAc,MAAK,CACvD,EAAM,IAAI,CACR,SAAU,UACV,QAAS,EAAE,+CAA+C,CAC1D,KAAM,IACP,CAAA,MACK,CACN,EAAM,IAAI,CACR,SAAU,QACV,QAAS,EAAE,mDAAmD,CAC9D,KAAM,IACP,CAAA,EAIL,SAAS,aAAa,EAAc,CACpB,EAAM,OACd,QAAO"}