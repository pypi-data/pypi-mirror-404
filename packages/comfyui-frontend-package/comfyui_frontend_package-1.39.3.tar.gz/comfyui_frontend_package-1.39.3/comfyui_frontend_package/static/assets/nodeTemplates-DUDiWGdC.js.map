{"version":3,"file":"nodeTemplates-DUDiWGdC.js","names":[],"sources":["../../src/extensions/core/nodeTemplates.ts"],"sourcesContent":["import { downloadBlob } from '@/base/common/downloadUtil'\nimport { t } from '@/i18n'\nimport type { IContextMenuValue } from '@/lib/litegraph/src/interfaces'\nimport type { LGraphCanvas } from '@/lib/litegraph/src/litegraph'\nimport { useToastStore } from '@/platform/updates/common/toastStore'\nimport { useDialogService } from '@/services/dialogService'\nimport type { ComfyExtension } from '@/types/comfy'\nimport { deserialiseAndCreate } from '@/utils/vintageClipboard'\n\nimport { api } from '../../scripts/api'\nimport { app } from '../../scripts/app'\nimport { $el, ComfyDialog } from '../../scripts/ui'\nimport { GroupNodeConfig, GroupNodeHandler } from './groupNode'\n\n// Adds the ability to save and add multiple nodes as a template\n// To save:\n// Select multiple nodes (ctrl + drag to select a region or ctrl+click individual nodes)\n// Right click the canvas\n// Save Node Template -> give it a name\n//\n// To add:\n// Right click the canvas\n// Node templates -> click the one to add\n//\n// To delete/rename:\n// Right click the canvas\n// Node templates -> Manage\n//\n// To rearrange:\n// Open the manage dialog and Drag and drop elements using the \"Name:\" label as handle\n\nconst id = 'Comfy.NodeTemplates'\nconst file = 'comfy.templates.json'\n\ninterface NodeTemplate {\n  name: string\n  data: string\n}\n\nclass ManageTemplates extends ComfyDialog {\n  templates: NodeTemplate[] = []\n  draggedEl: HTMLElement | null\n  saveVisualCue: number | null\n  emptyImg: HTMLImageElement\n  importInput: HTMLInputElement\n\n  constructor() {\n    super()\n    this.load().then((v) => {\n      this.templates = v\n    })\n\n    this.element.classList.add('comfy-manage-templates')\n    this.draggedEl = null\n    this.saveVisualCue = null\n    this.emptyImg = new Image()\n    this.emptyImg.src =\n      'data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs='\n\n    this.importInput = $el('input', {\n      type: 'file',\n      accept: '.json',\n      multiple: true,\n      style: { display: 'none' },\n      parent: document.body,\n      onchange: () => this.importAll()\n    }) as HTMLInputElement\n  }\n\n  override createButtons() {\n    const btns = super.createButtons()\n    btns[0].textContent = 'Close'\n    btns[0].onclick = () => {\n      // @ts-expect-error fixme ts strict error\n      clearTimeout(this.saveVisualCue)\n      this.close()\n    }\n    btns.unshift(\n      $el('button', {\n        type: 'button',\n        textContent: 'Export',\n        onclick: () => this.exportAll()\n      })\n    )\n    btns.unshift(\n      $el('button', {\n        type: 'button',\n        textContent: 'Import',\n        onclick: () => {\n          this.importInput.click()\n        }\n      })\n    )\n    return btns\n  }\n\n  async load() {\n    let templates = []\n    const res = await api.getUserData(file)\n    if (res.status === 200) {\n      try {\n        templates = await res.json()\n      } catch (error) {}\n    } else if (res.status !== 404) {\n      console.error(res.status + ' ' + res.statusText)\n    }\n    return templates ?? []\n  }\n\n  async store() {\n    const templates = JSON.stringify(this.templates, undefined, 4)\n    try {\n      await api.storeUserData(file, templates, { stringify: false })\n    } catch (error) {\n      console.error(error)\n      // @ts-expect-error fixme ts strict error\n      useToastStore().addAlert(error.message)\n    }\n  }\n\n  async importAll() {\n    // @ts-expect-error fixme ts strict error\n    for (const file of this.importInput.files) {\n      if (file.type === 'application/json' || file.name.endsWith('.json')) {\n        const reader = new FileReader()\n        reader.onload = async () => {\n          const importFile = JSON.parse(reader.result as string)\n          if (importFile?.templates) {\n            for (const template of importFile.templates) {\n              if (template?.name && template?.data) {\n                this.templates.push(template)\n              }\n            }\n            await this.store()\n          }\n        }\n        await reader.readAsText(file)\n      }\n    }\n\n    // @ts-expect-error fixme ts strict error\n    this.importInput.value = null\n\n    this.close()\n  }\n\n  exportAll() {\n    if (this.templates.length == 0) {\n      useToastStore().addAlert(t('toastMessages.noTemplatesToExport'))\n      return\n    }\n\n    const json = JSON.stringify({ templates: this.templates }, null, 2) // convert the data to a JSON string\n    const blob = new Blob([json], { type: 'application/json' })\n    downloadBlob('node_templates.json', blob)\n  }\n\n  override show() {\n    // Show list of template names + delete button\n    super.show(\n      $el(\n        'div',\n        {},\n        this.templates.flatMap((t, i) => {\n          // @ts-expect-error fixme ts strict error\n          let nameInput\n          return [\n            $el(\n              'div',\n              {\n                dataset: { id: i.toString() },\n                className: 'templateManagerRow',\n                style: {\n                  display: 'grid',\n                  gridTemplateColumns: '1fr auto',\n                  border: '1px dashed transparent',\n                  gap: '5px',\n                  backgroundColor: 'var(--comfy-menu-bg)'\n                },\n                // @ts-expect-error fixme ts strict error\n                ondragstart: (e) => {\n                  this.draggedEl = e.currentTarget\n                  e.currentTarget.style.opacity = '0.6'\n                  e.currentTarget.style.border = '1px dashed yellow'\n                  e.dataTransfer.effectAllowed = 'move'\n                  e.dataTransfer.setDragImage(this.emptyImg, 0, 0)\n                },\n                // @ts-expect-error fixme ts strict error\n                ondragend: (e) => {\n                  e.target.style.opacity = '1'\n                  e.currentTarget.style.border = '1px dashed transparent'\n                  e.currentTarget.removeAttribute('draggable')\n\n                  // rearrange the elements\n                  this.element\n                    .querySelectorAll('.templateManagerRow')\n                    // @ts-expect-error fixme ts strict error\n                    .forEach((el: HTMLElement, i) => {\n                      // @ts-expect-error fixme ts strict error\n                      var prev_i = Number.parseInt(el.dataset.id)\n\n                      if (el == this.draggedEl && prev_i != i) {\n                        this.templates.splice(\n                          i,\n                          0,\n                          this.templates.splice(prev_i, 1)[0]\n                        )\n                      }\n                      el.dataset.id = i.toString()\n                    })\n                  this.store()\n                },\n                // @ts-expect-error fixme ts strict error\n                ondragover: (e) => {\n                  e.preventDefault()\n                  if (e.currentTarget == this.draggedEl) return\n\n                  let rect = e.currentTarget.getBoundingClientRect()\n                  if (e.clientY > rect.top + rect.height / 2) {\n                    e.currentTarget.parentNode.insertBefore(\n                      this.draggedEl,\n                      e.currentTarget.nextSibling\n                    )\n                  } else {\n                    e.currentTarget.parentNode.insertBefore(\n                      this.draggedEl,\n                      e.currentTarget\n                    )\n                  }\n                }\n              },\n              [\n                $el(\n                  'label',\n                  {\n                    textContent: 'Name: ',\n                    style: {\n                      cursor: 'grab'\n                    },\n                    // @ts-expect-error fixme ts strict error\n                    onmousedown: (e) => {\n                      // enable dragging only from the label\n                      if (e.target.localName == 'label')\n                        e.currentTarget.parentNode.draggable = 'true'\n                    }\n                  },\n                  [\n                    $el('input', {\n                      value: t.name,\n                      dataset: { name: t.name },\n                      style: {\n                        transitionProperty: 'background-color',\n                        transitionDuration: '0s'\n                      },\n                      // @ts-expect-error fixme ts strict error\n                      onchange: (e) => {\n                        // @ts-expect-error fixme ts strict error\n                        clearTimeout(this.saveVisualCue)\n                        var el = e.target\n                        var row = el.parentNode.parentNode\n                        this.templates[row.dataset.id].name =\n                          el.value.trim() || 'untitled'\n                        this.store()\n                        el.style.backgroundColor = 'rgb(40, 95, 40)'\n                        el.style.transitionDuration = '0s'\n                        // @ts-expect-error\n                        // In browser env the return value is number.\n                        this.saveVisualCue = setTimeout(function () {\n                          el.style.transitionDuration = '.7s'\n                          el.style.backgroundColor = 'var(--comfy-input-bg)'\n                        }, 15)\n                      },\n                      // @ts-expect-error fixme ts strict error\n                      onkeypress: (e) => {\n                        var el = e.target\n                        // @ts-expect-error fixme ts strict error\n                        clearTimeout(this.saveVisualCue)\n                        el.style.transitionDuration = '0s'\n                        el.style.backgroundColor = 'var(--comfy-input-bg)'\n                      },\n                      $: (el) => (nameInput = el)\n                    })\n                  ]\n                ),\n                $el('div', {}, [\n                  $el('button', {\n                    textContent: 'Export',\n                    style: {\n                      fontSize: '12px',\n                      fontWeight: 'normal'\n                    },\n                    onclick: () => {\n                      const json = JSON.stringify({ templates: [t] }, null, 2) // convert the data to a JSON string\n                      const blob = new Blob([json], {\n                        type: 'application/json'\n                      })\n                      // @ts-expect-error fixme ts strict error\n                      const name = (nameInput.value || t.name) + '.json'\n                      downloadBlob(name, blob)\n                    }\n                  }),\n                  $el('button', {\n                    textContent: 'Delete',\n                    style: {\n                      fontSize: '12px',\n                      color: 'red',\n                      fontWeight: 'normal'\n                    },\n                    // @ts-expect-error fixme ts strict error\n                    onclick: (e) => {\n                      const item = e.target.parentNode.parentNode\n                      item.parentNode.removeChild(item)\n                      this.templates.splice(item.dataset.id * 1, 1)\n                      this.store()\n                      // update the rows index, setTimeout ensures that the list is updated\n                      var that = this\n                      setTimeout(function () {\n                        that.element\n                          .querySelectorAll('.templateManagerRow')\n                          // @ts-expect-error fixme ts strict error\n                          .forEach((el: HTMLElement, i) => {\n                            el.dataset.id = i.toString()\n                          })\n                      }, 0)\n                    }\n                  })\n                ])\n              ]\n            )\n          ]\n        })\n      )\n    )\n  }\n}\n\nconst manage = new ManageTemplates()\n\n// @ts-expect-error fixme ts strict error\nconst clipboardAction = async (cb) => {\n  // We use the clipboard functions but dont want to overwrite the current user clipboard\n  // Restore it after we've run our callback\n  const old = localStorage.getItem('litegrapheditor_clipboard')\n  await cb()\n  // @ts-expect-error fixme ts strict error\n  localStorage.setItem('litegrapheditor_clipboard', old)\n}\n\nconst ext: ComfyExtension = {\n  name: id,\n\n  getCanvasMenuItems(_canvas: LGraphCanvas): IContextMenuValue[] {\n    const items: IContextMenuValue[] = []\n\n    // @ts-expect-error fixme ts strict error\n    items.push(null)\n    items.push({\n      content: `Save Selected as Template`,\n      disabled: !Object.keys(app.canvas.selected_nodes || {}).length,\n      callback: async () => {\n        const name = await useDialogService().prompt({\n          title: t('nodeTemplates.saveAsTemplate'),\n          message: t('nodeTemplates.enterName'),\n          defaultValue: ''\n        })\n        if (!name?.trim()) return\n\n        clipboardAction(() => {\n          app.canvas.copyToClipboard()\n          let data = localStorage.getItem('litegrapheditor_clipboard')\n          data = JSON.parse(data || '{}')\n          const nodeIds = Object.keys(app.canvas.selected_nodes)\n          for (let i = 0; i < nodeIds.length; i++) {\n            const node = app.canvas.graph?.getNodeById(nodeIds[i])\n            const nodeData = node?.constructor.nodeData\n\n            if (!node) continue\n            const groupConfig = GroupNodeHandler.getGroupData(node)\n            if (groupConfig) {\n              const groupData = groupConfig.nodeData\n              // @ts-expect-error\n              if (!data.groupNodes) {\n                // @ts-expect-error\n                data.groupNodes = {}\n              }\n              if (nodeData == null) throw new TypeError('nodeData is not set')\n              // @ts-expect-error\n              data.groupNodes[nodeData.name] = groupData\n              // @ts-expect-error\n              data.nodes[i].type = nodeData.name\n            }\n          }\n\n          manage.templates.push({\n            name,\n            data: JSON.stringify(data)\n          })\n          manage.store()\n        })\n      }\n    })\n\n    // Map each template to a menu item\n    const subItems = manage.templates.map((t) => {\n      return {\n        content: t.name,\n        callback: () => {\n          clipboardAction(async () => {\n            const data = JSON.parse(t.data)\n            await GroupNodeConfig.registerFromWorkflow(\n              data.groupNodes ?? {},\n              []\n            )\n\n            // Check for old clipboard format\n            if (!data.reroutes) {\n              deserialiseAndCreate(t.data, app.canvas)\n            } else {\n              localStorage.setItem('litegrapheditor_clipboard', t.data)\n              app.canvas.pasteFromClipboard()\n            }\n          })\n        }\n      }\n    })\n\n    // @ts-expect-error fixme ts strict error\n    subItems.push(null, {\n      content: 'Manage',\n      callback: () => manage.show()\n    })\n\n    items.push({\n      content: 'Node Templates',\n      submenu: {\n        options: subItems\n      }\n    })\n\n    return items\n  }\n}\n\napp.registerExtension(ext)\n"],"mappings":"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"}