{"version":3,"file":"ServerConfigPanel-Ca839VX7.js","names":[],"sources":["../../src/platform/settings/components/ServerConfigPanel.vue","../../src/platform/settings/components/ServerConfigPanel.vue"],"sourcesContent":["<template>\n  <PanelTemplate value=\"Server-Config\" class=\"server-config-panel\">\n    <template #header>\n      <div class=\"flex flex-col gap-2\">\n        <Message\n          v-if=\"modifiedConfigs.length > 0\"\n          severity=\"info\"\n          pt:text=\"w-full\"\n        >\n          <p>\n            {{ $t('serverConfig.modifiedConfigs') }}\n          </p>\n          <ul>\n            <li v-for=\"config in modifiedConfigs\" :key=\"config.id\">\n              {{ config.name }}: {{ config.initialValue }} → {{ config.value }}\n            </li>\n          </ul>\n          <div class=\"flex justify-end gap-2\">\n            <Button variant=\"secondary\" @click=\"revertChanges\">\n              {{ $t('serverConfig.revertChanges') }}\n            </Button>\n            <Button variant=\"destructive\" @click=\"restartApp\">\n              {{ $t('serverConfig.restart') }}\n            </Button>\n          </div>\n        </Message>\n        <Message v-if=\"commandLineArgs\" severity=\"secondary\" pt:text=\"w-full\">\n          <template #icon>\n            <i class=\"icon-[lucide--terminal] text-xl font-bold\" />\n          </template>\n          <div class=\"flex items-center justify-between\">\n            <p>{{ commandLineArgs }}</p>\n            <Button\n              size=\"icon\"\n              variant=\"muted-textonly\"\n              @click=\"copyCommandLineArgs\"\n            >\n              <i class=\"pi pi-clipboard\" />\n            </Button>\n          </div>\n        </Message>\n      </div>\n    </template>\n    <div\n      v-for=\"([label, items], i) in Object.entries(serverConfigsByCategory)\"\n      :key=\"label\"\n    >\n      <Divider v-if=\"i > 0\" />\n      <h3>{{ $t(`serverConfigCategories.${label}`, label) }}</h3>\n      <div v-for=\"item in items\" :key=\"item.name\" class=\"mb-4\">\n        <FormItem\n          :id=\"item.id\"\n          v-model:form-value=\"item.value\"\n          :item=\"translateItem(item)\"\n          :label-class=\"{\n            'text-highlight': item.initialValue !== item.value\n          }\"\n        />\n      </div>\n    </div>\n  </PanelTemplate>\n</template>\n\n<script setup lang=\"ts\">\nimport { storeToRefs } from 'pinia'\nimport Divider from 'primevue/divider'\nimport Message from 'primevue/message'\nimport { onBeforeUnmount, watch } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport FormItem from '@/components/common/FormItem.vue'\nimport PanelTemplate from '@/components/dialog/content/setting/PanelTemplate.vue'\nimport Button from '@/components/ui/button/Button.vue'\nimport { useCopyToClipboard } from '@/composables/useCopyToClipboard'\nimport type { ServerConfig } from '@/constants/serverConfig'\nimport { useSettingStore } from '@/platform/settings/settingStore'\nimport type { FormItem as FormItemType } from '@/platform/settings/types'\nimport { useToastStore } from '@/platform/updates/common/toastStore'\nimport { useServerConfigStore } from '@/stores/serverConfigStore'\nimport { electronAPI } from '@/utils/envUtil'\n\nconst settingStore = useSettingStore()\nconst serverConfigStore = useServerConfigStore()\nconst toastStore = useToastStore()\nconst {\n  serverConfigsByCategory,\n  serverConfigValues,\n  launchArgs,\n  commandLineArgs,\n  modifiedConfigs\n} = storeToRefs(serverConfigStore)\n\nlet restartTriggered = false\n\nconst revertChanges = () => {\n  serverConfigStore.revertChanges()\n}\n\nconst restartApp = async () => {\n  restartTriggered = true\n  await electronAPI().restartApp()\n}\n\nwatch(launchArgs, async (newVal) => {\n  await settingStore.set('Comfy.Server.LaunchArgs', newVal)\n})\n\nwatch(serverConfigValues, async (newVal) => {\n  await settingStore.set('Comfy.Server.ServerConfigValues', newVal)\n})\n\nconst { copyToClipboard } = useCopyToClipboard()\nconst copyCommandLineArgs = async () => {\n  await copyToClipboard(commandLineArgs.value)\n}\n\nconst { t } = useI18n()\n\nonBeforeUnmount(() => {\n  if (restartTriggered) {\n    return\n  }\n\n  if (modifiedConfigs.value.length === 0) {\n    return\n  }\n\n  toastStore.add({\n    severity: 'warn',\n    summary: t('serverConfig.restartRequiredToastSummary'),\n    detail: t('serverConfig.restartRequiredToastDetail'),\n    life: 10_000\n  })\n})\n\nconst translateItem = (item: ServerConfig<any>): FormItemType => {\n  return {\n    ...item,\n    name: t(`serverConfigItems.${item.id}.name`, item.name),\n    tooltip: item.tooltip\n      ? t(`serverConfigItems.${item.id}.tooltip`, item.tooltip)\n      : undefined\n  }\n}\n</script>\n","<template>\n  <PanelTemplate value=\"Server-Config\" class=\"server-config-panel\">\n    <template #header>\n      <div class=\"flex flex-col gap-2\">\n        <Message\n          v-if=\"modifiedConfigs.length > 0\"\n          severity=\"info\"\n          pt:text=\"w-full\"\n        >\n          <p>\n            {{ $t('serverConfig.modifiedConfigs') }}\n          </p>\n          <ul>\n            <li v-for=\"config in modifiedConfigs\" :key=\"config.id\">\n              {{ config.name }}: {{ config.initialValue }} → {{ config.value }}\n            </li>\n          </ul>\n          <div class=\"flex justify-end gap-2\">\n            <Button variant=\"secondary\" @click=\"revertChanges\">\n              {{ $t('serverConfig.revertChanges') }}\n            </Button>\n            <Button variant=\"destructive\" @click=\"restartApp\">\n              {{ $t('serverConfig.restart') }}\n            </Button>\n          </div>\n        </Message>\n        <Message v-if=\"commandLineArgs\" severity=\"secondary\" pt:text=\"w-full\">\n          <template #icon>\n            <i class=\"icon-[lucide--terminal] text-xl font-bold\" />\n          </template>\n          <div class=\"flex items-center justify-between\">\n            <p>{{ commandLineArgs }}</p>\n            <Button\n              size=\"icon\"\n              variant=\"muted-textonly\"\n              @click=\"copyCommandLineArgs\"\n            >\n              <i class=\"pi pi-clipboard\" />\n            </Button>\n          </div>\n        </Message>\n      </div>\n    </template>\n    <div\n      v-for=\"([label, items], i) in Object.entries(serverConfigsByCategory)\"\n      :key=\"label\"\n    >\n      <Divider v-if=\"i > 0\" />\n      <h3>{{ $t(`serverConfigCategories.${label}`, label) }}</h3>\n      <div v-for=\"item in items\" :key=\"item.name\" class=\"mb-4\">\n        <FormItem\n          :id=\"item.id\"\n          v-model:form-value=\"item.value\"\n          :item=\"translateItem(item)\"\n          :label-class=\"{\n            'text-highlight': item.initialValue !== item.value\n          }\"\n        />\n      </div>\n    </div>\n  </PanelTemplate>\n</template>\n\n<script setup lang=\"ts\">\nimport { storeToRefs } from 'pinia'\nimport Divider from 'primevue/divider'\nimport Message from 'primevue/message'\nimport { onBeforeUnmount, watch } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport FormItem from '@/components/common/FormItem.vue'\nimport PanelTemplate from '@/components/dialog/content/setting/PanelTemplate.vue'\nimport Button from '@/components/ui/button/Button.vue'\nimport { useCopyToClipboard } from '@/composables/useCopyToClipboard'\nimport type { ServerConfig } from '@/constants/serverConfig'\nimport { useSettingStore } from '@/platform/settings/settingStore'\nimport type { FormItem as FormItemType } from '@/platform/settings/types'\nimport { useToastStore } from '@/platform/updates/common/toastStore'\nimport { useServerConfigStore } from '@/stores/serverConfigStore'\nimport { electronAPI } from '@/utils/envUtil'\n\nconst settingStore = useSettingStore()\nconst serverConfigStore = useServerConfigStore()\nconst toastStore = useToastStore()\nconst {\n  serverConfigsByCategory,\n  serverConfigValues,\n  launchArgs,\n  commandLineArgs,\n  modifiedConfigs\n} = storeToRefs(serverConfigStore)\n\nlet restartTriggered = false\n\nconst revertChanges = () => {\n  serverConfigStore.revertChanges()\n}\n\nconst restartApp = async () => {\n  restartTriggered = true\n  await electronAPI().restartApp()\n}\n\nwatch(launchArgs, async (newVal) => {\n  await settingStore.set('Comfy.Server.LaunchArgs', newVal)\n})\n\nwatch(serverConfigValues, async (newVal) => {\n  await settingStore.set('Comfy.Server.ServerConfigValues', newVal)\n})\n\nconst { copyToClipboard } = useCopyToClipboard()\nconst copyCommandLineArgs = async () => {\n  await copyToClipboard(commandLineArgs.value)\n}\n\nconst { t } = useI18n()\n\nonBeforeUnmount(() => {\n  if (restartTriggered) {\n    return\n  }\n\n  if (modifiedConfigs.value.length === 0) {\n    return\n  }\n\n  toastStore.add({\n    severity: 'warn',\n    summary: t('serverConfig.restartRequiredToastSummary'),\n    detail: t('serverConfig.restartRequiredToastDetail'),\n    life: 10_000\n  })\n})\n\nconst translateItem = (item: ServerConfig<any>): FormItemType => {\n  return {\n    ...item,\n    name: t(`serverConfigItems.${item.id}.name`, item.name),\n    tooltip: item.tooltip\n      ? t(`serverConfigItems.${item.id}.tooltip`, item.tooltip)\n      : undefined\n  }\n}\n</script>\n"],"mappings":"ssBCgE4B,IACR,IACA,IAEI,IAEH,IACK,IACP,IACgB,IAEH,IAEF,IACO,IACT,2JAE5B,IAAM,EAAe,GAAgB,CAC/B,EAAoB,GAAqB,CACzC,EAAa,GAAc,CAC3B,CACJ,0BACA,qBACA,aACA,kBACA,mBACE,EAAY,EAAiB,CAE7B,EAAmB,GAEjB,kBAAsB,CAC1B,EAAkB,eAAc,EAG5B,WAAa,SAAY,CAC7B,EAAmB,GACnB,MAAM,GAAa,CAAC,YAAW,EAGjC,EAAM,EAAY,KAAO,IAAW,CAClC,MAAM,EAAa,IAAI,0BAA2B,EAAM,EACzD,CAED,EAAM,EAAoB,KAAO,IAAW,CAC1C,MAAM,EAAa,IAAI,kCAAmC,EAAM,EACjE,CAED,GAAM,CAAE,mBAAoB,GAAmB,CACzC,oBAAsB,SAAY,CACtC,MAAM,EAAgB,EAAgB,MAAK,EAGvC,CAAE,KAAM,GAAQ,CAEtB,MAAsB,CAChB,GAIA,EAAgB,MAAM,SAAW,GAIrC,EAAW,IAAI,CACb,SAAU,OACV,QAAS,EAAE,2CAA2C,CACtD,OAAQ,EAAE,0CAA0C,CACpD,KAAM,IACP,CAAA,EACF,CAED,IAAM,cAAiB,IACd,CACL,GAAG,EACH,KAAM,EAAE,qBAAqB,EAAK,GAAG,OAAQ,EAAK,KAAK,CACvD,QAAS,EAAK,QACV,EAAE,qBAAqB,EAAK,GAAG,UAAW,EAAK,QAAO,CACtD,IAAA,GACN"}