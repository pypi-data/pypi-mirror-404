{"version":3,"file":"UserSelectView-CdsHC2Vx.js","names":[],"sources":["../../src/views/UserSelectView.vue","../../src/views/UserSelectView.vue"],"sourcesContent":["<template>\n  <BaseViewTemplate dark>\n    <main\n      id=\"comfy-user-selection\"\n      class=\"relative min-w-84 rounded-lg bg-(--comfy-menu-bg) p-5 px-10 shadow-lg\"\n    >\n      <h1 class=\"my-2.5 mb-7 font-normal\">ComfyUI</h1>\n      <div class=\"flex w-full flex-col items-center\">\n        <div class=\"flex w-full flex-col gap-2\">\n          <label for=\"new-user-input\">{{ $t('userSelect.newUser') }}:</label>\n          <InputText\n            id=\"new-user-input\"\n            v-model=\"newUsername\"\n            :placeholder=\"$t('userSelect.enterUsername')\"\n            @keyup.enter=\"login\"\n          />\n        </div>\n        <Divider />\n        <div class=\"flex w-full flex-col gap-2\">\n          <label for=\"existing-user-select\"\n            >{{ $t('userSelect.existingUser') }}:</label\n          >\n          <Select\n            v-model=\"selectedUser\"\n            class=\"w-full\"\n            input-id=\"existing-user-select\"\n            :options=\"userStore.users\"\n            option-label=\"username\"\n            :placeholder=\"$t('userSelect.selectUser')\"\n            :disabled=\"createNewUser\"\n          />\n          <Message v-if=\"error\" severity=\"error\">\n            {{ error }}\n          </Message>\n        </div>\n        <footer class=\"mt-5\">\n          <Button @click=\"login\">{{ $t('userSelect.next') }}</Button>\n        </footer>\n      </div>\n    </main>\n  </BaseViewTemplate>\n</template>\n\n<script setup lang=\"ts\">\nimport Divider from 'primevue/divider'\nimport InputText from 'primevue/inputtext'\nimport Message from 'primevue/message'\nimport Select from 'primevue/select'\nimport { computed, onMounted, ref } from 'vue'\nimport { useRouter } from 'vue-router'\n\nimport Button from '@/components/ui/button/Button.vue'\nimport type { User } from '@/stores/userStore'\nimport { useUserStore } from '@/stores/userStore'\nimport BaseViewTemplate from '@/views/templates/BaseViewTemplate.vue'\n\nconst userStore = useUserStore()\nconst router = useRouter()\n\nconst selectedUser = ref<User | null>(null)\nconst newUsername = ref('')\nconst loginError = ref('')\n\nconst createNewUser = computed(() => newUsername.value.trim() !== '')\nconst newUserExistsError = computed(() => {\n  return userStore.users.find((user) => user.username === newUsername.value)\n    ? `User \"${newUsername.value}\" already exists`\n    : ''\n})\nconst error = computed(() => newUserExistsError.value || loginError.value)\n\nconst login = async () => {\n  try {\n    const user = createNewUser.value\n      ? await userStore.createUser(newUsername.value)\n      : selectedUser.value\n\n    if (!user) {\n      throw new Error('No user selected')\n    }\n\n    await userStore.login(user)\n    await router.push('/')\n  } catch (err) {\n    loginError.value = err instanceof Error ? err.message : JSON.stringify(err)\n  }\n}\n\nonMounted(async () => {\n  if (!userStore.initialized) {\n    await userStore.initialize()\n  }\n})\n</script>\n","<template>\n  <BaseViewTemplate dark>\n    <main\n      id=\"comfy-user-selection\"\n      class=\"relative min-w-84 rounded-lg bg-(--comfy-menu-bg) p-5 px-10 shadow-lg\"\n    >\n      <h1 class=\"my-2.5 mb-7 font-normal\">ComfyUI</h1>\n      <div class=\"flex w-full flex-col items-center\">\n        <div class=\"flex w-full flex-col gap-2\">\n          <label for=\"new-user-input\">{{ $t('userSelect.newUser') }}:</label>\n          <InputText\n            id=\"new-user-input\"\n            v-model=\"newUsername\"\n            :placeholder=\"$t('userSelect.enterUsername')\"\n            @keyup.enter=\"login\"\n          />\n        </div>\n        <Divider />\n        <div class=\"flex w-full flex-col gap-2\">\n          <label for=\"existing-user-select\"\n            >{{ $t('userSelect.existingUser') }}:</label\n          >\n          <Select\n            v-model=\"selectedUser\"\n            class=\"w-full\"\n            input-id=\"existing-user-select\"\n            :options=\"userStore.users\"\n            option-label=\"username\"\n            :placeholder=\"$t('userSelect.selectUser')\"\n            :disabled=\"createNewUser\"\n          />\n          <Message v-if=\"error\" severity=\"error\">\n            {{ error }}\n          </Message>\n        </div>\n        <footer class=\"mt-5\">\n          <Button @click=\"login\">{{ $t('userSelect.next') }}</Button>\n        </footer>\n      </div>\n    </main>\n  </BaseViewTemplate>\n</template>\n\n<script setup lang=\"ts\">\nimport Divider from 'primevue/divider'\nimport InputText from 'primevue/inputtext'\nimport Message from 'primevue/message'\nimport Select from 'primevue/select'\nimport { computed, onMounted, ref } from 'vue'\nimport { useRouter } from 'vue-router'\n\nimport Button from '@/components/ui/button/Button.vue'\nimport type { User } from '@/stores/userStore'\nimport { useUserStore } from '@/stores/userStore'\nimport BaseViewTemplate from '@/views/templates/BaseViewTemplate.vue'\n\nconst userStore = useUserStore()\nconst router = useRouter()\n\nconst selectedUser = ref<User | null>(null)\nconst newUsername = ref('')\nconst loginError = ref('')\n\nconst createNewUser = computed(() => newUsername.value.trim() !== '')\nconst newUserExistsError = computed(() => {\n  return userStore.users.find((user) => user.username === newUsername.value)\n    ? `User \"${newUsername.value}\" already exists`\n    : ''\n})\nconst error = computed(() => newUserExistsError.value || loginError.value)\n\nconst login = async () => {\n  try {\n    const user = createNewUser.value\n      ? await userStore.createUser(newUsername.value)\n      : selectedUser.value\n\n    if (!user) {\n      throw new Error('No user selected')\n    }\n\n    await userStore.login(user)\n    await router.push('/')\n  } catch (err) {\n    loginError.value = err instanceof Error ? err.message : JSON.stringify(err)\n  }\n}\n\nonMounted(async () => {\n  if (!userStore.initialized) {\n    await userStore.initialize()\n  }\n})\n</script>\n"],"mappings":"uhBC4CoB,IACE,IACF,IACD,IAEO,IAEP,IAEU,IACA,wVAE7B,IAAM,EAAY,GAAa,CACzB,EAAS,GAAU,CAEnB,EAAe,EAAiB,KAAI,CACpC,EAAc,EAAI,GAAE,CACpB,EAAa,EAAI,GAAE,CAEnB,EAAgB,MAAe,EAAY,MAAM,MAAM,GAAK,GAAE,CAC9D,EAAqB,MAClB,EAAU,MAAM,KAAM,GAAS,EAAK,WAAa,EAAY,MAAK,CACrE,SAAS,EAAY,MAAM,kBAC3B,GACL,CACK,EAAQ,MAAe,EAAmB,OAAS,EAAW,MAAK,CAEnE,MAAQ,SAAY,CACxB,GAAI,CACF,IAAM,EAAO,EAAc,MACvB,MAAM,EAAU,WAAW,EAAY,MAAK,CAC5C,EAAa,MAEjB,GAAI,CAAC,EACH,MAAU,MAAM,mBAAkB,CAGpC,MAAM,EAAU,MAAM,EAAI,CAC1B,MAAM,EAAO,KAAK,IAAG,OACd,EAAK,CACZ,EAAW,MAAQ,aAAe,MAAQ,EAAI,QAAU,KAAK,UAAU,EAAG,UAI9E,EAAU,SAAY,CACf,EAAU,aACb,MAAM,EAAU,YAAW,EAE9B"}