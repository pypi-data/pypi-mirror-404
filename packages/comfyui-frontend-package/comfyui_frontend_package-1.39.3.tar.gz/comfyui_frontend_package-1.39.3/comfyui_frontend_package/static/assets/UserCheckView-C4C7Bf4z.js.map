{"version":3,"file":"UserCheckView-C4C7Bf4z.js","names":[],"sources":["../../src/platform/cloud/onboarding/skeletons/CloudLoginViewSkeleton.vue","../../src/platform/cloud/onboarding/skeletons/CloudLoginViewSkeleton.vue","../../src/platform/cloud/onboarding/skeletons/CloudSurveyViewSkeleton.vue","../../src/platform/cloud/onboarding/skeletons/CloudSurveyViewSkeleton.vue","../../src/platform/cloud/onboarding/UserCheckView.vue","../../src/platform/cloud/onboarding/UserCheckView.vue"],"sourcesContent":["<template>\n  <div class=\"flex h-full items-center justify-center p-8\">\n    <div class=\"max-w-[100vw] lg:w-96\">\n      <div class=\"rounded-lg bg-[#2d2e32] p-4\">\n        <Skeleton width=\"60%\" height=\"1.125rem\" class=\"mb-2\" />\n        <Skeleton width=\"90%\" height=\"1rem\" class=\"mb-2\" />\n        <Skeleton width=\"80%\" height=\"1rem\" />\n      </div>\n\n      <div class=\"mt-6 mb-8 flex flex-col gap-4\">\n        <Skeleton width=\"45%\" height=\"1.5rem\" class=\"my-0\" />\n        <div class=\"flex items-center\">\n          <Skeleton width=\"25%\" height=\"1rem\" class=\"mr-1\" />\n          <Skeleton width=\"20%\" height=\"1rem\" />\n        </div>\n      </div>\n\n      <div class=\"mb-8\">\n        <Skeleton width=\"20%\" height=\"1rem\" class=\"mb-2\" />\n        <Skeleton width=\"100%\" height=\"2.5rem\" class=\"mb-4\" />\n        <Skeleton width=\"25%\" height=\"1rem\" class=\"mb-4\" />\n        <Skeleton width=\"100%\" height=\"2.5rem\" class=\"mb-6\" />\n        <Skeleton width=\"80%\" height=\"1rem\" class=\"mb-4\" />\n        <Skeleton width=\"100%\" height=\"2.5rem\" />\n      </div>\n\n      <div class=\"my-8 flex items-center\">\n        <div class=\"flex-1 border-t border-gray-300\"></div>\n        <Skeleton width=\"30%\" height=\"1rem\" class=\"mx-4\" />\n        <div class=\"flex-1 border-t border-gray-300\"></div>\n      </div>\n\n      <div class=\"flex flex-col gap-6\">\n        <Skeleton width=\"100%\" height=\"2.5rem\" />\n        <Skeleton width=\"100%\" height=\"2.5rem\" />\n      </div>\n\n      <div class=\"mt-5\">\n        <Skeleton width=\"70%\" height=\"0.875rem\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Skeleton from 'primevue/skeleton'\n</script>\n","<template>\n  <div class=\"flex h-full items-center justify-center p-8\">\n    <div class=\"max-w-[100vw] lg:w-96\">\n      <div class=\"rounded-lg bg-[#2d2e32] p-4\">\n        <Skeleton width=\"60%\" height=\"1.125rem\" class=\"mb-2\" />\n        <Skeleton width=\"90%\" height=\"1rem\" class=\"mb-2\" />\n        <Skeleton width=\"80%\" height=\"1rem\" />\n      </div>\n\n      <div class=\"mt-6 mb-8 flex flex-col gap-4\">\n        <Skeleton width=\"45%\" height=\"1.5rem\" class=\"my-0\" />\n        <div class=\"flex items-center\">\n          <Skeleton width=\"25%\" height=\"1rem\" class=\"mr-1\" />\n          <Skeleton width=\"20%\" height=\"1rem\" />\n        </div>\n      </div>\n\n      <div class=\"mb-8\">\n        <Skeleton width=\"20%\" height=\"1rem\" class=\"mb-2\" />\n        <Skeleton width=\"100%\" height=\"2.5rem\" class=\"mb-4\" />\n        <Skeleton width=\"25%\" height=\"1rem\" class=\"mb-4\" />\n        <Skeleton width=\"100%\" height=\"2.5rem\" class=\"mb-6\" />\n        <Skeleton width=\"80%\" height=\"1rem\" class=\"mb-4\" />\n        <Skeleton width=\"100%\" height=\"2.5rem\" />\n      </div>\n\n      <div class=\"my-8 flex items-center\">\n        <div class=\"flex-1 border-t border-gray-300\"></div>\n        <Skeleton width=\"30%\" height=\"1rem\" class=\"mx-4\" />\n        <div class=\"flex-1 border-t border-gray-300\"></div>\n      </div>\n\n      <div class=\"flex flex-col gap-6\">\n        <Skeleton width=\"100%\" height=\"2.5rem\" />\n        <Skeleton width=\"100%\" height=\"2.5rem\" />\n      </div>\n\n      <div class=\"mt-5\">\n        <Skeleton width=\"70%\" height=\"0.875rem\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Skeleton from 'primevue/skeleton'\n</script>\n","<template>\n  <div>\n    <div class=\"flex min-h-[638px] min-w-[320px] flex-col\">\n      <Skeleton width=\"100%\" height=\"0.5rem\" class=\"mb-8\" />\n\n      <div class=\"flex flex-1 flex-col p-0\">\n        <div class=\"flex min-h-full flex-1 flex-col justify-between\">\n          <div>\n            <Skeleton width=\"70%\" height=\"1.75rem\" class=\"mb-8\" />\n            <div class=\"flex flex-col gap-6\">\n              <div v-for=\"i in 5\" :key=\"i\" class=\"flex items-center gap-3\">\n                <Skeleton width=\"1.25rem\" height=\"1.25rem\" shape=\"circle\" />\n                <Skeleton width=\"85%\" height=\"0.875rem\" />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"flex justify-between pt-4\">\n            <span />\n            <Skeleton width=\"100%\" height=\"2.5rem\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Skeleton from 'primevue/skeleton'\n</script>\n","<template>\n  <div>\n    <div class=\"flex min-h-[638px] min-w-[320px] flex-col\">\n      <Skeleton width=\"100%\" height=\"0.5rem\" class=\"mb-8\" />\n\n      <div class=\"flex flex-1 flex-col p-0\">\n        <div class=\"flex min-h-full flex-1 flex-col justify-between\">\n          <div>\n            <Skeleton width=\"70%\" height=\"1.75rem\" class=\"mb-8\" />\n            <div class=\"flex flex-col gap-6\">\n              <div v-for=\"i in 5\" :key=\"i\" class=\"flex items-center gap-3\">\n                <Skeleton width=\"1.25rem\" height=\"1.25rem\" shape=\"circle\" />\n                <Skeleton width=\"85%\" height=\"0.875rem\" />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"flex justify-between pt-4\">\n            <span />\n            <Skeleton width=\"100%\" height=\"2.5rem\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Skeleton from 'primevue/skeleton'\n</script>\n","<template>\n  <CloudLoginViewSkeleton v-if=\"skeletonType === 'login'\" />\n  <CloudSurveyViewSkeleton v-else-if=\"skeletonType === 'survey'\" />\n  <CloudWaitlistViewSkeleton v-else-if=\"skeletonType === 'waitlist'\" />\n  <div v-else-if=\"error\" class=\"flex h-full items-center justify-center p-8\">\n    <div class=\"max-w-[100vw] p-2 text-center lg:w-96\">\n      <p class=\"mb-4 text-red-500\">{{ errorMessage }}</p>\n      <Button :loading=\"isRetrying\" class=\"w-full\" @click=\"handleRetry\">\n        {{\n          isRetrying\n            ? $t('cloudOnboarding.retrying')\n            : $t('cloudOnboarding.retry')\n        }}\n      </Button>\n    </div>\n  </div>\n  <div v-else class=\"flex items-center justify-center\">\n    <ProgressSpinner class=\"h-8 w-8\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useAsyncState } from '@vueuse/core'\nimport ProgressSpinner from 'primevue/progressspinner'\nimport { computed, nextTick, ref } from 'vue'\nimport { useRouter } from 'vue-router'\n\nimport Button from '@/components/ui/button/Button.vue'\nimport { useErrorHandling } from '@/composables/useErrorHandling'\nimport { useFeatureFlags } from '@/composables/useFeatureFlags'\nimport {\n  getSurveyCompletedStatus,\n  getUserCloudStatus\n} from '@/platform/cloud/onboarding/auth'\n\nimport CloudLoginViewSkeleton from './skeletons/CloudLoginViewSkeleton.vue'\nimport CloudSurveyViewSkeleton from './skeletons/CloudSurveyViewSkeleton.vue'\n\nconst router = useRouter()\nconst { wrapWithErrorHandlingAsync } = useErrorHandling()\nconst { flags } = useFeatureFlags()\nconst onboardingSurveyEnabled = computed(\n  () => flags.onboardingSurveyEnabled ?? true\n)\n\nconst skeletonType = ref<'login' | 'survey' | 'waitlist' | 'loading'>('loading')\n\nconst {\n  isLoading,\n  error,\n  execute: checkUserStatus\n} = useAsyncState(\n  wrapWithErrorHandlingAsync(async () => {\n    await nextTick()\n\n    if (!onboardingSurveyEnabled.value) {\n      await router.replace({ path: '/' })\n      return\n    }\n\n    const [cloudUserStats, surveyStatus] = await Promise.all([\n      getUserCloudStatus(),\n      getSurveyCompletedStatus()\n    ])\n\n    // Navigate based on user status\n    if (!cloudUserStats) {\n      skeletonType.value = 'login'\n      await router.replace({ name: 'cloud-login' })\n      return\n    }\n\n    // Survey is required for all users when feature flag is enabled\n    if (!surveyStatus) {\n      skeletonType.value = 'survey'\n      await router.replace({ name: 'cloud-survey' })\n      return\n    }\n\n    // User is fully onboarded (active or whitelist check disabled)\n    globalThis.location.href = '/'\n  }),\n  null,\n  { resetOnExecute: false }\n)\n\nconst errorMessage = computed(() => {\n  if (!error.value) return ''\n\n  // Provide user-friendly error messages\n  const errorStr = error.value.toString().toLowerCase()\n\n  if (errorStr.includes('network') || errorStr.includes('fetch')) {\n    return 'Connection problem. Please check your internet connection.'\n  }\n\n  if (errorStr.includes('timeout')) {\n    return 'Request timed out. Please try again.'\n  }\n\n  return 'Unable to check account status. Please try again.'\n})\n\nconst isRetrying = computed(() => isLoading.value && !!error.value)\n\nconst handleRetry = async () => {\n  await checkUserStatus()\n}\n</script>\n","<template>\n  <CloudLoginViewSkeleton v-if=\"skeletonType === 'login'\" />\n  <CloudSurveyViewSkeleton v-else-if=\"skeletonType === 'survey'\" />\n  <CloudWaitlistViewSkeleton v-else-if=\"skeletonType === 'waitlist'\" />\n  <div v-else-if=\"error\" class=\"flex h-full items-center justify-center p-8\">\n    <div class=\"max-w-[100vw] p-2 text-center lg:w-96\">\n      <p class=\"mb-4 text-red-500\">{{ errorMessage }}</p>\n      <Button :loading=\"isRetrying\" class=\"w-full\" @click=\"handleRetry\">\n        {{\n          isRetrying\n            ? $t('cloudOnboarding.retrying')\n            : $t('cloudOnboarding.retry')\n        }}\n      </Button>\n    </div>\n  </div>\n  <div v-else class=\"flex items-center justify-center\">\n    <ProgressSpinner class=\"h-8 w-8\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useAsyncState } from '@vueuse/core'\nimport ProgressSpinner from 'primevue/progressspinner'\nimport { computed, nextTick, ref } from 'vue'\nimport { useRouter } from 'vue-router'\n\nimport Button from '@/components/ui/button/Button.vue'\nimport { useErrorHandling } from '@/composables/useErrorHandling'\nimport { useFeatureFlags } from '@/composables/useFeatureFlags'\nimport {\n  getSurveyCompletedStatus,\n  getUserCloudStatus\n} from '@/platform/cloud/onboarding/auth'\n\nimport CloudLoginViewSkeleton from './skeletons/CloudLoginViewSkeleton.vue'\nimport CloudSurveyViewSkeleton from './skeletons/CloudSurveyViewSkeleton.vue'\n\nconst router = useRouter()\nconst { wrapWithErrorHandlingAsync } = useErrorHandling()\nconst { flags } = useFeatureFlags()\nconst onboardingSurveyEnabled = computed(\n  () => flags.onboardingSurveyEnabled ?? true\n)\n\nconst skeletonType = ref<'login' | 'survey' | 'waitlist' | 'loading'>('loading')\n\nconst {\n  isLoading,\n  error,\n  execute: checkUserStatus\n} = useAsyncState(\n  wrapWithErrorHandlingAsync(async () => {\n    await nextTick()\n\n    if (!onboardingSurveyEnabled.value) {\n      await router.replace({ path: '/' })\n      return\n    }\n\n    const [cloudUserStats, surveyStatus] = await Promise.all([\n      getUserCloudStatus(),\n      getSurveyCompletedStatus()\n    ])\n\n    // Navigate based on user status\n    if (!cloudUserStats) {\n      skeletonType.value = 'login'\n      await router.replace({ name: 'cloud-login' })\n      return\n    }\n\n    // Survey is required for all users when feature flag is enabled\n    if (!surveyStatus) {\n      skeletonType.value = 'survey'\n      await router.replace({ name: 'cloud-survey' })\n      return\n    }\n\n    // User is fully onboarded (active or whitelist check disabled)\n    globalThis.location.href = '/'\n  }),\n  null,\n  { resetOnExecute: false }\n)\n\nconst errorMessage = computed(() => {\n  if (!error.value) return ''\n\n  // Provide user-friendly error messages\n  const errorStr = error.value.toString().toLowerCase()\n\n  if (errorStr.includes('network') || errorStr.includes('fetch')) {\n    return 'Connection problem. Please check your internet connection.'\n  }\n\n  if (errorStr.includes('timeout')) {\n    return 'Request timed out. Please try again.'\n  }\n\n  return 'Unable to check account status. Please try again.'\n})\n\nconst isRetrying = computed(() => isLoading.value && !!error.value)\n\nconst handleRetry = async () => {\n  await checkUserStatus()\n}\n</script>\n"],"mappings":"qjBC6CqB,m4CEjBA,2xBENS,IACF,IAEF,KAEP,KACc,KACD,IAIzB,IAE4B,KACC,uOAEpC,IAAM,EAAS,IAAU,CACnB,CAAE,8BAA+B,IAAiB,CAClD,CAAE,SAAU,IAAgB,CAC5B,EAA0B,MACxB,EAAM,yBAA2B,GACzC,CAEM,EAAe,GAAiD,UAAS,CAEzE,CACJ,YACA,QACA,QAAS,GACP,GACF,EAA2B,SAAY,CAGrC,GAFA,MAAM,GAAS,CAEX,CAAC,EAAwB,MAAO,CAClC,MAAM,EAAO,QAAQ,CAAE,KAAM,IAAK,CAAA,CAClC,OAGF,GAAM,CAAC,EAAgB,GAAgB,MAAM,QAAQ,IAAI,CACvD,GAAoB,CACpB,GAAyB,CAC1B,CAAA,CAGD,GAAI,CAAC,EAAgB,CACnB,EAAa,MAAQ,QACrB,MAAM,EAAO,QAAQ,CAAE,KAAM,cAAe,CAAA,CAC5C,OAIF,GAAI,CAAC,EAAc,CACjB,EAAa,MAAQ,SACrB,MAAM,EAAO,QAAQ,CAAE,KAAM,eAAgB,CAAA,CAC7C,OAIF,WAAW,SAAS,KAAO,KAC3B,CACF,KACA,CAAE,eAAgB,GAAM,CAC1B,CAEM,EAAe,MAAe,CAClC,GAAI,CAAC,EAAM,MAAO,MAAO,GAGzB,IAAM,EAAW,EAAM,MAAM,UAAU,CAAC,aAAY,CAUpD,OARI,EAAS,SAAS,UAAU,EAAI,EAAS,SAAS,QAAQ,CACrD,6DAGL,EAAS,SAAS,UAAU,CACvB,uCAGF,qDACR,CAEK,EAAa,MAAe,EAAU,OAAS,CAAC,CAAC,EAAM,MAAK,CAE5D,YAAc,SAAY,CAC9B,MAAM,GAAgB"}