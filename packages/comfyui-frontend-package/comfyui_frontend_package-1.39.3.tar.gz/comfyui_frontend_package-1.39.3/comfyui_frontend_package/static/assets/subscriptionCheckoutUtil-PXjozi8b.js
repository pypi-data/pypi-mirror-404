import{i as e,n as t}from"./rolldown-runtime-BKYq3fBv.js";import{an as n,on as r}from"./api-CJ30itpV.js";import{r as i,s as a}from"./i18n-gOSvTADh.js";import{Bo as o,Ho as s,Uo as c,Vo as l,Wo as u}from"./dialogService-DvYmp2_F.js";async function performSubscriptionCheckout(e,t,n=!0){if(!r)return;let{getFirebaseAuthHeader:i}=s(),l=await i();if(!l)throw new o(a(`toastMessages.userNotAuthenticated`));let u=getCheckoutTier(e,t),d=await fetch(`${c()}/customers/cloud-subscription-checkout/${u}`,{method:`POST`,headers:{...l,"Content-Type":`application/json`}});if(!d.ok){let e=`Failed to initiate checkout`;try{e=(await d.json()).message||e}catch{try{e=await d.text()||`HTTP ${d.status} ${d.statusText}`}catch{e=`HTTP ${d.status} ${d.statusText}`}}throw new o(a(`toastMessages.failedToInitiateSubscription`,{error:e}))}let f=await d.json();f.checkout_url&&(n?window.open(f.checkout_url,`_blank`):globalThis.location.href=f.checkout_url)}var getCheckoutTier,d=t((()=>{u(),i(),n(),l(),getCheckoutTier=(e,t)=>t===`yearly`?`${e}-yearly`:e}));export{performSubscriptionCheckout as n,d as t};
//# sourceMappingURL=subscriptionCheckoutUtil-PXjozi8b.js.map