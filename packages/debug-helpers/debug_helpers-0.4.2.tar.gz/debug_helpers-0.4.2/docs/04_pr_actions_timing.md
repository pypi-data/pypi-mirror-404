# Pull Request ä¸­çš„ GitHub Actions è¿è¡Œæœºåˆ¶

## ğŸ”„ PR è§¦å‘æ—¶æœºè¯¦è§£

### è§¦å‘é…ç½®

```yaml
on:
  pull_request:
    branches: [main]  # å‘ main åˆ†æ”¯æäº¤ PR æ—¶è§¦å‘
```

### å®Œæ•´æ—¶é—´çº¿

```
æ—¶åˆ» 0:00 - å¼€å‘è€…åˆ›å»º PR
            â†“
æ—¶åˆ» 0:01 - GitHub æ£€æµ‹åˆ° PR äº‹ä»¶
            â†“
æ—¶åˆ» 0:02 - ç«‹å³å¯åŠ¨ GitHub Actions
            â†“ (æ˜¾ç¤ºçŠ¶æ€ï¼šâ³ æ’é˜Ÿä¸­)
            â†“
æ—¶åˆ» 0:05 - åˆ†é…è™šæ‹Ÿæœºï¼Œå¼€å§‹è¿è¡Œ
            â†“ (æ˜¾ç¤ºçŠ¶æ€ï¼šğŸ”„ è¿è¡Œä¸­)
            â†“
æ—¶åˆ» 0:10 - æ£€å‡ºä»£ç ã€å®‰è£…ä¾èµ–
            â†“
æ—¶åˆ» 1:00 - è¿è¡Œæµ‹è¯•
            â†“
æ—¶åˆ» 3:00 - å®Œæˆæµ‹è¯•
            â†“ (æ˜¾ç¤ºçŠ¶æ€ï¼šâœ… æˆåŠŸ æˆ– âŒ å¤±è´¥)
            â†“
æ˜¾ç¤ºç»“æœ  - PR é¡µé¢æ˜¾ç¤ºæµ‹è¯•ç»“æœ
```

---

## ğŸ¯ PR ä¸­çš„è¿è¡Œåœºæ™¯

### åœºæ™¯ 1: åˆ›å»ºæ–° PR

**æ“ä½œæµç¨‹**ï¼š
```bash
# å¼€å‘è€…åœ¨è‡ªå·±çš„åˆ†æ”¯ä¸Šå·¥ä½œ
git checkout -b feature/new-feature
git add .
git commit -m "Add new feature"
git push origin feature/new-feature

# åœ¨ GitHub ä¸Šåˆ›å»º PR: feature/new-feature â†’ main
```

**GitHub Actions è¡Œä¸º**ï¼š
1. âœ… **ç«‹å³è¿è¡Œ**ï¼ˆPR åˆ›å»ºåå‡ ç§’å†…ï¼‰
2. ğŸ”„ PR é¡µé¢æ˜¾ç¤º"Checks"éƒ¨åˆ†
3. â³ æ˜¾ç¤ºæµ‹è¯•çŠ¶æ€ï¼ˆæ’é˜Ÿã€è¿è¡Œä¸­ã€å®Œæˆï¼‰
4. âœ…/âŒ æ˜¾ç¤ºæœ€ç»ˆç»“æœ

**PR é¡µé¢æ˜¾ç¤º**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pull Request #42                           â”‚
â”‚  Add new feature                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Some checks haven't completed yet          â”‚
â”‚  ğŸ”„ Python Unit Tests  In progress...       â”‚
â”‚     â”œâ”€ test (3.9)   âœ… Passed               â”‚
â”‚     â”œâ”€ test (3.10)  âœ… Passed               â”‚
â”‚     â”œâ”€ test (3.11)  ğŸ”„ Running...           â”‚
â”‚     â”œâ”€ test (3.12)  â³ Queued               â”‚
â”‚     â””â”€ test (3.13)  â³ Queued               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åœºæ™¯ 2: PR ä¸­æ–°å¢æäº¤

**æ“ä½œæµç¨‹**ï¼š
```bash
# PR å·²åˆ›å»ºï¼Œä½†å‘ç°éœ€è¦ä¿®æ”¹
git add .
git commit -m "Fix issues"
git push origin feature/new-feature
```

**GitHub Actions è¡Œä¸º**ï¼š
1. âœ… **å†æ¬¡ç«‹å³è¿è¡Œ**ï¼ˆæ¯æ¬¡æ–° commit éƒ½ä¼šè§¦å‘ï¼‰
2. ğŸ›‘ å¦‚æœä¹‹å‰çš„æµ‹è¯•è¿˜åœ¨è¿è¡Œï¼Œä¼šè¢«å–æ¶ˆ
3. ğŸ†• ä½¿ç”¨æœ€æ–°çš„ä»£ç é‡æ–°æµ‹è¯•
4. ğŸ“Š å†å²è®°å½•å¯ä»¥æŸ¥çœ‹æ‰€æœ‰è¿è¡Œ

**PR é¡µé¢æ›´æ–°**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pull Request #42                           â”‚
â”‚  2 commits                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  All checks have passed                     â”‚
â”‚  âœ… Python Unit Tests  Passed (3m 24s)     â”‚
â”‚     â”œâ”€ test (3.9)   âœ… Passed               â”‚
â”‚     â”œâ”€ test (3.10)  âœ… Passed               â”‚
â”‚     â”œâ”€ test (3.11)  âœ… Passed               â”‚
â”‚     â”œâ”€ test (3.12)  âœ… Passed               â”‚
â”‚     â””â”€ test (3.13)  âœ… Passed               â”‚
â”‚                                             â”‚
â”‚  [âœ… Merge pull request]  â† å¯ä»¥åˆå¹¶        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åœºæ™¯ 3: æµ‹è¯•å¤±è´¥

**PR é¡µé¢æ˜¾ç¤º**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pull Request #42                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âŒ Some checks were not successful         â”‚
â”‚  âŒ Python Unit Tests  Failed               â”‚
â”‚     â”œâ”€ test (3.9)   âœ… Passed               â”‚
â”‚     â”œâ”€ test (3.10)  âŒ Failed               â”‚
â”‚     â”œâ”€ test (3.11)  âœ… Passed               â”‚
â”‚     â”œâ”€ test (3.12)  âœ… Passed               â”‚
â”‚     â””â”€ test (3.13)  âœ… Passed               â”‚
â”‚                                             â”‚
â”‚  [ğŸš« Merge pull request]  â† ä¸å»ºè®®åˆå¹¶      â”‚
â”‚                                             â”‚
â”‚  View details: test (3.10) failed           â”‚
â”‚  > FAILED tests/test_example.py::test_add  â”‚
â”‚  > AssertionError: assert 4 == 5            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš™ï¸ åˆ†æ”¯ä¿æŠ¤è§„åˆ™ï¼ˆæ¨èè®¾ç½®ï¼‰

### è®¾ç½®æ­¥éª¤

åœ¨ GitHub ä»“åº“ä¸­ï¼š
1. Settings â†’ Branches
2. Add branch protection rule
3. Branch name pattern: `main`
4. å‹¾é€‰ä»¥ä¸‹é€‰é¡¹ï¼š

```
âœ… Require status checks to pass before merging
   â””â”€ âœ… Require branches to be up to date before merging
   â””â”€ Status checks that are required:
      â”œâ”€ âœ… test (3.9)
      â”œâ”€ âœ… test (3.10)
      â”œâ”€ âœ… test (3.11)
      â”œâ”€ âœ… test (3.12)
      â””â”€ âœ… test (3.13)

âœ… Require review from Code Owners
âœ… Do not allow bypassing the above settings
```

### è®¾ç½®åçš„æ•ˆæœ

**1. æµ‹è¯•æœªé€šè¿‡æ—¶**ï¼š
```
âŒ Merging is blocked
   The following checks failed:
   - test (3.10): Failed

   [Details] [Re-run failed jobs]
```

**2. æµ‹è¯•é€šè¿‡å**ï¼š
```
âœ… All checks have passed
   5 successful checks

   [âœ… Merge pull request]
```

**3. æµ‹è¯•è¿è¡Œä¸­**ï¼š
```
â³ Merging is blocked
   Checks are still running...
   
   [View details]
```

---

## ğŸ”„ å¤šç§ PR äº‹ä»¶è§¦å‘

test.yml å¯ä»¥å“åº”å¤šç§ PR äº‹ä»¶ï¼š

### é»˜è®¤é…ç½®ï¼ˆæœ€ç®€å•ï¼‰

```yaml
on:
  pull_request:
    branches: [main]
```

**è§¦å‘æ—¶æœº**ï¼š
- âœ… PR æ‰“å¼€ (opened)
- âœ… PR æ›´æ–° (synchronize) - æ–° commit æ¨é€
- âœ… PR é‡æ–°æ‰“å¼€ (reopened)

### é«˜çº§é…ç½®ï¼ˆç²¾ç»†æ§åˆ¶ï¼‰

```yaml
on:
  pull_request:
    types: [opened, synchronize, reopened, ready_for_review]
    branches: [main, develop]
```

**è§¦å‘æ—¶æœº**ï¼š
- `opened` - PR åˆ›å»ºæ—¶
- `synchronize` - æ–° commit æ¨é€æ—¶
- `reopened` - PR é‡æ–°æ‰“å¼€æ—¶
- `ready_for_review` - è‰ç¨¿ PR æ ‡è®°ä¸º"å‡†å¤‡å®¡æŸ¥"æ—¶

---

## ğŸ“Š å®é™…æ¡ˆä¾‹æ¼”ç¤º

### æ¡ˆä¾‹ 1: åˆ›å»º PR å¹¶æ¨é€ä¿®å¤

```bash
# 1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
$ git checkout -b feature/add-logging
$ git commit -m "Add logging"
$ git push origin feature/add-logging

# åœ¨ GitHub ä¸Šåˆ›å»º PR
â†’ GitHub Actions ç«‹å³å¯åŠ¨ (0:02 ç§’å†…)
â†’ PR é¡µé¢æ˜¾ç¤º: â³ Checks in progress...

# 2. æ”¶åˆ°é‚®ä»¶: æµ‹è¯•å¤±è´¥
â†’ æŸ¥çœ‹è¯¦æƒ…: test (3.10) failed

# 3. æœ¬åœ°ä¿®å¤
$ git commit -m "Fix Python 3.10 compatibility"
$ git push origin feature/add-logging

# Push åç«‹å³:
â†’ GitHub Actions å†æ¬¡å¯åŠ¨ (0:02 ç§’å†…)
â†’ æ—§çš„è¿è¡Œè¢«å–æ¶ˆ
â†’ æ–°çš„æµ‹è¯•å¼€å§‹è¿è¡Œ

# 4. 3 åˆ†é’Ÿå
â†’ æ”¶åˆ°é‚®ä»¶: All checks passed âœ…
â†’ PR é¡µé¢: ç»¿è‰²å‹¾å·ï¼Œå¯ä»¥åˆå¹¶
```

### æ¡ˆä¾‹ 2: Draft PR

```yaml
on:
  pull_request:
    types: [opened, synchronize, reopened, ready_for_review]
```

**æµç¨‹**ï¼š
```bash
# 1. åˆ›å»ºè‰ç¨¿ PR (Draft PR)
â†’ âŒ ä¸ä¼šç«‹å³è¿è¡Œæµ‹è¯•

# 2. ç»§ç»­å¼€å‘ï¼Œæ¨é€å¤šæ¬¡æäº¤
â†’ âŒ ä»ç„¶ä¸è¿è¡Œ

# 3. æ ‡è®°ä¸º "Ready for review"
â†’ âœ… ç«‹å³è§¦å‘æµ‹è¯•

# å¥½å¤„: èŠ‚çœèµ„æºï¼Œé¿å…åœ¨å¼€å‘ä¸­æœŸé¢‘ç¹æµ‹è¯•
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. å¿«é€Ÿåé¦ˆå¾ªç¯

```
å¼€å‘ â†’ Push â†’ PRåˆ›å»º (0:00)
                â†“ (ç«‹å³è§¦å‘)
             æµ‹è¯•è¿è¡Œ (0:02)
                â†“ (3åˆ†é’Ÿ)
             æ˜¾ç¤ºç»“æœ (3:00)
                â†“
        ä¿®å¤æˆ–ç»§ç»­å¼€å‘
```

### 2. å¹¶è¡Œä¸æ•ˆç‡

```
5 ä¸ª Python ç‰ˆæœ¬å¹¶è¡Œæµ‹è¯•
â”œâ”€ ä¸²è¡Œ: 5 Ã— 3åˆ†é’Ÿ = 15åˆ†é’Ÿ
â””â”€ å¹¶è¡Œ: 3åˆ†é’Ÿ âœ…
   
ç»“æœ: æé€Ÿ 5 å€ï¼
```

### 3. åˆå¹¶å‰æ£€æŸ¥

```
PR åˆ›å»º â†’ æµ‹è¯•è¿è¡Œ â†’ ä»£ç å®¡æŸ¥ â†’ æµ‹è¯•é€šè¿‡ â†’ åˆå¹¶
         â†‘                              â†‘
      ç«‹å³æ‰§è¡Œ                      åˆ†æ”¯ä¿æŠ¤ç¡®ä¿
```

---

## ğŸ”” é€šçŸ¥æœºåˆ¶

### è‡ªåŠ¨é€šçŸ¥

GitHub ä¼šåœ¨ä»¥ä¸‹æƒ…å†µé€šçŸ¥ä½ ï¼š

| äº‹ä»¶ | é€šçŸ¥æ–¹å¼ |
|------|----------|
| æµ‹è¯•å¼€å§‹ | æ— é€šçŸ¥ï¼ˆå¤ªé¢‘ç¹ï¼‰ |
| æµ‹è¯•å¤±è´¥ | ğŸ“§ é‚®ä»¶ + ğŸ”” ç½‘ç«™é€šçŸ¥ |
| æµ‹è¯•é€šè¿‡ | ğŸ”” ç½‘ç«™é€šçŸ¥ï¼ˆå¯å…³é—­é‚®ä»¶ï¼‰ |
| PR å¯åˆå¹¶ | ğŸ”” ç½‘ç«™é€šçŸ¥ |

### è®¾ç½®é€šçŸ¥åå¥½

Settings â†’ Notifications â†’ Actions:
- âœ… Send notifications for failed workflows only
- âŒ Send notifications for all workflow runs

---

## ğŸ’¡ æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹

1. **ç«‹å³è¿è¡Œ**: PR åˆ›å»ºå **å‡ ç§’å†…**å°±ä¼šè§¦å‘
2. **å®æ—¶åé¦ˆ**: PR é¡µé¢å®æ—¶æ˜¾ç¤ºæµ‹è¯•è¿›åº¦
3. **æ¯æ¬¡æ›´æ–°éƒ½ä¼šé‡æ–°æµ‹è¯•**: æ¨é€æ–° commit ä¼šè‡ªåŠ¨é‡æ–°è¿è¡Œ
4. **å¯ä»¥è®¾ç½®å¿…é¡»é€šè¿‡**: åˆ†æ”¯ä¿æŠ¤è§„åˆ™å¼ºåˆ¶æµ‹è¯•é€šè¿‡æ‰èƒ½åˆå¹¶
5. **å®Œå…¨è‡ªåŠ¨åŒ–**: æ— éœ€æ‰‹åŠ¨è§¦å‘ï¼Œä¸€åˆ‡éƒ½æ˜¯è‡ªåŠ¨çš„

### æ—¶é—´å¯¹æ¯”

| æ“ä½œ | è§¦å‘å»¶è¿Ÿ |
|------|----------|
| åˆ›å»º PR | **< 5 ç§’** |
| æ¨é€æ–° commit | **< 5 ç§’** |
| å¼€å§‹è¿è¡Œæµ‹è¯• | **< 30 ç§’** |
| å®Œæˆæ‰€æœ‰æµ‹è¯• | **~ 3 åˆ†é’Ÿ** |

æ‰€ä»¥ï¼Œæ˜¯çš„ï¼Œ**PR ä¸€æäº¤å°±ç«‹å³è¿è¡Œï¼Œä¸ç”¨ç­‰å¾…ï¼** âš¡

---

## ğŸ“– æŸ¥çœ‹è¿è¡ŒçŠ¶æ€

### åœ¨ PR é¡µé¢æŸ¥çœ‹

1. æ‰“å¼€ä½ çš„ PR
2. æ»šåŠ¨åˆ°åº•éƒ¨çš„ "Checks" åŒºåŸŸ
3. å®æ—¶æŸ¥çœ‹æ‰€æœ‰æµ‹è¯•çŠ¶æ€
4. ç‚¹å‡» "Details" æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

### åœ¨ Actions é¡µé¢æŸ¥çœ‹

1. è¿›å…¥ä»“åº“çš„ "Actions" æ ‡ç­¾
2. æŸ¥çœ‹æ‰€æœ‰å·¥ä½œæµè¿è¡Œå†å²
3. å¯ä»¥è¿‡æ»¤ï¼šPRã€åˆ†æ”¯ã€çŠ¶æ€ç­‰
4. ç‚¹å‡»ä»»æ„è¿è¡ŒæŸ¥çœ‹è¯¦ç»†æ—¥å¿—

éå¸¸ç›´è§‚å’Œå®æ—¶ï¼ğŸ‰
