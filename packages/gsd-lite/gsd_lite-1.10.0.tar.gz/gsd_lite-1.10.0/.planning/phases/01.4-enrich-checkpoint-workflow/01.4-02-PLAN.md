---
phase: 01.4-enrich-checkpoint-workflow
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/gsd_lite/template/workflows/revisit.md
autonomous: false

must_haves:
  truths:
    - "User can revisit planning decisions after whiteboard without restarting discovery"
    - "Revisit workflow stays in planning layer (doesn't loop back to moodboard)"
    - "New ideas during revisit captured to WORK.md as [DECISION] or [BLOCKER]"
  artifacts:
    - path: "src/gsd_lite/template/workflows/revisit.md"
      provides: "Revisit workflow for post-whiteboard rethinking"
      contains: "Entry Conditions"
      min_lines: 200
  key_links:
    - from: "src/gsd_lite/template/workflows/revisit.md"
      to: "WORK.md session log"
      via: "captures new ideas as type-tagged entries"
      pattern: "\\[DECISION\\]|\\[BLOCKER\\]"
---

<objective>
Create revisit.md workflow enabling user-initiated rethinking after whiteboard completion, and verify all enriched checkpoint workflow files are clear and actionable.

Purpose: Support non-linear thinking where user returns with new ideas after original planning. Verify templates teach both what to do and why.

Output: New revisit.md workflow file, human verification confirming workflow clarity.
</objective>

<execution_context>
@/Users/luutuankiet/.claude/get-shit-done/workflows/execute-plan.md
@/Users/luutuankiet/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01.4-enrich-checkpoint-workflow/01.4-CONTEXT.md
@.planning/phases/01.4-enrich-checkpoint-workflow/01.4-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create revisit.md workflow for post-whiteboard rethinking</name>
  <files>src/gsd_lite/template/workflows/revisit.md</files>
  <action>
Create new revisit.md workflow following established workflow template pattern (see existing checkpoint.md, execution.md structure).

**Structure:**

1. **Header:** `# Revisit Workflow` with system marker `[SYSTEM: REVISIT MODE - Post-Whiteboard Rethinking]`

2. **Entry Conditions:**
   - User requests "revisit" or "let me rethink this"
   - MODE = whiteboard-complete (ready for execution but not yet executing)
   - User has new ideas since original whiteboard session

3. **Exit Conditions:**
   - Revised plan presented and user approves
   - MODE transitions back to whiteboard-complete
   - OR user decides original plan was correct (no changes needed)

4. **Revisit Protocol section:**

   **Step 1: Review Current Plan**
   - Read existing PLAN.md or whiteboard notes
   - Present current approach to user
   - Format: Brief summary + key decisions

   **Step 2: Capture New Ideas**
   - Listen to user's new thoughts
   - Add entries to WORK.md as [DECISION] (if reconsidering choice) or [BLOCKER] (if new question)
   - Example: `[DECISION] Reconsidering card layout - user prefers timeline after all`

   **Step 3: Identify What Changed**
   - Compare new ideas vs original plan
   - Highlight differences explicitly
   - Format: "Original: X, New: Y, Rationale: Z"

   **Step 4: Revise Plan (if needed)**
   - Update PLAN.md or whiteboard notes with revised approach
   - Preserve original rationale in WORK.md for context
   - If no changes needed, confirm original plan stands

   **Step 5: Return to Whiteboard-Complete**
   - Present revised plan for user approval
   - MODE stays whiteboard-complete (ready for execution)
   - User can proceed to execution or revisit again

5. **Revisit vs Moodboard section:**
   - Table comparing Revisit (planning layer rethinking) vs Moodboard (discovery restart)
   - Key difference: Revisit assumes vision already extracted, only reconsidering implementation
   - Anti-pattern: Looping back to "what do you want?" questions

6. **Sticky Note Protocol section:**
   - Standard sticky note format (identical to other workflows)
   - Contextual actions for revisit mode

7. **Common Pitfalls section:**
   - "Looping back to moodboard instead of staying in planning layer"
   - "Not capturing rationale for revised decisions"
   - "Forgetting to update PLAN.md with changes"

**Reference:** CONTEXT.md "Revisit Workflow" section and RESEARCH.md "Revisit Workflow (NEW)" section for requirements.

**Tone:** Educational, inline comments explaining when/why to use revisit mode.

**Avoid:** ASCII art (use markdown headers + mermaid if diagrams needed).
  </action>
  <verify>
Read created revisit.md and check:
- [ ] Entry/exit conditions clearly defined
- [ ] Protocol steps (1-5) present and actionable
- [ ] Revisit vs Moodboard comparison included
- [ ] Sticky note protocol section present
- [ ] Common pitfalls documented
- [ ] File length ~200+ lines
  </verify>
  <done>
revisit.md workflow exists with clear entry/exit conditions, step-by-step protocol for post-whiteboard rethinking, anti-patterns documented preventing moodboard loop-back, and sticky note format consistent with other workflows.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Enriched checkpoint workflow with three enhanced/new files:
1. WORK.md template - Current Understanding section + type-tagged session log
2. checkpoint.md workflow - Current Understanding maintenance instructions
3. revisit.md workflow - Post-whiteboard rethinking protocol
  </what-built>
  <how-to-verify>
**Step 1: Review WORK.md template**
- Open `src/gsd_lite/template/WORK.md`
- Check Current Understanding section has 5 XML parts (current_state, vision, decisions, blockers, next_action)
- Check Session Log section uses type tags: [VISION], [DECISION], [PLAN], [EXEC], [BLOCKER]
- Verify inline comments explain when to update (at checkpoint time) and semantic broadening rationale
- Confirm examples are concrete (not vague placeholders)

**Step 2: Review checkpoint.md workflow**
- Open `src/gsd_lite/template/workflows/checkpoint.md`
- Find new step for updating Current Understanding (should be Step 1.5 or similar)
- Verify step instructs concrete content (avoid jargon)
- Check Common Pitfalls section includes Current Understanding anti-patterns
- Confirm Checkpoint vs Promotion table updated

**Step 3: Review revisit.md workflow**
- Open `src/gsd_lite/template/workflows/revisit.md`
- Check entry conditions (whiteboard-complete mode, user-initiated)
- Verify protocol steps cover: review, capture, identify changes, revise, return
- Confirm Revisit vs Moodboard comparison prevents loop-back
- Check sticky note protocol present

**Step 4: Overall coherence**
- Verify all three files use consistent tone (educational, inline comments)
- Check no ASCII art introduced (markdown + mermaid only)
- Confirm workflows reference each other appropriately (checkpoint → WORK.md Current Understanding, revisit → WORK.md session log)

**Expected outcomes:**
- Templates are self-explanatory (can understand what/why without external docs)
- Fresh agent could follow checkpoint workflow and correctly update Current Understanding
- User understands when to use revisit (post-whiteboard rethinking) vs moodboard (restart discovery)
- All files maintain educational style from Phase 1.3
  </how-to-verify>
  <resume-signal>
Type "approved" if templates are clear and actionable, or describe any issues/confusion found during review.
  </resume-signal>
</task>

</tasks>

<verification>
After human verification approval:

1. Confirm all three files (WORK.md, checkpoint.md, revisit.md) committed
2. Verify no ASCII art in any file (grep for common ASCII patterns)
3. Check file sizes meet minimums (WORK.md ~80+, checkpoint.md ~360+, revisit.md ~200+)
4. Verify type tags consistently used across files: [VISION], [DECISION], [PLAN], [EXEC], [BLOCKER]
</verification>

<success_criteria>
1. revisit.md workflow exists with clear protocol for post-whiteboard rethinking
2. All workflow files (WORK.md, checkpoint.md, revisit.md) use educational inline comments
3. Human verifier confirms templates are self-explanatory and actionable
4. No ASCII art in any template (markdown headers + mermaid only)
5. Workflows reference each other appropriately (checkpoint → Current Understanding, revisit → session log)
</success_criteria>

<output>
After completion, create `.planning/phases/01.4-enrich-checkpoint-workflow/01.4-02-SUMMARY.md`
</output>
