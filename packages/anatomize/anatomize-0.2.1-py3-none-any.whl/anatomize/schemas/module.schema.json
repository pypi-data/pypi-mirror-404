{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/BradSegal/anatomize/schemas/module.schema.json",
  "title": "Anatomize Module",
  "description": "Schema for anatomize module files",
  "type": "object",
  "required": ["package", "modules"],
  "properties": {
    "$schema": { "type": "string" },
    "package": { "type": "string" },
    "modules": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "required": ["path", "source"],
        "properties": {
          "path": { "type": "string" },
          "source": { "type": "integer", "minimum": 0 },
          "doc": { "type": "string" },
          "imports": { "type": "array", "items": { "type": "string" } },
          "constants": { "type": "array", "items": { "$ref": "#/$defs/attributeInfo" } },
          "classes": { "type": "array", "items": { "$ref": "#/$defs/classInfo" } },
          "functions": { "type": "array", "items": { "$ref": "#/$defs/functionInfo" } }
        },
        "additionalProperties": false
      }
    }
  },
  "additionalProperties": false,
  "$defs": {
    "parameterInfo": {
      "type": "object",
      "required": ["name", "kind"],
      "properties": {
        "name": { "type": "string" },
        "annotation": { "type": "string" },
        "default": { "type": "string" },
        "kind": { "type": "string" }
      },
      "additionalProperties": false
    },
    "functionInfo": {
      "type": "object",
      "required": ["name", "line"],
      "properties": {
        "name": { "type": "string" },
        "line": { "type": "integer", "minimum": 1 },
        "doc": { "type": "string" },
        "signature": { "type": "string" },
        "returns": { "type": "string" },
        "decorators": { "type": "array", "items": { "type": "string" } },
        "async": { "type": "boolean" },
        "parameters": { "type": "array", "items": { "$ref": "#/$defs/parameterInfo" } }
      },
      "additionalProperties": false
    },
    "attributeInfo": {
      "type": "object",
      "required": ["name", "line"],
      "properties": {
        "name": { "type": "string" },
        "line": { "type": "integer", "minimum": 1 },
        "doc": { "type": "string" },
        "annotation": { "type": "string" },
        "default": { "type": "string" }
      },
      "additionalProperties": false
    },
    "classInfo": {
      "type": "object",
      "required": ["name", "line"],
      "properties": {
        "name": { "type": "string" },
        "line": { "type": "integer", "minimum": 1 },
        "doc": { "type": "string" },
        "bases": { "type": "array", "items": { "type": "string" } },
        "decorators": { "type": "array", "items": { "type": "string" } },
        "methods": { "type": "array", "items": { "$ref": "#/$defs/functionInfo" } },
        "attributes": { "type": "array", "items": { "$ref": "#/$defs/attributeInfo" } },
        "dataclass": { "type": "boolean" },
        "pydantic": { "type": "boolean" }
      },
      "additionalProperties": false
    }
  }
}
