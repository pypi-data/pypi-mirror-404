# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

import pydantic
import typing_extensions
from ...commons.types.entity_id_base import EntityIdBase
from ...commons.types.entity_id_without_agent import EntityIdWithoutAgent
from ...commons.types.scoped_entity import ScopedEntity
from ...core.pydantic_utilities import IS_PYDANTIC_V2
from ...core.serialization import FieldMetadata
from .base_knowledge_document import BaseKnowledgeDocument
from .knowledge_document_content_type import KnowledgeDocumentContentType


class KnowledgeDocumentRequest(BaseKnowledgeDocument):
    """
    Examples
    --------
    from mavenagi.commons import EntityIdBase, EntityIdWithoutAgent
    from mavenagi.knowledge import KnowledgeDocumentRequest

    KnowledgeDocumentRequest(
        knowledge_document_id=EntityIdBase(
            reference_id="getting-started",
        ),
        version_id=EntityIdWithoutAgent(
            type="KNOWLEDGE_BASE_VERSION",
            reference_id="versionId",
            app_id="maven",
        ),
        content_type="MARKDOWN",
        content="## Getting started\\nThis is a getting started guide for the help center.",
        title="Getting started",
        metadata={"category": "getting-started"},
    )
    """

    knowledge_document_id: typing_extensions.Annotated[EntityIdBase, FieldMetadata(alias="knowledgeDocumentId")] = (
        pydantic.Field()
    )
    """
    ID that uniquely identifies this knowledge document within its knowledge base
    """

    version_id: typing_extensions.Annotated[typing.Optional[EntityIdWithoutAgent], FieldMetadata(alias="versionId")] = (
        pydantic.Field(default=None)
    )
    """
    ID that uniquely identifies which knowledge base version to create the document in. If not provided will use the most recent version of the knowledge base.
    """

    content_type: typing_extensions.Annotated[KnowledgeDocumentContentType, FieldMetadata(alias="contentType")] = (
        pydantic.Field()
    )
    """
    Type of knowledge document content, if content is provided. This does not need to be set if content is not provided
    """

    title: str = pydantic.Field()
    """
    The title of the document. Will be shown as part of answers.
    """

    asset_id: typing_extensions.Annotated[typing.Optional[EntityIdWithoutAgent], FieldMetadata(alias="assetId")] = (
        pydantic.Field(default=None)
    )
    """
    ID of the asset associated with this document. This asset will be transformed into text and set as the content of the document. The following types are supported: `application/pdf`, `text/plain`.  Either this or content is required, but not both
    """

    content: typing.Optional[str] = pydantic.Field(default=None)
    """
    The content of the document. Not shown directly to users. May be provided in HTML or markdown. HTML will be converted to markdown automatically. Images are not currently supported and will be ignored. Either this or assetId is required, but not both
    """

    metadata: typing.Optional[typing.Dict[str, str]] = pydantic.Field(default=None)
    """
    Metadata for the knowledge document.
    """

    created_at: typing_extensions.Annotated[typing.Optional[dt.datetime], FieldMetadata(alias="createdAt")] = (
        pydantic.Field(default=None)
    )
    """
    The time at which this document was created.
    """

    updated_at: typing_extensions.Annotated[typing.Optional[dt.datetime], FieldMetadata(alias="updatedAt")] = (
        pydantic.Field(default=None)
    )
    """
    The time at which this document was last modified.
    """

    relevant_entities: typing_extensions.Annotated[
        typing.Optional[typing.List[ScopedEntity]], FieldMetadata(alias="relevantEntities")
    ] = pydantic.Field(default=None)
    """
    Scoped entities this document is associated with for context-based filtering. By default, the document is associated with the agent.
    """

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow
