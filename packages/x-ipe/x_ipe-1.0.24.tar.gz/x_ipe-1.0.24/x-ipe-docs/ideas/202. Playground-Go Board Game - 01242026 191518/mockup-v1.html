<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go 圍棋 - Board Game</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@300;400;500&family=Noto+Serif+JP:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --board-color: #dcb35c;
            --board-dark: #c9a24d;
            --board-line: #3d3024;
            --wood-shadow: #a67c3d;
            --black-stone: #1a1a1a;
            --white-stone: #f5f5f0;
            --bg-dark: #1c1917;
            --bg-warm: #292524;
            --text-light: #fafaf9;
            --text-muted: #a8a29e;
            --accent-red: #dc2626;
            --accent-gold: #d4a84b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Crimson Pro', 'Noto Serif JP', serif;
            background: var(--bg-dark);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Subtle texture overlay */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
            opacity: 0.03;
            pointer-events: none;
            z-index: 1000;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 1fr auto 280px;
            gap: 3rem;
            min-height: 100vh;
            align-items: center;
        }

        /* Left Panel - Game Info */
        .game-info {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .logo {
            display: flex;
            align-items: baseline;
            gap: 0.75rem;
        }

        .logo h1 {
            font-size: 2.5rem;
            font-weight: 300;
            letter-spacing: 0.1em;
        }

        .logo .kanji {
            font-family: 'Noto Serif JP', serif;
            font-size: 1.5rem;
            color: var(--text-muted);
            font-weight: 300;
        }

        .turn-indicator {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem;
            background: var(--bg-warm);
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .current-stone {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            box-shadow: 
                inset -8px -8px 16px rgba(0,0,0,0.4),
                inset 4px 4px 8px rgba(255,255,255,0.1),
                4px 4px 12px rgba(0,0,0,0.5);
            transition: all 0.4s ease;
        }

        .current-stone.black {
            background: radial-gradient(circle at 30% 30%, #4a4a4a, var(--black-stone));
        }

        .current-stone.white {
            background: radial-gradient(circle at 30% 30%, #ffffff, #e8e8e0);
        }

        .turn-text {
            font-size: 1.1rem;
            font-weight: 400;
            letter-spacing: 0.05em;
        }

        .turn-text span {
            display: block;
            font-size: 0.85rem;
            color: var(--text-muted);
            font-weight: 300;
            margin-top: 0.25rem;
        }

        /* Board Container */
        .board-container {
            position: relative;
            padding: 24px;
            background: linear-gradient(145deg, #c9a24d, #e6c872);
            border-radius: 8px;
            box-shadow: 
                0 25px 50px -12px rgba(0,0,0,0.5),
                0 0 0 1px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255,255,255,0.2);
        }

        /* Wood grain texture */
        .board-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 8px;
            background: 
                repeating-linear-gradient(
                    90deg,
                    transparent,
                    transparent 40px,
                    rgba(139,90,43,0.03) 40px,
                    rgba(139,90,43,0.03) 80px
                ),
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(139,90,43,0.02) 2px,
                    rgba(139,90,43,0.02) 4px
                );
            pointer-events: none;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(13, 36px);
            grid-template-rows: repeat(13, 36px);
            gap: 0;
            position: relative;
            background: var(--board-color);
        }

        /* Grid lines */
        .board::before {
            content: '';
            position: absolute;
            top: 18px;
            left: 18px;
            right: 18px;
            bottom: 18px;
            background-image: 
                linear-gradient(var(--board-line) 1px, transparent 1px),
                linear-gradient(90deg, var(--board-line) 1px, transparent 1px);
            background-size: 36px 36px;
            pointer-events: none;
        }

        /* Star points (hoshi) */
        .board::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                radial-gradient(circle, var(--board-line) 4px, transparent 4px);
            background-size: 36px 36px;
            background-position: 
                126px 126px,  /* D4 */
                126px 342px,  /* D10 */
                342px 126px,  /* J4 */
                342px 342px,  /* J10 */
                234px 234px;  /* G7 - center */
            pointer-events: none;
        }

        .intersection {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            z-index: 1;
        }

        .intersection:hover::before {
            content: '';
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(0,0,0,0.15);
            pointer-events: none;
        }

        .stone {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            position: relative;
            animation: placeStone 0.3s ease-out;
        }

        @keyframes placeStone {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .stone.black {
            background: radial-gradient(circle at 30% 30%, #4a4a4a, var(--black-stone));
            box-shadow: 
                inset -4px -4px 8px rgba(0,0,0,0.5),
                inset 2px 2px 4px rgba(255,255,255,0.1),
                3px 3px 6px rgba(0,0,0,0.4);
        }

        .stone.white {
            background: radial-gradient(circle at 30% 30%, #ffffff, #e8e8e0);
            box-shadow: 
                inset -4px -4px 8px rgba(0,0,0,0.15),
                inset 2px 2px 4px rgba(255,255,255,0.8),
                3px 3px 6px rgba(0,0,0,0.3);
        }

        /* Star point markers */
        .star-point::after {
            content: '';
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--board-line);
            border-radius: 50%;
            z-index: 0;
        }

        /* Right Panel */
        .side-panel {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            align-self: stretch;
        }

        .score-card {
            background: var(--bg-warm);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .score-card h3 {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--text-muted);
            margin-bottom: 1rem;
            font-weight: 400;
        }

        .score-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .score-row:last-child {
            border-bottom: none;
        }

        .player-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .mini-stone {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }

        .mini-stone.black {
            background: radial-gradient(circle at 30% 30%, #4a4a4a, var(--black-stone));
            box-shadow: inset -2px -2px 4px rgba(0,0,0,0.5);
        }

        .mini-stone.white {
            background: radial-gradient(circle at 30% 30%, #ffffff, #e8e8e0);
            box-shadow: inset -2px -2px 4px rgba(0,0,0,0.1);
        }

        .player-name {
            font-size: 0.95rem;
        }

        .player-name span {
            display: block;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .score-value {
            font-size: 1.5rem;
            font-weight: 500;
            font-variant-numeric: tabular-nums;
        }

        /* Move History */
        .move-history {
            flex: 1;
            background: var(--bg-warm);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid rgba(255,255,255,0.05);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .move-history h3 {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--text-muted);
            margin-bottom: 1rem;
            font-weight: 400;
        }

        .moves-list {
            flex: 1;
            overflow-y: auto;
            font-size: 0.85rem;
            font-family: 'SF Mono', 'Fira Code', monospace;
            color: var(--text-muted);
        }

        .move-entry {
            display: flex;
            gap: 1rem;
            padding: 0.4rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.03);
        }

        .move-number {
            color: var(--text-muted);
            min-width: 24px;
        }

        .move-coord {
            color: var(--text-light);
        }

        /* Controls */
        .controls {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .btn {
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-family: 'Crimson Pro', serif;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            letter-spacing: 0.05em;
        }

        .btn-primary {
            background: var(--accent-gold);
            color: var(--bg-dark);
            font-weight: 500;
        }

        .btn-primary:hover {
            background: #e4b85b;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-light);
            border: 1px solid rgba(255,255,255,0.15);
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.05);
            border-color: rgba(255,255,255,0.25);
        }

        .btn-danger {
            background: transparent;
            color: var(--accent-red);
            border: 1px solid var(--accent-red);
            opacity: 0.7;
        }

        .btn-danger:hover {
            background: var(--accent-red);
            color: white;
            opacity: 1;
        }

        /* Game Status Toast */
        .game-status {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-warm);
            padding: 1rem 2rem;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.1);
            font-size: 0.9rem;
            color: var(--text-muted);
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            animation: fadeInUp 0.3s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
                justify-items: center;
                gap: 2rem;
            }

            .game-info {
                flex-direction: row;
                align-items: center;
                justify-content: space-between;
                width: 100%;
                max-width: 540px;
            }

            .side-panel {
                flex-direction: row;
                width: 100%;
                max-width: 540px;
            }

            .score-card, .move-history, .controls {
                flex: 1;
            }

            .move-history {
                max-height: 200px;
            }
        }

        /* Last move indicator */
        .stone.last-move::after {
            content: '';
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .stone.black.last-move::after {
            background: rgba(255,255,255,0.6);
        }

        .stone.white.last-move::after {
            background: rgba(0,0,0,0.4);
        }

        /* Captured stones animation */
        @keyframes captureStone {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(0);
                opacity: 0;
            }
        }

        .stone.captured {
            animation: captureStone 0.3s ease-in forwards;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Left Panel -->
        <div class="game-info">
            <div class="logo">
                <h1>Go</h1>
                <span class="kanji">圍棋</span>
            </div>
            
            <div class="turn-indicator">
                <div class="current-stone black" id="turnStone"></div>
                <div class="turn-text">
                    Black to play
                    <span id="turnHint">Click an intersection to place a stone</span>
                </div>
            </div>
        </div>

        <!-- Game Board -->
        <div class="board-container">
            <div class="board" id="board">
                <!-- 13x13 intersections generated by JS -->
            </div>
        </div>

        <!-- Right Panel -->
        <div class="side-panel">
            <div class="score-card">
                <h3>Score</h3>
                <div class="score-row">
                    <div class="player-info">
                        <div class="mini-stone black"></div>
                        <div class="player-name">
                            Black
                            <span>You</span>
                        </div>
                    </div>
                    <div class="score-value" id="blackScore">0</div>
                </div>
                <div class="score-row">
                    <div class="player-info">
                        <div class="mini-stone white"></div>
                        <div class="player-name">
                            White
                            <span>AI · +6.5 komi</span>
                        </div>
                    </div>
                    <div class="score-value" id="whiteScore">6.5</div>
                </div>
            </div>

            <div class="move-history">
                <h3>Move History</h3>
                <div class="moves-list" id="movesList">
                    <div class="move-entry">
                        <span class="move-number">1.</span>
                        <span class="move-coord">D4</span>
                    </div>
                    <div class="move-entry">
                        <span class="move-number">2.</span>
                        <span class="move-coord">K10</span>
                    </div>
                    <div class="move-entry">
                        <span class="move-number">3.</span>
                        <span class="move-coord">D10</span>
                    </div>
                    <div class="move-entry">
                        <span class="move-number">4.</span>
                        <span class="move-coord">K4</span>
                    </div>
                </div>
            </div>

            <div class="controls">
                <button class="btn btn-primary" id="newGameBtn">New Game</button>
                <button class="btn btn-secondary" id="passBtn">Pass</button>
                <button class="btn btn-secondary" id="undoBtn">Undo Move</button>
                <button class="btn btn-danger" id="resignBtn">Resign</button>
            </div>
        </div>
    </div>

    <div class="game-status" id="gameStatus" style="display: none;">
        Game started. Black plays first.
    </div>

    <script>
        const BOARD_SIZE = 13;
        const board = document.getElementById('board');
        const turnStone = document.getElementById('turnStone');
        const turnHint = document.getElementById('turnHint');
        const gameStatus = document.getElementById('gameStatus');
        
        let currentPlayer = 'black';
        let boardState = Array(BOARD_SIZE).fill(null).map(() => Array(BOARD_SIZE).fill(null));
        let moveCount = 0;
        let lastMove = null;

        // Star points for 13x13 board
        const starPoints = [
            [3, 3], [3, 9], [9, 3], [9, 9], [6, 6]
        ];

        // Initialize board
        function initBoard() {
            board.innerHTML = '';
            for (let row = 0; row < BOARD_SIZE; row++) {
                for (let col = 0; col < BOARD_SIZE; col++) {
                    const intersection = document.createElement('div');
                    intersection.className = 'intersection';
                    intersection.dataset.row = row;
                    intersection.dataset.col = col;
                    
                    // Add star point marker
                    if (starPoints.some(([r, c]) => r === row && c === col)) {
                        intersection.classList.add('star-point');
                    }
                    
                    intersection.addEventListener('click', handleClick);
                    board.appendChild(intersection);
                }
            }
            
            // Add demo stones for mockup
            placeStone(3, 3, 'black');
            placeStone(9, 9, 'white');
            placeStone(3, 9, 'black');
            placeStone(9, 3, 'white');
            moveCount = 4;
        }

        function handleClick(e) {
            const row = parseInt(e.target.dataset.row);
            const col = parseInt(e.target.dataset.col);
            
            if (boardState[row][col] !== null) return;
            
            // Remove last move indicator
            if (lastMove) {
                const lastStone = document.querySelector('.stone.last-move');
                if (lastStone) lastStone.classList.remove('last-move');
            }
            
            placeStone(row, col, currentPlayer);
            lastMove = { row, col };
            
            // Add move to history
            moveCount++;
            const coord = String.fromCharCode(65 + col) + (BOARD_SIZE - row);
            addMoveToHistory(moveCount, coord);
            
            // Switch player
            currentPlayer = currentPlayer === 'black' ? 'white' : 'black';
            updateTurnIndicator();
            
            // Simulate AI move after short delay
            if (currentPlayer === 'white') {
                turnHint.textContent = 'AI is thinking...';
                setTimeout(aiMove, 800);
            }
        }

        function placeStone(row, col, color) {
            const index = row * BOARD_SIZE + col;
            const intersection = board.children[index];
            
            const stone = document.createElement('div');
            stone.className = `stone ${color}`;
            if (lastMove && lastMove.row === row && lastMove.col === col) {
                stone.classList.add('last-move');
            }
            
            intersection.appendChild(stone);
            boardState[row][col] = color;
            
            // Mark as last move
            const prevLastMove = document.querySelector('.stone.last-move');
            if (prevLastMove) prevLastMove.classList.remove('last-move');
            stone.classList.add('last-move');
        }

        function aiMove() {
            // Simple AI: find random empty spot near existing stones
            let attempts = 0;
            let row, col;
            
            do {
                row = Math.floor(Math.random() * BOARD_SIZE);
                col = Math.floor(Math.random() * BOARD_SIZE);
                attempts++;
            } while (boardState[row][col] !== null && attempts < 100);
            
            if (attempts < 100) {
                placeStone(row, col, 'white');
                lastMove = { row, col };
                
                moveCount++;
                const coord = String.fromCharCode(65 + col) + (BOARD_SIZE - row);
                addMoveToHistory(moveCount, coord);
                
                currentPlayer = 'black';
                updateTurnIndicator();
            }
        }

        function updateTurnIndicator() {
            turnStone.className = `current-stone ${currentPlayer}`;
            document.querySelector('.turn-text').firstChild.textContent = 
                `${currentPlayer.charAt(0).toUpperCase() + currentPlayer.slice(1)} to play`;
            turnHint.textContent = currentPlayer === 'black' 
                ? 'Click an intersection to place a stone'
                : 'AI is thinking...';
        }

        function addMoveToHistory(num, coord) {
            const movesList = document.getElementById('movesList');
            const entry = document.createElement('div');
            entry.className = 'move-entry';
            entry.innerHTML = `
                <span class="move-number">${num}.</span>
                <span class="move-coord">${coord}</span>
            `;
            movesList.appendChild(entry);
            movesList.scrollTop = movesList.scrollHeight;
        }

        function showStatus(message) {
            gameStatus.textContent = message;
            gameStatus.style.display = 'block';
            setTimeout(() => {
                gameStatus.style.display = 'none';
            }, 3000);
        }

        // Button handlers
        document.getElementById('newGameBtn').addEventListener('click', () => {
            boardState = Array(BOARD_SIZE).fill(null).map(() => Array(BOARD_SIZE).fill(null));
            currentPlayer = 'black';
            moveCount = 0;
            lastMove = null;
            document.getElementById('movesList').innerHTML = '';
            initBoard();
            updateTurnIndicator();
            showStatus('New game started. Black plays first.');
        });

        document.getElementById('passBtn').addEventListener('click', () => {
            moveCount++;
            addMoveToHistory(moveCount, 'Pass');
            currentPlayer = currentPlayer === 'black' ? 'white' : 'black';
            updateTurnIndicator();
            showStatus(`${currentPlayer === 'black' ? 'White' : 'Black'} passed.`);
            
            if (currentPlayer === 'white') {
                setTimeout(aiMove, 800);
            }
        });

        document.getElementById('undoBtn').addEventListener('click', () => {
            showStatus('Undo: Removed last move');
        });

        document.getElementById('resignBtn').addEventListener('click', () => {
            showStatus('You resigned. White wins!');
        });

        // Initialize
        initBoard();
        showStatus('Game started. Black plays first.');
    </script>
</body>
</html>
