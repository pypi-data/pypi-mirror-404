# ============================================================================
# Dev Health Ops - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your values.
# See docs/configuration.md for detailed documentation.

# ----------------------------------------------------------------------------
# Database
# ----------------------------------------------------------------------------
# ClickHouse (analytics)
DATABASE_URI="clickhouse://ch:ch@localhost:8123/default"

# PostgreSQL (optional - for persistent storage)
# DB_CONN_STRING="postgresql+asyncpg://postgres:postgres@localhost:5555/mergestat"

# Redis (for Celery workers and caching)
REDIS_URL="redis://localhost:6379/0"

# ----------------------------------------------------------------------------
# GitHub
# ----------------------------------------------------------------------------
# Personal access token with repo read permissions
# GITHUB_TOKEN="ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# ----------------------------------------------------------------------------
# GitLab
# ----------------------------------------------------------------------------
# Personal access token with api scope
# GITLAB_TOKEN="glpat-xxxxxxxxxxxxxxxxxxxx"

# ----------------------------------------------------------------------------
# Jira / Atlassian
# ----------------------------------------------------------------------------
# Legacy vars (used by current JiraClient - will be deprecated)
JIRA_BASE_URL="your-org.atlassian.net"
JIRA_EMAIL="you@example.com"
JIRA_API_TOKEN="your-api-token"

# New atlassian-client vars (Phase 1+ will use these)
# Basic auth (Jira Cloud) - email + API token
ATLASSIAN_EMAIL="you@example.com"
ATLASSIAN_API_TOKEN="your-api-token"
ATLASSIAN_JIRA_BASE_URL="https://your-org.atlassian.net"
ATLASSIAN_CLOUD_ID="your-cloud-id"

# Optional: Custom field IDs for story points and sprints
# ATLASSIAN_JIRA_STORY_POINTS_FIELD="customfield_10016"
# ATLASSIAN_JIRA_SPRINT_IDS_FIELD="customfield_10020"

# OAuth (for AGG GraphQL - Phase 5)
# ATLASSIAN_OAUTH_ACCESS_TOKEN="your-oauth-token"
# ATLASSIAN_OAUTH_REFRESH_TOKEN="your-refresh-token"
# ATLASSIAN_CLIENT_ID="your-client-id"
# ATLASSIAN_CLIENT_SECRET="your-client-secret"
# ATLASSIAN_OAUTH_GQL_ENDPOINT="https://api.atlassian.com/graphql"

# GraphQL gateway (tenant) endpoint for AGG
# ATLASSIAN_GQL_BASE_URL="https://your-org.atlassian.net/gateway/api/graphql"

# Optional: GraphQL experimental APIs (comma-separated)
# ATLASSIAN_GQL_EXPERIMENTAL_APIS="jira-software"

# Optional: Cookie auth for AGG (JSON object)
# ATLASSIAN_COOKIES_JSON='{"cloud.session.token":"..."}'

# Jira sync options
# JIRA_PROJECT_KEYS="PROJ1,PROJ2"  # Comma-separated project keys
# JIRA_JQL=""                       # Custom JQL override
# JIRA_FETCH_ALL="false"            # Fetch all issues (ignores time window)
# JIRA_FETCH_COMMENTS="true"        # Fetch issue comments
# JIRA_COMMENTS_LIMIT="0"           # Max comments per issue (0 = no limit)
# JIRA_FETCH_WORKLOGS="false"       # Fetch issue worklogs (time tracking)
# JIRA_FETCH_BOARD_SPRINTS="false"  # Fetch all sprints via board iteration
# JIRA_OPS_PROJECT_TYPES="SERVICE_DESK"  # Jira project types for ops team sync

# ----------------------------------------------------------------------------
# Grafana (optional - for plugin publishing)
# ----------------------------------------------------------------------------
# GRAFANA_ACCESS_POLICY_TOKEN="glc_xxx"

# ----------------------------------------------------------------------------
# Feature Flags
# ----------------------------------------------------------------------------
# ATLASSIAN_CLIENT_ENABLED="false"  # Enable new atlassian-client (Phase 1+)
# ATLASSIAN_GQL_ENABLED="false"     # Enable AGG GraphQL enrichment
# JIRA_USE_PROVIDER="false"         # Use JiraProvider in work_items pipeline
