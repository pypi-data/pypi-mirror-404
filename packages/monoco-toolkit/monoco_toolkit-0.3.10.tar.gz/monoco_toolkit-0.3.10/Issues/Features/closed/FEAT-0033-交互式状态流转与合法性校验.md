---
id: FEAT-0033
type: feature
status: closed
stage: done
title: 交互式状态流转与合法性校验
created_at: '2026-01-12T17:12:47.863589'
opened_at: '2026-01-12T17:12:47.863589'
updated_at: '2026-01-13T08:23:53.386987'
closed_at: '2026-01-13T08:23:53.387005'
parent: EPIC-0006
solution: implemented
dependencies:
- FEAT-0029
- FEAT-0014
related: []
domains: []
tags:
- '#EPIC-0006'
- '#FEAT-0014'
- '#FEAT-0029'
- '#FEAT-0033'
uid: cb7f66
---

## FEAT-0033: 交互式状态流转与合法性校验

## Objective

将看板从“只读视图”升级为“交互中心”，实现基于拖拽（Drag-and-Drop）和显式审批按钮的状态流转功能。通过引入后端流转校验（Transition Validation），确保状态变更的合规性与数据完整性。

## Acceptance Criteria

1. **拖拽流转**: 用户可在看板列之间通过拖拽卡片直接修改任务阶段（Stage）。
2. **原子化校验**: 所有状态变更必须经过后端逻辑校验（如必填元数据检查、前置依赖检查），不通过时需拦截并提示。
3. **显式审批**: 在特定阶段（如 Review）支持一键点击审批/驳回，并自动流转至下一阶段。
4. **实时同步**: 流转成功后，UI 需即时反馈最新状态，确保多端视图一致。
5. **异常处理**: 流转失败时，UI 应自动回滚至原始状态，并向用户展示具体原因。

## Technical Tasks

- [x] **Frontend**: 实现看板组件的拖拽交互逻辑与视觉反馈。
- [x] **Backend**: 实现通用的流转校验引擎，支持基于元数据的条件判断。
- [x] **API**: 提供标准化的状态变更接口，整合校验与文件持久化。
- [x] **UI/UX**: 增加审批动作组件（Approval Action Group）及其交互动效。
- [x] **Tests**: 编写针对非法状态流转拦截的单元测试。

## Review Comments

- [x] Self-Review
