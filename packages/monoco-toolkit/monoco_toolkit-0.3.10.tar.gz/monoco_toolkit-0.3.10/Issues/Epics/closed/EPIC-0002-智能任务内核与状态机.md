---
id: EPIC-0002
uid: d0374d
type: epic
status: closed
stage: done
title: 智能任务内核与状态机 (Intelligent Task Kernel & State Machine)
created_at: '2026-01-10T21:17:57.213576'
opened_at: '2026-01-10T21:17:57.213576'
updated_at: '2026-01-19T14:28:54'
closed_at: '2026-01-19T14:28:54'
solution: implemented
dependencies: []
related:
- EPIC-0001
domains: []
tags:
- '#EPIC-0000'
- '#EPIC-0001'
- '#EPIC-0002'
- backend
- core
- issue-system
files: []
progress: 12/12
files_count: 0
parent: EPIC-0000
---

## EPIC-0002: 智能任务内核与状态机 (Intelligent Task Kernel & State Machine)

## 目标 (Objective)

重构 Monoco 的任务管理**内核 (Core)**，使其成为一个严谨的代理原生系统。
本 Epic 关注 **后端逻辑、API 和 CLI/TUI 实现**，它作为“发动机”，为上层 UI（如 EPIC-0002 中的 Web 看板）提供数据和逻辑支持。

我们的目标是从单纯的“文件管理工具”迈向代理 (Agent) 与人类可协作使用的“项目管理平台”。

## 验收标准 (Acceptance Criteria)

1. [x] **新本体论对齐 (New Ontology Alignment)**: 系统必须强制执行 战略 (Epic) -> 价值 (Feature) -> 执行 (Chore/Fix) 的层级结构。
2. [x] **API 层 (API Layer)**: 构建健壮的 Python API (`monoco.features.issue.core`)，能够支持外部前端（Web/TUI）。
3. [x] **状态管理 (State Management)**: 实现处理状态流转 (Todo -> Doing -> Review -> Done) 的正式状态机，并具备严格的生命周期校验。
4. [x] **UI 实现 (UI Implementation)**: 实现一个功能性的 TUI (终端用户界面)，用于在终端中可视化看板。

## 技术任务 (Technical Tasks)

- [x] **架构 (Architecture)**: 定义用于 Issue 流转的严格状态机和事件钩子。
- [x] **API 重构 (API Refactoring)**: 暴露 CRUD 和看板视图 API 供 UI 消费。
- [x] **TUI 开发 (TUI Development)**: 实现基于 `textual` 或 `rich` 的看板视图。
- [x] **CLI 更新 (CLI Updates)**: 使 CLI 命令 (`start`, `submit`) 与新状态机对齐。
- [x] **数据迁移 (Migration)**: 确保现有 Issue 兼容新 Schema。

## Review Comments

- 核心状态机逻辑已通过 `monoco.features.issue` 实现。
- 提供了完整的 CRUD 及列表/看板视图 API。
- 生命周期校验已集成到 `monoco issue` 各子命令中。
- TUI 功能通过 `monoco run kanban` (CLI模式) 达成。
