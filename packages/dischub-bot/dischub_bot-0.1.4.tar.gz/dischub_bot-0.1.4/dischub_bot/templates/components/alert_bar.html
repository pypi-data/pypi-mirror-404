{% load static %}
{% if alerts %}
<div class="alert-bar" id="alertBar">

    <!-- Background Image -->
    <div class="alert-bg"></div>

    <!-- Dark overlay for contrast -->
    <div class="alert-overlay"></div>

    <!-- Sliding content -->
    <div class="alert-track">
        {% for alert in alerts %}
            <span class="alert-item">
                {% if alert.alert_type == "Info" %}
                <i class="bi bi-info-circle-fill me-2 alert-icon text-primary"></i>
                {% elif alert.alert_type == "Success" %}
                    <i class="bi bi-check-circle-fill me-2 alert-icon text-success"></i>
                {% elif alert.alert_type == "Warning" %}
                    <i class="bi bi-exclamation-triangle-fill me-2 alert-icon text-warning"></i>
                {% elif alert.alert_type == "Danger" %}
                    <i class="bi bi-x-circle-fill me-2 alert-icon text-danger"></i>
                {% else %}
                    <i class="bi bi-bell-fill me-2 alert-icon"></i>
                {% endif %}
                <span class="text-white"><h4>{{ alert.message }}</h4></span>
            </span>
        {% endfor %}
    </div>
</div>
{% endif %}
<style>
/* ==============================
GLOBAL VARIABLES
================================ */
:root {
    --alert-bar-height: 44px;
}

/* ==============================
ALERT BAR
================================ */
.alert-bar {
    position: sticky;
    top: var(--navbar-height);
    z-index: 1060;
    height: var(--alert-bar-height);
    overflow: hidden;
    display: flex;
    align-items: center;
}

/* ==============================
BACKGROUND IMAGE
================================ */
.alert-bg {
    position: absolute;
    inset: 0;
    background: url('{% static "abstract.jpg" %}') center / cover no-repeat;
    filter: blur(18px);
    transform: scale(1.15);
    z-index: 1;
}

/* Dark overlay for readability */
.alert-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.55);
    z-index: 2;
}

/* ==============================
SLIDING CONTENT
================================ */
.alert-track {
    position: relative;
    z-index: 3;
    display: inline-flex;
    align-items: center;
    gap: 4rem;
    white-space: nowrap;
    animation: slide-alerts 25s linear infinite;
    padding-left: 100%;
}

/* Pause on hover */
.alert-bar:hover .alert-track {
    animation-play-state: paused;
}

/* Text & icons */
.alert-item {
    display: inline-flex;
    align-items: center;
    font-weight: 500;
    font-size: 0.9rem;
}

.alert-icon {
    font-size: 1rem;
}

/* ==============================
ANIMATION
================================ */
@keyframes slide-alerts {
    from {
        transform: translateX(0);
    }
    to {
        transform: translateX(-100%);
    }
}

/* ==============================
RESPONSIVE
================================ */
@media (max-width: 768px) {
    :root {
        --alert-bar-height: 34px;
    }

    .alert-item {
        font-size: 0.8rem;
    }
}
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const navbar = document.querySelector(".navbar");
    const root = document.documentElement;

    function setNavbarHeight() {
        if (!navbar) return;
        root.style.setProperty(
            "--navbar-height",
            `${navbar.offsetHeight}px`
        );
    }

    setNavbarHeight();
    window.addEventListener("resize", setNavbarHeight);
});
</script>
