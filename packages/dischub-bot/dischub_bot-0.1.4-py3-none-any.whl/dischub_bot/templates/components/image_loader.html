<!-- image-loader.html -->
<style>
    /* Grey gradient placeholder animation */
    .img-loading {
        position: relative;
        background: linear-gradient(90deg, #e0e0e0 25%, #f0f0f0 50%, #e0e0e0 75%);
        background-size: 200% 100%;
        animation: loading-gradient 1.5s infinite;
    }

    @keyframes loading-gradient {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
    }

    .img-loading img {
        opacity: 0; /* hide image until loaded */
        display: block;
    }

    .img-loaded img {
        opacity: 1;
        transition: opacity 0.5s ease-in;
    }
</style>

<script>
document.addEventListener("DOMContentLoaded", function() {
    // Select all images
    const images = document.querySelectorAll('img');

    images.forEach(img => {
        // Wrap the image in a container for loading effect
        const wrapper = document.createElement('div');
        wrapper.classList.add('img-loading');
        img.parentNode.insertBefore(wrapper, img);
        wrapper.appendChild(img);

        // When image loads
        img.addEventListener('load', function() {
            wrapper.classList.remove('img-loading');
            wrapper.classList.add('img-loaded');
        });

        // In case image is cached and already loaded
        if (img.complete) {
            img.dispatchEvent(new Event('load'));
        }
    });
});
</script>
