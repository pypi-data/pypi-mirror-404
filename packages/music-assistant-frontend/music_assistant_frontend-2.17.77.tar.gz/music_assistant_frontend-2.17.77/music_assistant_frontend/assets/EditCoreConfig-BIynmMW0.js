import{u as x}from"./vue-router-DmMABOGf.js";import{d as i,_ as M}from"./index-tCThBqvp.js";import{E as $}from"./EditConfig-BvyWBOGI.js";import{n as B}from"./index.browser-OxPLOBIU.js";import{d as N,a as D,l as O,L as j,i as p}from"./vuetify-GaNxHxlC.js";import{d as z,w as S,b as f,e as c,I as v,D as T,H as r,r as _,u as A,E as d,f as n,$ as H,a1 as l,c as L}from"./lucide-xmSP9hQT.js";import{u as P}from"./vue-i18n-CJw2bq39.js";import"./qrcode-Be0W47IT.js";import"./marked-C0Rlrcoy.js";import"./color-BTziYnFN.js";import"./vueuse-CVzU65UW.js";/* empty css            */import"./swiper-3t6jdvul.js";import"./index-DQNN_TJ6.js";import"./utils-CDN07tui.js";import"./reka-ui-jpwHxpje.js";import"./index-B_jtOnfb.js";const R={class:"edit-core-config"},U={key:0},q={class:"header-content"},F={class:"header-icon"},G={class:"header-info"},J={class:"header-title"},K={class:"header-description"},Q=z({__name:"EditCoreConfig",props:{domain:{}},setup(g){const h=x(),{t:m}=P(),t=_(),y=B(11),s=_(!1),C=g,V=L(()=>t.value?Object.values(t.value.values):[]);S(()=>C.domain,async e=>{e&&(t.value=await i.getCoreConfig(e))},{immediate:!0});const b=e=>{const o=m(`settings.core_module.${e.domain}.name`);return o!==`settings.core_module.${e.domain}.name`?o:i.providerManifests[e.domain].name},k=e=>{const o=m(`settings.core_module.${e.domain}.description`);return o!==`settings.core_module.${e.domain}.description`?o:i.providerManifests[e.domain].description},E=e=>({streams:"mdi-radio-tower",players:"mdi-speaker-multiple",metadata:"mdi-tag-multiple",music:"mdi-music",webserver:"mdi-web",cache:"mdi-cached"})[e]||"mdi-cog",I=async function(e){s.value=!0,i.saveCoreConfig(t.value.domain,e).then(()=>{h.push({name:"systemsettings"})}).catch(o=>{p.error(o.message||o)}).finally(()=>{s.value=!1})},w=async function(e,o){s.value=!0;for(const a of Object.values(t.value.values))a.value!==void 0&&o[a.key]==null&&(o[a.key]=a.value);o.session_id=y,i.getCoreConfigEntries(t.value.domain,e,o).then(a=>{t.value.values={};for(const u of a)t.value.values[u.key]=u;s.value=!1}).catch(a=>{p.error(a.message||a),s.value=!1})};return(e,o)=>(c(),f("section",R,[t.value&&A(i).providerManifests[t.value.domain]?(c(),f("div",U,[r(D,{class:"header-card mb-4",elevation:"0"},{default:d(()=>[n("div",q,[n("div",F,[r(N,{size:"32",color:"primary"},{default:d(()=>[H(l(E(t.value.domain)),1)]),_:1})]),n("div",G,[n("h2",J,l(b(t.value)),1),n("p",K,l(k(t.value)),1)])])]),_:1})])):v("",!0),t.value?(c(),T($,{key:1,"config-entries":V.value,disabled:!1,onSubmit:I,onAction:w},null,8,["config-entries"])):v("",!0),r(j,{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=a=>s.value=a),scrim:"true",persistent:"",class:"loading-overlay"},{default:d(()=>[r(O,{indeterminate:"",size:"64",color:"primary"})]),_:1},8,["modelValue"])]))}}),pe=M(Q,[["__scopeId","data-v-a685bd82"]]);export{pe as default};
