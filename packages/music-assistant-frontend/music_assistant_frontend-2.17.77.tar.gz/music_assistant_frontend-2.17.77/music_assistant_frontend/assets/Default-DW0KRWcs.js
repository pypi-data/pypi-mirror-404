import{_ as ee,a as Gt,s as t,b as It,t as Wt,h as Yt,c as Xt,e as $e,d as $,M as O,P as yt,$ as J,g as Ce,R as se,f as Pe,i as ve,w as xe,j as le,k as Me,E as Jt,v as Oe,l as qe,m as Ze,n as St,o as Lt,r as ue,p as vt,Q as Zt,q as ea,u as ta,x as aa,y as Ye,z as la}from"./index-tCThBqvp.js";import{R as ia,b as Vt,u as sa}from"./vue-router-DmMABOGf.js";import{c as W}from"./utils-CDN07tui.js";import{d as V,D as _,e as s,u as e,A as N,E as o,h as U,J as Re,K as nt,H as n,f as v,an as ra,b as p,ad as X,n as de,$ as K,a1 as x,F as Y,P as we,r as M,c as T,I as g,ao as oa,L as na,M as ce,ap as ua,aq as da,ar as ca,as as ma,at as pa,au as ya,av as va,aw as fa,ax as _a,ay as ha,o as Ie,a0 as et,al as ba,s as Ue,a as Tt,w as Z,az as ft,aA as ga,aB as Pa,aC as wa,aD as Mt,j as tt,m as ka,O as Ae,aE as xa}from"./lucide-xmSP9hQT.js";import{u as He,D as $a,a as Ca,b as Ia,c as Sa,d as La,e as Va,f as Ta,g as Ma,T as Qa,h as Aa,i as Ea,j as Fa,k as Ba,P as Da,l as Oa}from"./reka-ui-jpwHxpje.js";import{v as Se,w as qa,x as Ra,y as za,z as Na}from"./vueuse-CVzU65UW.js";import{c as Ua}from"./index-B_jtOnfb.js";import{_ as _t}from"./index-DQNN_TJ6.js";import{D as Ha}from"./constants-CXMxJR4j.js";import{u as ja}from"./vue-i18n-CJw2bq39.js";import{M as Qt,_ as At,i as Ka,a as Ga}from"./MediaItemThumb-U9Re77C7.js";import{_ as Xe}from"./ProviderIcon.vue_vue_type_style_index_0_lang-B2vlszLW.js";import{T as Wa}from"./Toolbar-BiXTdBsZ.js";import{p as Et,a as ze,e as at,b as Ne,c as Qe,i as Ya,g as Xa,d as re,V as ut,z as Ja,l as Za,A as Ft,B as el,C as lt,q as Fe,D as Te,E as tl,F as Je,G as ht,H as al,I as ll,n as Be,J as il,K as sl,L as rl,M as ol,N as nl,O as ul,P as dl,m as cl,Q as ml,f as pl}from"./vuetify-GaNxHxlC.js";import{I as ke}from"./Icon-wEtNiLB1.js";import{M as be}from"./Button-CA4MzAsM.js";import{_ as yl,a as vl,b as fl}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-tIHjrLI9.js";import{V as _l,P as dt,g as hl,a as bt}from"./PlayerCard-emTKABK9.js";import{M as he,a as it}from"./marquee_text_sync-04fvtBE0.js";import{_ as Bt}from"./NowPlayingBadge.vue_vue_type_style_index_0_lang-B7dDGePA.js";import{L as bl}from"./ListItem-C1_07nLV.js";import{C as Ee}from"./color-BTziYnFN.js";import{u as gl}from"./userPreferences-Crk2VjHn.js";import"./qrcode-Be0W47IT.js";import"./marked-C0Rlrcoy.js";/* empty css            */import"./swiper-3t6jdvul.js";import"./index-kQIztB-E.js";const Pl=ee(Gt,[["__scopeId","data-v-021e9d8d"]]),wl=V({__name:"Sheet",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(a,{emit:i}){const m=He(a,i);return(u,d)=>(s(),_(e($a),N({"data-slot":"sheet"},e(m)),{default:o(h=>[U(u.$slots,"default",Re(nt(h)))]),_:3},16))}}),kl=V({__name:"SheetOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(a){const i=a,l=Se(i,"class");return(r,m)=>(s(),_(e(Ca),N({"data-slot":"sheet-overlay",class:e(W)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",i.class)},e(l)),{default:o(()=>[U(r.$slots,"default")]),_:3},16,["class"]))}}),xl=V({inheritAttrs:!1,__name:"SheetContent",props:{class:{default:void 0},side:{default:"right"},forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(a,{emit:i}){const l=a,r=i,m=Se(l,"class","side"),u=He(m,r);return(d,h)=>(s(),_(e(Ia),null,{default:o(()=>[n(kl),n(e(Sa),N({"data-slot":"sheet-content",class:e(W)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",a.side==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",a.side==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",a.side==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",a.side==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",l.class)},{...d.$attrs,...e(u)}),{default:o(()=>[U(d.$slots,"default"),n(e(La),{class:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none"},{default:o(()=>[n(e(ra),{class:"size-4"}),h[0]||(h[0]=v("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),$l=V({__name:"SheetDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const i=a,l=Se(i,"class");return(r,m)=>(s(),_(e(Va),N({"data-slot":"sheet-description",class:e(W)("text-muted-foreground text-sm",i.class)},e(l)),{default:o(()=>[U(r.$slots,"default")]),_:3},16,["class"]))}}),Cl=V({__name:"SheetHeader",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),p("div",{"data-slot":"sheet-header",class:X(e(W)("flex flex-col gap-1.5 p-4",i.class))},[U(l.$slots,"default")],2))}}),Il=V({__name:"SheetTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const i=a,l=Se(i,"class");return(r,m)=>(s(),_(e(Ta),N({"data-slot":"sheet-title",class:e(W)("text-foreground font-semibold",i.class)},e(l)),{default:o(()=>[U(r.$slots,"default")]),_:3},16,["class"]))}}),gt="sidebar_state",Sl=3600*24*7,Ll="16rem",Vl="18rem",Tl="3rem",Ml="b",[ct,Ql]=Ma("Sidebar"),Al={class:"flex h-full w-full flex-col"},El=["data-state","data-collapsible","data-variant","data-side"],Fl={"data-sidebar":"sidebar",class:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"},Bl=V({inheritAttrs:!1,__name:"Sidebar",props:{side:{default:"left"},variant:{default:"sidebar"},collapsible:{default:"offcanvas"},class:{}},setup(a){const i=a,{isMobile:l,state:r,openMobile:m,setOpenMobile:u}=ct();return(d,h)=>a.collapsible==="none"?(s(),p("div",N({key:0,"data-slot":"sidebar",class:e(W)("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",i.class)},d.$attrs),[U(d.$slots,"default")],16)):e(l)?(s(),_(e(wl),N({key:1,open:e(m)},d.$attrs,{"onUpdate:open":e(u)}),{default:o(()=>[n(e(xl),{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",side:a.side,class:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:de({"--sidebar-width":e(Vl)})},{default:o(()=>[n(Cl,{class:"sr-only"},{default:o(()=>[n(Il,null,{default:o(()=>[...h[0]||(h[0]=[K("Sidebar",-1)])]),_:1}),n($l,null,{default:o(()=>[...h[1]||(h[1]=[K("Displays the mobile sidebar.",-1)])]),_:1})]),_:1}),v("div",Al,[U(d.$slots,"default")])]),_:3},8,["side","style"])]),_:3},16,["open","onUpdate:open"])):(s(),p("div",{key:2,class:"group peer text-sidebar-foreground hidden md:block","data-slot":"sidebar","data-state":e(r),"data-collapsible":e(r)==="collapsed"?a.collapsible:"","data-variant":a.variant,"data-side":a.side},[v("div",{class:X(e(W)("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",a.variant==="floating"||a.variant==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)"))},null,2),v("div",N({class:e(W)("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",a.side==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",a.variant==="floating"||a.variant==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)",i.class)},d.$attrs),[v("div",Fl,[U(d.$slots,"default")])],16)],8,El))}}),Dl=V({__name:"SidebarContent",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),p("div",{"data-slot":"sidebar-content","data-sidebar":"content",class:X(e(W)("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",i.class))},[U(l.$slots,"default")],2))}}),Ol=V({__name:"SidebarFooter",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),p("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",class:X(e(W)("flex flex-col gap-2 p-2 pb-26 ml-auto",i.class))},[U(l.$slots,"default")],2))}}),ql=V({__name:"SidebarGroup",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),p("div",{"data-slot":"sidebar-group","data-sidebar":"group",class:X(e(W)("relative flex w-full min-w-0 flex-col p-2",i.class))},[U(l.$slots,"default")],2))}}),Rl=V({__name:"SidebarGroupContent",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),p("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",class:X(e(W)("w-full text-sm",i.class))},[U(l.$slots,"default")],2))}}),zl=V({__name:"SidebarHeader",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),p("div",{"data-slot":"sidebar-header","data-sidebar":"header",class:X(e(W)("flex flex-col gap-2 p-2",i.class))},[U(l.$slots,"default")],2))}}),Nl=V({__name:"SidebarInset",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),p("main",{"data-slot":"sidebar-inset",class:X(e(W)("bg-background relative flex min-w-0 flex-1 flex-col overflow-x-hidden","md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",i.class))},[U(l.$slots,"default")],2))}}),Dt=V({__name:"SidebarMenu",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),p("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",class:X(e(W)("flex w-full min-w-0 flex-col gap-1",i.class))},[U(l.$slots,"default")],2))}}),st=V({__name:"Tooltip",props:{defaultOpen:{type:Boolean},open:{type:Boolean},delayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},emits:["update:open"],setup(a,{emit:i}){const m=He(a,i);return(u,d)=>(s(),_(e(Qa),N({"data-slot":"tooltip"},e(m)),{default:o(h=>[U(u.$slots,"default",Re(nt(h)))]),_:3},16))}}),rt=V({inheritAttrs:!1,__name:"TooltipContent",props:{forceMount:{type:Boolean},ariaLabel:{},asChild:{type:Boolean},as:{},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},class:{default:void 0}},emits:["escapeKeyDown","pointerDownOutside"],setup(a,{emit:i}){const l=a,r=i,m=Se(l,"class"),u=He(m,r);return(d,h)=>(s(),_(e(Aa),null,{default:o(()=>[n(e(Ea),N({"data-slot":"tooltip-content"},{...e(u),...d.$attrs},{class:e(W)("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit rounded-md px-3 py-1.5 text-xs text-balance",l.class)}),{default:o(()=>[U(d.$slots,"default"),n(e(Fa),{class:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]),_:3},16,["class"])]),_:3}))}}),ot=V({__name:"TooltipTrigger",props:{reference:{},asChild:{type:Boolean},as:{}},setup(a){const i=a;return(l,r)=>(s(),_(e(Ba),N({"data-slot":"tooltip-trigger"},i),{default:o(()=>[U(l.$slots,"default")]),_:3},16))}}),Pt=V({__name:"SidebarMenuButtonChild",props:{variant:{default:"default"},size:{default:"default"},isActive:{type:Boolean},class:{default:void 0},asChild:{type:Boolean},as:{default:"button"}},setup(a){const i=a;return(l,r)=>(s(),_(e(Da),N({"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":a.size,"data-active":a.isActive,class:e(W)(e(Wl)({variant:a.variant,size:a.size}),i.class),as:a.as,"as-child":a.asChild},l.$attrs),{default:o(()=>[U(l.$slots,"default")]),_:3},16,["data-size","data-active","class","as","as-child"]))}}),Ul=V({inheritAttrs:!1,__name:"SidebarMenuButton",props:{variant:{default:"default"},size:{default:"default"},isActive:{type:Boolean},class:{},asChild:{type:Boolean},as:{default:"button"},tooltip:{default:void 0}},setup(a){const i=a,{isMobile:l,state:r}=ct(),m=Se(i,"tooltip");return(u,d)=>a.tooltip?(s(),_(e(st),{key:1},{default:o(()=>[n(e(ot),{"as-child":""},{default:o(()=>[n(Pt,Re(nt({...e(m),...u.$attrs})),{default:o(()=>[U(u.$slots,"default")]),_:3},16)]),_:3}),n(e(rt),{side:"right",align:"center",hidden:e(r)!=="collapsed"||e(l)},{default:o(()=>[typeof a.tooltip=="string"?(s(),p(Y,{key:0},[K(x(a.tooltip),1)],64)):(s(),_(we(a.tooltip),{key:1}))]),_:1},8,["hidden"])]),_:3})):(s(),_(Pt,Re(N({key:0},{...e(m),...u.$attrs})),{default:o(()=>[U(u.$slots,"default")]),_:3},16))}}),Hl=V({__name:"SidebarMenuItem",props:{class:{}},setup(a){const i=a;return(l,r)=>(s(),p("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",class:X(e(W)("group/menu-item relative",i.class))},[U(l.$slots,"default")],2))}}),jl=V({__name:"SidebarProvider",props:{defaultOpen:{type:Boolean,default:!Na?.cookie.includes(`${gt}=false`)},open:{type:Boolean,default:void 0},class:{default:void 0}},emits:["update:open"],setup(a,{emit:i}){const l=a,r=i,m=qa("(max-width: 768px)"),u=M(!1),d=Ra(l,"open",r,{defaultValue:l.defaultOpen??!1,passive:l.open===void 0});function h(L){d.value=L,document.cookie=`${gt}=${d.value}; path=/; max-age=${Sl}`}function C(L){u.value=L}function E(){return m.value?C(!u.value):h(!d.value)}za("keydown",L=>{L.key===Ml&&(L.metaKey||L.ctrlKey)&&(L.preventDefault(),E())});const B=T(()=>d.value?"expanded":"collapsed");return Ql({state:B,open:d,setOpen:h,isMobile:m,openMobile:u,setOpenMobile:C,toggleSidebar:E}),(L,I)=>(s(),_(e(Oa),{"delay-duration":0},{default:o(()=>[v("div",N({"data-slot":"sidebar-wrapper",style:{"--sidebar-width":e(Ll),"--sidebar-width-icon":e(Tl)},class:e(W)("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",l.class)},L.$attrs),[U(L.$slots,"default")],16)]),_:3}))}}),Kl=V({__name:"SidebarTrigger",props:{class:{}},setup(a){const i=a,{toggleSidebar:l,state:r,isMobile:m}=ct(),u=T(()=>r.value==="collapsed"),d=T(()=>Yt.kioskModeEnabled?"Show Home Assistant Menu":"Hide Home Assistant Menu"),h=()=>{Wt()};return(C,E)=>(s(),p("div",{class:X(["trigger-container",u.value?"flex-col -mr-2":"flex-row",i.class])},[e(t).isIngressSession?(s(),_(e(st),{key:0},{default:o(()=>[n(e(ot),{"as-child":""},{default:o(()=>[e(t).isIngressSession?(s(),_(e(_t),{key:0,variant:"ghost",size:"icon",class:X([,u.value&&"order-first"]),onClick:h},{default:o(()=>[...E[0]||(E[0]=[v("img",{src:It,alt:"Home Assistant",class:"ha-logo-icon"},null,-1)])]),_:1},8,["class"])):g("",!0)]),_:1}),n(e(rt),{side:"right",align:"center",hidden:!u.value||e(m)},{default:o(()=>[K(x(d.value),1)]),_:1},8,["hidden"])]),_:1})):g("",!0),n(e(st),null,{default:o(()=>[n(e(ot),{"as-child":""},{default:o(()=>[n(e(_t),{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",class:"flex-shrink-0",onClick:e(l)},{default:o(()=>[n(e(oa)),E[1]||(E[1]=v("span",{class:"sr-only"},"Toggle Sidebar",-1))]),_:1},8,["onClick"])]),_:1}),n(e(rt),{side:"right",align:"center",hidden:!u.value||e(m)},{default:o(()=>[K(x(u.value?"Expand Sidebar":"Collapse Sidebar"),1)]),_:1},8,["hidden"])]),_:1})],2))}}),Gl=ee(Kl,[["__scopeId","data-v-fb0902ef"]]),Wl=Ua("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}}),Yl=V({__name:"NavMain",props:{items:{}},setup(a){const i=na(ia),l=Vt(),r=m=>l.path===m||l.path.startsWith(m+"/");return(m,u)=>(s(),_(e(ql),null,{default:o(()=>[n(e(Rl),{class:"flex flex-col gap-2"},{default:o(()=>[n(e(Dt),null,{default:o(()=>[(s(!0),p(Y,null,ce(a.items,d=>(s(),_(e(Hl),{key:d.title,class:"mr-1.5"},{default:o(()=>[n(e(Ul),N({as:e(i)},{ref_for:!0},{to:d.url},{"is-active":r(d.url),tooltip:d.title,class:"no-underline font-semibold text-sm"}),{default:o(()=>[d.icon?(s(),_(we(d.icon),{key:0,class:"mr-1"})):g("",!0),v("span",null,x(d.title),1)]),_:2},1040,["as","is-active","tooltip"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Xl=ee(Yl,[["__scopeId","data-v-9904e199"]]),Jl={name:"ArtistIcon"},Zl={class:"artist-icon",width:"18",height:"18",viewBox:"0 0 26 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ei(a,i,l,r,m,u){return s(),p("svg",Zl,[...i[0]||(i[0]=[v("path",{d:"M12 13C14.7614 13 17 10.7614 17 8C17 5.23858 14.7614 3 12 3C9.23858 3 7 5.23858 7 8C7 10.7614 9.23858 13 12 13ZM12 13C14.1217 13 16.1566 13.8429 17.6569 15.3431M12 13C9.87827 13 7.84344 13.8429 6.34315 15.3431C4.84285 16.8434 4 18.8783 4 21",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),v("path",{d:"M21 21C21 22.1046 20.1046 23 19 23C17.8954 23 17 22.1046 17 21C17 19.8954 17.8954 19 19 19C20.1046 19 21 19.8954 21 21ZM21 21V13L24.5 15",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])}const ti=ee(Jl,[["render",ei]]),Ot=function(){const a=localStorage.getItem("frontend.settings.menu_items"),i=a?a.split(","):Ha,l=[];for(const r of i)r==="home"&&l.push({label:"home",icon:ua,path:"/home",isLibraryNode:!1}),r==="search"&&l.push({label:"search",icon:da,path:"/search",isLibraryNode:!1}),r==="artists"&&l.push({label:"artists",icon:ti,path:"/artists",isLibraryNode:!0,hidden:t.libraryArtistsCount===0}),r==="albums"&&l.push({label:"albums",icon:ca,path:"/albums",isLibraryNode:!0,hidden:t.libraryAlbumsCount===0}),r==="tracks"&&l.push({label:"tracks",icon:ma,path:"/tracks",isLibraryNode:!0,hidden:t.libraryTracksCount===0}),r==="playlists"&&l.push({label:"playlists",icon:pa,path:"/playlists",isLibraryNode:!0,hidden:t.libraryPlaylistsCount===0}),r==="audiobooks"&&l.push({label:"audiobooks",icon:ya,path:"/audiobooks",isLibraryNode:!0,hidden:t.libraryAudiobooksCount===0}),r==="podcasts"&&l.push({label:"podcasts",icon:va,path:"/podcasts",isLibraryNode:!0,hidden:t.libraryPodcastsCount===0}),r==="radios"&&l.push({label:"radios",icon:fa,path:"/radios",isLibraryNode:!0,hidden:t.libraryRadiosCount===0}),r==="browse"&&l.push({label:"browse",icon:_a,path:"/browse",isLibraryNode:!0}),r==="settings"&&l.push({label:"settings.settings",icon:ha,path:"/settings",isLibraryNode:!0});return l},ai=V({__name:"AppSidebar",setup(a){const i=sa(),{t:l}=ja(),r=Ot(),m=T(()=>r.filter(u=>!u.hidden).map(u=>({title:l(u.label),url:u.path,icon:u.icon})));return(u,d)=>(s(),_(e(Bl),{collapsible:"icon"},{default:o(()=>[n(e(zl),null,{default:o(()=>[n(e(Dt),null,{default:o(()=>[v("div",{class:"sidebar-header",onClick:d[0]||(d[0]=h=>e(i).push("/"))},[...d[1]||(d[1]=[v("img",{src:Xt,alt:"Music Assistant",class:"sidebar-header-logo"},null,-1),v("div",{class:"sidebar-header-title"},"Music Assistant",-1)])])]),_:1})]),_:1}),n(e(Dl),null,{default:o(()=>[n(Xl,{items:m.value},null,8,["items"])]),_:1}),n(e(Ol),null,{default:o(()=>[n(e(Gl),{class:"-ml-1"})]),_:1})]),_:1}))}}),li=ee(ai,[["__scopeId","data-v-803805fd"]]),ii={class:"media-thumb"},si={style:{"margin-left":"-10px","padding-right":"5px"}},ri=V({__name:"AddToPlaylistDialog",setup(a){const i=M(!1),l=M([]),r=M([]),m=M(),u=M([]);Ie(()=>{$e.on("playlistdialog",async B=>{i.value=!0,u.value=B.items,m.value=B.parentItem,await d()}),et(()=>{$e.off("playlistdialog")})});const d=async function(){l.value=[],r.value=[];const B=await $.getLibraryPlaylists();let L=u.value.length?u.value[0]:void 0;if(!L)return;"provider_mappings"in L||(L=await $.getItem(L.media_type,L.item_id,L.provider));const I=L?.media_type===O.RADIO;for(const D of B){if(!D.provider_mappings.filter(te=>te.available).length||!D.is_editable||m.value&&m.value.media_type===O.PLAYLIST&&D.item_id===m.value.item_id)continue;const q=$.providers[D.provider_mappings[0].provider_instance];I?q&&q.domain=="builtin"&&l.value.push(D):q&&(q.domain=="builtin"||q.is_streaming_provider||L?.provider_mappings.filter(te=>te.provider_instance==q.instance_id).length)&&l.value.push(D)}for(const D of Object.values($.providers))D.supported_features.includes(yt.PLAYLIST_CREATE)&&D.supported_features.includes(yt.PLAYLIST_TRACKS_EDIT)&&(I?D.domain=="builtin"&&r.value.push(D.instance_id):(D.domain=="builtin"||D.is_streaming_provider||L?.provider_mappings.filter(q=>q.provider_instance==D.instance_id).length)&&r.value.push(D.instance_id))},h=async function(B){$.addPlaylistTracks(B.item_id,u.value.map(L=>L.uri)),E(),Ya.info(J("background_task_added"))},C=async function(B){const L=prompt(J("new_playlist_name"));if(!L)return;const I=await $.createPlaylist(L,B);h(I)},E=function(){i.value=!1};return(B,L)=>(s(),_(Et,{modelValue:i.value,"onUpdate:modelValue":[L[0]||(L[0]=I=>i.value=I),L[1]||(L[1]=I=>{e(t).dialogActive=I})],fullscreen:"",transition:"dialog-bottom-transition"},{default:o(()=>[n(ze,null,{default:o(()=>[n(Wa,{icon:"mdi-playlist-plus",title:e(J)("add_playlist"),"menu-items":[{label:"close",icon:"mdi-close",action:E}]},null,8,["title","menu-items"]),n(at),L[4]||(L[4]=v("br",null,null,-1)),n(Ne,null,{default:o(()=>[(s(!0),p(Y,null,ce(l.value,I=>(s(),p("div",{key:I.item_id},[n(Qe,{onClick:D=>h(I)},{prepend:o(()=>[v("div",ii,[n(Qt,{item:I,size:50},null,8,["item"])])]),title:o(()=>[v("div",null,x(I.name),1)]),subtitle:o(()=>[v("div",null,x(I.owner),1)]),append:o(()=>[I.provider_mappings?(s(),_(Xe,{key:0,domain:I.provider_mappings[0].provider_domain,size:20},null,8,["domain"])):g("",!0)]),_:2},1032,["onClick"])]))),128)),L[2]||(L[2]=v("div",{style:{height:"30px"}},null,-1)),n(at),L[3]||(L[3]=v("div",{style:{height:"30px"}},null,-1)),(s(!0),p(Y,null,ce(r.value,I=>(s(),p("div",{key:I},[n(Qe,{onClick:D=>C(I)},{prepend:o(()=>[v("div",si,[n(Xe,{domain:e($).providers[I].domain,size:50},null,8,["domain"])])]),title:o(()=>[v("div",null,x(e(J)("new_playlist")),1)]),subtitle:o(()=>[v("div",null,x(e(J)("create_playlist_on",[e($).providers[I].name])),1)]),append:o(()=>[n(Xe,{domain:e($).providers[I].domain,size:20},null,8,["domain"])]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),oi=ee(ri,[["__scopeId","data-v-8911bda1"]]),ni=V({__name:"View",setup(a){return(i,l)=>{const r=ba("router-view");return s(),_(Xa,{id:"cont",class:X(["main-layout",{"main-layout--mobile":e(t).mobileLayout}])},{default:o(()=>[n(e(jl),null,{default:o(()=>[e(t).mobileLayout?g("",!0):(s(),_(li,{key:0})),n(e(Nl),null,{default:o(()=>[v("div",{class:X(["content-section",{"content-section--mobile":e(t).mobileLayout}])},[n(r,null,{default:o(({Component:m})=>[(s(),_(we(m)))]),_:1}),n(oi),n(Pl)],2)]),_:1})]),_:1})]),_:1},8,["class"])}}}),wt=ee(ni,[["__scopeId","data-v-15e3d043"]]),qt=V({__name:"RepeatBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){return(i,l)=>a.isVisible&&a.playerQueue?(s(),_(ke,N({key:0},a.icon,{disabled:!a.playerQueue.active||a.playerQueue.items==0,color:e(Ce)(a.icon?.color,[[a.playerQueue.repeat_mode==e(se).OFF,null],[a.playerQueue.repeat_mode==e(se).ALL,"primary"],[a.playerQueue.repeat_mode==e(se).ONE,"primary"]]),icon:e(Ce)(a.icon?.icon,[[a.playerQueue.repeat_mode==e(se).OFF,"mdi-repeat-off"],[a.playerQueue.repeat_mode==e(se).ALL,"mdi-repeat"],[a.playerQueue.repeat_mode==e(se).ONE,"mdi-repeat-once"],[!0,"mdi-repeat-off"]]),variant:"button",onClick:l[0]||(l[0]=r=>e($).queueCommandRepeat(a.playerQueue.queue_id||"",e(Ce)(null,[[a.playerQueue.repeat_mode==e(se).OFF,e(se).ALL],[a.playerQueue.repeat_mode==e(se).ALL,e(se).ONE],[a.playerQueue.repeat_mode==e(se).ONE,e(se).OFF]])))}),null,16,["disabled","color","icon"])):g("",!0)}});function je(a){return{activeSource:T(()=>{const l=typeof a=="object"&&"value"in a?a.value:a;if(!(!l?.active_source||!l?.source_list))return l.source_list.find(r=>r.id===l.active_source)})}}const Rt=V({__name:"NextBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const i=a,{activeSource:l}=je(Ue(i,"player")),r=T(()=>i.playerQueue?.active?(i.playerQueue.current_index||0)<i.playerQueue.items-1:!1),m=T(()=>!i.player||i.playerQueue?.active||!i.player.current_media?!1:i.player.supported_features.includes(Pe.NEXT_PREVIOUS)),u=T(()=>l.value?l.value.can_next_previous:r.value||m.value);return(d,h)=>a.isVisible&&a.player?(s(),_(ke,N({key:0},a.icon,{disabled:!u.value,icon:"mdi-skip-next-outline",variant:"button",onClick:h[0]||(h[0]=C=>e($).playerCommandNext(a.player.player_id))}),null,16,["disabled"])):g("",!0)}}),zt=V({__name:"PlayBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},withCircle:{type:Boolean,default:!0},icon:{default:void 0},iconStyle:{default:"circle"}},setup(a){const i=a,{activeSource:l}=je(Ue(i,"player")),r=T(()=>i.playerQueue?i.playerQueue.items>0:!1),m=T(()=>!(!i.player||i.playerQueue?.active||!i.player.current_media)),u=T(()=>l.value?l.value.can_play_pause:r.value||m.value),d=T(()=>i.player?.playback_state==ve.PLAYING?"mdi-pause":"mdi-play");return(h,C)=>a.isVisible&&a.player?(s(),_(ke,N({key:0},a.icon,{disabled:!u.value,icon:a.iconStyle?`${d.value}-${a.iconStyle}`:d.value,variant:"button",onClick:C[0]||(C[0]=E=>e($).playerCommandPlayPause(a.player.player_id))}),null,16,["disabled","icon"])):g("",!0)}}),Nt=V({__name:"PreviousBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const i=a,{activeSource:l}=je(Ue(i,"player")),r=T(()=>!i.playerQueue?.active||!i.playerQueue?.items||!i.playerQueue.current_index?!1:i.playerQueue.current_index>0),m=T(()=>!i.player||i.playerQueue?.active||!i.player.current_media?!1:i.player.supported_features.includes(Pe.NEXT_PREVIOUS)),u=T(()=>l.value?l.value.can_next_previous:r.value||m.value);return(d,h)=>a.isVisible&&a.player?(s(),_(ke,N({key:0},a.icon,{disabled:!u.value,icon:"mdi-skip-previous-outline",variant:"button",onClick:h[0]||(h[0]=C=>e($).playerCommandPrevious(a.player.player_id))}),null,16,["disabled"])):g("",!0)}}),Ut=V({__name:"ShuffleBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){return(i,l)=>a.isVisible&&a.playerQueue?(s(),_(ke,N({key:0},a.icon,{disabled:!a.playerQueue.active||a.playerQueue.items==0,color:e(Ce)(a.icon?.color,[[a.playerQueue.shuffle_enabled,"primary",""]]),icon:e(Ce)(a.icon?.icon,[[a.playerQueue.shuffle_enabled,"mdi-shuffle"],[a.playerQueue.shuffle_enabled==!1,"mdi-shuffle-disabled"],[!0,"mdi-shuffle"]]),variant:"button",onClick:l[0]||(l[0]=r=>e($).queueCommandShuffle(a.playerQueue.queue_id,!a.playerQueue.shuffle_enabled))}),null,16,["disabled","color","icon"])):g("",!0)}}),ui={key:0,class:"player-controls"},di={key:0,class:"player-controls-elements"},ci={key:1,class:"player-controls-elements"},mi={key:2},pi={key:3,class:"player-controls-elements"},yi={key:4,class:"player-controls-elements"},kt=V({__name:"PlayerControls",props:{visibleComponents:{default:()=>({repeat:{isVisible:!0},shuffle:{isVisible:!0},play:{isVisible:!0},previous:{isVisible:!0},next:{isVisible:!0}})}},setup(a){return(i,l)=>a.visibleComponents?(s(),p("div",ui,[a.visibleComponents&&a.visibleComponents.shuffle?.isVisible?(s(),p("div",di,[n(Ut,{"player-queue":e(t).activePlayerQueue,class:"media-controls-item",icon:a.visibleComponents.shuffle.icon},null,8,["player-queue","icon"])])):g("",!0),a.visibleComponents&&a.visibleComponents.previous?.isVisible?(s(),p("div",ci,[n(Nt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item",icon:a.visibleComponents.previous.icon},null,8,["player","player-queue","icon"])])):g("",!0),a.visibleComponents&&a.visibleComponents.play?.isVisible?(s(),p("div",mi,[n(zt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","icon-style":"circle",icon:a.visibleComponents.play.icon},null,8,["player","player-queue","icon"])])):g("",!0),a.visibleComponents&&a.visibleComponents.next?.isVisible?(s(),p("div",pi,[n(Rt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,icon:a.visibleComponents.next.icon,"static-height":"24px","static-width":"24px"},null,8,["player","player-queue","icon"])])):g("",!0),a.visibleComponents&&a.visibleComponents.repeat?.isVisible?(s(),p("div",yi,[n(qt,{"player-queue":e(t).activePlayerQueue,icon:a.visibleComponents.repeat.icon,"static-height":"24px","static-width":"24px"},null,8,["player-queue","icon"])])):g("",!0)])):g("",!0)}}),Ht=V({__name:"QueueBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const i=function(){t.showFullscreenPlayer&&t.showQueueItems?t.showQueueItems=!1:t.showFullscreenPlayer&&!t.showQueueItems?t.showQueueItems=!0:(t.showQueueItems=!0,t.showFullscreenPlayer=!0)};return(l,r)=>a.isVisible?(s(),_(ke,N({key:0},a.icon,{disabled:!e(t).activePlayerId||e(t).showFullscreenPlayer&&!e(t).curQueueItem&&!e(t).showQueueItems,icon:"mdi-playlist-play",color:e(Ce)(a.icon?.color,[[e(t).showFullscreenPlayer&&e(t).showQueueItems,"primary",""]]),variant:"button",onClick:i}),null,16,["disabled","color"])):g("",!0)}}),vi={class:"tip-content"},fi={class:"tip-label"},_i={class:"tip-player-name"},hi={class:"tip-hint"},jt=V({__name:"SpeakerBtn",props:{color:{}},setup(a){const i=M(!1);let l=!1;const r=T(()=>t.activePlayer?.playback_state===ve.PLAYING||t.activePlayer?.playback_state===ve.PAUSED),m=T(()=>!(l||t.playerTipShown||!t.activePlayer||t.activePlayerId===xe.player_id));function u(){i.value=!1,l=!0,t.playerTipShown=!0}function d(){u(),t.showPlayersMenu=!0}function h(){i.value&&u()}return Ie(()=>{if(t.playerTipShown){l=!0;return}setTimeout(()=>{m.value&&(i.value=!0,document.addEventListener("click",h,{capture:!0}))},1e3)}),Tt(()=>{document.removeEventListener("click",h,{capture:!0})}),Z(()=>t.playerTipShown,C=>{C&&i.value&&(i.value=!1,l=!0)}),Z(i,(C,E)=>{E&&!C&&(l=!0,t.playerTipShown=!0)}),(C,E)=>(s(),_(e(yl),{open:i.value,"onUpdate:open":E[0]||(E[0]=B=>i.value=B)},{default:o(()=>[n(e(vl),{"as-child":""},{default:o(()=>[n(be,{variant:"icon",ripple:!1,icon:"",onClick:d},{default:o(()=>[n(re,{color:a.color?a.color:"",size:24,icon:e(t).activePlayer?.group_members.length?"mdi-speaker-multiple":"mdi-speaker"},null,8,["color","icon"])]),_:1})]),_:1}),n(e(fl),{side:"top","side-offset":8,class:"player-tip",onPointerDownOutside:u,onEscapeKeyDown:u,onFocusOutside:u},{default:o(()=>[v("div",vi,[v("div",fi,x(r.value?C.$t("player_tip.currently_playing"):C.$t("player_tip.selected_player")),1),v("div",_i,x(e(t).activePlayer?.name),1),v("div",hi,x(C.$t("player_tip.click_to_change")),1)]),E[1]||(E[1]=v("div",{class:"tip-arrow"},null,-1))]),_:1})]),_:1},8,["open"]))}}),bi={key:0},gi={key:0},Pi={class:"text-caption ml-1"},wi={key:1},ki=V({__name:"VolumeBtn",props:{volumeSize:{default:"150px"},responsiveVolumeSize:{type:Boolean,default:!0},isVisible:{type:Boolean,default:!0},color:{default:""}},setup(a){const i=a,l=M(!1),r=M(t.activePlayer?Math.round(t.activePlayer.group_members.length>0?t.activePlayer.group_volume:t.activePlayer.volume_level||0):0),m=T(()=>{if(!t.activePlayer)return ft;if(t.activePlayer.volume_muted)return ga;const u=r.value;return u===0?Pa:u<50?wa:ft});return(u,d)=>i.isVisible&&e(t).activePlayer?(s(),p("div",bi,[n(ut,{modelValue:l.value,"onUpdate:modelValue":d[2]||(d[2]=h=>l.value=h),class:"volume-control-dialog","close-on-content-click":!1,location:"top",scrim:u.$vuetify.theme.current.dark?"rgba(0,0,0,.75)":"rgba(0,0,0,.85)"},{activator:o(({props:h})=>[e(le)("bp6")||!a.responsiveVolumeSize?(s(),p("div",gi,[n(dt,{style:"margin-right: 0px; margin-left: 0px;",width:a.volumeSize,"is-powered":e(t).activePlayer?.powered!=!1,disabled:!e(t).activePlayer?.available||e(t).activePlayer?.powered==!1||!e(t).activePlayer?.supported_features.includes(e(Pe).VOLUME_SET),"model-value":e(t).activePlayer.group_members.length>0?Math.round(e(t).activePlayer?.group_volume||0):Math.round(e(t).activePlayer?.volume_level||0),"allow-wheel":!0,"onUpdate:modelValue":d[0]||(d[0]=C=>e(t).activePlayer.group_members.length>0?e($).playerCommandGroupVolume(e(t).activePlayer?.player_id||"",C):e($).playerCommandVolumeSet(e(t).activePlayer?.player_id||"",C)),"onUpdate:localValue":d[1]||(d[1]=C=>r.value=C)},{prepend:o(()=>[n(be,N({variant:"icon",size:"48",ripple:!1},{...h}),{default:o(()=>[(s(),_(we(m.value),{color:i.color?a.color:"",size:18},null,8,["color"])),v("div",Pi,x(Math.round(r.value)),1)]),_:1},16)]),_:2},1032,["width","is-powered","disabled","model-value"])])):(s(),p("div",wi,[n(be,N({...h},{size:"48",variant:"icon"}),{default:o(()=>[(s(),_(we(m.value),{color:i.color?a.color:"",size:24},null,8,["color"])),v("div",{class:"text-caption",style:de({color:i.color?a.color:""})},x(Math.round(r.value)),5)]),_:1},16)]))]),default:o(()=>[n(ze,{"min-width":300,style:{overflow:"hidden","padding-top":"20px","padding-bottom":"20px","padding-right":"20px"}},{default:o(()=>[e(t).activePlayer?(s(),_(_l,{key:0,player:e(t).activePlayer,"show-sub-players":!0,"show-sync-controls":!1,"show-heading-row":!0,"show-volume-control":!0,"allow-wheel":!0,style:{"margin-left":"18px"}},null,8,["player"])):g("",!0)]),_:1})]),_:1},8,["modelValue","scrim"])])):g("",!0)}}),xi=ee(ki,[["__scopeId","data-v-a4673e3b"]]),xt=V({__name:"PlayerExtendedControls",props:{queue:{default:()=>({isVisible:!0,showQueueDialog:!1})},player:{default:()=>({isVisible:!0})},volume:{default:()=>({isVisible:!0,volumeSize:"150px",responsiveVolumeSize:!1})}},setup(a){return(i,l)=>(s(),p(Y,null,[a.player&&a.player.isVisible?(s(),_(jt,{key:0,color:a.player.color},null,8,["color"])):g("",!0),a.queue&&a.queue.isVisible?(s(),_(Ht,{key:1,color:a.player.color,style:{"padding-left":"15px","padding-right":"20px"}},null,8,["color"])):g("",!0),a.volume&&a.volume.isVisible?(s(),_(xi,{key:2,color:a.volume.color,"volume-size":a.volume.volumeSize,"responsive-volume-size":a.volume.responsiveVolumeSize},null,8,["color","volume-size","responsive-volume-size"])):g("",!0)],64))}});function De(a,i,l){if(a===void 0||i===void 0||l!==void 0&&l!==ve.PLAYING)return a;const r=i*1e3,m=Date.now(),d=Math.max(0,m-r)/1e3;return a+d}const $i={style:{width:"auto",height:"24px"}},Ci={key:0,style:{width:"100%"}},Ii=["onClick"],Si={key:0,class:"time-text-row"},Li={class:"text-caption time-text-right"},Vi=V({__name:"PlayerTimeline",props:{showLabels:{type:Boolean,default:!1},color:{default:void 0}},setup(a){const{activeSource:i}=je(Ue(t,"activePlayer")),l=M(!1),r=M(!0),m=M(!1),u=M(0),d=M(0),h=M(0);let C=null;const E=(z=500)=>{C||(C=setInterval(()=>h.value=Date.now(),z))},B=()=>{C&&(clearInterval(C),C=null)};Tt(()=>{B()});const L=T(()=>{if(i.value){if(t.activePlayer?.powered===!1)return!1;const f=!!t.activePlayer?.current_media?.duration;if(t.activePlayer?.current_media?.media_type==O.RADIO||t.activePlayer?.current_media?.duration==null)return!1;if(i.value.can_seek&&f)return!0}return!1}),I=T(()=>{if(u.value!=null){if(l.value&&t.activePlayer?.current_media?.duration){const z=t.activePlayer.current_media.duration-u.value;return`-${Me(z)}`}return Me(u.value)}return"0:00"}),D=T(()=>{const z=t.activePlayer?.current_media?.duration;return!z||t.activePlayer?.current_media?.media_type==O.RADIO?"":Me(z)}),q=T(()=>{h.value;const z=t.activePlayer?.playback_state==="playing",f=!!(t.activePlayerQueue&&t.activePlayerQueue.active),k=t.activePlayer?.current_media?.elapsed_time!=null;if(z&&(f||k)?E():B(),m.value)return d.value=u.value,u.value;const w=t.activePlayerQueue;return w?.elapsed_time!=null&&w?.elapsed_time_last_updated!=null?De(w.elapsed_time,w.elapsed_time_last_updated,w.state)??0:t.activePlayer?.current_media?.elapsed_time!=null&&t.activePlayer?.current_media?.elapsed_time_last_updated!=null?De(t.activePlayer.current_media.elapsed_time,t.activePlayer.current_media.elapsed_time_last_updated,t.activePlayer?.playback_state)??0:t.activePlayer?.elapsed_time!=null&&t.activePlayer?.elapsed_time_last_updated!=null?De(t.activePlayer.elapsed_time,t.activePlayer.elapsed_time_last_updated,t.activePlayer?.playback_state)??0:0}),te=T(()=>{const z={};return t.curQueueItem?.media_item?.metadata?.chapters&&t.curQueueItem.media_item.metadata.chapters.forEach(f=>{z[f.start]=f.name}),z});Z(q,z=>{m.value||(u.value=z)});const ae=function(){m.value=!0},fe=()=>{m.value=!1,!m.value&&t.activePlayer&&$.playerCommandSeek(t.activePlayer.player_id,Math.round(d.value))},oe=function(z){if(t.curQueueItem?.media_item?.metadata?.chapters){for(const f of t.curQueueItem.media_item.metadata.chapters)if(f.start==z){$.playMedia(t.curQueueItem.media_item.uri,void 0,void 0,f.position.toString());return}}};return(z,f)=>(s(),p("div",$i,[e(t).activePlayer?(s(),p("div",Ci,[n(Ja,{modelValue:u.value,"onUpdate:modelValue":f[0]||(f[0]=k=>u.value=k),disabled:!L.value,style:{width:"100%"},min:0,max:e(t).activePlayer?.current_media?.duration,"hide-details":"","track-size":4,"thumb-size":r.value?0:10,"show-ticks":te.value?"always":!1,ticks:te.value,"tick-size":"4",color:a.color,onTouchstart:f[1]||(f[1]=k=>r.value=!1),onTouchend:f[2]||(f[2]=k=>r.value=!0),onMouseenter:f[3]||(f[3]=k=>r.value=!1),onMouseleave:f[4]||(f[4]=k=>r.value=!0),onStart:ae,onEnd:fe},{"tick-label":o(({tick:k})=>[a.showLabels&&!r.value&&Object.values(te.value).length<6?(s(),p("a",{key:0,class:"text-caption",onClick:w=>oe(k.value)},x(k.label),9,Ii)):g("",!0)]),_:1},8,["modelValue","disabled","max","thumb-size","show-ticks","ticks","color"]),a.showLabels?(s(),p("div",Si,[v("div",{class:"text-caption time-text-left",onClick:f[5]||(f[5]=k=>l.value?l.value=!1:l.value=!0)},x(I.value),1),v("div",Li,x(D.value),1)])):g("",!0)])):g("",!0)]))}}),Kt=ee(Vi,[["__scopeId","data-v-9fb885e9"]]),Ti={class:"lyrics-container"},Mi={key:0,class:"lyrics-loading"},Qi={key:1,class:"lyrics-empty"},Ai={key:2,class:"lyrics-intro"},Ei={class:"song-title"},Fi={class:"artist-name"},Bi={class:"lyrics-coming-soon"},Di=V({__name:"LyricsViewer",props:{mediaItem:{default:void 0},position:{default:void 0},duration:{default:void 0},streamDetails:{default:void 0},textColor:{default:"#FFFFFF"},debugMode:{type:Boolean,default:!1},lyrics:{default:void 0},lrcLyrics:{default:void 0}},setup(a){Mt(P=>({v275a5ede:P.textColor}));const i=a,l=(P,S=!0)=>{if(S&&!i.debugMode)return;(S?console.debug:console.log)(`[lyricSynch] ${P}`)},r=M([]),m=M(!1),u=M(-1),d=M(null),h=M(!1),C=M(0),E=M(0),B=T(()=>{if(!q.value||!r.value.length)return!1;const P=r.value[0].time,S=i.position||0;return u.value===-1&&S<P}),L=T(()=>{if(!i.mediaItem)return"";if("media_type"in i.mediaItem&&i.mediaItem.media_type==="track"){const P=i.mediaItem;if(P.artists?.length)return P.artists.map(S=>S.name).join(", ")}return"media_type"in i.mediaItem&&i.mediaItem.media_type==="artist"?i.mediaItem.name:""}),I=()=>i.lyrics??i.mediaItem?.metadata?.lyrics??null,D=()=>i.lrcLyrics??i.mediaItem?.metadata?.lrc_lyrics??null,q=T(()=>{if(r.value.some(A=>A.time>0))return!0;const P=D(),S=I();return!!(P&&P.includes("[")||S&&/\[\d+:\d+[.:]?\d*\]/.test(S))}),te=P=>{const S=P.match(/\[(\d+):(\d+)([.:]\d+)?\](.*)/);if(S){const A=parseInt(S[1]);let R=parseInt(S[2]),ie=0;if(S[3]){const me=S[3].replace(/[.:]/,".");ie=Math.round(parseFloat(me)*1e3)}return{time:(A*60*1e3+R*1e3+ie)/1e3,text:S[4].trim()||" "}}return{time:0,text:P.trim()||" "}},ae=()=>{m.value=!0;try{const P=D()||"",S=I()||"";let A="",R=!1;if(P?(A=P,R=!0):S&&/\[\d+:\d+[.:]?\d*\]/.test(S)?(A=S,R=!0):S&&(A=S,R=!1),R){const ie=A.split(`
`).filter(H=>H.trim());r.value=ie.map(H=>te(H)).filter(H=>H.text.trim()).sort((H,G)=>H.time-G.time),l(`Loaded ${r.value.length} synchronized lyrics lines`,!1)}else if(A){const ie=A.split(`
`).filter(H=>H.trim());r.value=ie.map(H=>({time:0,text:H.trim()})).filter(H=>H.text),l(`Loaded ${r.value.length} plain text lyrics lines`,!1)}else r.value=[]}catch(P){l(`Error processing lyrics: ${P}`,!1),r.value=[]}finally{m.value=!1}},fe=P=>{const S=P;l(`Calculating look-ahead at ${P.toFixed(3)}s`);let A=-1,R=-1;for(let ye=0;ye<r.value.length;ye++)if(r.value[ye].time<=S)A=ye;else{R=ye;break}if(l(`Current lyric index: ${A}, Next lyric index: ${R}`),R===0){const y=r.value[0].time-S;if(l(`Pre-lyrics intro: ${y.toFixed(2)}s until first lyric`),y>5){l("Long intro - using fixed look-ahead: 0.3s"),C.value=.3;return}else if(y>2){const c=Math.min(1,y*.15);l(`Medium intro - calculated look-ahead: ${c.toFixed(2)}s`),C.value=c;return}l("Short intro - using standard calculation")}if(R===-1||A===-1){l("Cannot determine appropriate look-ahead, using default: 0.3s"),C.value=.3;return}const ie=r.value[A].time,H=r.value[R].time,G=H-ie,me=C.value;l(`Gap analysis:
    - Current lyric time: ${ie.toFixed(3)}s
    - Next lyric time: ${H.toFixed(3)}s
    - Gap between lyrics: ${G.toFixed(3)}s
    - Previous look-ahead: ${me.toFixed(3)}s`);let ne;G<.5?(ne=.3,l(`Very rapid lyrics detected (${G.toFixed(2)}s gap) - using 30% look-ahead`)):G<.8?(ne=.1,l(`Fast lyrics detected (${G.toFixed(2)}s gap) - using 10% look-ahead`)):G<1.5?(ne=.2,l(`Medium lyrics detected (${G.toFixed(2)}s gap) - using 20% look-ahead`)):G<3?(ne=.3,l(`Slower lyrics detected (${G.toFixed(2)}s gap) - using 30% look-ahead`)):G>10?(ne=.02,l(`Very slow lyrics detected (${G.toFixed(2)}s gap) - using 2% look-ahead`)):(ne=.4,l(`Slow lyrics detected (${G.toFixed(2)}s gap) - using 40% look-ahead`));const Le=Math.min(1.5,G*ne);l(`Target look-ahead: ${Le.toFixed(3)}s`);const Ke=Math.abs(Le-me),Ve=Math.min(.8,.3+Ke*.5),pe=me*(1-Ve)+Le*Ve;l(`Smoothed look-ahead: ${pe.toFixed(3)}s (adaptation rate: ${(Ve*100).toFixed(0)}%)`),Math.abs(pe-me)>.3&&l(`Look-ahead adjusted: ${me.toFixed(2)}s â†’ ${pe.toFixed(2)}s`,!1),C.value=pe},oe=P=>P===void 0||!r.value.length||!q.value||h.value,z=P=>{const S=Math.round((P+C.value)*1e3);let A=-1;for(let R=0;R<r.value.length&&Math.round(r.value[R].time*1e3)<=S;R++)A=R;return A},f=(P,S)=>{P<0||P===u.value||(l(`Lyric activated: "${r.value[P].text}"`),l(`Activating lyric at ${S.toFixed(2)}s (adjusted: ${(S+C.value).toFixed(2)}s):
    - Index: ${P}
    - Lyric time: ${r.value[P].time.toFixed(2)}s`),l(`Transition details:
    - Raw position: ${S.toFixed(3)}s
    - Dynamic look-ahead: ${C.value.toFixed(3)}s
    - Adjusted position: ${(S+C.value).toFixed(3)}s`),P>0&&k(P,S),E.value=S,u.value=P,tt(()=>w()))},k=(P,S)=>{const A=S-E.value,R=r.value[P].time-r.value[P-1].time;l(`Timing analysis:
    - Expected gap: ${R.toFixed(3)}s
    - Actual gap: ${A.toFixed(3)}s
    - Difference: ${(A-R).toFixed(3)}s`)},w=()=>{const P=document.querySelector(".lyrics-line.active"),S=d.value;P&&S&&P.scrollIntoView({behavior:"smooth",block:"center"})};return Z([()=>i.mediaItem?.item_id,()=>i.lyrics,()=>i.lrcLyrics],()=>{ae()},{immediate:!0}),Z(()=>i.position,P=>{if(oe(P))return;const S=P??0;fe(S);const A=z(S);A!==u.value&&f(A,S)}),Ie(()=>{const P=d.value;P&&P.addEventListener("scroll",()=>{h.value=!0,setTimeout(()=>{h.value=!1},8e3)},{passive:!0})}),(P,S)=>(s(),p("div",Ti,[m.value?(s(),p("div",Mi,[n(Za,{indeterminate:"",color:a.textColor},null,8,["color"]),v("div",null,x(e(J)("loading_lyrics")),1)])):r.value.length?B.value&&q.value?(s(),p("div",Ai,[v("div",Ei,x(i.mediaItem?.name),1),v("div",Fi,x(L.value),1),v("div",Bi,x(e(J)("lyrics_will_appear_soon")),1)])):(s(),p("div",{key:3,ref_key:"lyricsContainer",ref:d,class:X(["lyrics-scroll-container",{"static-lyrics":!q.value}])},[(s(!0),p(Y,null,ce(r.value,(A,R)=>(s(),p("div",{key:R,class:X(["lyrics-line",{active:u.value===R||!q.value}])},x(A.text),3))),128))],2)):(s(),p("div",Qi,x(e(J)("no_lyrics_available")),1))]))}}),Oi=ee(Di,[["__scopeId","data-v-1a18eb83"]]),qi=["onClick"],Ri={class:"main"},zi={key:0,class:"main-media-details"},Ni={key:0,class:"main-media-details-image"},Ui={key:1,class:"icon-thumb-large"},Hi={class:"main-media-details-track-info"},ji={key:8,style:{margin:"auto","padding-top":"20px"}},Ki={key:1,class:"main-queue-items"},Gi={class:"queue-items-scroll-box"},Wi={class:"media-thumb listitem-media-thumb"},Yi={class:"title-row"},Xi={class:"d-flex"},Ji={style:{"white-space":"nowrap"},class:"pr-1"},Zi={key:0},es={key:0,style:{"margin-left":"50px"}},ts={key:0,class:"text-caption"},as={key:1,class:"lyrics-wrapper"},ls={key:2,class:"main-queue-items"},is={class:"main-media-details-image main-media-details-image-alt"},ss={key:1,class:"icon-thumb-large"},rs={class:"player-bottom"},os={class:"row",style:{"margin-left":"5%","margin-right":"5%"}},ns={class:"media-controls"},us={key:0,class:"row",style:{"margin-left":"5%","margin-right":"5%"}},ds={key:1,class:"row",style:{height:"70px",display:"flex","justify-content":"center","align-items":"center","padding-bottom":"15px","padding-top":"15px"}},cs=V({__name:"PlayerFullscreen",props:{colorPalette:{}},setup(a){const{name:i}=Ft(),l=a,r=new it,m=M(-1),u=new it,d=M([]),h=M(0),C=M(!1),E=M(0);let B=null;const L=(y=250)=>{B||(B=setInterval(()=>E.value=Date.now(),y))},I=()=>{B&&(clearInterval(B),B=null)},D=T(()=>{E.value;const y=t.activePlayer?.playback_state===ve.PLAYING,c=t.activePlayerQueue;return y&&c?.active?L():I(),c?.elapsed_time!=null&&c?.elapsed_time_last_updated!=null?De(c.elapsed_time,c.elapsed_time_last_updated,t.activePlayer?.playback_state)??0:0}),q=T(()=>t.activePlayerQueue?d.value.slice(t.activePlayerQueue.current_index):[]),te=T(()=>t.activePlayerQueue?d.value.slice(0,t.activePlayerQueue.current_index).reverse():[]),ae=M({plain:null,synced:null}),fe=T(()=>{const y=ae.value.plain,c=ae.value.synced;return!!y&&y.trim().length>0||!!c&&c.trim().length>0}),oe=async()=>{if(ae.value={plain:null,synced:null},!t.showFullscreenPlayer)return;const y=t.curQueueItem?.media_item;if(!y||y.media_type!==O.TRACK)return;const c=y,b=c.metadata?.lyrics?.trim()||null,Q=c.metadata?.lrc_lyrics?.trim()||null;if(b||Q){ae.value={plain:b,synced:Q};return}try{const[F,j]=await $.getTrackLyrics(c);ae.value={plain:F,synced:j},(F||j)&&(c.metadata={...c.metadata,...F&&{lyrics:F},...j&&{lrc_lyrics:j}})}catch(F){console.error("Failed to fetch track lyrics:",F)}};Z(()=>t.curQueueItem?.media_item?.item_id,oe,{immediate:!0}),Z(()=>t.showFullscreenPlayer,y=>{y&&oe()});const z=T(()=>{switch(i.value){case"xs":return"1.2em";case"sm":return"1.6em";case"md":return"2em";case"lg":return t.showQueueItems?"1.5em":"2.5em";case"xl":return t.showQueueItems?"1.6em":"3em";case"xxl":return t.showQueueItems?"1.7em":"3.2em";default:return"1.0em."}}),f=T(()=>{switch(i.value){case"xs":return"1.0em";case"sm":return"1.2em";case"md":return"1.7em";case"lg":return t.showQueueItems?"1.0em":"1.6em";case"xl":return t.showQueueItems?"1.2em":"2em";case"xxl":return t.showQueueItems?"1.2em":"2em";default:return"1.0em."}}),k=T(()=>Oe.display.height.value>800),w=function(y){t.showFullscreenPlayer=!1,ue.push({name:y.media_type,params:{itemId:y.item_id,provider:y.provider}})},P=async function(){const y=t.activePlayer?.current_media;if(!y)return;const c=t.curQueueItem?.media_item;if(c&&c.media_type===O.TRACK)t.showFullscreenPlayer=!1,ue.push({name:"track",params:{itemId:c.item_id,provider:c.provider}});else{const b=y.artist?`${y.artist} - ${y.title}`:y.title||"";try{const Q=await $.getLibraryTracks(void 0,b,5);if(Q.length>0){let F=Q[0];if(y.artist&&y.title){const j=Q.find(ge=>ge.name.toLowerCase()===y.title.toLowerCase()&&ge.artists?.some(_e=>_e.name.toLowerCase()===y.artist.toLowerCase()));j&&(F=j)}t.showFullscreenPlayer=!1,ue.push({name:"track",params:{itemId:F.item_id,provider:F.provider}});return}}catch(Q){console.error("Error searching library for track:",Q)}t.globalSearchTerm=b,ue.push({name:"search"}),t.showFullscreenPlayer=!1}},S=async function(){const y=t.activePlayer?.current_media;if(!y?.album)return;const c=t.curQueueItem?.media_item;if(!(c&&y.album===c.name))if(c&&"album"in c&&c.album)t.showFullscreenPlayer=!1,ue.push({name:"album",params:{itemId:c.album.item_id,provider:c.album.provider}});else{try{const Q=await $.getLibraryAlbums(void 0,y.album,5);if(Q.length>0){let F=Q[0];if(y.artist){const j=Q.find(ge=>ge.artists?.some(_e=>_e.name.toLowerCase()===y.artist.toLowerCase()||_e.name.toLowerCase().includes(y.artist.toLowerCase())||y.artist.toLowerCase().includes(_e.name.toLowerCase())));j&&(F=j)}t.showFullscreenPlayer=!1,ue.push({name:"album",params:{itemId:F.item_id,provider:F.provider}});return}}catch(Q){console.error("Error searching library for album:",Q)}const b=y.artist?`${y.artist} - ${y.album}`:y.album||"";t.globalSearchTerm=b,ue.push({name:"search"}),t.showFullscreenPlayer=!1}},A=async function(){const y=t.activePlayer?.current_media;if(!y?.artist)return;const c=t.curQueueItem?.media_item;if(c&&"artists"in c&&c.artists&&c.artists.length>0)t.showFullscreenPlayer=!1,ue.push({name:"artist",params:{itemId:c.artists[0].item_id,provider:c.artists[0].provider}});else{try{const b=await $.getLibraryArtists(void 0,y.artist,5);if(b.length>0){let Q=b[0];const F=b.find(j=>j.name.toLowerCase()===y.artist.toLowerCase());F&&(Q=F),t.showFullscreenPlayer=!1,ue.push({name:"artist",params:{itemId:Q.item_id,provider:Q.provider}});return}}catch(b){console.error("Error searching library for artist:",b)}t.globalSearchTerm=y.artist,ue.push({name:"search"}),t.showFullscreenPlayer=!1}},R=function(y,c){const b=d.value.indexOf(c),Q=[{label:"play_now",labelArgs:[],action:()=>{H(c,"play_now")},icon:"mdi-play-circle-outline",disabled:b===t.activePlayerQueue?.current_index||b===t.activePlayerQueue?.index_in_buffer},{label:"play_next",labelArgs:[],action:()=>{H(c,"move_next")},icon:"mdi-skip-next-circle-outline",disabled:b<=(t.activePlayerQueue?.index_in_buffer||0)},{label:"queue_move_up",labelArgs:[],action:()=>{H(c,"up")},icon:"mdi-arrow-up",disabled:b<=(t.activePlayerQueue?.index_in_buffer||0)},{label:"queue_move_down",labelArgs:[],action:()=>{H(c,"down")},icon:"mdi-arrow-down",disabled:b<=(t.activePlayerQueue?.index_in_buffer||0)},{label:"queue_delete",labelArgs:[],action:()=>{H(c,"delete")},icon:"mdi-delete",disabled:b<=(t.activePlayerQueue?.index_in_buffer||0)}];c?.media_item?.media_type==O.TRACK&&Q.push({label:"show_info",labelArgs:[],action:()=>{w(c.media_item)},icon:"mdi-information-outline",disabled:!1}),$e.emit("contextmenu",{items:Q,posX:y.clientX,posY:y.clientY})},ie=function(y){t.activePlayer&&$e.emit("contextmenu",{items:hl(t.activePlayer,t.activePlayerQueue),posX:y.clientX,posY:y.clientY})},H=function(y,c){!y||!t.activePlayerQueue||(c=="play_now"?$.queueCommandPlayIndex(t.activePlayerQueue?.queue_id,y.queue_item_id):c=="move_next"?$.queueCommandMoveNext(t.activePlayerQueue?.queue_id,y.queue_item_id):c=="up"?$.queueCommandMoveUp(t.activePlayerQueue?.queue_id,y.queue_item_id):c=="down"?$.queueCommandMoveDown(t.activePlayerQueue?.queue_id,y.queue_item_id):c=="delete"&&$.queueCommandDelete(t.activePlayerQueue?.queue_id,y.queue_item_id))},G=async function(){C.value=!0,d.value=[],await vt(100),C.value=!1},me=async function({done:y}){if(!t.activePlayerQueue||t.activePlayerQueue.items==0){y("empty");return}if(d.value.length>=t.activePlayerQueue?.items){y("empty");return}const c=d.value.length,b=(t.activePlayerQueue.current_index||0)+50,Q=await $.getPlayerQueueItems(t.activePlayerQueue.queue_id,b,c);d.value.push(...Q),Q.length<50?y("empty"):y("ok")};Ie(()=>{const y=$.subscribe(Jt.QUEUE_ITEMS_UPDATED,c=>{c.object_id==t.activePlayerQueue?.queue_id&&(c.data,G())});et(y)});const ne=y=>{y.key==="Escape"&&t.showFullscreenPlayer&&!t.dialogActive&&(t.showFullscreenPlayer=!1)};Ie(()=>{window.addEventListener("keydown",ne),et(()=>{window.removeEventListener("keydown",ne),I()})});const Le=async function(y){if(!t.curQueueItem?.media_item)return;if(!t.curQueueItem.media_item.favorite){$.toggleFavorite(t.curQueueItem.media_item);return}let c=t.curQueueItem.media_item;(c.provider!="library"||!("provider_mappings"in c))&&[O.ALBUM,O.ARTIST,O.AUDIOBOOK,O.PLAYLIST,O.PODCAST,O.RADIO,O.TRACK].includes(c.media_type)&&(c=await $.getLibraryItem(c.media_type,c.item_id,c.provider)||c);const b=[];"favorite"in c&&c.favorite&&c.provider=="library"&&[O.ALBUM,O.ARTIST,O.AUDIOBOOK,O.PLAYLIST,O.PODCAST,O.RADIO,O.TRACK].includes(c.media_type)&&b.push({label:"favorites_remove",labelArgs:[],action:()=>{$.removeItemFromFavorites(c.media_type,c.item_id),c.favorite=!1,t.curQueueItem.media_item.favorite=!1},icon:"mdi-heart"}),[O.ALBUM,O.ARTIST,O.AUDIOBOOK,O.PLAYLIST,O.PODCAST,O.RADIO,O.TRACK].includes(c.media_type)&&b.push({label:"add_playlist",labelArgs:[],action:()=>{$e.emit("playlistdialog",{items:[t.curQueueItem.media_item]})},icon:"mdi-plus-circle-outline"}),$e.emit("contextmenu",{items:b,posX:y.clientX,posY:y.clientY})},Ke=function(){C.value=!0,vt(100).then(()=>{C.value=!1})},Ve=function(y,c){$.playMedia(y.uri,Zt.PLAY,void 0,c.position.toString())};Z(()=>t.activePlayerId,y=>{G()},{immediate:!0});const pe=M(void 0),ye=M(void 0);return ka(()=>{const y=Ee("white"),c=Ee("black"),b=5,Q=.05,F=Oe.theme.current.value.dark?l.colorPalette.darkColor||"#000":l.colorPalette.lightColor||"#fff";let j=Ee(F);const ge=y.contrast(j),_e=c.contrast(j),mt=ge>=_e;let Ge=mt?y:c,We=Math.max(ge,_e);if(We<b){let pt=Q;for(;We<b&&pt<=.5;)mt?j=j.darken(Q):j=j.lighten(Q),We=Ee(Ge).contrast(j),pt+=Q}document.documentElement.style.setProperty("--text-color",Ge.hex()),pe.value=Ge.hex(),ye.value=j.hex()}),(y,c)=>(s(),_(Et,{modelValue:e(t).showFullscreenPlayer,"onUpdate:modelValue":c[8]||(c[8]=b=>e(t).showFullscreenPlayer=b),fullscreen:"",scrim:!1,transition:"dialog-bottom-transition","z-index":"9999",persistent:""},{default:o(()=>[n(ze,{color:ye.value},{default:o(()=>[n(el,{class:"v-toolbar-default",color:"transparent"},{prepend:o(()=>[n(be,{icon:"",onClick:c[0]||(c[0]=b=>e(t).showFullscreenPlayer=!1)},{default:o(()=>[n(re,{icon:"mdi-chevron-down"})]),_:1})]),append:o(()=>[e(t).activePlayerQueue?.radio_source.length?(s(),_(ut,{key:0,scrim:""},{activator:o(({props:b})=>[n(be,N(b,{icon:""}),{default:o(()=>[n(re,{color:"accent",icon:"mdi-radio-tower"})]),_:1},16)]),default:o(()=>[n(ze,{title:e(J)("queue_radio_enabled"),subtitle:e(J)("queue_radio_based_on")},{text:o(()=>[(s(!0),p(Y,null,ce(e(t).activePlayerQueue?.radio_source,b=>(s(),p("div",{key:b.uri},[v("a",{onClick:Q=>w(b)},x(b.name),9,qi)]))),128))]),_:1},8,["title","subtitle"])]),_:1})):g("",!0),k.value?g("",!0):(s(),_(jt,{key:1})),n(be,{icon:"",onClick:Ae(ie,["stop"])},{default:o(()=>[n(re,{icon:"mdi-dots-vertical"})]),_:1})]),_:1}),v("div",Ri,[e(le)("bp7")||!e(t).showQueueItems?(s(),p("div",zi,[y.$vuetify.display.height>600?(s(),p("div",Ni,[e(t).activePlayer?.powered!=!1&&e(t).activePlayer?.current_media?.image_url?(s(),_(lt,{key:0,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(qe)(e(t).activePlayer.current_media.image_url)},null,8,["src"])):(s(),p("div",Ui,[n(re,{size:"128",icon:e(t).activePlayer?.type==e(Ze).PLAYER&&e(t).activePlayer?.group_members.length?"mdi-speaker-multiple":e(t).activePlayer?.icon||"mdi-speaker"},null,8,["icon"])]))])):g("",!0),v("div",Hi,[e(t).activePlayer?.powered==!1?(s(),_(Fe,{key:0,style:de(`font-size: ${z.value};`)},{default:o(()=>[K(x(e(t).activePlayer?.name),1)]),_:1},8,["style"])):e(t).activePlayer?.current_media?.title?(s(),_(Fe,{key:1,style:de(`font-size: ${z.value};cursor:pointer;`),onClick:P},{default:o(()=>[n(he,{sync:e(r)},{default:o(()=>[K(x(e(t).activePlayer.current_media.title),1)]),_:1},8,["sync"])]),_:1},8,["style"])):(s(),_(Fe,{key:2,style:de(`font-size: ${z.value};cursor:pointer;`),onClick:c[1]||(c[1]=b=>e(t).showPlayersMenu=!0)},{default:o(()=>[n(he,{sync:e(r)},{default:o(()=>[K(x(e(t).activePlayer?.name||e(J)("no_player")),1)]),_:1},8,["sync"])]),_:1},8,["style"])),e(t).activePlayer?.powered==!1?(s(),_(Te,{key:3,class:"text-h6 text-md-h5 text-lg-h4"},{default:o(()=>[K(x(e(J)("off")),1)]),_:1})):e(t).activePlayer?.current_media?.album?(s(),_(Te,{key:4,style:de(`font-size: ${f.value};cursor:pointer;`),onClick:S},{default:o(()=>[n(he,{sync:e(r)},{default:o(()=>[K(x(e(t).activePlayer.current_media.album),1)]),_:1},8,["sync"])]),_:1},8,["style"])):g("",!0),e(t).activePlayer?.current_media?.artist?(s(),_(Te,{key:5,style:de(`font-size: ${f.value};cursor:pointer;`),onClick:A},{default:o(()=>[n(he,{sync:e(r)},{default:o(()=>[K(x(e(t).activePlayer.current_media.artist),1)]),_:1},8,["sync"])]),_:1},8,["style"])):g("",!0),!e(t).activePlayerQueue&&e(t).activePlayer?.active_source?(s(),_(Te,{key:6,class:"caption"},{default:o(()=>[K(x(e(J)("external_source_active",[e(St)(e(t).activePlayer)])),1)]),_:1})):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(s(),_(Te,{key:7,class:"caption"},{default:o(()=>[K(x(e(J)("queue_empty")),1)]),_:1})):g("",!0),e(t).activePlayer?.powered!=!1&&e(t).curQueueItem?.streamdetails?(s(),p("div",ji,[n(At)])):g("",!0)])])):g("",!0),e(t).showQueueItems&&e(t).activePlayerQueue?(s(),p("div",Ki,[n(tl,{modelValue:h.value,"onUpdate:modelValue":c[2]||(c[2]=b=>h.value=b),"hide-slider":"",density:"compact",onClick:Ke},{default:o(()=>[n(Je,{value:0},{default:o(()=>[K(x(e(J)("queue"))+" ",1),n(ht,{color:"grey",content:(e(t).activePlayerQueue?.items||0)-(e(t).activePlayerQueue?.current_index||0),inline:""},null,8,["content"])]),_:1}),n(Je,{value:1},{default:o(()=>[K(x(e(J)("played"))+" ",1),n(ht,{color:"grey",content:e(t).activePlayerQueue?.current_index,inline:""},null,8,["content"])]),_:1}),fe.value?(s(),_(Je,{key:0,value:2},{default:o(()=>[K(x(e(J)("lyrics")),1)]),_:1})):g("",!0)]),_:1},8,["modelValue"]),v("div",Gi,[!C.value&&h.value!==2?(s(),_(al,{key:0,onLoad:me,"empty-text":"",height:"100%"},{default:o(()=>[n(ll,{"item-height":70,"max-height":"90%",items:h.value==0?q.value:te.value},{default:o(({item:b,index:Q})=>[n(bl,{link:"","show-menu-btn":!0,disabled:!b.available,onClick:Ae(F=>R(F,b),["stop"]),onMenu:Ae(F=>R(F,b),["stop"]),onMouseenter:F=>m.value=Q,onMouseleave:c[3]||(c[3]=F=>m.value=-1)},{prepend:o(()=>[v("div",Wi,[n(Qt,{size:"50",item:b},null,8,["item"])])]),title:o(()=>[v("div",Yi,[n(he,{sync:Q==0&&h.value==0?e(r):e(u),disabled:!(Q==0&&h.value==0||m.value==Q)},{default:o(()=>[v("span",{class:X({"is-playing":b.queue_item_id===e(t).curQueueItem?.queue_item_id})},x(b.name),3)]),_:2},1032,["sync","disabled"])])]),subtitle:o(()=>[v("div",Xi,[v("span",Ji,x(e(Me)(b.duration))+" | ",1),n(he,{sync:Q==0&&h.value==0?e(r):e(u),disabled:!(Q==0&&h.value==0||m.value==Q)},{default:o(()=>[b.media_item&&"album"in b.media_item&&b.media_item.album?(s(),p("span",Zi,x(b.media_item.album.name),1)):g("",!0)]),_:2},1032,["sync","disabled"])])]),append:o(()=>[b.queue_item_id===e(t).curQueueItem?.queue_item_id&&e(t).activePlayer?.playback_state!=e(ve).IDLE?(s(),_(Bt,{key:0,"show-badge":e(le)("bp4")},null,8,["show-badge"])):g("",!0),b.available?g("",!0):(s(),_(re,{key:1},{default:o(()=>[...c[9]||(c[9]=[K("mdi-alert",-1)])]),_:1}))]),_:2},1032,["disabled","onClick","onMenu","onMouseenter"]),b.queue_item_id==e(t).curQueueItem?.queue_item_id&&b.media_item?.metadata?.chapters?.length?(s(),p("div",es,[(s(!0),p(Y,null,ce(b.media_item.metadata?.chapters,F=>(s(),_(Qe,{key:F.position,onClick:Ae(j=>Ve(b.media_item,F),["stop"])},{title:o(()=>[v("div",null,x(F.name),1)]),append:o(()=>[F.end?(s(),p("span",ts,x(e(Me)(F.end-F.start)),1)):g("",!0)]),_:2},1032,["onClick"]))),128))])):g("",!0)]),_:1},8,["items"])]),_:1})):g("",!0),h.value===2?(s(),p("div",as,[n(Oi,{"media-item":e(t).curQueueItem?.media_item,position:D.value,duration:e(t).curQueueItem?.duration,"stream-details":e(t).curQueueItem?.streamdetails,"text-color":pe.value,lyrics:ae.value.plain,"lrc-lyrics":ae.value.synced},null,8,["media-item","position","duration","stream-details","text-color","lyrics","lrc-lyrics"])])):g("",!0)])])):g("",!0),!e(t).showQueueItems&&y.$vuetify.display.height<=600?(s(),p("div",ls,[v("div",is,[e(t).activePlayer?.current_media?.image_url?(s(),_(lt,{key:0,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(qe)(e(t).activePlayer.current_media.image_url)},null,8,["src"])):(s(),p("div",ss,[n(re,{size:"128",icon:e(t).activePlayer?.type==e(Ze).PLAYER&&e(t).activePlayer?.group_members.length?"mdi-speaker-multiple":e(t).activePlayer?.icon||"mdi-speaker"},null,8,["icon"])]))])])):g("",!0)]),v("div",rs,[v("div",os,[n(Kt,{"show-labels":!0,color:pe.value},null,8,["color"])]),v("div",ns,[e(t).activePlayerQueue?(s(),_(ke,{key:0,disabled:!e(t).curQueueItem?.media_item,icon:e(t).curQueueItem?.media_item?.favorite?"mdi-heart":"mdi-heart-outline",title:e(J)("tooltip.favorite"),variant:"button",class:"media-controls-item","max-height":"30px",onClick:Le},null,8,["disabled","icon","title"])):g("",!0),y.$vuetify.display.mdAndUp?(s(),_(Ut,{key:1,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"30px"},null,8,["player-queue"])):g("",!0),n(Nt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),n(zt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"70px"},null,8,["player","player-queue"]),n(Rt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),y.$vuetify.display.mdAndUp?(s(),_(qt,{key:2,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"35px"},null,8,["player-queue"])):g("",!0),e(t).activePlayerQueue?(s(),_(Ht,{key:3,class:"media-controls-item","max-height":"30px"})):g("",!0)]),e(t).activePlayer?(s(),p("div",us,[n(dt,{width:"100%","is-powered":e(t).activePlayer?.powered!=!1,disabled:!e(t).activePlayer||!e(t).activePlayer?.available||e(t).activePlayer.powered==!1||!e(t).activePlayer.supported_features.includes(e(Pe).VOLUME_SET),"model-value":Math.round(e(t).activePlayer.group_members.length>0?e(t).activePlayer.group_volume:e(t).activePlayer.volume_level||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus",color:pe.value,"allow-wheel":!0,"onUpdate:modelValue":c[4]||(c[4]=b=>e(t).activePlayer.group_members.length>0?e($).playerCommandGroupVolume(e(t).activePlayerId,b):e($).playerCommandVolumeSet(e(t).activePlayerId,b)),"onClick:prepend":c[5]||(c[5]=b=>e(t).activePlayer.group_members.length>0?e($).playerCommandGroupVolumeDown(e(t).activePlayerId):e($).playerCommandVolumeDown(e(t).activePlayerId)),"onClick:append":c[6]||(c[6]=b=>e(t).activePlayer.group_members.length>0?e($).playerCommandGroupVolumeUp(e(t).activePlayerId):e($).playerCommandVolumeUp(e(t).activePlayerId))},null,8,["is-powered","disabled","model-value","color"])])):g("",!0),k.value?(s(),p("div",ds,[n(Be,{class:"responsive-icon-holder-btn",variant:"outlined",onClick:c[7]||(c[7]=b=>e(t).showPlayersMenu=!0)},{default:o(()=>[n(re,{icon:e(t).activePlayer?.icon||"mdi-speaker"},null,8,["icon"]),K(" "+x(e(t).activePlayer?e(Lt)(e(t).activePlayer):""),1)]),_:1})])):g("",!0)])]),_:1},8,["color"])]),_:1},8,["modelValue"]))}}),ms=ee(cs,[["__scopeId","data-v-393fb6f4"]]),ps={key:0},ys={key:1,class:"icon-thumb"},vs={key:0},fs={key:0,class:"pl-4"},_s={key:0},hs={class:"ma-line-clamp-1"},bs={class:"ma-line-clamp-1"},gs={key:0},Ps={key:1},ws={key:2},ks={key:2,class:"ma-line-clamp-1"},xs={key:3,class:"ma-line-clamp-1"},$s={key:4},Cs=V({__name:"PlayerTrackDetails",props:{showOnlyArtist:{type:Boolean,default:!1},showQualityDetailsBtn:{type:Boolean,default:!0},colorPalette:{},primaryColor:{default:""}},setup(a){const i=new it,l=a,r=T(()=>t.activePlayerQueue?.current_item?.streamdetails);return(m,u)=>(s(),p(Y,null,[n(Qe,{class:"player-track-details",style:{height:"auto",width:"100%",margin:"0px",padding:"0px"},lines:"two"},{prepend:o(()=>[v("div",{class:"media-thumb player-media-thumb",style:de(`cursor: pointer;height: ${e(le)({breakpoint:"phone"})?60:64}px; width: ${e(le)({breakpoint:"phone"})?60:64}px; `),onClick:u[0]||(u[0]=d=>e(t).showFullscreenPlayer=!0)},[e(t).activePlayer?.powered!=!1&&e(t).activePlayer?.current_media?.image_url?(s(),p("div",ps,[n(lt,{class:"media-thumb",style:{"border-radius":"4px"},size:"60",src:e(qe)(e(t).activePlayer.current_media.image_url)},null,8,["src"])])):(s(),p("div",ys,[n(re,{size:"32",icon:e(t).activePlayer?.type==e(Ze).PLAYER&&e(t).activePlayer?.group_members.length?"mdi-speaker-multiple":e(t).activePlayer?.icon||"mdi-speaker"},null,8,["icon"])]))],4)]),title:o(()=>[v("div",{style:de({cursor:"pointer",color:a.primaryColor}),class:"d-flex align-center"},[e(t).activePlayer&&e(t).activePlayer?.powered!=!1?(s(),p("div",vs,x(e(Lt)(e(t).activePlayer)),1)):e(t).activePlayer?.powered==!1?(s(),p("div",{key:1,onClick:u[1]||(u[1]=d=>e(t).showPlayersMenu=!0)},x(e(t).activePlayer?.name),1)):(s(),p("div",{key:2,onClick:u[2]||(u[2]=d=>e(t).showPlayersMenu=!0)},x(m.$t("no_player")),1)),e(t).activePlayer&&e(t).activePlayer?.powered!=!1&&e(t).activePlayer?.playback_state!=e(ve).IDLE?(s(),_(Bt,{key:3,"show-badge":!1,"show-icon":!0,"icon-style":"margin-left: 12px; margin-bottom: 4px;"})):g("",!0)],4)]),append:o(()=>[r.value?.audio_format.content_type&&!e(le)({breakpoint:"phone"})&&a.showQualityDetailsBtn?(s(),p("div",fs,[n(At)])):g("",!0)]),subtitle:o(()=>[v("div",{style:de({cursor:"pointer",color:a.primaryColor}),onClick:u[3]||(u[3]=d=>e(t).showFullscreenPlayer=!0)},[e(t).activePlayer?.powered==!1?(s(),p("div",_s,x(m.$t("off")),1)):e(t).activePlayer?.current_media?.title?(s(),p(Y,{key:1},[v("div",hs,[n(he,{sync:e(i)},{default:o(()=>[K(x(e(t).activePlayer.current_media.title),1)]),_:1},8,["sync"])]),v("div",bs,[n(he,{sync:e(i)},{default:o(()=>[e(t).activePlayer?.current_media?.artist&&e(t).activePlayer?.current_media?.album&&!l.showOnlyArtist?(s(),p("span",gs,x(e(t).activePlayer?.current_media?.artist)+" â€¢ "+x(e(t).activePlayer?.current_media?.album),1)):e(t).activePlayer?.current_media?.artist?(s(),p("span",Ps,x(e(t).activePlayer?.current_media?.artist),1)):e(t).activePlayer?.current_media?.album?(s(),p("span",ws,x(e(t).activePlayer?.current_media?.album),1)):g("",!0)]),_:1},8,["sync"])])],64)):e(t).activePlayer&&!e(t).activePlayerQueue&&e(t).activePlayer?.active_source?(s(),p("div",ks,x(m.$t("external_source_active",[e(St)(e(t).activePlayer)])),1)):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(s(),p("div",xs,x(m.$t("queue_empty")),1)):e(t).activePlayer?(s(),p("div",$s,x(e(t).activePlayer?.name),1)):g("",!0)],4)]),_:1}),n(ms,{"show-fullscreen":e(t).showFullscreenPlayer,"color-palette":a.colorPalette},null,8,["show-fullscreen","color-palette"])],64))}}),$t=ee(Cs,[["__scopeId","data-v-5a848776"]]),Is=["data-floating"],Ss={class:"mediacontrols"},Ls={class:"mediacontrols-left"},Vs={class:"mediacontrols-bottom-center"},Ts={class:"mediacontrols-bottom-right"},Ms={key:1,class:"mediacontrols-mobile-container"},Qs=["data-floating"],As={class:"mediacontrols","data-mobile":!0},Es={class:"mediacontrols-left"},Fs={class:"mediacontrols-bottom-right"},Bs={key:0,class:"volume-slider"},Ds=V({__name:"Player",props:{useFloatingPlayer:{type:Boolean}},setup(a){Mt(u=>({v45d54d6a:m.value}));const{mobile:i}=Ft({mobileBreakpoint:576}),l=M({0:"",1:"",2:"",3:"",4:"",5:"",lightColor:"",darkColor:""}),r=new Image;r.src=Oe.theme.current.value.dark?Ka:Ga,r.crossOrigin="Anonymous",r.addEventListener("load",function(){l.value=ea(r)});const m=T(()=>Oe.theme.current.value.dark?l.value&&l.value.darkColor?l.value.darkColor:"#CCCCCC26":l.value&&l.value.lightColor?l.value.lightColor:"#CCCCCC26");return Z(()=>t.activePlayer?.current_media?.image_url,()=>{t.activePlayer?.current_media?.image_url?r.src=qe(t.activePlayer.current_media.image_url):r.src=""}),(u,d)=>e(i)?(s(),p("div",Ms,[v("div",{class:"mediacontrols-bg","data-floating":a.useFloatingPlayer},null,8,Qs),v("div",As,[v("div",Es,[n($t,{"show-quality-details-btn":!1,"show-only-artist":!0,"color-palette":l.value,"primary-color":u.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["color-palette","primary-color"])]),v("div",Fs,[v("div",null,[n(xt,{queue:{isVisible:!1,color:u.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:u.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:!1,color:u.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"]),n(kt,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:!0,icon:{staticWidth:"40px",staticHeight:"40px",color:u.$vuetify.theme.current.dark?"#fff":"#000"}},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"])])])]),e(t).activePlayer?(s(),p("div",Bs,[n(dt,{width:"100%",color:"secondary","is-powered":e(t).activePlayer?.powered!=!1,disabled:!e(t).activePlayer||!e(t).activePlayer?.available||e(t).activePlayer.powered==!1||!e(t).activePlayer.supported_features.includes(e(Pe).VOLUME_SET),"model-value":Math.round(e(t).activePlayer.group_members.length>0?e(t).activePlayer.group_volume:e(t).activePlayer.volume_level||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","onUpdate:modelValue":d[0]||(d[0]=h=>e(t).activePlayer.group_members.length>0?e($).playerCommandGroupVolume(e(t).activePlayerId,h):e($).playerCommandVolumeSet(e(t).activePlayerId,h)),"onClick:prepend":d[1]||(d[1]=h=>e(t).activePlayer.group_members.length>0?e($).playerCommandGroupVolumeDown(e(t).activePlayerId):e($).playerCommandVolumeDown(e(t).activePlayerId)),"onClick:append":d[2]||(d[2]=h=>e(t).activePlayer.group_members.length>0?e($).playerCommandGroupVolumeUp(e(t).activePlayerId):e($).playerCommandVolumeUp(e(t).activePlayerId))},null,8,["is-powered","disabled","model-value"])])):g("",!0)])):(s(),p(Y,{key:0},[v("div",{class:"mediacontrols-bg","data-floating":a.useFloatingPlayer},null,8,Is),v("div",Ss,[v("div",Ls,[n($t,{"show-quality-details-btn":!!e(le)("bp8"),"show-only-artist":!e(le)("bp7"),"color-palette":l.value,"primary-color":u.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["show-quality-details-btn","show-only-artist","color-palette","primary-color"])]),v("div",Vs,[n(kt,{"visible-components":{repeat:{isVisible:e(le)("bp3")},shuffle:{isVisible:e(le)("bp3")},play:{isVisible:!0,icon:{staticWidth:"48px",staticHeight:"48px"}},previous:{isVisible:e(le)("bp3")},next:{isVisible:e(le)("bp3")}}},null,8,["visible-components"]),e(le)("bp6")?(s(),_(Kt,{key:0,"is-progress-bar":!1,disabled:!e(t).activePlayerQueue?.active||e(t).activePlayerQueue?.current_item?.media_item?.media_type!==e(O).TRACK},null,8,["disabled"])):g("",!0)]),v("div",Ts,[v("div",null,[n(xt,{queue:{isVisible:e(le)("bp3"),color:u.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:u.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:e(t).activePlayer!=null,color:u.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"])])])])],64))}}),Os=ee(Ds,[["__scopeId","data-v-5ee38b8e"]]),qs={class:"menuButton"},Rs={class:"menuButton"},zs=V({__name:"BottomNavigation",props:{height:{}},setup(a){const i=Ot(),l=M(!1),r=()=>{ta()};return(m,u)=>(s(),_(il,{height:a.height,"bg-color":"default",grow:"",role:"navigation"},{default:o(()=>[e(t).isIngressSession?(s(),_(Be,{key:0,"aria-label":"Home Assistant",tabindex:"0",variant:"text","base-color":"grey",onClick:r},{default:o(()=>[...u[0]||(u[0]=[v("img",{src:It,alt:"Home Assistant",class:"w-6 h-6"},null,-1),v("span",{class:"menuButton"},"HA",-1)])]),_:1})):g("",!0),(s(!0),p(Y,null,ce(e(i).filter(d=>!d.isLibraryNode),d=>(s(),_(Be,{key:d.label,to:d.path,"aria-label":m.$t(d.label),tabindex:"0",variant:"text","active-color":"fg","base-color":"grey"},{default:o(()=>[(s(),_(we(d.icon),{class:"w-6 h-6"})),v("span",qs,x(m.$t(d.label)),1)]),_:2},1032,["to","aria-label"]))),128)),n(ut,null,{activator:o(({props:d})=>[n(Be,N(d,{"aria-haspopup":"true","aria-expanded":l.value.toString(),"aria-label":"Open library menu","base-color":"grey"}),{default:o(()=>[n(e(xa),{class:"w-6 h-6"}),v("span",Rs,x(m.$t("library")),1)]),_:1},16,["aria-expanded"])]),default:o(()=>[n(Ne,null,{default:o(()=>[(s(!0),p(Y,null,ce(e(i).filter(d=>d.isLibraryNode),d=>(s(),_(Qe,{key:d.label,title:m.$t(d.label),to:d.path},{prepend:o(()=>[(s(),_(we(d.icon),{class:"w-5 h-5 mr-3"}))]),_:2},1032,["title","to"]))),128))]),_:1})]),_:1})]),_:1},8,["height"]))}}),Ns=V({__name:"Footer",setup(a){const i=T(()=>t.isInPWAMode?100:80);return(l,r)=>(s(),p(Y,null,[e(t).mobileLayout?(s(),p("div",{key:0,class:X(l.$vuetify.theme.current.dark?"gradient-dark":"gradient-light"),style:`
      position: fixed;
      width: 100%;
      height: 180px;
      bottom: 0px;
      z-index: 999;
    `},null,2)):g("",!0),e(t).mobileLayout?(s(),_(zs,{key:1,height:i.value},null,8,["height"])):g("",!0),n(sl,{app:"",color:"default",class:X(`py-0 px-0 ${e(t).mobileLayout?"mediacontrols-player-float":"mediacontrols-player-default"}`)},{default:o(()=>[n(Os,{"use-floating-player":e(t).mobileLayout},null,8,["use-floating-player"])]),_:1},8,["class"])],64))}}),Us={style:{float:"right"}},Hs={class:"player-content"},Ct=3,js=V({__name:"PlayerSelect",setup(a){const i=M(!1),l=M([]),r=M([]),m=M(void 0),u=M(""),{getPreference:d,setPreference:h}=gl(),C=d("allPlayersExpanded");Z(C,f=>{m.value=f?0:void 0},{immediate:!0}),Z(m,f=>{h("allPlayersExpanded",f===0)});const E=d("recentlySelectedPlayerIds");E.value&&(l.value=E.value);const B=f=>{let k=0;(f.playback_state===ve.PLAYING||f.playback_state===ve.PAUSED)&&(k+=2),(f.player_id===xe.player_id||f.player_id===t.companionPlayerId)&&(k+=2),f.current_media&&(k+=1);const w=l.value.indexOf(f.player_id);return w!==-1&&(k+=Ct-w),k},L=()=>{const k=Object.values($.players).filter(w=>Ye(w)).sort((w,P)=>{const S=B(w),A=B(P);return A!==S?A-S:w.name.toUpperCase()>P.name.toUpperCase()?1:-1});r.value=k.map(w=>w.player_id)},I=T(()=>Object.values($.players).filter(f=>Ye(f)).sort((f,k)=>f.name.toUpperCase()>k.name?.toUpperCase()?1:-1)),D=T(()=>{if(u.value){const k=u.value.toLowerCase();return I.value.filter(w=>w.name.toLowerCase().includes(k))}const f=te.value.map(k=>k.player_id);return I.value.filter(k=>!f.includes(k.player_id))}),q=T(()=>I.value.length>8),te=T(()=>{const f=Object.values($.players).filter(w=>Ye(w));return f.length<=3?f.sort((w,P)=>{const S=r.value.indexOf(w.player_id),A=r.value.indexOf(P.player_id);return S-A}):f.filter(w=>B(w)>0).sort((w,P)=>{const S=r.value.indexOf(w.player_id),A=r.value.indexOf(P.player_id);return S-A}).slice(0,3)});Z(()=>t.showPlayersMenu,f=>{if(f)L();else{if(u.value="",t.activePlayerId){h("activePlayerId",t.activePlayerId),localStorage.setItem("activePlayerId",t.activePlayerId);const k=l.value.filter(w=>w!==t.activePlayerId);k.unshift(t.activePlayerId),l.value=k.slice(0,Ct)}h("recentlySelectedPlayerIds",l.value)}}),Z(()=>$.players,f=>{f&&oe()},{deep:!0}),Z(()=>xe.player_id,f=>{f&&oe()});function ae(f,k=!1){t.activePlayerId!==f.player_id&&(t.activePlayerId=f.player_id,t.playerTipShown=!0),k&&(t.showPlayersMenu=!1),tt(()=>{const w=document.getElementById(f.player_id);w&&w.scrollIntoView({behavior:"smooth",block:"nearest"})})}function fe(f){t.activePlayerId!==f.player_id?(t.activePlayerId=f.player_id,i.value=!0):i.value=!i.value,i.value&&tt(()=>{const k=document.getElementById(f.player_id);k&&k.scrollIntoView({behavior:"smooth",block:"nearest"})})}Ie(()=>{oe()});const oe=function(){if(t.activePlayer)return;const f=z();f&&(t.activePlayerId=f)},z=function(){const f=localStorage.getItem("activePlayerId")||d("activePlayerId").value;if(f&&f in $.players)return f;if(!f&&xe.player_id&&xe.player_id in $.players)return xe.player_id;if(!f&&t.companionPlayerId&&t.companionPlayerId in $.players)return t.companionPlayerId};return(f,k)=>(s(),p(Y,null,[n(rl,{modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":k[0]||(k[0]=w=>e(t).showPlayersMenu=w)},null,8,["modelValue"]),e(t).showPlayersMenu?(s(),_(ml,{key:0,modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":k[4]||(k[4]=w=>e(t).showPlayersMenu=w),location:"right",app:"",clipped:"",temporary:"",width:460,style:{"z-index":"99999"},"z-index":"99999",color:"background"},{prepend:o(()=>[n(Fe,{class:"title",style:{"padding-top":"20px","padding-bottom":"20px"}},{default:o(()=>[v("b",null,x(f.$t("players")),1),v("div",Us,[e(aa).isAdmin()?(s(),_(be,{key:0,variant:"icon",to:{name:"playersettings"}},{default:o(()=>[n(re,{size:"24"},{default:o(()=>[...k[5]||(k[5]=[K("mdi-cog",-1)])]),_:1})]),_:1})):g("",!0),n(be,{variant:"icon",onClick:k[1]||(k[1]=w=>e(t).showPlayersMenu=!1)},{default:o(()=>[n(re,{size:"24"},{default:o(()=>[...k[6]||(k[6]=[K("mdi-close",-1)])]),_:1})]),_:1})])]),_:1}),n(at)]),default:o(()=>[v("div",Hs,[n(Ne,{flat:"",style:{margin:"0px 10px",padding:"0"}},{default:o(()=>[(s(!0),p(Y,null,ce(te.value,w=>(s(),_(bt,{id:w.player_id,key:w.player_id,style:{margin:"10px 0px"},player:w,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&w.player_id==e(t).activePlayerId,"show-sync-controls":w.supported_features.includes(e(Pe).SET_MEMBERS),"allow-power-control":!0,onClick:P=>ae(w),onToggleExpand:fe},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1}),I.value.length>3?(s(),_(ol,{key:0,modelValue:m.value,"onUpdate:modelValue":k[3]||(k[3]=w=>m.value=w),variant:"accordion",flat:"",class:"expansion"},{default:o(()=>[n(nl,{style:{padding:"0"}},{default:o(()=>[n(ul,null,{default:o(()=>[v("h3",null,x(f.$t("all_players")),1)]),_:1}),n(dl,{style:{padding:"0"}},{default:o(()=>[q.value?(s(),_(cl,{key:0,modelValue:u.value,"onUpdate:modelValue":k[2]||(k[2]=w=>u.value=w),placeholder:f.$t("search"),"prepend-inner-icon":"mdi-magnify",clearable:"",variant:"outlined",density:"compact","hide-details":"",style:{margin:"0 8px 24px 8px"}},null,8,["modelValue","placeholder"])):g("",!0),n(Ne,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:o(()=>[(s(!0),p(Y,null,ce(D.value,w=>(s(),_(bt,{id:w.player_id,key:w.player_id,style:{margin:"5px 0px"},player:w,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&w.player_id==e(t).activePlayerId,"show-sync-controls":w.supported_features.includes(e(Pe).SET_MEMBERS),"allow-power-control":!0,onClick:P=>ae(w),onToggleExpand:fe},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):g("",!0)])]),_:1},8,["modelValue"])):g("",!0)],64))}}),Ks=ee(js,[["__scopeId","data-v-0f675fb8"]]);function Gs(a={}){const{immediate:i=!1,onNeedRefresh:l,onOfflineReady:r,onRegistered:m,onRegisteredSW:u,onRegisterError:d}=a;let h,C,E;const B=async(I=!0)=>{await C,E?.()};async function L(){if("serviceWorker"in navigator){if(h=await la(async()=>{const{Workbox:I}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:I}},[],import.meta.url).then(({Workbox:I})=>new I("./sw.js",{scope:"./",type:"classic"})).catch(I=>{d?.(I)}),!h)return;E=()=>{h?.messageSkipWaiting()};{let I=!1;const D=()=>{I=!0,h?.addEventListener("controlling",q=>{q.isUpdate&&window.location.reload()}),l?.()};h.addEventListener("installed",q=>{typeof q.isUpdate>"u"?typeof q.isExternal<"u"&&q.isExternal?D():!I&&r?.():q.isUpdate||r?.()}),h.addEventListener("waiting",D)}h.register({immediate:i}).then(I=>{u?u("./sw.js",I):m?.(I)}).catch(I=>{d?.(I)})}}return C=L(),B}function Ws(a={}){const{immediate:i=!0,onNeedRefresh:l,onOfflineReady:r,onRegistered:m,onRegisteredSW:u,onRegisterError:d}=a,h=M(!1),C=M(!1);return{updateServiceWorker:Gs({immediate:i,onNeedRefresh(){h.value=!0,l?.()},onOfflineReady(){C.value=!0,r?.()},onRegistered:m,onRegisteredSW:u,onRegisterError:d}),offlineReady:C,needRefresh:h}}const Ys={key:0,class:"pwa-toast",role:"alert"},Xs={class:"message"},Js={key:0},Zs={key:1},er=V({__name:"ReloadPrompt",setup(a){const{offlineReady:i,needRefresh:l,updateServiceWorker:r}=Ws(),m=async()=>{i.value=!1,l.value=!1};return(u,d)=>e(i)||e(l)?(s(),p("div",Ys,[v("div",Xs,[e(i)?(s(),p("span",Js," App ready to work offline ")):(s(),p("span",Zs," New content available, click on reload button to update. "))]),e(l)?(s(),p("button",{key:0,onClick:d[0]||(d[0]=h=>e(r)())},"Reload")):g("",!0),v("button",{onClick:m},"Close")])):g("",!0)}}),tr=V({__name:"Default",setup(a){const i=Vt();return Z([()=>i.query.player,()=>Object.keys($.players).length],([l])=>{if(!l)return;const r=l.toString().toLowerCase(),m=Object.values($.players).find(u=>u.player_id.toLowerCase()===r||u.name.toLowerCase()===r)?.player_id;m&&(t.activePlayerId=m)},{immediate:!0}),Z(()=>i.query.showFullscreenPlayer,l=>{t.showFullscreenPlayer=!!l},{immediate:!0}),Z(()=>i.query.frameless,l=>{l&&(t.frameless=!0)},{immediate:!0}),(l,r)=>(s(),p(Y,null,[n(pl,null,{default:o(()=>[e(t).frameless?(s(),_(wt,{key:0})):(s(),p(Y,{key:1},[n(Ks),n(wt),n(Ns)],64))]),_:1}),n(er)],64))}}),Vr=ee(tr,[["__scopeId","data-v-07fe2722"]]);export{Vr as default};
