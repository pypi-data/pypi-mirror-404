import{T as M}from"./Toolbar-BiXTdBsZ.js";import{M as D,a as ae}from"./marquee_text_sync-04fvtBE0.js";import{M as E,H as ne,s as Y,B as le,d as x,J as oe,K as N,I as U,L as se,N as re,_ as me,j as de,e as ce,O as ue}from"./index-tCThBqvp.js";import{z as q,d as K,b as d,e as a,n as F,H as o,E as l,ak as fe,D as c,w as ye,u as m,I as u,r as z,aU as he,f as g,c as P,$ as V,a1 as r,A as ve,F as A,M as L,O,ad as ge,G as be}from"./lucide-xmSP9hQT.js";import{u as ke}from"./vue-router-DmMABOGf.js";import{M as X,b as pe}from"./MediaItemThumb-U9Re77C7.js";import{n as j,d as C,l as xe,A as we,a as W,T as $e,C as ee,_ as Ce,q as _e,D as T,$ as Ie,a0 as Te,p as Ve,r as De,Y as Be,o as te,e as Pe,b as Ae,i as J}from"./vuetify-GaNxHxlC.js";import{_ as G}from"./ProviderIcon.vue_vue_type_style_index_0_lang-B2vlszLW.js";import{C as Le}from"./Container-jslOpOlM.js";import{L as Q}from"./ListItem-C1_07nLV.js";import{u as ze}from"./vue-i18n-CJw2bq39.js";var Z={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};const ie=(e,s,y,b)=>({color:h="currentColor",size:k=24,stroke:v=2,title:p,class:H,..._},{attrs:B,slots:I})=>{let w=[...b.map($=>q(...$)),...I.default?[I.default()]:[]];return p&&(w=[q("title",p),...w]),q("svg",{...Z[e],width:k,height:k,...B,class:["tabler-icon",`tabler-icon-${s}`],...e==="filled"?{fill:h}:{"stroke-width":v??Z[e]["stroke-width"],stroke:h},..._},w)};var He=ie("outline","heart","Heart",[["path",{d:"M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572",key:"svg-0"}]]);var Re=ie("filled","heart-filled","HeartFilled",[["path",{d:"M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z",key:"svg-0"}]]);const Se=K({__name:"MenuButton",props:{icon:{default:void 0},text:{default:void 0},disabled:{type:Boolean,default:!1},width:{default:200},loading:{type:Boolean,default:!0}},emits:["click","menu"],setup(e,{emit:s}){const y=s;return(b,h)=>(a(),d("div",{style:F(`width: ${e.width}px; height: 30px;`)},[o(j,{variant:"tonal",style:F(`
            width: ${e.width}px;
            position: absolute;
            border: 1px solid #cccccc4d;
            height: 38px;
            margin-top: -1px;
            margin-left: -1px;
          `),disabled:e.loading,onClick:h[0]||(h[0]=k=>y("menu"))},{default:l(()=>[o(C,{icon:"mdi-menu-down",size:"xx-large",style:F(`width: 20px; margin-left: ${e.width-42}px`)},null,8,["style"])]),_:1},8,["style","disabled"]),o(j,{color:"primary",flat:"",disabled:e.disabled||e.loading,style:F(`width: ${e.width-40}px; justify-content: left;`),text:e.text,onClick:h[1]||(h[1]=k=>y("click"))},fe({_:2},[e.icon&&e.text.length<12||e.loading?{name:"prepend",fn:l(()=>[e.loading?(a(),c(xe,{key:0,color:"grey-lighten-5",indeterminate:""})):(a(),c(C,{key:1,icon:e.icon,size:"x-large"},null,8,["icon"]))]),key:"0"}:void 0]),1032,["disabled","style","text"])],4))}}),Ne={key:0,xs5:"","pa-5":"",style:{height:"80%","min-width":"230px","margin-top":"25px","margin-bottom":"15px","margin-right":"24px","align-content":"center","flex-shrink":"0"}},Ue={key:0},Fe={key:1},Ee={style:{"min-width":"0"}},je=["src"],Ye={style:{"padding-bottom":"10px"}},qe=["onClick"],Oe={style:{color:"accent"}},Ge={style:{color:"accent"}},Ke={style:{color:"primary"}},Xe={style:{display:"flex","flex-wrap":"wrap",gap:"8px","margin-left":"14px","padding-bottom":"10px","align-items":"center"}},We={class:"flex items-center gap-2"},Je=["innerHTML"],Qe={key:3,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},Ze=K({__name:"InfoHeader",props:{item:{}},setup(e){const s=e,y=z(!1),b=z();we();const h=z([]),k=new URL(""+new URL("info_gradient-C5d1dalX.jpg",import.meta.url).href,import.meta.url).href,v=new ae,p=ke();ye(()=>s.item,async t=>{t?(b.value=N(t,U.FANART)||N(t,U.LANDSCAPE)||N(t,U.THUMB)||k,h.value=await se([t],t)):(b.value=k,h.value=[])},{immediate:!0});const H=function(t){p.push({name:"album",params:{itemId:t.item_id,provider:t.provider}})},_=function(t){p.push({name:"artist",params:{itemId:t.item_id,provider:t.provider}})},B=function(){if(Y.prevRoute){p.back();return}const t=p.currentRoute.value.name?.toString()||"";for(const n of["artist","album","track","playlist","radio"])if(t.includes(n)){p.push({name:`${n}s`});return}p.push({name:"home"})},I=function(t=!1){const n=document.getElementById("playbutton");oe(s.item,n.getBoundingClientRect().left,n.getBoundingClientRect().top+36,void 0,t)},w=P(()=>s.item?s.item.metadata&&s.item.metadata.description?s.item.metadata.description:s.item.metadata&&s.item.metadata.copyright?s.item.metadata.copyright:("artists"in s.item&&s.item.artists.forEach(function(t){if("metadata"in t&&t.metadata.description)return t.metadata.description}),""):""),$=P(()=>re(w.value)),R=P(()=>w.value.length>800?$.value.substring(0,800)+"â€¦":$.value),S=P(()=>{if(s.item&&s.item.media_type==E.ARTIST)return N(s.item,U.LOGO)});return(t,n)=>(a(),d("div",null,[o(W,{variant:"flat",img:m(k),style:{"z-index":"0","border-radius":"0px"},height:"25vh","max-height":"500px","min-height":"340px"},{default:l(()=>[e.item?u("",!0):(a(),c($e,{key:0,indeterminate:""})),o(ee,{width:"100%",height:"100%",cover:"",class:"background-image",src:b.value,gradient:t.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)",transition:!1,eager:""},null,8,["src","gradient"]),o(M,{icon:m(he),style:{position:"absolute","z-index":"999999"},"menu-items":h.value,"enforce-overflow-menu":!0,"show-loading":!0,"icon-action":B},null,8,["icon","menu-items"]),e.item?(a(),c(Te,{key:1,style:{margin:"0",top:"55%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px",display:"flex",width:"100%"}},{default:l(()=>[t.$vuetify.display.mobile?u("",!0):(a(),d("div",Ne,[e.item.media_type&&e.item.media_type==m(E).ARTIST?(a(),d("div",Ue,[o(Ce,{size:"210",style:{"margin-bottom":"10%"}},{default:l(()=>[o(X,{item:e.item,size:"calc(100%)"},null,8,["item"])]),_:1})])):(a(),d("div",Fe,[o(X,{item:e.item,size:"calc(100%)",style:{"max-height":"256px"}},null,8,["item"])]))])),g("div",Ee,[S.value?(a(),d("img",{key:0,src:S.value,width:"auto",height:"80",style:{"padding-left":"10px"}},null,8,je)):(a(),c(_e,{key:1},{default:l(()=>[o(D,{sync:m(v)},{default:l(()=>[V(r(e.item.name),1)]),_:1},8,["sync"])]),_:1})),g("div",Ye,["version"in e.item&&e.item.version?(a(),c(T,{key:0,class:"caption"},{default:l(()=>[V(r(e.item.version)+" ",1),o(Ie,{location:"bottom"},{activator:l(({props:i})=>[m(ne)(e.item.metadata.explicit||!1)?(a(),c(C,ve({key:0},i,{icon:"mdi-alpha-e-box",width:"35"}),null,16)):u("",!0)]),default:l(()=>[g("span",null,r(t.$t("tooltip.explicit")),1)]),_:1})]),_:1})):u("",!0),"artists"in e.item&&e.item.artists?(a(),c(T,{key:1,class:"title accent--text d-flex"},{default:l(()=>[o(C,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),o(D,{sync:m(v)},{default:l(()=>[(a(!0),d(A,null,L(e.item.artists,(i,f)=>(a(),d("span",{key:i.item_id},[g("a",{style:{color:"accent"},onClick:nt=>_(i)},r(i.name),9,qe),f+1<e.item.artists.length?(a(),d("span",{key:f,style:{color:"accent"}},r(" / "))):u("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):u("",!0),"authors"in e.item&&e.item.authors.length>0?(a(),c(T,{key:2,class:"title accent--text d-flex"},{default:l(()=>[o(C,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-edit"}),o(D,{sync:m(v)},{default:l(()=>[(a(!0),d(A,null,L(e.item.authors,(i,f)=>(a(),d("span",{key:i},[g("span",Oe,r(i),1),f+1<e.item.authors.length?(a(),d("span",{key:f,style:{color:"accent"}},r(" / "))):u("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):u("",!0),"narrators"in e.item&&e.item.narrators.length>0?(a(),c(T,{key:3,class:"title accent--text d-flex"},{default:l(()=>[o(C,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-voice"}),o(D,{sync:m(v)},{default:l(()=>[(a(!0),d(A,null,L(e.item.narrators,(i,f)=>(a(),d("span",{key:i},[g("span",Ge,r(i),1),f+1<e.item.narrators.length?(a(),d("span",{key:f,style:{color:"accent"}},r(" / "))):u("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):u("",!0),"owner"in e.item&&e.item.owner?(a(),c(T,{key:4,class:"title d-flex"},{default:l(()=>[o(C,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),o(D,{sync:m(v)},{default:l(()=>[g("a",Ke,r(e.item.owner),1)]),_:1},8,["sync"])]),_:1})):u("",!0),"album"in e.item&&e.item.album?(a(),c(T,{key:5,class:"d-flex"},{default:l(()=>[o(C,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),o(D,{sync:m(v)},{default:l(()=>[g("a",{style:{color:"secondary"},onClick:n[0]||(n[0]=i=>H(e.item?.album))},r(e.item.album.name),1)]),_:1},8,["sync"])]),_:1})):u("",!0)]),g("div",Xe,[o(Se,{id:"playbutton",width:220,icon:"mdi-play-circle-outline",text:m(le)(t.$t("play"),14),disabled:!e.item,loading:m(Y).playActionInProgress,"open-menu-on-click":!m(Y).activePlayer,style:{"margin-right":"8px","margin-bottom":"4px"},onClick:I,onMenu:n[1]||(n[1]=i=>I(!0))},null,8,["text","disabled","loading","open-menu-on-click"]),g("div",We,[e.item.favorite?(a(),c(m(Re),{key:0,size:24,class:"cursor-pointer",title:t.$t("tooltip.favorite"),onClick:n[2]||(n[2]=i=>m(x).toggleFavorite(e.item))},null,8,["title"])):(a(),c(m(He),{key:1,"stroke-width":2,size:24,class:"cursor-pointer",title:t.$t("tooltip.favorite"),onClick:n[3]||(n[3]=i=>m(x).toggleFavorite(e.item))},null,8,["title"])),o(G,{domain:e.item.provider,size:25},null,8,["domain"])])]),R.value?(a(),c(T,{key:2,class:"body-2 justify-left description-text",style:{"padding-bottom":"10px",cursor:"pointer"},onClick:n[4]||(n[4]=i=>y.value=!y.value)},{default:l(()=>[g("div",{innerHTML:R.value},null,8,Je)]),_:1})):u("",!0),e.item&&e.item.metadata.genres?(a(),d("div",Qe,[(a(!0),d(A,null,L(e.item.metadata.genres.slice(0,t.$vuetify.display.mobile?15:25),i=>(a(),c(te,{key:i,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:l(()=>[V(r(i),1)]),_:2},1024))),128))])):u("",!0)])]),_:1})):u("",!0)]),_:1},8,["img"]),o(Ve,{modelValue:y.value,"onUpdate:modelValue":n[6]||(n[6]=i=>y.value=i),"max-width":"975",width:"auto"},{default:l(()=>[o(W,null,{default:l(()=>[o(De,{innerHTML:$.value},null,8,["innerHTML"]),o(Be,null,{default:l(()=>[o(j,{color:"primary",block:"",onClick:n[5]||(n[5]=i=>y.value=!1)},{default:l(()=>[V(r(t.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),vt=me(Ze,[["__scopeId","data-v-08f77937"]]),Me={style:{"margin-bottom":"10px"}},et={key:0},tt=["title","onClick"],it=["title"],at={class:"d-flex align-center ga-2"},gt=K({__name:"ProviderDetails",props:{itemDetails:{}},setup(e){const s=e,{t:y}=ze(),b=z(!1),h=z(!1),k=function(t){window.open(t,"_blank")},v=be({}),p=function(t){const n=`${t.provider_instance}.${t.item_id}`,i=v[n];if(i)i.load(),delete v[n];else{const f=new Audio(H(t.provider_instance,t.item_id));v[n]=f,f.play()}},H=function(t,n){return`${x.baseUrl}/preview?item_id=${encodeURIComponent(n)}&provider=${t}`},_=function(t){return`${t.provider_instance}://${s.itemDetails.media_type}/${t.item_id}`},B=async function(t){await ue(t)?J.success(y("uri_copied")):J.error(y("uri_copy_failed"))},I=function(t){const n=x.getProvider(t.provider_instance);if(n)return n.name;const i=x.getProviderManifest(t.provider_domain);return i?`${i.name} (${t.provider_instance})`:t.provider_instance},w=function(){b.value=!b.value},$=function(t,n){const i=t,f=[{label:y("tooltip.copy_uri"),icon:"mdi-link",action:()=>{n&&B(_(n))}}];n.url&&!n.provider_domain.startsWith("file")&&f.push({label:y("tooltip.open_provider_link"),icon:"mdi-open-in-new",action:()=>{k(n.url)}}),x.providers[n.provider_instance]?.is_streaming_provider&&f.push({label:y("remove_provider_mapping"),icon:"mdi-delete",action:async()=>{confirm(y("remove_provider_mapping_confirm"))&&await x.sendCommand("music/remove_provider_mapping",{media_type:s.itemDetails.media_type,db_id:s.itemDetails.item_id,mapping:n})}}),ce.emit("contextmenu",{items:f,posX:i.clientX,posY:i.clientY})},R=function(){confirm(y("search_all_providers_confirm"))&&(h.value=!0,x.sendCommand("music/match_providers",{media_type:s.itemDetails.media_type,db_id:s.itemDetails.item_id}).finally(()=>{h.value=!1}))},S=P(()=>[{label:"search_all_providers",icon:"mdi-database-search",action:R,overflowAllowed:!1,disabled:h.value,hide:s.itemDetails.provider!="library"||!x.hasStreamingProviders.value},{label:"tooltip.collapse_expand",icon:b.value?"mdi-chevron-up":"mdi-chevron-down",action:w,overflowAllowed:!1}]);return(t,n)=>(a(),d("section",Me,[o(M,{title:t.$t("mapped_providers"),"menu-items":S.value,onTitleClicked:w},null,8,["title","menu-items"]),o(Pe),b.value?(a(),c(Le,{key:0},{default:l(()=>[o(Ae,null,{default:l(()=>[(a(!0),d(A,null,L(e.itemDetails?.provider_mappings,i=>(a(),c(Q,{key:i.provider_instance,disabled:!i.available||!m(x).getProvider(i.provider_instance),"show-menu-btn":"",onMenu:O(f=>$(f,i),["stop"])},{prepend:l(()=>[o(G,{domain:i.provider_domain,size:30},null,8,["domain"])]),title:l(()=>[V(r(I(i))+" ",1),i.in_library?(a(),c(te,{key:0,size:"x-small",density:"compact",class:"ml-2",title:t.$t("tooltip.in_provider_library")},{default:l(()=>[V(r(t.$t("library")),1)]),_:1},8,["title"])):u("",!0)]),subtitle:l(()=>[e.itemDetails.media_type==m(E).TRACK&&i.audio_format?(a(),d("span",et,r(i.audio_format.content_type)+" | "+r(i.audio_format.sample_rate/1e3)+"kHz/"+r(i.audio_format.bit_depth)+" bits | ",1)):u("",!0),i.url&&!i.provider_domain.startsWith("file")?(a(),d("a",{key:1,style:{opacity:"0.4"},title:t.$t("tooltip.open_provider_link"),onClick:O(f=>k(i.url),["prevent"])},r(_(i)),9,tt)):(a(),d("span",{key:2,style:{opacity:"0.4"},title:t.$t("copy_uri")},r(_(i)),9,it))]),append:l(()=>[i.audio_format&&i.audio_format.bit_depth>16?(a(),c(ee,{key:0,src:m(pe),width:"30",class:ge(t.$vuetify.theme.current.dark?"hiresicondark":"hiresicon")},null,8,["src","class"])):u("",!0),g("div",at,[m(de)("bp1")&&e.itemDetails.media_type==m(E).TRACK?(a(),c(j,{key:0,variant:"plain",icon:v[`${i.provider_instance}.${i.item_id}`]?"mdi-pause":"mdi-play-circle",title:t.$t("tooltip.play_sample"),onClick:f=>p(i)},null,8,["icon","title","onClick"])):u("",!0)])]),_:2},1032,["disabled","onMenu"]))),128)),e.itemDetails.provider=="library"?(a(),c(Q,{key:0,"show-menu-btn":"",onMenu:n[0]||(n[0]=O(i=>$(i,{provider_instance:"library",provider_domain:"library",item_id:e.itemDetails.item_id,available:!0}),["stop"]))},{prepend:l(()=>[o(G,{domain:"library",size:30})]),title:l(()=>[V(r(t.$t("music_assistant_library")),1)]),subtitle:l(()=>[g("span",null,"library://"+r(e.itemDetails.media_type)+"/"+r(e.itemDetails.item_id),1)]),_:1})):u("",!0)]),_:1})]),_:1})):u("",!0)]))}});export{vt as I,gt as _};
