import{C as Q}from"./Container-jslOpOlM.js";import{L as ee}from"./ListItem-C1_07nLV.js";import{F as J}from"./FacetedFilter-DcaRgg5A.js";import{_ as j}from"./ProviderIcon.vue_vue_type_style_index_0_lang-B2vlszLW.js";import{e as te,f as ae,g as se,a as le,b as re,c as ie,_ as oe}from"./index-DdFPnL48.js";import{$ as b,d as s,Z as ne,m as _,_ as B,P as z,s as de,E as pe,a5 as ue,a3 as ce,e as me}from"./index-tCThBqvp.js";import{u as K,b as ye}from"./vue-router-DmMABOGf.js";import{d as x,w as S,b as E,e as p,H as n,f as m,u as i,E as d,r as M,aq as ve,c as v,D as k,$ as F,a1 as g,I as U,O as N,F as X,M as H,b0 as _e,a$ as fe,a0 as ge,aK as be,i as Pe,ad as he}from"./lucide-xmSP9hQT.js";import{q as ke,r as $e,n as D,d as Y,a as Ce,b as Re,j as Ee,k as Ae}from"./vuetify-GaNxHxlC.js";import{_ as Te}from"./index-DQNN_TJ6.js";import{S as Me}from"./constants-CXMxJR4j.js";import"./index-kQIztB-E.js";import"./Button-CA4MzAsM.js";import"./index-BEkdVDm7.js";import"./utils-CDN07tui.js";import"./reka-ui-jpwHxpje.js";import"./vueuse-CVzU65UW.js";import"./index-B_jtOnfb.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-tIHjrLI9.js";import"./qrcode-Be0W47IT.js";import"./marked-C0Rlrcoy.js";import"./color-BTziYnFN.js";import"./vue-i18n-CJw2bq39.js";/* empty css            */import"./swiper-3t6jdvul.js";const we={class:"filters-container"},Le={class:"d-flex ga-2 filter-buttons"},Ve=x({__name:"PlayerFilters",emits:["update:search","update:providers","update:types"],setup(I,{emit:T}){const u=K(),c=ye(),y=M(""),P=M([]),h=M([]);let $=null,o=null,f=null;const C=v(()=>Object.values(s.providers).filter(l=>l.available&&l.type===ne.PLAYER).map(l=>({instance_id:l.instance_id,domain:l.domain,name:l.name||s.providerManifests[l.domain]?.name||l.domain})).sort((l,A)=>l.name.localeCompare(A.name))),w=v(()=>[{title:b("player_type.player"),value:_.PLAYER},{title:b("player_type.group"),value:_.GROUP},{title:b("player_type.stereo_pair"),value:_.STEREO_PAIR}]),q=v(()=>C.value.map(r=>({label:r.name,value:r.instance_id,icon:j,domain:r.domain}))),L=v(()=>w.value.map(r=>({label:r.title,value:r.value}))),V=T,O=function(){if(c.query.search&&(y.value=c.query.search),c.query.providers){const r=c.query.providers;P.value=r.split(",")}if(c.query.types){const r=c.query.types;h.value=r.split(",")}};return S(y,r=>{V("update:search",r),$&&clearTimeout($),$=setTimeout(()=>{const l={...c.query};r?l.search=r:delete l.search,u.replace({query:l})},750)}),S(P,r=>{V("update:providers",r),o&&clearTimeout(o),o=setTimeout(()=>{const l={...c.query};r.length>0?l.providers=r.join(","):delete l.providers,u.replace({query:l})},750)},{deep:!0}),S(h,r=>{V("update:types",r),f&&clearTimeout(f),f=setTimeout(()=>{const l={...c.query};r.length>0?l.types=r.join(","):delete l.types,u.replace({query:l})},750)},{deep:!0}),O(),(r,l)=>(p(),E("div",we,[n(i(te),{class:"search-field"},{default:d(()=>[n(i(ae),{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=A=>y.value=A),placeholder:i(b)("search")},null,8,["modelValue","placeholder"]),n(i(se),null,{default:d(()=>[n(i(ve))]),_:1})]),_:1}),m("div",Le,[n(J,{modelValue:P.value,"onUpdate:modelValue":l[1]||(l[1]=A=>P.value=A),title:i(b)("settings.player_provider"),options:q.value},null,8,["modelValue","title","options"]),n(J,{modelValue:h.value,"onUpdate:modelValue":l[2]||(l[2]=A=>h.value=A),title:i(b)("settings.player_type_label"),options:L.value},null,8,["modelValue","title","options"])])]))}}),Oe=B(Ve,[["__scopeId","data-v-0005c3a2"]]),Ue={class:"provider-name"},Ye={key:0,class:"player-type-label"},Ie=x({__name:"SettingsPlayerCard",props:{playerConfig:{}},emits:["click","menu"],setup(I,{emit:T}){const u=I,c=T,y=v(()=>s.players[u.playerConfig.player_id]),P=v(()=>y.value?.available??!1),h=v(()=>s.getProviderManifest(u.playerConfig.provider)?.domain||u.playerConfig.provider),$=v(()=>s.getProviderManifest(u.playerConfig.provider)?.name||u.playerConfig.provider),o=v(()=>u.playerConfig.name||y.value?.name||u.playerConfig.default_name||u.playerConfig.player_id),f=v(()=>y.value?.type??_.PLAYER),C=v(()=>b(`player_type.${f.value}`)),w=v(()=>({[_.PLAYER]:"mdi-speaker",[_.GROUP]:"mdi-speaker-multiple",[_.STEREO_PAIR]:"mdi-speaker-wireless"})[f.value]||"mdi-speaker"),q=v(()=>f.value===_.PLAYER?null:b(`player_type.${f.value}`)),L=()=>{c("click",u.playerConfig)},V=O=>{c("menu",O,u.playerConfig)};return(O,r)=>(p(),k(Ce,{class:"flex-fill rounded-lg player-card","min-height":"200px",onClick:L},{prepend:d(()=>[n(j,{domain:h.value,size:50,class:"listitem-media-thumb",style:{"margin-top":"5px","margin-bottom":"5px"}},null,8,["domain"])]),append:d(()=>[I.playerConfig.enabled?P.value?U("",!0):(p(),k(D,{key:1,variant:"text",size:"small",icon:"",title:i(b)("settings.player_not_available"),onClick:r[1]||(r[1]=N(()=>{},["stop"]))},{default:d(()=>[n(Y,{icon:"mdi-timer-sand"})]),_:1},8,["title"])):(p(),k(D,{key:0,variant:"text",size:"small",icon:"",title:i(b)("settings.player_disabled"),onClick:r[0]||(r[0]=N(()=>{},["stop"]))},{default:d(()=>[n(Y,{color:"grey"},{default:d(()=>[...r[3]||(r[3]=[F("mdi-cancel",-1)])]),_:1})]),_:1},8,["title"])),n(D,{variant:"text",size:"small",icon:"",title:C.value,onClick:r[2]||(r[2]=N(()=>{},["stop"]))},{default:d(()=>[n(Y,{icon:w.value},null,8,["icon"])]),_:1},8,["title"]),n(D,{icon:"mdi-dots-vertical",size:"small",variant:"text",onClick:N(V,["stop"])})]),default:d(()=>[n(ke,null,{default:d(()=>[F(g(o.value),1)]),_:1}),n($e,{class:"player-description"},{default:d(()=>[m("div",Ue,g($.value),1),q.value?(p(),E("div",Ye,g(q.value),1)):U("",!0)]),_:1})]),_:1}))}}),qe=B(Ie,[["__scopeId","data-v-65c70472"]]),ze={class:"provider-list-container px-6 pt-2 pb-6 flex-1 min-h-0 overflow-y-auto"},Ge={key:0,class:"provider-list"},Se=["onClick"],Ne={class:"provider-content"},De={class:"provider-name"},Fe={class:"provider-description"},je={key:1,class:"empty-state"},Be={class:"empty-title"},xe={class:"empty-message"},We=x({__name:"AddPlayerGroupDialog",props:{show:{type:Boolean,default:!1}},emits:["update:show"],setup(I,{emit:T}){const u=T,c=K(),y=v(()=>Object.values(s.providers).filter(o=>o.available&&(o.supported_features.includes(z.CREATE_GROUP_PLAYER)||o.supported_features.includes(z.SYNC_PLAYERS))&&Object.values(s.players).some(f=>f.provider===o.instance_id)).map(o=>({instance_id:o.instance_id,domain:o.domain,name:o.name||s.providerManifests[o.domain]?.name||o.domain,description:s.providerManifests[o.domain]?.description||b("settings.playerprovider")})).sort((o,f)=>o.name.localeCompare(f.name))),P=function(o){c.push(`/settings/addgroup/${o}`),$()},h=o=>{de.dialogActive=o,u("update:show",o)},$=function(){u("update:show",!1)};return S(()=>s.providers,()=>{},{immediate:!0}),(o,f)=>(p(),k(i(oe),{open:I.show,"onUpdate:open":h},{default:d(()=>[n(i(le),{class:"add-player-group-dialog max-w-[800px] h-[60vh] max-h-[60vh] flex flex-col p-0"},{default:d(()=>[n(i(re),{class:"px-6 pt-6 pb-4 flex-shrink-0"},{default:d(()=>[n(i(ie),null,{default:d(()=>[F(g(i(b)("settings.add_group_player")),1)]),_:1})]),_:1}),m("div",ze,[y.value.length>0?(p(),E("div",Ge,[(p(!0),E(X,null,H(y.value,C=>(p(),E("div",{key:C.instance_id,class:"provider-item",onClick:w=>P(C.instance_id)},[n(j,{domain:C.domain,size:40,class:"provider-icon"},null,8,["domain"]),m("div",Ne,[m("div",De,g(C.name),1),m("div",Fe,g(C.description),1)]),n(i(fe),{class:"h-4 w-4 flex-shrink-0"})],8,Se))),128))])):(p(),E("div",je,[n(i(_e),{class:"empty-icon"}),m("div",Be,g(i(b)("no_content")),1),m("div",xe,g(i(b)("settings.no_group_providers")),1)]))])]),_:1})]),_:1},8,["open"]))}}),Xe=B(We,[["__scopeId","data-v-83a27885"]]),He={class:"players-header w-100"},Ke={class:"header-actions"},Ze={class:"pl-5 font-weight-medium"},Je={class:"player-name"},Qe={class:"player-meta"},et={class:"provider-name"},tt={key:0,class:"player-type-badge"},at={class:"player-status-icons"},st={key:2,class:"empty-state"},lt={class:"empty-title"},rt={class:"empty-message"},it=x({__name:"Players",setup(I){const T=K(),u=Pe("playersViewMode"),c=v(()=>u.viewMode.value),y=M([]),P=M(""),h=M([]),$=M([]),o=M(!1),f=s.subscribe_multi([pe.PLAYER_CONFIG_UPDATED],()=>{w()});ge(f);const C=v(()=>Object.values(s.providers).filter(e=>e.available&&(e.supported_features.includes(z.CREATE_GROUP_PLAYER)||e.supported_features.includes(z.SYNC_PLAYERS))).sort((e,t)=>(e.name||s.providerManifests[e.domain].name).toUpperCase()>(t.name||s.providerManifests[t.domain].name).toUpperCase()?1:-1)),w=async function(){y.value=(await s.getPlayerConfigs(void 0,!1,!1,!0)).filter(e=>!ue(e)).sort((e,t)=>l(e).localeCompare(l(t)))},q=function(e){s.removePlayer(e).then(()=>{y.value=y.value.filter(t=>t.player_id!=e)})},L=function(e,t){s.getProvider(t)&&T.push(`/settings/editplayer/${e}`)},V=function(e){T.push(`/settings/editplayer/${e}/dsp`)},O=function(e){const t=s.players[e];return t?t.type===_.GROUP?t.player_id.startsWith(Me)||s.getProvider(t.provider)?.supported_features.includes(z.REMOVE_GROUP_PLAYER):s.getProvider(t.provider)?.supported_features.includes(z.REMOVE_PLAYER):!0},r=function(e){e.enabled=!e.enabled,s.savePlayerConfig(e.player_id,{enabled:e.enabled})},l=function(e){return e.name||s.players[e.player_id]?.name||e.default_name||e.player_id},A=function(e){return{[_.PLAYER]:"mdi-speaker",[_.GROUP]:"mdi-speaker-multiple",[_.STEREO_PAIR]:"mdi-speaker-wireless"}[e||_.PLAYER]||"mdi-speaker"},Z=function(e,t){const a=[{label:"settings.configure",labelArgs:[],action:()=>{L(t.player_id,t.provider)},icon:"mdi-cog",disabled:!s.getProvider(t.provider)},{label:"open_dsp_settings",labelArgs:[],action:()=>{V(t.player_id)},icon:"mdi-equalizer",hide:s.players[t.player_id]?.type===_.GROUP},{label:t.enabled?"settings.disable":"settings.enable",labelArgs:[],action:()=>{r(t)},icon:"mdi-cancel",hide:!s.getProvider(t.provider)},{label:"settings.documentation",labelArgs:[],action:()=>{ce(s.getProviderManifest(t.provider)?.documentation||"")},icon:"mdi-bookshelf",disabled:!s.getProviderManifest(t.provider)?.documentation},{label:"settings.delete",labelArgs:[],action:()=>{q(t.player_id)},icon:"mdi-delete",hide:!O(t.player_id)}];me.emit("contextmenu",{items:a,posX:e.clientX,posY:e.clientY})},G=function(){let e=[...y.value];if(P.value){const t=P.value.toLowerCase();e=e.filter(a=>{const R=l(a).toLowerCase(),W=(s.getProviderManifest(a.provider)?.name||a.provider).toLowerCase();return R.includes(t)||W.includes(t)})}return h.value.length>0&&(e=e.filter(t=>{const a=s.getProvider(t.provider);return a?h.value.includes(a.instance_id):!1})),$.value.length>0&&(e=e.filter(t=>{const R=s.players[t.player_id]?.type??_.PLAYER;return $.value.includes(R)})),e.sort((t,a)=>l(t).localeCompare(l(a)))};return S(()=>s.players,e=>{e&&w()},{immediate:!0}),(e,t)=>(p(),E("div",null,[m("div",He,[n(Oe,{"onUpdate:search":t[0]||(t[0]=a=>P.value=a),"onUpdate:providers":t[1]||(t[1]=a=>h.value=a),"onUpdate:types":t[2]||(t[2]=a=>$.value=a)}),m("div",Ke,[C.value.length>0?(p(),k(i(Te),{key:0,class:"add-player-group-btn",onClick:t[3]||(t[3]=a=>o.value=!0)},{default:d(()=>[n(i(be),{class:"size-4"}),F(" "+g(e.$t("settings.add_group_player")),1)]),_:1})):U("",!0)])]),m("div",Ze,g(e.$t("settings.players_total",[G().length,G().length!==1?"s":""])),1),n(Q,{variant:c.value==="list"?"default":"panel",class:"mt-4"},{default:d(()=>[c.value==="list"?(p(),k(Re,{key:0,class:"players-list"},{default:d(()=>[(p(!0),E(X,null,H(G(),a=>(p(),k(ee,{key:a.player_id,link:"","show-menu-btn":!0,class:he({"player-disabled":!a.enabled,"player-unavailable":!i(s).players[a.player_id]?.available}),onClick:R=>L(a.player_id,a.provider),onMenu:R=>Z(R,a)},{prepend:d(()=>[n(j,{domain:i(s).getProviderManifest(a.provider)?.domain||a.provider,size:40,class:"player-icon"},null,8,["domain"])]),title:d(()=>[m("div",Je,g(l(a)),1)]),subtitle:d(()=>[m("div",Qe,[m("span",et,g(i(s).getProviderManifest(a.provider)?.name||a.provider),1),i(s).players[a.player_id]?.type&&i(s).players[a.player_id]?.type!==i(_).PLAYER?(p(),E("span",tt,g(e.$t(`player_type.${i(s).players[a.player_id]?.type}`)),1)):U("",!0)])]),append:d(()=>[m("div",at,[a.enabled?i(s).players[a.player_id]?.available?U("",!0):(p(),k(Y,{key:1,icon:"mdi-timer-sand",size:"20",color:"grey",title:e.$t("settings.player_not_available")},null,8,["title"])):(p(),k(Y,{key:0,icon:"mdi-cancel",size:"20",color:"grey",title:e.$t("settings.player_disabled")},null,8,["title"])),i(s).players[a.player_id]?.type?(p(),k(Y,{key:2,icon:A(i(s).players[a.player_id]?.type),size:"20",color:"grey",title:e.$t(`player_type.${i(s).players[a.player_id]?.type}`)},null,8,["icon","title"])):U("",!0)])]),_:2},1032,["class","onClick","onMenu"]))),128))]),_:1})):(p(),k(Ee,{key:1},{default:d(()=>[(p(!0),E(X,null,H(G(),a=>(p(),k(Ae,{key:a.player_id,cols:"12",md:"6",lg:"4",class:"d-flex"},{default:d(()=>[n(qe,{"player-config":a,onClick:t[4]||(t[4]=R=>L(R.player_id,R.provider)),onMenu:t[5]||(t[5]=(R,W)=>Z(R,W))},null,8,["player-config"])]),_:2},1024))),128))]),_:1})),G().length===0?(p(),E("div",st,[n(Y,{icon:"mdi-speaker-off",size:"64",class:"empty-icon"}),m("div",lt,g(e.$t("no_content")),1),m("div",rt,g(e.$t("no_content_filter")),1)])):U("",!0)]),_:1},8,["variant"]),n(Xe,{show:o.value,"onUpdate:show":t[6]||(t[6]=a=>o.value=a)},null,8,["show"])]))}}),Vt=B(it,[["__scopeId","data-v-c1ff659b"]]);export{Vt as default};
