(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55824,16370,e=>{"use strict";var t=e.i(43476);function s({title:e,description:s,actions:r}){return(0,t.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-1",children:e}),s&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:s})]}),r&&(0,t.jsx)("div",{className:"flex gap-2",children:r})]})}e.s(["PageHeader",()=>s],16370),e.s([],55824)},43668,e=>{"use strict";var t=e.i(47167);let s="pygubernator_settings",r={apiServer:{url:t.default.env.NEXT_PUBLIC_API_URL||"http://localhost:8000"}};function i(){try{let e=localStorage.getItem(s);if(e){let t=JSON.parse(e);return{...r,...t,apiServer:{...r.apiServer,...t.apiServer}}}}catch(e){}return r}function a(e){localStorage.setItem(s,JSON.stringify(e))}function n(){return i().apiServer.url||r.apiServer.url}e.s(["getApiBaseUrl",()=>n,"getSettings",()=>i,"saveSettings",()=>a])},9165,95113,e=>{"use strict";var t=e.i(43668);class s extends Error{status;response;constructor(e,t,s){super(e),this.status=t,this.response=s,this.name="ApiError"}}async function r(e,r){let i=`${(0,t.getApiBaseUrl)()}${e}`,a=await fetch(i,{...r,headers:{"Content-Type":"application/json",...r?.headers}});if(!a.ok){let e;try{e=await a.json()}catch{e={detail:a.statusText}}throw new s("string"==typeof e.detail?e.detail:e.error??`Request failed: ${a.status}`,a.status,e)}let n=a.headers.get("content-type");return n?.includes("application/json")?a.json():a.text()}async function i(e){return r("/api/v1/validate",{method:"POST",body:JSON.stringify({config:e})})}async function a(e,t,s,i){return r("/api/v1/process",{method:"POST",body:JSON.stringify({config:e,current_state:t,trigger:s,context:i??{}})})}e.s(["ApiError",()=>s,"processEvent",()=>a,"validateConfig",()=>i],9165);var n=e.i(43476);let l=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var c=e.i(22016),d=e.i(75157);function o({error:e,title:r="Error",className:i}){if(!e)return null;let a=(e instanceof s,e.message),o=a.includes("Unable to connect")||a.includes("Failed to fetch")||e instanceof s&&0===e.status,u=o?(0,t.getApiBaseUrl)():null;return(0,n.jsx)("div",{className:(0,d.cn)("rounded-lg border border-destructive/50 bg-destructive/10 p-4",i),children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(l,{className:"h-5 w-5 text-destructive flex-shrink-0 mt-0.5"}),(0,n.jsxs)("div",{className:"ml-3 flex-1",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-destructive",children:r}),(0,n.jsx)("p",{className:"mt-2 text-sm text-destructive/90",children:a}),o&&u&&(0,n.jsxs)("div",{className:"mt-4 p-3 bg-white/50 rounded border border-destructive/20",children:[(0,n.jsx)("p",{className:"text-xs font-medium mb-2",children:"To fix:"}),(0,n.jsxs)("ol",{className:"text-xs text-slate-600 space-y-1 list-decimal list-inside",children:[(0,n.jsxs)("li",{children:["Start API: ",(0,n.jsx)("code",{className:"px-1.5 py-0.5 bg-slate-100 rounded",children:"uvicorn pygubernator.api.main:app --port 8000"})]}),(0,n.jsxs)("li",{children:["Or set API URL in ",(0,n.jsx)(c.default,{href:"/settings/",className:"text-indigo-600 hover:underline",children:"Settings"})]})]}),(0,n.jsxs)("p",{className:"mt-2 text-xs text-slate-500",children:["API URL: ",(0,n.jsx)("code",{className:"px-1 py-0.5 bg-slate-100 rounded",children:u})]})]})]})]})})}e.s(["default",()=>o],95113)},68197,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(55824);var r=e.i(16370),i=e.i(15288),a=e.i(19455),n=e.i(9165),l=e.i(95113);let c=JSON.stringify({meta:{machine_name:"my_fsm",version:"1.0"},states:[{name:"START",type:"initial"},{name:"END",type:"terminal"}],transitions:[{trigger:"go",source:"START",dest:"END"}]},null,2);function d(){let[e,d]=(0,s.useState)(c),[o,u]=(0,s.useState)(null),[x,m]=(0,s.useState)(null),[h,p]=(0,s.useState)(!1),g=(0,s.useCallback)(async()=>{let t;m(null),u(null);try{t=JSON.parse(e)}catch(e){m(Error("Invalid JSON"));return}p(!0);try{let e=await (0,n.validateConfig)(t);u({valid:e.valid,errors:e.errors})}catch(e){m(e instanceof n.ApiError?e:Error(String(e)))}finally{p(!1)}},[e]);return(0,t.jsx)("div",{className:"min-h-screen bg-background",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,t.jsx)(r.PageHeader,{title:"FSM Builder",description:"Edit FSM config as JSON. Validate against the API to check states and transitions.",actions:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Button,{variant:"outline",onClick:()=>{d(c),u(null),m(null)},children:"Reset"}),(0,t.jsx)(a.Button,{onClick:g,disabled:h,children:h?"Validating...":"Validate"})]})}),x&&(0,t.jsx)(l.default,{error:x,className:"mt-4"}),o&&(0,t.jsxs)(i.Card,{className:"mt-4",children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{className:o.valid?"text-emerald-600":"text-destructive",children:o.valid?"Valid":"Invalid"}),(0,t.jsx)(i.CardDescription,{children:o.valid?"Config is valid. You can use it in Visualization or Process.":"Fix the errors below and validate again."})]}),o.errors.length>0&&(0,t.jsx)(i.CardContent,{children:(0,t.jsx)("ul",{className:"list-disc list-inside text-sm text-destructive space-y-1",children:o.errors.map((e,s)=>(0,t.jsx)("li",{children:e},s))})})]}),(0,t.jsxs)(i.Card,{className:"mt-6",children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{children:"Config (JSON)"}),(0,t.jsx)(i.CardDescription,{children:"meta, states (name, type: initial|stable|terminal|error), transitions (trigger, source, dest, guards?, actions?)"})]}),(0,t.jsx)(i.CardContent,{children:(0,t.jsx)("textarea",{className:"w-full h-[400px] font-mono text-sm rounded-md border border-input bg-background px-3 py-2 focus:outline-none focus:ring-2 focus:ring-ring",value:e,onChange:e=>d(e.target.value),spellCheck:!1})})]})]})})}e.s(["default",()=>d])}]);