(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34740,e=>{"use strict";var t=e.i(43476),r=e.i(71645);e.i(55824);var a=e.i(16370),i=e.i(15288),n=e.i(19455);function s(e){return e.replace(/[[\]"#;]/g,e=>({"[":"\\[","]":"\\]",'"':'\\"',"#":"\\#",";":"\\;"})[e]??e)}var o=e.i(79486),d=e.i(83996),l=e.i(57736),c=e.i(93016);e.i(54802),e.i(20502),e.i(7983),e.i(2256),e.i(33448);var m=e.i(80262),u=e.i(95923),g=e.i(80926),f=e.i(71206),p=e.i(40524);e.i(47716);var _=e.i(23685),h="comm",y="rule",w="decl",b=Math.abs,x=String.fromCharCode;function v(e,t,r){return e.replace(t,r)}function C(e,t){return 0|e.charCodeAt(t)}function D(e,t,r){return e.slice(t,r)}function S(e){return e.length}function A(e,t){return t.push(e),e}var k=1,E=1,T=0,L=0,j=0,$="";function M(e,t,r,a,i,n,s,o){return{value:e,root:t,parent:r,type:a,props:i,children:n,line:k,column:E,length:s,return:"",siblings:o}}function N(){return j=L<T?C($,L++):0,E++,10===j&&(E=1,k++),j}function I(){return C($,L)}function F(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function R(e){var t,r;return(t=L-1,r=function e(t){for(;N();)switch(j){case t:return L;case 34:case 39:34!==t&&39!==t&&e(j);break;case 40:41===t&&e(t);break;case 92:N()}return L}(91===e?e+2:40===e?e+1:e),D($,t,r)).trim()}function z(e,t,r,a,i,n,s,o,d,l,c,m){for(var u=i-1,g=0===i?n:[""],f=g.length,p=0,_=0,h=0;p<a;++p)for(var w=0,x=D(e,u+1,u=b(_=s[p])),C=e;w<f;++w)(C=(_>0?g[w]+" "+x:v(x,/&\f/g,g[w])).trim())&&(d[h++]=C);return M(e,t,r,0===i?y:o,d,l,c,m)}function O(e,t,r,a,i){return M(e,t,r,w,D(e,0,a),D(e,a+1,-1),a,i)}function P(e,t){for(var r="",a=0;a<e.length;a++)r+=t(e[a],a,e,t)||"";return r}function V(e,t,r,a){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case"@namespace":case w:return e.return=e.return||e.value;case h:return"";case"@keyframes":return e.return=e.value+"{"+P(e.children,a)+"}";case y:if(!S(e.value=e.props.join(",")))return""}return S(r=P(e.children,a))?e.return=e.value+"{"+r+"}":""}var q=e.i(24154),B=e.i(41241),G={id:"c4",detector:(0,f.__name)(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),loader:(0,f.__name)(async()=>{let{diagram:t}=await e.A(31892);return{id:"c4",diagram:t}},"loader")},H="flowchart",U=(0,f.__name)((e,t)=>t?.flowchart?.defaultRenderer!=="dagre-wrapper"&&t?.flowchart?.defaultRenderer!=="elk"&&/^\s*graph/.test(e),"detector"),J=(0,f.__name)(async()=>{let{diagram:t}=await e.A(24476);return{id:H,diagram:t}},"loader"),K={id:H,detector:U,loader:J},W="flowchart-v2",Y=(0,f.__name)((e,t)=>t?.flowchart?.defaultRenderer!=="dagre-d3"&&(t?.flowchart?.defaultRenderer==="elk"&&(t.layout="elk"),!!/^\s*graph/.test(e)&&t?.flowchart?.defaultRenderer==="dagre-wrapper"||/^\s*flowchart/.test(e)),"detector"),Q=(0,f.__name)(async()=>{let{diagram:t}=await e.A(24476);return{id:W,diagram:t}},"loader"),Z={id:W,detector:Y,loader:Q},X={id:"er",detector:(0,f.__name)(e=>/^\s*erDiagram/.test(e),"detector"),loader:(0,f.__name)(async()=>{let{diagram:t}=await e.A(98583);return{id:"er",diagram:t}},"loader")},ee="gitGraph",et=(0,f.__name)(e=>/^\s*gitGraph/.test(e),"detector"),er=(0,f.__name)(async()=>{let{diagram:t}=await e.A(39803);return{id:ee,diagram:t}},"loader"),ea={id:ee,detector:et,loader:er},ei="gantt",en=(0,f.__name)(e=>/^\s*gantt/.test(e),"detector"),es=(0,f.__name)(async()=>{let{diagram:t}=await e.A(62316);return{id:ei,diagram:t}},"loader"),eo={id:ei,detector:en,loader:es},ed="info",el=(0,f.__name)(e=>/^\s*info/.test(e),"detector"),ec=(0,f.__name)(async()=>{let{diagram:t}=await e.A(43177);return{id:ed,diagram:t}},"loader"),em={id:ed,detector:el,loader:ec},eu={id:"pie",detector:(0,f.__name)(e=>/^\s*pie/.test(e),"detector"),loader:(0,f.__name)(async()=>{let{diagram:t}=await e.A(67571);return{id:"pie",diagram:t}},"loader")},eg="quadrantChart",ef=(0,f.__name)(e=>/^\s*quadrantChart/.test(e),"detector"),ep=(0,f.__name)(async()=>{let{diagram:t}=await e.A(66991);return{id:eg,diagram:t}},"loader"),e_={id:eg,detector:ef,loader:ep},eh="xychart",ey=(0,f.__name)(e=>/^\s*xychart(-beta)?/.test(e),"detector"),ew=(0,f.__name)(async()=>{let{diagram:t}=await e.A(95768);return{id:eh,diagram:t}},"loader"),eb={id:eh,detector:ey,loader:ew},ex="requirement",ev=(0,f.__name)(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),eC=(0,f.__name)(async()=>{let{diagram:t}=await e.A(72270);return{id:ex,diagram:t}},"loader"),eD={id:ex,detector:ev,loader:eC},eS="sequence",eA=(0,f.__name)(e=>/^\s*sequenceDiagram/.test(e),"detector"),ek=(0,f.__name)(async()=>{let{diagram:t}=await e.A(32135);return{id:eS,diagram:t}},"loader"),eE={id:eS,detector:eA,loader:ek},eT="class",eL=(0,f.__name)((e,t)=>t?.class?.defaultRenderer!=="dagre-wrapper"&&/^\s*classDiagram/.test(e),"detector"),ej=(0,f.__name)(async()=>{let{diagram:t}=await e.A(28891);return{id:eT,diagram:t}},"loader"),e$={id:eT,detector:eL,loader:ej},eM="classDiagram",eN=(0,f.__name)((e,t)=>!!/^\s*classDiagram/.test(e)&&t?.class?.defaultRenderer==="dagre-wrapper"||/^\s*classDiagram-v2/.test(e),"detector"),eI=(0,f.__name)(async()=>{let{diagram:t}=await e.A(85144);return{id:eM,diagram:t}},"loader"),eF={id:eM,detector:eN,loader:eI},eR="state",ez=(0,f.__name)((e,t)=>t?.state?.defaultRenderer!=="dagre-wrapper"&&/^\s*stateDiagram/.test(e),"detector"),eO=(0,f.__name)(async()=>{let{diagram:t}=await e.A(81963);return{id:eR,diagram:t}},"loader"),eP={id:eR,detector:ez,loader:eO},eV="stateDiagram",eq=(0,f.__name)((e,t)=>!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&t?.state?.defaultRenderer==="dagre-wrapper"),"detector"),eB=(0,f.__name)(async()=>{let{diagram:t}=await e.A(50875);return{id:eV,diagram:t}},"loader"),eG={id:eV,detector:eq,loader:eB},eH="journey",eU=(0,f.__name)(e=>/^\s*journey/.test(e),"detector"),eJ=(0,f.__name)(async()=>{let{diagram:t}=await e.A(88594);return{id:eH,diagram:t}},"loader"),eK={id:eH,detector:eU,loader:eJ},eW={draw:(0,f.__name)((e,t,r)=>{f.log.debug("rendering svg for syntax error\n");let a=(0,d.selectSvgElement)(t),i=a.append("g");a.attr("viewBox","0 0 2412 512"),(0,g.configureSvgSize)(a,100,512,!0),i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw")},eY={db:{},renderer:eW,parser:{parse:(0,f.__name)(()=>{},"parse")}},eQ="flowchart-elk",eZ=(0,f.__name)((e,t={})=>!!(/^\s*flowchart-elk/.test(e)||/^\s*(flowchart|graph)/.test(e)&&t?.flowchart?.defaultRenderer==="elk")&&(t.layout="elk",!0),"detector"),eX=(0,f.__name)(async()=>{let{diagram:t}=await e.A(24476);return{id:eQ,diagram:t}},"loader"),e0={id:eQ,detector:eZ,loader:eX},e1="timeline",e2=(0,f.__name)(e=>/^\s*timeline/.test(e),"detector"),e6=(0,f.__name)(async()=>{let{diagram:t}=await e.A(50608);return{id:e1,diagram:t}},"loader"),e5={id:e1,detector:e2,loader:e6},e4="mindmap",e3=(0,f.__name)(e=>/^\s*mindmap/.test(e),"detector"),e8=(0,f.__name)(async()=>{let{diagram:t}=await e.A(79956);return{id:e4,diagram:t}},"loader"),e7={id:e4,detector:e3,loader:e8},e9="kanban",te=(0,f.__name)(e=>/^\s*kanban/.test(e),"detector"),tt=(0,f.__name)(async()=>{let{diagram:t}=await e.A(47048);return{id:e9,diagram:t}},"loader"),tr={id:e9,detector:te,loader:tt},ta="sankey",ti=(0,f.__name)(e=>/^\s*sankey(-beta)?/.test(e),"detector"),tn=(0,f.__name)(async()=>{let{diagram:t}=await e.A(10617);return{id:ta,diagram:t}},"loader"),ts={id:ta,detector:ti,loader:tn},to="packet",td=(0,f.__name)(e=>/^\s*packet(-beta)?/.test(e),"detector"),tl=(0,f.__name)(async()=>{let{diagram:t}=await e.A(55071);return{id:to,diagram:t}},"loader"),tc={id:to,detector:td,loader:tl},tm="radar",tu=(0,f.__name)(e=>/^\s*radar-beta/.test(e),"detector"),tg=(0,f.__name)(async()=>{let{diagram:t}=await e.A(71855);return{id:tm,diagram:t}},"loader"),tf={id:tm,detector:tu,loader:tg},tp="block",t_=(0,f.__name)(e=>/^\s*block(-beta)?/.test(e),"detector"),th=(0,f.__name)(async()=>{let{diagram:t}=await e.A(94694);return{id:tp,diagram:t}},"loader"),ty={id:tp,detector:t_,loader:th},tw="architecture",tb=(0,f.__name)(e=>/^\s*architecture/.test(e),"detector"),tx=(0,f.__name)(async()=>{let{diagram:t}=await e.A(27724);return{id:tw,diagram:t}},"loader"),tv={id:tw,detector:tb,loader:tx},tC="treemap",tD=(0,f.__name)(e=>/^\s*treemap/.test(e),"detector"),tS=(0,f.__name)(async()=>{let{diagram:t}=await e.A(75754);return{id:tC,diagram:t}},"loader"),tA={id:tC,detector:tD,loader:tS},tk=!1,tE=(0,f.__name)(()=>{tk||(tk=!0,(0,g.registerDiagram)("error",eY,e=>"error"===e.toLowerCase().trim()),(0,g.registerDiagram)("---",{db:{clear:(0,f.__name)(()=>{},"clear")},styles:{},renderer:{draw:(0,f.__name)(()=>{},"draw")},parser:{parse:(0,f.__name)(()=>{throw Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:(0,f.__name)(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),(0,g.registerLazyLoadedDiagrams)(e0,e7,tv),(0,g.registerLazyLoadedDiagrams)(G,tr,eF,e$,X,eo,em,eu,eD,eE,Z,K,e5,ea,eG,eP,eK,e_,ts,tc,eb,ty,tf,tA))},"addDiagrams"),tT=(0,f.__name)(async()=>{f.log.debug("Loading registered diagrams");let e=(await Promise.allSettled(Object.entries(g.detectors).map(async([e,{detector:t,loader:r}])=>{if(r)try{(0,g.getDiagram)(e)}catch{try{let{diagram:e,id:a}=await r();(0,g.registerDiagram)(a,e,t)}catch(t){throw f.log.error(`Failed to load external diagram with key ${e}. Removing from detectors.`),delete g.detectors[e],t}}}))).filter(e=>"rejected"===e.status);if(e.length>0){for(let t of(f.log.error(`Failed to load ${e.length} external diagrams`),e))f.log.error(t);throw Error(`Failed to load ${e.length} external diagrams`)}},"loadRegisteredDiagrams");function tL(e,t){e.attr("role","graphics-document document"),""!==t&&e.attr("aria-roledescription",t)}function tj(e,t,r,a){if(void 0!==e.insert){if(r){let t=`chart-desc-${a}`;e.attr("aria-describedby",t),e.insert("desc",":first-child").attr("id",t).text(r)}if(t){let r=`chart-title-${a}`;e.attr("aria-labelledby",r),e.insert("title",":first-child").attr("id",r).text(t)}}}(0,f.__name)(tL,"setA11yDiagramInfo"),(0,f.__name)(tj,"addSVGa11yTitleDescription");var t$=class e{constructor(e,t,r,a,i){this.type=e,this.text=t,this.db=r,this.parser=a,this.renderer=i}static{(0,f.__name)(this,"Diagram")}static async fromText(t,r={}){let a=(0,g.getConfig)(),i=(0,g.detectType)(t,a);t=(0,u.encodeEntities)(t)+"\n";try{(0,g.getDiagram)(i)}catch{let e=(0,g.getDiagramLoader)(i);if(!e)throw new g.UnknownDiagramError(`Diagram ${i} not found.`);let{id:t,diagram:r}=await e();(0,g.registerDiagram)(t,r)}let{db:n,parser:s,renderer:o,init:d}=(0,g.getDiagram)(i);return s.parser&&(s.parser.yy=n),n.clear?.(),d?.(a),r.title&&n.setDiagramTitle?.(r.title),await s.parse(t),new e(i,t,n,s,o)}async render(e,t){await this.renderer.draw(this.text,e,t,this)}getParser(){return this.parser}getType(){return this.type}},tM=[],tN=(0,f.__name)(()=>{tM.forEach(e=>{e()}),tM=[]},"attachFunctions"),tI=(0,f.__name)(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function tF(e){let t=e.match(g.frontMatterRegex);if(!t)return{text:e,metadata:{}};let r=(0,l.load)(t[1],{schema:l.JSON_SCHEMA})??{};r="object"!=typeof r||Array.isArray(r)?{}:r;let a={};return r.displayMode&&(a.displayMode=r.displayMode.toString()),r.title&&(a.title=r.title.toString()),r.config&&(a.config=r.config),{text:e.slice(t[0].length),metadata:a}}(0,f.__name)(tF,"extractFrontMatter");var tR=(0,f.__name)(e=>e.replace(/\r\n?/g,"\n").replace(/<(\w+)([^>]*)>/g,(e,t,r)=>"<"+t+r.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),tz=(0,f.__name)(e=>{let{text:t,metadata:r}=tF(e),{displayMode:a,title:i,config:n={}}=r;return a&&(n.gantt||(n.gantt={}),n.gantt.displayMode=a),{title:i,config:n,text:t}},"processFrontmatter"),tO=(0,f.__name)(e=>{let t=u.utils_default.detectInit(e)??{},r=u.utils_default.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:e})=>"wrap"===e):r?.type==="wrap"&&(t.wrap=!0),{text:(0,u.removeDirectives)(e),directive:t}},"processDirectives");function tP(e){let t=tz(tR(e)),r=tO(t.text),a=(0,u.cleanAndMerge)(t.config,r.directive);return{code:e=tI(r.text),title:t.title,config:a}}function tV(e){return btoa(Array.from(new TextEncoder().encode(e),e=>String.fromCodePoint(e)).join(""))}(0,f.__name)(tP,"preprocessDiagram"),(0,f.__name)(tV,"toBase64");var tq=["foreignobject"],tB=["dominant-baseline"];function tG(e){let t=tP(e);return(0,g.reset)(),(0,g.addDirective)(t.config??{}),t}async function tH(e,t){tE();try{let{code:t,config:r}=tG(e);return{diagramType:(await t2(t)).type,config:r}}catch(e){if(t?.suppressErrors)return!1;throw e}}(0,f.__name)(tG,"processAndSetConfigs"),(0,f.__name)(tH,"parse");var tU=(0,f.__name)((e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),tJ=(0,f.__name)((e,t=new Map)=>{let r="";if(void 0!==e.themeCSS&&(r+=`
${e.themeCSS}`),void 0!==e.fontFamily&&(r+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),void 0!==e.altFontFamily&&(r+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){let a=e.htmlLabels??e.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(e=>{(0,B.default)(e.styles)||a.forEach(t=>{r+=tU(e.id,t,e.styles)}),(0,B.default)(e.textStyles)||(r+=tU(e.id,"tspan",(e?.textStyles||[]).map(e=>e.replace("color","fill"))))})}return r},"createCssStyles"),tK=(0,f.__name)((e,t,r,a)=>{var i,n,s;let o=tJ(e,r),d=(0,g.styles_default)(t,o,e.themeVariables);return P((s=function e(t,r,a,i,n,s,o,d,l){for(var c,m,u,g,f,p,_=0,y=0,w=o,T=0,P=0,V=0,q=1,B=1,G=1,H=0,U="",J=n,K=s,W=i,Y=U;B;)switch(V=H,H=N()){case 40:if(108!=V&&58==C(Y,w-1)){-1!=(f=Y+=v(R(H),"&","&\f"),p=b(_?d[_-1]:0),f.indexOf("&\f",p))&&(G=-1);break}case 34:case 39:case 91:Y+=R(H);break;case 9:case 10:case 13:case 32:Y+=function(e){for(;j=I();)if(j<33)N();else break;return F(e)>2||F(j)>3?"":" "}(V);break;case 92:Y+=function(e,t){for(var r;--t&&N()&&!(j<48)&&!(j>102)&&(!(j>57)||!(j<65))&&(!(j>70)||!(j<97)););return r=L+(t<6&&32==I()&&32==N()),D($,e,r)}(L-1,7);continue;case 47:switch(I()){case 42:case 47:A((c=function(e,t){for(;N();)if(e+j===57)break;else if(e+j===84&&47===I())break;return"/*"+D($,t,L-1)+"*"+x(47===e?e:N())}(N(),L),m=r,u=a,g=l,M(c,m,u,h,x(j),D(c,2,-2),0,g)),l),(5==F(V||1)||5==F(I()||1))&&S(Y)&&" "!==D(Y,-1,void 0)&&(Y+=" ");break;default:Y+="/"}break;case 123*q:d[_++]=S(Y)*G;case 125*q:case 59:case 0:switch(H){case 0:case 125:B=0;case 59+y:-1==G&&(Y=v(Y,/\f/g,"")),P>0&&(S(Y)-w||0===q&&47===V)&&A(P>32?O(Y+";",i,a,w-1,l):O(v(Y," ","")+";",i,a,w-2,l),l);break;case 59:Y+=";";default:if(A(W=z(Y,r,a,_,y,n,d,U,J=[],K=[],w,s),s),123===H)if(0===y)e(Y,r,W,W,J,s,w,d,K);else{switch(T){case 99:if(110===C(Y,3))break;case 108:if(97===C(Y,2))break;default:y=0;case 100:case 109:case 115:}y?e(t,W,W,i&&A(z(t,W,W,0,0,n,d,U,n,J=[],w,K),K),n,K,w,d,i?J:K):e(Y,W,W,W,[""],K,0,d,K)}}_=y=P=0,q=G=1,U=Y="",w=o;break;case 58:w=1+S(Y),P=V;default:if(q<1){if(123==H)--q;else if(125==H&&0==q++&&125==(j=L>0?C($,--L):0,E--,10===j&&(E=1,k--),j))continue}switch(Y+=x(H),H*q){case 38:G=y>0?1:(Y+="\f",-1);break;case 44:d[_++]=(S(Y)-1)*G,G=1;break;case 64:45===I()&&(Y+=R(N())),T=I(),y=w=S(U=Y+=function(e){for(;!F(I());)N();return D($,e,L)}(L)),H++;break;case 45:45===V&&2==S(Y)&&(q=0)}}return s}("",null,null,null,[""],(n=i=`${a}{${d}}`,k=E=1,T=S($=n),L=0,i=[]),0,[0],i),$="",s),V)},"createUserStyles"),tW=(0,f.__name)((e="",t,r)=>{let a=e;return r||t||(a=a.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),a=(a=(0,u.decodeEntities)(a)).replace(/<br>/g,"<br/>")},"cleanUpSvgCode"),tY=(0,f.__name)((e="",t)=>{let r=t?.viewBox?.baseVal?.height?t.viewBox.baseVal.height+"px":"100%",a=tV(`<body style="margin:0">${e}</body>`);return`<iframe style="width:100%;height:${r};border:0;margin:0;" src="data:text/html;charset=UTF-8;base64,${a}" sandbox="allow-top-navigation-by-user-activation allow-popups">
  The "iframe" tag is not supported by your browser.
</iframe>`},"putIntoIFrame"),tQ=(0,f.__name)((e,t,r,a,i)=>{let n=e.append("div");n.attr("id",r),a&&n.attr("style",a);let s=n.append("svg").attr("id",t).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg");return i&&s.attr("xmlns:xlink",i),s.append("g"),e},"appendDivSvgG");function tZ(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}(0,f.__name)(tZ,"sandboxedIframe");var tX=(0,f.__name)((e,t,r,a)=>{e.getElementById(t)?.remove(),e.getElementById(r)?.remove(),e.getElementById(a)?.remove()},"removeExistingElements"),t0=(0,f.__name)(async function(e,t,r){let a,i;tE();let n=tG(t);t=n.code;let s=(0,g.getConfig)();f.log.debug(s),t.length>(s?.maxTextSize??5e4)&&(t="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");let d="#"+e,l="i"+e,c="#"+l,m="d"+e,u="#"+m,p=(0,f.__name)(()=>{let e=y?c:u,t=(0,_.select)(e).node();t&&"remove"in t&&t.remove()},"removeTempElements"),h=(0,_.select)("body"),y="sandbox"===s.securityLevel,w="loose"===s.securityLevel,b=s.fontFamily;if(void 0!==r){if(r&&(r.innerHTML=""),y){let e=tZ((0,_.select)(r),l);(h=(0,_.select)(e.nodes()[0].contentDocument.body)).node().style.margin=0}else h=(0,_.select)(r);tQ(h,e,m,`font-family: ${b}`,"http://www.w3.org/1999/xlink")}else{if(tX(document,e,m,l),y){let e=tZ((0,_.select)("body"),l);(h=(0,_.select)(e.nodes()[0].contentDocument.body)).node().style.margin=0}else h=(0,_.select)("body");tQ(h,e,m)}try{a=await t$.fromText(t,{title:n.title})}catch(e){if(s.suppressErrorRendering)throw p(),e;a=await t$.fromText("error"),i=e}let x=h.select(u).node(),v=a.type,C=x.firstChild,D=C.firstChild,S=tK(s,v,a.renderer.getClasses?.(t,a),d),A=document.createElement("style");A.innerHTML=S,C.insertBefore(A,D);try{await a.renderer.draw(t,e,o.package_default.version,a)}catch(r){throw s.suppressErrorRendering?p():eW.draw(t,e,o.package_default.version),r}t6(v,h.select(`${u} svg`),a.db.getAccTitle?.(),a.db.getAccDescription?.()),h.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let k=h.select(u).node().innerHTML;if(f.log.debug("config.arrowMarkerAbsolute",s.arrowMarkerAbsolute),k=tW(k,y,(0,g.evaluate)(s.arrowMarkerAbsolute)),y?k=tY(k,h.select(u+" svg").node()):w||(k=q.default.sanitize(k,{ADD_TAGS:tq,ADD_ATTR:tB,HTML_INTEGRATION_POINTS:{foreignobject:!0}})),tN(),i)throw i;return p(),{diagramType:v,svg:k,bindFunctions:a.db.bindFunctions}},"render");function t1(e={}){let t=(0,g.assignWithDepth_default)({},e);t?.fontFamily&&!t.themeVariables?.fontFamily&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),(0,g.saveConfigFromInitialize)(t),t?.theme&&t.theme in g.themes_default?t.themeVariables=g.themes_default[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=g.themes_default.default.getThemeVariables(t.themeVariables));let r="object"==typeof t?(0,g.setSiteConfig)(t):(0,g.getSiteConfig)();(0,f.setLogLevel)(r.logLevel),tE()}(0,f.__name)(t1,"initialize");var t2=(0,f.__name)((e,t={})=>{let{code:r}=tP(e);return t$.fromText(r,t)},"getDiagramFromText");function t6(e,t,r,a){tL(t,e),tj(t,r,a,t.attr("id"))}(0,f.__name)(t6,"addA11yInfo");var t5=Object.freeze({render:t0,parse:tH,getDiagramFromText:t2,initialize:t1,getConfig:g.getConfig,setConfig:g.setConfig,getSiteConfig:g.getSiteConfig,updateSiteConfig:g.updateSiteConfig,reset:(0,f.__name)(()=>{(0,g.reset)()},"reset"),globalReset:(0,f.__name)(()=>{(0,g.reset)(g.defaultConfig)},"globalReset"),defaultConfig:g.defaultConfig});(0,f.setLogLevel)((0,g.getConfig)().logLevel),(0,g.reset)((0,g.getConfig)());var t4=(0,f.__name)((e,t,r)=>{f.log.warn(e),(0,u.isDetailedError)(e)?(r&&r(e.str,e.hash),t.push({...e,message:e.str,error:e})):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),t3=(0,f.__name)(async function(e={querySelector:".mermaid"}){try{await t8(e)}catch(t){if((0,u.isDetailedError)(t)&&f.log.error(t.str),rl.parseError&&rl.parseError(t),!e.suppressErrors)throw f.log.error("Use the suppressErrors option to suppress these errors"),t}},"run"),t8=(0,f.__name)(async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){let a,i,n=t5.getConfig();if(f.log.debug(`${!e?"No ":""}Callback function found`),r)a=r;else if(t)a=document.querySelectorAll(t);else throw Error("Nodes and querySelector are both undefined");f.log.debug(`Found ${a.length} diagrams`),n?.startOnLoad!==void 0&&(f.log.debug("Start On Load: "+n?.startOnLoad),t5.updateSiteConfig({startOnLoad:n?.startOnLoad}));let s=new u.utils_default.InitIDGenerator(n.deterministicIds,n.deterministicIDSeed),o=[];for(let t of Array.from(a)){if(f.log.info("Rendering diagram: "+t.id),t.getAttribute("data-processed"))continue;t.setAttribute("data-processed","true");let r=`mermaid-${s.next()}`;i=t.innerHTML,i=(0,p.dedent)(u.utils_default.entityDecode(i)).trim().replace(/<br\s*\/?>/gi,"<br/>");let a=u.utils_default.detectInit(i);a&&f.log.debug("Detected early reinit: ",a);try{let{svg:a,bindFunctions:n}=await ro(r,i,t);t.innerHTML=a,e&&await e(r),n&&n(t)}catch(e){t4(e,o,rl.parseError)}}if(o.length>0)throw o[0]},"runThrowsErrors"),t7=(0,f.__name)(function(e){t5.initialize(e)},"initialize"),t9=(0,f.__name)(async function(e,t,r){f.log.warn("mermaid.init is deprecated. Please use run instead."),e&&t7(e);let a={postRenderCallback:r,querySelector:".mermaid"};"string"==typeof t?a.querySelector=t:t&&(t instanceof HTMLElement?a.nodes=[t]:a.nodes=t),await t3(a)},"init"),re=(0,f.__name)(async(e,{lazyLoad:t=!0}={})=>{tE(),(0,g.registerLazyLoadedDiagrams)(...e),!1===t&&await tT()},"registerExternalDiagrams"),rt=(0,f.__name)(function(){if(rl.startOnLoad){let{startOnLoad:e}=t5.getConfig();e&&rl.run().catch(e=>f.log.error("Mermaid failed to initialize",e))}},"contentLoaded");"u">typeof document&&window.addEventListener("load",rt,!1);var rr=(0,f.__name)(function(e){rl.parseError=e},"setParseErrorHandler"),ra=[],ri=!1,rn=(0,f.__name)(async()=>{if(!ri){for(ri=!0;ra.length>0;){let e=ra.shift();if(e)try{await e()}catch(e){f.log.error("Error executing queue",e)}}ri=!1}},"executeQueue"),rs=(0,f.__name)(async(e,t)=>new Promise((r,a)=>{let i=(0,f.__name)(()=>new Promise((i,n)=>{t5.parse(e,t).then(e=>{i(e),r(e)},e=>{f.log.error("Error parsing",e),rl.parseError?.(e),n(e),a(e)})}),"performCall");ra.push(i),rn().catch(a)}),"parse"),ro=(0,f.__name)((e,t,r)=>new Promise((a,i)=>{let n=(0,f.__name)(()=>new Promise((n,s)=>{t5.render(e,t,r).then(e=>{n(e),a(e)},e=>{f.log.error("Error parsing",e),rl.parseError?.(e),s(e),i(e)})}),"performCall");ra.push(n),rn().catch(i)}),"render"),rd=(0,f.__name)(()=>Object.keys(g.detectors).map(e=>({id:e})),"getRegisteredDiagramsMetadata"),rl={startOnLoad:!0,mermaidAPI:t5,parse:rs,render:ro,init:t9,run:t3,registerExternalDiagrams:re,registerLayoutLoaders:c.registerLayoutLoaders,initialize:t7,parseError:void 0,contentLoaded:rt,setParseErrorHandler:rr,detectType:g.detectType,registerIconPacks:m.registerIconPacks,getRegisteredDiagramsMetadata:rd};let rc=`{
  "meta": { "machine_name": "order", "version": "1.0" },
  "states": [
    { "name": "PENDING", "type": "initial" },
    { "name": "PROCESSING", "type": "stable" },
    { "name": "DONE", "type": "terminal" }
  ],
  "transitions": [
    { "trigger": "start", "source": "PENDING", "dest": "PROCESSING" },
    { "trigger": "complete", "source": "PROCESSING", "dest": "DONE" }
  ]
}`,rm=!1;function ru(){let[e,o]=(0,r.useState)(rc),[d,l]=(0,r.useState)(""),[c,m]=(0,r.useState)(null),[u,g]=(0,r.useState)(null),[f,p]=(0,r.useState)(null),_=(0,r.useCallback)(()=>{let t;m(null),p(null);try{t=JSON.parse(e)}catch{m("Invalid JSON"),l(""),g(null);return}let r=t.meta?.machine_name??"FSM";l(function(e,t={}){let{title:r,showGuards:a=!0,showTimeouts:i=!0,direction:n="TB"}=t,o=e.states??[],d=e.transitions??[],l=[];r&&l.push("---",`title: ${r}`,"---"),l.push("stateDiagram-v2",`    direction ${n}`);let c=o.find(e=>"initial"===e.type),m=o.filter(e=>"terminal"===e.type).map(e=>e.name);for(let e of(c&&l.push(`    [*] --> ${c.name}`),o))e.description&&l.push(`    ${e.name} : ${s(e.description)}`),i&&e.timeout&&l.push(`    note right of ${e.name}`,`        timeout: ${e.timeout.seconds}s -> ${e.timeout.destination}`,"    end note");for(let e of m)l.push(`    ${e} --> [*]`);for(let e of d){let t=Array.isArray(e.source)?e.source:[e.source],r=[e.trigger];if(a&&e.guards?.length){let t=Array.isArray(e.guards)?e.guards.join(", "):e.guards;r.push(`[${t}]`)}let i=s(r.join(" "));for(let r of t)l.push(`    ${r} --> ${e.dest} : ${i}`)}if(i)for(let e of o)e.timeout&&l.push(`    ${e.name} --> ${e.timeout.destination} : timeout`);return l.join("\n")}(t,{title:r,showGuards:!0,showTimeouts:!0}))},[e]);return(0,r.useEffect)(()=>{_()},[_]),(0,r.useEffect)(()=>{if(!d)return void g(null);rm||(rl.initialize({startOnLoad:!1,theme:"neutral"}),rm=!0);let e="mermaid-"+Math.random().toString(36).slice(2);rl.render(e,d).then(({svg:e})=>{g(e),p(null)}).catch(e=>{g(null),p(e.message||"Failed to render diagram")})},[d]),(0,t.jsx)("div",{className:"min-h-screen bg-background",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,t.jsx)(a.PageHeader,{title:"Visualization",description:"Paste or edit FSM config to view the Mermaid state diagram.",actions:(0,t.jsx)(n.Button,{onClick:_,children:"Update Diagram"})}),c&&(0,t.jsx)("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-4 text-destructive text-sm mt-4",children:c}),f&&(0,t.jsx)("div",{className:"rounded-lg border border-amber-500/50 bg-amber-50 p-4 text-amber-800 text-sm mt-4",children:f}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{children:"Config (JSON)"}),(0,t.jsx)(i.CardDescription,{children:"Edit and click Update Diagram"})]}),(0,t.jsx)(i.CardContent,{children:(0,t.jsx)("textarea",{className:"w-full h-[300px] font-mono text-sm rounded-md border border-input bg-background px-3 py-2 focus:outline-none focus:ring-2 focus:ring-ring",value:e,onChange:e=>o(e.target.value),spellCheck:!1})})]}),(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{children:"Diagram"}),(0,t.jsx)(i.CardDescription,{children:"Mermaid state diagram"})]}),(0,t.jsxs)(i.CardContent,{children:[(0,t.jsx)("div",{className:"min-h-[300px] flex items-center justify-center bg-muted/30 rounded-md overflow-auto p-4",children:u?(0,t.jsx)("div",{className:"mermaid-diagram",dangerouslySetInnerHTML:{__html:u}}):!c&&!f&&(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Enter valid JSON and click Update."})}),d&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:"Mermaid source:"}),(0,t.jsx)("pre",{className:"text-xs font-mono bg-muted p-3 rounded overflow-auto max-h-40",children:d})]})]})]})]})]})})}e.s(["default",()=>ru],34740)}]);