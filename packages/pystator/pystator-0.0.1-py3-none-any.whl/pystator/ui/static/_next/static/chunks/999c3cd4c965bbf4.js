(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55824,16370,e=>{"use strict";var t=e.i(43476);function s({title:e,description:s,actions:r}){return(0,t.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-1",children:e}),s&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:s})]}),r&&(0,t.jsx)("div",{className:"flex gap-2",children:r})]})}e.s(["PageHeader",()=>s],16370),e.s([],55824)},43668,e=>{"use strict";var t=e.i(47167);let s="pygubernator_settings",r={apiServer:{url:t.default.env.NEXT_PUBLIC_API_URL||"http://localhost:8000"}};function n(){try{let e=localStorage.getItem(s);if(e){let t=JSON.parse(e);return{...r,...t,apiServer:{...r.apiServer,...t.apiServer}}}}catch(e){}return r}function i(e){localStorage.setItem(s,JSON.stringify(e))}function a(){return n().apiServer.url||r.apiServer.url}e.s(["getApiBaseUrl",()=>a,"getSettings",()=>n,"saveSettings",()=>i])},93479,10204,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(75157);let n=s.forwardRef(({className:e,type:s,...n},i)=>(0,t.jsx)("input",{type:s,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...n}));n.displayName="Input",e.s(["Input",()=>n],93479);let i=s.forwardRef(({className:e,...s},n)=>(0,t.jsx)("label",{ref:n,className:(0,r.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...s}));i.displayName="Label",e.s(["Label",()=>i],10204)},9165,95113,e=>{"use strict";var t=e.i(43668);class s extends Error{status;response;constructor(e,t,s){super(e),this.status=t,this.response=s,this.name="ApiError"}}async function r(e,r){let n=`${(0,t.getApiBaseUrl)()}${e}`,i=await fetch(n,{...r,headers:{"Content-Type":"application/json",...r?.headers}});if(!i.ok){let e;try{e=await i.json()}catch{e={detail:i.statusText}}throw new s("string"==typeof e.detail?e.detail:e.error??`Request failed: ${i.status}`,i.status,e)}let a=i.headers.get("content-type");return a?.includes("application/json")?i.json():i.text()}async function n(e){return r("/api/v1/validate",{method:"POST",body:JSON.stringify({config:e})})}async function i(e,t,s,n){return r("/api/v1/process",{method:"POST",body:JSON.stringify({config:e,current_state:t,trigger:s,context:n??{}})})}e.s(["ApiError",()=>s,"processEvent",()=>i,"validateConfig",()=>n],9165);var a=e.i(43476);let l=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var c=e.i(22016),o=e.i(75157);function d({error:e,title:r="Error",className:n}){if(!e)return null;let i=(e instanceof s,e.message),d=i.includes("Unable to connect")||i.includes("Failed to fetch")||e instanceof s&&0===e.status,u=d?(0,t.getApiBaseUrl)():null;return(0,a.jsx)("div",{className:(0,o.cn)("rounded-lg border border-destructive/50 bg-destructive/10 p-4",n),children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(l,{className:"h-5 w-5 text-destructive flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-destructive",children:r}),(0,a.jsx)("p",{className:"mt-2 text-sm text-destructive/90",children:i}),d&&u&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-white/50 rounded border border-destructive/20",children:[(0,a.jsx)("p",{className:"text-xs font-medium mb-2",children:"To fix:"}),(0,a.jsxs)("ol",{className:"text-xs text-slate-600 space-y-1 list-decimal list-inside",children:[(0,a.jsxs)("li",{children:["Start API: ",(0,a.jsx)("code",{className:"px-1.5 py-0.5 bg-slate-100 rounded",children:"uvicorn pygubernator.api.main:app --port 8000"})]}),(0,a.jsxs)("li",{children:["Or set API URL in ",(0,a.jsx)(c.default,{href:"/settings/",className:"text-indigo-600 hover:underline",children:"Settings"})]})]}),(0,a.jsxs)("p",{className:"mt-2 text-xs text-slate-500",children:["API URL: ",(0,a.jsx)("code",{className:"px-1 py-0.5 bg-slate-100 rounded",children:u})]})]})]})]})})}e.s(["default",()=>d],95113)},53499,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(55824);var r=e.i(16370),n=e.i(15288),i=e.i(19455),a=e.i(93479),l=e.i(10204),c=e.i(9165),o=e.i(95113);let d=JSON.stringify({meta:{machine_name:"test",version:"1.0"},states:[{name:"A",type:"initial"},{name:"B",type:"terminal"}],transitions:[{trigger:"go",source:"A",dest:"B"}]},null,2);function u(){let[e,u]=(0,s.useState)(d),[x,g]=(0,s.useState)("A"),[h,p]=(0,s.useState)("go"),[m,f]=(0,s.useState)("{}"),[j,v]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),[N,S]=(0,s.useState)(!1),C=(0,s.useCallback)(async()=>{let t;y(null),v(null);let s={};try{t=JSON.parse(e)}catch{y(Error("Invalid config JSON"));return}try{s=m.trim()?JSON.parse(m):{}}catch{y(Error("Invalid context JSON"));return}S(!0);try{let e=await (0,c.processEvent)(t,x,h,s);v(e)}catch(e){y(e instanceof c.ApiError?e:Error(String(e)))}finally{S(!1)}},[e,x,h,m]);return(0,t.jsx)("div",{className:"min-h-screen bg-background",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,t.jsx)(r.PageHeader,{title:"Process Event",description:"Send current state, trigger, and context to the API. Get transition result and actions.",actions:(0,t.jsx)(i.Button,{onClick:C,disabled:N,children:N?"Processing...":"Process"})}),b&&(0,t.jsx)(o.default,{error:b,className:"mt-4"}),j&&(0,t.jsxs)(n.Card,{className:"mt-4",children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{className:j.success?"text-emerald-600":"text-destructive",children:j.success?"Success":"Failed"}),(0,t.jsx)(n.CardDescription,{children:j.success?`${j.source_state} â†’ ${j.target_state} (trigger: ${j.trigger})`:j.error?.message})]}),(0,t.jsx)(n.CardContent,{className:"space-y-2 text-sm",children:j.success&&(0,t.jsxs)(t.Fragment,{children:[j.actions_to_execute.length>0&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Actions:"})," ",j.actions_to_execute.join(", ")]}),j.on_enter_actions.length>0&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"On enter:"})," ",j.on_enter_actions.join(", ")]}),j.on_exit_actions.length>0&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"On exit:"})," ",j.on_exit_actions.join(", ")]})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"Config (JSON)"}),(0,t.jsx)(n.CardDescription,{children:"Full FSM config"})]}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("textarea",{className:"w-full h-[200px] font-mono text-sm rounded-md border border-input bg-background px-3 py-2 focus:outline-none focus:ring-2 focus:ring-ring",value:e,onChange:e=>u(e.target.value),spellCheck:!1})})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"Event"}),(0,t.jsx)(n.CardDescription,{children:"Current state, trigger, and context"})]}),(0,t.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:"current-state",children:"Current state"}),(0,t.jsx)(a.Input,{id:"current-state",value:x,onChange:e=>g(e.target.value),placeholder:"e.g. A"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:"trigger",children:"Trigger"}),(0,t.jsx)(a.Input,{id:"trigger",value:h,onChange:e=>p(e.target.value),placeholder:"e.g. go"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:"context",children:"Context (JSON)"}),(0,t.jsx)("textarea",{id:"context",className:"w-full h-24 font-mono text-sm rounded-md border border-input bg-background px-3 py-2 focus:outline-none focus:ring-2 focus:ring-ring",value:m,onChange:e=>f(e.target.value),spellCheck:!1,placeholder:"{}"})]})]})]})]})]})})}e.s(["default",()=>u])}]);