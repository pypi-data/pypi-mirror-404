country='IRQ'
nationality=None
side = 'front'

# import matplotlib.image as mpimg
import os
# import shutil
# import matplotlib.pyplot as plt
# import openai
# import pandas as pd

import json
import time
import re
from dotenv import load_dotenv
load_dotenv()

genai_key = ''
openai_key = os.getenv('OPENAI_API_KEY')
gemni_key = os.getenv('OPENAI_API_KEY')

creds = json.loads(os.getenv('GOOGLE_VISION_API_KEY'))


import base64
def image_to_base64(image_path):
    with open(image_path, "rb") as image_file:
        image_data = image_file.read()
        base64_encoded = base64.b64encode(image_data).decode("utf-8")

        return base64_encoded

def run_test(root,image,side, creds, openai_key, gemni_key, country):

    start = time.time()
    from idvpackage import ocr
    end = time.time()
    print(f'Time taken to import: {end - start}')

    credentials_string = json.dumps(creds)

    start = time.time()
    try:
        idv = ocr.IdentityVerification(credentials_string, api_key=openai_key, genai_key=gemni_key)
    except TypeError:
        try:
            idv = ocr.IdentityVerification(credentials_string, api_key=openai_key)
        except TypeError:
            idv = ocr.IdentityVerification(credentials_string, openai_key=openai_key,gemni_key=None)


    end = time.time()
    print(f'Time taken to initialize: {end - start}')

    img = image_to_base64(os.path.join(root,image))
    #
    # #=====Extract Front ID=======
    if side == 'front':
        try:
            data = idv.extract_front_id_info(img, country=country, nationality=country)
        except TypeError:
            data = idv.extract_front_id_info(img, country=country)
    if side =='back':
    #=====Extract Back ID=======
        try:
            data = idv.extract_back_id_info(img, country=country, nationality=country)
        except TypeError:
            data = idv.extract_back_id_info(img, country=country)
    elif side=='page1':
    #=====Extract Passport========
        try:
            data= idv.exract_passport_info(img, country=country, nationality=country)
        except TypeError:
            data= idv.exract_passport_info(img, country=country)
    elif side=='auto':
        try:
            data = idv.extract_document_info(img, side=side, document_type='national_id', country=country,nationality=country)
        except TypeError:
            data = idv.extract_document_info(img, side=side, document_type='national_id', country=country, nationality=country)

    return data


def run_test_agent(root,image,side, creds,openai_key, gemni_key, country, nationality, step_data=None):

    start = time.time()
    from idvpackage import ocr
    end = time.time()
    print(f'Time taken to import: {end - start}')

    credentials_string = json.dumps(creds)

    start = time.time()
    try:
        idv = ocr.IdentityVerification(credentials_string, api_key=gemni_key, genai_key=openai_key)
    except TypeError:
        try:
            idv = ocr.IdentityVerification(credentials_string, api_key=openai_key)
        except TypeError:
            idv = ocr.IdentityVerification(credentials_string, openai_key=openai_key, gemini_key=None)

    end = time.time()
    print(f'Time taken to initialize: {end - start}')

    img = image_to_base64(os.path.join(root,image))

    if side=='front' or side=='back':
        try:

            data = idv.extract_document_info(img, side=side, document_type='national_id', country=country,nationality=nationality,step_data=step_data)
        except TypeError:
            data = idv.extract_document_info(img, side=side, document_type='national_id', country=country)

        except Exception as e:
            print(f"Exception Thrown: {e}")

    if side=='auto':
        try:
            data = idv.extract_document_info(img, side=side, document_type='', country=country,nationality=nationality)
        except TypeError:
            data = idv.extract_document_info(img, side=side, document_type='', country=country)


    if side=='page1' or side=='page2':
        try:
            data = idv.extract_document_info(img, side=side, document_type='passport', country=country,nationality=nationality, step_data=step_data)
        except TypeError:
            data = idv.extract_document_info(img, side=side, document_type='passport', country=country)


    return data



#lbn
# if country=='LBN':
#     root = '/Users/husunshujaat/Downloads/'
#     if side=='back':
#         images = ['lbn_issue_1.png','lbn_issue_2.png','lbn_issue_3.png']
#
#     else:
#         images = ['lbn_front_sample.png']

if country=='LBN':
    if side=='front':
        root = "/Users/husunshujaat/Downloads/lbn_dob_issue/"
        images = ["normalimage2.png"]
    if side=='page1':
        # root = "/Users/husunshujaat/Downloads/iraq_passport_new_idv/"
        # images = ['LBN_Passport.JPG']
        root = '/Users/husunshujaat/Downloads/'
        images = ['4caa066d-f01c-40e0-b614-2db97f6a4a03.JPG']

#uae
if country=='UAE':
    root = '/Users/husunshujaat/Downloads/uae_nids/ishachhabria/'
    #root = '/Users/husunshujaat/Downloads/'
    if side=='back':
        images = ['back.png']

    else:
        images = ['front_image.png']
    #
    # root = '/Users/husunshujaat/Downloads/uae_nids/'
    # images = [f for f in os.listdir(root) if f.endswith(('.png','.jpg','.jpeg','.PNG','.JPG'))]
    #images = ['back 2.png']
    # root = "/Users/husunshujaat/Downloads/sudan_nid/"
    # if side=='front':
    #     images = ['front.png']
    # elif side=='back':
    #     images = ['back.png']





if country=='SDN':
    root = "/Users/husunshujaat/Downloads/sudan_nids"
    if side=='front':
        images = ['id_1.png']
    if side=='back':
        images = ['id_1 2.png']
    if side=='page1':
          images = [None]


if country=='IRQ':

    if nationality == 'PSE':
        root = '/Users/husunshujaat/Downloads/iraq_passport_latest'
        if side=='page1':
            images = ['passport_1.jpg']


    if nationality=='SYR':
        root = '/Users/husunshujaat/Downloads/iraq_passport_new_idv/'
        if side=='page1':
            images = ['SYR_page1.jpg']
        elif side=='page2':
            images = ['SYR_page2.jpg']

    else:
        if side=='front':
            root = '/Users/husunshujaat/Downloads/iraq_fs_test/'
            images = ['ahmed_nid.png']
        elif side=='back':
            root = '/Users/husunshujaat/Downloads/iraq_fs_test/yaseen_docs/'
            images = ['yaseen_nid_back.png']
            #
            # root = '/Users/husunshujaat/Downloads/national_id_1k/national_id-1'
            # images = ['00adb91f-2056-4a9f-9ec7-a22232310e0e.jpg']
        elif side=='page1':
            root = '/Users/husunshujaat/Downloads/iraq_passport_new_idv/yaseen'
            images = ['yaseen_passport.png']
        #root = '/Users/husunshujaat/Downloads/iraq_nids/1/'
        # if side=='front':
        #     images = ['yaseen_front.png']
        # if side=='back':
        #     images = ['40e01076-ba65-420c-b3ca-3674369e527d.jpg']
        # #
        # if side=='page1':
        #     root = '/Users/husunshujaat/Downloads/iraq_passport_new_idv/yaseen'
        #     images = ['yaseen_passport.png']


# if country=='IRQ':
#     images = [f for f in os.listdir('/Users/husunshujaat/Downloads/passport_glare/') if f.endswith(('.png','.jpg','.JPEG','.PNG','.JPG'))]
#     # images = images[:5]
#     root = '/Users/husunshujaat/Downloads/passport_glare/'


if country=='QAT':
    root = '/Users/husunshujaat/Downloads/'
    images = ['8a7eaee5-26fd-4747-bd45-68e7f4fb05de_1727717869_ac3c1b (3) (1).png']


#nationality = None

outputs = []

step_data = {'error': '', 'error_details': '', 'id_number_front': '199466850595', 'card_number_front': 'A38082126', 'first_name': 'ياسين', 'first_name_en': 'Yasin', 'father_name': 'أيمن', 'father_name_en': 'Ayman', 'third_name': 'محمد', 'third_name_en': 'Muhammad', 'last_name': 'العبيدي', 'last_name_en': 'Al-Ubaidi', 'mother_first_name': 'سهاد', 'mother_first_name_en': 'Suhad', 'mother_last_name': 'منذر', 'mother_last_name_en': 'Munthir', 'gender_ar': 'ذكر', 'gender': 'male', 'blood_type': '+A', 'serial_number': '895932', 'doc_type': 'national_identity_card', 'nationality': 'IRQ', 'nationality_en': 'IRQ', 'name': 'ياسين أيمن العبيدي', 'name_en': 'Yasin Ayman Al-Ubaidi', 'front_extracted_data': 'کوماری عیراق / وه زاره تی ناوخو\nبه ریوه به رایه تی باری شارستانی و پاسپورت و نیشنگه\nجمهورية العراق / وزارة الداخلية\nمديرية الأحوال المدنية والجوازات والاقامة\nA\nالبطاقة الوطنية / كارتى نيشتماني\n199466850595\nالاسم / ناو : ياسين\nالأب / باوك : أيمن\nالجد / بابير : محمد\nاللقب / نازناو : العبيدي\nالأم / دايك : سهاد\nالجد / بابير : منذر\nالجنس / ردگه ز : ذكر\nفصيلة الدم/ گروبی خوین : +A\n895932\nA38082126', 'translated_front_id_text': '', 'front_coloured': True, 'back_coloured': True, 'front_doc_on_pp': 'clear', 'front_logo_result': 'clear', 'front_template_result': 'clear', 'front_screenshot_result': '', 'front_photo_on_screen_result': '', 'front_blurred': '', 'front_glare': '', 'front_face_locations': '[[233, 290, 444, 130]]', 'front_face_encodings': '[[-0.09408826380968094, 0.04781844839453697, -0.013824906200170517, -0.08345187455415726, -0.017775898799300194, -0.0483972392976284, -0.020767023786902428, -0.05839747563004494, 0.15469390153884888, -0.10424301773309708, 0.19467416405677795, 0.03725694119930267, -0.1513485461473465, 0.011208387091755867, 0.0416281633079052, 0.05367797240614891, -0.11147508770227432, -0.11714450269937515, -0.08254285901784897, -0.07985847443342209, 0.04592445120215416, -0.01622769981622696, -0.035448651760816574, 0.08820640295743942, -0.191756010055542, -0.22217640280723572, -0.12351930886507034, -0.16686266660690308, 0.022918468341231346, -0.09160386025905609, 0.038566406816244125, -0.02938525378704071, -0.07052832841873169, -0.006017150357365608, 0.023745408281683922, 0.02207256853580475, 0.028494635596871376, -0.05455142259597778, 0.2599770426750183, 0.023620178923010826, -0.10417480766773224, -0.005270997062325478, 0.051092226058244705, 0.322055459022522, 0.11028201878070831, 0.0023632515221834183, 0.080568827688694, -0.0697847306728363, 0.16007457673549652, -0.21346215903759003, 0.12784980237483978, 0.07764882594347, 0.1607542484998703, 0.07900616526603699, 0.15842433273792267, -0.1276003122329712, 0.09452615678310394, 0.14244139194488525, -0.24831683933734894, 0.19174841046333313, 0.07402855902910233, 0.003282397985458374, -0.033008117228746414, -0.05032682791352272, 0.25342902541160583, 0.12469416111707687, -0.12812265753746033, -0.13730180263519287, 0.12449483573436737, -0.1373712569475174, -0.1116243526339531, 0.04866583272814751, -0.11961105465888977, -0.2054165005683899, -0.24921493232250214, 0.06699132174253464, 0.3442019820213318, 0.28634876012802124, -0.2305937260389328, 0.06536684185266495, -0.09966279566287994, -0.0645868182182312, 0.10166306793689728, 0.015628870576620102, -0.101566843688488, -0.002082051942124963, -0.09361822158098221, 0.03001396916806698, 0.21635660529136658, 0.04645422846078873, -0.03522661700844765, 0.19544003903865814, 0.008467230014503002, -0.02744390070438385, -0.0038488840218633413, 0.017343277111649513, -0.18570847809314728, -0.019776666536927223, -0.09770530462265015, -0.06489195674657822, 0.08375894278287888, -0.04728102311491966, 0.05989043787121773, 0.13237592577934265, -0.2406751811504364, 0.19135914742946625, -0.049121465533971786, -0.047503065317869186, -0.03846914321184158, 0.11838695406913757, -0.14264266192913055, -0.01312190666794777, 0.15403597056865692, -0.22921541333198547, 0.13694877922534943, 0.12827341258525848, 0.07699238508939743, 0.09985792636871338, 0.06728686392307281, 0.041923947632312775, -0.003312612185254693, 0.029155751690268517, -0.17266811430454254, -0.04593943804502487, 0.026180682703852654, 0.004961944185197353, 0.10467945784330368, 0.06830030679702759]]', 'front_tampered_result': 'clear', 'issuing_country': 'IRQ', 'valid_nationality': 'valid_nationality_result'}

step_data_new_openai = {'error': '', 'doc_type': 'national_identity_card', 'ocr_text': 'جمهورية العراق / کۆماری عێراق\nوزارة الداخلية / دواڕزاری ناوخۆ\n\nمديرية الجنسية العامة\nبە رێز بەرەوانەباش گشتی و تەواوکارێ\n\nبطاقة الهوية / ژماره\u200cى نه\u200cمه\u200cى 199088641760\n\nالاسم الاول : احمد\nالاب : عباس\nالجد : طارق\nاللقب العشيرة : المسعدى\nالام : زهره\nالمجد : صالح\nالجنس / رده\u200cگر: ذكر\nالمجموعة الدموية / گروپى خۆن : O+\n\nAA6236665\n\n722988', 'first_name': 'احمد', 'first_name_en': 'Ahmad', 'father_name': 'عباس', 'father_name_en': 'Abbas', 'third_name': 'طارق', 'third_name_en': 'Tariq', 'last_name': 'المسعدى', 'last_name_en': 'Al-Masadi', 'mother_first_name': 'زهره', 'mother_first_name_en': 'Zahra', 'mother_last_name': 'صالح', 'mother_last_name_en': 'Saleh', 'gender_ar': 'ذكر', 'gender': 'Male', 'id_number': '199088641760', 'card_number': 'AA6236665', 'serial_number': '722988', 'blood_type': 'O+', 'header_verified': True, 'name': 'احمد عباس المسعدى', 'name_en': 'Ahmad Abbas Al-Masadi', 'front_extracted_data': '', 'translated_front_id_text': '', 'front_coloured': True, 'back_coloured': True, 'nationality': 'IRQ', 'nationality_en': 'IRQ', 'doc_on_pp_result': 'clear', 'template_result': 'clear', 'logo_result': 'clear', 'front_doc_on_pp': 'clear', 'front_logo_result': 'clear', 'front_template_result': 'clear', 'front_screenshot_result': 'clear', 'front_photo_on_screen_result': 'clear', 'front_blurred': 'clear', 'front_glare': 'clear', 'front_face_locations': '[[141, 120, 228, 54]]', 'front_face_encodings': '[[-0.061252862215042114, 0.11352691054344177, 0.07091327756643295, -0.0893460065126419, -0.05774017423391342, 0.0053496649488806725, -0.03414905071258545, -0.06309397518634796, 0.1940932422876358, -0.11242447048425674, 0.1538901925086975, -0.012897771783173084, -0.23399759829044342, 0.015166310593485832, -0.08522071689367294, 0.08231811970472336, -0.03782535716891289, -0.10644883662462234, -0.10100501030683517, -0.09806807339191437, 0.04892459511756897, 0.11501598358154297, -0.04870354011654854, -0.021546324715018272, -0.10702654719352722, -0.31000077724456787, -0.034702762961387634, -0.07975555211305618, -0.04389456659555435, -0.1384831815958023, 0.0502576008439064, 0.06835571676492691, -0.17936551570892334, -0.07742993533611298, -0.005791147239506245, 0.09538118541240692, -0.07726697623729706, -0.004601721651852131, 0.1653842180967331, 0.08680278062820435, -0.14453475177288055, -0.0021047729533165693, 0.09335461258888245, 0.3154527544975281, 0.1282225251197815, 0.06837373226881027, -0.007413890678435564, -0.045211225748062134, 0.08853879570960999, -0.2737581133842468, 0.08317914605140686, 0.101468525826931, 0.116551972925663, 0.08889119327068329, 0.13840146362781525, -0.14281342923641205, -0.02063894271850586, 0.04773840308189392, -0.20758341252803802, 0.07335003465414047, 0.10031629353761673, 0.06009524315595627, -0.0636158287525177, -0.06670880317687988, 0.1925760805606842, 0.12364829331636429, -0.10816323757171631, -0.04552292823791504, 0.12375964224338531, -0.19284895062446594, -0.053906671702861786, 0.045387186110019684, -0.06805865466594696, -0.13395515084266663, -0.21357685327529907, 0.07231072336435318, 0.3609267473220825, 0.16164539754390717, -0.0837593674659729, -0.07219741493463516, -0.023231789469718933, -0.05481792241334915, 0.02408052608370781, -0.047479044646024704, -0.13313892483711243, 0.048310574144124985, 0.04092441126704216, 0.08422858268022537, 0.1909366399049759, 0.06106634810566902, -0.056474074721336365, 0.19454769790172577, -0.007521555759012699, -0.024079633876681328, -0.012472364120185375, 0.014940573833882809, -0.11443138867616653, -0.023395517840981483, -0.1882413774728775, -0.024233926087617874, 0.0152375977486372, -0.09376036375761032, 0.03135654330253601, 0.15474700927734375, -0.19576309621334076, 0.14873257279396057, -0.024694055318832397, -0.06632689386606216, -0.003542945021763444, 0.11903517693281174, -0.17779502272605896, -0.04679781571030617, 0.18365126848220825, -0.13966131210327148, 0.134355828166008, 0.13971492648124695, 0.02715524099767208, 0.0631771981716156, 0.1010141372680664, 0.023658189922571182, 0.035137321799993515, 0.0015997763257473707, -0.14985816180706024, -0.12355433404445648, 0.040290895849466324, -0.003104854142293334, 0.05491870269179344, 0.013637270778417587]]', 'front_tampered_result': 'clear', 'issuing_country': 'IRQ', 'valid_nationality': 'clear'}

#sudan_1
#step_data = {'error': '', 'doc_type': 'national_identity_card', 'id_number': '11425651329', 'first_name': 'Yaqub', 'middle_name': 'Idris', 'last_name': 'Ibnur Talib', 'first_name_ar': '', 'middle_name_ar': '', 'last_name_ar': '', 'occupation_ar': 'عامل', 'occupation_en': 'Worker', 'place_of_birth': 'الجزيرة - جنوب الجزيرة', 'place_of_birth_en': 'Al Jazirah - Junub Al Jazirah', 'dob': '1995/01/01', 'name_ar': 'يعقوب ادريس ابكرالطيب', 'name': 'Yaqub Idris Ibnur Talib', 'header_verified': True, 'occupation': 'Worker', 'front_extracted_data': '', 'translated_front_id_text': '', 'front_coloured': True, 'front_doc_on_pp': 'clear', 'front_logo_result': 'clear', 'front_template_result': 'clear', 'front_screenshot_result': 'clear', 'front_photo_on_screen_result': 'clear', 'front_blurred': 'clear', 'front_glare': 'clear', 'front_face_locations': '[[640, 299, 775, 194]]', 'front_face_encodings': '[[-0.14293399453163147, 0.0453389473259449, 0.0822397768497467, 0.013220453634858131, 0.01958652026951313, -0.1143980473279953, 0.10417230427265167, -0.08638820052146912, 0.09875451028347015, -0.05735873803496361, 0.2183515727519989, 0.007302300538867712, -0.18704940378665924, -0.148111954331398, 0.09408929198980331, 0.09255657345056534, -0.128230482339859, -0.14851635694503784, -0.10478074103593826, -0.12839461863040924, 0.020139029249548912, 0.03296399861574173, 0.06879811733961105, 0.014846398495137691, -0.09454075247049332, -0.2470824271440506, -0.031061187386512756, -0.19617077708244324, 0.0682586282491684, -0.053842898458242416, 0.08287879824638367, 0.04619584232568741, -0.19565816223621368, -0.0016596823697909713, -0.005818485748022795, -0.004011861048638821, 0.04387576878070831, 0.006203844211995602, 0.1854439079761505, -0.05110401287674904, -0.15298490226268768, -0.08251217007637024, -0.020809020847082138, 0.23482975363731384, 0.10518648475408554, -0.05037465691566467, -0.01700245775282383, 0.029019344598054886, 0.04070042073726654, -0.22832420468330383, 0.036883920431137085, 0.06919892132282257, 0.15274225175380707, 0.050300415605306625, 0.008478324860334396, -0.1402193009853363, 0.059277862310409546, -0.012283972464501858, -0.2434292435646057, 0.07120748609304428, 0.08797718584537506, -0.11081209778785706, -0.10168496519327164, 0.006498175673186779, 0.23863233625888824, 0.06727743148803711, -0.13261884450912476, -0.09787764400243759, 0.1270746886730194, -0.13408003747463226, 0.02747592329978943, 0.12558883428573608, -0.1050235852599144, -0.13346579670906067, -0.18129362165927887, 0.06347804516553879, 0.35338929295539856, 0.10948945581912994, -0.18339750170707703, -0.003632384818047285, -0.22130230069160461, 0.07086938619613647, -0.007637564092874527, -0.02904914692044258, -0.09806235134601593, 0.06319519132375717, -0.11798971891403198, 0.03583625704050064, 0.10080231726169586, -0.020687244832515717, -0.09309408068656921, 0.21647977828979492, -0.017490088939666748, 0.0065428391098976135, 0.015162600204348564, -0.03979327157139778, 0.0276897344738245, -0.04852145537734032, -0.05123946815729141, 0.0031846342608332634, 0.03198098763823509, -0.1494300663471222, 0.008204362355172634, 0.050009921193122864, -0.17652633786201477, 0.17163653671741486, 0.01273390743881464, 0.029901519417762756, 0.009505603462457657, 0.09728629142045975, -0.0878821313381195, -0.05014844611287117, 0.0961213931441307, -0.23781298100948334, 0.24289998412132263, 0.1753171682357788, 0.03935014083981514, 0.1422310471534729, -0.02930610254406929, 0.07722464948892593, -0.07385111600160599, -0.03233227878808975, -0.11087166517972946, -0.06263909488916397, 0.07043348997831345, -0.017294185236096382, 0.05291757360100746, 0.05571043863892555]]'}

#sudan_2
#step_data = {'error': '', 'doc_type': 'national_identity_card', 'id_number': '19007536500', 'first_name': 'Yousef', 'middle_name': 'Awad', 'last_name': 'Abdellah', 'first_name_ar': '', 'middle_name_ar': '', 'last_name_ar': '', 'occupation_ar': 'طالب', 'occupation_en': 'Student', 'place_of_birth': 'الجزيرة - جنوب الجزيرة', 'place_of_birth_en': 'Al Jazirah - Janoub Al Jazirah', 'dob': '1997/01/01', 'name_ar': 'يوسف عوض عبدالله', 'name': 'Yousef Awad Abdellah', 'header_verified': True, 'occupation': 'Student', 'front_extracted_data': '', 'translated_front_id_text': '', 'front_coloured': True, 'front_doc_on_pp': 'clear', 'front_logo_result': 'clear', 'front_template_result': 'clear', 'front_screenshot_result': 'clear', 'front_photo_on_screen_result': 'clear', 'front_blurred': 'clear', 'front_glare': 'clear', 'front_face_locations': '[[704, 287, 840, 180]]', 'front_face_encodings': '[[-0.10730506479740143, 0.17220690846443176, 0.1231796145439148, -0.0030100836884230375, -0.016093436628580093, -0.1609976589679718, 0.050404854118824005, -0.10344164818525314, 0.133228600025177, -0.019816767424345016, 0.2884325385093689, -0.06599615514278412, -0.14813563227653503, -0.08439142256975174, 0.0005138526321388781, 0.13522712886333466, -0.12451565265655518, -0.11085903644561768, -0.06809520721435547, -0.08616907894611359, 0.0395459420979023, -0.01057202648371458, 0.015821296721696854, 0.04239743947982788, -0.08686059713363647, -0.3069152534008026, -0.08269453793764114, -0.14887680113315582, 0.07423578947782516, -0.11483772099018097, 0.02909233793616295, 0.015594243071973324, -0.21768343448638916, -0.10345327854156494, -0.02434033527970314, 0.002173003973439336, -0.0302935391664505, -0.009546938352286816, 0.19524161517620087, 0.01949397847056389, -0.11548420041799545, 0.061702050268650055, 0.011454084888100624, 0.29616495966911316, 0.17292042076587677, -0.0066808974370360374, 0.017263418063521385, 0.028227264061570168, 0.04180147126317024, -0.17591728270053864, 0.027159500867128372, 0.09023760259151459, 0.17783737182617188, 0.061490193009376526, 0.06828808784484863, -0.11416811496019363, 0.047381989657878876, 0.0220283642411232, -0.2732735276222229, 0.12761163711547852, 0.148335799574852, -0.12435582280158997, -0.04490480571985245, 0.03512902930378914, 0.22285506129264832, 0.07179778069257736, -0.06498504430055618, -0.08082215487957001, 0.1630454957485199, -0.12383583933115005, 0.04327738657593727, 0.03400762379169464, -0.09991607069969177, -0.1494893878698349, -0.20730483531951904, 0.12037267535924911, 0.30146491527557373, 0.1282101273536682, -0.18704602122306824, 0.05105043575167656, -0.1127905622124672, 0.04911777377128601, 0.04016523063182831, -0.03363250568509102, -0.046799950301647186, -0.003926105331629515, -0.13656175136566162, 0.022936353459954262, 0.09904005378484726, -0.00965873058885336, -0.04502691701054573, 0.22343264520168304, -0.07396950572729111, -0.013087823987007141, 0.02992790751159191, -0.06616490334272385, -0.08660219609737396, -0.008515996858477592, -0.06796715408563614, 0.03201810270547867, -0.014799271710216999, -0.14472611248493195, -0.023568186908960342, 0.03246031701564789, -0.15198950469493866, 0.08789791166782379, -0.018266744911670685, 0.02307259663939476, -0.09220798313617706, 0.09214204549789429, -0.12179742753505707, -0.040191326290369034, 0.11893540620803833, -0.2163940966129303, 0.31659579277038574, 0.16621291637420654, -0.029586825519800186, 0.09015022963285446, 0.03589753061532974, 0.024745497852563858, 0.005614289548248053, -0.004516139626502991, -0.06968890875577927, -0.07021667063236237, 0.023623012006282806, -0.049231573939323425, 0.08193041384220123, 0.05761392042040825]]'}
#step_data= None

#==================UAE step data====================
#step_data = {'dob':'something','expiry_date':'something','gender':'female','id_number_front': '784198374806549', 'front_extracted_data': '784-1983-7480654-9 is header verified:True', 'front_coloured': True, 'front_doc_on_pp': 'clear', 'front_logo_result': 'clear', 'front_screenshot_result': 'clear', 'front_photo_on_screen_result': 'clear', 'front_blurred': 'clear', 'front_glare': 'clear', 'front_face_locations': '[[325, 374, 523, 218]]', 'front_face_encodings': '[[-0.05987882614135742, 0.12412834912538528, 0.09973640739917755, -0.08589912205934525, -0.06312640756368637, -0.027888957411050797, -0.02628411538898945, -0.11296828836202621, 0.17442205548286438, -0.06815183162689209, 0.20672403275966644, -0.002789698541164398, -0.28345659375190735, 0.0018191750859841704, -0.07060862332582474, 0.1919940710067749, -0.1010129526257515, -0.1386457234621048, -0.07021927088499069, 0.010880582965910435, 0.05471670627593994, 0.05005388334393501, 0.0007364506018348038, 0.05521250143647194, -0.0957576259970665, -0.3605428636074066, -0.05106842517852783, -0.04308754578232765, -0.07755561918020248, 0.019622117280960083, -0.06366195529699326, 0.09245289862155914, -0.1975066363811493, -0.016339916735887527, 0.10823123157024384, 0.09026895463466644, -0.04281133785843849, -0.026845980435609818, 0.1454313099384308, 0.032757483422756195, -0.2288973033428192, -0.023925719782710075, 0.13148702681064606, 0.21348997950553894, 0.22114139795303345, 0.05932757630944252, 0.05979195237159729, -0.10767292976379395, 0.027860676869750023, -0.33015212416648865, 0.08680054545402527, 0.13802260160446167, 0.08433399349451065, 0.07650292664766312, 0.07965130358934402, -0.22345097362995148, -0.0623435378074646, 0.0714091956615448, -0.17722313106060028, 0.017348794266581535, 0.05723891779780388, -0.061513982713222504, -0.10763972252607346, -0.12237560749053955, 0.2674561142921448, 0.16779756546020508, -0.19287876784801483, -0.09540380537509918, 0.20363099873065948, -0.16567544639110565, -0.03505413234233856, 0.02595936320722103, -0.12540778517723083, -0.17188943922519684, -0.2433060258626938, 0.02653193660080433, 0.4335646629333496, 0.18331459164619446, -0.18117041885852814, 0.023829640820622444, -0.13733328878879547, 0.034990280866622925, -0.029915062710642815, 0.030847344547510147, -0.03025297075510025, 0.030553603544831276, -0.03673513978719711, 0.02341989241540432, 0.20398682355880737, -0.036901336163282394, -0.002825529780238867, 0.23130066692829132, -0.0385236032307148, -0.0025922369677573442, -0.01059708558022976, 0.051241230219602585, -0.09005739539861679, -0.06284863501787186, -0.20771218836307526, -0.09453053772449493, -0.05344261974096298, -0.04609907045960426, 0.027532098814845085, 0.15209221839904785, -0.24374224245548248, 0.11825080215930939, -0.02257711999118328, -0.053398653864860535, 0.038672398775815964, 0.06430477648973465, -0.06908850371837616, -0.08316896855831146, 0.11729180067777634, -0.21852315962314606, 0.21310436725616455, 0.12843795120716095, 0.025098666548728943, 0.1411980539560318, 0.04268787056207657, 0.10464237630367279, 0.025844033807516098, -0.07513391226530075, -0.12308139353990555, -0.11371471732854843, 0.062051691114902496, -0.013762421905994415, 0.07357428222894669, 0.02052510716021061]]', 'front_tampered_result': 'clear'}
#step_data = {'id_number_front': '784200186857403', 'front_extracted_data': '784-2001-8685740-3 is header verified:True', 'front_coloured': True, 'front_doc_on_pp': 'clear', 'front_logo_result': 'clear', 'front_screenshot_result': 'clear', 'front_photo_on_screen_result': 'clear', 'front_blurred': 'clear', 'front_glare': 'clear', 'front_face_locations': '[[729, 1702, 940, 1537]]', 'front_face_encodings': '[[-0.17893624305725098, 0.08002620935440063, 0.04251479357481003, -0.11494272947311401, -0.020156951621174812, -0.09155113250017166, 0.003996017388999462, -0.015387175604701042, 0.2121490240097046, -0.10538063198328018, 0.26359257102012634, -0.006514596287161112, -0.24749620258808136, -0.08248293399810791, -0.04994858801364899, 0.0924932137131691, -0.05348164960741997, -0.12641023099422455, -0.0637752041220665, -0.10496372729539871, 0.1209242194890976, 0.04148753732442856, 0.04974662885069847, 0.06247073784470558, -0.12398635596036911, -0.3463989794254303, -0.11709268391132355, -0.09240072965621948, 0.027304327115416527, -0.07327228039503098, 0.03791224956512451, 0.041866861283779144, -0.16854088008403778, -0.0790574848651886, 0.06320299208164215, 0.07999583333730698, 0.030020875856280327, 0.003570151748135686, 0.22072498500347137, -0.03213873505592346, -0.1153748631477356, -0.010002737864851952, 0.08967854082584381, 0.2857474982738495, 0.113850899040699, 0.06286575645208359, 0.03493187204003334, -0.05688781663775444, 0.08493464440107346, -0.25441962480545044, 0.12742240726947784, 0.11720998585224152, 0.1644354909658432, 0.020408891141414642, 0.17381663620471954, -0.09303896874189377, 0.0116901695728302, 0.12014693766832352, -0.1966182291507721, 0.15854382514953613, 0.06683792918920517, -0.03387501835823059, -0.0885969027876854, -0.038977913558483124, 0.13034605979919434, 0.09650201350450516, -0.13828040659427643, -0.15469233691692352, 0.17644402384757996, -0.17623499035835266, -0.0036620700266212225, 0.13825391232967377, -0.10001858323812485, -0.19798795878887177, -0.19070318341255188, 0.08381331712007523, 0.38667792081832886, 0.22201642394065857, -0.15056389570236206, 0.028159521520137787, -0.07078894227743149, 0.002261669607833028, 0.06621331721544266, -0.058552999049425125, -0.09348727762699127, -0.05552661046385765, -0.13650111854076385, 0.07568228989839554, 0.20452626049518585, 0.019207600504159927, -0.08815761655569077, 0.22660286724567413, 0.00874039251357317, 0.07861711084842682, -0.019317733123898506, 0.05434723570942879, -0.09861660748720169, -0.0040417443960905075, -0.14699232578277588, 0.03805059567093849, 0.05589502677321434, -0.051508162170648575, -0.019493311643600464, 0.06367391347885132, -0.13387107849121094, 0.058087725192308426, -0.04752401262521744, -0.03616251051425934, -0.06566735357046127, 0.13394847512245178, -0.1888636201620102, -0.041228219866752625, 0.08030783385038376, -0.20920585095882416, 0.21871937811374664, 0.16841885447502136, 0.034278079867362976, 0.11020322889089584, 0.11056862771511078, 0.0010055091697722673, 0.1351475715637207, -0.0880827084183693, -0.09269296377897263, -0.1415557712316513, 0.03071238100528717, -0.009352943859994411, 0.0812937319278717, 0.007108442019671202]]', 'front_tampered_result': 'clear'}
#step_data = {'id_number_front': '784198102927591', 'front_extracted_data': '784-1981-0292759-1 is header verified:True', 'front_coloured': True, 'front_doc_on_pp': 'clear', 'front_logo_result': 'clear', 'front_screenshot_result': 'clear', 'front_photo_on_screen_result': 'clear', 'front_blurred': 'clear', 'front_glare': 'clear', 'front_face_locations': '[[914, 1067, 1644, 540]]', 'front_face_encodings': '[[-0.11111505329608917, 0.06421567499637604, 0.023923123255372047, -0.05053265765309334, -0.09463699907064438, -0.031756673008203506, 0.016128573566675186, -0.1744518131017685, 0.1444181501865387, -0.08452560007572174, 0.29311397671699524, -0.1252783238887787, -0.19524534046649933, -0.17313599586486816, -0.05119108408689499, 0.1481456756591797, -0.11489591747522354, -0.09602310508489609, -0.06342300772666931, -0.08921352028846741, -0.03984237462282181, -0.07697980850934982, 0.06093278527259827, 0.03956836462020874, -0.0916101485490799, -0.33909228444099426, -0.08605316281318665, -0.12508130073547363, 0.010553634725511074, -0.05401366576552391, -0.10292576253414154, 0.09484846144914627, -0.21759441494941711, -0.1288144290447235, -0.022293079644441605, 0.12775444984436035, -0.027057012543082237, -0.03887897729873657, 0.15113767981529236, -0.06709619611501694, -0.06429930031299591, -0.000872293021529913, 0.019173305481672287, 0.20972822606563568, 0.1694037765264511, 0.0002803290553856641, 0.03924288600683212, -0.06713435053825378, 0.09138587862253189, -0.18094366788864136, 0.041792381554841995, 0.08132848888635635, 0.1498025506734848, -0.018434731289744377, 0.05125142261385918, -0.08690278232097626, -0.04314133897423744, 0.0999903529882431, -0.14198681712150574, 0.02383754774928093, 0.02546548843383789, 0.0002595866681076586, -0.10852450877428055, -0.09418817609548569, 0.25920718908309937, 0.17555755376815796, -0.09491220861673355, -0.06276827305555344, 0.2058543711900711, -0.0627337098121643, 0.031646475195884705, 0.023922890424728394, -0.13616718351840973, -0.18576806783676147, -0.20900583267211914, 0.1007225438952446, 0.41788217425346375, 0.09723547846078873, -0.18834535777568817, -0.020481295883655548, -0.11493094265460968, -0.016603615134954453, 0.034039467573165894, -0.018747778609395027, -0.08269524574279785, 0.021853793412446976, -0.11304810643196106, 0.07679488509893417, 0.15388192236423492, -0.07637466490268707, -0.041152387857437134, 0.17519153654575348, -0.053802549839019775, 0.03483827784657478, 0.037195835262537, 0.013518203049898148, -0.05559194087982178, 0.04853420704603195, -0.1334286779165268, -0.003406825475394726, 0.15260916948318481, -0.13833777606487274, 0.004294148180633783, 0.05673516169190407, -0.13786886632442474, 0.051677294075489044, -0.024642402306199074, -0.004264371935278177, 0.02253137342631817, -0.03982991352677345, -0.08662717044353485, -0.0163174569606781, 0.17729882895946503, -0.2279728651046753, 0.18695104122161865, 0.11237567663192749, -0.03757638484239578, 0.1567094922065735, 0.054965075105428696, 0.07368684560060501, 0.02004168927669525, -0.04206457361578941, -0.10625892877578735, -0.07551239430904388, 0.08366112411022186, -0.0073470319621264935, 0.0814666673541069, 0.03900747373700142]]', 'front_tampered_result': 'clear'}

#
#============THE USUAL LOOP=================
for image in images:
    #data_legacy = run_test(root,image, side='page1', creds=creds, genai_key=genai_key, country=country)
    starting_point = time.time()
    data_agent = run_test_agent(root,image,side=side, creds=creds, openai_key=openai_key, gemni_key=gemni_key, country=country, nationality=nationality,step_data=step_data_new_openai)
    end = time.time()
    time_taken = end-starting_point
    print(time_taken)
    print(f'file:{image}')
    print("Data Agent:", data_agent)
    # if data_agent['error']=='':
    #     print(data_agent['mrz1'],'+', data_agent['mrz2'],'+', data_agent['mrz3'])
    data_agent['file'] = image
    outputs.append(data_agent)

    # for key in data_agent.keys():
    #     if key=='gender':
    #         print(f"{key}: {data_agent[key]}")
    # break

    print("=========================")




    # img = mpimg.imread(os.path.join(root,image))
    # plt.imshow(img)
    # plt.axis("off")  # optional
    # plt.show()




# for image in images:
#     #data_legacy = run_test(root,image, side='page1', creds=creds, genai_key=genai_key, country=country)
#
#
#     starting_point = time.time()
#
#     print(image)
#     data_agent = run_test_agent(root,image,side='back', creds=creds, openai_key=openai_key, gemni_key=gemni_key, country=country, nationality=nationality,step_data=step_data)
#     print("Data Agent:", data_agent)
#     # else:
#     #     data_agent = run_test_agent(root, image, side='back', creds=creds, openai_key=openai_key, gemni_key=gemni_key,
#     #                                 country=country, nationality=nationality, step_data=step_data)
#
#     end = time.time()
#     time_taken = end-starting_point
#     print(time_taken)
#     #print(f'file:{image}')
#     #print("Data Agent:", data_agent)
#     # if data_agent['error']=='':
#     #     print(data_agent['mrz1'],'+', data_agent['mrz2'],'+', data_agent['mrz3'])
#     #data_agent['file'] = image
#     #outputs.append(data_agent)



# for i, image in enumerate(images):
#     #data_legacy = run_test(root,image, side='page1', creds=creds, genai_key=genai_key, country=country)
#     starting_point = time.time()
#     if i==0:
#
#         data_agent = run_test_agent(root,image,side='front', creds=creds, api_key=api_key, genai_key=genai_key, country=country, nationality=nationality,step_data=step_data)
#         print(data_agent.keys())
#     else:
#         data_agent = run_test_agent(root, image, side='back', creds=creds, api_key=api_key, genai_key=genai_key,
#                                     country=country, nationality=nationality, step_data=step_data)
#         print(data_agent.keys())
#
#     end = time.time()
#     time_taken = end-starting_point
#     # print(time_taken)
#     # print(f'file:{image}')
#     # print("Data Agent:", data_agent)
#     # if data_agent['error']=='':
#     #     print(data_agent['mrz1'],'+', data_agent['mrz2'],'+', data_agent['mrz3'])
#     data_agent['file'] = image
#     outputs.append(data_agent)



#pd.DataFrame(outputs).to_csv("/Users/husunshujaat/Downloads/lbn_passport_test.csv")

#Test:
"""
2. IRQ Passport
3. LBN Passport
4. SDN Passport
5. SYR Passport
6. JOR Passport
7. PSE Passport
8. Expired Passports

National ID
1. Front + Back IRQ National ID
"""

ocr_text = """
State Of Qatar
Residency Permit
Statt
ID.No:
28776002462
D.O.B:
25/10/1987
Expiry:
11/01/2026
Nationality:
Occupation:
سوري
SYRIA
of
Qatar
دولة قطر
رخصة إقامة
الرقم الشخصي
تاريخ الميلاد:
الصلاحية
الجنسية:
المهنة
مدرس رياضيا
الإسم: خالد صيحان العبد العزيز
Name: KHALED SIJAN ALABDULAZIZ
"""


# data_agent_new = {'error': '', 'error_details': '', 'id_number_front': '199089705180', 'card_number_front': 'AJ8557785', 'first_name': 'بلال', 'first_name_en': 'Bilal', 'father_name': 'عامر', 'father_name_en': 'Amer', 'third_name': 'محمد', 'third_name_en': 'Mohammed', 'last_name': 'العزاوي', 'last_name_en': 'Al-Azzawi', 'mother_first_name': 'نداء', 'mother_first_name_en': 'Nidaa', 'mother_last_name': 'ناصر', 'mother_last_name_en': 'Nasser', 'gender_ar': 'ذكر', 'gender': 'male', 'blood_type': 'O', 'serial_number': '', 'doc_type': 'national_identity_card', 'nationality': 'IRQ', 'nationality_en': 'IRQ', 'name': 'بلال عامر العزاوي', 'name_en': 'Bilal Amer Al-Azzawi', 'front_extracted_data': 'جمهورية العراق / كومارى عيراق\nوزارة الداخلية / وەزارەتى ناوخو\nالاسم / ناو : بلال\nالأب / باوك : عامر\nالجد / بابير : محمد\nالبطاقة الوطنية / كارني\nمديرية الجنسية العامة\nبیریز میم رایاتی گشتی بر نگار نامه\n199089705180\nاللقب / نازناو : العزاوي\nالأم / دايك : نداء\nالجد / بابير : ناصر\nالجنس / رمز : ذكر\nفصيلة الدم/ گروبي خوين : 0\nAJ8557785', 'translated_front_id_text': '', 'front_coloured': True, 'back_coloured': True, 'front_doc_on_pp': 'clear', 'front_logo_result': 'clear', 'front_template_result': 'clear', 'front_screenshot_result': 'clear', 'front_photo_on_screen_result': 'clear', 'front_blurred': 'clear', 'front_glare': 'clear', 'front_face_locations': '[[125, 107, 224, 34]]', 'front_face_encodings': '[[-0.10338075459003448, 0.14578396081924438, 0.08440461754798889, -0.14605315029621124, -0.07728587090969086, -0.007242473773658276, -0.008862236514687538, -0.040224917232990265, 0.21329447627067566, -0.019070159643888474, 0.23413123190402985, 0.02645161561667919, -0.2096935212612152, -0.04236436262726784, 0.03522923216223717, 0.073409803211689, -0.19081979990005493, -0.061631496995687485, -0.025643637403845787, -0.08665827661752701, 0.03180794045329094, 0.04158361628651619, 0.11483301222324371, 0.015252680517733097, -0.11866310983896255, -0.3843784034252167, -0.07082019001245499, -0.11494867503643036, 0.1052173301577568, -0.11641714721918106, 0.06066722422838211, 0.004927462432533503, -0.1414071023464203, -0.018532700836658478, -0.021959513425827026, 0.0867014229297638, -0.0636298730969429, -0.06844110786914825, 0.22961203753948212, 0.0014244673075154424, -0.14490997791290283, 0.04284915328025818, 0.03206323832273483, 0.27246272563934326, 0.16646306216716766, 0.00908429641276598, 0.08088627457618713, -0.07722512632608414, 0.12837809324264526, -0.21485482156276703, 0.1859176754951477, 0.09845980256795883, 0.14346027374267578, -0.010211015120148659, 0.1132977157831192, -0.14860503375530243, -0.036888159811496735, 0.16258853673934937, -0.2784234881401062, 0.15115107595920563, 0.1418038308620453, -0.006882551591843367, -0.06375027447938919, -0.056210171431303024, 0.18128594756126404, 0.15923236310482025, -0.17005446553230286, -0.13601963222026825, 0.09231147915124893, -0.09972874820232391, -0.014746789820492268, 0.07495158910751343, -0.108131043612957, -0.2035558819770813, -0.2061217725276947, 0.1485489308834076, 0.3332235515117645, 0.13277705013751984, -0.16884519159793854, -0.034240104258060455, -0.07452703267335892, -0.03606678918004036, 0.037441324442625046, 0.08154100179672241, -0.11639115959405899, -0.059341561049222946, -0.11272046715021133, 0.05262646824121475, 0.10150162875652313, -0.01275008823722601, -0.07367321103811264, 0.2226407378911972, 0.008517914451658726, 0.053896088153123856, -0.056915149092674255, 0.08242812007665634, -0.19609607756137848, 0.0658753290772438, -0.15108339488506317, -0.0064195371232926846, 0.03170144185423851, -0.08067114651203156, -0.02434239722788334, 0.07204984128475189, -0.16979488730430603, 0.18769438564777374, 0.0015946191269904375, -0.06802070140838623, -0.006363314110785723, -0.000990344095043838, -0.10280732065439224, -0.04766012728214264, 0.15146756172180176, -0.2721529006958008, 0.20902280509471893, 0.17280267179012299, 0.06903448700904846, 0.20497949421405792, 0.10668903589248657, 0.052189137786626816, 0.10862745344638824, -0.007052598986774683, -0.12816080451011658, -0.015955518931150436, 0.022478483617305756, -0.011407117359340191, 0.058699991554021835, 0.05927924066781998]]', 'front_tampered_result': 'clear', 'issuing_country': 'IRQ', 'valid_nationality': 'clear', 'time_taken': 14.23398470878601}
#
# data_agent_old=  {'error': '', 'error_details': '', 'id_number_front': '199089705180', 'card_number_front': 'AJ8557785', 'first_name': 'بلال', 'first_name_en': 'Bilal', 'father_name': 'عامر', 'father_name_en': 'Amer', 'third_name': 'محمد', 'third_name_en': 'Mohammed', 'last_name': 'العزاوي', 'last_name_en': 'Al-Azzawi', 'mother_first_name': 'نداء', 'mother_first_name_en': 'Nidaa', 'mother_last_name': 'ناصر', 'mother_last_name_en': 'Nasser', 'gender_ar': 'ذكر', 'gender': 'male', 'blood_type': 'O', 'serial_number': '', 'doc_type': 'national_identity_card', 'nationality': 'IRQ', 'nationality_en': 'IRQ', 'name': 'بلال عامر العزاوي', 'name_en': 'Bilal Amer Al-Azzawi', 'front_extracted_data': 'جمهورية العراق / كومارى عيراق\nوزارة الداخلية / وەزارەتى ناوخو\nالاسم / ناو : بلال\nالأب / باوك : عامر\nالجد / بابير : محمد\nالبطاقة الوطنية / كارني\nمديرية الجنسية العامة\nبیریز میم رایاتی گشتی بر نگار نامه\n199089705180\nاللقب / نازناو : العزاوي\nالأم / دايك : نداء\nالجد / بابير : ناصر\nالجنس / رمز : ذكر\nفصيلة الدم/ گروبي خوين : 0\nAJ8557785', 'translated_front_id_text': '', 'front_coloured': True, 'back_coloured': True, 'front_doc_on_pp': 'clear', 'front_logo_result': 'clear', 'front_template_result': 'clear', 'front_screenshot_result': 'clear', 'front_photo_on_screen_result': 'clear', 'front_blurred': 'clear', 'front_glare': 'clear', 'front_face_locations': '[[125, 107, 224, 34]]', 'front_face_encodings': '[[-0.10338075459003448, 0.14578396081924438, 0.08440461754798889, -0.14605315029621124, -0.07728587090969086, -0.007242473773658276, -0.008862236514687538, -0.040224917232990265, 0.21329447627067566, -0.019070159643888474, 0.23413123190402985, 0.02645161561667919, -0.2096935212612152, -0.04236436262726784, 0.03522923216223717, 0.073409803211689, -0.19081979990005493, -0.061631496995687485, -0.025643637403845787, -0.08665827661752701, 0.03180794045329094, 0.04158361628651619, 0.11483301222324371, 0.015252680517733097, -0.11866310983896255, -0.3843784034252167, -0.07082019001245499, -0.11494867503643036, 0.1052173301577568, -0.11641714721918106, 0.06066722422838211, 0.004927462432533503, -0.1414071023464203, -0.018532700836658478, -0.021959513425827026, 0.0867014229297638, -0.0636298730969429, -0.06844110786914825, 0.22961203753948212, 0.0014244673075154424, -0.14490997791290283, 0.04284915328025818, 0.03206323832273483, 0.27246272563934326, 0.16646306216716766, 0.00908429641276598, 0.08088627457618713, -0.07722512632608414, 0.12837809324264526, -0.21485482156276703, 0.1859176754951477, 0.09845980256795883, 0.14346027374267578, -0.010211015120148659, 0.1132977157831192, -0.14860503375530243, -0.036888159811496735, 0.16258853673934937, -0.2784234881401062, 0.15115107595920563, 0.1418038308620453, -0.006882551591843367, -0.06375027447938919, -0.056210171431303024, 0.18128594756126404, 0.15923236310482025, -0.17005446553230286, -0.13601963222026825, 0.09231147915124893, -0.09972874820232391, -0.014746789820492268, 0.07495158910751343, -0.108131043612957, -0.2035558819770813, -0.2061217725276947, 0.1485489308834076, 0.3332235515117645, 0.13277705013751984, -0.16884519159793854, -0.034240104258060455, -0.07452703267335892, -0.03606678918004036, 0.037441324442625046, 0.08154100179672241, -0.11639115959405899, -0.059341561049222946, -0.11272046715021133, 0.05262646824121475, 0.10150162875652313, -0.01275008823722601, -0.07367321103811264, 0.2226407378911972, 0.008517914451658726, 0.053896088153123856, -0.056915149092674255, 0.08242812007665634, -0.19609607756137848, 0.0658753290772438, -0.15108339488506317, -0.0064195371232926846, 0.03170144185423851, -0.08067114651203156, -0.02434239722788334, 0.07204984128475189, -0.16979488730430603, 0.18769438564777374, 0.0015946191269904375, -0.06802070140838623, -0.006363314110785723, -0.000990344095043838, -0.10280732065439224, -0.04766012728214264, 0.15146756172180176, -0.2721529006958008, 0.20902280509471893, 0.17280267179012299, 0.06903448700904846, 0.20497949421405792, 0.10668903589248657, 0.052189137786626816, 0.10862745344638824, -0.007052598986774683, -0.12816080451011658, -0.015955518931150436, 0.022478483617305756, -0.011407117359340191, 0.058699991554021835, 0.05927924066781998]]', 'front_tampered_result': 'clear', 'issuing_country': 'IRQ', 'valid_nationality': 'clear', 'time_taken': 11.436336278915405}

"""
Total Time taken in dev: 21.408347368240356 seconds
"""