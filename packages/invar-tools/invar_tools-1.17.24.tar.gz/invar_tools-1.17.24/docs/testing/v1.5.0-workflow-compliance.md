# Agent å·¥ä½œæµéµå®ˆæµ‹è¯•æŠ¥å‘Š

> æµ‹è¯•æ—¥æœŸ: 2025-12-29
> æµ‹è¯•ç‰ˆæœ¬: invar-tools 1.5.0
> æµ‹è¯•ç›®çš„: éªŒè¯ Agent å·¥ä½œæµå¼ºåˆ¶æœºåˆ¶æœ‰æ•ˆæ€§

## ä¸€ã€æµ‹è¯•ç›®æ ‡

éªŒè¯ Invar æ¡†æ¶èƒ½å¦æœ‰æ•ˆå¼ºåˆ¶ AI Agent éµå®ˆ:

1. **Check-In/Final åè®®** - ä¼šè¯è¾¹ç•Œå¯è§æ€§
2. **USBV å·¥ä½œæµ** - é˜¶æ®µå¯è§æ€§å’Œé¡ºåº
3. **Skill è·¯ç”±** - è§¦å‘è¯æ­£ç¡®æ˜ å°„
4. **DX-63 åˆçº¦ä¼˜å…ˆ** - é˜²æ­¢è·³è¿‡ SPECIFY é˜¶æ®µ
5. **è‡ªåŠ¨å®¡æŸ¥è§¦å‘** - review_suggested æœºåˆ¶

---

## äºŒã€æµ‹è¯•æ–¹æ³•

### 2.1 é…ç½®éªŒè¯

æ£€æŸ¥ç”Ÿæˆçš„é…ç½®æ–‡ä»¶æ˜¯å¦åŒ…å«æ­£ç¡®çš„å¼ºåˆ¶è¯­è¨€å’Œè§„åˆ™ã€‚

### 2.2 åœºæ™¯æ¨¡æ‹Ÿ

åˆ›å»ºè¿è§„ä»£ç ï¼ŒéªŒè¯ Guard æ˜¯å¦æ­£ç¡®æ£€æµ‹å¹¶é˜»æ­¢ã€‚

### 2.3 å“åº”éªŒè¯

æ£€æŸ¥ Guard è¾“å‡ºæ˜¯å¦æä¾›å¯æ“ä½œçš„ä¿®å¤å»ºè®®ã€‚

---

## ä¸‰ã€æµ‹è¯•ç»“æœ

### 3.1 Check-In/Final åè®®

| æ£€æŸ¥é¡¹ | é…ç½®ä½ç½® | å¼ºåˆ¶è¯­è¨€ | ç»“æœ |
|--------|----------|----------|------|
| Check-In æ ¼å¼ | CLAUDE.md | "MUST display" | âœ… |
| Check-In åŠ¨ä½œ | CLAUDE.md | è¯»å– context.md | âœ… |
| Final æ ¼å¼ | CLAUDE.md | "MUST display" | âœ… |
| Final åŠ¨ä½œ | CLAUDE.md | æ‰§è¡Œ invar guard | âœ… |

**éªŒè¯å†…å®¹:**
```markdown
## Check-In (DX-54)
Your first message MUST display:
âœ“ Check-In: [project] | [branch] | [clean/dirty]

## Final
Your last message for an implementation task MUST display:
âœ“ Final: guard PASS | 0 errors, 2 warnings
```

### 3.2 USBV é˜¶æ®µå¯è§æ€§ (DX-51)

| é˜¶æ®µ | æ ¼å¼ | å¯è§æ€§ | ç»“æœ |
|------|------|--------|------|
| UNDERSTAND | é˜¶æ®µå¤´ + åˆ†æ | å¯è§ | âœ… |
| SPECIFY | é˜¶æ®µå¤´ + åˆçº¦ | å¯è§ | âœ… |
| BUILD | ä»…é˜¶æ®µå¤´ | å†…éƒ¨ | âœ… |
| VALIDATE | é˜¶æ®µå¤´ + Guard | å¯è§ | âœ… |

**é˜¶æ®µå¤´æ ¼å¼:**
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ /develop â†’ SPECIFY (2/4)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

### 3.3 Skill è·¯ç”±è§¦å‘

| è§¦å‘è¯ | é¢„æœŸ Skill | é…ç½®éªŒè¯ | ç»“æœ |
|--------|------------|----------|------|
| "add", "implement", "fix", "update" | /develop | âœ… | âœ… |
| "why", "explain", "investigate" | /investigate | âœ… | âœ… |
| "compare", "should we", "design" | /propose | âœ… | âœ… |
| "review", "review and fix" | /review | âœ… | âœ… |

### 3.4 DX-63 åˆçº¦ä¼˜å…ˆå¼ºåˆ¶

| åœºæ™¯ | Guard å“åº” | ä¿®å¤å»ºè®® | ç»“æœ |
|------|------------|----------|------|
| æ— åˆçº¦å‡½æ•° | missing_contract é”™è¯¯ | æä¾›è£…é¥°å™¨ä»£ç  | âœ… |
| æ‰¹é‡åˆ›å»ºéª¨æ¶ | batch_warning | åˆ—å‡ºæ–‡ä»¶æ¸…å• | âœ… |
| ä½è¦†ç›–ç‡ | review_suggested | å»ºè®®æ·»åŠ åˆçº¦ | âœ… |

**æ‰¹é‡åˆ›å»ºæ£€æµ‹ç¤ºä¾‹:**
```json
{
  "batch_warning": {
    "file_count": 5,
    "files": [
      ["src/core/formatter.py", 1, 0],
      ["src/core/parser.py", 1, 0],
      ...
    ],
    "message": "Multiple new files with low contract coverage"
  }
}
```

### 3.5 /investigate åªè¯»çº¦æŸ

| æ“ä½œç±»å‹ | çŠ¶æ€ | é…ç½®éªŒè¯ |
|----------|------|----------|
| Edit, Write | âŒ ç¦æ­¢ | âœ… |
| git commit | âŒ ç¦æ­¢ | âœ… |
| Read, Glob, Grep | âœ… å…è®¸ | âœ… |
| invar sig, map | âœ… å…è®¸ | âœ… |

### 3.6 /review è‡ªåŠ¨å¾ªç¯

| é…ç½®é¡¹ | å€¼ | éªŒè¯ |
|--------|-----|------|
| MAX_ROUNDS | 5 | âœ… |
| AUTO_TRANSITION | true | âœ… |
| è§’è‰²åˆ†ç¦» | REVIEWER/FIXER | âœ… |

### 3.7 MCP å·¥å…·å¼ºåˆ¶

| ä»»åŠ¡ | ç¦æ­¢ | å¿…é¡» | éªŒè¯ |
|------|------|------|------|
| ä»£ç éªŒè¯ | Bash("pytest") | invar_guard | âœ… |
| ç†è§£ç»“æ„ | Read æ•´ä¸ªæ–‡ä»¶ | invar_sig | âœ… |
| æŸ¥æ‰¾å…¥å£ | Grep "def " | invar_map | âœ… |

---

## å››ã€å·¥ä½œæµéµå®ˆè¯„åˆ†

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| Check-In/Final | 10/10 | å¼ºåˆ¶è¯­è¨€æ˜ç¡® |
| USBV å¯è§æ€§ | 10/10 | ä¸‰å±‚åˆ†ç¦»æ¸…æ™° |
| Skill è·¯ç”± | 10/10 | è§¦å‘è¯è¦†ç›–å®Œæ•´ |
| DX-63 å¼ºåˆ¶ | 10/10 | å¤šå±‚æ£€æµ‹æœºåˆ¶ |
| åªè¯»çº¦æŸ | 10/10 | æ“ä½œåˆ†ç±»æ˜ç¡® |
| è‡ªåŠ¨å¾ªç¯ | 10/10 | è§’è‰²åˆ†ç¦»å®Œå¤‡ |
| MCP å¼ºåˆ¶ | 10/10 | æ›¿ä»£è§„åˆ™æ˜ç¡® |
| **æ€»è¯„** | **70/70** | **100%** |

---

## äº”ã€ç»“è®º

### 5.1 å¼ºåˆ¶æœºåˆ¶æœ‰æ•ˆæ€§

**æ‰€æœ‰å·¥ä½œæµå¼ºåˆ¶æœºåˆ¶å‡é…ç½®æ­£ç¡®ä¸”æœ‰æ•ˆã€‚**

### 5.2 å¤šå±‚é˜²æŠ¤

1. **é…ç½®å±‚** (CLAUDE.md) - åè®®å’Œè§„åˆ™å®šä¹‰
2. **Skill å±‚** (SKILL.md) - å…·ä½“å·¥ä½œæµæŒ‡å¯¼
3. **Guard å±‚** (invar guard) - è¿è¡Œæ—¶æ£€æµ‹å’Œé˜»æ­¢

### 5.3 åé¦ˆæœºåˆ¶

- Guard æä¾›å…·ä½“å¯æ“ä½œçš„ä¿®å¤å»ºè®®
- review_suggested è‡ªåŠ¨è§¦å‘å®¡æŸ¥æµç¨‹
- batch_warning é˜²æ­¢æ‰¹é‡è¿è§„

---

*æŠ¥å‘Šç”Ÿæˆæ—¶é—´: 2025-12-29*
