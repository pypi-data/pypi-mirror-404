import{N as I,O as F,Q as r,T as x,V as U,W as P,X as v,Y as C,r as a,Z as h,_ as S,$ as j,a0 as E,j as u,a1 as D}from"./index-DYhWv8A3.js";var i,b=new Uint8Array(16);function L(){if(!i&&(i=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(b)}var O=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const f={randomUUID:O};function R(n,o,c){if(f.randomUUID&&!n)return f.randomUUID();n=n||{};var e=n.random||(n.rng||L)();return e[6]=e[6]&15|64,e[8]=e[8]&63|128,I(e)}function k(){F();const n=r(t=>t.setCurrentFlow),o=r(t=>t.currentFlow),c=x(t=>t.setClientId),{id:e}=U(),{mutateAsync:g}=P(),l=v(),p=r(t=>t.currentFlowId),d=r(t=>t.setIsLoading),m=C(t=>t.setPlaygroundPage);async function w(){try{return await g({id:e,public:!0})}catch(t){console.error(t),l("/")}}return a.useEffect(()=>{(async()=>{if(d(!0),p===""){const s=await w();s?n(s):l("/")}})(),d(!1)},[e]),a.useEffect(()=>{e&&h("Playground Page Loaded",{}),m(!0)},[]),a.useEffect(()=>{if(document.title=o?.name||"Langflow",o?.data){const{inputs:t,outputs:s}=S(o?.data?.nodes||[]);(t.length===0&&s.length===0||o?.access_type!=="PUBLIC")&&l("/")}},[o]),a.useEffect(()=>{const t=j("client_id");if(t)c(t);else{const s=R(),y={secure:window.location.protocol==="https:",sameSite:"Strict"};E("client_id",s,y),c(s)}},[]),u.jsx("div",{className:"flex h-full w-full flex-col items-center justify-center align-middle",children:o&&u.jsx(D,{open:!0,setOpen:()=>{},isPlayground:!0,playgroundPage:!0,children:u.jsx(u.Fragment,{})})})}export{k as default};
