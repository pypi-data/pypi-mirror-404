---
title: Document Classifier
description: Classify documents into predefined categories using LLM analysis
---

## Overview

Classify documents into predefined categories using LLM analysis. Supports PDFs, Word documents, and images with automatic parser selection and confidence scoring.

## Installation

```bash
pip install gaik[classifier]
# or
pip install gaik[all]
```

**Note:** Requires OpenAI or Azure OpenAI API access.

## Quick Start

```python
from gaik.software_components.doc_classifier import DocumentClassifier, get_openai_config

# Configure
config = get_openai_config(use_azure=True)
classifier = DocumentClassifier(config=config)

# Define categories
classes = ["invoice", "receipt", "contract", "report", "memo"]

# Classify single file
result = classifier.classify(
    file_or_dir="document.pdf",
    classes=classes
)

print(f"Class: {result['document.pdf']['class']}")
print(f"Confidence: {result['document.pdf']['confidence']:.2f}")
print(f"Reasoning: {result['document.pdf']['reasoning']}")
```

## Features

- **Multi-Format Support** - PDFs, Word documents (.docx, .doc), and images (.png, .jpg, .jpeg)
- **Smart Extraction** - Extracts first 1000 characters from PDFs/DOCX, analyzes full images
- **Auto Parser Selection** - PyMuPDF for PDFs, DocxParser for Word, VisionParser for images
- **Confidence Scoring** - Returns classification confidence (0.0-1.0) and reasoning
- **Batch Processing** - Classify entire directories of mixed file types
- **Unknown Fallback** - Automatic "unknown" class for uncertain classifications

## Basic API

### DocumentClassifier

```python
from gaik.software_components.doc_classifier import DocumentClassifier

classifier = DocumentClassifier(
    config=dict,              # From get_openai_config()
    model=None                # Optional model override
)

# Classify file(s)
results = classifier.classify(
    file_or_dir="path/to/file",   # Path to file or directory
    classes=["cat1", "cat2"],     # Classification categories
    parser=None                   # Optional: "pymupdf", "docx", "vision"
)
```

**Extraction Behavior:**
- **PDF files**: Extracts first 1000 characters using PyMuPDFParser
- **DOCX files**: Extracts first 1000 characters using DocxParser
- **Image files**: Analyzes entire image using VisionParser

**Returns:**
```python
{
    "filename.pdf": {
        "class": "invoice",
        "confidence": 0.95,
        "reasoning": "Contains invoice number and billing details"
    }
}
```

### Configuration

```python
from gaik.software_components.doc_classifier import get_openai_config

# Azure OpenAI (default)
config = get_openai_config(use_azure=True)

# Standard OpenAI
config = get_openai_config(use_azure=False)
```

## Environment Variables

| Variable | Required | Description |
|----------|----------|-------------|
| `AZURE_API_KEY` | Azure only | Azure OpenAI API key |
| `AZURE_ENDPOINT` | Azure only | Azure OpenAI endpoint URL |
| `AZURE_DEPLOYMENT` | Azure only | Azure deployment name |
| `OPENAI_API_KEY` | OpenAI only | Standard OpenAI API key |
| `AZURE_API_VERSION` | Optional | API version (default: 2025-03-01-preview) |

## Directory Classification

Classify all documents in a directory:

```python
from gaik.software_components.doc_classifier import DocumentClassifier, get_openai_config

config = get_openai_config(use_azure=True)
classifier = DocumentClassifier(config=config)

# Classify all documents in a directory
results = classifier.classify(
    file_or_dir="documents/",
    classes=["invoice", "receipt", "contract", "report"]
)

for filename, classification in results.items():
    print(f"{filename}: {classification['class']} ({classification['confidence']:.2f})")
```

## Custom Parser

Override the default parser for specific use cases:

```python
# Use vision parser for complex layouts
result = classifier.classify(
    file_or_dir="complex_document.pdf",
    classes=["invoice", "receipt"],
    parser="vision"  # Override default PyMuPDF parser
)
```

## Complete Example

```python
from gaik.software_components.doc_classifier import DocumentClassifier, get_openai_config
from pathlib import Path

# Configure
config = get_openai_config(use_azure=True)
classifier = DocumentClassifier(config=config)

# Define document categories
document_types = [
    "invoice",
    "receipt",
    "contract",
    "proposal",
    "report",
    "memo",
    "letter"
]

# Single file classification
result = classifier.classify(
    file_or_dir="incoming/document.pdf",
    classes=document_types
)

doc_class = result["document.pdf"]["class"]
confidence = result["document.pdf"]["confidence"]
reason = result["document.pdf"]["reasoning"]

print(f"Document type: {doc_class}")
print(f"Confidence: {confidence:.0%}")
print(f"Reason: {reason}")

# Batch classification
batch_results = classifier.classify(
    file_or_dir="incoming/",
    classes=document_types
)

# Organize files by type
for filename, classification in batch_results.items():
    doc_type = classification["class"]
    print(f"  {filename} -> {doc_type}")
```

## Error Handling

```python
from gaik.software_components.doc_classifier import DocumentClassifier, get_openai_config

try:
    config = get_openai_config(use_azure=True)
    classifier = DocumentClassifier(config=config)
    result = classifier.classify("document.pdf", classes=["invoice", "receipt"])
except FileNotFoundError:
    print("File not found")
except ValueError as e:
    print(f"Configuration error: {e}")
except Exception as e:
    print(f"Classification failed: {e}")
```

## Next Steps

- Learn about [Data Extraction](/toolkit/knowledge-extraction)
- Explore [PDF Parsing](/toolkit/parser) capabilities
- Check out [RAG Components](/toolkit/rag)
- View on [PyPI](https://pypi.org/project/gaik/) or [GitHub](https://github.com/GAIK-project/gaik-toolkit)
