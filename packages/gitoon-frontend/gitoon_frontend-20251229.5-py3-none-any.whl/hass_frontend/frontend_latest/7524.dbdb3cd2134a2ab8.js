export const __rspack_esm_id="7524";export const __rspack_esm_ids=["7524"];export const __webpack_modules__={63130(i,t,s){s.d(t,{l:()=>e});const e=async(i,t)=>{if(navigator.clipboard)try{return void await navigator.clipboard.writeText(i)}catch{}const s=t??document.body,e=document.createElement("textarea");e.value=i,s.appendChild(e),e.select(),document.execCommand("copy"),s.removeChild(e)}},60543(i,t,s){s.r(t),s.d(t,{HaQrCode:()=>c});s(18111),s(61701);var e=s(62826),a=s(96196),o=s(44457),r=s(81298),n=(s(38962),s(79468));class c extends a.WF{willUpdate(i){super.willUpdate(i),(i.has("data")||i.has("scale")||i.has("width")||i.has("margin")||i.has("maskPattern")||i.has("errorCorrectionLevel"))&&this._error&&(this._error=void 0)}updated(i){const t=this._canvas;if(t&&this.data&&(i.has("data")||i.has("scale")||i.has("width")||i.has("margin")||i.has("maskPattern")||i.has("errorCorrectionLevel")||i.has("centerImage"))){const i=getComputedStyle(this),s=i.getPropertyValue("--rgb-primary-text-color"),e=i.getPropertyValue("--rgb-card-background-color"),a=(0,n.v2)(s.split(",").map(i=>parseInt(i,10))),o=(0,n.v2)(e.split(",").map(i=>parseInt(i,10)));if(r.toCanvas(t,this.data,{errorCorrectionLevel:this.errorCorrectionLevel||(this.centerImage?"Q":"M"),width:this.width,scale:this.scale,margin:this.margin,maskPattern:this.maskPattern,color:{light:o,dark:a}}).catch(i=>{this._error=i.message}),this.centerImage){const i=this._canvas.getContext("2d"),s=new Image;s.src=this.centerImage,s.onload=()=>{i?.drawImage(s,.375*t.width,.375*t.height,t.width/4,t.height/4)}}}}render(){return this.data?this._error?a.qy`<ha-alert alert-type="error">${this._error}</ha-alert>`:a.qy`<canvas></canvas>`:a.s6}constructor(...i){super(...i),this.errorCorrectionLevel="medium",this.width=4,this.scale=4,this.margin=4}}c.styles=a.AH`:host{display:block}`,(0,e.Cg)([(0,o.MZ)()],c.prototype,"data",void 0),(0,e.Cg)([(0,o.MZ)({attribute:"error-correction-level"})],c.prototype,"errorCorrectionLevel",void 0),(0,e.Cg)([(0,o.MZ)({type:Number})],c.prototype,"width",void 0),(0,e.Cg)([(0,o.MZ)({type:Number})],c.prototype,"scale",void 0),(0,e.Cg)([(0,o.MZ)({type:Number})],c.prototype,"margin",void 0),(0,e.Cg)([(0,o.MZ)({attribute:!1,type:Number})],c.prototype,"maskPattern",void 0),(0,e.Cg)([(0,o.MZ)({attribute:"center-image"})],c.prototype,"centerImage",void 0),(0,e.Cg)([(0,o.wk)()],c.prototype,"_error",void 0),(0,e.Cg)([(0,o.P)("canvas")],c.prototype,"_canvas",void 0),c=(0,e.Cg)([(0,o.EM)("ha-qr-code")],c)},50543(i,t,s){s.a(i,async function(i,e){try{s.r(t);var a=s(62826),o=s(96196),r=s(44457),n=s(1087),c=s(63130),d=s(18350),l=s(72554),h=(s(60543),s(65829)),m=s(95350),p=s(20559),g=s(14503),_=s(44144),u=i([d,h]);[d,h]=u.then?(await u)():u;const v="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z";class y extends o.WF{async showDialog(i){this.device_id=i.device_id}render(){return this.device_id?o.qy` <ha-dialog open @closed="${this.closeDialog}" .heading="${(0,l.l)(this.hass,this.hass.localize("ui.panel.config.matter.open_commissioning_window.title"))}"> ${this._commissionParams?o.qy` <p> ${this.hass.localize("ui.panel.config.matter.open_commissioning_window.success")} <br> ${this.hass.localize("ui.panel.config.matter.open_commissioning_window.scan_code")} </p> <div class="sharing-code-container"> <div class="sharing-code"> <img crossorigin="anonymous" referrerpolicy="no-referrer" alt="${(0,m.p$)(this.hass.localize,"matter")}" src="${(0,_.MR)({domain:"matter",type:"logo",darkOptimized:this.hass.themes?.darkMode})}"> <ha-qr-code .data="${this._commissionParams.setup_qr_code}" errorCorrectionLevel="quartile" scale="6" margin="1"></ha-qr-code> <span class="code">${this._commissionParams.setup_manual_code.substring(0,4)}-${this._commissionParams.setup_manual_code.substring(4,7)}-${this._commissionParams.setup_manual_code.substring(7)}</span> </div> </div> <ha-button slot="primaryAction" @click="${this._copyCode}"> ${this.hass.localize("ui.panel.config.matter.open_commissioning_window.copy_code")} </ha-button> `:"started"===this._status?o.qy` <div class="flex-container"> <ha-spinner></ha-spinner> <div class="status"> <p> <b> ${this.hass.localize("ui.panel.config.matter.open_commissioning_window.in_progress")} </b> </p> </div> </div> <ha-button slot="primaryAction" @click="${this.closeDialog}"> ${this.hass.localize("ui.common.close")} </ha-button> `:"failed"===this._status?o.qy` <div class="flex-container"> <ha-svg-icon .path="${v}" class="failed"></ha-svg-icon> <div class="status"> <p> ${this.hass.localize("ui.panel.config.matter.open_commissioning_window.failed")} </p> </div> </div> <ha-button slot="primaryAction" @click="${this.closeDialog}"> ${this.hass.localize("ui.common.close")} </ha-button> `:o.qy` <p> ${this.hass.localize("ui.panel.config.matter.open_commissioning_window.description",{startCommissioning:o.qy`<b>${this.hass.localize("ui.panel.config.matter.open_commissioning_window.start_commissioning")}</b>`})} </p> <p class="note"> ${this.hass.localize("ui.panel.config.matter.open_commissioning_window.prevent_misuse_description")} </p> <ha-button slot="primaryAction" @click="${this._start}"> ${this.hass.localize("ui.panel.config.matter.open_commissioning_window.start_commissioning")} </ha-button> `} </ha-dialog> `:o.s6}async _start(){if(this.hass){this._status="started",this._commissionParams=void 0;try{this._commissionParams=await(0,p.nc)(this.hass,this.device_id)}catch(i){this._status="failed"}}}async _copyCode(){this._commissionParams&&(await(0,c.l)(this._commissionParams.setup_manual_code),this.closeDialog())}closeDialog(){this.device_id=void 0,this._status=void 0,this._commissionParams=void 0,(0,n.r)(this,"dialog-closed",{dialog:this.localName})}static get styles(){return[g.nA,o.AH`.success{color:var(--success-color)}.failed{color:var(--error-color)}.flex-container{display:flex;align-items:center}.stages{margin-top:16px}.stage ha-svg-icon{width:16px;height:16px}.stage{padding:8px}ha-svg-icon{width:68px;height:48px}ha-qr-code{text-align:center}.flex-container ha-spinner,.flex-container ha-svg-icon{margin-right:20px}.sharing-code-container{display:flex;justify-content:center;padding-top:16px}.sharing-code{display:flex;flex-direction:column;align-items:center;border:2px solid;border-radius:var(--ha-border-radius-xl);padding:16px}.sharing-code img{width:160px;margin-bottom:8px}.code{font-family:var(--ha-font-family-code)}.note{color:var(--secondary-text-color);font-size:.9em}`]}}(0,a.Cg)([(0,r.MZ)({attribute:!1})],y.prototype,"hass",void 0),(0,a.Cg)([(0,r.wk)()],y.prototype,"device_id",void 0),(0,a.Cg)([(0,r.wk)()],y.prototype,"_status",void 0),(0,a.Cg)([(0,r.wk)()],y.prototype,"_commissionParams",void 0),y=(0,a.Cg)([(0,r.EM)("dialog-matter-open-commissioning-window")],y),e()}catch(i){e(i)}})}};
//# sourceMappingURL=7524.dbdb3cd2134a2ab8.js.map