export const __rspack_esm_id="6166";export const __rspack_esm_ids=["6166"];export const __webpack_modules__={57094(t,e,n){n.d(e,{g:()=>i,x:()=>s});n(44114),n(18111),n(18237);function i(t){return t.reduce((t,e)=>("conditions"in e&&e.conditions&&t.push(...i(e.conditions)),"screen"===e.condition&&e.media_query&&t.push(e.media_query),t),[])}function s(t){return t.reduce((t,e)=>("conditions"in e&&e.conditions&&t.push(...s(e.conditions)),"time"===e.condition&&t.push(e),t),[])}},43574(t,e,n){n.a(t,async function(t,i){try{n.d(e,{b:()=>d,m:()=>l});n(18111),n(7588);var s=n(71769),o=n(14487),r=n(57094),a=n(25075),c=t([a,o]);[a,o]=c.then?(await c)():c;const u=2147483647;function d(t,e,n,i){const a=(0,r.g)(t);if(0===a.length)return;const c=1===t.length&&"screen"===t[0].condition&&!!t[0].media_query;a.forEach(r=>{const a=(0,s.m)(r,n=>{if(c)i(n);else{const n=(0,o.XH)(t,e);i(n)}});n(a)})}function l(t,e,n,i){const s=(0,r.x)(t);0!==s.length&&s.forEach(s=>{let r;const c=()=>{const n=(0,a.S)(e,s);if(void 0===n)return;const d=Math.min(n,u);r=setTimeout(()=>{if(n<=u){const n=(0,o.XH)(t,e);i(n)}c()},d)};n(()=>{void 0!==r&&clearTimeout(r)}),c()})}i()}catch(h){i(h)}})},25075(t,e,n){n.a(t,async function(t,i){try{n.d(e,{S:()=>f});n(44114);var s=n(74487),o=n(31886),r=n(92913),a=n(35932),c=n(78733),u=n(83339),d=n(46927),l=n(82447),h=t([s,o,l]);function f(t,{after:e,before:n,weekdays:i}){const s=t.locale.time_zone===d.Wj.server?t.config.time_zone:Intl.DateTimeFormat().resolvedOptions().timeZone,h=new o.BB(new Date,s),f=[];if(e){let t=(0,l.MV)(e,s);t<=h&&(t=(0,r.f)(t,1)),f.push(t)}if(n){let t=(0,l.MV)(n,s);t<=h&&(t=(0,r.f)(t,1)),f.push(t)}if(i&&i.length>0&&i.length<7){const t=(0,r.f)(h,1),e=(0,a.o)(t);f.push(e)}if(0===f.length)return;const p=f.reduce((t,e)=>e<t?e:t),y=(0,c.z)(p,1);return(0,u.b)(y,h)}[s,o,l]=h.then?(await h)():h,i()}catch(p){i(p)}})},82447(t,e,n){n.a(t,async function(t,i){try{n.d(e,{MV:()=>f,Uo:()=>p,fn:()=>h});var s=n(74487),o=(n(18111),n(81148),n(31886)),r=n(7562),a=n(72659),c=n(20687),u=n(46927),d=n(96029),l=t([s,o]);function h(t){if(!t||""===t.trim())return!1;const e=t.split(":");if(e.length<2||e.length>3)return!1;if(!e.every(t=>/^\d+$/.test(t)))return!1;const n=parseInt(e[0],10),i=parseInt(e[1],10),s=3===e.length?parseInt(e[2],10):0;return!(isNaN(n)||isNaN(i)||isNaN(s))&&(n>=0&&n<=23&&i>=0&&i<=59&&s>=0&&s<=59)}[s,o]=l.then?(await l)():l;const f=(t,e)=>{const n=t.split(":"),i=parseInt(n[0],10),s=parseInt(n[1],10),r=3===n.length?parseInt(n[2],10):0,a=new o.BB(new Date,e),c=new o.BB(a.getFullYear(),a.getMonth(),a.getDate(),i,s,r,0,e);return new Date(c.getTime())},p=(t,{after:e,before:n,weekdays:i})=>{const s=t.locale.time_zone===u.Wj.server?t.config.time_zone:Intl.DateTimeFormat().resolvedOptions().timeZone,l=new o.BB(new Date,s);if(i&&i.length>0){const t=d.sj[l.getDay()];if(!i.includes(t))return!1}if(!e&&!n)return!0;const h=e?f(e,s):void 0,p=n?f(n,s):void 0;return h&&p?(0,r.Y)(p,h)?!(0,r.Y)(l,h)||!(0,a.d)(l,p):(0,c.v)(l,{start:h,end:p}):h?!(0,r.Y)(l,h):!p||!(0,a.d)(l,p)};i()}catch(y){i(y)}})},85547(t,e,n){n.d(e,{Fj:()=>s,Gu:()=>o,H2:()=>a,xA:()=>u,xs:()=>r});n(18111),n(20116);var i=n(69093);const s=t=>t.callWS({type:"person/list"}),o=(t,e)=>t.callWS({type:"person/create",...e}),r=(t,e,n)=>t.callWS({type:"person/update",person_id:e,...n}),a=(t,e)=>t.callWS({type:"person/delete",person_id:e}),c={},u=t=>{if(!t.user?.id)return;const e=c[t.user.id];if(e){const n=t.states[e];if(n&&n.attributes.user_id===t.user.id)return n}const n=Object.values(t.states).find(e=>e.attributes.user_id===t.user.id&&"person"===(0,i.t)(e));return n&&(c[t.user.id]=n.entity_id),n}},91263(t,e,n){n.a(t,async function(t,i){try{n.d(e,{M:()=>r});n(44114),n(18111),n(7588);var s=n(43574),o=t([s]);s=(o.then?(await o)():o)[0];const r=t=>class extends t{connectedCallback(){super.connectedCallback(),this.setupConditionalListeners()}disconnectedCallback(){super.disconnectedCallback(),this.clearConditionalListeners()}clearConditionalListeners(){this.__listeners.forEach(t=>t()),this.__listeners=[]}addConditionalListener(t){this.__listeners.push(t)}setupConditionalListeners(t){const e=this.config||this._config,n=t||e?.visibility;if(!n||!this.hass)return;const i=t=>{this._updateVisibility?this._updateVisibility(t):this._updateElement&&e&&this._updateElement(e)};(0,s.b)(n,this.hass,t=>this.addConditionalListener(t),i),(0,s.m)(n,this.hass,t=>this.addConditionalListener(t),i)}constructor(...t){super(...t),this.__listeners=[]}};i()}catch(t){i(t)}})},14487(t,e,n){n.a(t,async function(t,i){try{n.d(e,{Wx:()=>g,XH:()=>v,db:()=>B,lB:()=>D});n(44114),n(18111),n(81148),n(22489),n(61701),n(13579),n(17642),n(58004),n(33853),n(45876),n(32475),n(15024),n(31698);var s=n(44537),o=n(82447),r=n(96029),a=n(78649),c=n(22675),u=n(85547),d=t([o]);function l(t,e){if((0,a.n)(e)&&t.states[e])return t.states[e]?.state}function h(t,e){const n=t.entity&&e.states[t.entity]?e.states[t.entity].state:c.HV;let i=t.state??t.state_not;if(Array.isArray(i)){const t=i.map(t=>l(e,t)).filter(t=>void 0!==t);i=[...i,...t]}else if("string"==typeof i){const t=l(e,i);i=[i],t&&i.push(t)}return null!=t.state?(0,s.e)(i).includes(n):!(0,s.e)(i).includes(n)}function f(t,e){const n=(t.entity?e.states[t.entity]:void 0)?.state;let i=t.above,s=t.below;"string"==typeof i&&(i=l(e,i)??i),"string"==typeof s&&(s=l(e,s)??s);const o=Number(n),r=Number(i),a=Number(s);return!isNaN(o)&&((null==t.above||isNaN(r)||r<o)&&(null==t.below||isNaN(a)||a>o))}function p(t,e){return(0,o.Uo)(e,t)}function y(t,e){const n=(0,u.xA)(e);return!!n&&t.locations?.includes(n.state)}function _(t,e){return!(!t.users||!e.user?.id)&&t.users.includes(e.user.id)}function m(t,e){return!t.conditions||v(t.conditions,e)}function w(t,e){return!t.conditions||!v(t.conditions,e)}function b(t,e){return!t.conditions||t.conditions.some(t=>v([t],e))}function v(t,e){return t.every(t=>{if("condition"in t)switch(t.condition){case"time":return p(t,e);case"screen":return!!(n=t).media_query&&matchMedia(n.media_query).matches;case"user":return _(t,e);case"location":return y(t,e);case"numeric_state":return f(t,e);case"and":return m(t,e);case"not":return w(t,e);case"or":return b(t,e);default:return h(t,e)}var n;return h(t,e)})}function g(t){const e=new Set;for(const n of t)if("numeric_state"===n.condition)n.entity&&e.add(n.entity),"string"==typeof n.above&&(0,a.n)(n.above)&&e.add(n.above),"string"==typeof n.below&&(0,a.n)(n.below)&&e.add(n.below);else if("state"===n.condition)n.entity&&e.add(n.entity),[...(0,s.e)(n.state)??[],...(0,s.e)(n.state_not)??[]].forEach(t=>{t&&(0,a.n)(t)&&e.add(t)});else if("conditions"in n&&n.conditions)return new Set([...e,...g(n.conditions)]);return e}function C(t){return null!=t.entity&&(null!=t.state||null!=t.state_not)}function N(t){const e=null!=t.after&&""!==t.after,n=null!=t.before&&""!==t.before,i=e||n,s=null!=t.weekdays&&t.weekdays.length>0,a=!s||t.weekdays.every(t=>r.ZV.includes(t)),c=(!e||(0,o.fn)(t.after))&&(!n||(0,o.fn)(t.before)),u=!e||!n||t.after!==t.before;return(i||s)&&a&&c&&u}function k(t){return null!=t.users}function E(t){return null!=t.locations}function V(t){return null!=t.conditions}function x(t){return null!=t.conditions}function M(t){return null!=t.conditions}function L(t){return null!=t.entity&&(null!=t.above||null!=t.below)}function B(t){return t.every(t=>{if("condition"in t)switch(t.condition){case"screen":return null!=t.media_query;case"time":return N(t);case"user":return k(t);case"location":return E(t);case"numeric_state":return L(t);case"and":return V(t);case"not":return x(t);case"or":return M(t);default:return C(t)}return C(t)})}function D(t,e){return"conditions"in t&&t.conditions?{...t,conditions:t.conditions.map(t=>D(t,e))}:"state"===t.condition||"numeric_state"===t.condition?{entity:e,...t}:t}o=(d.then?(await d)():d)[0],i()}catch(I){i(I)}})},37693(t,e,n){n.a(t,async function(t,i){try{n.d(e,{E:()=>d});n(18111),n(22489);var s=n(62826),o=n(96196),r=n(44457),a=n(91263),c=n(14487),u=t([a,c]);[a,c]=u.then?(await u)():u;class d extends((0,a.M)(o.mN)){createRenderRoot(){return this}validateConfig(t){if(!t.conditions)throw new Error("No conditions configured");if(!Array.isArray(t.conditions))throw new Error("Conditions need to be an array");if(!(0,c.db)(t.conditions))throw new Error("Conditions are invalid");this.lastChild&&this.removeChild(this.lastChild),this._config=t}disconnectedCallback(){super.disconnectedCallback()}connectedCallback(){super.connectedCallback(),this._updateVisibility()}setupConditionalListeners(){if(!this._config||!this.hass)return;const t=this._config.conditions.filter(t=>"condition"in t);super.setupConditionalListeners(t)}update(t){super.update(t),(t.has("_element")||t.has("_config")||t.has("hass")||t.has("preview"))&&(this.clearConditionalListeners(),this.setupConditionalListeners(),this._updateVisibility())}_updateVisibility(t){if(!this._element||!this.hass||!this._config)return;this._element.preview=this.preview;const e=t??(0,c.XH)(this._config.conditions,this.hass);this.setVisibility(e)}setVisibility(t){if(!this._element||!this.hass)return;const e=this.preview||t;this.hidden!==!e&&(this.toggleAttribute("hidden",!e),this.style.setProperty("display",e?"":"none")),e?(this._element.hass=this.hass,this._element.parentElement||this.appendChild(this._element)):this._element.parentElement&&this.removeChild(this._element)}constructor(...t){super(...t),this.preview=!1}}(0,s.Cg)([(0,r.MZ)({attribute:!1})],d.prototype,"hass",void 0),(0,s.Cg)([(0,r.MZ)({type:Boolean})],d.prototype,"preview",void 0),(0,s.Cg)([(0,r.wk)()],d.prototype,"_config",void 0),d=(0,s.Cg)([(0,r.EM)("hui-conditional-base")],d),i()}catch(t){i(t)}})},80725(t,e,n){n.a(t,async function(t,i){try{n.r(e);var s=n(62826),o=n(44457),r=n(37693),a=n(94225),c=n(1087),u=t([r,a]);[r,a]=u.then?(await u)():u;class d extends r.E{setConfig(t){if(this.validateConfig(t),!t.row)throw new Error("No row configured");this._element=(0,a.T)(t.state_color?{state_color:!0,...t.row}:t.row)}setVisibility(t){const e=this.preview||t,n=this.hidden;super.setVisibility(t),n!==this.hidden&&(0,c.r)(this,"row-visibility-changed",{row:this,value:e})}}d=(0,s.Cg)([(0,o.EM)("hui-conditional-row")],d),i()}catch(t){i(t)}})},92913(t,e,n){n.d(e,{f:()=>o});var i=n(51039),s=n(83504);function o(t,e,n){const o=(0,s.a)(t,n?.in);return isNaN(e)?(0,i.w)(n?.in||t,NaN):e?(o.setDate(o.getDate()+e),o):o}},78733(t,e,n){n.d(e,{z:()=>o});var i=n(9160),s=n(83504);function o(t,e,n){const o=(0,s.a)(t,n?.in);return o.setTime(o.getTime()+e*i.Cg),o}},83339(t,e,n){n.d(e,{b:()=>s});var i=n(83504);function s(t,e){return+(0,i.a)(t)-+(0,i.a)(e)}}};
//# sourceMappingURL=6166.f35ad28af918eaa0.js.map