export const __rspack_esm_id="82988";export const __rspack_esm_ids=["82988"];export const __webpack_modules__={91069(t,e,a){a.a(t,async function(t,i){try{a.d(e,{EO:()=>$,Yq:()=>C,_U:()=>k,eE:()=>b,fU:()=>x,ol:()=>f,xo:()=>w});var s=a(78016),n=a(31810),l=a(49134),o=a(81977),r=a(36307),h=a(35932),d=a(73983),c=a(6946),_=a(92913),p=a(83339),u=a(77972),m=a(31886),v=a(46927),y=t([m]);m=(y.then?(await y)():y)[0];const g=(t,e,a,i)=>{const s=a(new m.BB(t,e),i);return s instanceof Date?new Date(s.getTime()):s},f=(t,e,a,i,s)=>a.time_zone===v.Wj.server?g(t,i.time_zone,e,s):e(t,s),w=(t,e,a,i,s)=>a.time_zone===v.Wj.server?g(t,i.time_zone,e,s):e(t,s),$=(t,e,a,i,s)=>w(t,a,i,s,i.time_zone===v.Wj.server?new m.BB(e,s.time_zone):e),b=(t,e,a,i,m)=>{let v,y;if(w(t,s.e,i,m)&&w(e,n.c,i,m)){const s=($(e,t,l.W,i,m)+1)*(a?1:-1);v=f(t,o.P,i,m,s),y=f(f(e,o.P,i,m,s),r.p,i,m)}else if(w(t,t=>(0,h.o)(t).getMilliseconds()===t.getMilliseconds(),i,m)&&w(e,t=>(0,d.D)(t).getMilliseconds()===t.getMilliseconds(),i,m)){const s=($(e,t,c.c,i,m)+1)*(a?1:-1);v=f(t,_.f,i,m,s),y=f(e,_.f,i,m,s)}else{const s=$(e,t,p.b,i,m)*(a?1:-1);v=f(t,u.A,i,m,s),y=f(e,u.A,i,m,s)}return{start:v,end:y}},k=(t,e)=>{const a=new m.BB(t,e);return new Date(a.getTime())},C=(t,e)=>new m.BB(t,e).toISOString().split("T")[0],x=(t,e)=>new m.BB(t,e).toISOString().split("T")[1].split(".")[0];i()}catch(t){i(t)}})},78649(t,e,a){a.d(e,{n:()=>s});const i=/^(\w+)\.(\w+)$/,s=t=>i.test(t)},6(t,e,a){var i=a(62826),s=a(35949),n=a(38627),l=a(96196),o=a(44457),r=a(94333),h=a(1087);class d extends s.M{render(){const t={"mdc-form-field--align-end":this.alignEnd,"mdc-form-field--space-between":this.spaceBetween,"mdc-form-field--nowrap":this.nowrap};return l.qy` <div class="mdc-form-field ${(0,r.H)(t)}"> <slot></slot> <label class="mdc-label" @click="${this._labelClick}"> <slot name="label">${this.label}</slot> </label> </div>`}_labelClick(){const t=this.input;if(t&&(t.focus(),!t.disabled))switch(t.tagName){case"HA-CHECKBOX":t.checked=!t.checked,(0,h.r)(t,"change");break;case"HA-RADIO":t.checked=!0,(0,h.r)(t,"change");break;default:t.click()}}constructor(...t){super(...t),this.disabled=!1}}d.styles=[n.R,l.AH`:host(:not([alignEnd])) ::slotted(ha-switch){margin-right:10px;margin-inline-end:10px;margin-inline-start:inline}.mdc-form-field{align-items:var(--ha-formfield-align-items,center);gap:var(--ha-space-1)}.mdc-form-field>label{direction:var(--direction);margin-inline-start:0;margin-inline-end:auto;padding:0}:host([disabled]) label{color:var(--disabled-text-color)}`],(0,i.Cg)([(0,o.MZ)({type:Boolean,reflect:!0})],d.prototype,"disabled",void 0),d=(0,i.Cg)([(0,o.EM)("ha-formfield")],d)},54276(t,e,a){var i=a(62826),s=a(76482),n=a(91382),l=a(96245),o=a(96196),r=a(44457);class h extends n.n{attach(t){super.attach(t),this.attachableTouchController.attach(t)}disconnectedCallback(){super.disconnectedCallback(),this.hovered=!1,this.pressed=!1}detach(){super.detach(),this.attachableTouchController.detach()}_onTouchControlChange(t,e){t?.removeEventListener("touchend",this._handleTouchEnd),e?.addEventListener("touchend",this._handleTouchEnd)}constructor(...t){super(...t),this.attachableTouchController=new s.i(this,this._onTouchControlChange.bind(this)),this._handleTouchEnd=()=>{this.disabled||super.endPressAnimation()}}}h.styles=[l.R,o.AH`:host{--md-ripple-hover-opacity:var(--ha-ripple-hover-opacity, 0.08);--md-ripple-pressed-opacity:var(--ha-ripple-pressed-opacity, 0.12);--md-ripple-hover-color:var(
          --ha-ripple-hover-color,
          var(--ha-ripple-color, var(--secondary-text-color))
        );--md-ripple-pressed-color:var(
          --ha-ripple-pressed-color,
          var(--ha-ripple-color, var(--secondary-text-color))
        )}`],h=(0,i.Cg)([(0,r.EM)("ha-ripple")],h)},59646(t,e,a){var i=a(62826),s=a(4845),n=a(49065),l=a(96196),o=a(44457),r=a(88360);class h extends s.U{firstUpdated(){super.firstUpdated(),this.addEventListener("change",()=>{this.haptic&&(0,r.j)(this,"light")})}constructor(...t){super(...t),this.haptic=!1}}h.styles=[n.R,l.AH`:host{--mdc-theme-secondary:var(--switch-checked-color)}.mdc-switch.mdc-switch--checked .mdc-switch__thumb{background-color:var(--switch-checked-button-color);border-color:var(--switch-checked-button-color)}.mdc-switch.mdc-switch--checked .mdc-switch__track{background-color:var(--switch-checked-track-color);border-color:var(--switch-checked-track-color)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb{background-color:var(--switch-unchecked-button-color);border-color:var(--switch-unchecked-button-color)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__track{background-color:var(--switch-unchecked-track-color);border-color:var(--switch-unchecked-track-color)}`],(0,i.Cg)([(0,o.MZ)({type:Boolean})],h.prototype,"haptic",void 0),h=(0,i.Cg)([(0,o.EM)("ha-switch")],h)},56304(t,e,a){var i=a(62826),s=a(11896),n=a(92347),l=a(75057),o=a(96196),r=a(44457);class h extends s.u{updated(t){super.updated(t),this.autogrow&&t.has("value")&&(this.mdcRoot.dataset.value=this.value+'=â€‹"')}constructor(...t){super(...t),this.autogrow=!1}}h.styles=[n.R,l.R,o.AH`:host([autogrow]) .mdc-text-field{position:relative;min-height:74px;min-width:178px;max-height:200px}:host([autogrow]) .mdc-text-field:after{content:attr(data-value);margin-top:23px;margin-bottom:9px;line-height:var(--ha-line-height-normal);min-height:42px;padding:0px 32px 0 16px;letter-spacing:var(
          --mdc-typography-subtitle1-letter-spacing,
          .009375em
        );visibility:hidden;white-space:pre-wrap}:host([autogrow]) .mdc-text-field__input{position:absolute;height:calc(100% - 32px)}:host([autogrow]) .mdc-text-field.mdc-text-field--no-label:after{margin-top:16px;margin-bottom:16px}.mdc-floating-label{inset-inline-start:16px!important;inset-inline-end:initial!important;transform-origin:var(--float-start) top}@media only screen and (min-width:459px){:host([mobile-multiline]) .mdc-text-field__input{white-space:nowrap;max-height:16px}}`],(0,i.Cg)([(0,r.MZ)({type:Boolean,reflect:!0})],h.prototype,"autogrow",void 0),h=(0,i.Cg)([(0,r.EM)("ha-textarea")],h)},62938(t,e,a){a.a(t,async function(t,i){try{a.r(e);a(18111),a(20116);var s=a(62826),n=a(92913),l=a(71566),o=a(57279),r=a(83339),h=a(77972),d=a(96196),c=a(44457),_=a(22786),p=a(8480),u=a(1087),m=a(69093),v=a(82286),y=a(22682),g=a(82474),f=(a(38962),a(18350)),w=a(19463),$=a(72554),b=(a(6),a(59646),a(56304),a(75709),a(50286),a(55156)),k=a(14503),C=a(79757),x=a(36863),D=a(50954),z=a(91069),q=t([g,f,w,C,x,p,z]);[g,f,w,C,x,p,z]=q.then?(await q)():q;const R=["calendar"];class T extends d.WF{showDialog(t){if(this._error=void 0,this._info=void 0,this._params=t,this._calendarId=t.calendarId||Object.values(this.hass.states).find(t=>"calendar"===(0,m.t)(t)&&(0,v.$)(t,b.at.CREATE_EVENT))?.entity_id,this._timeZone=(0,p.w)(this.hass.locale.time_zone,this.hass.config.time_zone),t.entry){const e=t.entry;this._allDay=(0,y.$)(e.dtstart),this._summary=e.summary,this._description=e.description,e.location&&(this._hasLocation=!0,this._location=e.location),this._rrule=e.rrule,this._allDay?(this._dtstart=new Date(e.dtstart+"T00:00:00"),this._dtend=(0,n.f)(new Date(e.dtend+"T00:00:00"),-1)):(this._dtstart=new Date(e.dtstart),this._dtend=new Date(e.dtend))}else this._allDay=!1,this._dtstart=(0,l.Q)(t.selectedDate?t.selectedDate:new Date),this._dtend=(0,o.L)(this._dtstart,1)}closeDialog(){this._params&&(this._calendarId=void 0,this._params=void 0,this._dtstart=void 0,this._dtend=void 0,this._summary="",this._description="",this._location="",this._hasLocation=!1,this._rrule=void 0,(0,u.r)(this,"dialog-closed",{dialog:this.localName}))}render(){if(!this._params)return d.s6;const t=void 0===this._params.entry,{startDate:e,startTime:a,endDate:i,endTime:s}=this._getLocaleStrings(this._dtstart,this._dtend);return d.qy` <ha-dialog open @closed="${this.closeDialog}" scrimClickAction escapeKeyAction .heading="${(0,$.l)(this.hass,this.hass.localize("ui.components.calendar.event."+(t?"add":"edit")))}"> <div class="content"> ${this._error?d.qy`<ha-alert alert-type="error">${this._error}</ha-alert>`:""} ${this._info?d.qy`<ha-alert alert-type="info" dismissable @alert-dismissed-clicked="${this._clearInfo}">${this._info}</ha-alert>`:""} <ha-textfield class="summary" name="summary" .label="${this.hass.localize("ui.components.calendar.event.summary")}" .value="${this._summary}" required @input="${this._handleSummaryChanged}" .validationMessage="${this.hass.localize("ui.common.error_required")}" dialogInitialFocus></ha-textfield> <ha-textfield class="location" name="location" .label="${this.hass.localize("ui.components.calendar.event.location")}" .value="${this._location}" @change="${this._handleLocationChanged}"></ha-textfield> <ha-textarea class="description" name="description" .label="${this.hass.localize("ui.components.calendar.event.description")}" .value="${this._description}" @change="${this._handleDescriptionChanged}" autogrow></ha-textarea> <ha-entity-picker name="calendar" .hass="${this.hass}" .label="${this.hass.localize("ui.components.calendar.label")}" .value="${this._calendarId}" .includeDomains="${R}" .entityFilter="${this._isEditableCalendar}" .disabled="${!t}" required @value-changed="${this._handleCalendarChanged}"></ha-entity-picker> <ha-formfield .label="${this.hass.localize("ui.components.calendar.event.all_day")}"> <ha-switch id="all_day" .checked="${this._allDay}" @change="${this._allDayToggleChanged}"></ha-switch> </ha-formfield> <div> <span class="label">${this.hass.localize("ui.components.calendar.event.start")}:</span> <div class="flex"> <ha-date-input .value="${e}" .locale="${this.hass.locale}" @value-changed="${this._startDateChanged}"></ha-date-input> ${this._allDay?"":d.qy`<ha-time-input .value="${a}" .locale="${this.hass.locale}" @value-changed="${this._startTimeChanged}"></ha-time-input>`} </div> </div> <div> <span class="label">${this.hass.localize("ui.components.calendar.event.end")}:</span> <div class="flex"> <ha-date-input .value="${i}" .min="${e}" .locale="${this.hass.locale}" @value-changed="${this._endDateChanged}"></ha-date-input> ${this._allDay?"":d.qy`<ha-time-input .value="${s}" .locale="${this.hass.locale}" @value-changed="${this._endTimeChanged}"></ha-time-input>`} </div> </div> <ha-recurrence-rule-editor .hass="${this.hass}" .dtstart="${this._dtstart}" .allDay="${this._allDay}" .locale="${this.hass.locale}" .timezone="${this.hass.config.time_zone}" .value="${this._rrule||""}" @value-changed="${this._handleRRuleChanged}"> </ha-recurrence-rule-editor> </div> ${t?d.qy` <ha-button slot="primaryAction" @click="${this._createEvent}" .disabled="${this._submitting}"> ${this.hass.localize("ui.components.calendar.event.add")} </ha-button> `:d.qy` <ha-button slot="primaryAction" @click="${this._saveEvent}" .disabled="${this._submitting}"> ${this.hass.localize("ui.components.calendar.event.save")} </ha-button> ${this._params.canDelete?d.qy` <ha-button slot="secondaryAction" appearance="plain" variant="danger" @click="${this._deleteEvent}" .disabled="${this._submitting}"> ${this.hass.localize("ui.components.calendar.event.delete")} </ha-button> `:""} `} </ha-dialog> `}_clearInfo(){this._info=void 0}_handleSummaryChanged(t){this._summary=t.target.value}_handleDescriptionChanged(t){this._description=t.target.value}_handleLocationChanged(t){this._location=t.target.value}_handleRRuleChanged(t){this._rrule=t.detail.value}_allDayToggleChanged(t){this._allDay=t.target.checked,this._allDay&&this._dtstart&&this._dtend&&(this._dtstart=new Date((0,z.Yq)(this._dtstart,this._timeZone)+"T00:00:00"),this._dtend=new Date((0,z.Yq)(this._dtend,this._timeZone)+"T00:00:00"))}_startDateChanged(t){const e=(0,r.b)(this._dtend,this._dtstart);this._dtstart=(0,z._U)(`${t.detail.value}T${(0,z.fU)(this._dtstart,this._timeZone)}`,this._timeZone),this._dtend<=this._dtstart&&(this._dtend=(0,h.A)(this._dtstart,e),this._info=this.hass.localize("ui.components.calendar.event.end_auto_adjusted"))}_endDateChanged(t){this._dtend=(0,z._U)(`${t.detail.value}T${(0,z.fU)(this._dtend,this._timeZone)}`,this._timeZone)}_startTimeChanged(t){const e=(0,r.b)(this._dtend,this._dtstart);this._dtstart=(0,z._U)(`${(0,z.Yq)(this._dtstart,this._timeZone)}T${t.detail.value}`,this._timeZone),this._dtend<=this._dtstart&&(this._dtend=(0,h.A)(new Date(this._dtstart),e),this._info=this.hass.localize("ui.components.calendar.event.end_auto_adjusted"))}_endTimeChanged(t){this._dtend=(0,z._U)(`${(0,z.Yq)(this._dtend,this._timeZone)}T${t.detail.value}`,this._timeZone)}_calculateData(){const t={summary:this._summary,description:this._description,location:this._location||(this._hasLocation?"":void 0),rrule:this._rrule||void 0,dtstart:"",dtend:""};return this._allDay?(t.dtstart=(0,z.Yq)(this._dtstart,this._timeZone),t.dtend=(0,z.Yq)((0,n.f)(this._dtend,1),this._timeZone)):(t.dtstart=`${(0,z.Yq)(this._dtstart,this.hass.config.time_zone)}T${(0,z.fU)(this._dtstart,this.hass.config.time_zone)}`,t.dtend=`${(0,z.Yq)(this._dtend,this.hass.config.time_zone)}T${(0,z.fU)(this._dtend,this.hass.config.time_zone)}`),t}_handleCalendarChanged(t){this._calendarId=t.detail.value}_isValidStartEnd(){return this._allDay?this._dtend>=this._dtstart:this._dtend>this._dtstart}async _createEvent(){if(this._summary&&this._calendarId)if(this._isValidStartEnd()){this._submitting=!0;try{await(0,b.pO)(this.hass,this._calendarId,this._calculateData())}catch(t){return void(this._error=t?t.message:"Unknown error")}finally{this._submitting=!1}await this._params.updated(),this.closeDialog()}else this._error=this.hass.localize("ui.components.calendar.event.invalid_duration");else this._error=this.hass.localize("ui.components.calendar.event.not_all_required_fields")}async _saveEvent(){if(!this._summary||!this._calendarId)return void(this._error=this.hass.localize("ui.components.calendar.event.not_all_required_fields"));if(!this._isValidStartEnd())return void(this._error=this.hass.localize("ui.components.calendar.event.invalid_duration"));this._submitting=!0;const t=this._params.entry;let e=b.kt.THISEVENT;if(t.recurrence_id&&(e=await(0,D.Q)(this,{title:this.hass.localize("ui.components.calendar.event.confirm_update.update"),text:this.hass.localize("ui.components.calendar.event.confirm_update.recurring_prompt"),confirmText:this.hass.localize("ui.components.calendar.event.confirm_update.update_this"),confirmFutureText:this.hass.localize("ui.components.calendar.event.confirm_update.update_future")})),void 0===e)return void(this._submitting=!1);const a=this._calculateData();t.rrule&&a.rrule&&e===b.kt.THISEVENT&&(a.rrule=void 0);try{await(0,b._1)(this.hass,this._calendarId,t.uid,a,t.recurrence_id||"",e)}catch(t){return void(this._error=t?t.message:"Unknown error")}finally{this._submitting=!1}await this._params.updated(),this.closeDialog()}async _deleteEvent(){this._submitting=!0;const t=this._params.entry,e=await(0,D.Q)(this,{title:this.hass.localize("ui.components.calendar.event.confirm_delete.delete"),text:t.recurrence_id?this.hass.localize("ui.components.calendar.event.confirm_delete.recurring_prompt"):this.hass.localize("ui.components.calendar.event.confirm_delete.prompt"),confirmText:t.recurrence_id?this.hass.localize("ui.components.calendar.event.confirm_delete.delete_this"):this.hass.localize("ui.components.calendar.event.confirm_delete.delete"),confirmFutureText:t.recurrence_id?this.hass.localize("ui.components.calendar.event.confirm_delete.delete_future"):void 0});if(void 0!==e){try{await(0,b.At)(this.hass,this._calendarId,t.uid,t.recurrence_id||"",e)}catch(t){return void(this._error=t?t.message:"Unknown error")}finally{this._submitting=!1}await this._params.updated(),this.closeDialog()}else this._submitting=!1}static get styles(){return[k.nA,d.AH`@media all and (min-width:450px) and (min-height:500px){ha-dialog{--mdc-dialog-min-width:min(600px, 95vw);--mdc-dialog-max-width:min(600px, 95vw)}}state-info{line-height:40px}ha-alert{display:block;margin-bottom:16px}ha-textarea,ha-textfield{display:block}ha-textarea{margin-bottom:16px}ha-formfield{display:block;padding:16px 0}ha-date-input{flex-grow:1}ha-time-input{margin-left:16px;margin-inline-start:16px;margin-inline-end:initial}ha-recurrence-rule-editor{display:block;margin-top:16px}.flex{display:flex;justify-content:space-between}.label{font-size:var(--ha-font-size-s);font-weight:var(--ha-font-weight-medium);color:var(--input-label-ink-color)}.date-range-details-content{display:inline-block}ha-rrule{display:block}ha-svg-icon{width:40px;margin-right:8px;margin-inline-end:8px;margin-inline-start:initial;direction:var(--direction);vertical-align:top}ha-rrule{display:inline-block}.key{display:inline-block;vertical-align:top}.value{display:inline-block;vertical-align:top}`]}constructor(...t){super(...t),this._summary="",this._description="",this._location="",this._allDay=!1,this._submitting=!1,this._hasLocation=!1,this._isEditableCalendar=t=>(0,v.$)(t,b.at.CREATE_EVENT),this._getLocaleStrings=(0,_.A)((t,e)=>({startDate:(0,z.Yq)(t,this._timeZone),startTime:(0,z.fU)(t,this._timeZone),endDate:(0,z.Yq)(e,this._timeZone),endTime:(0,z.fU)(e,this._timeZone)}))}}(0,s.Cg)([(0,c.MZ)({attribute:!1})],T.prototype,"hass",void 0),(0,s.Cg)([(0,c.wk)()],T.prototype,"_error",void 0),(0,s.Cg)([(0,c.wk)()],T.prototype,"_info",void 0),(0,s.Cg)([(0,c.wk)()],T.prototype,"_params",void 0),(0,s.Cg)([(0,c.wk)()],T.prototype,"_calendarId",void 0),(0,s.Cg)([(0,c.wk)()],T.prototype,"_summary",void 0),(0,s.Cg)([(0,c.wk)()],T.prototype,"_description",void 0),(0,s.Cg)([(0,c.wk)()],T.prototype,"_location",void 0),(0,s.Cg)([(0,c.wk)()],T.prototype,"_rrule",void 0),(0,s.Cg)([(0,c.wk)()],T.prototype,"_allDay",void 0),(0,s.Cg)([(0,c.wk)()],T.prototype,"_dtstart",void 0),(0,s.Cg)([(0,c.wk)()],T.prototype,"_dtend",void 0),(0,s.Cg)([(0,c.wk)()],T.prototype,"_submitting",void 0),T=(0,s.Cg)([(0,c.EM)("dialog-calendar-event-editor")],T),i()}catch(t){i(t)}})},36863(t,e,a){a.a(t,async function(t,e){try{a(18111),a(61701),a(17642),a(58004),a(33853),a(45876),a(32475),a(15024),a(31698);var i=a(62826),s=a(31886),n=a(96196),l=a(44457),o=a(41821),r=a(380),h=a(57237),d=(a(5745),a(32023),a(19463)),c=(a(28732),a(606),a(75709),a(55666)),_=a(91069),p=t([d,c,o,s,_]);[d,c,o,s,_]=p.then?(await p)():p;class u extends n.WF{willUpdate(t){if(super.willUpdate(t),t.has("locale")&&(this._allWeekdays=(0,c.cH)((0,r.P)(this.locale)).map(t=>t.toString())),t.has("dtstart")||t.has("_interval")){this._monthlyRepeatItems=this.dtstart?(0,c.jz)(this.hass,this._interval,this.dtstart):[],this._computeWeekday();const e=this._monthlyRepeatSelect;if(e){const a=e.index;e.select(-1),this.updateComplete.then(()=>{e.select(t.has("dtstart")?0:a)})}}if(!t.has("value")&&(t.has("dtstart")||t.has("timezone")||t.has("_freq")||t.has("_interval")||t.has("_weekday")||t.has("_monthlyRepeatWeekday")||t.has("_monthday")||t.has("_end")||t.has("_count")||t.has("_untilDay")))return void this._updateRule();if(this._computedRRule===this.value)return;if(this._interval=1,this._weekday.clear(),this._monthlyRepeat=void 0,this._monthday=void 0,this._monthlyRepeatWeekday=void 0,this._end="never",this._count=void 0,this._untilDay=void 0,this._computedRRule=this.value,""===this.value)return void(this._freq="none");let e;try{e=o.p3.parseString(this.value)}catch(t){return void(this._freq=void 0)}this._freq=(0,c.mH)(e.freq),e.interval&&(this._interval=e.interval),this._monthlyRepeatWeekday=(0,c.j9)(e),this._monthlyRepeatWeekday&&(this._monthlyRepeat=`BYDAY=${this._monthlyRepeatWeekday.toString()}`),this._monthday=(0,c.Wt)(e),this._monthday&&(this._monthlyRepeat=`BYMONTHDAY=${this._monthday}`),"weekly"===this._freq&&e.byweekday&&Array.isArray(e.byweekday)&&(this._weekday=new Set(e.byweekday.map(t=>t.toString()))),e.until?(this._end="on",this._untilDay=new Date(new s.BB(e.until,this.timezone).getTime())):e.count&&(this._end="after",this._count=e.count)}renderRepeat(){return n.qy` <ha-select id="freq" label="${this.hass.localize("ui.components.calendar.event.repeat.label")}" @selected="${this._onRepeatSelected}" @closed="${h.d}" fixedMenuPosition naturalMenuWidth .value="${this._freq}"> <ha-list-item value="none"> ${this.hass.localize("ui.components.calendar.event.repeat.freq.none")} </ha-list-item> <ha-list-item value="yearly"> ${this.hass.localize("ui.components.calendar.event.repeat.freq.yearly")} </ha-list-item> <ha-list-item value="monthly"> ${this.hass.localize("ui.components.calendar.event.repeat.freq.monthly")} </ha-list-item> <ha-list-item value="weekly"> ${this.hass.localize("ui.components.calendar.event.repeat.freq.weekly")} </ha-list-item> <ha-list-item value="daily"> ${this.hass.localize("ui.components.calendar.event.repeat.freq.daily")} </ha-list-item> </ha-select> `}renderMonthly(){return n.qy` ${this.renderInterval()} ${this._monthlyRepeatItems.length>0?n.qy`<ha-select id="monthly" label="${this.hass.localize("ui.components.calendar.event.repeat.monthly.label")}" @selected="${this._onMonthlyDetailSelected}" .value="${this._monthlyRepeat||this._monthlyRepeatItems[0]?.value}" @closed="${h.d}" fixedMenuPosition naturalMenuWidth> ${this._monthlyRepeatItems.map(t=>n.qy` <ha-list-item .value="${t.value}" .item="${t}"> ${t.label} </ha-list-item> `)} </ha-select>`:n.s6} `}renderWeekly(){return n.qy` ${this.renderInterval()} <ha-chip-set class="weekdays"> ${this._allWeekdays.map(t=>n.qy` <ha-filter-chip no-leading-icon .value="${t}" .selected="${this._weekday.has(t)}" @click="${this._onWeekdayToggle}" .label="${this.hass.localize(`ui.components.calendar.event.repeat.weekly.weekday.${t.toLowerCase()}`)}"> </ha-filter-chip> `)} </ha-chip-set> `}renderDaily(){return this.renderInterval()}renderInterval(){return n.qy` <ha-textfield id="interval" label="${this.hass.localize("ui.components.calendar.event.repeat.interval.label")}" type="number" min="1" .value="${this._interval}" .suffix="${this.hass.localize(`ui.components.calendar.event.repeat.interval.${this._freq}`)}" @change="${this._onIntervalChange}"></ha-textfield> `}renderEnd(){return n.qy` <ha-select id="end" label="${this.hass.localize("ui.components.calendar.event.repeat.end.label")}" .value="${this._end}" @selected="${this._onEndSelected}" @closed="${h.d}" fixedMenuPosition naturalMenuWidth> <ha-list-item value="never"> ${this.hass.localize("ui.components.calendar.event.repeat.end.never")} </ha-list-item> <ha-list-item value="after"> ${this.hass.localize("ui.components.calendar.event.repeat.end.after")} </ha-list-item> <ha-list-item value="on"> ${this.hass.localize("ui.components.calendar.event.repeat.end.on")} </ha-list-item> </ha-select> ${"after"===this._end?n.qy` <ha-textfield id="after" label="${this.hass.localize("ui.components.calendar.event.repeat.end_after.label")}" type="number" min="1" .value="${this._count}" suffix="${this.hass.localize("ui.components.calendar.event.repeat.end_after.ocurrences")}" @change="${this._onCountChange}"></ha-textfield> `:n.s6} ${"on"===this._end?n.qy` <ha-date-input id="on" label="${this.hass.localize("ui.components.calendar.event.repeat.end_on.label")}" .locale="${this.locale}" .value="${(0,_.Yq)(this._untilDay,this.timezone)}" @value-changed="${this._onUntilChange}"></ha-date-input> `:n.s6} `}render(){return n.qy` ${this.renderRepeat()} ${"monthly"===this._freq?this.renderMonthly():n.s6} ${"weekly"===this._freq?this.renderWeekly():n.s6} ${"daily"===this._freq?this.renderDaily():n.s6} ${"none"!==this._freq?this.renderEnd():n.s6} `}_onIntervalChange(t){this._interval=t.target.value}_onRepeatSelected(t){this._freq=t.target.value,"yearly"===this._freq&&(this._interval=1),"weekly"!==this._freq&&(this._weekday.clear(),this._computeWeekday()),t.stopPropagation()}_onMonthlyDetailSelected(t){t.stopPropagation();const e=this._monthlyRepeatItems[t.detail.index];e&&(this._monthlyRepeat=e.value,this._monthlyRepeatWeekday=e.byday,this._monthday=e.bymonthday)}_onWeekdayToggle(t){const e=t.currentTarget.value;this._weekday.has(e)?this._weekday.delete(e):this._weekday.add(e),this.requestUpdate("_weekday")}_onEndSelected(t){const e=t.target.value;if(e!==this._end){switch(this._end=e,this._end){case"after":this._count=c.et[this._freq],this._untilDay=void 0;break;case"on":this._count=void 0,this._untilDay=(0,c.AZ)(this._freq);break;default:this._count=void 0,this._untilDay=void 0}t.stopPropagation()}}_onCountChange(t){this._count=t.target.value}_onUntilChange(t){t.stopPropagation(),this._untilDay=new Date(new s.BB(t.detail.value+"T00:00:00",this.timezone).getTime())}_computeWeekday(){if(this.dtstart&&this._weekday.size<=1){const t=(0,c.VJ)(this.dtstart);this._weekday.clear(),this._weekday.add(new o.Bw(t).toString())}}_computeRRule(){if(void 0===this._freq||"none"===this._freq)return"";let t,e;"monthly"===this._freq&&void 0!==this._monthlyRepeatWeekday?t=[this._monthlyRepeatWeekday]:"monthly"===this._freq&&void 0!==this._monthday?e=this._monthday:"weekly"===this._freq&&(t=(0,c.OS)(this._weekday));const a={freq:(0,c.zw)(this._freq),interval:this._interval>1?this._interval:void 0,count:this._count,byweekday:t,bymonthday:e};let i=o.p3.optionsToString(a);if(this._untilDay){const t=new s.BB((0,_.Yq)(this._untilDay,this.timezone)+"T"+(0,_.fU)(this.dtstart,this.timezone),this.timezone);let e;e=this.allDay?t.toISOString().split("T")[0].replace(/-/g,""):t.toISOString().replace(/[-:]/g,"").split(".")[0],i+=`;UNTIL=${e}`}return i.slice(6)}_updateRule(){const t=this._computeRRule();t!==this._computedRRule&&(this._computedRRule=t,this.dispatchEvent(new CustomEvent("value-changed",{detail:{value:t}})))}constructor(...t){super(...t),this.disabled=!1,this.value="",this.allDay=!1,this._computedRRule="",this._freq="none",this._interval=1,this._weekday=new Set,this._end="never",this._monthlyRepeatItems=[]}}u.styles=n.AH`ha-select,ha-textfield{display:block;margin-bottom:16px}.weekdays{margin-bottom:16px}.weekdays:last-child,ha-select:last-child,ha-textfield:last-child{margin-bottom:0}`,(0,i.Cg)([(0,l.MZ)({attribute:!1})],u.prototype,"hass",void 0),(0,i.Cg)([(0,l.MZ)({type:Boolean})],u.prototype,"disabled",void 0),(0,i.Cg)([(0,l.MZ)()],u.prototype,"value",void 0),(0,i.Cg)([(0,l.MZ)({attribute:!1})],u.prototype,"dtstart",void 0),(0,i.Cg)([(0,l.MZ)({attribute:"all-day",type:Boolean})],u.prototype,"allDay",void 0),(0,i.Cg)([(0,l.MZ)({attribute:!1})],u.prototype,"locale",void 0),(0,i.Cg)([(0,l.MZ)()],u.prototype,"timezone",void 0),(0,i.Cg)([(0,l.wk)()],u.prototype,"_computedRRule",void 0),(0,i.Cg)([(0,l.wk)()],u.prototype,"_freq",void 0),(0,i.Cg)([(0,l.wk)()],u.prototype,"_interval",void 0),(0,i.Cg)([(0,l.wk)()],u.prototype,"_weekday",void 0),(0,i.Cg)([(0,l.wk)()],u.prototype,"_monthlyRepeat",void 0),(0,i.Cg)([(0,l.wk)()],u.prototype,"_monthlyRepeatWeekday",void 0),(0,i.Cg)([(0,l.wk)()],u.prototype,"_monthday",void 0),(0,i.Cg)([(0,l.wk)()],u.prototype,"_end",void 0),(0,i.Cg)([(0,l.wk)()],u.prototype,"_count",void 0),(0,i.Cg)([(0,l.wk)()],u.prototype,"_untilDay",void 0),(0,i.Cg)([(0,l.P)("#monthly")],u.prototype,"_monthlyRepeatSelect",void 0),u=(0,i.Cg)([(0,l.EM)("ha-recurrence-rule-editor")],u),e()}catch(t){e(t)}})},85614(t,e,a){a.d(e,{i:()=>i});const i=async()=>{await Promise.all([a.e("22564"),a.e("22309")]).then(a.bind(a,42735))}},22348(t,e,a){a.d(e,{V:()=>s});var i=a(37177);const s=t=>!!t.auth.external&&i.n},37177(t,e,a){a.d(e,{n:()=>i});const i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}};
//# sourceMappingURL=82988.e157642fe60da663.js.map