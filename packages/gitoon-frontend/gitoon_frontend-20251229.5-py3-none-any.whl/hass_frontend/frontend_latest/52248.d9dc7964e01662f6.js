export const __rspack_esm_id="52248";export const __rspack_esm_ids=["52248"];export const __webpack_modules__={90433(e,t,r){r.d(t,{Vy:()=>s,fI:()=>n,ux:()=>o});var a=r(22786),i=r(79468);function s(e,t){const r=e%54+1;return t.getPropertyValue(`--color-${r}`)}function n(e,t){const r=t.getPropertyValue(`--graph-color-${e+1}`)||s(e,t);return(0,i.RQ)(r)}const o=(0,a.A)(e=>Array.from({length:54},(t,r)=>n(r,e)),(e,t)=>e[0].getPropertyValue("--graph-color-1")===t[0].getPropertyValue("--graph-color-1")&&e[0].getPropertyValue("--color-1")===t[0].getPropertyValue("--color-1"))},27661(e,t,r){var a=r(62826),i=r(51978),s=r(94743),n=r(44457),o=r(96196),d=r(63091);class h extends i.n{firstUpdated(e){super.firstUpdated(e),this.style.setProperty("--mdc-theme-secondary","var(--primary-color)")}}h.styles=[s.R,o.AH`:host{--mdc-typography-button-text-transform:none;--mdc-typography-button-font-size:var(--ha-font-size-l);--mdc-typography-button-font-family:var(--ha-font-family-body);--mdc-typography-button-font-weight:var(--ha-font-weight-medium)}:host .mdc-fab--extended{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab.mdc-fab--extended .ripple{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab--extended .mdc-fab__icon{margin-inline-start:-8px;margin-inline-end:12px;direction:var(--direction)}:disabled{--mdc-theme-secondary:var(--disabled-text-color);pointer-events:none}`,"rtl"===d.G.document.dir?o.AH`:host .mdc-fab--extended .mdc-fab__icon{direction:rtl}`:o.AH``],h=(0,a.Cg)([(0,n.EM)("ha-fab")],h)},68159(e,t,r){r.a(e,async function(e,a){try{r.r(t),r.d(t,{HuiCalendarCard:()=>u});r(18111),r(61701);var i=r(62826),s=r(96196),n=r(94333),o=r(44457),d=r(90433),h=r(42372),c=r(9899),l=(r(76776),r(55156)),p=r(63556),_=r(13632),g=(r(85979),e([p]));p=(g.then?(await g)():g)[0];class u extends s.WF{static async getConfigElement(){return await Promise.all([r.e("44533"),r.e("92769"),r.e("44966"),r.e("52242"),r.e("80445"),r.e("19656"),r.e("314")]).then(r.bind(r,6534)),document.createElement("hui-calendar-card-editor")}static getStubConfig(e,t,r){return{entities:(0,_.B)(e,2,t,r,["calendar"])}}setConfig(e){if(!e.entities?.length)throw new Error("Entities must be specified");if(!Array.isArray(e.entities))throw new Error("Entities need to be an array");this._config?.entities!==e.entities&&this._fetchCalendarEvents(),this._config={initial_view:"dayGridMonth",...e}}willUpdate(e){if(super.willUpdate(e),!this.hasUpdated||e.has("_config")&&this._config?.entities){const e=getComputedStyle(this);this._calendars=this._config.entities.map((t,r)=>({entity_id:t,backgroundColor:(0,d.Vy)(r,e)}))}}getCardSize(){return 12}getGridOptions(){return{rows:6,columns:12,min_columns:4,min_rows:4}}connectedCallback(){super.connectedCallback(),this.updateComplete.then(()=>this._attachObserver())}disconnectedCallback(){super.disconnectedCallback(),this._resizeObserver&&this._resizeObserver.disconnect()}render(){if(!this._config||!this.hass||!this._calendars.length)return s.s6;return s.qy` <ha-card> <div class="header">${this._config.title}</div> <ha-full-calendar class="${(0,n.H)({"is-grid":"grid"===this.layout,"is-panel":"panel"===this.layout,"has-title":!!this._config.title})}" .narrow="${this._narrow}" .events="${this._events}" .hass="${this.hass}" .views="${["dayGridMonth","dayGridDay","listWeek"]}" .initialView="${this._config.initial_view}" .error="${this._error}" @view-changed="${this._handleViewChanged}"></ha-full-calendar> </ha-card> `}updated(e){if(super.updated(e),!this._config||!this.hass)return;const t=e.get("hass"),r=e.get("_config");(!t||!r||e.has("hass")&&t.themes!==this.hass.themes||e.has("_config")&&r.theme!==this._config.theme)&&(0,h.Q)(this,this.hass.themes,this._config.theme)}_handleViewChanged(e){this._startDate=e.detail.start,this._endDate=e.detail.end,this._fetchCalendarEvents()}async _fetchCalendarEvents(){if(!this._startDate||!this._endDate)return;this._error=void 0;const e=await(0,l.ms)(this.hass,this._startDate,this._endDate,this._calendars);this._events=e.events,e.errors.length>0&&(this._error=`${this.hass.localize("ui.components.calendar.event_retrieval_error")}`)}_measureCard(){const e=this.shadowRoot.querySelector("ha-card");e&&(this._narrow=e.offsetWidth<870)}async _attachObserver(){this._resizeObserver||(this._resizeObserver=new ResizeObserver((0,c.s)(()=>this._measureCard(),250,!1)));const e=this.shadowRoot.querySelector("ha-card");e&&this._resizeObserver.observe(e)}constructor(...e){super(...e),this._events=[],this._calendars=[],this._narrow=!1,this._error=void 0}}u.styles=s.AH`ha-card{position:relative;padding:0 8px 8px;box-sizing:border-box;height:100%;overflow:hidden}.header{color:var(--ha-card-header-color,var(--primary-text-color));font-size:var(--ha-card-header-font-size, var(--ha-font-size-2xl));line-height:var(--ha-line-height-condensed);padding-top:16px;padding-left:8px;padding-inline-start:8px;direction:var(--direction);white-space:nowrap;text-overflow:ellipsis}ha-full-calendar{--calendar-height:400px;height:var(--calendar-height)}ha-full-calendar.is-grid,ha-full-calendar.is-panel{--calendar-height:calc(100% - 16px)}ha-full-calendar.is-grid.has-title,ha-full-calendar.is-panel.has-title{--calendar-height:calc(
        100% - var(--ha-card-header-font-size, var(--ha-font-size-2xl)) - 22px
      )}`,(0,i.Cg)([(0,o.MZ)({attribute:!1})],u.prototype,"hass",void 0),(0,i.Cg)([(0,o.MZ)({attribute:!1})],u.prototype,"layout",void 0),(0,i.Cg)([(0,o.wk)()],u.prototype,"_events",void 0),(0,i.Cg)([(0,o.wk)()],u.prototype,"_config",void 0),(0,i.Cg)([(0,o.wk)()],u.prototype,"_calendars",void 0),(0,i.Cg)([(0,o.wk)()],u.prototype,"_narrow",void 0),(0,i.Cg)([(0,o.wk)()],u.prototype,"_error",void 0),u=(0,i.Cg)([(0,o.EM)("hui-calendar-card")],u),a()}catch(e){a(e)}})}};
//# sourceMappingURL=52248.d9dc7964e01662f6.js.map