export const __rspack_esm_id="71380";export const __rspack_esm_ids=["71380"];export const __webpack_modules__={8034(e,t,s){var a=s(62826),i=s(96196),o=s(44457);class r extends i.WF{render(){return i.qy` <div class="prefix-wrap"> <slot name="prefix"></slot> <div class="body" ?two-line="${!this.threeLine}" ?three-line="${this.threeLine}"> <slot name="heading"></slot> <div class="secondary"><slot name="description"></slot></div> </div> </div> <div class="content"><slot></slot></div> `}constructor(...e){super(...e),this.narrow=!1,this.slim=!1,this.threeLine=!1,this.wrapHeading=!1}}r.styles=i.AH`:host{display:flex;padding:0 16px;align-content:normal;align-self:auto;align-items:center}.body{padding-top:8px;padding-bottom:8px;padding-left:0;padding-inline-start:0;padding-right:16px;padding-inline-end:16px;overflow:hidden;display:var(--layout-vertical_-_display,flex);flex-direction:var(--layout-vertical_-_flex-direction,column);justify-content:var(--layout-center-justified_-_justify-content,center);flex:var(--layout-flex_-_flex,1);flex-basis:var(--layout-flex_-_flex-basis,0.000000001px)}.body[three-line]{min-height:88px}:host(:not([wrap-heading])) body>*{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.body>.secondary{display:block;padding-top:4px;font-family:var(
        --mdc-typography-body2-font-family,
        var(--mdc-typography-font-family, var(--ha-font-family-body))
      );font-size:var(--mdc-typography-body2-font-size, var(--ha-font-size-s));-webkit-font-smoothing:var(--ha-font-smoothing);-moz-osx-font-smoothing:var(--ha-moz-osx-font-smoothing);font-weight:var(--mdc-typography-body2-font-weight,var(--ha-font-weight-normal));line-height:normal;color:var(--secondary-text-color)}.body[two-line]{min-height:calc(72px - 16px);flex:1}.content{display:contents}:host(:not([narrow])) .content{display:var(--settings-row-content-display,flex);justify-content:flex-end;flex:1;min-width:0;padding:16px 0}.content ::slotted(*){width:var(--settings-row-content-width)}:host([narrow]){align-items:normal;flex-direction:column;border-top:1px solid var(--divider-color);padding-bottom:8px}::slotted(ha-switch){padding:16px 0}.secondary{white-space:normal}.prefix-wrap{display:var(--settings-row-prefix-display)}:host([narrow]) .prefix-wrap{display:flex;align-items:center}:host([slim]),:host([slim]) .content,:host([slim]) ::slotted(ha-switch){padding:0}:host([slim]) .body{min-height:0}`,(0,a.Cg)([(0,o.MZ)({type:Boolean,reflect:!0})],r.prototype,"narrow",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean,reflect:!0})],r.prototype,"slim",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean,attribute:"three-line"})],r.prototype,"threeLine",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean,attribute:"wrap-heading",reflect:!0})],r.prototype,"wrapHeading",void 0),r=(0,a.Cg)([(0,o.EM)("ha-settings-row")],r)},77423(e,t,s){s.d(t,{A:()=>i,Cm:()=>o,JW:()=>f,Pd:()=>c,TC:()=>l,VN:()=>h,Vx:()=>d,XQ:()=>y,eM:()=>g,iH:()=>p,k3:()=>_,m4:()=>r,qf:()=>n,t0:()=>a,yv:()=>u});s(44114),s(18111),s(22489),s(20116),s(7588),s(61701);const a=(e,t)=>e.callWS({type:"config_entries/subentries/list",entry_id:t}),i=(e,t,s,a)=>e.callWS({type:"config_entries/subentries/update",entry_id:t,subentry_id:s,...a}),o=(e,t,s)=>e.callWS({type:"config_entries/subentries/delete",entry_id:t,subentry_id:s}),r=["migration_error","setup_error","setup_retry"],n=["not_loaded","loaded","setup_error","setup_retry"],c=(e,t,s)=>{const a=new v;return l(e,e=>{t(a.processMessage(e))},s)},l=(e,t,s)=>{const a={type:"config_entries/subscribe"};return s&&s.type&&(a.type_filter=s.type),e.connection.subscribeMessage(e=>{t(e)},a)},h=(e,t)=>{const s={};return t&&(t.type&&(s.type_filter=t.type),t.domain&&(s.domain=t.domain)),e.callWS({type:"config_entries/get",...s})},d=(e,t)=>e.callWS({type:"config_entries/get_single",entry_id:t}),p=(e,t,s)=>e.callWS({type:"config_entries/update",entry_id:t,...s}),g=(e,t)=>e.callApi("DELETE",`config/config_entries/entry/${t}`),u=(e,t)=>e.callApi("POST",`config/config_entries/entry/${t}/reload`),y=(e,t)=>e.callWS({type:"config_entries/disable",entry_id:t,disabled_by:"user"}),_=(e,t)=>e.callWS({type:"config_entries/disable",entry_id:t,disabled_by:null}),f=(e,t)=>{if(!t)return e;const s=e.find(e=>e.entry_id===t);if(!s)return e;return[s,...e.filter(e=>e.entry_id!==t)]};class v{processMessage(e){return e.forEach(e=>{if(null!==e.type&&"added"!==e.type)if("removed"!==e.type){if("updated"===e.type){const t=e.entry;this._entries=this._entries.map(e=>e.entry_id===t.entry_id?t:e)}}else this._entries=this._entries.filter(t=>t.entry_id!==e.entry.entry_id);else this._entries.push(e.entry)}),this._entries}constructor(){this._entries=[]}}},26571(e,t,s){s.d(t,{Al:()=>o,KY:()=>i,PN:()=>c,dG:()=>h,jm:()=>l,m7:()=>y,sR:()=>d,t1:()=>n,t2:()=>g,x:()=>u,yu:()=>p});var a=s(95350);const i=["bluetooth","dhcp","discovery","esphome","hardware","hassio","homekit","integration_discovery","mqtt","ssdp","unignore","usb","zeroconf"],o=["reauth"],r={"HA-Frontend-Base":`${location.protocol}//${location.host}`},n=(e,t,s)=>e.callApi("POST","config/config_entries/flow",{handler:t,show_advanced_options:Boolean(e.userData?.showAdvanced),entry_id:s},r),c=(e,t)=>e.callApi("GET",`config/config_entries/flow/${t}`,void 0,r),l=(e,t,s)=>e.callApi("POST",`config/config_entries/flow/${t}`,s,r),h=(e,t,s)=>e.callWS({type:"config_entries/ignore_flow",flow_id:t,title:s}),d=(e,t)=>e.callApi("DELETE",`config/config_entries/flow/${t}`),p=(e,t)=>e.callApi("GET","config/config_entries/flow_handlers"+(t?`?type=${t}`:"")),g=e=>e.sendMessagePromise({type:"config_entries/flow/progress"}),u=(e,t)=>e.connection.subscribeMessage(e=>t(e),{type:"config_entries/flow/subscribe"}),y=(e,t)=>t.context.title_placeholders&&0!==Object.keys(t.context.title_placeholders).length?e(`component.${t.handler}.config.flow_title`,t.context.title_placeholders)||("name"in t.context.title_placeholders?t.context.title_placeholders.name:(0,a.p$)(e,t.handler)):(0,a.p$)(e,t.handler)},77763(e,t,s){s.d(t,{W:()=>n});var a=s(96196),i=s(26571),o=s(95350),r=s(29094);const n=(e,t)=>(0,r.g)(e,t,{flowType:"config_flow",showDevices:!0,createFlow:async(e,s)=>{const[a]=await Promise.all([(0,i.t1)(e,s,t.entryId),e.loadFragmentTranslation("config"),e.loadBackendTranslation("config",s),e.loadBackendTranslation("selector",s),e.loadBackendTranslation("title",s)]);return a},fetchFlow:async(e,t)=>{const[s]=await Promise.all([(0,i.PN)(e,t),e.loadFragmentTranslation("config")]);return await Promise.all([e.loadBackendTranslation("config",s.handler),e.loadBackendTranslation("selector",s.handler),e.loadBackendTranslation("title",s.handler)]),s},handleFlowStep:i.jm,deleteFlow:i.sR,renderAbortDescription(e,t){const s=e.localize(`component.${t.translation_domain||t.handler}.config.abort.${t.reason}`,t.description_placeholders);return s?a.qy` <ha-markdown allow-svg breaks .content="${s}"></ha-markdown> `:t.reason},renderShowFormStepHeader:(e,t)=>e.localize(`component.${t.translation_domain||t.handler}.config.step.${t.step_id}.title`,t.description_placeholders)||e.localize(`component.${t.handler}.title`),renderShowFormStepDescription(e,t){const s=e.localize(`component.${t.translation_domain||t.handler}.config.step.${t.step_id}.description`,t.description_placeholders);return s?a.qy` <ha-markdown .allowDataUrl="${"zwave_js"===t.handler}" allow-svg breaks .content="${s}"></ha-markdown> `:""},renderShowFormStepFieldLabel(e,t,s,a){if("expandable"===s.type)return e.localize(`component.${t.handler}.config.step.${t.step_id}.sections.${s.name}.name`,t.description_placeholders);const i=a?.path?.[0]?`sections.${a.path[0]}.`:"";return e.localize(`component.${t.handler}.config.step.${t.step_id}.${i}data.${s.name}`,t.description_placeholders)||s.name},renderShowFormStepFieldHelper(e,t,s,i){if("expandable"===s.type)return e.localize(`component.${t.translation_domain||t.handler}.config.step.${t.step_id}.sections.${s.name}.description`,t.description_placeholders);const o=i?.path?.[0]?`sections.${i.path[0]}.`:"",r=e.localize(`component.${t.translation_domain||t.handler}.config.step.${t.step_id}.${o}data_description.${s.name}`,t.description_placeholders);return r?a.qy`<ha-markdown breaks .content="${r}"></ha-markdown>`:""},renderShowFormStepFieldError:(e,t,s)=>e.localize(`component.${t.translation_domain||t.translation_domain||t.handler}.config.error.${s}`,t.description_placeholders)||s,renderShowFormStepFieldLocalizeValue:(e,t,s)=>e.localize(`component.${t.handler}.selector.${s}`),renderShowFormStepSubmitButton:(e,t)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.submit`)||e.localize("ui.panel.config.integrations.config_flow."+(!1===t.last_step?"next":"submit")),renderExternalStepHeader:(e,t)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.title`)||e.localize("ui.panel.config.integrations.config_flow.external_step.open_site"),renderExternalStepDescription(e,t){const s=e.localize(`component.${t.translation_domain||t.handler}.config.${t.step_id}.description`,t.description_placeholders);return a.qy` <p> ${e.localize("ui.panel.config.integrations.config_flow.external_step.description")} </p> ${s?a.qy` <ha-markdown allow-svg breaks .content="${s}"></ha-markdown> `:""} `},renderCreateEntryDescription(e,t){const s=e.localize(`component.${t.translation_domain||t.handler}.config.create_entry.${t.description||"default"}`,t.description_placeholders);return a.qy` ${s?a.qy` <ha-markdown allow-svg breaks .content="${s}"></ha-markdown> `:a.s6} `},renderShowFormProgressHeader:(e,t)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.title`)||e.localize(`component.${t.handler}.title`),renderShowFormProgressDescription(e,t){const s=e.localize(`component.${t.translation_domain||t.handler}.config.progress.${t.progress_action}`,t.description_placeholders);return s?a.qy` <ha-markdown allow-svg breaks .content="${s}"></ha-markdown> `:""},renderMenuHeader:(e,t)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.title`)||e.localize(`component.${t.handler}.title`),renderMenuDescription(e,t){const s=e.localize(`component.${t.translation_domain||t.handler}.config.step.${t.step_id}.description`,t.description_placeholders);return s?a.qy` <ha-markdown allow-svg breaks .content="${s}"></ha-markdown> `:""},renderMenuOption:(e,t,s)=>e.localize(`component.${t.translation_domain||t.handler}.config.step.${t.step_id}.menu_options.${s}`,t.description_placeholders),renderMenuOptionDescription:(e,t,s)=>e.localize(`component.${t.translation_domain||t.handler}.config.step.${t.step_id}.menu_option_descriptions.${s}`,t.description_placeholders),renderLoadingDescription(e,t,s,a){if("loading_flow"!==t&&"loading_step"!==t)return"";const i=a?.handler||s;return e.localize(`ui.panel.config.integrations.config_flow.loading.${t}`,{integration:i?(0,o.p$)(e.localize,i):e.localize("ui.panel.config.integrations.config_flow.loading.fallback_title")})}})},29094(e,t,s){s.d(t,{g:()=>o});var a=s(1087);const i=()=>Promise.all([s.e("44533"),s.e("7199"),s.e("96261"),s.e("46095"),s.e("52074"),s.e("92769"),s.e("93785"),s.e("44966"),s.e("39607"),s.e("12036"),s.e("55027"),s.e("94095"),s.e("80445"),s.e("60768")]).then(s.bind(s,78314)),o=(e,t,s)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-data-entry-flow",dialogImport:i,dialogParams:{...t,flowConfig:s,dialogParentElement:e}})}},23206(e,t,s){s.a(e,async function(e,t){try{s(44114),s(18111),s(22489),s(7588),s(61701);var a=s(62826),i=s(96196),o=s(44457),r=s(1087),n=(s(76776),s(18350)),c=(s(67094),s(26300),s(8034),s(38114)),l=s(23528),h=s(65063),d=s(14503),p=s(82105),g=(s(38940),s(6268)),u=e([n,c]);[n,c]=u.then?(await u)():u;const y="M16 20H8V6H16M16.67 4H15V2H9V4H7.33C6.6 4 6 4.6 6 5.33V20.67C6 21.4 6.6 22 7.33 22H16.67C17.41 22 18 21.41 18 20.67V5.33C18 4.6 17.4 4 16.67 4M15 16H9V19H15V16M15 7H9V10H15V7M15 11.5H9V14.5H15V11.5Z",_="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",f="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",v="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z";class m extends i.WF{render(){const e=[],t=[];return this.preferences.energy_sources.forEach((s,a)=>{"battery"===s.type&&(e.push(s),this.validationResult&&t.push(this.validationResult.energy_sources[a]))}),i.qy` <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="${y}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.energy.battery.title")} </h1> <div class="card-content"> <p>${this.hass.localize("ui.panel.config.energy.battery.sub")}</p> ${t.map(e=>i.qy` <ha-energy-validation-result .hass="${this.hass}" .issues="${e}"></ha-energy-validation-result> `)} <h3> ${this.hass.localize("ui.panel.config.energy.battery.battery_systems")} </h3> ${e.map(e=>{const t=this.hass.states[e.stat_energy_to];return i.qy` <div class="row" .source="${e}"> ${t?.attributes.icon?i.qy`<ha-icon .icon="${t.attributes.icon}"></ha-icon>`:i.qy`<ha-svg-icon .path="${y}"></ha-svg-icon>`} <div class="content"> <span class="label">${(0,l.$O)(this.hass,e.stat_energy_from,this.statsMetadata?.[e.stat_energy_from])}</span> <span class="label">${(0,l.$O)(this.hass,e.stat_energy_to,this.statsMetadata?.[e.stat_energy_to])}</span> </div> <ha-icon-button .label="${this.hass.localize("ui.panel.config.energy.battery.edit_battery_system")}" @click="${this._editSource}" .path="${f}"></ha-icon-button> <ha-icon-button .label="${this.hass.localize("ui.panel.config.energy.battery.delete_battery_system")}" @click="${this._deleteSource}" .path="${_}"></ha-icon-button> </div> `})} <div class="row border-bottom"> <ha-svg-icon .path="${y}"></ha-svg-icon> <ha-button @click="${this._addSource}" appearance="filled" size="small"> <ha-svg-icon slot="start" .path="${v}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.energy.battery.add_battery_system")}</ha-button> </div> </div> </ha-card> `}_addSource(){(0,p.m5)(this,{battery_sources:this.preferences.energy_sources.filter(e=>"battery"===e.type),saveCallback:async e=>{await this._savePreferences({...this.preferences,energy_sources:this.preferences.energy_sources.concat(e)})}})}_editSource(e){const t=e.currentTarget.closest(".row").source;(0,p.m5)(this,{source:{...t},battery_sources:this.preferences.energy_sources.filter(e=>"battery"===e.type),saveCallback:async e=>{await this._savePreferences({...this.preferences,energy_sources:this.preferences.energy_sources.map(s=>s===t?e:s)})}})}async _deleteSource(e){const t=e.currentTarget.closest(".row").source;if(await(0,h.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")}))try{await this._savePreferences({...this.preferences,energy_sources:this.preferences.energy_sources.filter(e=>e!==t)})}catch(e){(0,h.showAlertDialog)(this,{title:`Failed to save config: ${e.message}`})}}async _savePreferences(e){const t=await(0,c.WN)(this.hass,e);(0,r.r)(this,"value-changed",{value:t})}static get styles(){return[d.RF,g.X,i.AH`.row{height:58px}.content{display:flex;flex-direction:column}.label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}`]}}(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"preferences",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"statsMetadata",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"validationResult",void 0),m=(0,a.Cg)([(0,o.EM)("ha-energy-battery-settings")],m),t()}catch(e){t(e)}})},76135(e,t,s){s.a(e,async function(e,t){try{s(18111),s(22489),s(7588),s(61701);var a=s(62826),i=s(96196),o=s(4937),r=s(44457),n=s(1087),c=(s(76776),s(18350)),l=(s(26300),s(85938),s(67094),s(38114)),h=s(23528),d=s(65063),p=s(14503),g=s(82105),u=(s(38940),s(6268)),y=e([c,l]);[c,l]=y.then?(await y)():y;const _="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",f="M3 6H21V4H3C1.9 4 1 4.9 1 6V18C1 19.1 1.9 20 3 20H7V18H3V6M13 12H9V13.78C8.39 14.33 8 15.11 8 16C8 16.89 8.39 17.67 9 18.22V20H13V18.22C13.61 17.67 14 16.88 14 16S13.61 14.33 13 13.78V12M11 17.5C10.17 17.5 9.5 16.83 9.5 16S10.17 14.5 11 14.5 12.5 15.17 12.5 16 11.83 17.5 11 17.5M22 8H16C15.5 8 15 8.5 15 9V19C15 19.5 15.5 20 16 20H22C22.5 20 23 19.5 23 19V9C23 8.5 22.5 8 22 8M21 18H17V10H21V18Z",v="M21 11H3V9H21V11M21 13H3V15H21V13Z",m="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",$="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z";class w extends i.WF{render(){return i.qy` <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="${f}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.energy.device_consumption.title")} </h1> <div class="card-content"> <p> ${this.hass.localize("ui.panel.config.energy.device_consumption.sub")} </p> ${this.validationResult?.device_consumption.map(e=>i.qy` <ha-energy-validation-result .hass="${this.hass}" .issues="${e}"></ha-energy-validation-result> `)} <h3> ${this.hass.localize("ui.panel.config.energy.device_consumption.devices")} </h3> <ha-sortable handle-selector=".handle" @item-moved="${this._itemMoved}"> <div class="devices"> ${(0,o.u)(this.preferences.device_consumption,e=>e.stat_consumption,e=>i.qy` <div class="row" .device="${e}"> <div class="handle"> <ha-svg-icon .path="${v}"></ha-svg-icon> </div> <span class="content">${e.name||(0,h.$O)(this.hass,e.stat_consumption,this.statsMetadata?.[e.stat_consumption])}</span> <ha-icon-button .label="${this.hass.localize("ui.common.edit")}" @click="${this._editDevice}" .path="${m}"></ha-icon-button> <ha-icon-button .label="${this.hass.localize("ui.common.delete")}" @click="${this._deleteDevice}" .device="${e}" .path="${_}"></ha-icon-button> </div> `)} </div> </ha-sortable> <div class="row"> <ha-svg-icon .path="${f}"></ha-svg-icon> <ha-button @click="${this._addDevice}" appearance="filled" size="small"> <ha-svg-icon slot="start" .path="${$}"></ha-svg-icon>${this.hass.localize("ui.panel.config.energy.device_consumption.add_device")}</ha-button> </div> </div> </ha-card> `}_itemMoved(e){e.stopPropagation();const{oldIndex:t,newIndex:s}=e.detail,a=this.preferences.device_consumption.concat(),i=a.splice(t,1)[0];a.splice(s,0,i);const o={...this.preferences,device_consumption:a};(0,n.r)(this,"value-changed",{value:o}),this._savePreferences(o)}_editDevice(e){const t=e.currentTarget.closest(".row").device;(0,g.D0)(this,{statsMetadata:this.statsMetadata,device:{...t},device_consumptions:this.preferences.device_consumption,saveCallback:async e=>{const s={...this.preferences,device_consumption:this.preferences.device_consumption.map(s=>s===t?e:s)};this._sanitizeParents(s),await this._savePreferences(s)}})}_addDevice(){(0,g.D0)(this,{statsMetadata:this.statsMetadata,device_consumptions:this.preferences.device_consumption,saveCallback:async e=>{await this._savePreferences({...this.preferences,device_consumption:this.preferences.device_consumption.concat(e)})}})}_sanitizeParents(e){const t=e.device_consumption.map(e=>e.stat_consumption);e.device_consumption.forEach(e=>{e.included_in_stat&&!t.includes(e.included_in_stat)&&delete e.included_in_stat})}async _deleteDevice(e){const t=e.currentTarget.device;if(await(0,d.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")}))try{const e={...this.preferences,device_consumption:this.preferences.device_consumption.filter(e=>e!==t)};this._sanitizeParents(e),await this._savePreferences(e)}catch(e){(0,d.showAlertDialog)(this,{title:`Failed to save config: ${e.message}`})}}async _savePreferences(e){const t=await(0,l.WN)(this.hass,e);(0,n.r)(this,"value-changed",{value:t})}static get styles(){return[p.RF,u.X,i.AH`.handle{cursor:move;cursor:grab}`]}}(0,a.Cg)([(0,r.MZ)({attribute:!1})],w.prototype,"hass",void 0),(0,a.Cg)([(0,r.MZ)({attribute:!1})],w.prototype,"preferences",void 0),(0,a.Cg)([(0,r.MZ)({attribute:!1})],w.prototype,"statsMetadata",void 0),(0,a.Cg)([(0,r.MZ)({attribute:!1})],w.prototype,"validationResult",void 0),w=(0,a.Cg)([(0,r.EM)("ha-energy-device-settings")],w),t()}catch(e){t(e)}})},28166(e,t,s){s.a(e,async function(e,t){try{s(44114),s(18111),s(22489),s(7588),s(61701);var a=s(62826),i=s(96196),o=s(44457),r=s(1087),n=s(18350),c=(s(76776),s(26300),s(38114)),l=s(23528),h=s(65063),d=s(14503),p=s(82105),g=(s(38940),s(6268)),u=e([n,c]);[n,c]=u.then?(await u)():u;const y="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",_="M17.66 11.2C17.43 10.9 17.15 10.64 16.89 10.38C16.22 9.78 15.46 9.35 14.82 8.72C13.33 7.26 13 4.85 13.95 3C13 3.23 12.17 3.75 11.46 4.32C8.87 6.4 7.85 10.07 9.07 13.22C9.11 13.32 9.15 13.42 9.15 13.55C9.15 13.77 9 13.97 8.8 14.05C8.57 14.15 8.33 14.09 8.14 13.93C8.08 13.88 8.04 13.83 8 13.76C6.87 12.33 6.69 10.28 7.45 8.64C5.78 10 4.87 12.3 5 14.47C5.06 14.97 5.12 15.47 5.29 15.97C5.43 16.57 5.7 17.17 6 17.7C7.08 19.43 8.95 20.67 10.96 20.92C13.1 21.19 15.39 20.8 17.03 19.32C18.86 17.66 19.5 15 18.56 12.72L18.43 12.46C18.22 12 17.66 11.2 17.66 11.2M14.5 17.5C14.22 17.74 13.76 18 13.4 18.1C12.28 18.5 11.16 17.94 10.5 17.28C11.69 17 12.4 16.12 12.61 15.23C12.78 14.43 12.46 13.77 12.33 13C12.21 12.26 12.23 11.63 12.5 10.94C12.69 11.32 12.89 11.7 13.13 12C13.9 13 15.11 13.44 15.37 14.8C15.41 14.94 15.43 15.08 15.43 15.23C15.46 16.05 15.1 16.95 14.5 17.5H14.5Z",f="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",v="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z";class m extends i.WF{render(){const e=[],t=[];return this.preferences.energy_sources.forEach((s,a)=>{"gas"===s.type&&(e.push(s),this.validationResult&&t.push(this.validationResult.energy_sources[a]))}),i.qy` <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="${_}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.energy.gas.title")} </h1> <div class="card-content"> <p>${this.hass.localize("ui.panel.config.energy.gas.sub")}</p> ${t.map(e=>i.qy` <ha-energy-validation-result .hass="${this.hass}" .issues="${e}"></ha-energy-validation-result> `)} <h3> ${this.hass.localize("ui.panel.config.energy.gas.gas_consumption")} </h3> ${e.map(e=>{const t=this.hass.states[e.stat_energy_from];return i.qy` <div class="row" .source="${e}"> ${t?.attributes.icon?i.qy`<ha-icon .icon="${t.attributes.icon}"></ha-icon>`:i.qy`<ha-svg-icon .path="${_}"></ha-svg-icon>`} <span class="content">${(0,l.$O)(this.hass,e.stat_energy_from,this.statsMetadata?.[e.stat_energy_from])}</span> <ha-icon-button .label="${this.hass.localize("ui.panel.config.energy.gas.edit_gas_source")}" @click="${this._editSource}" .path="${f}"></ha-icon-button> <ha-icon-button .label="${this.hass.localize("ui.panel.config.energy.gas.delete_gas_source")}" @click="${this._deleteSource}" .path="${y}"></ha-icon-button> </div> `})} <div class="row border-bottom"> <ha-svg-icon .path="${_}"></ha-svg-icon> <ha-button @click="${this._addSource}" appearance="filled" size="small"> <ha-svg-icon slot="start" .path="${v}"></ha-svg-icon>${this.hass.localize("ui.panel.config.energy.gas.add_gas_source")}</ha-button> </div> </div> </ha-card> `}_addSource(){(0,p.yH)(this,{allowedGasUnitClass:(0,c._d)(this.preferences,void 0,this.statsMetadata),gas_sources:this.preferences.energy_sources.filter(e=>"gas"===e.type),saveCallback:async e=>{delete e.unit_of_measurement,await this._savePreferences({...this.preferences,energy_sources:this.preferences.energy_sources.concat(e)})}})}_editSource(e){const t=e.currentTarget.closest(".row").source;(0,p.yH)(this,{source:{...t},allowedGasUnitClass:(0,c._d)(this.preferences,t.stat_energy_from,this.statsMetadata),metadata:this.statsMetadata?.[t.stat_energy_from],gas_sources:this.preferences.energy_sources.filter(e=>"gas"===e.type),saveCallback:async e=>{await this._savePreferences({...this.preferences,energy_sources:this.preferences.energy_sources.map(s=>s===t?e:s)})}})}async _deleteSource(e){const t=e.currentTarget.closest(".row").source;if(await(0,h.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")}))try{await this._savePreferences({...this.preferences,energy_sources:this.preferences.energy_sources.filter(e=>e!==t)})}catch(e){(0,h.showAlertDialog)(this,{title:`Failed to save config: ${e.message}`})}}async _savePreferences(e){const t=await(0,c.WN)(this.hass,e);(0,r.r)(this,"value-changed",{value:t})}static get styles(){return[d.RF,g.X]}}(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"preferences",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"statsMetadata",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"validationResult",void 0),m=(0,a.Cg)([(0,o.EM)("ha-energy-gas-settings")],m),t()}catch(e){t(e)}})},54081(e,t,s){s.a(e,async function(e,t){try{s(44114),s(18111),s(22489),s(20116),s(61701),s(18237);var a=s(62826),i=s(96196),o=s(44457),r=s(1087),n=(s(76776),s(18350)),c=(s(26300),s(67094),s(77423)),l=s(38114),h=s(23528),d=s(77763),p=s(65063),g=s(14503),u=s(44144),y=s(82105),_=(s(38940),s(6268)),f=e([n,l]);[n,l]=f.then?(await f)():f;const v="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",m="M24 13L20 17V14H11V12H20V9L24 13M4 20V12H1L11 3L18 9.3V10H15.79L11 5.69L6 10.19V18H16V16H18V20H4Z",$="M15 13L11 17V14H2V12H11V9L15 13M5 20V16H7V18H17V10.19L12 5.69L7.21 10H4.22L12 3L22 12H19V20H5Z",w="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",b="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",H="M8.28,5.45L6.5,4.55L7.76,2H16.23L17.5,4.55L15.72,5.44L15,4H9L8.28,5.45M18.62,8H14.09L13.3,5H10.7L9.91,8H5.38L4.1,10.55L5.89,11.44L6.62,10H17.38L18.1,11.45L19.89,10.56L18.62,8M17.77,22H15.7L15.46,21.1L12,15.9L8.53,21.1L8.3,22H6.23L9.12,11H11.19L10.83,12.35L12,14.1L13.16,12.35L12.81,11H14.88L17.77,22M11.4,15L10.5,13.65L9.32,18.13L11.4,15M14.68,18.12L13.5,13.64L12.6,15L14.68,18.12Z";class M extends i.WF{firstUpdated(){this._fetchCO2SignalConfigEntries()}render(){const e=this.preferences.energy_sources.findIndex(e=>"grid"===e.type);let t,s;return-1===e?t=(0,l.uh)():(t=this.preferences.energy_sources[e],this.validationResult&&(s=this.validationResult.energy_sources[e])),i.qy` <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="${H}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.energy.grid.title")} </h1> <div class="card-content"> <p>${this.hass.localize("ui.panel.config.energy.grid.sub")}</p> ${s?i.qy` <ha-energy-validation-result .hass="${this.hass}" .issues="${s}"></ha-energy-validation-result> `:""} <h3> ${this.hass.localize("ui.panel.config.energy.grid.grid_consumption")} </h3> ${t.flow_from.map(e=>{const t=this.hass.states[e.stat_energy_from];return i.qy` <div class="row" .source="${e}"> ${t?.attributes.icon?i.qy`<ha-icon .icon="${t?.attributes.icon}"></ha-icon>`:i.qy`<ha-svg-icon .path="${$}"></ha-svg-icon>`} <span class="content">${(0,h.$O)(this.hass,e.stat_energy_from,this.statsMetadata?.[e.stat_energy_from])}</span> <ha-icon-button .label="${this.hass.localize("ui.panel.config.energy.grid.edit_consumption")}" @click="${this._editFromSource}" .path="${w}"></ha-icon-button> <ha-icon-button .label="${this.hass.localize("ui.panel.config.energy.grid.delete_consumption")}" @click="${this._deleteFromSource}" .path="${v}"></ha-icon-button> </div> `})} <div class="row border-bottom"> <ha-svg-icon .path="${$}"></ha-svg-icon> <ha-button appearance="filled" size="small" @click="${this._addFromSource}"> <ha-svg-icon .path="${b}" slot="start"></ha-svg-icon> ${this.hass.localize("ui.panel.config.energy.grid.add_consumption")}</ha-button> </div> <h3> ${this.hass.localize("ui.panel.config.energy.grid.return_to_grid")} </h3> ${t.flow_to.map(e=>{const t=this.hass.states[e.stat_energy_to];return i.qy` <div class="row" .source="${e}"> ${t?.attributes.icon?i.qy`<ha-icon .icon="${t.attributes.icon}"></ha-icon>`:i.qy`<ha-svg-icon .path="${m}"></ha-svg-icon>`} <span class="content">${(0,h.$O)(this.hass,e.stat_energy_to,this.statsMetadata?.[e.stat_energy_to])}</span> <ha-icon-button .label="${this.hass.localize("ui.panel.config.energy.grid.edit_return")}" @click="${this._editToSource}" .path="${w}"></ha-icon-button> <ha-icon-button .label="${this.hass.localize("ui.panel.config.energy.grid.delete_return")}" @click="${this._deleteToSource}" .path="${v}"></ha-icon-button> </div> `})} <div class="row border-bottom"> <ha-svg-icon .path="${m}"></ha-svg-icon> <ha-button @click="${this._addToSource}" appearance="filled" size="small"> <ha-svg-icon .path="${b}" slot="start"></ha-svg-icon>${this.hass.localize("ui.panel.config.energy.grid.add_return")}</ha-button> </div> <h3> ${this.hass.localize("ui.panel.config.energy.grid.grid_power")} </h3> ${t.power?.map(e=>{const t=this.hass.states[e.stat_rate];return i.qy` <div class="row" .source="${e}"> ${t?.attributes.icon?i.qy`<ha-icon .icon="${t.attributes.icon}"></ha-icon>`:i.qy`<ha-svg-icon .path="${H}"></ha-svg-icon>`} <span class="content">${(0,h.$O)(this.hass,e.stat_rate,this.statsMetadata?.[e.stat_rate])}</span> <ha-icon-button .label="${this.hass.localize("ui.panel.config.energy.grid.edit_power")}" @click="${this._editPowerSource}" .path="${w}"></ha-icon-button> <ha-icon-button .label="${this.hass.localize("ui.panel.config.energy.grid.delete_power")}" @click="${this._deletePowerSource}" .path="${v}"></ha-icon-button> </div> `})} <div class="row border-bottom"> <ha-svg-icon .path="${H}"></ha-svg-icon> <ha-button @click="${this._addPowerSource}" appearance="filled" size="small"> <ha-svg-icon .path="${b}" slot="start"></ha-svg-icon>${this.hass.localize("ui.panel.config.energy.grid.add_power")}</ha-button> </div> <h3> ${this.hass.localize("ui.panel.config.energy.grid.grid_carbon_footprint")} </h3> ${this._co2ConfigEntry?i.qy`<div class="row" .entry="${this._co2ConfigEntry}"> <img alt="" crossorigin="anonymous" referrerpolicy="no-referrer" src="${(0,u.MR)({domain:"co2signal",type:"icon",darkOptimized:this.hass.themes?.darkMode})}"> <span class="content">${this._co2ConfigEntry.title}</span> <a href="${`/config/integrations/integration/${this._co2ConfigEntry?.domain}`}"> <ha-icon-button .path="${w}"></ha-icon-button> </a> <ha-icon-button .label="${this.hass.localize("ui.panel.config.energy.grid.remove_co2_signal")}" @click="${this._removeCO2Sensor}" .path="${v}"></ha-icon-button> </div>`:i.qy` <div class="row border-bottom"> <img alt="" crossorigin="anonymous" referrerpolicy="no-referrer" src="${(0,u.MR)({domain:"co2signal",type:"icon",darkOptimized:this.hass.themes?.darkMode})}"> <ha-button @click="${this._addCO2Sensor}" appearance="filled" size="small"> <ha-svg-icon .path="${b}" slot="start"></ha-svg-icon> ${this.hass.localize("ui.panel.config.energy.grid.add_co2_signal")} </ha-button> </div> `} </div> </ha-card> `}async _fetchCO2SignalConfigEntries(){const e=await(0,c.VN)(this.hass,{domain:"co2signal"});this._co2ConfigEntry=e.length?e[0]:void 0}_addCO2Sensor(){(0,d.W)(this,{startFlowHandler:"co2signal",dialogClosedCallback:()=>{this._fetchCO2SignalConfigEntries()}})}async _removeCO2Sensor(e){const t=e.currentTarget.closest(".row").entry.entry_id;await(0,p.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_integration")})&&(await(0,c.eM)(this.hass,t),this._fetchCO2SignalConfigEntries())}_addFromSource(){const e=this.preferences.energy_sources.find(e=>"grid"===e.type);(0,y.xu)(this,{grid_source:e,saveCallback:async t=>{let s;s=e?{...this.preferences,energy_sources:this.preferences.energy_sources.map(s=>"grid"===s.type?{...s,flow_from:[...e.flow_from,t]}:s)}:{...this.preferences,energy_sources:[...this.preferences.energy_sources,{...(0,l.uh)(),flow_from:[t]}]},await this._savePreferences(s)}})}_addToSource(){const e=this.preferences.energy_sources.find(e=>"grid"===e.type);(0,y.An)(this,{grid_source:e,saveCallback:async t=>{let s;s=e?{...this.preferences,energy_sources:this.preferences.energy_sources.map(s=>"grid"===s.type?{...s,flow_to:[...e.flow_to,t]}:s)}:{...this.preferences,energy_sources:[...this.preferences.energy_sources,{...(0,l.uh)(),flow_to:[t]}]},await this._savePreferences(s)}})}_editFromSource(e){const t=e.currentTarget.closest(".row").source,s=this.preferences.energy_sources.find(e=>"grid"===e.type);(0,y.xu)(this,{source:{...t},grid_source:s,metadata:this.statsMetadata?.[t.stat_energy_from],saveCallback:async e=>{const s=(0,l.E$)(this.preferences).grid[0].flow_from,a={...this.preferences,energy_sources:this.preferences.energy_sources.map(a=>"grid"===a.type?{...a,flow_from:s.map(s=>s===t?e:s)}:a)};await this._savePreferences(a)}})}_editToSource(e){const t=e.currentTarget.closest(".row").source,s=this.preferences.energy_sources.find(e=>"grid"===e.type);(0,y.An)(this,{source:{...t},grid_source:s,metadata:this.statsMetadata?.[t.stat_energy_to],saveCallback:async e=>{const s=(0,l.E$)(this.preferences).grid[0].flow_to,a={...this.preferences,energy_sources:this.preferences.energy_sources.map(a=>"grid"===a.type?{...a,flow_to:s.map(s=>s===t?e:s)}:a)};await this._savePreferences(a)}})}async _deleteFromSource(e){const t=e.currentTarget.closest(".row").source;if(!await(0,p.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")}))return;const s=(0,l.E$)(this.preferences).grid[0].flow_from.filter(e=>e!==t),a={...this.preferences,energy_sources:this.preferences.energy_sources.map(e=>"grid"===e.type?{...e,flow_from:s}:e)},i=this._removeEmptySources(a);await this._savePreferences(i)}async _deleteToSource(e){const t=e.currentTarget.closest(".row").source;if(!await(0,p.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")}))return;const s=(0,l.E$)(this.preferences).grid[0].flow_to.filter(e=>e!==t),a={...this.preferences,energy_sources:this.preferences.energy_sources.map(e=>"grid"===e.type?{...e,flow_to:s}:e)},i=this._removeEmptySources(a);await this._savePreferences(i)}_addPowerSource(){const e=this.preferences.energy_sources.find(e=>"grid"===e.type);(0,y._V)(this,{grid_source:e,saveCallback:async t=>{let s;s=e?{...this.preferences,energy_sources:this.preferences.energy_sources.map(s=>"grid"===s.type?{...s,power:[...e.power||[],t]}:s)}:{...this.preferences,energy_sources:[...this.preferences.energy_sources,{...(0,l.uh)(),power:[t]}]},await this._savePreferences(s)}})}_editPowerSource(e){const t=e.currentTarget.closest(".row").source,s=this.preferences.energy_sources.find(e=>"grid"===e.type);(0,y._V)(this,{source:{...t},grid_source:s,saveCallback:async e=>{const s=(0,l.E$)(this.preferences).grid[0].power||[],a={...this.preferences,energy_sources:this.preferences.energy_sources.map(a=>"grid"===a.type?{...a,power:s.map(s=>s===t?e:s)}:a)};await this._savePreferences(a)}})}async _deletePowerSource(e){const t=e.currentTarget.closest(".row").source;if(!await(0,p.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")}))return;const s=(0,l.E$)(this.preferences).grid[0].power?.filter(e=>e!==t)||[],a={...this.preferences,energy_sources:this.preferences.energy_sources.map(e=>"grid"===e.type?{...e,power:s}:e)},i=this._removeEmptySources(a);await this._savePreferences(i)}_removeEmptySources(e){return e.energy_sources=e.energy_sources.reduce((e,t)=>(("grid"!==t.type||t.flow_from.length>0||t.flow_to.length>0||t.power&&t.power.length>0)&&e.push(t),e),[]),e}async _savePreferences(e){try{const t=await(0,l.WN)(this.hass,e);(0,r.r)(this,"value-changed",{value:t})}catch(e){(0,p.showAlertDialog)(this,{title:`Failed to save config: ${e.message}`})}}static get styles(){return[g.RF,_.X]}}(0,a.Cg)([(0,o.MZ)({attribute:!1})],M.prototype,"hass",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],M.prototype,"preferences",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],M.prototype,"statsMetadata",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],M.prototype,"validationResult",void 0),(0,a.Cg)([(0,o.wk)()],M.prototype,"_co2ConfigEntry",void 0),M=(0,a.Cg)([(0,o.EM)("ha-energy-grid-settings")],M),t()}catch(e){t(e)}})},38726(e,t,s){s.a(e,async function(e,t){try{s(44114),s(18111),s(22489),s(7588),s(61701);var a=s(62826),i=s(96196),o=s(44457),r=s(1087),n=(s(76776),s(18350)),c=(s(26300),s(38114)),l=s(23528),h=s(65063),d=s(14503),p=s(82105),g=(s(38940),s(6268)),u=e([n,c]);[n,c]=u.then?(await u)():u;const y="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",_="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",f="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",v="M11.45,2V5.55L15,3.77L11.45,2M10.45,8L8,10.46L11.75,11.71L10.45,8M2,11.45L3.77,15L5.55,11.45H2M10,2H2V10C2.57,10.17 3.17,10.25 3.77,10.25C7.35,10.26 10.26,7.35 10.27,3.75C10.26,3.16 10.17,2.57 10,2M17,22V16H14L19,7V13H22L17,22Z";class m extends i.WF{render(){const e=[],t=[];return this.preferences.energy_sources.forEach((s,a)=>{"solar"===s.type&&(e.push(s),this.validationResult&&t.push(this.validationResult.energy_sources[a]))}),i.qy` <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="${v}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.energy.solar.title")} </h1> <div class="card-content"> <p>${this.hass.localize("ui.panel.config.energy.solar.sub")}</p> ${t.map(e=>i.qy` <ha-energy-validation-result .hass="${this.hass}" .issues="${e}"></ha-energy-validation-result> `)} <h3> ${this.hass.localize("ui.panel.config.energy.solar.solar_production")} </h3> ${e.map(e=>{const t=this.hass.states[e.stat_energy_from];return i.qy` <div class="row" .source="${e}"> ${t?.attributes.icon?i.qy`<ha-icon .icon="${t.attributes.icon}"></ha-icon>`:i.qy`<ha-svg-icon .path="${v}"></ha-svg-icon>`} <span class="content">${(0,l.$O)(this.hass,e.stat_energy_from,this.statsMetadata?.[e.stat_energy_from])}</span> ${this.info?i.qy` <ha-icon-button .label="${this.hass.localize("ui.panel.config.energy.solar.edit_solar_production")}" @click="${this._editSource}" .path="${_}"></ha-icon-button> `:""} <ha-icon-button .label="${this.hass.localize("ui.panel.config.energy.solar.delete_solar_production")}" @click="${this._deleteSource}" .path="${y}"></ha-icon-button> </div> `})} ${this.info?i.qy` <div class="row border-bottom"> <ha-svg-icon .path="${v}"></ha-svg-icon> <ha-button @click="${this._addSource}" appearance="filled" size="small"> <ha-svg-icon slot="start" .path="${f}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.energy.solar.add_solar_production")} </ha-button> </div> `:""} </div> </ha-card> `}_addSource(){(0,p.se)(this,{info:this.info,solar_sources:this.preferences.energy_sources.filter(e=>"solar"===e.type),saveCallback:async e=>{await this._savePreferences({...this.preferences,energy_sources:this.preferences.energy_sources.concat(e)})}})}_editSource(e){const t=e.currentTarget.closest(".row").source;(0,p.se)(this,{info:this.info,source:{...t},solar_sources:this.preferences.energy_sources.filter(e=>"solar"===e.type),saveCallback:async e=>{await this._savePreferences({...this.preferences,energy_sources:this.preferences.energy_sources.map(s=>s===t?e:s)})}})}async _deleteSource(e){const t=e.currentTarget.closest(".row").source;if(await(0,h.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")}))try{await this._savePreferences({...this.preferences,energy_sources:this.preferences.energy_sources.filter(e=>e!==t)})}catch(e){(0,h.showAlertDialog)(this,{title:`Failed to save config: ${e.message}`})}}async _savePreferences(e){const t=await(0,c.WN)(this.hass,e);(0,r.r)(this,"value-changed",{value:t})}static get styles(){return[d.RF,g.X]}}(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"preferences",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"statsMetadata",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"validationResult",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"info",void 0),m=(0,a.Cg)([(0,o.EM)("ha-energy-solar-settings")],m),t()}catch(e){t(e)}})},38940(e,t,s){s(18111),s(61701);var a=s(62826),i=s(96196),o=s(44457),r=(s(38962),s(36918));class n extends i.WF{render(){return 0===this.issues.length?i.s6:this.issues.map(e=>i.qy` <ha-alert alert-type="warning" .title="${this.hass.localize(`component.energy.issues.${e.type}.title`)||e.type}"> ${this.hass.localize(`component.energy.issues.${e.type}.description`,e.translation_placeholders)} ${"recorder_untracked"===e.type?i.qy`(<a href="${(0,r.o)(this.hass,"/integrations/recorder#configure-filter")}" target="_blank" rel="noopener noreferrer">${this.hass.localize("ui.panel.config.common.learn_more")}</a>)`:""} <ul> ${e.affected_entities.map(([e,t])=>i.qy`<li>${e}${t?i.qy` (${t})`:""}</li>`)} </ul> </ha-alert> `)}}n.styles=i.AH`ul{padding-left:24px;padding-inline-start:24px padding-inline-end: initial;margin:4px 0}a{color:var(--primary-color)}`,(0,a.Cg)([(0,o.MZ)({attribute:!1})],n.prototype,"hass",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],n.prototype,"issues",void 0),n=(0,a.Cg)([(0,o.EM)("ha-energy-validation-result")],n)},70604(e,t,s){s.a(e,async function(e,t){try{s(44114),s(18111),s(22489),s(7588),s(61701);var a=s(62826),i=s(96196),o=s(44457),r=s(1087),n=(s(76776),s(18350)),c=(s(26300),s(38114)),l=s(23528),h=s(65063),d=s(14503),p=s(82105),g=(s(38940),s(6268)),u=e([n,c]);[n,c]=u.then?(await u)():u;const y="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",_="M12,20A6,6 0 0,1 6,14C6,10 12,3.25 12,3.25C12,3.25 18,10 18,14A6,6 0 0,1 12,20Z",f="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",v="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z";class m extends i.WF{render(){const e=[],t=[];return this.preferences.energy_sources.forEach((s,a)=>{"water"===s.type&&(e.push(s),this.validationResult&&t.push(this.validationResult.energy_sources[a]))}),i.qy` <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="${_}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.energy.water.title")} </h1> <div class="card-content"> <p>${this.hass.localize("ui.panel.config.energy.water.sub")}</p> ${t.map(e=>i.qy` <ha-energy-validation-result .hass="${this.hass}" .issues="${e}"></ha-energy-validation-result> `)} <h3> ${this.hass.localize("ui.panel.config.energy.water.water_consumption")} </h3> ${e.map(e=>{const t=this.hass.states[e.stat_energy_from];return i.qy` <div class="row" .source="${e}"> ${t?.attributes.icon?i.qy`<ha-icon .icon="${t.attributes.icon}"></ha-icon>`:i.qy`<ha-svg-icon .path="${_}"></ha-svg-icon>`} <span class="content">${(0,l.$O)(this.hass,e.stat_energy_from,this.statsMetadata?.[e.stat_energy_from])}</span> <ha-icon-button .label="${this.hass.localize("ui.panel.config.energy.water.edit_water_source")}" @click="${this._editSource}" .path="${f}"></ha-icon-button> <ha-icon-button .label="${this.hass.localize("ui.panel.config.energy.water.delete_water_source")}" @click="${this._deleteSource}" .path="${y}"></ha-icon-button> </div> `})} <div class="row border-bottom"> <ha-svg-icon .path="${_}"></ha-svg-icon> <ha-button @click="${this._addSource}" appearance="filled" size="small"> <ha-svg-icon slot="start" .path="${v}"></ha-svg-icon>${this.hass.localize("ui.panel.config.energy.water.add_water_source")}</ha-button> </div> </div> </ha-card> `}_addSource(){(0,p.YX)(this,{water_sources:this.preferences.energy_sources.filter(e=>"water"===e.type),saveCallback:async e=>{delete e.unit_of_measurement,await this._savePreferences({...this.preferences,energy_sources:this.preferences.energy_sources.concat(e)})}})}_editSource(e){const t=e.currentTarget.closest(".row").source;(0,p.YX)(this,{source:{...t},metadata:this.statsMetadata?.[t.stat_energy_from],water_sources:this.preferences.energy_sources.filter(e=>"water"===e.type),saveCallback:async e=>{await this._savePreferences({...this.preferences,energy_sources:this.preferences.energy_sources.map(s=>s===t?e:s)})}})}async _deleteSource(e){const t=e.currentTarget.closest(".row").source;if(await(0,h.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")}))try{await this._savePreferences({...this.preferences,energy_sources:this.preferences.energy_sources.filter(e=>e!==t)})}catch(e){(0,h.showAlertDialog)(this,{title:`Failed to save config: ${e.message}`})}}async _savePreferences(e){const t=await(0,c.WN)(this.hass,e);(0,r.r)(this,"value-changed",{value:t})}static get styles(){return[d.RF,g.X]}}(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"preferences",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"statsMetadata",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"validationResult",void 0),m=(0,a.Cg)([(0,o.EM)("ha-energy-water-settings")],m),t()}catch(e){t(e)}})},6268(e,t,s){s.d(t,{X:()=>a});const a=s(96196).AH`ha-card{height:100%}.card-header ha-svg-icon{height:32px;width:32px;margin-right:8px;margin-inline-end:8px;margin-inline-start:initial;direction:var(--direction)}h3{margin-top:24px;margin-bottom:4px}.row{display:flex;align-items:center;border-top:1px solid var(--divider-color);height:48px;box-sizing:border-box}.row ha-icon,.row ha-svg-icon,.row img{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial;direction:var(--direction)}.row img{height:24px}.row .content{flex-grow:1;overflow:hidden;text-overflow:ellipsis}ha-icon-button{color:var(--secondary-text-color)}`},82105(e,t,s){s.d(t,{An:()=>h,D0:()=>i,YA:()=>d,YX:()=>c,_V:()=>p,m5:()=>o,se:()=>r,xu:()=>l,yH:()=>n});var a=s(1087);const i=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-device-settings",dialogImport:()=>Promise.all([s.e("44533"),s.e("7199"),s.e("96261"),s.e("46095"),s.e("52074"),s.e("92769"),s.e("93785"),s.e("44966"),s.e("26767"),s.e("47251"),s.e("22397"),s.e("34326"),s.e("52242"),s.e("4939"),s.e("9364"),s.e("80445"),s.e("8851"),s.e("19656"),s.e("24735")]).then(s.bind(s,1419)),dialogParams:t})},o=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-battery-settings",dialogImport:()=>Promise.all([s.e("44533"),s.e("7199"),s.e("96261"),s.e("46095"),s.e("52074"),s.e("92769"),s.e("93785"),s.e("44966"),s.e("32159"),s.e("80445"),s.e("8851"),s.e("36996")]).then(s.bind(s,5242)),dialogParams:t})},r=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-solar-settings",dialogImport:()=>Promise.all([s.e("44533"),s.e("7199"),s.e("96261"),s.e("46095"),s.e("52074"),s.e("92769"),s.e("93785"),s.e("44966"),s.e("8477"),s.e("4939"),s.e("50394"),s.e("80445"),s.e("8851"),s.e("24708")]).then(s.bind(s,94098)),dialogParams:t})},n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-gas-settings",dialogImport:()=>Promise.all([s.e("44533"),s.e("7199"),s.e("96261"),s.e("46095"),s.e("52074"),s.e("92769"),s.e("93785"),s.e("44966"),s.e("52242"),s.e("39607"),s.e("4939"),s.e("85904"),s.e("80445"),s.e("8851"),s.e("19656"),s.e("15210")]).then(s.bind(s,93725)),dialogParams:t})},c=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-water-settings",dialogImport:()=>Promise.all([s.e("44533"),s.e("7199"),s.e("96261"),s.e("46095"),s.e("52074"),s.e("92769"),s.e("93785"),s.e("44966"),s.e("52242"),s.e("39607"),s.e("4939"),s.e("63523"),s.e("80445"),s.e("8851"),s.e("19656"),s.e("47520")]).then(s.bind(s,86240)),dialogParams:t})},l=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-grid-flow-settings",dialogImport:()=>Promise.all([s.e("44533"),s.e("7199"),s.e("96261"),s.e("46095"),s.e("52074"),s.e("92769"),s.e("93785"),s.e("44966"),s.e("52242"),s.e("39607"),s.e("4939"),s.e("41142"),s.e("80445"),s.e("8851"),s.e("19656"),s.e("8936")]).then(s.bind(s,61112)),dialogParams:{...t,direction:"from"}})},h=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-grid-flow-settings",dialogImport:()=>Promise.all([s.e("44533"),s.e("7199"),s.e("96261"),s.e("46095"),s.e("52074"),s.e("92769"),s.e("93785"),s.e("44966"),s.e("52242"),s.e("39607"),s.e("4939"),s.e("41142"),s.e("80445"),s.e("8851"),s.e("19656"),s.e("8936")]).then(s.bind(s,61112)),dialogParams:{...t,direction:"to"}})},d=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-device-settings-water",dialogImport:()=>Promise.all([s.e("44533"),s.e("7199"),s.e("96261"),s.e("46095"),s.e("52074"),s.e("92769"),s.e("93785"),s.e("44966"),s.e("26767"),s.e("47251"),s.e("22397"),s.e("34326"),s.e("52242"),s.e("4939"),s.e("86983"),s.e("80445"),s.e("8851"),s.e("19656"),s.e("70885")]).then(s.bind(s,68937)),dialogParams:t})},p=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-grid-power-settings",dialogImport:()=>Promise.all([s.e("44533"),s.e("7199"),s.e("96261"),s.e("46095"),s.e("52074"),s.e("92769"),s.e("93785"),s.e("44966"),s.e("54540"),s.e("80445"),s.e("8851"),s.e("9527")]).then(s.bind(s,72473)),dialogParams:t})}},36918(e,t,s){s.d(t,{o:()=>a});const a=(e,t)=>`https://${e.config.version.includes("b")?"rc":e.config.version.includes("dev")?"next":"www"}.home-assistant.io${t}`}};
//# sourceMappingURL=71380.f9f5c9b8c577039f.js.map