export const __rspack_esm_id="74723";export const __rspack_esm_ids=["74723"];export const __webpack_modules__={77423(e,t,i){i.d(t,{A:()=>n,Cm:()=>o,JW:()=>b,Pd:()=>d,TC:()=>c,VN:()=>l,Vx:()=>p,XQ:()=>u,eM:()=>_,iH:()=>h,k3:()=>y,m4:()=>r,qf:()=>a,t0:()=>s,yv:()=>g});i(44114),i(18111),i(22489),i(20116),i(7588),i(61701);const s=(e,t)=>e.callWS({type:"config_entries/subentries/list",entry_id:t}),n=(e,t,i,s)=>e.callWS({type:"config_entries/subentries/update",entry_id:t,subentry_id:i,...s}),o=(e,t,i)=>e.callWS({type:"config_entries/subentries/delete",entry_id:t,subentry_id:i}),r=["migration_error","setup_error","setup_retry"],a=["not_loaded","loaded","setup_error","setup_retry"],d=(e,t,i)=>{const s=new f;return c(e,e=>{t(s.processMessage(e))},i)},c=(e,t,i)=>{const s={type:"config_entries/subscribe"};return i&&i.type&&(s.type_filter=i.type),e.connection.subscribeMessage(e=>{t(e)},s)},l=(e,t)=>{const i={};return t&&(t.type&&(i.type_filter=t.type),t.domain&&(i.domain=t.domain)),e.callWS({type:"config_entries/get",...i})},p=(e,t)=>e.callWS({type:"config_entries/get_single",entry_id:t}),h=(e,t,i)=>e.callWS({type:"config_entries/update",entry_id:t,...i}),_=(e,t)=>e.callApi("DELETE",`config/config_entries/entry/${t}`),g=(e,t)=>e.callApi("POST",`config/config_entries/entry/${t}/reload`),u=(e,t)=>e.callWS({type:"config_entries/disable",entry_id:t,disabled_by:"user"}),y=(e,t)=>e.callWS({type:"config_entries/disable",entry_id:t,disabled_by:null}),b=(e,t)=>{if(!t)return e;const i=e.find(e=>e.entry_id===t);if(!i)return e;return[i,...e.filter(e=>e.entry_id!==t)]};class f{processMessage(e){return e.forEach(e=>{if(null!==e.type&&"added"!==e.type)if("removed"!==e.type){if("updated"===e.type){const t=e.entry;this._entries=this._entries.map(e=>e.entry_id===t.entry_id?t:e)}}else this._entries=this._entries.filter(t=>t.entry_id!==e.entry.entry_id);else this._entries.push(e.entry)}),this._entries}constructor(){this._entries=[]}}},26571(e,t,i){i.d(t,{Al:()=>o,KY:()=>n,PN:()=>d,dG:()=>l,jm:()=>c,m7:()=>u,sR:()=>p,t1:()=>a,t2:()=>_,x:()=>g,yu:()=>h});var s=i(95350);const n=["bluetooth","dhcp","discovery","esphome","hardware","hassio","homekit","integration_discovery","mqtt","ssdp","unignore","usb","zeroconf"],o=["reauth"],r={"HA-Frontend-Base":`${location.protocol}//${location.host}`},a=(e,t,i)=>e.callApi("POST","config/config_entries/flow",{handler:t,show_advanced_options:Boolean(e.userData?.showAdvanced),entry_id:i},r),d=(e,t)=>e.callApi("GET",`config/config_entries/flow/${t}`,void 0,r),c=(e,t,i)=>e.callApi("POST",`config/config_entries/flow/${t}`,i,r),l=(e,t,i)=>e.callWS({type:"config_entries/ignore_flow",flow_id:t,title:i}),p=(e,t)=>e.callApi("DELETE",`config/config_entries/flow/${t}`),h=(e,t)=>e.callApi("GET","config/config_entries/flow_handlers"+(t?`?type=${t}`:"")),_=e=>e.sendMessagePromise({type:"config_entries/flow/progress"}),g=(e,t)=>e.connection.subscribeMessage(e=>t(e),{type:"config_entries/flow/subscribe"}),u=(e,t)=>t.context.title_placeholders&&0!==Object.keys(t.context.title_placeholders).length?e(`component.${t.handler}.config.flow_title`,t.context.title_placeholders)||("name"in t.context.title_placeholders?t.context.title_placeholders.name:(0,s.p$)(e,t.handler)):(0,s.p$)(e,t.handler)},42262(e,t,i){i.d(t,{$:()=>s});const s=e=>e.callWS({type:"usb/scan"})},54706(e,t,i){i.d(t,{E:()=>o});i(18111),i(13579);var s=i(62826),n=i(44457);const o=e=>{class t extends e{connectedCallback(){super.connectedCallback(),this._checkSubscribed()}disconnectedCallback(){if(super.disconnectedCallback(),this.__unsubs){for(;this.__unsubs.length;){const e=this.__unsubs.pop();e instanceof Promise?e.then(e=>e()):e()}this.__unsubs=void 0}}updated(e){if(super.updated(e),e.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const t of e.keys())if(this.hassSubscribeRequiredHostProps.includes(t))return void this._checkSubscribed()}hassSubscribe(){return[]}_checkSubscribed(){void 0===this.__unsubs&&this.isConnected&&void 0!==this.hass&&!this.hassSubscribeRequiredHostProps?.some(e=>void 0===this[e])&&(this.__unsubs=this.hassSubscribe())}}return(0,s.Cg)([(0,n.MZ)({attribute:!1})],t.prototype,"hass",void 0),t}},73561(e,t,i){var s=i(62826),n=i(96196),o=i(44457),r=i(44144);class a extends n.WF{render(){return n.qy` <div class="icon"> <img alt="" src="${(0,r.MR)({domain:this.domain,type:"icon",darkOptimized:this.darkOptimizedIcon})}" crossorigin="anonymous" referrerpolicy="no-referrer"> </div> <div class="title">${this.title}</div> `}constructor(...e){super(...e),this.darkOptimizedIcon=!1,this.clickable=!1}}a.styles=n.AH`:host{display:inline-flex;flex-direction:column;text-align:center;color:var(--primary-text-color)}img{max-width:100%;max-height:100%}.icon{position:relative;margin:0 auto 8px;height:40px;width:40px;display:flex;align-items:center;justify-content:center}.title{min-height:2.3em;word-break:break-word}`,(0,s.Cg)([(0,o.MZ)()],a.prototype,"domain",void 0),(0,s.Cg)([(0,o.MZ)({attribute:!1})],a.prototype,"title",void 0),(0,s.Cg)([(0,o.MZ)({attribute:"dark-optimized-icon",type:Boolean})],a.prototype,"darkOptimizedIcon",void 0),(0,s.Cg)([(0,o.MZ)({attribute:!1,type:Boolean,reflect:!0})],a.prototype,"clickable",void 0),a=(0,s.Cg)([(0,o.EM)("integration-badge")],a)},35502(e,t,i){i.a(e,async function(e,s){try{i.r(t);i(44114),i(18111),i(22489),i(7588),i(61701),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698);var n=i(62826),o=i(96196),r=i(44457),a=i(36312),d=i(1087),c=i(52220),l=i(18350),p=i(77423),h=i(26571),_=i(95350),g=i(42262),u=i(54706),y=(i(73561),i(54819)),b=e([l]);l=(b.then?(await b)():b)[0];const f=new Set(["backup","google_translate","hassio","met","radio_browser","rpi_power","shopping_list","sun"]);class m extends((0,u.E)(o.WF)){hassSubscribe(){return[(0,h.x)(this.hass,e=>{e.forEach(e=>{"removed"===e.type||f.has(e.flow.handler)||this._discoveredDomains.add(e.flow.handler)}),this.hass.loadBackendTranslation("title",Array.from(this._discoveredDomains)),this._discoveredDomainsReceived=!0}),(0,p.TC)(this.hass,e=>{let t=!1;const i=[],s=new Set;if(e.forEach(e=>{if(null===e.type||"added"===e.type){if(f.has(e.entry.domain))return;i.push(e.entry),s.add(e.entry.domain),null===e.type&&(t=!0)}else if("removed"===e.type)this._entries=this._entries.filter(t=>t.entry_id!==e.entry.entry_id);else if("updated"===e.type){if(f.has(e.entry.domain))return;const t=e.entry;this._entries=this._entries.map(e=>e.entry_id===t.entry_id?t:e)}}),!i.length&&!t)return;this.hass.loadBackendTranslation("title",Array.from(s));const n=t?[]:this._entries;this._entries=[...n,...i]},{type:["device","hub","service"]})]}render(){if(!this._discoveredDomainsReceived)return o.s6;let e=new Set;this._entries.forEach(t=>{e.add(t.domain)}),e=new Set([...e,...this._discoveredDomains]);let t=[];for(const i of e.values())t.push([i,(0,_.p$)(this.hass.localize,i)]);t=t.sort((e,t)=>(0,c.xL)(e[0],t[0],this.hass.locale.language));const i=t.length;return 0===i?o.qy` <div class="all-set-icon">ðŸŽ‰</div> <h1> ${this.onboardingLocalize("ui.panel.page-onboarding.integration.all_set")} </h1> <p> ${this.onboardingLocalize("ui.panel.page-onboarding.integration.lets_start")} </p> <div class="footer"> <ha-button @click="${this._finish}"> ${this.onboardingLocalize("ui.panel.page-onboarding.integration.finish")} </ha-button> </div> `:(t.length>12&&(t=t.slice(0,11)),o.qy` <h1> ${this.onboardingLocalize("ui.panel.page-onboarding.integration.header")} </h1> <p> ${this.onboardingLocalize("ui.panel.page-onboarding.integration.intro")} </p> <div class="badges"> ${t.map(([e,t])=>o.qy`<integration-badge .domain="${e}" .title="${t}" .darkOptimizedIcon="${this.hass.themes?.darkMode}"></integration-badge>`)} ${i>t.length?o.qy`<div class="more"> ${this.onboardingLocalize("ui.panel.page-onboarding.integration.more_integrations",{count:i-t.length})} </div>`:o.s6} </div> <div class="footer"> <ha-button @click="${this._finish}"> ${this.onboardingLocalize("ui.panel.page-onboarding.integration.finish")} </ha-button> </div> `)}firstUpdated(e){super.firstUpdated(e),this.hass.loadBackendTranslation("title"),this._scanUSBDevices()}async _scanUSBDevices(){(0,a.x)(this.hass,"usb")&&await(0,g.$)(this.hass)}async _finish(){(0,d.r)(this,"onboarding-step",{type:"integration"})}static get styles(){return[y.o,o.AH`.badges{margin-top:24px;display:grid;grid-template-columns:repeat(auto-fill,minmax(106px,1fr));row-gap:var(--ha-space-6)}.more{display:flex;justify-content:center;align-items:center;height:100%}.all-set-icon{font-size:64px;text-align:center}`]}constructor(...e){super(...e),this._entries=[],this._discoveredDomains=new Set,this._discoveredDomainsReceived=!1}}(0,n.Cg)([(0,r.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,n.Cg)([(0,r.MZ)({attribute:!1})],m.prototype,"onboardingLocalize",void 0),(0,n.Cg)([(0,r.wk)()],m.prototype,"_entries",void 0),(0,n.Cg)([(0,r.wk)()],m.prototype,"_discoveredDomains",void 0),(0,n.Cg)([(0,r.wk)()],m.prototype,"_discoveredDomainsReceived",void 0),m=(0,n.Cg)([(0,r.EM)("onboarding-integrations")],m),s()}catch(e){s(e)}})},44144(e,t,i){i.d(t,{MR:()=>s,QR:()=>n,a_:()=>o,bg:()=>r});const s=e=>`https://brands.home-assistant.io/${e.brand?"brands/":""}${e.useFallback?"_/":""}${e.domain}/${e.darkOptimized?"dark_":""}${e.type}.png`,n=e=>`https://brands.home-assistant.io/hardware/${e.category}/${e.darkOptimized?"dark_":""}${e.manufacturer}${e.model?`_${e.model}`:""}.png`,o=e=>e.split("/")[4],r=e=>e.startsWith("https://brands.home-assistant.io/")}};
//# sourceMappingURL=74723.8300485c98a465e5.js.map