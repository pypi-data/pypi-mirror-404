export const __rspack_esm_id="50235";export const __rspack_esm_ids=["50235"];export const __webpack_modules__={58548(t,e,i){i.d(e,{A:()=>r});const a=t=>{const e=parseFloat(t);if(isNaN(e))throw new Error(`${t} is not a number`);return e};function r(t){if(!t)return null;try{if(t.endsWith("%"))return{w:100,h:a(t.slice(0,-1))};const e=t.replace(":","x").split("x");return 0===e.length?null:1===e.length?{w:a(e[0]),h:1}:{w:a(e[0]),h:a(e[1])}}catch(t){}return null}},39168(t,e,i){var a=i(62826),r=i(96196),s=i(44457),o=i(6415),n=i(58548);class c extends r.WF{willUpdate(t){(t.has("aspect_ratio")||null===this._ratio)&&(this._ratio=this.aspectRatio?(0,n.A)(this.aspectRatio):null,(null===this._ratio||this._ratio.w<=0||this._ratio.h<=0)&&(this._ratio=(0,n.A)("16:9")))}render(){return this.aspectRatio?r.qy` <div class="ratio" style="${(0,o.W)({paddingBottom:`${(100*this._ratio.h/this._ratio.w).toFixed(2)}%`})}"> <slot></slot> </div> `:r.qy`<slot></slot>`}constructor(...t){super(...t),this._ratio=null}}c.styles=r.AH`.ratio ::slotted(*){position:absolute;top:0;left:0;width:100%;height:100%}`,(0,a.Cg)([(0,s.MZ)({type:String,attribute:"aspect-ratio"})],c.prototype,"aspectRatio",void 0),c=(0,a.Cg)([(0,s.EM)("ha-aspect-ratio")],c)},17366(t,e,i){i.a(t,async function(t,a){try{i.r(e),i.d(e,{DEFAULT_ASPECT_RATIO:()=>C,DEVICE_CLASSES:()=>S,HuiAreaCard:()=>k,SUM_DEVICE_CLASSES:()=>E});i(44114),i(18111),i(22489),i(20116),i(61701),i(18237);var r=i(62826),s=i(96196),o=i(44457),n=i(94333),c=i(32288),h=i(6415),l=i(22786),d=i(78870),u=i(46190),p=i(65522),_=i(4423),g=i(91926),f=i(20058),v=i(8549),m=i(58548),y=(i(39168),i(76776),i(48374),i(28624),i(59174)),b=(i(88945),i(54276),i(67094),i(22109),i(80933),i(32248),i(22675)),x=i(32359),w=i(19037),$=t([y,x,f]);[y,x,f]=$.then?(await $)():$;const A="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z",C="16:9",S={sensor:["temperature","humidity"],binary_sensor:["motion","moisture"]},E=["power","apparent_power","reactive_power","energy","reactive_energy","current","gas","monetary","volume","water"];class k extends s.WF{static async getConfigElement(){return await Promise.all([i.e("64442"),i.e("88862")]).then(i.bind(i,25453)),document.createElement("hui-area-card-editor")}setConfig(t){if(!t.area)throw new Error("Specify an area");const e=t.display_type||(t.show_camera?"camera":"picture"),i="compact"===e&&t.vertical;this._config={...t,vertical:i,display_type:e},this._featureContext={area_id:t.area,exclude_entities:t.exclude_entities}}static async getStubConfig(t){const e=Object.values(t.areas);return{type:"area",area:e[0]?.area_id||""}}getCardSize(){const t=this._config&&this._featurePosition(this._config),e=this._config?.display_type||"picture",i=this._config?.features?.length||0;return 1+("compact"===e?this._config?.vertical?1:0:2)+("inline"===t?0:i)}getGridOptions(){let t=6,e=6,i=1;const a=this._config?this._featurePosition(this._config):"bottom",r=this._config?.features?.length||0;r&&("inline"===a?(e=12,t=12):i+=r);const s=this._config?.display_type||"picture";return this._config?.vertical&&(i++,e=3),"compact"!==s&&(i+="inline"===a&&r>0?3:2),{columns:t,rows:i,min_columns:e,min_rows:i}}get _hasCardAction(){return this._config?.navigation_path}_handleAction(){this._config?.navigation_path&&(0,g.o)(this._config.navigation_path)}_computeActiveAlertStates(){const t=this._config?.area,e=t?this.hass.areas[t]:void 0,i=this._config?.alert_classes,a=this._config?.exclude_entities;if(!e||!i)return[];const r=this._groupedBinarySensorEntityIds(this.hass.entities,e.area_id,i,a);return i.map(t=>{const e=r.get(t)||[];return e?e.map(t=>this.hass.states[t]).filter(t=>t?.state===u.Or):[]}).filter(t=>t.length>0).map(t=>t[0])}_renderAlertSensorBadge(){const t=this._computeActiveAlertStates();if(0===t.length)return s.s6;const e=t[0];return s.qy` <ha-tile-badge class="alert-badge"> <ha-state-icon .hass="${this.hass}" .stateObj="${e}"></ha-state-icon> </ha-tile-badge> `}_renderAlertSensors(){const t=this._computeActiveAlertStates();return 0===t.length?s.s6:s.qy` <div class="alerts"> ${t.map(t=>s.qy` <div class="alert"> <ha-state-icon .hass="${this.hass}" .stateObj="${t}"></ha-state-icon> </div> `)} </div> `}_computeSensorsDisplay(){const t=this._config?.area,e=t?this.hass.areas[t]:void 0,i=this._config?.sensor_classes,a=this._config?.exclude_entities;if(!e||!i)return;const r=this._groupedSensorEntityIds(this.hass.entities,e.area_id,i,a);return i.map(t=>{if("temperature"===t&&e.temperature_entity_id){const t=this.hass.states[e.temperature_entity_id];return!t||(0,b.g0)(t.state)?"":this.hass.formatEntityState(t)}if("humidity"===t&&e.humidity_entity_id){const t=this.hass.states[e.humidity_entity_id];return!t||(0,b.g0)(t.state)?"":this.hass.formatEntityState(t)}const i=r.get(t);if(!i)return;const a=i.map(t=>this.hass.states[t]).filter(Boolean);if(0===a.length)return;if(1===a.length){const t=a[0];return(0,b.g0)(t.state)?"":this.hass.formatEntityState(t)}const s=a.find(t=>t.attributes.unit_of_measurement)?.attributes.unit_of_measurement,o=a.filter(t=>t.attributes.unit_of_measurement===s&&(0,f.x)(t)&&!isNaN(Number(t.state)));if(0===o.length)return;const n=E.includes(t)?this._computeSumState(o):this._computeMedianState(o);return`${(0,f.ZV)(n,this.hass.locale,{maximumFractionDigits:1})}${s?`${(0,v.A)(s,this.hass.locale)}${s}`:""}`}).filter(Boolean).join(" Â· ")}_computeSumState(t){return t.reduce((t,e)=>t+Number(e.state),0)}_computeMedianState(t){const e=t.map(t=>Number(t.state)).sort((t,e)=>t-e);if(e.length%2==0){const t=e.length/2;return(e[t]+e[t-1])/2}return e[Math.floor(e.length/2)]}willUpdate(t){(t.has("_config")||null===this._ratio)&&(this._ratio=this._config?.aspect_ratio?(0,m.A)(this._config?.aspect_ratio):null,(null===this._ratio||this._ratio.w<=0||this._ratio.h<=0)&&(this._ratio=(0,m.A)(C)))}render(){if(!this._config||!this.hass)return s.s6;const t=this._config?.area,e=t?this.hass.areas[t]:void 0;if(!e)return s.qy` <hui-warning .hass="${this.hass}"> ${this.hass.localize("ui.card.area.area_not_found")} </hui-warning> `;const i={vertical:Boolean(this._config.vertical)},a=e.icon,r=this._config.name||(0,p.A)(e),o=this._computeSensorsDisplay(),l=this._featurePosition(this._config),u=this._displayedFeatures(this._config),_="inline"===l?"horizontal":"",g=this._config.display_type||"picture",f="camera"===g?this._getCameraEntity(this.hass.entities,e.area_id):void 0,v="grid"===this.layout||"panel"===this.layout,m={"--tile-color":this._config.color?(0,d.M)(this._config.color):void 0};return s.qy` <ha-card style="${(0,h.W)(m)}"> <div class="background" @action="${this._handleAction}" .actionHandler="${(0,w.T)()}" role="${(0,c.J)(this._hasCardAction?"button":void 0)}" tabindex="${(0,c.J)(this._hasCardAction?"0":void 0)}" aria-labelledby="info"> <ha-ripple .disabled="${!this._hasCardAction}"></ha-ripple> </div> ${"compact"===g?s.s6:s.qy` <div class="header"> <div class="picture"> ${"picture"!==g&&"camera"!==g||!f&&!e.picture?s.qy` <ha-aspect-ratio .aspectRatio="${v?void 0:this._config.aspect_ratio||C}"> <div class="icon-container"> ${e.icon?s.qy`<ha-icon .icon="${e.icon}"></ha-icon>`:s.s6} </div> </ha-aspect-ratio> `:s.qy` <hui-image .cameraImage="${f}" .cameraView="${this._config.camera_view}" .image="${e.picture?e.picture:void 0}" .hass="${this.hass}" fit-mode="cover" .aspectRatio="${v?void 0:this._config.aspect_ratio||C}"></hui-image> `} </div> ${this._renderAlertSensors()} </div> `} <div class="container ${_}"> <div class="content ${(0,n.H)(i)}"> <ha-tile-icon> ${"compact"===g?this._renderAlertSensorBadge():s.s6} ${a?s.qy`<ha-icon slot="icon" .icon="${a}"></ha-icon>`:s.qy` <ha-svg-icon slot="icon" .path="${A}"></ha-svg-icon> `} </ha-tile-icon> <ha-tile-info id="info" .primary="${r}" .secondary="${o}"></ha-tile-info> </div> ${u.length>0?s.qy` <hui-card-features .hass="${this.hass}" .context="${this._featureContext}" .color="${this._config.color}" .features="${u}" .position="${l}"></hui-card-features> `:s.s6} </div> </ha-card> `}constructor(...t){super(...t),this._featureContext={},this._ratio=null,this._groupEntitiesByDeviceClass=t=>t.reduce((t,e)=>{const i=this.hass.states[e],a=i.attributes.device_class;return t.has(a)||t.set(a,[]),t.get(a).push(i.entity_id),t},new Map),this._groupedSensorEntityIds=(0,l.A)((t,e,i,a)=>{const r=(0,_.r)(this.hass,{area:e,entity_category:"none",domain:"sensor",device_class:i}),s=Object.keys(t).filter(t=>r(t)&&!a?.includes(t));return this._groupEntitiesByDeviceClass(s)}),this._groupedBinarySensorEntityIds=(0,l.A)((t,e,i,a)=>{const r=(0,_.r)(this.hass,{area:e,entity_category:"none",domain:"binary_sensor",device_class:i}),s=Object.keys(t).filter(t=>r(t)&&!a?.includes(t));return this._groupEntitiesByDeviceClass(s)}),this._getCameraEntity=(0,l.A)((t,e)=>{const i=(0,_.r)(this.hass,{area:e,entity_category:"none",domain:"camera"}),a=Object.keys(t).filter(i);return a.length>0?a[0]:void 0}),this._featurePosition=(0,l.A)(t=>t.vertical?"bottom":t.features_position||"bottom"),this._displayedFeatures=(0,l.A)(t=>{const e=t.features||[];return"inline"===this._featurePosition(t)?e.slice(0,1):e})}}k.styles=s.AH`:host{--tile-color:var(--state-icon-color);-webkit-tap-highlight-color:transparent}ha-card:has(.background:focus-visible){--shadow-default:var(--ha-card-box-shadow, 0 0 0 0 transparent);--shadow-focus:0 0 0 1px var(--tile-color);border-color:var(--tile-color);box-shadow:var(--shadow-default),var(--shadow-focus)}ha-card{--ha-ripple-color:var(--tile-color);--ha-ripple-hover-opacity:0.04;--ha-ripple-pressed-opacity:0.12;height:100%;transition:box-shadow 180ms ease-in-out,border-color 180ms ease-in-out;display:flex;flex-direction:column;justify-content:space-between}[role=button]{cursor:pointer;pointer-events:auto}[role=button]:focus{outline:0}.background{position:absolute;top:0;left:0;bottom:0;right:0;border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));margin:calc(-1 * var(--ha-card-border-width,1px));overflow:hidden}.header{flex:1;overflow:hidden;border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));border-end-end-radius:0;border-end-start-radius:0;pointer-events:none}.picture{height:100%;width:100%;background-size:cover;background-position:center;position:relative}.picture hui-image{height:100%}.picture .icon-container{height:100%;width:100%;display:flex;align-items:center;justify-content:center;--mdc-icon-size:var(--ha-space-12);color:var(--tile-color)}.picture .icon-container::before{position:absolute;content:"";width:100%;height:100%;background-color:var(--tile-color);opacity:.12}.container{margin:calc(-1 * var(--ha-card-border-width,1px));display:flex;flex-direction:column;flex:1}.header+.container{height:auto;flex:none}.container.horizontal{flex-direction:row}.content{position:relative;display:flex;flex-direction:row;align-items:center;padding:10px;flex:1;min-width:0;box-sizing:border-box;pointer-events:none;gap:10px}.vertical{flex-direction:column;text-align:center;justify-content:center}.vertical ha-tile-info{width:100%;flex:none}ha-tile-icon{--tile-icon-color:var(--tile-color);position:relative;padding:6px;margin:-6px}ha-tile-badge{position:absolute;top:3px;right:3px;inset-inline-end:3px;inset-inline-start:initial}ha-tile-info{position:relative;min-width:0;transition:background-color 180ms ease-in-out;box-sizing:border-box}hui-card-features{--feature-color:var(--tile-color);padding:0 var(--ha-space-3) var(--ha-space-3) var(--ha-space-3)}.container.horizontal hui-card-features{width:calc(50% - var(--column-gap,0px)/ 2 - var(--ha-space-3));flex:none;--feature-height:var(--ha-space-9);padding:0 var(--ha-space-3);padding-inline-start:0}.alert-badge{--tile-badge-background-color:var(--orange-color)}.alerts{position:absolute;top:0;left:0;display:flex;flex-direction:row;gap:var(--ha-space-2);padding:var(--ha-space-2);pointer-events:none;z-index:1}.alert{background-color:var(--orange-color);border-radius:var(--ha-border-radius-lg);width:var(--ha-space-6);height:var(--ha-space-6);padding:2px;box-sizing:border-box;--mdc-icon-size:var(--ha-space-4);display:flex;align-items:center;justify-content:center;color:#fff}`,(0,r.Cg)([(0,o.MZ)({attribute:!1})],k.prototype,"hass",void 0),(0,r.Cg)([(0,o.MZ)({attribute:!1})],k.prototype,"layout",void 0),(0,r.Cg)([(0,o.wk)()],k.prototype,"_config",void 0),(0,r.Cg)([(0,o.wk)()],k.prototype,"_featureContext",void 0),k=(0,r.Cg)([(0,o.EM)("hui-area-card")],k),a()}catch(t){a(t)}})}};
//# sourceMappingURL=50235.9f740774239e5a00.js.map