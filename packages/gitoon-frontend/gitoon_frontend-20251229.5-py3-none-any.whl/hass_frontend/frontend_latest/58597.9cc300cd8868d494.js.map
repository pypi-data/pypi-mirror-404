{"version":3,"file":"58597.9cc300cd8868d494.js","sources":["https://raw.githubusercontent.com/home-assistant/frontend/20251229.5/src/panels/lovelace/cards/energy/hui-energy-sankey-card.ts"],"names":["DEFAULT_CONFIG","group_by_floor","group_by_area","HuiEnergySankeyCard","SubscribeMixin","MobileAwareMixin","LitElement","setConfig","config","this","_config","hassSubscribe","getEnergyDataCollection","hass","key","collection_key","subscribe","data","_data","getCardSize","getGridOptions","columns","min_columns","rows","min_rows","shouldUpdate","changedProps","has","render","nothing","html","localize","prefs","types","energySourcesByType","summedData","compareSummedData","_","getSummedData","consumption","compareConsumption","__","computeConsumptionData","undefined","computedStyle","getComputedStyle","nodes","links","homeNode","id","label","value","Math","max","total","used_total","color","getPropertyValue","trim","index","push","battery","totalBatteryOut","from_battery","totalBatteryIn","to_battery","source","target","used_battery","grid_to_battery","solar_to_battery","grid","totalFromGrid","from_grid","used_grid","solar","totalSolarProduction","used_solar","flow_to","totalToGrid","to_grid","battery_to_grid","solar_to_grid","untrackedConsumption","deviceNodes","parentLinks","device_consumption","forEach","device","idx","stat_consumption","stats","calculateStatisticSumGrowth","node","name","getStatisticLabel","statsMetadata","getGraphColorByIndex","parent","included_in_stat","devicesWithoutParent","filter","areas","floors","_groupByFloorAndArea","Object","keys","sort","a","b","level","Infinity","floorId","floorNodeId","areaId","targetNodeId","areaNodeId","devices","deviceNode","deviceSections","_getDeviceSections","section","length","hasData","some","vertical","layout","_isMobileSize","title","classMap","_valueFormatter","no_area","no_floor","entity","states","area","floor","getEntityContext","entities","area_id","floor_id","includes","unshift","parentSection","childSection","parentIds","values","remainingLinks","isChild","entries","child","args","hassSubscribeRequiredHostProps","formatNumber","locale","maximumFractionDigits","styles","css","attribute"],"mappings":"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"}