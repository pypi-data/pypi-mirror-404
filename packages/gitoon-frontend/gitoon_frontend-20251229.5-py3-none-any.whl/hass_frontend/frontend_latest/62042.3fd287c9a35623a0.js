export const __rspack_esm_id="62042";export const __rspack_esm_ids=["62042"];export const __webpack_modules__={67084(t,e,i){i.d(e,{A:()=>s});const a=(t,e=2)=>{let i=""+t;for(let t=1;t<e;t++)i=parseInt(i)<10**t?`0${i}`:i;return i};function s(t){const e=Math.floor(t/1e3/3600),i=Math.floor(t/1e3%3600/60),s=Math.floor(t/1e3%3600%60),o=Math.floor(t%1e3);return e>0?`${e}:${a(i)}:${a(s)}`:i>0?`${i}:${a(s)}`:s>0||o>0?`${s}${o>0?`.${a(o,3)}`:""}`:null}},26218(t,e,i){i.d(e,{a:()=>s});const a=(0,i(77796).n)(t=>{history.replaceState({scrollPosition:t},"")},300);function s(t){return(e,i)=>{if("object"==typeof i)throw new Error("This decorator does not support this compilation type.");const s=e.connectedCallback;e.connectedCallback=function(){s.call(this);const e=this[i];e&&this.updateComplete.then(()=>{const i=this.renderRoot.querySelector(t);i&&setTimeout(()=>{i.scrollTop=e},0)})};const o=Object.getOwnPropertyDescriptor(e,i);let r;if(void 0===o)r={get(){return this[`__${String(i)}`]||history.state?.scrollPosition},set(t){a(t),this[`__${String(i)}`]=t},configurable:!0,enumerable:!0};else{const t=o.set;r={...o,set(e){a(e),this[`__${String(i)}`]=e,t?.call(this,e)}}}Object.defineProperty(e,i,r)}}},75428(t,e,i){i.d(e,{D:()=>o});var a=i(75158),s=i.n(a);const o=t=>s()(t,{whiteList:{},stripIgnoreTag:!0,stripIgnoreTagBody:!0})},23577(t,e,i){i.a(t,async function(t,e){try{i(44114),i(18111),i(20116),i(7588),i(13579),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698);var a=i(62826),s=i(96196),o=i(44457),r=i(6415),n=i(90433),h=i(15638),l=i(44439),d=i(95747),c=i(20058),m=i(3461),p=i(1087),u=i(38279),y=i(8549),g=t([l,d,c]);[l,d,c]=g.then?(await g)():g;const _=t=>{const e=parseFloat(t);return isFinite(e)?e:null};class f extends s.WF{render(){return s.qy` <ha-chart-base .hass="${this.hass}" .data="${this._chartData}" .options="${this._chartOptions}" .height="${this.height}" style="${(0,r.W)({height:this.height})}" @dataset-hidden="${this._datasetHidden}" @dataset-unhidden="${this._datasetUnhidden}" @chart-zoom="${this._handleDataZoom}" .expandLegend="${this.expandLegend}" .hideResetButton="${this.hideResetButton}"></ha-chart-base> `}_datasetHidden(t){this._hiddenStats.add(t.detail.id)}_datasetUnhidden(t){this._hiddenStats.delete(t.detail.id)}zoom(t,e){this.shadowRoot.querySelector("ha-chart-base").zoom(t,e,!0)}_handleDataZoom(t){(0,p.r)(this,"chart-zoom-with-index",{start:t.detail.start??0,end:t.detail.end??100,chartIndex:this.chartIndex})}willUpdate(t){if((t.has("data")||t.has("startTime")||t.has("endTime")||this._chartTime<new Date(this.endTime.getTime()-l.p))&&this._generateData(),!this.hasUpdated||t.has("showNames")||t.has("startTime")||t.has("endTime")||t.has("unit")||t.has("logarithmicScale")||t.has("minYAxis")||t.has("maxYAxis")||t.has("fitYData")||t.has("paddingYAxis")||t.has("_visualMap")||t.has("_yWidth")){const t=(0,h.qC)(this.hass);let e=this.minYAxis,i=this.maxYAxis;"number"==typeof e?this.fitYData&&(e=({min:t})=>Math.min(this._roundYAxis(t,Math.floor),this.minYAxis)):this.logarithmicScale&&(e=({min:t})=>{const e=t>0?.95*t:1.05*t;return this._roundYAxis(e,Math.floor)}),"number"==typeof i?this.fitYData&&(i=({max:t})=>Math.max(this._roundYAxis(t,Math.ceil),this.maxYAxis)):this.logarithmicScale&&(i=({max:t})=>{const e=t>0?1.05*t:.95*t;return this._roundYAxis(e,Math.ceil)}),this._chartOptions={xAxis:{type:"time",min:this.startTime,max:this.endTime},yAxis:{type:this.logarithmicScale?"log":"value",name:this.unit,min:this._clampYAxis(e),max:this._clampYAxis(i),position:t?"right":"left",scale:!0,nameGap:2,nameTextStyle:{align:"left"},axisLine:{show:!1},axisLabel:{margin:5,formatter:this._formatYAxisLabel}},legend:{type:"custom",show:this.showNames},grid:{top:15,left:t?1:Math.max(this.paddingYAxis,this._yWidth),right:t?Math.max(this.paddingYAxis,this._yWidth):1,bottom:20},visualMap:this._visualMap,tooltip:{trigger:"axis",appendTo:document.body,formatter:this._renderTooltip}}}}_generateData(){let t=0;const e=getComputedStyle(this),i=this.data,a=[],s=[],o=[];if(0===i.length)return;this._chartTime=new Date;const r=this.endTime,h=this.names||{};i.forEach((i,l)=>{const d=i.domain,c=h[i.entity_id]||i.name;let m=null;const p=[],y=(t,e)=>{e&&(t>r||(p.forEach((i,a)=>{null===e[a]&&m&&null!==m[a]&&i.data.push([t,m[a]]),i.data.push([t,e[a]])}),m=e))},g=(a,r,h,d=!1)=>{h||(h=(0,n.fI)(t,e),t++),p.push({id:a,data:[],type:"line",cursor:"default",name:r,color:h,symbol:"circle",symbolSize:1,step:"end",sampling:"minmax",animationDurationUpdate:0,lineStyle:{width:d?0:1.5},areaStyle:d?{color:h+"7F"}:void 0,tooltip:{show:!d}}),s.push(i.entity_id),o.push(l)};if("thermostat"===d||"climate"===d||"water_heater"===d){const t=i.states.some(t=>t.attributes?.hvac_action),a="climate"===d&&t?t=>"heat"===u.sx[t.attributes?.hvac_action]:t=>"heat"===t.state,s="climate"===d&&t?t=>"cool"===u.sx[t.attributes?.hvac_action]:t=>"cool"===t.state,o=i.states.some(a),r=i.states.some(s),n=i.states.some(t=>t.attributes&&t.attributes.target_temp_high!==t.attributes.target_temp_low);g(i.entity_id+"-current_temperature",this.showNames?this.hass.localize("ui.card.climate.current_temperature",{name:c}):this.hass.localize("component.climate.entity_component._.state_attributes.current_temperature.name")),o&&g(i.entity_id+"-heating",this.showNames?this.hass.localize("ui.card.climate.heating",{name:c}):this.hass.localize("component.climate.entity_component._.state_attributes.hvac_action.state.heating"),e.getPropertyValue("--state-climate-heat-color"),!0),r&&g(i.entity_id+"-cooling",this.showNames?this.hass.localize("ui.card.climate.cooling",{name:c}):this.hass.localize("component.climate.entity_component._.state_attributes.hvac_action.state.cooling"),e.getPropertyValue("--state-climate-cool-color"),!0),n?(g(i.entity_id+"-target_temperature_mode",this.showNames?this.hass.localize("ui.card.climate.target_temperature_mode",{name:c,mode:this.hass.localize("ui.card.climate.high")}):this.hass.localize("component.climate.entity_component._.state_attributes.target_temp_high.name")),g(i.entity_id+"-target_temperature_mode_low",this.showNames?this.hass.localize("ui.card.climate.target_temperature_mode",{name:c,mode:this.hass.localize("ui.card.climate.low")}):this.hass.localize("component.climate.entity_component._.state_attributes.target_temp_low.name"))):g(i.entity_id+"-target_temperature",this.showNames?this.hass.localize("ui.card.climate.target_temperature_entity",{name:c}):this.hass.localize("component.climate.entity_component._.state_attributes.temperature.name")),i.states.forEach(t=>{if(!t.attributes)return;const e=_(t.attributes.current_temperature),i=[e];if(o&&i.push(a(t)?e:null),r&&i.push(s(t)?e:null),n){const e=_(t.attributes.target_temp_high),a=_(t.attributes.target_temp_low);i.push(e,a),y(new Date(t.last_changed),i)}else{const e=_(t.attributes.temperature);i.push(e),y(new Date(t.last_changed),i)}})}else if("humidifier"===d){const t=i.states.some(t=>t.attributes?.action),a=i.states.some(t=>t.attributes?.current_humidity),s=t&&i.states.some(t=>"humidifying"===t.attributes?.action),o=t&&i.states.some(t=>"drying"===t.attributes?.action);g(i.entity_id+"-target_humidity",this.showNames?this.hass.localize("ui.card.humidifier.target_humidity_entity",{name:c}):this.hass.localize("component.humidifier.entity_component._.state_attributes.humidity.name")),a&&g(i.entity_id+"-current_humidity",this.showNames?this.hass.localize("ui.card.humidifier.current_humidity_entity",{name:c}):this.hass.localize("component.humidifier.entity_component._.state_attributes.current_humidity.name")),s?g(i.entity_id+"-humidifying",this.showNames?this.hass.localize("ui.card.humidifier.humidifying",{name:c}):this.hass.localize("component.humidifier.entity_component._.state_attributes.action.state.humidifying"),e.getPropertyValue("--state-humidifier-on-color"),!0):o?g(i.entity_id+"-drying",this.showNames?this.hass.localize("ui.card.humidifier.drying",{name:c}):this.hass.localize("component.humidifier.entity_component._.state_attributes.action.state.drying"),e.getPropertyValue("--state-humidifier-on-color"),!0):g(i.entity_id+"-on",this.showNames?this.hass.localize("ui.card.humidifier.on_entity",{name:c}):this.hass.localize("component.humidifier.entity_component._.state.on"),void 0,!0),i.states.forEach(t=>{if(!t.attributes)return;const e=_(t.attributes.humidity),i=a?_(t.attributes?.current_humidity):e,r=[e];a&&r.push(i),s?r.push("humidifying"===t.attributes?.action?i:null):o?r.push("drying"===t.attributes?.action?i:null):r.push("on"===t.state?i:null),y(new Date(t.last_changed),r)})}else{let t,e;g(i.entity_id,c);let a=null;const s=i=>{const s=_(i.state),o=new Date(i.last_changed);if(null!==s&&a){const i=o.getTime(),r=a.getTime(),n=e?.getTime();y(a,[(r-n)/(i-n)*(s-t)+t]),y(new Date(r+1),[null]),y(o,[s]),e=o,t=s,a=null}else null!==s&&null===a?(y(o,[s]),e=o,t=s):null===s&&null===a&&void 0!==t&&(a=o)};if(i.statistics){const t=i.states&&0!==i.states.length?i.states[0].last_changed:0;for(const e of i.statistics){if(t&&e.last_changed>=t)break;s(e)}}i.states.forEach(t=>{s(t)}),null!==a&&y(a,[null])}y(r,m),Array.prototype.push.apply(a,p)}),this._chartData=a,this._entityIds=s,this._datasetToDataIndex=o;const l=[];this._chartData.forEach((t,e)=>{const i=this._datasetToDataIndex[e],a=this.data[i];if(!a.statistics||0===a.statistics.length)return;const s=a.states[0]?.last_changed??this.endTime.getTime();l.push({show:!1,seriesIndex:e,dimension:0,pieces:[{max:s-.01,colorAlpha:.5},{min:s,colorAlpha:1}]})}),this._visualMap=l.length>0?l:void 0}_clampYAxis(t){if(this.logarithmicScale){if("number"==typeof t)return Math.max(t,Number.EPSILON);if("function"==typeof t)return e=>Math.max(t(e),Number.EPSILON)}return t}_roundYAxis(t,e){return Math.abs(t)<1?t:e(t)}constructor(...t){super(...t),this.data=[],this.showNames=!0,this.clickForMoreInfo=!0,this.paddingYAxis=0,this.logarithmicScale=!1,this.fitYData=!1,this._chartData=[],this._entityIds=[],this._datasetToDataIndex=[],this._hiddenStats=new Set,this._yWidth=25,this._chartTime=new Date,this._previousYAxisLabelValue=0,this._yAxisMaximumFractionDigits=0,this._renderTooltip=t=>{const e=t[0].axisValue,i=(0,d.yg)(new Date(e),this.hass.locale,this.hass.config)+"<br>",a=[];this._chartData.forEach((i,s)=>{if(!1===i.tooltip?.show||this._hiddenStats.has(i.id))return;const o=t.find(t=>t.seriesIndex===s);if(o)return void a.push(o);let r;const n=i.data||[];for(let t=n.length-1;t>=0;t--){const i=n[t];if(i&&i[0]<=e&&"number"==typeof i[1]){r=i;break}}r&&a.push({seriesName:i.name,seriesIndex:s,value:r,marker:`<span style="display:inline-block;margin-right:4px;margin-inline-end:4px;margin-inline-start:initial;border-radius:10px;width:10px;height:10px;background-color:${i.color};"></span>`})});const s=this.unit?`${(0,y.A)(this.unit,this.hass.locale)}${this.unit}`:"";return i+a.map(t=>{const e=this._entityIds[t.seriesIndex],i=this.hass.states[e],a=this.hass.entities[e],o=String(t.value[1]);let r=i?this.hass.formatEntityState(i,o):`${(0,c.ZV)(o,this.hass.locale,(0,c.ZQ)(void 0,a))}${s}`;const n=this._datasetToDataIndex[t.seriesIndex],h=this.data[n];if(h.statistics&&h.statistics.length>0){r+="<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";r+=0===h.states.length||t.value[0]<h.states[0].last_changed?`${this.hass.localize("ui.components.history_charts.source_stats")}`:`${this.hass.localize("ui.components.history_charts.source_history")}`}return t.seriesName?`${t.marker} ${t.seriesName}: ${r}`:`${t.marker} ${r}`}).join("<br>")},this._formatYAxisLabel=t=>{const e=Math.max(1,-Math.floor(Math.log10(Math.abs(t-this._previousYAxisLabelValue||1))));this._yAxisMaximumFractionDigits=Math.max(this._yAxisMaximumFractionDigits,e);const i=(0,c.ZV)(t,this.hass.locale,{maximumFractionDigits:this._yAxisMaximumFractionDigits}),a=(0,m.W)(i,12)+5;return a>this._yWidth&&(this._yWidth=a,(0,p.r)(this,"y-width-changed",{value:this._yWidth,chartIndex:this.chartIndex})),this._previousYAxisLabelValue=t,i}}}(0,a.Cg)([(0,o.MZ)({attribute:!1})],f.prototype,"hass",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],f.prototype,"data",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],f.prototype,"names",void 0),(0,a.Cg)([(0,o.MZ)()],f.prototype,"unit",void 0),(0,a.Cg)([(0,o.MZ)()],f.prototype,"identifier",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"show-names",type:Boolean})],f.prototype,"showNames",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"click-for-more-info",type:Boolean})],f.prototype,"clickForMoreInfo",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],f.prototype,"startTime",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],f.prototype,"endTime",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1,type:Number})],f.prototype,"paddingYAxis",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1,type:Number})],f.prototype,"chartIndex",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"logarithmic-scale",type:Boolean})],f.prototype,"logarithmicScale",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1,type:Number})],f.prototype,"minYAxis",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1,type:Number})],f.prototype,"maxYAxis",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"fit-y-data",type:Boolean})],f.prototype,"fitYData",void 0),(0,a.Cg)([(0,o.MZ)({type:String})],f.prototype,"height",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"expand-legend",type:Boolean})],f.prototype,"expandLegend",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"hide-reset-button",type:Boolean})],f.prototype,"hideResetButton",void 0),(0,a.Cg)([(0,o.wk)()],f.prototype,"_chartData",void 0),(0,a.Cg)([(0,o.wk)()],f.prototype,"_entityIds",void 0),(0,a.Cg)([(0,o.wk)()],f.prototype,"_chartOptions",void 0),(0,a.Cg)([(0,o.wk)()],f.prototype,"_yWidth",void 0),(0,a.Cg)([(0,o.wk)()],f.prototype,"_visualMap",void 0),f=(0,a.Cg)([(0,o.EM)("state-history-chart-line")],f),e()}catch(t){e(t)}})},13672(t,e,i){i.a(t,async function(t,e){try{i(44114),i(18111),i(20116),i(7588);var a=i(62826),s=i(96196),o=i(44457),r=i(95747),n=i(67084),h=i(15638),l=i(44439),d=i(72190),c=i(71578),m=i(79622),p=i(79468),u=i(3461),y=i(1087),g=t([l,r]);[l,r]=g.then?(await g)():g;class _ extends s.WF{render(){return s.qy` <ha-chart-base .hass="${this.hass}" .options="${this._chartOptions}" .height="${30*this.data.length+30+"px"}" .data="${this._chartData}" small-controls @chart-click="${this._handleChartClick}" @chart-zoom="${this._handleDataZoom}" .hideResetButton="${this.hideResetButton}"></ha-chart-base> `}willUpdate(t){(t.has("startTime")||t.has("endTime")||t.has("data")||this._chartTime<new Date(this.endTime.getTime()-l.p))&&this._generateData(),(!this.hasUpdated||t.has("startTime")||t.has("endTime")||t.has("showNames")||t.has("paddingYAxis")||t.has("_yWidth"))&&this._createOptions()}_createOptions(){const t=this.narrow,e=this.chunked||this.showNames,i=t?105:185,a=e?Math.max(this.paddingYAxis,this._yWidth):0,s=(0,h.qC)(this.hass);this._chartOptions={xAxis:{type:"time",min:this.startTime,max:this.endTime,axisTick:{show:!0},splitLine:{show:!1}},yAxis:{type:"category",inverse:!0,position:s?"right":"left",triggerEvent:!0,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:e,width:a,overflow:"truncate",margin:5,formatter:t=>{const e=this._chartData.find(e=>e.id===t)?.name,a=e?Math.min((0,u.W)(e,12)+5,i):0;return a>this._yWidth&&(this._yWidth=a,(0,y.r)(this,"y-width-changed",{value:this._yWidth,chartIndex:this.chartIndex})),e},hideOverlap:!0}},grid:{top:10,bottom:30,left:s?1:a,right:s?a:1},tooltip:{appendTo:document.body,formatter:this._renderTooltip}}}zoom(t,e){this.shadowRoot.querySelector("ha-chart-base").zoom(t,e,!0)}_handleDataZoom(t){(0,y.r)(this,"chart-zoom-with-index",{start:t.detail.start??0,end:t.detail.end??100,chartIndex:this.chartIndex})}_generateData(){const t=getComputedStyle(this);let e=this.data;e||(e=[]),this._chartTime=new Date;const i=this.startTime,a=this.endTime,s=[],o=this.names||{};e.forEach(e=>{let r,n=null,h=null,l=i;const c=this.showNames?o[e.entity_id]||e.name||e.entity_id:"",u=[];if(e.data.forEach(i=>{let s=i.state;if(s||(s=null),!(new Date(i.last_changed)>a))if(null===n)n=s,h=i.state_localize,l=new Date(i.last_changed);else if(s!==n){r=new Date(i.last_changed);const a=(0,d.c)(n,t,this.hass.states[e.entity_id]);u.push({value:[e.entity_id,l,r,h,a,(0,m.EP)((0,p.xp)(a))>.5?"#000":"#fff"],itemStyle:{color:a}}),n=s,h=i.state_localize,l=r}}),null!==n){const i=(0,d.c)(n,t,this.hass.states[e.entity_id]);u.push({value:[e.entity_id,l,a,h,i,(0,m.EP)((0,p.xp)(i))>.5?"#000":"#fff"],itemStyle:{color:i}})}s.push({id:e.entity_id,data:u,name:c,dimensions:["id","start","end","name","color","textColor"],type:"custom",encode:{x:[1,2],y:0,itemName:3},renderItem:this._renderItem,progressive:0})}),this._chartData=s}_handleChartClick(t){if("axisLabel"===t.detail.targetType){const e=this._chartData[t.detail.dataIndex];e&&(0,y.r)(this,"hass-more-info",{entityId:e.id})}}constructor(...t){super(...t),this.data=[],this.narrow=!1,this.showNames=!0,this.clickForMoreInfo=!0,this.chunked=!1,this.paddingYAxis=0,this._chartData=[],this._yWidth=0,this._chartTime=new Date,this._renderItem=(t,e)=>{const i=e.value(0),a=e.coord([e.value(1),i]),s=e.coord([e.value(2),i]),o=t.coordSys,r=c.default.graphic.clipRectByRect({x:a[0],y:a[1]-10,width:s[0]-a[0],height:20},{x:o.x,y:o.y,width:o.width,height:o.height});if(!r)return null;const n={type:"rect",transition:"shape",shape:r,style:{fill:e.value(4)}},h=e.value(3).replaceAll("\n"," ");return(0,u.W)(h,12)<r.width-8?{type:"group",children:[n,{type:"text",style:{...r,x:r.x+4,text:h,fill:e.value(5),fontSize:12,lineHeight:r.height}}]}:n},this._renderTooltip=t=>{const{value:e,name:i,marker:a,seriesName:s,color:o}=Array.isArray(t)?t[0]:t,l=s?`<h4 style="text-align: center; margin: 0;">${s}</h4>`:"",d=e[2]-e[1],c=`${this.hass.localize("ui.components.history_charts.duration")}: ${(0,n.A)(d)}`;return[l,[((0,h.qC)(this.hass)?`<span style="direction: rtl;display:inline-block;margin-right:4px;margin-inline-end:4px;border-radius:10px;width:10px;height:10px;background-color:${o};"></span>`:a)+i,(0,r.yg)(new Date(e[1]),this.hass.locale,this.hass.config),(0,r.yg)(new Date(e[2]),this.hass.locale,this.hass.config),c].join("<br>")].join("")}}}_.styles=s.AH`ha-chart-base{--chart-max-height:none}`,(0,a.Cg)([(0,o.MZ)({attribute:!1})],_.prototype,"hass",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],_.prototype,"data",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean})],_.prototype,"narrow",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],_.prototype,"names",void 0),(0,a.Cg)([(0,o.MZ)()],_.prototype,"unit",void 0),(0,a.Cg)([(0,o.MZ)()],_.prototype,"identifier",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"show-names",type:Boolean})],_.prototype,"showNames",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"click-for-more-info",type:Boolean})],_.prototype,"clickForMoreInfo",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean})],_.prototype,"chunked",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],_.prototype,"startTime",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],_.prototype,"endTime",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1,type:Number})],_.prototype,"paddingYAxis",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1,type:Number})],_.prototype,"chartIndex",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"hide-reset-button",type:Boolean})],_.prototype,"hideResetButton",void 0),(0,a.Cg)([(0,o.wk)()],_.prototype,"_chartData",void 0),(0,a.Cg)([(0,o.wk)()],_.prototype,"_chartOptions",void 0),(0,a.Cg)([(0,o.wk)()],_.prototype,"_yWidth",void 0),_=(0,a.Cg)([(0,o.EM)("state-history-chart-timeline")],_),e()}catch(t){e(t)}})},66737(t,e,i){i.a(t,async function(t,e){try{i(44114),i(18111),i(7588),i(61701),i(18237);var a=i(62826),s=i(96196),o=i(44457),r=i(36312),n=i(26218),h=i(85614),l=(i(27661),i(67094),i(23577)),d=i(13672),c=t([l,d]);[l,d]=c.then?(await c)():c;const m="M12,4C14.1,4 16.1,4.8 17.6,6.3C20.7,9.4 20.7,14.5 17.6,17.6C15.8,19.5 13.3,20.2 10.9,19.9L11.4,17.9C13.1,18.1 14.9,17.5 16.2,16.2C18.5,13.9 18.5,10.1 16.2,7.7C15.1,6.6 13.5,6 12,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15 3.3,11 5.1,7.9L6.6,9.4C5.5,11.6 5.9,14.4 7.8,16.2C8.3,16.7 8.9,17.1 9.6,17.4L9,19.4C8,19 7.1,18.4 6.3,17.6Z",p=10,u=(t,e)=>t.reduce((t,i,a)=>{const s=Math.floor(a/e);return t[s]||(t[s]=[]),t[s].push(i),t},[]);class y extends s.WF{render(){if(!(0,r.x)(this.hass,"history"))return s.qy`<div class="info"> ${this.hass.localize("ui.components.history_charts.history_disabled")} </div>`;if(this.isLoadingData&&!this.historyData)return s.qy`<div class="info"> ${this.hass.localize("ui.components.history_charts.loading_history")} </div>`;if(this._isHistoryEmpty())return s.qy`<div class="info"> ${this.hass.localize("ui.components.history_charts.no_history_found")} </div>`;const t=this.historyData.timeline.length?(this.virtualize?u(this.historyData.timeline,p):[this.historyData.timeline]).concat(this.historyData.line):this.historyData.line;return this._chartCount=t.length,s.qy` ${this.virtualize?s.qy`<div class="container ha-scrollbar" @scroll="${this._saveScrollPos}"> <lit-virtualizer scroller class="ha-scrollbar" .items="${t}" .renderItem="${this._renderHistoryItem}"> </lit-virtualizer> </div>`:s.qy`${t.map((t,e)=>this._renderHistoryItem(t,e))}`} ${this.syncCharts&&this._hasZoomedCharts?s.qy`<ha-fab slot="fab" class="reset-button" .label="${this.hass.localize("ui.components.history_charts.zoom_reset")}" @click="${this._handleGlobalZoomReset}"> <ha-svg-icon slot="icon" .path="${m}"></ha-svg-icon> </ha-fab>`:s.s6} `}shouldUpdate(t){return(1!==t.size||!t.has("hass"))&&(1!==t.size||!t.has("_maxYWidth")||t.get("_maxYWidth")!==this._maxYWidth)}willUpdate(t){if(this.hasUpdated||(0,h.i)(),[...t.keys()].some(t=>!["_maxYWidth","_childYWidths","_chartCount"].includes(t))){const t=new Date;if(this._computedEndTime=this.upToNow||!this.endTime||this.endTime>t?t:this.endTime,this.startTime)this._computedStartTime=this.startTime;else if(this.hoursToShow)this._computedStartTime=new Date((new Date).getTime()-3600*this.hoursToShow*1e3);else{let t=(this.historyData?.timeline??[]).reduce((t,e)=>Math.min(t,new Date(e.data[0].last_changed).getTime()),(new Date).getTime());t=(this.historyData?.line??[]).reduce((t,e)=>Math.min(t,e.data.reduce((t,e)=>Math.min(t,new Date(e.states[0].last_changed).getTime()),t)),t),this._computedStartTime=new Date(t)}}}updated(t){t.has("_chartCount")&&this._chartCount<this._childYWidths.length&&(this._childYWidths.length=this._chartCount,this._maxYWidth=Math.max(...Object.values(this._childYWidths),0))}_yWidthChanged(t){this._childYWidths[t.detail.chartIndex]=t.detail.value,this._maxYWidth=Math.max(...Object.values(this._childYWidths),0)}_handleTimelineSync(t){if(!this.syncCharts||this._isSyncing)return;const{start:e,end:i,chartIndex:a}=t.detail;this._hasZoomedCharts=0!==e||100!==i,this._syncZoomToAllCharts(e,i,a)}_syncZoomToAllCharts(t,e,i){this._isSyncing=!0,requestAnimationFrame(()=>{this.renderRoot.querySelectorAll("state-history-chart-line, state-history-chart-timeline").forEach((a,s)=>{s!==i&&"zoom"in a&&a.zoom(t,e)}),this._isSyncing=!1})}_handleGlobalZoomReset(){this._hasZoomedCharts=!1,this._isSyncing=!0,requestAnimationFrame(()=>{this.renderRoot.querySelectorAll("state-history-chart-line, state-history-chart-timeline").forEach(t=>{const e=t.renderRoot?.querySelector("ha-chart-base");e&&e.chart&&e.zoom(0,100)}),this._isSyncing=!1})}_isHistoryEmpty(){const t=!this.historyData||!this.historyData.timeline||!this.historyData.line||0===this.historyData.timeline.length&&0===this.historyData.line.length;return!this.isLoadingData&&t}_saveScrollPos(t){this._savedScrollPos=t.target.scrollTop}constructor(...t){super(...t),this.narrow=!1,this.virtualize=!1,this.upToNow=!1,this.showNames=!0,this.clickForMoreInfo=!0,this.isLoadingData=!1,this.logarithmicScale=!1,this.fitYData=!1,this.syncCharts=!1,this._maxYWidth=0,this._childYWidths=[],this._chartCount=0,this._hasZoomedCharts=!1,this._isSyncing=!1,this._renderHistoryItem=(t,e)=>t&&void 0!==e?Array.isArray(t)?s.qy`<div class="entry-container timeline"> <state-history-chart-timeline .hass="${this.hass}" .data="${t}" .startTime="${this._computedStartTime}" .endTime="${this._computedEndTime}" .showNames="${this.showNames}" .names="${this.names}" .narrow="${this.narrow}" .chunked="${this.virtualize}" .paddingYAxis="${this._maxYWidth}" .chartIndex="${e}" .clickForMoreInfo="${this.clickForMoreInfo}" @y-width-changed="${this._yWidthChanged}" @chart-zoom-with-index="${this._handleTimelineSync}" ?hide-reset-button="${this.syncCharts}"></state-history-chart-timeline> </div> `:s.qy`<div class="entry-container line"> <state-history-chart-line .hass="${this.hass}" .unit="${t.unit}" .data="${t.data}" .identifier="${t.identifier}" .showNames="${this.showNames}" .startTime="${this._computedStartTime}" .endTime="${this._computedEndTime}" .paddingYAxis="${this._maxYWidth}" .names="${this.names}" .chartIndex="${e}" .clickForMoreInfo="${this.clickForMoreInfo}" .logarithmicScale="${this.logarithmicScale}" .minYAxis="${this.minYAxis}" .maxYAxis="${this.maxYAxis}" .fitYData="${this.fitYData}" @y-width-changed="${this._yWidthChanged}" @chart-zoom-with-index="${this._handleTimelineSync}" .height="${this.virtualize?void 0:this.height}" .expandLegend="${this.expandLegend}" ?hide-reset-button="${this.syncCharts}"></state-history-chart-line> </div> `:s.qy``}}y.styles=s.AH`:host{display:flex;flex-direction:column;min-height:60px}:host([virtualize]){height:100%}.info{text-align:center;line-height:60px;color:var(--secondary-text-color)}.container{max-height:var(--history-max-height)}.entry-container{width:100%}.entry-container.line{flex:1;padding-top:8px;overflow:hidden}.entry-container:hover{z-index:1}:host([virtualize]) .entry-container{padding-left:1px;padding-right:1px;padding-inline-start:1px;padding-inline-end:1px}.entry-container.timeline:first-child{margin-top:var(--timeline-top-margin)}.entry-container:not(:first-child){border-top:2px solid var(--divider-color);margin-top:16px}.container,lit-virtualizer{height:100%;width:100%}lit-virtualizer{contain:size layout!important}state-history-chart-line,state-history-chart-timeline{width:100%}.reset-button{position:fixed;bottom:calc(24px + var(--safe-area-inset-bottom));right:calc(24px + var(--safe-area-inset-bottom));z-index:1}`,(0,a.Cg)([(0,o.MZ)({attribute:!1})],y.prototype,"hass",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],y.prototype,"historyData",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean})],y.prototype,"narrow",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],y.prototype,"names",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean,reflect:!0})],y.prototype,"virtualize",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],y.prototype,"endTime",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],y.prototype,"startTime",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean,attribute:"up-to-now"})],y.prototype,"upToNow",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1,type:Number})],y.prototype,"hoursToShow",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"show-names",type:Boolean})],y.prototype,"showNames",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"click-for-more-info",type:Boolean})],y.prototype,"clickForMoreInfo",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"is-loading-data",type:Boolean})],y.prototype,"isLoadingData",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"logarithmic-scale",type:Boolean})],y.prototype,"logarithmicScale",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1,type:Number})],y.prototype,"minYAxis",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1,type:Number})],y.prototype,"maxYAxis",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"fit-y-data",type:Boolean})],y.prototype,"fitYData",void 0),(0,a.Cg)([(0,o.MZ)({type:String})],y.prototype,"height",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"expand-legend",type:Boolean})],y.prototype,"expandLegend",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"sync-charts",type:Boolean})],y.prototype,"syncCharts",void 0),(0,a.Cg)([(0,o.wk)()],y.prototype,"_maxYWidth",void 0),(0,a.Cg)([(0,o.wk)()],y.prototype,"_childYWidths",void 0),(0,a.Cg)([(0,o.wk)()],y.prototype,"_chartCount",void 0),(0,a.Cg)([(0,o.wk)()],y.prototype,"_hasZoomedCharts",void 0),(0,a.Cg)([(0,n.a)(".container")],y.prototype,"_savedScrollPos",void 0),(0,a.Cg)([(0,o.Ls)({passive:!0})],y.prototype,"_saveScrollPos",null),y=(0,a.Cg)([(0,o.EM)("state-history-charts")],y),e()}catch(t){e(t)}})},34296(t,e,i){var a=i(62826),s=i(96229),o=i(26069),r=i(91735),n=i(42034),h=i(96196),l=i(44457);class d extends s.k{renderOutline(){return this.filled?h.qy`<span class="filled"></span>`:super.renderOutline()}getContainerClasses(){return{...super.getContainerClasses(),active:this.active}}renderPrimaryContent(){return h.qy` <span class="leading icon" aria-hidden="true"> ${this.renderLeadingIcon()} </span> <span class="label">${this.label}</span> <span class="touch"></span> <span class="trailing leading icon" aria-hidden="true"> ${this.renderTrailingIcon()} </span> `}renderTrailingIcon(){return h.qy`<slot name="trailing-icon"></slot>`}constructor(...t){super(...t),this.filled=!1,this.active=!1}}d.styles=[r.R,n.R,o.R,h.AH`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-assist-chip-container-shape:var(
          --ha-assist-chip-container-shape,
          16px
        );--md-assist-chip-outline-color:var(--outline-color);--md-assist-chip-label-text-weight:400}.filled{display:flex;pointer-events:none;border-radius:inherit;inset:0;position:absolute;background-color:var(--ha-assist-chip-filled-container-color)}::slotted([slot=icon]),::slotted([slot=trailing-icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px);font-size:var(--_label-text-size)!important}.trailing.icon ::slotted(*),.trailing.icon svg{margin-inline-end:unset;margin-inline-start:var(--_icon-label-space)}::before{background:var(--ha-assist-chip-container-color,transparent);opacity:var(--ha-assist-chip-container-opacity, 1)}:where(.active)::before{background:var(--ha-assist-chip-active-container-color);opacity:var(--ha-assist-chip-active-container-opacity)}.label{font-family:var(--ha-font-family-body)}`],(0,a.Cg)([(0,l.MZ)({type:Boolean,reflect:!0})],d.prototype,"filled",void 0),(0,a.Cg)([(0,l.MZ)({type:Boolean})],d.prototype,"active",void 0),d=(0,a.Cg)([(0,l.EM)("ha-assist-chip")],d)},27661(t,e,i){var a=i(62826),s=i(51978),o=i(94743),r=i(44457),n=i(96196),h=i(63091);class l extends s.n{firstUpdated(t){super.firstUpdated(t),this.style.setProperty("--mdc-theme-secondary","var(--primary-color)")}}l.styles=[o.R,n.AH`:host{--mdc-typography-button-text-transform:none;--mdc-typography-button-font-size:var(--ha-font-size-l);--mdc-typography-button-font-family:var(--ha-font-family-body);--mdc-typography-button-font-weight:var(--ha-font-weight-medium)}:host .mdc-fab--extended{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab.mdc-fab--extended .ripple{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab--extended .mdc-fab__icon{margin-inline-start:-8px;margin-inline-end:12px;direction:var(--direction)}:disabled{--mdc-theme-secondary:var(--disabled-text-color);pointer-events:none}`,"rtl"===h.G.document.dir?n.AH`:host .mdc-fab--extended .mdc-fab__icon{direction:rtl}`:n.AH``],l=(0,a.Cg)([(0,r.EM)("ha-fab")],l)},71578(t,e,i){i.r(e),i.d(e,{LinearGradient:()=>x.A,default:()=>b});var a=i(88648),s=i(59126),o=i(25636),r=i(2403),n=i(3650),h=i(30137),l=i(69913),d=i(43401),c=i(87370),m=i(57610),p=i(44390),u=i(11069),y=i(88132),g=i(6036),_=i(88298),f=i(15490),x=i(67665);a.Y([o.a,r.a,n.a,h.a,l.a,d.a,c.a,m.a,p.a,u.a,g._,_.i,f.a,y.a]);const b=s},85614(t,e,i){i.d(e,{i:()=>a});const a=async()=>{await Promise.all([i.e("22564"),i.e("22309")]).then(i.bind(i,42735))}},3461(t,e,i){let a;function s(t,e,i="Roboto, Noto, sans-serif"){a||(a=document.createElement("canvas"));const s=a.getContext("2d");if(!s)return 0;s.font=`${e}px ${i}`;const o=s.measureText(t);return Math.ceil(Math.max(o.actualBoundingBoxRight+o.actualBoundingBoxLeft,o.width))}i.d(e,{W:()=>s})}};
//# sourceMappingURL=62042.3fd287c9a35623a0.js.map