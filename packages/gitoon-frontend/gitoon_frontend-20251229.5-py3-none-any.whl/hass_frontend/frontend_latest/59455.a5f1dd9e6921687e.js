export const __rspack_esm_id="59455";export const __rspack_esm_ids=["59455"];export const __webpack_modules__={90433(e,t,i){i.d(t,{Vy:()=>n,fI:()=>o,ux:()=>r});var a=i(22786),s=i(79468);function n(e,t){const i=e%54+1;return t.getPropertyValue(`--color-${i}`)}function o(e,t){const i=t.getPropertyValue(`--graph-color-${e+1}`)||n(e,t);return(0,s.RQ)(i)}const r=(0,a.A)(e=>Array.from({length:54},(t,i)=>o(i,e)),(e,t)=>e[0].getPropertyValue("--graph-color-1")===t[0].getPropertyValue("--graph-color-1")&&e[0].getPropertyValue("--color-1")===t[0].getPropertyValue("--color-1"))},80785(e,t,i){function a(e){return!!e&&(e instanceof Date&&!isNaN(e.valueOf()))}i.d(t,{A:()=>a})},98975(e,t,i){i.a(e,async function(e,a){try{i.d(t,{K:()=>c});var s=i(74487),n=i(22786),o=i(63927),r=e([s,o]);[s,o]=r.then?(await r)():r;const l=(0,n.A)(e=>new Intl.RelativeTimeFormat(e.language,{numeric:"auto"})),c=(e,t,i,a=!0)=>{const s=(0,o.x)(e,i,t);return a?l(t).format(s.value,s.unit):Intl.NumberFormat(t.language,{style:"unit",unit:s.unit,unitDisplay:"long"}).format(Math.abs(s.value))};a()}catch(e){a(e)}})},96986(e,t,i){i.d(t,{L:()=>n});const a={10:"mdi:battery-10",20:"mdi:battery-20",30:"mdi:battery-30",40:"mdi:battery-40",50:"mdi:battery-50",60:"mdi:battery-60",70:"mdi:battery-70",80:"mdi:battery-80",90:"mdi:battery-90",100:"mdi:battery"},s={10:"mdi:battery-charging-10",20:"mdi:battery-charging-20",30:"mdi:battery-charging-30",40:"mdi:battery-charging-40",50:"mdi:battery-charging-50",60:"mdi:battery-charging-60",70:"mdi:battery-charging-70",80:"mdi:battery-charging-80",90:"mdi:battery-charging-90",100:"mdi:battery-charging"},n=(e,t)=>{const i=Number(e);if(isNaN(i))return"off"===e?"mdi:battery":"on"===e?"mdi:battery-alert":"mdi:battery-unknown";const n=10*Math.round(i/10);return t&&i>=10?s[n]:t?"mdi:battery-charging-outline":i<=5?"mdi:battery-alert-variant-outline":a[n]}},15090(e,t,i){i.d(t,{n:()=>c,v:()=>r});i(44114),i(18111),i(22489),i(61701),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698);var a=i(22675),s=i(52220),n=i(71727),o=i(69093);const r={alarm_control_panel:["armed_away","armed_custom_bypass","armed_home","armed_night","armed_vacation","arming","disarmed","disarming","pending","triggered"],alert:["on","off","idle"],assist_satellite:["idle","listening","responding","processing"],automation:["on","off"],binary_sensor:["on","off"],button:[],calendar:["on","off"],camera:["idle","recording","streaming"],cover:["closed","closing","open","opening"],device_tracker:["home","not_home"],fan:["on","off"],humidifier:["on","off"],input_boolean:["on","off"],input_button:[],lawn_mower:["error","paused","mowing","returning","docked"],light:["on","off"],lock:["jammed","locked","locking","unlocked","unlocking","opening","open"],media_player:["off","on","idle","playing","paused","standby","buffering"],person:["home","not_home"],plant:["ok","problem"],remote:["on","off"],scene:[],schedule:["on","off"],script:["on","off"],siren:["on","off"],sun:["above_horizon","below_horizon"],switch:["on","off"],timer:["active","idle","paused"],update:["on","off"],vacuum:["cleaning","docked","error","idle","paused","returning"],valve:["closed","closing","open","opening"],weather:["clear-night","cloudy","exceptional","fog","hail","lightning-rainy","lightning","partlycloudy","pouring","rainy","snowy-rainy","snowy","sunny","windy-variant","windy"]},l={alarm_control_panel:{code_format:["number","text"]},binary_sensor:{device_class:["battery","battery_charging","co","cold","connectivity","door","garage_door","gas","heat","light","lock","moisture","motion","moving","occupancy","opening","plug","power","presence","problem","running","safety","smoke","sound","tamper","update","vibration","window"]},button:{device_class:["restart","update"]},camera:{frontend_stream_type:["hls","web_rtc"]},climate:{hvac_action:["off","idle","preheating","defrosting","heating","cooling","drying","fan"]},cover:{device_class:["awning","blind","curtain","damper","door","garage","gate","shade","shutter","window"]},device_tracker:{source_type:["bluetooth","bluetooth_le","gps","router"]},fan:{direction:["forward","reverse"]},humidifier:{device_class:["humidifier","dehumidifier"],action:["off","idle","humidifying","drying"]},media_player:{device_class:["tv","speaker","receiver"],media_content_type:["album","app","artist","channel","channels","composer","contributing_artist","episode","game","genre","image","movie","music","playlist","podcast","season","track","tvshow","url","video"],repeat:["off","one","all"]},number:{device_class:["temperature"]},sensor:{device_class:["apparent_power","aqi","battery","carbon_dioxide","carbon_monoxide","current","date","duration","energy","frequency","gas","humidity","illuminance","monetary","nitrogen_dioxide","nitrogen_monoxide","nitrous_oxide","ozone","ph","pm1","pm10","pm25","pm4","power_factor","power","pressure","reactive_power","signal_strength","sulphur_dioxide","temperature","timestamp","volatile_organic_compounds","volatile_organic_compounds_parts","voltage","volume_flow_rate"],state_class:["measurement","total","total_increasing"]},switch:{device_class:["outlet","switch"]},update:{device_class:["firmware"]},water_heater:{away_mode:["on","off"]}},c=(e,t,i=void 0)=>{const c=(0,o.t)(t),d=[];switch(!i&&c in r?d.push(...r[c]):i&&c in l&&i in l[c]&&d.push(...l[c][i]),c){case"climate":i?"fan_mode"===i?d.push(...t.attributes.fan_modes):"preset_mode"===i?d.push(...t.attributes.preset_modes):"swing_mode"===i&&d.push(...t.attributes.swing_modes):d.push(...t.attributes.hvac_modes);break;case"device_tracker":case"person":i||d.push(...Object.entries(e.states).filter(([e,t])=>"zone"===(0,n.m)(e)&&"zone.home"!==e&&t.attributes.friendly_name).map(([e,t])=>t.attributes.friendly_name).sort((t,i)=>(0,s.xL)(t,i,e.locale.language)));break;case"event":"event_type"===i&&d.push(...t.attributes.event_types);break;case"fan":"preset_mode"===i&&d.push(...t.attributes.preset_modes);break;case"humidifier":"mode"===i&&d.push(...t.attributes.available_modes);break;case"input_select":case"select":i||d.push(...t.attributes.options);break;case"light":"effect"===i&&t.attributes.effect_list?d.push(...t.attributes.effect_list):"color_mode"===i&&t.attributes.supported_color_modes&&d.push(...t.attributes.supported_color_modes);break;case"media_player":"sound_mode"===i?d.push(...t.attributes.sound_mode_list):"source"===i&&d.push(...t.attributes.source_list);break;case"remote":"current_activity"===i&&d.push(...t.attributes.activity_list);break;case"sensor":i||"enum"!==t.attributes.device_class||d.push(...t.attributes.options);break;case"vacuum":"fan_speed"===i&&d.push(...t.attributes.fan_speed_list);break;case"water_heater":i&&"operation_mode"!==i||d.push(...t.attributes.operation_list)}return i||d.push(...a.s7),[...new Set(d)]}},78649(e,t,i){i.d(t,{n:()=>s});const a=/^(\w+)\.(\w+)$/,s=e=>a.test(e)},52943(e,t,i){i.d(t,{Z:()=>a});const a=e=>e.charAt(0).toUpperCase()+e.slice(1)},31290(e,t,i){i.d(t,{n:()=>a});const a=e=>e.replace(/^_*(.)|_+(.)/g,(e,t,i)=>t?t.toUpperCase():" "+i.toUpperCase())},63927(e,t,i){i.a(e,async function(e,a){try{i.d(t,{x:()=>h});var s=i(6946),n=i(52640),o=i(38684),r=i(380);const l=1e3,c=60,d=60*c;function h(e,t=Date.now(),i,a={}){const h={...p,...a||{}},u=(+e-+t)/l;if(Math.abs(u)<h.second)return{value:Math.round(u),unit:"second"};const g=u/c;if(Math.abs(g)<h.minute)return{value:Math.round(g),unit:"minute"};const m=u/d;if(Math.abs(m)<h.hour)return{value:Math.round(m),unit:"hour"};const v=new Date(e),_=new Date(t);v.setHours(0,0,0,0),_.setHours(0,0,0,0);const y=(0,s.c)(v,_);if(0===y)return{value:Math.round(m),unit:"hour"};if(Math.abs(y)<h.day)return{value:y,unit:"day"};const b=(0,r.P)(i),f=(0,n.k)(v,{weekStartsOn:b}),w=(0,n.k)(_,{weekStartsOn:b}),$=(0,o.I)(f,w);if(0===$)return{value:y,unit:"day"};if(Math.abs($)<h.week)return{value:$,unit:"week"};const x=v.getFullYear()-_.getFullYear(),C=12*x+v.getMonth()-_.getMonth();return 0===C?{value:$,unit:"week"}:Math.abs(C)<h.month||0===x?{value:C,unit:"month"}:{value:Math.round(x),unit:"year"}}const p={second:59,minute:59,hour:22,day:5,week:4,month:11};a()}catch(u){a(u)}})},5745(e,t,i){var a=i(62826),s=i(4720),n=i(44457);class o extends s.Y{}o=(0,a.Cg)([(0,n.EM)("ha-chip-set")],o)},72945(e,t,i){var a=i(62826),s=i(96196),n=i(44457),o=i(96986);i(88945);class r extends s.WF{render(){return this.batteryStateObj?s.qy` <ha-icon .icon="${(0,o.L)(this.batteryStateObj.state,"on"===this.batteryChargingStateObj?.state)}"></ha-icon> `:s.s6}}(0,a.Cg)([(0,n.MZ)({attribute:!1})],r.prototype,"batteryStateObj",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],r.prototype,"batteryChargingStateObj",void 0),r=(0,a.Cg)([(0,n.EM)("ha-battery-icon")],r)},76776(e,t,i){var a=i(62826),s=i(96196),n=i(44457);class o extends s.WF{render(){return s.qy` ${this.header?s.qy`<h1 class="card-header">${this.header}</h1>`:s.s6} <slot></slot> `}constructor(...e){super(...e),this.raised=!1}}o.styles=s.AH`:host{background:var(--ha-card-background,var(--card-background-color,#fff));-webkit-backdrop-filter:var(--ha-card-backdrop-filter,none);backdrop-filter:var(--ha-card-backdrop-filter,none);box-shadow:var(--ha-card-box-shadow,none);box-sizing:border-box;border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));border-width:var(--ha-card-border-width,1px);border-style:solid;border-color:var(--ha-card-border-color,var(--divider-color,#e0e0e0));color:var(--primary-text-color);display:block;transition:all .3s ease-out;position:relative}:host([raised]){border:none;box-shadow:var(--ha-card-box-shadow,0px 2px 1px -1px rgba(0,0,0,.2),0px 1px 1px 0px rgba(0,0,0,.14),0px 1px 3px 0px rgba(0,0,0,.12))}.card-header,:host ::slotted(.card-header){color:var(--ha-card-header-color,var(--primary-text-color));font-family:var(--ha-card-header-font-family, inherit);font-size:var(--ha-card-header-font-size, var(--ha-font-size-2xl));letter-spacing:-.012em;line-height:var(--ha-line-height-expanded);padding:var(--ha-space-3) var(--ha-space-4) var(--ha-space-4);display:block;margin-block-start:0;margin-block-end:0;font-weight:var(--ha-font-weight-normal)}:host ::slotted(.card-content:not(:first-child)),slot:not(:first-child)::slotted(.card-content){padding-top:0;margin-top:calc(var(--ha-space-2) * -1)}:host ::slotted(.card-content){padding:var(--ha-space-4)}:host ::slotted(.card-actions){border-top:1px solid var(--divider-color,#e8e8e8);padding:var(--ha-space-2)}`,(0,a.Cg)([(0,n.MZ)()],o.prototype,"header",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,reflect:!0})],o.prototype,"raised",void 0),o=(0,a.Cg)([(0,n.EM)("ha-card")],o)},27661(e,t,i){var a=i(62826),s=i(51978),n=i(94743),o=i(44457),r=i(96196),l=i(63091);class c extends s.n{firstUpdated(e){super.firstUpdated(e),this.style.setProperty("--mdc-theme-secondary","var(--primary-color)")}}c.styles=[n.R,r.AH`:host{--mdc-typography-button-text-transform:none;--mdc-typography-button-font-size:var(--ha-font-size-l);--mdc-typography-button-font-family:var(--ha-font-family-body);--mdc-typography-button-font-weight:var(--ha-font-weight-medium)}:host .mdc-fab--extended{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab.mdc-fab--extended .ripple{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab--extended .mdc-fab__icon{margin-inline-start:-8px;margin-inline-end:12px;direction:var(--direction)}:disabled{--mdc-theme-secondary:var(--disabled-text-color);pointer-events:none}`,"rtl"===l.G.document.dir?r.AH`:host .mdc-fab--extended .mdc-fab__icon{direction:rtl}`:r.AH``],c=(0,a.Cg)([(0,o.EM)("ha-fab")],c)},63817(e,t,i){i.a(e,async function(e,t){try{i(18111),i(22489),i(61701);var a=i(62826),s=i(96196),n=i(44457),o=i(4937),r=i(22786),l=i(1087),c=i(52220),d=i(95350),h=i(14503),p=(i(58349),i(59174)),u=(i(11382),i(8630),i(89947),e([p]));p=(u.then?(await u)():u)[0];const g="M21 8H3V6H21V8M13.81 16H10V18H13.09C13.21 17.28 13.46 16.61 13.81 16M18 11H6V13H18V11M21.12 15.46L19 17.59L16.88 15.46L15.47 16.88L17.59 19L15.47 21.12L16.88 22.54L19 20.41L21.12 22.54L22.54 21.12L20.41 19L22.54 16.88L21.12 15.46Z";class m extends s.WF{render(){return s.qy` <ha-expansion-panel left-chevron .expanded="${this.expanded}" @expanded-will-change="${this._expandedWillChange}" @expanded-changed="${this._expandedChanged}"> <div slot="header" class="header"> ${this.hass.localize("ui.panel.config.integrations.caption")} ${this.value?.length?s.qy`<div class="badge">${this.value?.length}</div> <ha-icon-button .path="${g}" @click="${this._clearFilter}"></ha-icon-button>`:s.s6} </div> ${this._manifests&&this._shouldRender?s.qy`<search-input-outlined .hass="${this.hass}" .filter="${this._filter}" @value-changed="${this._handleSearchChange}"> </search-input-outlined> <ha-list class="ha-scrollbar" @click="${this._handleItemClick}" multi> ${(0,o.u)(this._integrations(this.hass.localize,this._manifests,this._filter,this.value),e=>e.domain,e=>s.qy`<ha-check-list-item .value="${e.domain}" .selected="${(this.value||[]).includes(e.domain)}" graphic="icon"> <ha-domain-icon slot="graphic" .hass="${this.hass}" .domain="${e.domain}" brand-fallback></ha-domain-icon> ${e.name} </ha-check-list-item>`)} </ha-list> `:s.s6} </ha-expansion-panel> `}updated(e){e.has("expanded")&&this.expanded&&setTimeout(()=>{this.expanded&&(this.renderRoot.querySelector("ha-list").style.height=this.clientHeight-49-32+"px")},300)}_expandedWillChange(e){this._shouldRender=e.detail.expanded}_expandedChanged(e){this.expanded=e.detail.expanded}async firstUpdated(){this._manifests=await(0,d.fK)(this.hass),this.hass.loadBackendTranslation("title")}_handleItemClick(e){const t=e.target.closest("ha-check-list-item"),i=t?.value;i&&(this.value?.includes(i)?this.value=this.value?.filter(e=>e!==i):this.value=[...this.value||[],i],t.selected=this.value?.includes(i),(0,l.r)(this,"data-table-filter-changed",{value:this.value,items:void 0}))}_clearFilter(e){e.preventDefault(),this.value=void 0,(0,l.r)(this,"data-table-filter-changed",{value:void 0,items:void 0})}_handleSearchChange(e){this._filter=e.detail.value.toLowerCase()}static get styles(){return[h.dp,s.AH`:host{border-bottom:1px solid var(--divider-color)}:host([expanded]){flex:1;height:0}ha-expansion-panel{--ha-card-border-radius:var(--ha-border-radius-square);--expansion-panel-content-padding:0}.header{display:flex;align-items:center}.header ha-icon-button{margin-inline-start:auto;margin-inline-end:8px}.badge{display:inline-block;margin-left:8px;margin-inline-start:8px;margin-inline-end:0;min-width:16px;box-sizing:border-box;border-radius:var(--ha-border-radius-circle);font-size:var(--ha-font-size-xs);font-weight:var(--ha-font-weight-normal);background-color:var(--primary-color);line-height:var(--ha-line-height-normal);text-align:center;padding:0px 2px;color:var(--text-primary-color)}search-input-outlined{display:block;padding:var(--ha-space-1) var(--ha-space-2) 0}`]}constructor(...e){super(...e),this.narrow=!1,this.expanded=!1,this._shouldRender=!1,this._integrations=(0,r.A)((e,t,i,a)=>t.map(t=>({...t,name:(0,d.p$)(e,t.domain,t)})).filter(e=>(!e.integration_type||!["entity","system","hardware"].includes(e.integration_type))&&(!i||e.name.toLowerCase().includes(i)||e.domain.toLowerCase().includes(i))).sort((e,t)=>(0,c.xL)(e.name,t.name,this.hass.locale.language)))}}(0,a.Cg)([(0,n.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],m.prototype,"value",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean})],m.prototype,"narrow",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,reflect:!0})],m.prototype,"expanded",void 0),(0,a.Cg)([(0,n.wk)()],m.prototype,"_manifests",void 0),(0,a.Cg)([(0,n.wk)()],m.prototype,"_shouldRender",void 0),(0,a.Cg)([(0,n.wk)()],m.prototype,"_filter",void 0),m=(0,a.Cg)([(0,n.EM)("ha-filter-integrations")],m),t()}catch(e){t(e)}})},64263(e,t,i){i(44114),i(18111),i(20116),i(61701);var a=i(62826),s=i(96196),n=i(44457),o=i(1087),r=i(14503);i(58349),i(11382),i(88945),i(26300),i(8630);class l extends s.WF{render(){if(!this.states)return s.s6;const e=this.states.find(e=>e.icon);return s.qy` <ha-expansion-panel left-chevron .expanded="${this.expanded}" @expanded-will-change="${this._expandedWillChange}" @expanded-changed="${this._expandedChanged}"> <div slot="header" class="header"> ${this.label} ${this.value?.length?s.qy`<div class="badge">${this.value?.length}</div> <ha-icon-button .path="${"M21 8H3V6H21V8M13.81 16H10V18H13.09C13.21 17.28 13.46 16.61 13.81 16M18 11H6V13H18V11M21.12 15.46L19 17.59L16.88 15.46L15.47 16.88L17.59 19L15.47 21.12L16.88 22.54L19 20.41L21.12 22.54L22.54 21.12L20.41 19L22.54 16.88L21.12 15.46Z"}" @click="${this._clearFilter}"></ha-icon-button>`:s.s6} </div> ${this._shouldRender?s.qy` <ha-list @selected="${this._statesSelected}" multi class="ha-scrollbar"> ${this.states.map(t=>s.qy`<ha-check-list-item .value="${t.value}" .selected="${this.value?.includes(t.value)??!1}" .graphic="${e?"icon":null}"> ${t.icon?s.qy`<ha-icon slot="graphic" .icon="${t.icon}"></ha-icon>`:s.s6} ${t.label} </ha-check-list-item>`)} </ha-list> `:s.s6} </ha-expansion-panel> `}willUpdate(e){e.has("expanded")&&this.expanded&&(this._shouldRender=!0)}updated(e){(e.has("expanded")||e.has("states"))&&this.expanded&&setTimeout(async()=>{if(!this.expanded)return;const e=this._list;e&&(e.style.height=this.clientHeight-49+"px")},300)}_expandedWillChange(e){this._shouldRender=e.detail.expanded}_expandedChanged(e){this.expanded=e.detail.expanded}async _statesSelected(e){if(!e.detail.index.size)return(0,o.r)(this,"data-table-filter-changed",{value:[],items:void 0}),void(this.value=[]);const t=[];for(const i of e.detail.index){const e=this.states[i].value;t.push(e)}this.value=t,(0,o.r)(this,"data-table-filter-changed",{value:t,items:void 0})}_clearFilter(e){e.preventDefault(),this.value=void 0,(0,o.r)(this,"data-table-filter-changed",{value:void 0,items:void 0})}static get styles(){return[r.dp,s.AH`:host{border-bottom:1px solid var(--divider-color)}:host([expanded]){flex:1;height:0}ha-expansion-panel{--ha-card-border-radius:var(--ha-border-radius-square);--expansion-panel-content-padding:0}.header{display:flex;align-items:center}.header ha-icon-button{margin-inline-start:auto;margin-inline-end:8px}.badge{display:inline-block;margin-left:8px;margin-inline-start:8px;margin-inline-end:0;min-width:16px;box-sizing:border-box;border-radius:var(--ha-border-radius-circle);font-size:var(--ha-font-size-xs);font-weight:var(--ha-font-weight-normal);background-color:var(--primary-color);line-height:var(--ha-line-height-normal);text-align:center;padding:0px 2px;color:var(--text-primary-color)}`]}constructor(...e){super(...e),this.narrow=!1,this.expanded=!1,this._shouldRender=!1}}(0,a.Cg)([(0,n.MZ)({attribute:!1})],l.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)()],l.prototype,"label",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],l.prototype,"value",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],l.prototype,"states",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean})],l.prototype,"narrow",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,reflect:!0})],l.prototype,"expanded",void 0),(0,a.Cg)([(0,n.wk)()],l.prototype,"_shouldRender",void 0),(0,a.Cg)([(0,n.P)("ha-list")],l.prototype,"_list",void 0),l=(0,a.Cg)([(0,n.EM)("ha-filter-states")],l)},6(e,t,i){var a=i(62826),s=i(35949),n=i(38627),o=i(96196),r=i(44457),l=i(94333),c=i(1087);class d extends s.M{render(){const e={"mdc-form-field--align-end":this.alignEnd,"mdc-form-field--space-between":this.spaceBetween,"mdc-form-field--nowrap":this.nowrap};return o.qy` <div class="mdc-form-field ${(0,l.H)(e)}"> <slot></slot> <label class="mdc-label" @click="${this._labelClick}"> <slot name="label">${this.label}</slot> </label> </div>`}_labelClick(){const e=this.input;if(e&&(e.focus(),!e.disabled))switch(e.tagName){case"HA-CHECKBOX":e.checked=!e.checked,(0,c.r)(e,"change");break;case"HA-RADIO":e.checked=!0,(0,c.r)(e,"change");break;default:e.click()}}constructor(...e){super(...e),this.disabled=!1}}d.styles=[n.R,o.AH`:host(:not([alignEnd])) ::slotted(ha-switch){margin-right:10px;margin-inline-end:10px;margin-inline-start:inline}.mdc-form-field{align-items:var(--ha-formfield-align-items,center);gap:var(--ha-space-1)}.mdc-form-field>label{direction:var(--direction);margin-inline-start:0;margin-inline-end:auto;padding:0}:host([disabled]) label{color:var(--disabled-text-color)}`],(0,a.Cg)([(0,r.MZ)({type:Boolean,reflect:!0})],d.prototype,"disabled",void 0),d=(0,a.Cg)([(0,r.EM)("ha-formfield")],d)},43661(e,t,i){i.r(t),i.d(t,{HaIconNext:()=>r});var a=i(62826),s=i(44457),n=i(63091),o=i(67094);class r extends o.HaSvgIcon{constructor(...e){super(...e),this.path="rtl"===n.G.document.dir?"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z":"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"}}(0,a.Cg)([(0,s.MZ)()],r.prototype,"path",void 0),r=(0,a.Cg)([(0,s.EM)("ha-icon-next")],r)},82988(e,t,i){var a=i(62826),s=i(92153),n=i(87592),o=i(96196),r=i(44457);class l extends s.g{async show(){super.show(),this.menu.hasOverflow=!1}}l.styles=[n.R,o.AH`:host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--secondary-text-color);--md-sys-color-secondary-container:rgba(
          var(--rgb-primary-color),
          0.15
        );--md-sys-color-on-secondary-container:var(--text-primary-color);--mdc-icon-size:16px;--md-sys-color-on-primary-container:var(--primary-text-color);--md-sys-color-on-secondary-container:var(--primary-text-color)}`],l=(0,a.Cg)([(0,r.EM)("ha-sub-menu")],l)},59646(e,t,i){var a=i(62826),s=i(4845),n=i(49065),o=i(96196),r=i(44457),l=i(88360);class c extends s.U{firstUpdated(){super.firstUpdated(),this.addEventListener("change",()=>{this.haptic&&(0,l.j)(this,"light")})}constructor(...e){super(...e),this.haptic=!1}}c.styles=[n.R,o.AH`:host{--mdc-theme-secondary:var(--switch-checked-color)}.mdc-switch.mdc-switch--checked .mdc-switch__thumb{background-color:var(--switch-checked-button-color);border-color:var(--switch-checked-button-color)}.mdc-switch.mdc-switch--checked .mdc-switch__track{background-color:var(--switch-checked-track-color);border-color:var(--switch-checked-track-color)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb{background-color:var(--switch-unchecked-button-color);border-color:var(--switch-unchecked-button-color)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__track{background-color:var(--switch-unchecked-track-color);border-color:var(--switch-unchecked-track-color)}`],(0,a.Cg)([(0,r.MZ)({type:Boolean})],c.prototype,"haptic",void 0),c=(0,a.Cg)([(0,r.EM)("ha-switch")],c)},62351(e,t,i){i.d(t,{KC:()=>d,Vy:()=>l,ds:()=>n,ew:()=>r,g5:()=>c,tl:()=>o});var a=i(82286),s=i(22675);const n=(e,t,i)=>e.connection.subscribeMessage(i,{type:"assist_satellite/intercept_wake_word",entity_id:t}),o=(e,t)=>e.callWS({type:"assist_satellite/test_connection",entity_id:t}),r=(e,t,i)=>e.callService("assist_satellite","announce",i,{entity_id:t}),l=(e,t)=>e.callWS({type:"assist_satellite/get_configuration",entity_id:t}),c=(e,t,i)=>e.callWS({type:"assist_satellite/set_wake_words",entity_id:t,wake_word_ids:i}),d=e=>e&&e.state!==s.Hh&&(0,a.$)(e,1)},77001(e,t,i){i.d(t,{D:()=>s,i:()=>a});i(18111),i(7588),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698);const a=e=>{const t={};return Object.entries(e).forEach(([e,i])=>{t[e]={value:i.value,items:i.items instanceof Set?Array.from(i.items):i.items}}),t},s=e=>{const t={};return Object.entries(e).forEach(([e,i])=>{t[e]={value:i.value,items:Array.isArray(i.items)?new Set(i.items):i.items}}),t}},96204(e,t,i){i.d(t,{Dh:()=>a,It:()=>o,WV:()=>n,g9:()=>s});const a=e=>e.callWS({type:"diagnostics/list"}),s=(e,t)=>e.callWS({type:"diagnostics/get",domain:t}),n=e=>`/api/diagnostics/config_entry/${e}`,o=(e,t)=>`/api/diagnostics/config_entry/${e}/device/${t}`},35952(e,t,i){function a(e){return"strategy"in e}i.d(t,{Dz:()=>s,Wu:()=>a,io:()=>o,ql:()=>n});const s=(e,t,i)=>e.sendMessagePromise({type:"lovelace/config",url_path:t,force:i}),n=(e,t,i)=>e.callWS({type:"lovelace/config/save",url_path:t,config:i}),o=(e,t)=>e.callWS({type:"lovelace/config/delete",url_path:t})},71730(e,t,i){i.d(t,{A_:()=>o,SJ:()=>a,mQ:()=>n,n6:()=>s});const a=e=>e.callWS({type:"lovelace/dashboards/list"}),s=(e,t)=>e.callWS({type:"lovelace/dashboards/create",...t}),n=(e,t,i)=>e.callWS({type:"lovelace/dashboards/update",dashboard_id:t,...i}),o=(e,t)=>e.callWS({type:"lovelace/dashboards/delete",dashboard_id:t})},53072(e,t,i){i.d(t,{$6:()=>_,EC:()=>m,ET:()=>v,H1:()=>g,HN:()=>w,Im:()=>k,QI:()=>$,Un:()=>b,Xm:()=>f,ce:()=>x,fh:()=>A,ie:()=>C,mm:()=>y,vj:()=>u});i(44114);var a=i(47129),s=i(82286),n=i(22675),o=i(52069);const r="M11,14C12,14 13.05,14.16 14.2,14.44C13.39,15.31 13,16.33 13,17.5C13,18.39 13.25,19.23 13.78,20H3V18C3,16.81 3.91,15.85 5.74,15.12C7.57,14.38 9.33,14 11,14M11,12C9.92,12 9,11.61 8.18,10.83C7.38,10.05 7,9.11 7,8C7,6.92 7.38,6 8.18,5.18C9,4.38 9.92,4 11,4C12.11,4 13.05,4.38 13.83,5.18C14.61,6 15,6.92 15,8C15,9.11 14.61,10.05 13.83,10.83C13.05,11.61 12.11,12 11,12M18.5,10H20L22,10V12H20V17.5A2.5,2.5 0 0,1 17.5,20A2.5,2.5 0 0,1 15,17.5A2.5,2.5 0 0,1 17.5,15C17.86,15 18.19,15.07 18.5,15.21V10Z",l="M14,19H18V5H14M6,19H10V5H6V19Z",c="M8,5.14V19.14L19,12.14L8,5.14Z",d="M16.56,5.44L15.11,6.89C16.84,7.94 18,9.83 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12C6,9.83 7.16,7.94 8.88,6.88L7.44,5.44C5.36,6.88 4,9.28 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12C20,9.28 18.64,6.88 16.56,5.44M13,3H11V13H13",h="M18,18H6V6H18V18Z",p="M8.16,3L6.75,4.41L9.34,7H4C2.89,7 2,7.89 2,9V19C2,20.11 2.89,21 4,21H20C21.11,21 22,20.11 22,19V9C22,7.89 21.11,7 20,7H14.66L17.25,4.41L15.84,3L12,6.84L8.16,3M4,9H17V19H4V9M19.5,9A1,1 0 0,1 20.5,10A1,1 0 0,1 19.5,11A1,1 0 0,1 18.5,10A1,1 0 0,1 19.5,9M19.5,12A1,1 0 0,1 20.5,13A1,1 0 0,1 19.5,14A1,1 0 0,1 18.5,13A1,1 0 0,1 19.5,12Z";var u=function(e){return e[e.PAUSE=1]="PAUSE",e[e.SEEK=2]="SEEK",e[e.VOLUME_SET=4]="VOLUME_SET",e[e.VOLUME_MUTE=8]="VOLUME_MUTE",e[e.PREVIOUS_TRACK=16]="PREVIOUS_TRACK",e[e.NEXT_TRACK=32]="NEXT_TRACK",e[e.TURN_ON=128]="TURN_ON",e[e.TURN_OFF=256]="TURN_OFF",e[e.PLAY_MEDIA=512]="PLAY_MEDIA",e[e.VOLUME_STEP=1024]="VOLUME_STEP",e[e.SELECT_SOURCE=2048]="SELECT_SOURCE",e[e.STOP=4096]="STOP",e[e.CLEAR_PLAYLIST=8192]="CLEAR_PLAYLIST",e[e.PLAY=16384]="PLAY",e[e.SHUFFLE_SET=32768]="SHUFFLE_SET",e[e.SELECT_SOUND_MODE=65536]="SELECT_SOUND_MODE",e[e.BROWSE_MEDIA=131072]="BROWSE_MEDIA",e[e.REPEAT_SET=262144]="REPEAT_SET",e[e.GROUPING=524288]="GROUPING",e}({});const g="browser",m={album:{icon:"M12,11A1,1 0 0,0 11,12A1,1 0 0,0 12,13A1,1 0 0,0 13,12A1,1 0 0,0 12,11M12,16.5C9.5,16.5 7.5,14.5 7.5,12C7.5,9.5 9.5,7.5 12,7.5C14.5,7.5 16.5,9.5 16.5,12C16.5,14.5 14.5,16.5 12,16.5M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",layout:"grid"},app:{icon:"M21 2H3C1.9 2 1 2.9 1 4V20C1 21.1 1.9 22 3 22H21C22.1 22 23 21.1 23 20V4C23 2.9 22.1 2 21 2M21 7H3V4H21V7Z",layout:"grid",show_list_images:!0},artist:{icon:r,layout:"grid",show_list_images:!0},channel:{icon:p,thumbnail_ratio:"portrait",layout:"grid",show_list_images:!0},composer:{icon:"M11,4A4,4 0 0,1 15,8A4,4 0 0,1 11,12A4,4 0 0,1 7,8A4,4 0 0,1 11,4M11,6A2,2 0 0,0 9,8A2,2 0 0,0 11,10A2,2 0 0,0 13,8A2,2 0 0,0 11,6M11,13C12.1,13 13.66,13.23 15.11,13.69C14.5,14.07 14,14.6 13.61,15.23C12.79,15.03 11.89,14.9 11,14.9C8.03,14.9 4.9,16.36 4.9,17V18.1H13.04C13.13,18.8 13.38,19.44 13.76,20H3V17C3,14.34 8.33,13 11,13M18.5,10H20L22,10V12H20V17.5A2.5,2.5 0 0,1 17.5,20A2.5,2.5 0 0,1 15,17.5A2.5,2.5 0 0,1 17.5,15C17.86,15 18.19,15.07 18.5,15.21V10Z",layout:"grid",show_list_images:!0},contributing_artist:{icon:r,layout:"grid",show_list_images:!0},directory:{icon:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z",layout:"grid",show_list_images:!0},episode:{icon:p,layout:"grid",thumbnail_ratio:"portrait",show_list_images:!0},game:{icon:"M7,6H17A6,6 0 0,1 23,12A6,6 0 0,1 17,18C15.22,18 13.63,17.23 12.53,16H11.47C10.37,17.23 8.78,18 7,18A6,6 0 0,1 1,12A6,6 0 0,1 7,6M6,9V11H4V13H6V15H8V13H10V11H8V9H6M15.5,12A1.5,1.5 0 0,0 14,13.5A1.5,1.5 0 0,0 15.5,15A1.5,1.5 0 0,0 17,13.5A1.5,1.5 0 0,0 15.5,12M18.5,9A1.5,1.5 0 0,0 17,10.5A1.5,1.5 0 0,0 18.5,12A1.5,1.5 0 0,0 20,10.5A1.5,1.5 0 0,0 18.5,9Z",layout:"grid",thumbnail_ratio:"portrait"},genre:{icon:"M8.11,19.45C5.94,18.65 4.22,16.78 3.71,14.35L2.05,6.54C1.81,5.46 2.5,4.4 3.58,4.17L13.35,2.1L13.38,2.09C14.45,1.88 15.5,2.57 15.72,3.63L16.07,5.3L20.42,6.23H20.45C21.5,6.47 22.18,7.53 21.96,8.59L20.3,16.41C19.5,20.18 15.78,22.6 12,21.79C10.42,21.46 9.08,20.61 8.11,19.45V19.45M20,8.18L10.23,6.1L8.57,13.92V13.95C8,16.63 9.73,19.27 12.42,19.84C15.11,20.41 17.77,18.69 18.34,16L20,8.18M16,16.5C15.37,17.57 14.11,18.16 12.83,17.89C11.56,17.62 10.65,16.57 10.5,15.34L16,16.5M8.47,5.17L4,6.13L5.66,13.94L5.67,13.97C5.82,14.68 6.12,15.32 6.53,15.87C6.43,15.1 6.45,14.3 6.62,13.5L7.05,11.5C6.6,11.42 6.21,11.17 6,10.81C6.06,10.2 6.56,9.66 7.25,9.5C7.33,9.5 7.4,9.5 7.5,9.5L8.28,5.69C8.32,5.5 8.38,5.33 8.47,5.17M15.03,12.23C15.35,11.7 16.03,11.42 16.72,11.57C17.41,11.71 17.91,12.24 18,12.86C17.67,13.38 17,13.66 16.3,13.5C15.61,13.37 15.11,12.84 15.03,12.23M10.15,11.19C10.47,10.66 11.14,10.38 11.83,10.53C12.5,10.67 13.03,11.21 13.11,11.82C12.78,12.34 12.11,12.63 11.42,12.5C10.73,12.33 10.23,11.8 10.15,11.19M11.97,4.43L13.93,4.85L13.77,4.05L11.97,4.43Z",layout:"grid",show_list_images:!0},image:{icon:"M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z",layout:"grid",show_list_images:!0},movie:{icon:"M18,4L20,8H17L15,4H13L15,8H12L10,4H8L10,8H7L5,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V4H18Z",thumbnail_ratio:"portrait",layout:"grid",show_list_images:!0},music:{icon:"M21,3V15.5A3.5,3.5 0 0,1 17.5,19A3.5,3.5 0 0,1 14,15.5A3.5,3.5 0 0,1 17.5,12C18.04,12 18.55,12.12 19,12.34V6.47L9,8.6V17.5A3.5,3.5 0 0,1 5.5,21A3.5,3.5 0 0,1 2,17.5A3.5,3.5 0 0,1 5.5,14C6.04,14 6.55,14.12 7,14.34V6L21,3Z",show_list_images:!0},playlist:{icon:"M15,6H3V8H15V6M15,10H3V12H15V10M3,16H11V14H3V16M17,6V14.18C16.69,14.07 16.35,14 16,14A3,3 0 0,0 13,17A3,3 0 0,0 16,20A3,3 0 0,0 19,17V8H22V6H17Z",layout:"grid",show_list_images:!0},podcast:{icon:"M17,18.25V21.5H7V18.25C7,16.87 9.24,15.75 12,15.75C14.76,15.75 17,16.87 17,18.25M12,5.5A6.5,6.5 0 0,1 18.5,12C18.5,13.25 18.15,14.42 17.54,15.41L16,14.04C16.32,13.43 16.5,12.73 16.5,12C16.5,9.5 14.5,7.5 12,7.5C9.5,7.5 7.5,9.5 7.5,12C7.5,12.73 7.68,13.43 8,14.04L6.46,15.41C5.85,14.42 5.5,13.25 5.5,12A6.5,6.5 0 0,1 12,5.5M12,1.5A10.5,10.5 0 0,1 22.5,12C22.5,14.28 21.77,16.39 20.54,18.11L19.04,16.76C19.96,15.4 20.5,13.76 20.5,12A8.5,8.5 0 0,0 12,3.5A8.5,8.5 0 0,0 3.5,12C3.5,13.76 4.04,15.4 4.96,16.76L3.46,18.11C2.23,16.39 1.5,14.28 1.5,12A10.5,10.5 0 0,1 12,1.5M12,9.5A2.5,2.5 0 0,1 14.5,12A2.5,2.5 0 0,1 12,14.5A2.5,2.5 0 0,1 9.5,12A2.5,2.5 0 0,1 12,9.5Z",layout:"grid"},season:{icon:p,layout:"grid",thumbnail_ratio:"portrait",show_list_images:!0},track:{icon:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M13,13H11V18A2,2 0 0,1 9,20A2,2 0 0,1 7,18A2,2 0 0,1 9,16C9.4,16 9.7,16.1 10,16.3V11H13V13M13,9V3.5L18.5,9H13Z"},tv_show:{icon:p,layout:"grid",thumbnail_ratio:"portrait"},url:{icon:"M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},video:{icon:"M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z",layout:"grid",show_list_images:!0}},v=(e,t,i,a)=>e.callWS({type:"media_player/browse_media",entity_id:t,media_content_id:i,media_content_type:a}),_=e=>{let t=e.attributes.media_position;return"playing"!==e.state?t:(t+=(Date.now()-new Date(e.attributes.media_position_updated_at).getTime())/1e3,t<0?0:t)},y=e=>{let t;switch(e.attributes.media_content_type){case"music":case"image":t=e.attributes.media_artist;break;case"playlist":t=e.attributes.media_playlist||e.attributes.media_artist;break;case"tvshow":t=e.attributes.media_series_title,e.attributes.media_season&&(t+=" S"+e.attributes.media_season,e.attributes.media_episode&&(t+="E"+e.attributes.media_episode));break;case"channel":t=e.attributes.media_channel;break;default:t=e.attributes.app_name||""}return t},b=(e,t=!1)=>{if(!e)return;const i=e.state;if((0,n.g0)(i))return;if(!(0,a.a)(e))return(0,s.$)(e,128)?[{icon:d,action:"turn_on"}]:void 0;const o=[];(0,s.$)(e,256)&&o.push({icon:d,action:"turn_off"});const r=!0===e.attributes.assumed_state,p=e.attributes;return("playing"===i||"paused"===i||r)&&(0,s.$)(e,32768)&&t&&o.push({icon:!0===p.shuffle?"M14.83,13.41L13.42,14.82L16.55,17.95L14.5,20H20V14.5L17.96,16.54L14.83,13.41M14.5,4L16.54,6.04L4,18.59L5.41,20L17.96,7.46L20,9.5V4M10.59,9.17L5.41,4L4,5.41L9.17,10.58L10.59,9.17Z":"M16,4.5V7H5V9H16V11.5L19.5,8M16,12.5V15H5V17H16V19.5L19.5,16",action:"shuffle_set"}),("playing"===i||"paused"===i||r)&&(0,s.$)(e,16)&&o.push({icon:"M6,18V6H8V18H6M9.5,12L18,6V18L9.5,12Z",action:"media_previous_track"}),!r&&("playing"===i&&((0,s.$)(e,1)||(0,s.$)(e,4096))||("paused"===i||"idle"===i)&&(0,s.$)(e,16384)||"on"===i&&((0,s.$)(e,16384)||(0,s.$)(e,1)))&&o.push({icon:"on"===i?"M3,5V19L11,12M13,19H16V5H13M18,5V19H21V5":"playing"!==i?c:(0,s.$)(e,1)?l:h,action:"playing"!==i?"media_play":(0,s.$)(e,1)?"media_pause":"media_stop"}),r&&(0,s.$)(e,16384)&&o.push({icon:c,action:"media_play"}),r&&(0,s.$)(e,1)&&o.push({icon:l,action:"media_pause"}),r&&(0,s.$)(e,4096)&&o.push({icon:h,action:"media_stop"}),("playing"===i||"paused"===i||r)&&(0,s.$)(e,32)&&o.push({icon:"M16,18H18V6H16M6,18L14.5,12L6,6V18Z",action:"media_next_track"}),("playing"===i||"paused"===i||r)&&(0,s.$)(e,262144)&&t&&o.push({icon:"all"===p.repeat?"M17,17H7V14L3,18L7,22V19H19V13H17M7,7H17V10L21,6L17,2V5H5V11H7V7Z":"one"===p.repeat?"M13,15V9H12L10,10V11H11.5V15M17,17H7V14L3,18L7,22V19H19V13H17M7,7H17V10L21,6L17,2V5H5V11H7V7Z":"M2,5.27L3.28,4L20,20.72L18.73,22L15.73,19H7V22L3,18L7,14V17H13.73L7,10.27V11H5V8.27L2,5.27M17,13H19V17.18L17,15.18V13M17,5V2L21,6L17,10V7H8.82L6.82,5H17Z",action:"repeat_set"}),o.length>0?o:void 0},f=e=>{if(void 0===e||e===1/0)return"";let t=new Date(1e3*e).toISOString();return t=e>3600?t.substring(11,16):t.substring(14,19),t.replace(/^0+/,"").padStart(4,"0")},w=e=>{if(!e)return;const t=e.indexOf("?authSig=");let i=t>0?e.slice(0,t):e;return i.startsWith("http")&&(i=decodeURIComponent(i.split("/").pop())),i},$=(e,t,i)=>e.callService("media_player","volume_set",{entity_id:t,volume_level:i}),x=(e,t,i)=>e.callService("media_player",i,"shuffle_set"===i?{entity_id:t.entity_id,shuffle:!t.attributes.shuffle}:"repeat_set"===i?{entity_id:t.entity_id,repeat:"all"===t.attributes.repeat?"one":"off"===t.attributes.repeat?"all":"off"}:{entity_id:t.entity_id}),C=(e,t,i,a,s={})=>(!s.enqueue&&void 0===s.announce&&(0,o.ni)(i)&&(s.announce=!0),e.callService("media_player","play_media",{entity_id:t,media_content_id:i,media_content_type:a,...s})),k=(e,t,i)=>e.callService("media_player","join",{group_members:i},{entity_id:t}),A=(e,t)=>e.callService("media_player","unjoin",{},{entity_id:t})},86973(e,t,i){i.d(t,{_:()=>o});i(18111),i(22489),i(7588),i(61701);var a=i(96196),s=(i(11382),i(65063)),n=i(59241);const o=async(e,t,i)=>{const o=await(0,n.BM)(t,i),r=Object.entries(o),l=r.filter(([e,t])=>t&&e!==t).map(([e,t])=>a.qy`<tr> <td>${e}</td> <td>${t}</td> </tr>`),c=r.filter(([e,t])=>null===t).map(([e])=>a.qy`<li>${e}</li>`),d=r.filter(([e,t])=>e===t).map(([e])=>a.qy`<li>${e}</li>`);l.length?(0,s.dk)(e,{title:t.localize("ui.dialogs.recreate_entity_ids.confirm_rename_title"),text:a.qy`${t.localize("ui.dialogs.recreate_entity_ids.confirm_rename_warning")} <br><br> <ha-expansion-panel outlined> <span slot="header">${t.localize("ui.dialogs.recreate_entity_ids.will_rename",{count:l.length})}</span> <div style="overflow:auto"> <table style="width:100%;text-align:var(--float-start)"> <tr> <th>${t.localize("ui.dialogs.recreate_entity_ids.old")}</th> <th>${t.localize("ui.dialogs.recreate_entity_ids.new")}</th> </tr> ${l} </table> </div> </ha-expansion-panel> ${c.length?a.qy`<ha-expansion-panel outlined style="margin-top:8px"> <span slot="header">${t.localize("ui.dialogs.recreate_entity_ids.cant_rename",{count:c.length})}</span> ${c} </ha-expansion-panel>`:a.s6} ${d.length?a.qy`<ha-expansion-panel outlined style="margin-top:8px"> <span slot="header">${t.localize("ui.dialogs.recreate_entity_ids.wont_change",{count:d.length})}</span> ${d} </ha-expansion-panel>`:a.s6}`,confirmText:t.localize("ui.common.update"),dismissText:t.localize("ui.common.cancel"),destructive:!0,confirm:()=>{r.filter(([e,t])=>t&&e!==t).forEach(([i,a])=>(0,n.G_)(t,i,{new_entity_id:a}).catch(a=>{(0,s.showAlertDialog)(e,{title:t.localize("ui.dialogs.recreate_entity_ids.update_entity_error",{entityId:i}),text:a.message})}))}}):(0,s.showAlertDialog)(e,{title:t.localize("ui.dialogs.recreate_entity_ids.confirm_no_renamable_entity_ids"),text:a.qy`${c.length?a.qy`<ha-expansion-panel outlined style="margin-top:8px"> <span slot="header">${t.localize("ui.dialogs.recreate_entity_ids.cant_rename",{count:c.length})}</span> ${c} </ha-expansion-panel>`:a.s6} ${d.length?a.qy`<ha-expansion-panel outlined style="margin-top:8px"> <span slot="header">${t.localize("ui.dialogs.recreate_entity_ids.wont_change",{count:d.length})}</span> ${d} </ha-expansion-panel>`:a.s6}`})}},81023(e,t,i){i.d(t,{L:()=>n});var a=i(1087);const s=()=>Promise.all([i.e("92769"),i.e("44966"),i.e("26767"),i.e("47251"),i.e("22397"),i.e("34326"),i.e("22016"),i.e("4939"),i.e("62761"),i.e("61997"),i.e("80445"),i.e("8851"),i.e("55076"),i.e("58312")]).then(i.bind(i,85027)),n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"ha-voice-assistant-setup-dialog",dialogImport:s,dialogParams:t})}},28794(e,t,i){i.a(e,async function(e,a){try{i.r(t);var s=i(62826),n=i(96196),o=i(44457),r=i(91926),l=(i(90248),i(18350)),c=(i(2054),i(38962),e([l]));l=(c.then?(await c)():c)[0];class d extends n.WF{render(){return n.qy` ${this.toolbar?n.qy`<div class="toolbar"> ${this.rootnav||history.state?.root?n.qy` <ha-menu-button .hass="${this.hass}" .narrow="${this.narrow}"></ha-menu-button> `:n.qy` <ha-icon-button-arrow-prev .hass="${this.hass}" @click="${this._handleBack}"></ha-icon-button-arrow-prev> `} </div>`:""} <div class="content"> <ha-alert alert-type="error">${this.error}</ha-alert> <slot> <ha-button appearance="plain" size="small" @click="${this._handleBack}"> ${this.hass?.localize("ui.common.back")} </ha-button> </slot> </div> `}_handleBack(){(0,r.O)()}static get styles(){return[n.AH`:host{display:block;height:100%;background-color:var(--primary-background-color)}.toolbar{display:flex;align-items:center;font-size:var(--ha-font-size-xl);height:var(--header-height);padding:8px 12px;pointer-events:none;background-color:var(--app-header-background-color);font-weight:var(--ha-font-weight-normal);color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box}@media (max-width:599px){.toolbar{padding:4px}}ha-icon-button-arrow-prev{pointer-events:auto}.content{color:var(--primary-text-color);height:calc(100% - var(--header-height));display:flex;padding:16px;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}a{color:var(--primary-color)}ha-alert{margin-bottom:16px}`]}constructor(...e){super(...e),this.toolbar=!0,this.rootnav=!1,this.narrow=!1}}(0,s.Cg)([(0,o.MZ)({attribute:!1})],d.prototype,"hass",void 0),(0,s.Cg)([(0,o.MZ)({type:Boolean})],d.prototype,"toolbar",void 0),(0,s.Cg)([(0,o.MZ)({type:Boolean})],d.prototype,"rootnav",void 0),(0,s.Cg)([(0,o.MZ)({type:Boolean})],d.prototype,"narrow",void 0),(0,s.Cg)([(0,o.MZ)()],d.prototype,"error",void 0),d=(0,s.Cg)([(0,o.EM)("hass-error-screen")],d),a()}catch(e){a(e)}})},81310(e,t,i){var a=i(62826),s=i(96196),n=i(44457),o=i(26218),r=i(91926),l=(i(90248),i(2054),i(14503));class c extends s.WF{render(){return s.qy` <div class="toolbar"> <div class="toolbar-content"> ${this.mainPage||history.state?.root?s.qy` <ha-menu-button .hassio="${this.supervisor}" .hass="${this.hass}" .narrow="${this.narrow}"></ha-menu-button> `:this.backPath?s.qy` <a href="${this.backPath}"> <ha-icon-button-arrow-prev .hass="${this.hass}"></ha-icon-button-arrow-prev> </a> `:s.qy` <ha-icon-button-arrow-prev .hass="${this.hass}" @click="${this._backTapped}"></ha-icon-button-arrow-prev> `} <div class="main-title"> <slot name="header">${this.header}</slot> </div> <slot name="toolbar-icon"></slot> </div> </div> <div class="content ha-scrollbar" @scroll="${this._saveScrollPos}"> <slot></slot> </div> <div id="fab"> <slot name="fab"></slot> </div> `}_saveScrollPos(e){this._savedScrollPos=e.target.scrollTop}_backTapped(){this.backCallback?this.backCallback():(0,r.O)()}static get styles(){return[l.dp,s.AH`:host{display:block;height:100%;background-color:var(--primary-background-color);overflow:hidden;position:relative}:host([narrow]){width:100%;position:fixed}.toolbar{background-color:var(--app-header-background-color);padding-top:var(--safe-area-inset-top);padding-right:var(--safe-area-inset-right)}:host([narrow]) .toolbar{padding-left:var(--safe-area-inset-left)}.toolbar-content{display:flex;align-items:center;font-size:var(--ha-font-size-xl);height:var(--header-height);font-weight:var(--ha-font-weight-normal);color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box;padding:8px 12px}.toolbar a{color:var(--sidebar-text-color);text-decoration:none}::slotted([slot=toolbar-icon]),ha-icon-button-arrow-prev,ha-menu-button{display:flex;align-items:center;pointer-events:auto;color:var(--sidebar-icon-color)}.main-title{margin:var(--margin-title);line-height:var(--ha-line-height-normal);min-width:0;flex-grow:1;overflow-wrap:break-word;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.content{position:relative;width:calc(100% - var(--safe-area-inset-right,0px));height:calc(100% - 1px - var(--header-height,0px) - var(--safe-area-inset-top,0px) - var(--hass-subpage-bottom-inset,var(--safe-area-inset-bottom,0px)));margin-bottom:var(--hass-subpage-bottom-inset,var(--safe-area-inset-bottom));margin-right:var(--safe-area-inset-right);overflow-y:auto;overflow:auto;-webkit-overflow-scrolling:touch}:host([narrow]) .content{width:calc(100% - var(--safe-area-inset-left,0px) - var(--safe-area-inset-right,0px));margin-left:var(--safe-area-inset-left)}#fab{position:absolute;right:calc(16px + var(--safe-area-inset-right,0px));inset-inline-end:calc(16px + var(--safe-area-inset-right,0px));inset-inline-start:initial;bottom:calc(16px + var(--safe-area-inset-bottom,0px));z-index:1;display:flex;flex-wrap:wrap;justify-content:flex-end;gap:var(--ha-space-2)}:host([narrow]) #fab.tabs{bottom:calc(84px + var(--safe-area-inset-bottom,0px))}#fab[is-wide]{bottom:calc(24px + var(--safe-area-inset-bottom,0px));right:calc(24px + var(--safe-area-inset-right,0px));inset-inline-end:calc(24px + var(--safe-area-inset-right,0px));inset-inline-start:initial}`]}constructor(...e){super(...e),this.mainPage=!1,this.narrow=!1,this.supervisor=!1}}(0,a.Cg)([(0,n.MZ)({attribute:!1})],c.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)()],c.prototype,"header",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,attribute:"main-page"})],c.prototype,"mainPage",void 0),(0,a.Cg)([(0,n.MZ)({type:String,attribute:"back-path"})],c.prototype,"backPath",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],c.prototype,"backCallback",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,reflect:!0})],c.prototype,"narrow",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean})],c.prototype,"supervisor",void 0),(0,a.Cg)([(0,o.a)(".content")],c.prototype,"_savedScrollPos",void 0),(0,a.Cg)([(0,n.Ls)({passive:!0})],c.prototype,"_saveScrollPos",null),c=(0,a.Cg)([(0,n.EM)("hass-subpage")],c)},34023(e,t,i){i.d(t,{E:()=>s,J:()=>n});var a=i(1087);const s=()=>Promise.all([i.e("44533"),i.e("7199"),i.e("92769"),i.e("44966"),i.e("52242"),i.e("71401"),i.e("50197"),i.e("80445"),i.e("8851"),i.e("19656"),i.e("66201"),i.e("26295"),i.e("88435"),i.e("96055")]).then(i.bind(i,39803)),n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-area-registry-detail",dialogImport:s,dialogParams:t})}},85728(e,t,i){i.a(e,async function(e,t){try{i(44114),i(18111),i(22489),i(7588),i(61701);var a=i(62826),s=i(96196),n=i(44457),o=i(94333),r=i(3890),l=i(81816),c=i(79461),d=i(18350),h=(i(76776),i(88945),i(8630),i(28732),i(59241)),p=i(85694),u=i(42269),g=i(55212),m=i(94225),v=i(12496),_=e([d,m,p]);[d,m,p]=_.then?(await _)():_;class y extends s.WF{shouldUpdate(e){return e.has("hass")&&1===e.size?(this._entityRows.forEach(e=>{e.hass=this.hass}),!1):(this._entityRows=[],!0)}render(){if(!this.entities.length)return s.qy` <ha-card outlined .header="${this.header}"> <div class="empty card-content"> ${this.hass.localize("ui.panel.config.devices.entities.none")} </div> </ha-card> `;const e=[],t=[];return this.entities.forEach(i=>{i.disabled_by?this._extDisabledEntityEntries?t.push(this._extDisabledEntityEntries[i.entity_id]||i):t.push(i):e.push(i)}),s.qy` <ha-card outlined .header="${this.header}"> ${e.length?s.qy` <div id="entities" class="move-up"> <ha-list> ${e.map(e=>this.hass.states[e.entity_id]?this._renderEntity(e):this._renderEntry(e))} </ha-list> </div> `:s.s6} ${t.length?s.qy`<div class="${(0,o.H)({"move-up":!e.length})}"> ${this.showHidden?s.qy` <ha-list> ${t.map(e=>this._renderEntry(e))} </ha-list> <button class="show-more" @click="${this._toggleShowHidden}"> ${this.hass.localize("ui.panel.config.devices.entities.show_less")} </button> `:s.qy` <button class="show-more" @click="${this._toggleShowHidden}"> ${this.hass.localize("ui.panel.config.devices.entities.disabled_entities",{count:t.length})} </button> `} </div>`:s.s6} <div class="card-actions"> <ha-button appearance="plain" @click="${this._addToLovelaceView}"> ${this.hass.localize("ui.panel.config.devices.entities.add_entities_lovelace")} </ha-button> </div> </ha-card> `}_toggleShowHidden(){if(this.showHidden=!this.showHidden,!this.showHidden||void 0!==this._extDisabledEntityEntries)return;this._extDisabledEntityEntries={};const e=this.entities.filter(e=>e.disabled_by),t=async()=>{if(0===e.length)return;const i=e.pop().entity_id,a=await(0,h.v)(this.hass,i);this._extDisabledEntityEntries[i]=a,this.requestUpdate("_extDisabledEntityEntries"),t()};t(),t(),t()}_renderEntity(e){const t={entity:e.entity_id},i=(0,m.T)(t);if(this.hass){i.hass=this.hass;const a=this.hass.states[e.entity_id];let s=(0,l.aH)(a,this.hass.entities,this.hass.devices)||this.deviceName;e.hidden_by&&(s+=` (${this.hass.localize("ui.panel.config.devices.entities.hidden")})`),t.name=s}return i.entry=e,this._entityRows.push(i),s.qy` <div>${i}</div> `}_renderEntry(e){const t=e.stateName||e.name||e.original_name,i=(0,r.T)((0,p.u7)(this.hass,e));return s.qy` <ha-list-item graphic="icon" class="disabled-entry" .entry="${e}" @click="${this._openEditEntry}"> <ha-icon slot="graphic" .icon="${i}"></ha-icon> <div class="name"> ${t?(0,c.p)(t,this.deviceName)||t:e.entity_id} </div> </ha-list-item> `}_openEditEntry(e){const t=e.currentTarget.entry;(0,u.p)(this,{entityId:t.entity_id})}_addToLovelaceView(){const e=this.entities.filter(e=>!e.disabled_by).map(e=>e.entity_id);(0,v.Q)(this,this.hass,(0,g.Bi)(this.hass,e,{title:this.deviceName}),(0,g.ZI)(e,{title:this.deviceName}),e)}constructor(...e){super(...e),this.showHidden=!1,this._entityRows=[]}}y.styles=s.AH`:host{display:block}ha-icon{margin-left:-8px}.entity-id{color:var(--secondary-text-color)}.buttons{text-align:right;margin:0 0 0 8px}.disabled-entry{color:var(--secondary-text-color)}.move-up{margin-top:-13px}.move-up:has(> ha-list){margin-top:-24px}:not(.move-up)>ha-list{margin-top:-24px}.move-up+:not(:has(ha-list))>button.show-more,ha-list+button.show-more{margin-top:-12px}#entities>ha-list{margin:0 16px 0 8px}.name{font-size:var(--ha-font-size-m)}.name:dir(rtl){margin-inline-start:8px}.empty{text-align:center}button.show-more{color:var(--primary-color);text-align:left;cursor:pointer;background:0 0;border-width:initial;border-style:none;border-color:initial;border-image:initial;padding:16px;font:inherit}button.show-more:focus{outline:0;text-decoration:underline}ha-list>*{margin:8px 0px}ha-list-item{height:40px;--mdc-ripple-color:transparent}.card-actions{padding:4px 16px 4px 4px}`,(0,a.Cg)([(0,n.MZ)()],y.prototype,"header",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],y.prototype,"deviceName",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],y.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],y.prototype,"entities",void 0),(0,a.Cg)([(0,n.MZ)({attribute:"show-hidden",type:Boolean})],y.prototype,"showHidden",void 0),(0,a.Cg)([(0,n.wk)()],y.prototype,"_extDisabledEntityEntries",void 0),y=(0,a.Cg)([(0,n.EM)("ha-device-entities-card")],y),t()}catch(e){t(e)}})},31005(e,t,i){i.a(e,async function(e,t){try{i(18111),i(22489),i(61701);var a=i(62826),s=i(96196),n=i(44457),o=i(22786),r=i(78870),l=i(36312),c=i(79),d=i(52220),h=i(31290),p=i(6030),u=(i(76776),i(88945),i(23430)),g=i(92557),m=i(54706),v=i(14503),_=e([u]);u=(_.then?(await _)():_)[0];class y extends((0,m.E)(s.WF)){hassSubscribe(){return[(0,g.o5)(this.hass.connection,e=>{this._labelRegistry=e})]}render(){const{map:e,ids:t}=this._labelsData(this._labelRegistry,this.device.labels,this.hass.locale.language);return s.qy` <ha-card outlined .header="${this.hass.localize("ui.panel.config.devices.device_info",{type:this.hass.localize(`ui.panel.config.devices.type.${this.device.entry_type||"device"}_heading`)})}"> <div class="card-content"> ${this.device.model?s.qy`<div class="model"> ${this.device.model} ${this.device.model_id?s.qy`(${this.device.model_id})`:""} </div>`:this.device.model_id?s.qy`<div class="model">${this.device.model_id}</div>`:""} ${this.device.manufacturer?s.qy` <div class="manuf"> ${this.hass.localize("ui.panel.config.integrations.config_entry.manuf",{manufacturer:this.device.manufacturer})} </div> `:""} ${this.device.via_device_id?s.qy` <div class="extra-info"> ${this.hass.localize("ui.panel.config.integrations.config_entry.via")} <span class="hub"><a href="/config/devices/device/${this.device.via_device_id}">${this._computeDeviceNameDisplay(this.device.via_device_id)}</a></span> </div> `:""} ${this.device.sw_version?s.qy` <div class="extra-info"> ${this.hass.localize("ui.panel.config.integrations.config_entry."+("service"!==this.device.entry_type||this.device.hw_version?"firmware":"version"),{version:this.device.sw_version})} </div> `:""} ${this.device.hw_version?s.qy` <div class="extra-info"> ${this.hass.localize("ui.panel.config.integrations.config_entry.hardware",{version:this.device.hw_version})} </div> `:""} ${this.device.serial_number?s.qy` <div class="extra-info"> ${this.hass.localize("ui.panel.config.integrations.config_entry.serial_number",{serial_number:this.device.serial_number})} </div> `:""} ${this._getAddresses().map(([e,t])=>s.qy` <div class="extra-info"> ${"bluetooth"===e&&(0,l.x)(this.hass,"bluetooth")?s.qy`${(0,h.n)(e)}: <a href="/config/bluetooth/advertisement-monitor?${(0,p.KH)({address:t})}">${t.toUpperCase()}</a>`:"mac"===e&&(0,l.x)(this.hass,"dhcp")?s.qy`MAC: <a href="/config/dhcp?${(0,p.KH)({mac_address:t})}">${t.toUpperCase()}</a>`:s.qy`${"mac"===e?"MAC":(0,h.n)(e)}: ${t.toUpperCase()}`} </div> `)} ${t.length>0?s.qy` <div class="extra-info labels"> ${t.map(t=>{const i=e.get(t),a=i?.color&&"string"==typeof i.color?(0,r.M)(i.color):void 0;return s.qy` <ha-label style="${a?`--color: ${a}`:""}" .description="${i?.description}"> ${i?.icon?s.qy`<ha-icon slot="icon" .icon="${i.icon}"></ha-icon>`:s.s6} ${i?.name||t} </ha-label> `})} </div> `:s.s6} <slot></slot> </div> <slot name="actions"></slot> </ha-card> `}_getAddresses(){return this.device.connections.filter(e=>["mac","bluetooth","zigbee"].includes(e[0]))}_computeDeviceNameDisplay(e){const t=this.hass.devices[e];return t?(0,c.T)(t,this.hass):`<${this.hass.localize("ui.panel.config.integrations.config_entry.unknown_via_device")}>`}static get styles(){return[v.RF,s.AH`:host{display:block}ha-card{flex:1 0 100%;min-width:0}.device{width:30%}.labels{display:flex;flex-wrap:wrap;gap:var(--ha-space-1);width:100%;max-width:100%}.labels ha-label{min-width:0;max-width:100%;flex:0 1 auto}ha-label{--ha-label-background-color:var(--color, var(--grey-color));--ha-label-background-opacity:0.5;--ha-label-text-color:var(--primary-text-color);--ha-label-icon-color:var(--primary-text-color)}.extra-info{margin-top:var(--ha-space-2);word-wrap:break-word}.manuf,.model{color:var(--secondary-text-color);word-wrap:break-word}`]}constructor(...e){super(...e),this.narrow=!1,this._labelsData=(0,o.A)((e,t,i)=>{const a=e?new Map(e.map(e=>[e.label_id,e])):new Map,s=[...t].sort((e,t)=>(0,d.xL)(a.get(e)?.name||e,a.get(t)?.name||t,i));return{map:a,ids:s}})}}(0,a.Cg)([(0,n.MZ)({attribute:!1})],y.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],y.prototype,"device",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean})],y.prototype,"narrow",void 0),(0,a.Cg)([(0,n.wk)()],y.prototype,"_labelRegistry",void 0),y=(0,a.Cg)([(0,n.EM)("ha-device-info-card")],y),t()}catch(e){t(e)}})},97605(e,t,i){i(18111),i(22489),i(61701);var a=i(62826),s=i(96196),n=i(44457),o=i(22786),r=i(79),l=i(52220);i(76776),i(43661),i(28732);class c extends s.WF{render(){const e=this._viaDevices(this.deviceId,this.hass.devices);return 0===e.length?s.s6:s.qy` <ha-card> <h1 class="card-header"> ${this.hass.localize("ui.panel.config.devices.connected_devices.heading")} </h1> ${(this._showAll?e:e.slice(0,10)).map(e=>s.qy` <a href="${`/config/devices/device/${e.id}`}"> <ha-list-item hasMeta> ${(0,r.T)(e,this.hass)} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> </a> `)} ${!this._showAll&&e.length>10?s.qy` <button class="show-more" @click="${this._toggleShowAll}"> ${this.hass.localize("ui.panel.config.devices.connected_devices.show_more",{count:e.length-10})} </button> `:""} </ha-card> `}_toggleShowAll(){this._showAll=!this._showAll}constructor(...e){super(...e),this._showAll=!1,this._viaDevices=(0,o.A)((e,t)=>Object.values(t).filter(t=>t.via_device_id===e).sort((e,t)=>(0,l.SH)((0,r.T)(e,this.hass),(0,r.T)(t,this.hass),this.hass.locale.language)))}}c.styles=s.AH`:host{display:block}.card-header{padding-bottom:0}a{text-decoration:none;color:var(--primary-text-color)}button.show-more{color:var(--primary-color);text-align:left;cursor:pointer;background:0 0;border-width:initial;border-style:none;border-color:initial;border-image:initial;padding:16px;font:inherit}button.show-more:focus{outline:0;text-decoration:underline}`,(0,a.Cg)([(0,n.MZ)({attribute:!1})],c.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],c.prototype,"deviceId",void 0),(0,a.Cg)([(0,n.wk)()],c.prototype,"_showAll",void 0),c=(0,a.Cg)([(0,n.EM)("ha-device-via-devices-card")],c)},49858(e,t,i){i.d(t,{V:()=>n});var a=i(1087);const s=()=>i.e("3507").then(i.bind(i,80830)),n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-device-automation",dialogImport:s,dialogParams:t})}},8872(e,t,i){i.d(t,{F:()=>s,_:()=>n});var a=i(1087);const s=()=>Promise.all([i.e("92769"),i.e("93785"),i.e("44966"),i.e("29986"),i.e("80445"),i.e("66201"),i.e("60470")]).then(i.bind(i,22756)),n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-device-registry-detail",dialogImport:s,dialogParams:t})}},98129(e,t,i){i.a(e,async function(e,t){try{i(44114),i(18111),i(22489),i(20116),i(7588),i(61701),i(13579);var a=i(62826),s=i(16527),n=i(96196),o=i(44457),r=i(32288),l=i(22786),c=i(36312),d=i(46190),h=i(79),p=i(71727),u=i(81816),g=i(69093),m=i(28978),v=i(52220),_=i(80880),y=i(5911),b=(i(72945),i(38962),i(18350)),f=(i(13416),i(26300),i(43661),i(28732),i(67094),i(34127)),w=i(62351),$=i(82e3),x=i(77423),C=i(38911),k=i(44927),A=i(96204),L=i(59241),M=i(95350),H=i(86973),E=i(34884),z=i(71606),V=i(65063),S=i(81023),q=i(28794),I=(i(81310),i(14503)),D=i(44144),Z=i(30039),P=i(89434),T=i(85728),R=i(31005),O=(i(97605),i(49858)),U=i(8872),W=e([b,f,q,P,T,R]);[b,f,q,P,T,R]=W.then?(await W)():W;const F="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",B="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",j="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",N="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",J="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z",G="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z",K="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",Y="M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",Q="M13,3A9,9 0 0,0 4,12H1L4.89,15.89L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3Z",X="M11,13.5V21.5H3V13.5H11M9,15.5H5V19.5H9V15.5M12,2L17.5,11H6.5L12,2M12,5.86L10.08,9H13.92L12,5.86M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13M17.5,15A2.5,2.5 0 0,0 15,17.5A2.5,2.5 0 0,0 17.5,20A2.5,2.5 0 0,0 20,17.5A2.5,2.5 0 0,0 17.5,15Z",ee=3e4;class te extends n.WF{willUpdate(e){super.willUpdate(e),e.has("deviceId")&&(this._deviceActions=[],this._deviceAlerts=[],this._deleteButtons=[],this._diagnosticDownloadLinks=[]),(e.has("deviceId")||e.has("entries"))&&this._fetchData()}firstUpdated(e){super.firstUpdated(e),(0,U.F)()}updated(e){super.updated(e),e.has("deviceId")&&this._findRelated()}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this._deviceAlertsActionsTimeout)}render(){if(!this.hass||!this.deviceId)return n.s6;const e=this.hass.devices[this.deviceId];if(!e)return n.qy` <hass-error-screen .hass="${this.hass}" .error="${this.hass.localize("ui.panel.config.devices.device_not_found")}"></hass-error-screen> `;const t=(0,h.T)(e,this.hass),i=this._integrations(e,this.entries,this.manifests),a=this._entities(this.deviceId,this._entityReg),s=this._entitiesByCategory(a),o=this._batteryEntity(a),l=this._batteryChargingEntity(a),d=o?this.hass.states[o.entity_id]:void 0,p=d?(0,g.t)(d):void 0,u=l?this.hass.states[l.entity_id]:void 0,v=e.area_id?this.hass.areas[e.area_id]:void 0,y=i.map(e=>n.qy`<a slot="actions" href="${`/config/integrations/integration/${e.domain}#config_entry=${e.entry_id}`}"> <ha-list-item graphic="icon" hasMeta> <img slot="graphic" alt="${(0,M.p$)(this.hass.localize,e.domain)}" src="${(0,D.MR)({domain:e.domain,type:"icon",darkOptimized:this.hass.themes?.darkMode})}" crossorigin="anonymous" referrerpolicy="no-referrer" @error="${this._onImageError}" @load="${this._onImageLoad}"> ${(0,M.p$)(this.hass.localize,e.domain)} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> </a>`),b=[...this._deviceActions||[]];Array.isArray(this._diagnosticDownloadLinks)&&b.push(...this._diagnosticDownloadLinks),this._deleteButtons&&b.push(...this._deleteButtons),b.sort((e,t)=>"warning"===e.classes&&"warning"!==t.classes?1:"warning"!==e.classes&&"warning"===t.classes?-1:0);const f=b.shift();e.disabled_by&&y.push(n.qy` <ha-alert alert-type="warning"> ${this.hass.localize("ui.panel.config.devices.enabled_cause",{type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`),cause:this.hass.localize(`ui.panel.config.devices.disabled_by.${e.disabled_by}`)})} </ha-alert> ${"user"===e.disabled_by?n.qy` <div class="card-actions" slot="actions"> <ha-button variant="warning" size="small" @click="${this._enableDevice}"> ${this.hass.localize("ui.common.enable")} </ha-button> </div> `:""} `),this._renderIntegrationInfo(e,i,y);const w=e.disabled_by?this.hass.localize("ui.panel.config.devices.add_prompt_disabled"):this.hass.localize("ui.panel.config.devices.add_prompt_enabled"),$=(0,c.x)(this.hass,"automation")?n.qy` <ha-card outlined> <h1 class="card-header"> ${this.hass.localize("ui.panel.config.devices.automation.automations_heading")} <ha-icon-button @click="${this._showAutomationDialog}" .disabled="${e.disabled_by}" .label="${e.disabled_by?this.hass.localize("ui.panel.config.devices.automation.create_disable",{type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)}):this.hass.localize("ui.panel.config.devices.automation.create",{type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)})}" .path="${Y}"></ha-icon-button> </h1> ${this._related?.automation?.length?n.qy` <div class="items"> ${this._getRelated(this._related).automation.map(e=>{const t=e;return t?n.qy`<a href="${(0,r.J)(t.attributes.id?`/config/automation/edit/${encodeURIComponent(t.attributes.id)}`:`/config/automation/show/${t.entity_id}`)}"> <ha-list-item hasMeta .automation="${t}"> ${(0,m.u)(t)} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> </a>`:n.s6})} </div> `:n.qy` <div class="card-content"> ${this.hass.localize("ui.panel.config.devices.add_prompt",{name:this.hass.localize("ui.panel.config.devices.automation.automations"),type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)})} ${w} </div> `} </ha-card> `:"",x=(0,c.x)(this.hass,"scene")&&a.length?n.qy` <ha-card outlined> <h1 class="card-header"> ${this.hass.localize("ui.panel.config.devices.scene.scenes_heading")} <ha-icon-button @click="${this._createScene}" .disabled="${e.disabled_by}" .label="${e.disabled_by?this.hass.localize("ui.panel.config.devices.scene.create_disable",{type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)}):this.hass.localize("ui.panel.config.devices.scene.create",{type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)})}" .path="${Y}"></ha-icon-button> </h1> ${this._related?.scene?.length?n.qy` <div class="items"> ${this._getRelated(this._related).scene.map(e=>{const t=e;return t&&t.attributes.id?n.qy` <a href="${`/config/scene/edit/${t.attributes.id}`}"> <ha-list-item hasMeta .scene="${t}"> ${(0,m.u)(t)} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> </a> `:n.qy` <ha-list-item .id="scene-${(0,_.Y)(t.entity_id)}" hasMeta .scene="${t}"> ${(0,m.u)(t)} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> <ha-tooltip .for="scene-${(0,_.Y)(t.entity_id)}" placement="left"> ${this.hass.localize("ui.panel.config.devices.cant_edit")} </ha-tooltip> `})} </div> `:n.qy` <div class="card-content"> ${this.hass.localize("ui.panel.config.devices.add_prompt",{name:this.hass.localize("ui.panel.config.devices.scene.scenes"),type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)})} ${w} </div> `} </ha-card> `:"",C=(0,c.x)(this.hass,"script")?n.qy` <ha-card outlined> <h1 class="card-header"> ${this.hass.localize("ui.panel.config.devices.script.scripts_heading")} <ha-icon-button @click="${this._showScriptDialog}" .disabled="${e.disabled_by}" .label="${e.disabled_by?this.hass.localize("ui.panel.config.devices.script.create_disable",{type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)}):this.hass.localize("ui.panel.config.devices.script.create",{type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)})}" .path="${Y}"></ha-icon-button> </h1> ${this._related?.script?.length?n.qy` <div class="items"> ${this._getRelated(this._related).script.map(e=>{const t=e,i=this._entityReg.find(t=>t.entity_id===e.entity_id);let a=`/config/script/show/${t.entity_id}`;return i&&(a=`/config/script/edit/${i.unique_id}`),t?n.qy` <a href="${a}"> <ha-list-item hasMeta .script="${e}"> ${(0,m.u)(t)} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> </a> `:""})} </div> `:n.qy` <div class="card-content"> ${this.hass.localize("ui.panel.config.devices.add_prompt",{name:this.hass.localize("ui.panel.config.devices.script.scripts"),type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)})} ${w} </div> `} </ha-card> `:"";return n.qy`<hass-subpage .hass="${this.hass}" .narrow="${this.narrow}" .header="${t}"> <ha-icon-button slot="toolbar-icon" .path="${K}" @click="${this._showSettings}" .label="${this.hass.localize("ui.panel.config.devices.edit_settings")}"></ha-icon-button> <ha-md-button-menu slot="toolbar-icon"> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.common.menu")}" .path="${j}"></ha-icon-button> <ha-md-menu-item type="link" href="${`/config/entities?historyBack=1&device=${this.deviceId}`}"> <ha-svg-icon .path="${X}" slot="start"></ha-svg-icon> <div slot="headline"> ${this.hass.localize("ui.panel.config.integrations.config_entry.entities",{count:a.length})} </div> <ha-icon-next slot="end"></ha-icon-next> </ha-md-menu-item> <ha-md-divider role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item .clickAction="${this._resetEntityIds}"> <ha-svg-icon slot="start" .path="${Q}"></ha-svg-icon> <div slot="headline"> ${this.hass.localize("ui.panel.config.devices.restore_entity_ids")} </div> </ha-md-menu-item> </ha-md-button-menu> <div class="container"> <div class="header fullwidth"> ${v?n.qy`<div class="header-name"> <a href="/config/areas/area/${v.area_id}">${this.hass.localize("ui.panel.config.integrations.config_entry.area",{area:v.name||"Unnamed Area"})}</a> </div>`:""} <div class="header-right"> ${!d||"binary_sensor"!==p&&isNaN(d.state)?"":n.qy` <div class="battery"> ${"sensor"===p?this.hass.formatEntityState(d):n.s6} <ha-battery-icon .hass="${this.hass}" .batteryStateObj="${d}" .batteryChargingStateObj="${u}"></ha-battery-icon> </div> `} ${i.length?n.qy` <img alt="${(0,M.p$)(this.hass.localize,i[0].domain)}" src="${(0,D.MR)({domain:i[0].domain,type:"logo",darkOptimized:this.hass.themes?.darkMode})}" crossorigin="anonymous" referrerpolicy="no-referrer" @load="${this._onImageLoad}" @error="${this._onImageError}"> `:""} </div> </div> <div class="column"> ${this._deviceAlerts?.length?n.qy` <div> ${this._deviceAlerts.map(e=>n.qy` <ha-alert .alertType="${e.level}"> ${e.text} </ha-alert> `)} </div> `:""} <ha-device-info-card .hass="${this.hass}" .device="${e}"> ${y} ${f||b.length?n.qy` <div class="card-actions" slot="actions"> <ha-button href="${(0,r.J)(f.href)}" rel="${(0,r.J)(f.target?"noreferrer":void 0)}" appearance="plain" target="${(0,r.J)(f.target)}" class="${(0,r.J)(f.classes)}" .variant="${f.classes?.includes("warning")?"danger":"brand"}" .action="${f.action}" @click="${this._deviceActionClicked}"> ${f.label} ${f.icon?n.qy` <ha-svg-icon class="${(0,r.J)(f.classes)}" .path="${f.icon}" slot="start"></ha-svg-icon> `:n.s6} ${f.trailingIcon?n.qy` <ha-svg-icon .path="${f.trailingIcon}" slot="end"></ha-svg-icon> `:n.s6} </ha-button> ${b.length?n.qy` <ha-button-menu> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.common.menu")}" .path="${j}"></ha-icon-button> ${b.map(e=>{const t=n.qy`<ha-list-item class="${(0,r.J)(e.classes)}" .action="${e.action}" @click="${this._deviceActionClicked}" graphic="icon" .hasMeta="${Boolean(e.trailingIcon)}"> ${e.label} ${e.icon?n.qy` <ha-svg-icon class="${(0,r.J)(e.classes)}" .path="${e.icon}" slot="graphic"></ha-svg-icon> `:""} ${e.trailingIcon?n.qy` <ha-svg-icon slot="meta" .path="${e.trailingIcon}"></ha-svg-icon> `:""} </ha-list-item>`;return e.href?n.qy`<a href="${e.href}" target="${(0,r.J)(e.target)}" rel="${(0,r.J)(e.target?"noreferrer":void 0)}">${t} </a>`:t})} </ha-button-menu> `:""} </div> `:""} </ha-device-info-card> ${this.narrow?"":[$,x,C]} </div> <div class="column"> ${["control","sensor","notify","event","assist","config","diagnostic"].map(i=>s[i].length>0||0===a.length&&"control"===i?n.qy` <ha-device-entities-card .hass="${this.hass}" .header="${this.hass.localize(`ui.panel.config.devices.entities.${i}`)}" .deviceName="${t}" .entities="${s[i]}" .showHidden="${null!==e.disabled_by}"> </ha-device-entities-card> `:"")} <ha-device-via-devices-card .hass="${this.hass}" .deviceId="${this.deviceId}"></ha-device-via-devices-card> </div> <div class="column"> ${this.narrow?[$,x,C]:""} ${(0,c.x)(this.hass,"logbook")?n.qy` <ha-card outlined> <h1 class="card-header"> ${this.hass.localize("panel.logbook")} </h1> <ha-logbook .hass="${this.hass}" .time="${this._logbookTime}" .entityIds="${this._entityIds(a)}" .deviceIds="${this._deviceIdInList(this.deviceId)}" virtualize narrow no-icon></ha-logbook> </ha-card> `:""} </div> </div> </hass-subpage>`}_fetchData(){this.deviceId&&this.entries.length&&(this._getDiagnosticButtons(),this._getDeleteActions(),clearTimeout(this._deviceAlertsActionsTimeout),this._getDeviceActions(),this._getDeviceAlerts())}async _getDiagnosticButtons(){const e=this.deviceId;if(!(0,c.x)(this.hass,"diagnostics"))return;const t=this.hass.devices[this.deviceId];if(!t)return;let i=await Promise.all(this._integrations(t,this.entries,this.manifests).map(async e=>{if("loaded"!==e.state)return!1;let t;try{t=await(0,A.g9)(this.hass,e.domain)}catch(e){if("not_found"===e.code)return!1;throw e}return!(!t.handlers.device&&!t.handlers.config_entry)&&{link:t.handlers.device?(0,A.It)(e.entry_id,this.deviceId):(0,A.WV)(e.entry_id),domain:e.domain}}));i=i.filter(Boolean),this.deviceId===e&&i.length>0&&(this._diagnosticDownloadLinks=i.map(e=>({href:e.link,icon:N,action:e=>this._signUrl(e),label:i.length>1?this.hass.localize("ui.panel.config.devices.download_diagnostics_integration",{integration:(0,M.p$)(this.hass.localize,e.domain)}):this.hass.localize("ui.panel.config.devices.download_diagnostics")})))}_getDeleteActions(){const e=this.deviceId,t=this.hass.devices[this.deviceId];if(!t)return;const i=[];this._integrations(t,this.entries,this.manifests).forEach(e=>{"loaded"===e.state&&e.supports_remove_device&&i.push({action:async()=>{if(await(0,V.dk)(this,{text:this._integrations(t,this.entries,this.manifests).length>1?this.hass.localize("ui.panel.config.devices.confirm_delete_integration",{integration:(0,M.p$)(this.hass.localize,e.domain)}):this.hass.localize("ui.panel.config.devices.confirm_delete"),confirmText:this.hass.localize("ui.common.delete"),dismissText:this.hass.localize("ui.common.cancel"),destructive:!0}))try{await(0,k.nO)(this.hass,this.deviceId,e.entry_id)}catch(e){(0,V.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.devices.error_delete"),text:e.message})}},classes:"warning",icon:B,label:this._integrations(t,this.entries,this.manifests).length>1?this.hass.localize("ui.panel.config.devices.delete_device_integration",{integration:(0,M.p$)(this.hass.localize,e.domain)}):this.hass.localize("ui.panel.config.devices.delete_device")})}),this.deviceId===e&&i.length>0&&(this._deleteButtons=i)}async _getDeviceActions(){const e=this.deviceId,t=this.hass.devices[this.deviceId];if(!t)return;const a=[],s=t.configuration_url?.startsWith("homeassistant://")||!1,n=s?t.configuration_url.replace("homeassistant://","/"):t.configuration_url;n&&a.push({href:n,target:s?void 0:"_blank",icon:F,label:this.hass.localize("ui.panel.config.devices.open_configuration_url"),trailingIcon:G});const o=this._entities(this.deviceId,this._entityReg).find(e=>"assist_satellite"===(0,p.m)(e.entity_id)),r=this._integrations(t,this.entries,this.manifests).map(e=>e.domain);if(!r.includes("voip")&&o&&(0,w.KC)(this.hass.states[o.entity_id])&&a.push({action:this._voiceAssistantSetup,label:this.hass.localize("ui.panel.config.devices.set_up_voice_assistant"),icon:J}),r.includes("mqtt")){const e=(await i.e("36284").then(i.bind(i,95959))).getMQTTDeviceActions(this,t);a.push(...e)}if(r.includes("zha")){const e=await i.e("80913").then(i.bind(i,35848)),s=await e.getZHADeviceActions(this,this.hass,t);a.push(...s)}if(r.includes("zwave_js")){const e=await i.e("37471").then(i.bind(i,61026)),s=await e.getZwaveDeviceActions(this,this.hass,t);a.push(...s)}if(r.includes("esphome")){const e=await i.e("45923").then(i.bind(i,55374)),s=await e.getESPHomeDeviceActions(this,this.hass,t);a.push(...s)}if(r.includes("matter")){const s=await i.e("62602").then(i.bind(i,52433)),n=s.getMatterDeviceDefaultActions(this,this.hass,t);a.push(...n),s.getMatterDeviceActions(this,this.hass,t).then(t=>{this.deviceId===e&&(this._deviceActions=[...t,...this._deviceActions||[]])})}this.deviceId===e&&(this._deviceActions=a)}async _getDeviceAlerts(){const e=this.deviceId,t=this.hass.devices[this.deviceId];if(!t)return;const a=[];if(this._integrations(t,this.entries,this.manifests).map(e=>e.domain).includes("zwave_js")){const e=await i.e("19203").then(i.bind(i,10958)),s=await e.getZwaveDeviceAlerts(this.hass,t);a.push(...s)}this.deviceId===e&&(this._deviceAlerts=a,a.length&&(this._deviceAlertsActionsTimeout=window.setTimeout(()=>{this._getDeviceAlerts(),this._getDeviceActions()},ee)))}_computeEntityName(e){const t=this.hass.devices[this.deviceId];return(0,u.cx)(e,this.hass.devices)||(0,h.T)(t,this.hass)}_onImageLoad(e){e.target.style.display="inline-block"}_onImageError(e){e.target.style.display="none"}async _findRelated(){this._related=await(0,z.f)(this.hass,"device",this.deviceId)}_createScene(){const e={};this._entities(this.deviceId,this._entityReg).forEach(t=>{e[t.entity_id]=""}),(0,E.Tx)({entities:e})}_showScriptDialog(){(0,O.V)(this,{device:this.hass.devices[this.deviceId],entityReg:this._entityReg,script:!0})}_showAutomationDialog(){(0,O.V)(this,{device:this.hass.devices[this.deviceId],entityReg:this._entityReg,script:!1})}_renderIntegrationInfo(e,t,a){const s=t.map(e=>e.domain);s.includes("zha")&&(i.e("88330").then(i.bind(i,39057)),a.push(n.qy` <ha-device-info-zha .hass="${this.hass}" .device="${e}"></ha-device-info-zha> `)),s.includes("zwave_js")&&(i.e("77933").then(i.bind(i,13153)),a.push(n.qy` <ha-device-info-zwave_js .hass="${this.hass}" .device="${e}"></ha-device-info-zwave_js> `)),s.includes("matter")&&(i.e("28838").then(i.bind(i,59077)),a.push(n.qy` <ha-device-info-matter .hass="${this.hass}" .device="${e}"></ha-device-info-matter> `))}async _enableDevice(){await(0,k.FB)(this.hass,this.deviceId,{disabled_by:null})}async _signUrl(e){const t=e.currentTarget.getAttribute("href")?e.currentTarget:e.currentTarget.closest("a"),i=await(0,$.e0)(this.hass,t.getAttribute("href"));(0,Z.R)(i.path)}_deviceActionClicked(e){e.currentTarget.action&&(e.preventDefault(),e.currentTarget.action(e))}static get styles(){return[I.RF,n.AH`.container{display:flex;flex-wrap:wrap;margin:auto;max-width:1000px;margin-top:var(--ha-space-8);margin-bottom:var(--ha-space-8)}:host([narrow]) .container{margin-top:0}.card-header{display:flex;align-items:center;justify-content:space-between;padding-bottom:var(--ha-space-3)}.card-header ha-icon-button{margin-right:calc(var(--ha-space-2) * -1);margin-inline-end:calc(var(--ha-space-2) * -1);margin-inline-start:initial;color:var(--primary-color);height:auto;direction:var(--direction)}.device-info{padding:var(--ha-space-4)}h1{margin:0;font-family:var(--ha-font-family-body);-webkit-font-smoothing:var(--ha-font-smoothing);-moz-osx-font-smoothing:var(--ha-moz-osx-font-smoothing);font-size:var(--ha-font-size-2xl);font-weight:var(--ha-font-weight-normal);line-height:var(--ha-line-height-condensed);opacity:var(--dark-primary-opacity)}.header{display:flex;justify-content:space-between}.header-name{display:flex;align-items:center;padding-left:var(--ha-space-2);padding-inline-start:var(--ha-space-2);padding-inline-end:initial;direction:var(--direction)}.column,.fullwidth{padding:var(--ha-space-2);box-sizing:border-box}.column{width:33%;flex-grow:1}.fullwidth{width:100%;flex-grow:1}.header-right{align-self:center}.header-right img{height:30px}.header-right{display:flex}.header-right:first-child{width:100%;justify-content:flex-end}.header-right>:not(:first-child){margin-left:var(--ha-space-4);margin-inline-start:var(--ha-space-4);margin-inline-end:initial;direction:var(--direction)}.battery{align-self:center;align-items:center;display:flex;white-space:nowrap}.column>:not(:first-child){margin-top:var(--ha-space-4)}:host([narrow]) .column{width:100%}a{text-decoration:none;color:var(--primary-color)}ha-card a{color:var(--primary-text-color)}ha-svg-icon[slot=trailingIcon]{display:block;width:18px;height:18px;margin-inline-start:var(--ha-space-2);margin-inline-end:initial}ha-svg-icon[slot=meta]{width:18px;height:18px}.items{padding-bottom:var(--ha-space-4)}ha-card:has(ha-logbook){padding-bottom:var(--ha-card-border-radius,var(--ha-border-radius-lg))}ha-logbook{height:400px}:host([narrow]) ha-logbook{height:235px}.card-actions{display:flex;justify-content:space-between;align-items:center;padding:var(--ha-space-1) var(--ha-space-4) var(--ha-space-1) var(--ha-space-1)}`]}constructor(...e){super(...e),this.narrow=!1,this.isWide=!1,this.showAdvanced=!1,this._diagnosticDownloadLinks=[],this._deleteButtons=[],this._deviceActions=[],this._deviceAlerts=[],this._logbookTime={recent:86400},this._integrations=(0,l.A)((e,t,i)=>{const a={};for(const e of t)a[e.entry_id]=e;const s={};for(const e of i)s[e.domain]=e;const n=e.config_entries.filter(e=>e in a).map(e=>a[e]);return(0,x.JW)(n,e.primary_config_entry)}),this._entities=(0,l.A)((e,t)=>t.filter(t=>t.device_id===e).map(e=>({...e,stateName:this._computeEntityName(e)})).sort((e,t)=>(0,v.xL)(e.stateName||`zzz${e.entity_id}`,t.stateName||`zzz${t.entity_id}`,this.hass.locale.language))),this._getEntitiesSorted=e=>e.sort((e,t)=>(0,v.xL)(e.attributes.friendly_name||`zzz${e.entity_id}`,t.attributes.friendly_name||`zzz${t.entity_id}`,this.hass.locale.language)),this._getRelated=(0,l.A)(e=>({automation:this._getEntitiesSorted((e?.automation??[]).map(e=>this.hass.states[e])),scene:this._getEntitiesSorted((e?.scene??[]).map(e=>this.hass.states[e])),script:this._getEntitiesSorted((e?.script??[]).map(e=>this.hass.states[e]))})),this._deviceIdInList=(0,l.A)(e=>[e]),this._entityIds=(0,l.A)(e=>e.map(e=>e.entity_id)),this._entitiesByCategory=(0,l.A)(e=>{const t=(0,y.$)(e,e=>{const t=(0,p.m)(e.entity_id);return d.gt.includes(t)?"assist":"event"===t||"notify"===t?t:e.entity_category?e.entity_category:d.JF.includes(t)?"sensor":"control"});for(const e of["assist","config","control","diagnostic","event","notify","sensor"])e in t||(t[e]=[]);return t}),this._batteryEntity=(0,l.A)(e=>(0,L.Er)(this.hass,e)),this._batteryChargingEntity=(0,l.A)(e=>(0,L.DW)(this.hass,e)),this._resetEntityIds=()=>{const e=this._entities(this.deviceId,this._entityReg).map(e=>e.entity_id);(0,H._)(this,this.hass,e)},this._showSettings=async()=>{const e=this.hass.devices[this.deviceId];(0,U._)(this,{device:e,updateEntry:async t=>{const i=e.name_by_user||e.name,a=t.name_by_user;if("user"===t.disabled_by&&"user"!==e.disabled_by){for(const i of e.config_entries)if(!Object.values(this.hass.devices).some(t=>t.id!==e.id&&t.config_entries.includes(i))){const e=this.entries.find(e=>e.entry_id===i);if(e&&!e.disabled_by&&await(0,V.dk)(this,{title:this.hass.localize("ui.panel.config.devices.confirm_disable_config_entry_title"),text:this.hass.localize("ui.panel.config.devices.confirm_disable_config_entry_message",{name:e.title}),destructive:!0,confirmText:this.hass.localize("ui.common.yes"),dismissText:this.hass.localize("ui.common.no")})){let e;try{e=await(0,x.XQ)(this.hass,i)}catch(e){return void(0,V.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.integrations.config_entry.disable_error"),text:e.message})}e.require_restart&&(0,V.showAlertDialog)(this,{text:this.hass.localize("ui.panel.config.integrations.config_entry.disable_restart_confirm")}),delete t.disabled_by}}}else null!==t.disabled_by&&"user"!==t.disabled_by&&delete t.disabled_by;try{await(0,k.FB)(this.hass,this.deviceId,t)}catch(e){return void(0,V.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.devices.update_device_error"),text:e.message})}if(!i||!a||i===a)return;const s=this._entities(this.deviceId,this._entityReg).map(e=>{const t=e.name||e.stateName;let s;if(!e.has_entity_name||e.name){if(!e.has_entity_name||e.name!==i&&e.name!==a){if(!t||!t.includes(i))return;s=t.replace(i,a)}else s=null;return(0,L.G_)(this.hass,e.entity_id,{name:s})}});await Promise.all(s)}})},this._voiceAssistantSetup=()=>{(0,S.L)(this,{deviceId:this.deviceId})}}}(0,a.Cg)([(0,o.MZ)({attribute:!1})],te.prototype,"hass",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],te.prototype,"entries",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],te.prototype,"manifests",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],te.prototype,"deviceId",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean,reflect:!0})],te.prototype,"narrow",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"is-wide",type:Boolean})],te.prototype,"isWide",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],te.prototype,"showAdvanced",void 0),(0,a.Cg)([(0,o.wk)()],te.prototype,"_related",void 0),(0,a.Cg)([(0,o.wk)()],te.prototype,"_diagnosticDownloadLinks",void 0),(0,a.Cg)([(0,o.wk)()],te.prototype,"_deleteButtons",void 0),(0,a.Cg)([(0,o.wk)()],te.prototype,"_deviceActions",void 0),(0,a.Cg)([(0,o.wk)()],te.prototype,"_deviceAlerts",void 0),(0,a.Cg)([(0,o.wk)(),(0,s.Fg)({context:C.ih,subscribe:!0})],te.prototype,"_entityReg",void 0),te=(0,a.Cg)([(0,o.EM)("ha-config-device-page")],te),t()}catch(e){t(e)}})},99949(e,t,i){i.a(e,async function(e,t){try{i(44114),i(18111),i(81148),i(22489),i(20116),i(7588),i(61701),i(13579),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(14603),i(47566),i(98721);var a=i(62826),s=i(16527),n=i(96196),o=i(88696),r=i(44457),l=i(22786),c=i(78870),d=i(95747),h=i(93905),p=i(79),u=i(55931),g=i(69093),m=i(66639),v=i(91926),_=i(87710),y=i(86171),b=(i(72945),i(38962),i(13416),i(58349),i(27661),i(52190),i(72644),i(63817)),f=i(138),w=(i(64263),i(26300),i(58491),i(16443),i(82988),i(21489)),$=i(77423),x=i(38911),C=i(77001),k=i(44927),A=i(59241),L=i(92557),M=i(65063),H=(i(72553),i(54706)),E=i(14503),z=i(44144),V=i(34023),S=i(25635),q=(i(5317),i(76559)),I=i(69569),D=e([y,b,f,d]);[y,b,f,d]=D.then?(await D)():D;const Z="M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22 2 17.5 2 12 6.5 2 12 2M12 4C10.1 4 8.4 4.6 7.1 5.7L18.3 16.9C19.3 15.5 20 13.8 20 12C20 7.6 16.4 4 12 4M16.9 18.3L5.7 7.1C4.6 8.4 4 10.1 4 12C4 16.4 7.6 20 12 20C13.9 20 15.6 19.4 16.9 18.3Z",P="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",T="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",R="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",O="M7,10L12,15L17,10H7Z",U="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",W="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z";class F extends((0,H.E)(n.WF)){connectedCallback(){super.connectedCallback(),window.addEventListener("location-changed",this._locationChanged),window.addEventListener("popstate",this._popState)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("location-changed",this._locationChanged),window.removeEventListener("popstate",this._popState)}willUpdate(e){super.willUpdate(e),this.hasUpdated||this._setFiltersFromUrl(),e.has("_selected")&&(this._selectedCanDelete=this._selected.filter(e=>this.hass.devices[e].config_entries.some(e=>this.entries.find(t=>t.entry_id===e)?.supports_remove_device)))}_setFiltersFromUrl(){const e=this._searchParms.get("domain"),t=this._searchParms.get("config_entry"),i=this._searchParms.get("sub_entry"),a=this._searchParms.has("label");(e||t||a)&&(this._filter=history.state?.filter||"",this._filters={"ha-filter-states":{value:[...this._filters["ha-filter-states"]?.value||[],"disabled"],items:void 0},"ha-filter-integrations":{value:e?[e]:[],items:void 0},config_entry:{value:t?[t]:[],items:void 0},sub_entry:{value:i?[i]:[],items:void 0}},this._filterLabel())}_filterLabel(){const e=this._searchParms.get("label");e&&(this._filters={...this._filters,"ha-filter-labels":{value:[e],items:void 0}})}_clearFilter(){this._filters={}}hassSubscribe(){return[(0,L.o5)(this.hass.connection,e=>{this._labels=e})]}render(){const{devicesOutput:e}=this._devicesAndFilterDomains(this.hass.devices,this.entries,this.entities,this.hass.areas,this.manifests,this._filters,this.hass.localize,this._labels),t=this._sizeController.value&&this._sizeController.value<700||!this._sizeController.value&&"docked"===this.hass.dockedSidebar,i=n.qy`${Object.values(this.hass.areas).map(e=>n.qy`<ha-md-menu-item .value="${e.area_id}" .clickAction="${this._handleBulkArea}"> ${e.icon?n.qy`<ha-icon slot="start" .icon="${e.icon}"></ha-icon>`:n.qy`<ha-svg-icon slot="start" .path="${W}"></ha-svg-icon>`} <div slot="headline">${e.name}</div> </ha-md-menu-item>`)} <ha-md-menu-item .value="${null}" .clickAction="${this._handleBulkArea}"> <div slot="headline"> ${this.hass.localize("ui.panel.config.devices.picker.bulk_actions.no_area")} </div> </ha-md-menu-item> <ha-md-divider role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item .clickAction="${this._bulkCreateArea}"> <div slot="headline"> ${this.hass.localize("ui.panel.config.devices.picker.bulk_actions.add_area")} </div> </ha-md-menu-item>`,a=n.qy`${this._labels?.map(e=>{const t=e.color?(0,c.M)(e.color):void 0,i=this._selected.every(t=>this.hass.devices[t]?.labels.includes(e.label_id)),a=!i&&this._selected.some(t=>this.hass.devices[t]?.labels.includes(e.label_id));return n.qy`<ha-md-menu-item .value="${e.label_id}" .action="${i?"remove":"add"}" @click="${this._handleBulkLabel}" keep-open> <ha-checkbox slot="start" .checked="${i}" .indeterminate="${a}" reducedTouchTarget></ha-checkbox> <ha-label style="${t?`--color: ${t}`:""}" .description="${e.description}"> ${e.icon?n.qy`<ha-icon slot="icon" .icon="${e.icon}"></ha-icon>`:n.s6} ${e.name} </ha-label> </ha-md-menu-item>`})} <ha-md-divider role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item .clickAction="${this._bulkCreateLabel}"> <div slot="headline"> ${this.hass.localize("ui.panel.config.labels.add_label")} </div></ha-md-menu-item>`;return n.qy` <hass-tabs-subpage-data-table .hass="${this.hass}" .narrow="${this.narrow}" .backPath="${this._searchParms.has("historyBack")?void 0:"/config"}" .tabs="${S.configSections.devices}" .route="${this.route}" .searchLabel="${this.hass.localize("ui.panel.config.devices.picker.search",{number:e.length})}" .columns="${this._columns(this.hass.localize)}" .data="${e}" selectable .selected="${this._selected.length}" @selection-changed="${this._handleSelectionChanged}" .filter="${this._filter}" has-filters .filters="${Object.values(this._filters).filter(e=>Array.isArray(e.value)?e.value.length:e.value&&Object.values(e.value).some(e=>Array.isArray(e)?e.length:e)).length}" .initialGroupColumn="${this._activeGrouping}" .initialCollapsedGroups="${this._activeCollapsed}" .initialSorting="${this._activeSorting}" .columnOrder="${this._activeColumnOrder}" .hiddenColumns="${this._activeHiddenColumns}" @columns-changed="${this._handleColumnsChanged}" @clear-filter="${this._clearFilter}" @search-changed="${this._handleSearchChange}" @sorting-changed="${this._handleSortingChanged}" @grouping-changed="${this._handleGroupingChanged}" @collapsed-changed="${this._handleCollapseChanged}" @row-click="${this._handleRowClicked}" clickable has-fab class="${this.narrow?"narrow":""}"> <ha-integration-overflow-menu .hass="${this.hass}" slot="toolbar-icon"></ha-integration-overflow-menu> <ha-fab slot="fab" .label="${this.hass.localize("ui.panel.config.devices.add_device")}" extended @click="${this._addDevice}"> <ha-svg-icon slot="icon" .path="${U}"></ha-svg-icon> </ha-fab> ${Array.isArray(this._filters.config_entry?.value)&&this._filters.config_entry?.value.length?n.qy`<ha-alert slot="filter-pane"> ${this.hass.localize("ui.panel.config.devices.filtering_by_config_entry")} ${this.entries?.find(e=>e.entry_id===this._filters.config_entry.value[0])?.title||this._filters.config_entry.value[0]}${1===this._filters.config_entry.value.length&&Array.isArray(this._filters.sub_entry?.value)&&this._filters.sub_entry.value.length?n.qy` (${this._subEntries?.find(e=>e.subentry_id===this._filters.sub_entry.value[0])?.title||this._filters.sub_entry.value[0]})`:n.s6} </ha-alert>`:n.s6} <ha-filter-floor-areas .hass="${this.hass}" type="device" .value="${this._filters["ha-filter-floor-areas"]?.value}" @data-table-filter-changed="${this._filterChanged}" slot="filter-pane" .expanded="${"ha-filter-floor-areas"===this._expandedFilter}" .narrow="${this.narrow}" @expanded-changed="${this._filterExpanded}"></ha-filter-floor-areas> <ha-filter-integrations .hass="${this.hass}" .value="${this._filters["ha-filter-integrations"]?.value}" @data-table-filter-changed="${this._filterChanged}" slot="filter-pane" .expanded="${"ha-filter-integrations"===this._expandedFilter}" .narrow="${this.narrow}" @expanded-changed="${this._filterExpanded}"></ha-filter-integrations> <ha-filter-states .hass="${this.hass}" .value="${this._filters["ha-filter-states"]?.value}" .states="${this._states(this.hass.localize)}" .label="${this.hass.localize("ui.panel.config.devices.picker.state")}" @data-table-filter-changed="${this._filterChanged}" slot="filter-pane" .expanded="${"ha-filter-states"===this._expandedFilter}" .narrow="${this.narrow}" @expanded-changed="${this._filterExpanded}"></ha-filter-states> <ha-filter-labels .hass="${this.hass}" .value="${this._filters["ha-filter-labels"]?.value}" @data-table-filter-changed="${this._filterChanged}" slot="filter-pane" .expanded="${"ha-filter-labels"===this._expandedFilter}" .narrow="${this.narrow}" @expanded-changed="${this._filterExpanded}"></ha-filter-labels> ${this.narrow?n.s6:n.qy`<ha-md-button-menu slot="selection-bar"> <ha-assist-chip slot="trigger" .label="${this.hass.localize("ui.panel.config.automation.picker.bulk_actions.add_label")}"> <ha-svg-icon slot="trailing-icon" .path="${O}"></ha-svg-icon> </ha-assist-chip> ${a} </ha-md-button-menu> ${t?n.s6:n.qy`<ha-md-button-menu slot="selection-bar"> <ha-assist-chip slot="trigger" .label="${this.hass.localize("ui.panel.config.devices.picker.bulk_actions.move_area")}"> <ha-svg-icon slot="trailing-icon" .path="${O}"></ha-svg-icon> </ha-assist-chip> ${i} </ha-md-button-menu>`}`} <ha-md-button-menu has-overflow slot="selection-bar"> ${this.narrow?n.qy`<ha-assist-chip .label="${this.hass.localize("ui.panel.config.automation.picker.bulk_action")}" slot="trigger"> <ha-svg-icon slot="trailing-icon" .path="${O}"></ha-svg-icon> </ha-assist-chip>`:n.qy`<ha-icon-button .path="${R}" .label="${this.hass.localize("ui.panel.config.automation.picker.bulk_action")}" slot="trigger"></ha-icon-button>`} ${this.narrow?n.qy` <ha-sub-menu> <ha-md-menu-item slot="item"> <div slot="headline"> ${this.hass.localize("ui.panel.config.automation.picker.bulk_actions.add_label")} </div> <ha-svg-icon slot="end" .path="${P}"></ha-svg-icon> </ha-md-menu-item> <ha-md-menu slot="menu">${a}</ha-md-menu> </ha-sub-menu>`:n.s6} ${t?n.qy`<ha-sub-menu> <ha-md-menu-item slot="item"> <div slot="headline"> ${this.hass.localize("ui.panel.config.devices.picker.bulk_actions.move_area")} </div> <ha-svg-icon slot="end" .path="${P}"></ha-svg-icon> </ha-md-menu-item> <ha-md-menu slot="menu">${i}</ha-md-menu> </ha-sub-menu> <ha-md-divider role="separator" tabindex="-1"></ha-md-divider>`:n.s6} <ha-md-menu-item .clickAction="${this._deleteSelected}" .disabled="${!this._selectedCanDelete.length}" class="warning"> <ha-svg-icon slot="start" .path="${T}"></ha-svg-icon> <div slot="headline"> ${this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.button")} </div> </ha-md-menu-item> </ha-md-button-menu> </hass-tabs-subpage-data-table> `}async _loadSubEntries(e){this._subEntries=await(0,$.t0)(this.hass,e)}_filterExpanded(e){e.detail.expanded?this._expandedFilter=e.target.localName:this._expandedFilter===e.target.localName&&(this._expandedFilter=void 0)}_filterChanged(e){const t=e.target.localName;this._filters={...this._filters,[t]:e.detail}}_batteryEntity(e,t){const i=(0,A.Er)(this.hass,t[e]||[]);return i?i.entity_id:void 0}_batteryChargingEntity(e,t){const i=(0,A.DW)(this.hass,t[e]||[]);return i?i.entity_id:void 0}_handleRowClicked(e){const t=e.detail.id;this._ignoreLocationChange=!0,(0,v.o)(`/config/devices/device/${t}`)}_handleSearchChange(e){this._filter=e.detail.value,history.replaceState({filter:this._filter},"")}_addDevice(){const{filteredConfigEntry:e,filteredDomains:t}=this._devicesAndFilterDomains(this.hass.devices,this.entries,this.entities,this.hass.areas,this.manifests,this._filters,this.hass.localize,this._labels);1===t.size&&m.x.includes([...t][0])?(0,m.P)(this,this.hass,[...t][0],{config_entry:e?.entry_id}):(0,q.X)(this,{domain:this._searchParms.get("domain")||void 0})}_handleSelectionChanged(e){this._selected=e.detail.value}async _bulkAddArea(e){const t=[];this._selected.forEach(i=>{t.push((0,k.FB)(this.hass,i,{area_id:e}))});const i=await Promise.allSettled(t);if((0,_.$)(i)){const e=(0,_.N)(i);(0,M.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.common.multiselect.failed",{number:e.length}),text:n.qy`<pre>
${e.map(e=>e.reason.message||e.reason.code||e.reason).join("\r\n")}</pre>`})}}async _handleBulkLabel(e){const t=e.currentTarget.value,i=e.currentTarget.action;this._bulkLabel(t,i)}async _bulkLabel(e,t){const i=[];this._selected.forEach(a=>{i.push((0,k.FB)(this.hass,a,{labels:"add"===t?this.hass.devices[a].labels.concat(e):this.hass.devices[a].labels.filter(t=>t!==e)}))});const a=await Promise.allSettled(i);if((0,_.$)(a)){const e=(0,_.N)(a);(0,M.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.common.multiselect.failed",{number:e.length}),text:n.qy`<pre>
${e.map(e=>e.reason.message||e.reason.code||e.reason).join("\r\n")}</pre>`})}}_clearSelection(){this._dataTable.clearSelection()}_handleSortingChanged(e){this._activeSorting=e.detail}_handleGroupingChanged(e){this._activeGrouping=e.detail.value}_handleCollapseChanged(e){this._activeCollapsed=e.detail.value}_handleColumnsChanged(e){this._activeColumnOrder=e.detail.columnOrder,this._activeHiddenColumns=e.detail.hiddenColumns}static get styles(){return[n.AH`:host{display:block}hass-tabs-subpage-data-table{--data-table-row-height:60px}hass-tabs-subpage-data-table.narrow{--data-table-row-height:72px}ha-button-menu{margin-left:8px;margin-inline-start:8px;margin-inline-end:initial}.clear{color:var(--primary-color);padding-left:8px;padding-inline-start:8px;text-transform:uppercase;direction:var(--direction)}ha-assist-chip{--ha-assist-chip-container-shape:10px}ha-md-button-menu ha-assist-chip{--md-assist-chip-trailing-space:8px}ha-label{--ha-label-background-color:var(--color, var(--grey-color));--ha-label-background-opacity:0.5}`,E.RF]}constructor(...e){super(...e),this.narrow=!1,this.isWide=!1,this._searchParms=new URLSearchParams(window.location.search),this._selected=[],this._selectedCanDelete=[],this._filter=history.state?.filter||"",this._filters={},this._sizeController=new o.P(this,{callback:e=>e[0]?.contentRect.width}),this._ignoreLocationChange=!1,this._locationChanged=()=>{this._ignoreLocationChange?this._ignoreLocationChange=!1:window.location.search.substring(1)!==this._searchParms.toString()&&(this._searchParms=new URLSearchParams(window.location.search),this._setFiltersFromUrl())},this._popState=()=>{window.location.search.substring(1)!==this._searchParms.toString()&&(this._searchParms=new URLSearchParams(window.location.search),this._setFiltersFromUrl())},this._states=(0,l.A)(e=>[{value:"disabled",label:e("ui.panel.config.devices.data_table.disabled_by")}]),this._devicesAndFilterDomains=(0,l.A)((e,t,i,a,s,n,o,r)=>{let l=Object.values(e).map(e=>({...e,label_entries:[]}));const c={};for(const e of i)e.device_id&&(e.device_id in c||(c[e.device_id]=[]),c[e.device_id].push(e));const d={};for(const e of t)d[e.entry_id]=e;const h={};for(const e of s)h[e.domain]=e;let g;const m=new Set;Object.entries(n).forEach(([e,i])=>{if("config_entry"===e&&Array.isArray(i.value)&&i.value.length){l=l.filter(e=>e.config_entries.some(e=>i.value.includes(e)));const e=t.filter(e=>e.entry_id&&i.value.includes(e.entry_id));e.forEach(e=>{m.add(e.domain)}),1===e.length&&(g=e[0])}else if("sub_entry"===e&&Array.isArray(i.value)&&i.value.length){if(!Array.isArray(this._filters.config_entry?.value)||1!==this._filters.config_entry.value.length)return;const e=this._filters.config_entry.value[0];l=l.filter(t=>t.config_entries_subentries[e]&&i.value.some(i=>t.config_entries_subentries[e].includes(i))),this._subEntries||this._loadSubEntries(e)}else if("ha-filter-integrations"===e&&Array.isArray(i.value)&&i.value.length){const e=t.filter(e=>i.value.includes(e.domain)).map(e=>e.entry_id);l=l.filter(t=>t.config_entries.some(t=>e.includes(t))),i.value.forEach(e=>m.add(e))}else"ha-filter-labels"===e&&Array.isArray(i.value)&&i.value.length?l=l.filter(e=>e.labels.some(e=>i.value.includes(e))):i.items&&(l=l.filter(e=>i.items.has(e.id)))});const v=n["ha-filter-states"]?.value;v?.length&&v.includes("disabled")||(l=l.filter(e=>!e.disabled_by));return{devicesOutput:l.map(e=>{const t=(0,$.JW)(e.config_entries.filter(e=>e in d).map(e=>d[e]),e.primary_config_entry),i=(r&&e?.labels||[]).map(e=>r.find(t=>t.label_id===e));let s="";if(e.area_id&&a[e.area_id]?.floor_id&&this.hass.floors){const t=a[e.area_id].floor_id;this.hass.floors[t]&&(s=(0,u.X)(this.hass.floors[t]))}return{...e,name:(0,p.T)(e,this.hass,c[e.id]),model:e.model||`<${o("ui.panel.config.devices.data_table.unknown")}>`,manufacturer:e.manufacturer||`<${o("ui.panel.config.devices.data_table.unknown")}>`,area:e.area_id&&a[e.area_id]?a[e.area_id].name:void 0,floor:s,integration:t.length?t.map(e=>o(`component.${e.domain}.title`)||e.domain).join(", "):this.hass.localize("ui.panel.config.devices.data_table.no_integration"),domains:t.map(e=>e.domain),battery_entity:[this._batteryEntity(e.id,c),this._batteryChargingEntity(e.id,c)],battery_level:this.hass.states[this._batteryEntity(e.id,c)||""]?.state,label_entries:i}}),filteredConfigEntry:g,filteredDomains:m}}),this._columns=(0,l.A)(e=>({icon:{title:"",label:e("ui.panel.config.devices.data_table.icon"),type:"icon",moveable:!1,showNarrow:!0,template:e=>e.domains.length?n.qy`<img alt="" crossorigin="anonymous" referrerpolicy="no-referrer" src="${(0,z.MR)({domain:e.domains[0],type:"icon",darkOptimized:this.hass.themes?.darkMode})}">`:""},name:{title:e("ui.panel.config.devices.data_table.device"),main:!0,sortable:!0,filterable:!0,direction:"asc",grows:!0,flex:2,minWidth:"150px",extraTemplate:e=>n.qy` ${e.label_entries.length?n.qy` <ha-data-table-labels .labels="${e.label_entries}"></ha-data-table-labels> `:n.s6} `},area:{title:e("ui.panel.config.devices.data_table.area"),sortable:!0,filterable:!0,groupable:!0,minWidth:"120px",template:e=>e.area||""},floor:{title:e("ui.panel.config.devices.data_table.floor"),sortable:!0,filterable:!0,groupable:!0,minWidth:"120px",defaultHidden:!0},integration:{title:e("ui.panel.config.devices.data_table.integration"),sortable:!0,filterable:!0,groupable:!0,minWidth:"120px"},manufacturer:{title:e("ui.panel.config.devices.data_table.manufacturer"),sortable:!0,filterable:!0,groupable:!0,minWidth:"120px"},model:{title:e("ui.panel.config.devices.data_table.model"),sortable:!0,filterable:!0,minWidth:"120px"},battery_entity:{title:e("ui.panel.config.devices.data_table.battery"),showNarrow:!0,sortable:!0,type:"numeric",maxWidth:"101px",minWidth:"101px",valueColumn:"battery_level",template:e=>{const t=e.battery_entity,i=t&&t[0]?this.hass.states[t[0]]:void 0,a=i?(0,g.t)(i):void 0,s=t&&t[1]?this.hass.states[t[1]]:void 0;return!i||"binary_sensor"!==a&&isNaN(i.state)?"":n.qy` ${"sensor"===a?this.hass.formatEntityState(i):n.s6} <ha-battery-icon .hass="${this.hass}" .batteryStateObj="${i}" .batteryChargingStateObj="${s}"></ha-battery-icon> `}},created_at:{title:e("ui.panel.config.generic.headers.created_at"),defaultHidden:!0,sortable:!0,minWidth:"128px",template:e=>e.created_at?(0,d.ZS)(new Date(1e3*e.created_at),this.hass.locale,this.hass.config):""},modified_at:{title:e("ui.panel.config.generic.headers.modified_at"),defaultHidden:!0,sortable:!0,minWidth:"128px",template:e=>e.modified_at?(0,d.ZS)(new Date(1e3*e.modified_at),this.hass.locale,this.hass.config):""},disabled_by:{title:e("ui.panel.config.devices.picker.state"),type:"icon",defaultHidden:!0,sortable:!0,filterable:!0,minWidth:"80px",maxWidth:"80px",template:e=>e.disabled_by?n.qy` <div tabindex="0" style="display:inline-block;position:relative"> <ha-svg-icon .id="svg-icon-${e.id}" .path="${Z}"></ha-svg-icon> <ha-tooltip .for="svg-icon-${e.id}" placement="left"> ${this.hass.localize("ui.panel.config.entities.picker.status.disabled")} </ha-tooltip> </div> `:""},labels:{title:"",hidden:!0,filterable:!0,template:e=>e.label_entries.map(e=>e.name).join(" ")}})),this._handleBulkArea=e=>{const t=e.value;this._bulkAddArea(t)},this._bulkCreateArea=()=>{(0,V.J)(this,{createEntry:async e=>{const t=await(0,w.L3)(this.hass,e);return this._bulkAddArea(t.area_id),t}})},this._bulkCreateLabel=()=>{(0,I.f)(this,{createEntry:async e=>{const t=await(0,L._9)(this.hass,e);this._bulkLabel(t.label_id,"add")}})},this._deleteSelected=()=>{(0,M.dk)(this,{title:this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.confirm_title"),text:this._selectedCanDelete.length===this._selected.length?this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.confirm_text"):this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.confirm_partly_text",{deletable:this._selectedCanDelete.length,selected:this._selected.length}),confirmText:this.hass.localize("ui.common.delete"),dismissText:this.hass.localize("ui.common.cancel"),destructive:!0,confirm:async()=>{const e=[];this._selectedCanDelete.forEach(t=>{const i=this.hass.devices[t]?.config_entries;i.forEach(i=>{this.entries.find(e=>e.entry_id===i)?.supports_remove_device&&e.push((0,k.nO)(this.hass,t,i))})});const t=await Promise.allSettled(e);(0,_.$)(t)&&(0,M.showAlertDialog)(this,{text:this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.partial_failure"),title:this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.partial_failure_title")}),this._clearSelection()}})}}}(0,a.Cg)([(0,r.MZ)({attribute:!1})],F.prototype,"hass",void 0),(0,a.Cg)([(0,r.MZ)({type:Boolean})],F.prototype,"narrow",void 0),(0,a.Cg)([(0,r.MZ)({attribute:"is-wide",type:Boolean})],F.prototype,"isWide",void 0),(0,a.Cg)([(0,r.MZ)({attribute:!1})],F.prototype,"entries",void 0),(0,a.Cg)([(0,r.wk)()],F.prototype,"_subEntries",void 0),(0,a.Cg)([(0,r.wk)(),(0,s.Fg)({context:x.ih,subscribe:!0})],F.prototype,"entities",void 0),(0,a.Cg)([(0,r.MZ)({attribute:!1})],F.prototype,"manifests",void 0),(0,a.Cg)([(0,r.MZ)({attribute:!1})],F.prototype,"route",void 0),(0,a.Cg)([(0,r.wk)()],F.prototype,"_searchParms",void 0),(0,a.Cg)([(0,r.wk)()],F.prototype,"_selected",void 0),(0,a.Cg)([(0,r.P)("hass-tabs-subpage-data-table",!0)],F.prototype,"_dataTable",void 0),(0,a.Cg)([(0,r.wk)(),(0,h.I)({storage:"sessionStorage",key:"devices-table-search",state:!0,subscribe:!1})],F.prototype,"_filter",void 0),(0,a.Cg)([(0,r.wk)(),(0,h.I)({storage:"sessionStorage",key:"devices-table-filters-full",state:!0,subscribe:!1,serializer:C.i,deserializer:C.D})],F.prototype,"_filters",void 0),(0,a.Cg)([(0,r.wk)()],F.prototype,"_expandedFilter",void 0),(0,a.Cg)([(0,r.wk)()],F.prototype,"_labels",void 0),(0,a.Cg)([(0,h.I)({key:"devices-table-sort",state:!1,subscribe:!1})],F.prototype,"_activeSorting",void 0),(0,a.Cg)([(0,h.I)({key:"devices-table-grouping",state:!1,subscribe:!1})],F.prototype,"_activeGrouping",void 0),(0,a.Cg)([(0,h.I)({key:"devices-table-collapsed",state:!1,subscribe:!1})],F.prototype,"_activeCollapsed",void 0),(0,a.Cg)([(0,h.I)({key:"devices-table-column-order",state:!1,subscribe:!1})],F.prototype,"_activeColumnOrder",void 0),(0,a.Cg)([(0,h.I)({key:"devices-table-hidden-columns",state:!1,subscribe:!1})],F.prototype,"_activeHiddenColumns",void 0),F=(0,a.Cg)([(0,r.EM)("ha-config-devices-dashboard")],F),t()}catch(e){t(e)}})},73692(e,t,i){i.a(e,async function(e,a){try{i.r(t);var s=i(62826),n=i(44457),o=i(77423),r=i(95350),l=i(324),c=i(98129),d=i(99949),h=e([c,d]);[c,d]=h.then?(await h)():h;class p extends l.a{firstUpdated(e){super.firstUpdated(e),this._loadData()}updatePageEl(e){e.hass=this.hass,"device"===this._currentPage&&(e.deviceId=this.routeTail.path.substr(1)),e.entries=this._configEntries,e.manifests=this._manifests,e.narrow=this.narrow,e.isWide=this.isWide,e.showAdvanced=this.showAdvanced,e.route=this.routeTail}async _loadData(){this._configEntries=await(0,o.VN)(this.hass),this._manifests=await(0,r.fK)(this.hass)}constructor(...e){super(...e),this.narrow=!1,this.isWide=!1,this.showAdvanced=!1,this.routerOptions={defaultPage:"dashboard",routes:{dashboard:{tag:"ha-config-devices-dashboard",cache:!0},device:{tag:"ha-config-device-page"}}},this._configEntries=[],this._manifests=[]}}(0,s.Cg)([(0,n.MZ)({attribute:!1})],p.prototype,"hass",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean})],p.prototype,"narrow",void 0),(0,s.Cg)([(0,n.MZ)({attribute:"is-wide",type:Boolean})],p.prototype,"isWide",void 0),(0,s.Cg)([(0,n.MZ)({attribute:!1})],p.prototype,"showAdvanced",void 0),(0,s.Cg)([(0,n.wk)()],p.prototype,"_configEntries",void 0),(0,s.Cg)([(0,n.wk)()],p.prototype,"_manifests",void 0),p=(0,s.Cg)([(0,n.EM)("ha-config-devices")],p),a()}catch(e){a(e)}})},55212(e,t,i){i.d(t,{KT:()=>_,Bi:()=>v,ZI:()=>m,Yp:()=>y});i(44114),i(18111),i(22489),i(20116),i(7588),i(61701),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698);var a=i(46190),s=i(71727),n=i(69093),o=i(28978);var r=i(79461),l=i(52220),c=i(95350),d=i(28669),h=i(24367),p=i(37642);const u=new Set(["ai_task","automation","configurator","device_tracker","event","geo_location","notify","persistent_notification","script","sun","tag","todo","zone",...a.gt]),g=new Set(["backup","mobile_app"]),m=(e,t)=>({type:"grid",cards:e.map(e=>({type:"tile",entity:e,show_entity_picture:["camera","image","person"].includes((0,s.m)(e))||void 0})),...t}),v=(e,t,i,n=!0)=>{const c=[],d=e.states,h=[],u=i.title?i.title.toLowerCase():void 0,g=[];for(const e of t){const t=d[e],i=(0,s.m)(e);if("alarm_control_panel"===i){const t={type:"alarm-panel",entity:e};c.push(t)}else if("camera"===i){const t={type:"picture-entity",entity:e};c.push(t)}else if("image"===i){const t={type:"picture",image_entity:e};c.push(t)}else if("climate"===i){const t={type:"thermostat",entity:e,features:(d[e]?.attributes?.hvac_modes?.length??0)>1?[{type:"climate-hvac-modes",hvac_modes:d[e]?.attributes?.hvac_modes}]:void 0};c.push(t)}else if("humidifier"===i){const t={type:"humidifier",entity:e,features:[{type:"humidifier-toggle"}]};c.push(t)}else if("media_player"===i){const t={type:"media-control",entity:e};c.push(t)}else if("plant"===i){const t={type:"plant-status",entity:e};c.push(t)}else if("weather"===i){const t={type:"weather-forecast",entity:e,show_forecast:!1};c.push(t)}else if(!n||"scene"!==i&&"script"!==i){let i;const a=u&&t&&(i=(0,r.p)((0,o.u)(t),u))?{entity:e,name:i}:e;h.push(a)}else{const i={entity:e,show_icon:!0,show_name:!0};let a;u&&t&&(a=(0,r.p)((0,o.u)(t),u))&&(i.name=a),g.push(i)}}if(h.sort((t,i)=>{const n="string"==typeof t?t:t.entity,r="string"==typeof i?i:i.entity,c=a.JF.includes((0,s.m)(n))?"sensor":"control";return c!==(a.JF.includes((0,s.m)(r))?"sensor":"control")?"sensor"===c?1:-1:(0,l.xL)("string"==typeof t?d[t]?(0,o.u)(d[t]):"":d[t.entity]?(0,p.v)(e,d[t.entity],t.name):"","string"==typeof i?d[i]?(0,o.u)(d[i]):"":d[i.entity]?(0,p.v)(e,d[i.entity],i.name):"")}),0===h.length&&g.length>0)return v(e,t,i,!1);if(h.length>0||g.length>0){const e={type:"entities",entities:h,...i};g.length>0&&(e.footer={type:"buttons",entities:g}),c.unshift(e)}return c.length<2?c:[{type:"grid",square:!1,columns:1,cards:c}]},_=(e,t)=>{const i=[];for(const e of t){const t={type:"entity",entity:e};i.push(t)}return i},y=(e,t,i,a,r,p)=>{const m=e.states,_=e.areas,y=e.devices,b=e.entities,f=((e,t)=>{const i={},a=new Set(Object.values(t).filter(e=>e.entity_category||e.platform&&g.has(e.platform)||e.hidden).map(e=>e.entity_id));for(const t of Object.keys(e)){const s=e[t];u.has((0,n.t)(s))||a.has(s.entity_id)||(i[t]=e[t])}return i})(m,b),w={};for(const e of Object.keys(f)){const t=f[e];t.attributes.order&&(w[e]=t.attributes.order)}const $=((e,t,i,a)=>{const s={...a},n={},o={};for(const a of Object.values(i)){const i=a.area_id||a.device_id&&t[a.device_id]?.area_id;i&&i in e&&a.entity_id in s?(i in n||(n[i]=[]),n[i].push(s[a.entity_id]),delete s[a.entity_id]):a.device_id&&a.device_id in t&&a.entity_id in s&&(a.device_id in o||(o[a.device_id]=[]),o[a.device_id].push(s[a.entity_id]),delete s[a.entity_id])}for(const[e,t]of Object.entries(o))1===t.length&&(s[t[0].entity_id]=t[0],delete o[e]);return{areasWithEntities:n,devicesWithEntities:o,otherEntities:s}})(_,y,b,f);if(a?.hidden)for(const e of a.hidden)delete $.areasWithEntities[e];r&&($.devicesWithEntities={},$.otherEntities={});const x=(e=>{const t=[],i={};return Object.keys(e).forEach(a=>{const n=e[a];"group"===(0,s.m)(a)?t.push(n):i[a]=n}),t.forEach(e=>e.attributes.entity_id.forEach(e=>{delete i[e]})),{groups:t,ungrouped:i}})($.otherEntities);x.groups.sort((e,t)=>w[e.entity_id]-w[t.entity_id]);const C=[];for(const t of x.groups)C.push(...v(e,t.attributes.entity_id,{title:(0,o.u)(t),show_header_toggle:"hidden"!==t.attributes.control}));const k=((e,t,i,a,s)=>{const r={},{localize:p}=e;for(const e of Object.keys(s)){const t=s[e],i=(0,n.t)(t);i in r||(r[i]=[]),r[i].push(t.entity_id)}const u=[];if("person"in r){const e=[];if(1===r.person.length)u.push({type:"entities",entities:r.person});else{let t,i="";for(const a of r.person){const n=s[a];let o=n.attributes.entity_picture;if(!o){if(void 0===t){const e=getComputedStyle(document.body);t=encodeURIComponent(e.getPropertyValue("--light-primary-color").trim()),i=encodeURIComponent((e.getPropertyValue("--text-light-primary-color")||e.getPropertyValue("--primary-text-color")).trim())}o=`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' width='50' height='50' style='background-color:${t}'%3E%3Cg%3E%3Ctext font-family='roboto' x='50%25' y='50%25' text-anchor='middle' stroke='${i}' font-size='1.3em' dy='.3em'%3E${(0,d._2)(n.attributes.friendly_name||"")}%3C/text%3E%3C/g%3E%3C/svg%3E`}e.push({type:"picture-entity",entity:a,aspect_ratio:"1",show_name:!1,image:o})}u.push({type:"grid",square:!0,columns:3,cards:e})}delete r.person}const g=[];for(const e of h.LA)e in r&&(g.push(...r[e]),delete r[e]);const m={};for(const e of Object.keys(r))m[e]=(0,c.p$)(p,e);g.length&&(r._helpers=g,m._helpers=p("ui.panel.lovelace.strategy.original-states.helpers")),Object.keys(r).sort((e,t)=>(0,l.xL)(m[e],m[t])).forEach(t=>{u.push(...v(e,r[t].sort((e,t)=>(0,l.xL)((0,o.u)(s[e]),(0,o.u)(s[t]))),{title:m[t]}))});const _={path:t,title:i,cards:u};return a&&(_.icon=a),_})(e,"default_view","Home",undefined,x.ungrouped),A=[],L=Object.keys(_);if(a?.order){const e=a.order;L.sort((0,l.u1)(e))}for(const t of L){if(!(t in $.areasWithEntities))continue;const i=$.areasWithEntities[t],a=_[t];A.push(...v(e,i.map(e=>e.entity_id),{title:a.name}))}const M=[],H=Object.entries($.devicesWithEntities).sort((e,t)=>{const i=y[e[0]],a=y[t[0]];return(0,l.xL)(i.name_by_user||i.name||"",a.name_by_user||a.name||"")});for(const[i,a]of H){const s=y[i];M.push(...v(e,a.map(e=>e.entity_id),{title:s.name_by_user||s.name||t("ui.panel.config.devices.unnamed_device",{type:t(`ui.panel.config.devices.type.${s.entry_type||"device"}`)})}))}let E;if(i&&!p){const e=i.energy_sources.find(e=>"grid"===e.type);e&&e.flow_from.length>0&&(E={title:t("ui.panel.lovelace.cards.energy.energy_distribution.title_today"),type:"energy-distribution",link_dashboard:!0})}return k.cards.unshift(...A,...C,...E?[E]:[]),k.cards.push(...M),k}},34128(e,t,i){i.d(t,{G9:()=>o,Ni:()=>n,Ue:()=>d,Vd:()=>h,gh:()=>p});var a=i(1087),s=i(45291);const n=e=>{const t=document.createElement("hui-error-card");return customElements.get("hui-error-card")?t.setConfig(e):(Promise.resolve().then(i.bind(i,4397)),customElements.whenDefined("hui-error-card").then(()=>{customElements.upgrade(t),t.setConfig(e)})),t},o=(e,t)=>({type:"error",error:e,origConfig:t}),r=(e,t)=>{const i=document.createElement(e);return i.setConfig(t),i},l=(e,t,a)=>"badge"===e?(e=>{const t=document.createElement("hui-error-badge");return customElements.get("hui-error-badge")?t.setConfig(e):(Promise.all([i.e("22397"),i.e("72130"),i.e("85010"),i.e("99788"),i.e("41532"),i.e("24828"),i.e("34310"),i.e("53480"),i.e("12009"),i.e("67862"),i.e("12751"),i.e("82529"),i.e("3025"),i.e("99143"),i.e("66990"),i.e("88641")]).then(i.bind(i,50655)),customElements.whenDefined("hui-error-badge").then(()=>{customElements.upgrade(t),t.setConfig(e)})),t})(o(t,a)):"heading-badge"===e?(e=>{const t=document.createElement("hui-error-heading-badge");return customElements.get("hui-error-heading-badge")?t.setConfig(e):(Promise.all([i.e("22397"),i.e("72130"),i.e("85010"),i.e("99788"),i.e("41532"),i.e("24828"),i.e("34310"),i.e("53480"),i.e("12009"),i.e("67862"),i.e("12751"),i.e("82529"),i.e("3025"),i.e("99143"),i.e("66990"),i.e("86339")]).then(i.bind(i,13469)),customElements.whenDefined("hui-error-heading-badge").then(()=>{customElements.upgrade(t),t.setConfig(e)})),t})(((e,t)=>({type:"error",error:e,origConfig:t}))(t,a)):n({type:"error",message:t}),c=e=>(0,s.c8)(e)?(0,s.Iu)(e):void 0,d=(e,t,i,a,s,n)=>{try{return h(e,t,i,a,s,n)}catch(i){return console.error(e,t.type,i),l(e,i.message,t)}},h=(e,t,i,s,n,o)=>{if(!t||"object"!=typeof t)throw new Error("Config is not an object");if(!(t.type||o||n&&"entity"in t))throw new Error("No card type configured");const d=t.type?c(t.type):void 0;if(d)return((e,t,i)=>{if(customElements.get(t))return r(t,i);const s=l(e,`Custom element doesn't exist: ${t}.`,i);if(!t.includes("-"))return s;s.style.display="None";const n=window.setTimeout(()=>{s.style.display=""},2e3);return customElements.whenDefined(t).then(()=>{clearTimeout(n),(0,a.r)(s,"ll-rebuild")}),s})(e,d,t);let h;if(n&&!t.type&&t.entity){h=`${n[t.entity.split(".",1)[0]]||n._domain_not_found}-entity`}else h=t.type||o;if(void 0===h)throw new Error("No type specified");const p=`hui-${h}-${e}`;if(s&&h in s)return s[h](),((e,t)=>{if(customElements.get(e))return r(e,t);const i=document.createElement(e);return customElements.whenDefined(e).then(()=>{try{customElements.upgrade(i),(0,a.r)(i,"ll-upgrade"),i.setConfig(t)}catch(e){(0,a.r)(i,"ll-rebuild")}}),i})(p,t);if(i&&i.has(h))return r(p,t);throw new Error(`Unknown type encountered: ${h}`)},p=async(e,t,i,a)=>{const s=c(e);if(s){const e=customElements.get(s);if(e)return e;if(!s.includes("-"))throw new Error(`Custom element not found: ${s}`);return new Promise((e,t)=>{setTimeout(()=>t(new Error(`Custom element not found: ${s}`)),2e3),customElements.whenDefined(s).then(()=>e(customElements.get(s)))})}const n=`hui-${e}-${t}`,o=customElements.get(n);if(i&&i.has(e))return o;if(a&&e in a)return o||a[e]().then(()=>customElements.get(n));throw new Error(`Unknown type: ${e}`)}},94225(e,t,i){i.a(e,async function(e,a){try{i.d(t,{T:()=>b,t:()=>f});i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698);var s=i(99799),n=i(29003),o=i(92055),r=i(19396),l=i(74323),c=i(51199),d=i(43721),h=i(65509),p=i(21659),u=i(82525),g=i(34128),m=e([s,n,o,r,l,c,d,h,p,u]);[s,n,o,r,l,c,d,h,p,u]=m.then?(await m)():m;const v=new Set(["media-player-entity","scene-entity","script-entity","sensor-entity","simple-entity","toggle-entity","button","call-service"]),_={"button-entity":()=>i.e("26846").then(i.bind(i,21869)),"climate-entity":()=>i.e("56995").then(i.bind(i,2798)),"color-entity":()=>i.e("34419").then(i.bind(i,35646)),"cover-entity":()=>i.e("41243").then(i.bind(i,79734)),"date-entity":()=>Promise.all([i.e("44533"),i.e("17418")]).then(i.bind(i,75473)),"datetime-entity":()=>Promise.all([i.e("44533"),i.e("22397"),i.e("34326"),i.e("80557"),i.e("41837"),i.e("98085")]).then(i.bind(i,69690)),"event-entity":()=>Promise.resolve().then(i.bind(i,99799)),"group-entity":()=>i.e("68827").then(i.bind(i,53110)),"input-button-entity":()=>i.e("19825").then(i.bind(i,46472)),"humidifier-entity":()=>i.e("378").then(i.bind(i,53537)),"input-datetime-entity":()=>Promise.all([i.e("44533"),i.e("22397"),i.e("34326"),i.e("83404")]).then(i.bind(i,1391)),"input-number-entity":()=>Promise.all([i.e("44533"),i.e("17600")]).then(i.bind(i,58723)),"input-select-entity":()=>Promise.all([i.e("22397"),i.e("34326"),i.e("25597")]).then(i.bind(i,54596)),"input-text-entity":()=>Promise.all([i.e("44533"),i.e("8086")]).then(i.bind(i,51765)),"lock-entity":()=>i.e("28245").then(i.bind(i,49748)),"number-entity":()=>Promise.all([i.e("44533"),i.e("71523")]).then(i.bind(i,57198)),"select-entity":()=>Promise.all([i.e("22397"),i.e("34326"),i.e("32038")]).then(i.bind(i,78157)),"text-entity":()=>Promise.all([i.e("44533"),i.e("67973")]).then(i.bind(i,58212)),"time-entity":()=>Promise.all([i.e("44533"),i.e("22397"),i.e("34326"),i.e("21209"),i.e("11019")]).then(i.bind(i,87550)),"timer-entity":()=>i.e("94097").then(i.bind(i,6344)),"update-entity":()=>i.e("80275").then(i.bind(i,38238)),"valve-entity":()=>i.e("96654").then(i.bind(i,46493)),conditional:()=>Promise.all([i.e("41532"),i.e("6166")]).then(i.bind(i,80725)),"weather-entity":()=>Promise.all([i.e("12009"),i.e("77547")]).then(i.bind(i,80395)),divider:()=>i.e("45249").then(i.bind(i,38584)),section:()=>i.e("51255").then(i.bind(i,39082)),weblink:()=>i.e("69148").then(i.bind(i,65751)),cast:()=>i.e("10405").then(i.bind(i,96612)),buttons:()=>Promise.all([i.e("61606"),i.e("50777")]).then(i.bind(i,65728)),attribute:()=>Promise.resolve().then(i.bind(i,65509)),text:()=>i.e("95421").then(i.bind(i,3980))},y={_domain_not_found:"simple",alert:"toggle",automation:"toggle",button:"button",climate:"climate",cover:"cover",date:"date",datetime:"datetime",event:"event",fan:"toggle",group:"group",humidifier:"humidifier",input_boolean:"toggle",input_button:"input-button",input_datetime:"input-datetime",input_number:"input-number",input_select:"input-select",input_text:"input-text",light:"toggle",lock:"lock",media_player:"media-player",number:"number",remote:"toggle",scene:"scene",script:"script",select:"select",sensor:"sensor",siren:"toggle",switch:"toggle",text:"text",time:"time",timer:"timer",update:"update",vacuum:"toggle",valve:"valve",water_heater:"climate",weather:"weather"},b=e=>(0,g.Ue)("row",e,v,_,y,void 0),f=e=>(0,g.gh)(e,"row",v,_);a()}catch(e){a(e)}})},12496(e,t,i){i.d(t,{Q:()=>l});i(18111),i(22489);var a=i(35952),s=i(71730),n=i(65063),o=i(57150),r=i(85633);const l=async(e,t,i,l,c)=>{t.loadFragmentTranslation("lovelace");const d=await(0,s.SJ)(t),h=d.filter(e=>"storage"===e.mode),p=t.panels.lovelace?.config?.mode;if("storage"!==p&&!h.length)return void(0,o.Q)(e,{cardConfig:i,entities:c,yaml:!0});let u,g=null;if("storage"===p)try{u=await(0,a.Dz)(t.connection,null,!1)}catch(e){}if(!u&&h.length)for(const e of h)try{u=await(0,a.Dz)(t.connection,e.url_path,!1),g=e.url_path;break}catch(e){}u?h.length||u.views?.length?h.length||1!==u.views.length?(0,r.X)(e,{lovelaceConfig:u,urlPath:g,allowDashboardChange:!0,actionLabel:t.localize("ui.common.next"),dashboards:d,viewSelectedCallback:(s,n,r)=>{(0,o.Q)(e,{cardConfig:i,sectionConfig:l,lovelaceConfig:n,saveConfig:async e=>{try{await(0,a.ql)(t,s,e)}catch{alert(t.localize("ui.panel.lovelace.add_entities.saving_failed"))}},path:[r],entities:c})}}):(0,o.Q)(e,{cardConfig:i,sectionConfig:l,lovelaceConfig:u,saveConfig:async e=>{try{await(0,a.ql)(t,null,e)}catch(e){alert(t.localize("ui.panel.lovelace.add_entities.saving_failed"))}},path:[0],entities:c}):(0,n.showAlertDialog)(e,{text:"You don't have any Lovelace views, first create a view in Lovelace."}):d.length>h.length?(0,o.Q)(e,{cardConfig:i,sectionConfig:l,entities:c,yaml:!0}):(0,n.showAlertDialog)(e,{text:"You don't seem to be in control of any dashboard, please take control first."})}},57150(e,t,i){i.d(t,{Q:()=>n});var a=i(1087);const s=()=>Promise.all([i.e("22397"),i.e("8477"),i.e("72130"),i.e("85010"),i.e("99788"),i.e("21543"),i.e("34995"),i.e("41532"),i.e("24828"),i.e("81556"),i.e("34310"),i.e("53480"),i.e("12009"),i.e("67862"),i.e("55076"),i.e("12751"),i.e("82529"),i.e("48230"),i.e("18052"),i.e("52967")]).then(i.bind(i,78305)),n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"hui-dialog-suggest-card",dialogImport:s,dialogParams:t})}},85633(e,t,i){i.d(t,{X:()=>s});var a=i(1087);const s=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"hui-dialog-select-view",dialogImport:()=>Promise.all([i.e("93785"),i.e("22397"),i.e("34326"),i.e("4939"),i.e("46717")]).then(i.bind(i,54564)),dialogParams:t})}},30039(e,t,i){i.d(t,{R:()=>s,h:()=>n});var a=i(22348);const s=(e,t="")=>{const i=document.createElement("a");i.target="_blank",i.href=e,i.download=t,i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click")),document.body.removeChild(i)},n=e=>!(0,a.V)(e)||!!e.auth.external?.config.downloadFileSupported},22348(e,t,i){i.d(t,{V:()=>s});var a=i(37177);const s=e=>!!e.auth.external&&a.n},37177(e,t,i){i.d(t,{n:()=>a});const a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}};
//# sourceMappingURL=59455.a5f1dd9e6921687e.js.map