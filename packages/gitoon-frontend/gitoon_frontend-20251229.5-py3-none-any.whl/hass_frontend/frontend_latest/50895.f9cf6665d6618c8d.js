export const __rspack_esm_id="50895";export const __rspack_esm_ids=["50895"];export const __webpack_modules__={23528(e,t,s){s.d(t,{$3:()=>m,$O:()=>k,$j:()=>g,ED:()=>a,JE:()=>w,OQ:()=>x,PU:()=>I,Ph:()=>h,Uf:()=>b,W1:()=>u,Wr:()=>_,Z:()=>c,gF:()=>y,iY:()=>f,jU:()=>o,nN:()=>v,p3:()=>d,pJ:()=>p,r_:()=>n,sz:()=>l});s(18111),s(13579);var i=s(28978),r=s(380),a=function(e){return e[e.NONE=0]="NONE",e[e.ARITHMETIC=1]="ARITHMETIC",e[e.CIRCULAR=2]="CIRCULAR",e}({});const o=["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"],n=["L","gal","ft³","m³","CCF","MCF"],c=e=>e.sendMessagePromise({type:"recorder/info"}),d=(e,t)=>e.callWS({type:"recorder/list_statistic_ids",statistic_type:t}),_=(e,t)=>e.callWS({type:"recorder/get_statistics_metadata",statistic_ids:t}),l=(e,t,s,i,r="hour",a,o)=>e.callWS({type:"recorder/statistics_during_period",start_time:t.toISOString(),end_time:s?.toISOString(),statistic_ids:i,period:r,units:a,types:o}),p=(e,t,s,i)=>e.callWS({type:"recorder/statistic_during_period",statistic_id:t,units:i,fixed_period:s.fixed_period?{start_time:s.fixed_period.start instanceof Date?s.fixed_period.start.toISOString():s.fixed_period.start,end_time:s.fixed_period.end instanceof Date?s.fixed_period.end.toISOString():s.fixed_period.end}:void 0,calendar:s.calendar?{..."week"===s.calendar.period?{first_weekday:(0,r.D)(e.locale).substring(0,3)}:{},...s.calendar}:void 0,rolling_window:s.rolling_window}),h=e=>e.callWS({type:"recorder/validate_statistics"}),u=(e,t,s,i)=>e.callWS({type:"recorder/update_statistics_metadata",statistic_id:t,unit_of_measurement:s,unit_class:i}),m=(e,t)=>e.callWS({type:"recorder/clear_statistics",statistic_ids:t}),g=e=>{let t=null;if(!e)return null;for(const s of e)null!==s.change&&void 0!==s.change&&(null===t?t=s.change:t+=s.change);return t},y=(e,t)=>{let s=null;for(const i of t){if(!(i in e))continue;const t=g(e[i]);null!==t&&(null===s?s=t:s+=t)}return s},f=(e,t)=>e.some(e=>void 0!==e[t]&&null!==e[t]),C=["mean","min","max"],S=["sum","state","change"],v=(e,t)=>!(!C.includes(t)||0===e.mean_type)||!(!S.includes(t)||!e.has_sum),b=(e,t,s,i,r)=>{const a=new Date(s).toISOString();return e.callWS({type:"recorder/adjust_sum_statistics",statistic_id:t,start_time:a,adjustment:i,adjustment_unit_of_measurement:r})},k=(e,t,s)=>{const r=e.states[t];return r?(0,i.u)(r):s?.name||t},w=(e,t,s)=>{let i;return t&&(i=e.states[t]?.attributes.unit_of_measurement),void 0===i?s?.statistics_unit_of_measurement:i},x=e=>e.includes(":"),I=e=>e.callWS({type:"recorder/update_statistics_issues"})},62284(e,t,s){s.a(e,async function(e,i){try{s.r(t),s.d(t,{HuiEnergyCompareCard:()=>g});var r=s(62826),a=s(6946),o=s(73983),n=s(96196),c=s(44457),d=s(72487),_=s(38114),l=s(54706),p=s(784),h=(s(38962),s(1087)),u=s(14503),m=e([d,_]);[d,_]=m.then?(await m)():m;class g extends((0,l.E)(n.WF)){getCardSize(){return 1}setConfig(e){this._config=e}hassSubscribe(){return[(0,_.tb)(this.hass,{key:this._config.collection_key}).subscribe(e=>this._update(e))]}shouldUpdate(e){return(0,p.xP)(this,e)||e.size>1||!e.has("hass")}render(){if(!this._startCompare||!this._endCompare)return n.s6;const e=(0,a.c)(this._endCompare,this._startCompare);return n.qy` <ha-alert dismissable @alert-dismissed-clicked="${this._stopCompare}"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_compare.info",{start:n.qy`<b>${(0,d.Yq)(this._start,this.hass.locale,this.hass.config)}${e>0?` -\n          ${(0,d.Yq)(this._end||(0,o.D)(new Date),this.hass.locale,this.hass.config)}`:""}</b>`,end:n.qy`<b>${(0,d.Yq)(this._startCompare,this.hass.locale,this.hass.config)}${e>0?` -\n          ${(0,d.Yq)(this._endCompare,this.hass.locale,this.hass.config)}`:""}</b> <button class="link" @click="${this._changeCompareMode}"> (${this._compareMode===_.lh.PREVIOUS?this.hass.localize("ui.panel.lovelace.cards.energy.energy_compare.compare_previous_year"):this.hass.localize("ui.panel.lovelace.cards.energy.energy_compare.compare_previous_period")}) </button>`})} </ha-alert> `}_changeCompareMode(){const e=(0,_.tb)(this.hass,{key:this._config.collection_key});e.setCompare(this._compareMode===_.lh.PREVIOUS?_.lh.YOY:_.lh.PREVIOUS),e.refresh()}_update(e){this._start=e.start,this._end=e.end,this._startCompare=e.startCompare,this._endCompare=e.endCompare,this._compareMode=e.compareMode;const t=this.hidden;this.hidden=!this._startCompare,t!==this.hidden&&(0,h.r)(this,"card-visibility-changed")}_stopCompare(){const e=(0,_.tb)(this.hass,{key:this._config.collection_key});e.setCompare(_.lh.NONE),e.refresh()}constructor(...e){super(...e),this.hidden=!0,this.connectedWhileHidden=!0,this.hassSubscribeRequiredHostProps=["_config"]}}g.styles=[u.og],(0,r.Cg)([(0,c.MZ)({attribute:!1})],g.prototype,"hass",void 0),(0,r.Cg)([(0,c.wk)()],g.prototype,"_config",void 0),(0,r.Cg)([(0,c.wk)()],g.prototype,"_start",void 0),(0,r.Cg)([(0,c.wk)()],g.prototype,"_end",void 0),(0,r.Cg)([(0,c.wk)()],g.prototype,"_startCompare",void 0),(0,r.Cg)([(0,c.wk)()],g.prototype,"_endCompare",void 0),(0,r.Cg)([(0,c.wk)()],g.prototype,"_compareMode",void 0),(0,r.Cg)([(0,c.MZ)({type:Boolean,reflect:!0})],g.prototype,"hidden",void 0),g=(0,r.Cg)([(0,c.EM)("hui-energy-compare-card")],g),i()}catch(e){i(e)}})},56434(e,t,s){s.d(t,{e:()=>r});var i=s(81977);function r(e,t,s){return(0,i.P)(e,12*t,s)}}};
//# sourceMappingURL=50895.f9cf6665d6618c8d.js.map