export const __rspack_esm_id="66201";export const __rspack_esm_ids=["66201"];export const __webpack_modules__={13467(e,t,i){var a=i(62826),s=i(41216),l=i(78960),o=i(75640),r=i(91735),n=i(43826),c=i(96196),d=i(44457);class h extends s.R{}h.styles=[r.R,n.R,o.R,l.R,c.AH`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--primary-text-color);--md-sys-color-on-secondary-container:var(--primary-text-color);--md-input-chip-container-shape:16px;--md-input-chip-outline-color:var(--outline-color);--md-input-chip-selected-container-color:rgba(
          var(--rgb-primary-text-color),
          0.15
        );--ha-input-chip-selected-container-opacity:1;--md-input-chip-label-text-font:Roboto,sans-serif}::slotted([slot=icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px)}.selected::before{opacity:var(--ha-input-chip-selected-container-opacity)}`],h=(0,a.Cg)([(0,d.EM)("ha-input-chip")],h)},81789(e,t,i){i.a(e,async function(e,t){try{i(18111),i(22489),i(61701),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698);var a=i(62826),s=i(96196),l=i(44457),o=i(22786),r=i(1087),n=i(5904),c=i(92557),d=i(65063),h=i(54706),p=i(69569),u=i(38508),b=(i(67094),e([u]));u=(b.then?(await b)():b)[0];const _="M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z",y="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",m="___ADD_NEW___",v="___NO_LABELS___";class g extends((0,h.E)(s.WF)){async open(){await this.updateComplete,await(this._picker?.open())}hassSubscribe(){return[(0,c.o5)(this.hass.connection,e=>{this._labels=e})]}render(){const e=this.placeholder??this.hass.localize("ui.components.label-picker.label"),t=this._computeValueRenderer(this._labels);return s.qy` <ha-generic-picker .disabled="${this.disabled}" .hass="${this.hass}" .autofocus="${this.autofocus}" .label="${this.label}" .helper="${this.helper}" .notFoundLabel="${this._notFoundLabel}" .emptyLabel="${this.hass.localize("ui.components.label-picker.no_labels")}" .addButtonLabel="${this.hass.localize("ui.components.label-picker.add")}" .placeholder="${e}" .value="${this.value}" .getItems="${this._getItems}" .getAdditionalItems="${this._getAdditionalItems}" .valueRenderer="${t}" .searchKeys="${n.u}" @value-changed="${this._valueChanged}"> <slot .slot="${this._slotNodes?.length?"field":void 0}"></slot> </ha-generic-picker> `}_valueChanged(e){e.stopPropagation();const t=e.detail.value;if(t!==v)if(t){if(t.startsWith(m)){this.hass.loadFragmentTranslation("config");const e=t.substring(m.length);return void(0,p.f)(this,{suggestedName:e,createEntry:async e=>{try{const t=await(0,c._9)(this.hass,e);this._setValue(t.label_id)}catch(e){(0,d.showAlertDialog)(this,{title:this.hass.localize("ui.components.label-picker.failed_create_label"),text:e.message})}}})}this._setValue(t)}else this._setValue(void 0)}_setValue(e){this.value=e,setTimeout(()=>{(0,r.r)(this,"value-changed",{value:e}),(0,r.r)(this,"change")},0)}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._labelMap=(0,o.A)(e=>e?new Map(e.map(e=>[e.label_id,e])):new Map),this._computeValueRenderer=(0,o.A)(e=>t=>{const i=this._labelMap(e).get(t);return i?s.qy` ${i.icon?s.qy`<ha-icon slot="start" .icon="${i.icon}"></ha-icon>`:s.qy`<ha-svg-icon slot="start" .path="${_}"></ha-svg-icon>`} <span slot="headline">${i.name}</span> `:s.qy` <ha-svg-icon slot="start" .path="${_}"></ha-svg-icon> <span slot="headline">${t}</span> `}),this._getLabelsMemoized=(0,o.A)(n.I),this._getItems=()=>this._labels&&0!==this._labels.length?this._getLabelsMemoized(this.hass.states,this.hass.areas,this.hass.devices,this.hass.entities,this._labels,this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.excludeLabels):[{id:v,primary:this.hass.localize("ui.components.label-picker.no_labels"),icon_path:_}],this._allLabelNames=(0,o.A)(e=>e?[...new Set(e.map(e=>e.name.toLowerCase()).filter(Boolean))]:[]),this._getAdditionalItems=e=>{if(this.noAdd)return[];const t=this._allLabelNames(this._labels);return e&&!t.includes(e.toLowerCase())?[{id:m+e,primary:this.hass.localize("ui.components.label-picker.add_new_sugestion",{name:e}),icon_path:y}]:[{id:m,primary:this.hass.localize("ui.components.label-picker.add_new"),icon_path:y}]},this._notFoundLabel=e=>this.hass.localize("ui.components.label-picker.no_match",{term:s.qy`<b>‘${e}’</b>`})}}(0,a.Cg)([(0,l.MZ)({attribute:!1})],g.prototype,"hass",void 0),(0,a.Cg)([(0,l.MZ)()],g.prototype,"label",void 0),(0,a.Cg)([(0,l.MZ)()],g.prototype,"value",void 0),(0,a.Cg)([(0,l.MZ)()],g.prototype,"helper",void 0),(0,a.Cg)([(0,l.MZ)()],g.prototype,"placeholder",void 0),(0,a.Cg)([(0,l.MZ)({type:Boolean,attribute:"no-add"})],g.prototype,"noAdd",void 0),(0,a.Cg)([(0,l.MZ)({type:Array,attribute:"include-domains"})],g.prototype,"includeDomains",void 0),(0,a.Cg)([(0,l.MZ)({type:Array,attribute:"exclude-domains"})],g.prototype,"excludeDomains",void 0),(0,a.Cg)([(0,l.MZ)({type:Array,attribute:"include-device-classes"})],g.prototype,"includeDeviceClasses",void 0),(0,a.Cg)([(0,l.MZ)({type:Array,attribute:"exclude-label"})],g.prototype,"excludeLabels",void 0),(0,a.Cg)([(0,l.MZ)({attribute:!1})],g.prototype,"deviceFilter",void 0),(0,a.Cg)([(0,l.MZ)({attribute:!1})],g.prototype,"entityFilter",void 0),(0,a.Cg)([(0,l.MZ)({type:Boolean})],g.prototype,"disabled",void 0),(0,a.Cg)([(0,l.MZ)({type:Boolean})],g.prototype,"required",void 0),(0,a.Cg)([(0,l.wk)()],g.prototype,"_labels",void 0),(0,a.Cg)([(0,l.KN)({flatten:!0})],g.prototype,"_slotNodes",void 0),(0,a.Cg)([(0,l.P)("ha-generic-picker")],g.prototype,"_picker",void 0),g=(0,a.Cg)([(0,l.EM)("ha-label-picker")],g),t()}catch(e){t(e)}})},50176(e,t,i){i.a(e,async function(e,t){try{i(18111),i(22489),i(7588),i(61701);var a=i(62826),s=i(96196),l=i(44457),o=i(4937),r=i(22786),n=i(78870),c=i(1087),d=i(52220),h=i(92557),p=i(54706),u=i(69569),b=(i(5745),i(13467),i(81789)),_=i(34127),y=e([b,_]);[b,_]=y.then?(await y)():y;const m="M3 16H10V14H3M18 14V10H16V14H12V16H16V20H18V16H22V14M14 6H3V8H14M14 10H3V12H14V10Z";class v extends((0,p.E)(s.WF)){async open(){await this.updateComplete,await(this.labelPicker?.open())}async focus(){await this.updateComplete,await(this.labelPicker?.focus())}hassSubscribe(){return[(0,h.o5)(this.hass.connection,e=>{const t={};e.forEach(e=>{t[e.label_id]=e}),this._labels=t})]}render(){const e=this._sortedLabels(this.value,this._labels,this.hass.locale.language);return s.qy` ${this.label?s.qy`<label>${this.label}</label>`:s.s6} <ha-label-picker .hass="${this.hass}" .helper="${this.helper}" .disabled="${this.disabled}" .required="${this.required}" .placeholder="${this.placeholder}" .excludeLabels="${this.value}" @value-changed="${this._labelChanged}"> <ha-chip-set> ${e?.length?(0,o.u)(e,e=>e?.label_id,e=>{if(!e)return s.s6;const t=e.color?(0,n.M)(e.color):void 0,i="label-"+e.label_id;return s.qy` <ha-tooltip .for="${i}" .disabled="${!e.description?.trim()}"> ${e.description} </ha-tooltip> <ha-input-chip .item="${e}" .id="${i}" @remove="${this._removeItem}" @click="${this._openDetail}" .disabled="${this.disabled}" .label="${e.name}" selected="selected" style="${t?`--color: ${t}`:""}"> ${e.icon?s.qy`<ha-icon slot="icon" .icon="${e.icon}"></ha-icon>`:s.s6} </ha-input-chip> `}):s.s6} <ha-button id="picker" size="small" appearance="filled" @click="${this._openPicker}" .disabled="${this.disabled}"> <ha-svg-icon .path="${m}" slot="start"></ha-svg-icon> ${this.hass.localize("ui.components.label-picker.add")} </ha-button> </ha-chip-set> </ha-label-picker> `}get _value(){return this.value||[]}_removeItem(e){const t=e.currentTarget.item;this._setValue(this._value.filter(e=>e!==t.label_id))}_openDetail(e){const t=e.currentTarget.item;(0,u.f)(this,{entry:t,updateEntry:async e=>{await(0,h.Rp)(this.hass,t.label_id,e)}})}_labelChanged(e){e.stopPropagation();const t=e.detail.value;t&&!this._value.includes(t)&&(this._setValue([...this._value,t]),this.labelPicker.value="")}_setValue(e){this.value=e,setTimeout(()=>{(0,c.r)(this,"value-changed",{value:e}),(0,c.r)(this,"change")},0)}_openPicker(e){e.stopPropagation(),this.labelPicker.open()}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._sortedLabels=(0,r.A)((e,t,i)=>e?.map(e=>t?.[e]).sort((e,t)=>(0,d.xL)(e?.name||"",t?.name||"",i)))}}v.styles=s.AH`ha-chip-set{background-color:var(--mdc-text-field-fill-color);border-bottom:1px solid var(--ha-color-border-neutral-normal);border-top-right-radius:var(--ha-border-radius-sm);border-top-left-radius:var(--ha-border-radius-sm);padding:var(--ha-space-3)}.placeholder{color:var(--mdc-text-field-label-ink-color);display:flex;align-items:center;height:var(--ha-space-8)}ha-input-chip{--md-input-chip-selected-container-color:var(--color, var(--grey-color));--ha-input-chip-selected-container-opacity:0.5;--md-input-chip-selected-outline-width:1px}label{display:block;margin:0 0 8px}`,(0,a.Cg)([(0,l.MZ)({attribute:!1})],v.prototype,"hass",void 0),(0,a.Cg)([(0,l.MZ)()],v.prototype,"label",void 0),(0,a.Cg)([(0,l.MZ)({attribute:!1})],v.prototype,"value",void 0),(0,a.Cg)([(0,l.MZ)()],v.prototype,"helper",void 0),(0,a.Cg)([(0,l.MZ)()],v.prototype,"placeholder",void 0),(0,a.Cg)([(0,l.MZ)({type:Boolean,attribute:"no-add"})],v.prototype,"noAdd",void 0),(0,a.Cg)([(0,l.MZ)({type:Array,attribute:"include-domains"})],v.prototype,"includeDomains",void 0),(0,a.Cg)([(0,l.MZ)({type:Array,attribute:"exclude-domains"})],v.prototype,"excludeDomains",void 0),(0,a.Cg)([(0,l.MZ)({type:Array,attribute:"include-device-classes"})],v.prototype,"includeDeviceClasses",void 0),(0,a.Cg)([(0,l.MZ)({type:Array,attribute:"exclude-label"})],v.prototype,"excludeLabels",void 0),(0,a.Cg)([(0,l.MZ)({attribute:!1})],v.prototype,"deviceFilter",void 0),(0,a.Cg)([(0,l.MZ)({attribute:!1})],v.prototype,"entityFilter",void 0),(0,a.Cg)([(0,l.MZ)({type:Boolean})],v.prototype,"disabled",void 0),(0,a.Cg)([(0,l.MZ)({type:Boolean})],v.prototype,"required",void 0),(0,a.Cg)([(0,l.wk)()],v.prototype,"_labels",void 0),(0,a.Cg)([(0,l.P)("ha-label-picker",!0)],v.prototype,"labelPicker",void 0),v=(0,a.Cg)([(0,l.EM)("ha-labels-picker")],v),t()}catch(e){t(e)}})},5904(e,t,i){i.d(t,{I:()=>o,u:()=>l});i(18111),i(81148),i(22489),i(7588),i(61701),i(13579),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698);var a=i(71727),s=i(44927);const l=[{name:"search_labels.name",weight:10},{name:"search_labels.description",weight:5},{name:"search_labels.id",weight:4}],o=(e,t,i,l,o,r,n,c,d,h,p,u="")=>{if(!o||0===o.length)return[];const b=Object.values(i),_=Object.values(l);let y,m,v={};(r||n||c||d||h)&&(v=(0,s.g2)(_),y=b,m=_.filter(e=>e.labels.length>0),r&&(y=y.filter(e=>{const t=v[e.id];return!(!t||!t.length)&&v[e.id].some(e=>r.includes((0,a.m)(e.entity_id)))}),m=m.filter(e=>r.includes((0,a.m)(e.entity_id)))),n&&(y=y.filter(e=>{const t=v[e.id];return!t||!t.length||_.every(e=>!n.includes((0,a.m)(e.entity_id)))}),m=m.filter(e=>!n.includes((0,a.m)(e.entity_id)))),c&&(y=y.filter(t=>{const i=v[t.id];return!(!i||!i.length)&&v[t.id].some(t=>{const i=e[t.entity_id];return!!i&&(i.attributes.device_class&&c.includes(i.attributes.device_class))})}),m=m.filter(t=>{const i=e[t.entity_id];return i&&i.attributes.device_class&&c.includes(i.attributes.device_class)})),d&&(y=y.filter(e=>d(e))),h&&(y=y.filter(t=>{const i=v[t.id];return!(!i||!i.length)&&v[t.id].some(t=>{const i=e[t.entity_id];return!!i&&h(i)})}),m=m.filter(t=>{const i=e[t.entity_id];return!!i&&h(i)})));let g=o;const f=new Set;let C;y&&(C=y.filter(e=>e.area_id).map(e=>e.area_id),y.forEach(e=>{e.labels.forEach(e=>f.add(e))})),m&&(C=(C??[]).concat(m.filter(e=>e.area_id).map(e=>e.area_id)),m.forEach(e=>{e.labels.forEach(e=>f.add(e))})),C&&C.forEach(e=>{const i=t[e];i?.labels.forEach(e=>f.add(e))}),p&&(g=g.filter(e=>!p.includes(e.label_id))),(y||m)&&(g=g.filter(e=>f.has(e.label_id)));return g.map(e=>({id:`${u}${e.label_id}`,primary:e.name,secondary:e.description??"",icon:e.icon||void 0,icon_path:e.icon?void 0:"M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z",sorting_label:e.name,search_labels:{name:e.name,description:e.description,id:e.label_id}}))}}};
//# sourceMappingURL=66201.0e62309f31e09c5a.js.map