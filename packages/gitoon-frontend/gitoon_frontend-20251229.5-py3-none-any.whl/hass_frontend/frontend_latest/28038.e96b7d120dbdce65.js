export const __rspack_esm_id="28038";export const __rspack_esm_ids=["28038"];export const __webpack_modules__={23528(t,e,i){i.d(e,{$3:()=>p,$O:()=>S,$j:()=>g,ED:()=>r,JE:()=>C,OQ:()=>k,PU:()=>D,Ph:()=>_,Uf:()=>w,W1:()=>m,Wr:()=>d,Z:()=>c,gF:()=>f,iY:()=>y,jU:()=>o,nN:()=>x,p3:()=>l,pJ:()=>u,r_:()=>n,sz:()=>h});i(18111),i(13579);var a=i(28978),s=i(380),r=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({});const o=["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"],n=["L","gal","ft³","m³","CCF","MCF"],c=t=>t.sendMessagePromise({type:"recorder/info"}),l=(t,e)=>t.callWS({type:"recorder/list_statistic_ids",statistic_type:e}),d=(t,e)=>t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e}),h=(t,e,i,a,s="hour",r,o)=>t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:i?.toISOString(),statistic_ids:a,period:s,units:r,types:o}),u=(t,e,i,a)=>t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:a,fixed_period:i.fixed_period?{start_time:i.fixed_period.start instanceof Date?i.fixed_period.start.toISOString():i.fixed_period.start,end_time:i.fixed_period.end instanceof Date?i.fixed_period.end.toISOString():i.fixed_period.end}:void 0,calendar:i.calendar?{..."week"===i.calendar.period?{first_weekday:(0,s.D)(t.locale).substring(0,3)}:{},...i.calendar}:void 0,rolling_window:i.rolling_window}),_=t=>t.callWS({type:"recorder/validate_statistics"}),m=(t,e,i,a)=>t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:i,unit_class:a}),p=(t,e)=>t.callWS({type:"recorder/clear_statistics",statistic_ids:e}),g=t=>{let e=null;if(!t)return null;for(const i of t)null!==i.change&&void 0!==i.change&&(null===e?e=i.change:e+=i.change);return e},f=(t,e)=>{let i=null;for(const a of e){if(!(a in t))continue;const e=g(t[a]);null!==e&&(null===i?i=e:i+=e)}return i},y=(t,e)=>t.some(t=>void 0!==t[e]&&null!==t[e]),v=["mean","min","max"],b=["sum","state","change"],x=(t,e)=>!(!v.includes(e)||0===t.mean_type)||!(!b.includes(e)||!t.has_sum),w=(t,e,i,a,s)=>{const r=new Date(i).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:r,adjustment:a,adjustment_unit_of_measurement:s})},S=(t,e,i)=>{const s=t.states[e];return s?(0,a.u)(s):i?.name||e},C=(t,e,i)=>{let a;return e&&(a=t.states[e]?.attributes.unit_of_measurement),void 0===a?i?.statistics_unit_of_measurement:a},k=t=>t.includes(":"),D=t=>t.callWS({type:"recorder/update_statistics_issues"})},51687(t,e,i){i.a(t,async function(t,a){try{i.r(e),i.d(e,{HuiHomeSummaryCard:()=>k});i(18111),i(22489),i(61701);var s=i(62826),r=i(35932),o=i(73983),n=i(96196),c=i(44457),l=i(94333),d=i(32288),h=i(6415),u=i(78870),_=i(91069),m=i(71727),p=i(4423),g=i(20058),f=(i(76776),i(88945),i(54276),i(80933),i(32248),i(38114)),y=i(54706),v=i(19037),b=i(37544),x=i(97176),w=i(8537),S=t([_,g,f,w]);[_,g,f,w]=S.then?(await S)():S;const C={light:"amber",climate:"deep-orange",security:"blue-grey",media_players:"blue",energy:"amber"};class k extends((0,y.E)(n.WF)){hassSubscribe(){if("energy"!==this._config?.summary)return[];const t=(0,f.tb)(this.hass,{key:"energy_home_dashboard"});return t.setPeriod((0,_.ol)(new Date,r.o,this.hass.locale,this.hass.config),(0,_.ol)(new Date,o.D,this.hass.locale,this.hass.config)),[t.subscribe(t=>{this._energyData=t})]}setConfig(t){this._config=t}getCardSize(){return this._config?.vertical?2:1}getGridOptions(){let t=6,e=1;return this._config?.vertical&&(e++,t=3),{columns:6,rows:e,min_columns:t,min_rows:e}}_handleAction(t){(0,b.$)(this,this.hass,this._config,t.detail.action)}get _hasCardAction(){return(0,x.h)(this._config?.tap_action)||(0,x.h)(this._config?.hold_action)||(0,x.h)(this._config?.double_tap_action)}_computeSummaryState(){if(!this._config||!this.hass)return"";const t=Object.keys(this.hass.states),e=Object.values(this.hass.areas);switch(this._config.summary){case"light":{const e=w.vV.light.map(t=>(0,p.r)(this.hass,t)),i=(0,p.B)(t,e).filter(t=>{const e=this.hass.states[t]?.state;return"on"===e});return i.length?this.hass.localize("ui.card.home-summary.count_lights_on",{count:i.length}):this.hass.localize("ui.card.home-summary.all_lights_off")}case"climate":{const t=e.map(t=>t.temperature_entity_id).filter(Boolean).map(t=>parseFloat(this.hass.states[t]?.state)||NaN).filter(t=>!isNaN(t));if(0===t.length)return"";const i=Math.min(...t),a=Math.max(...t);if(isNaN(i)||isNaN(a))return"";const s=(0,g.ZV)(i,this.hass?.locale,{minimumFractionDigits:1,maximumFractionDigits:1}),r=(0,g.ZV)(a,this.hass?.locale,{minimumFractionDigits:1,maximumFractionDigits:1});return s===r?`${s}°`:`${s} - ${r}°`}case"security":{const e=w.vV.security.map(t=>(0,p.r)(this.hass,t)),i=(0,p.B)(t,e),a=i.filter(t=>"lock"===(0,m.m)(t)),s=i.filter(t=>"alarm_control_panel"===(0,m.m)(t)),r=s.filter(t=>{const e=this.hass.states[t]?.state;return"disarmed"===e});if(!a.length&&!s.length)return"";const o=a.filter(t=>{const e=this.hass.states[t]?.state;return"unlocked"===e||"jammed"===e||"open"===e});return o.length?this.hass.localize("ui.card.home-summary.count_locks_unlocked",{count:o.length}):r.length?this.hass.localize("ui.card.home-summary.count_alarms_disarmed",{count:r.length}):this.hass.localize("ui.card.home-summary.all_secure")}case"media_players":{const e=w.vV.media_players.map(t=>(0,p.r)(this.hass,t)),i=(0,p.B)(t,e).filter(t=>{const e=this.hass.states[t]?.state;return"playing"===e});return i.length?this.hass.localize("ui.card.home-summary.count_media_playing",{count:i.length}):this.hass.localize("ui.card.home-summary.no_media_playing")}case"energy":{if(!this._energyData)return"";const{summedData:t}=(0,f.gv)(this._energyData),{consumption:e}=(0,f.DR)(t,void 0),i=e.total.used_total;return(0,f.n3)(this.hass,i,"kWh")}}return""}render(){if(!this._config||!this.hass)return n.s6;const t={vertical:Boolean(this._config.vertical)},e={"--tile-color":(0,u.M)(C[this._config.summary])},i=this._computeSummaryState(),a=(0,w.rh)(this.hass.localize,this._config.summary),s=w.It[this._config.summary];return n.qy` <ha-card style="${(0,h.W)(e)}"> <div class="background" @action="${this._handleAction}" .actionHandler="${(0,v.T)({hasHold:(0,x.h)(this._config.hold_action),hasDoubleClick:(0,x.h)(this._config.double_tap_action)})}" role="${(0,d.J)(this._hasCardAction?"button":void 0)}" tabindex="${(0,d.J)(this._hasCardAction?"0":void 0)}" aria-labelledby="info"> <ha-ripple .disabled="${!this._hasCardAction}"></ha-ripple> </div> <div class="container"> <div class="content ${(0,l.H)(t)}"> <ha-tile-icon> <ha-icon slot="icon" .icon="${s}"></ha-icon> </ha-tile-icon> <ha-tile-info id="info" .primary="${a}" .secondary="${i}"></ha-tile-info> </div> </div> </ha-card> `}constructor(...t){super(...t),this.hassSubscribeRequiredHostProps=["_config"]}}k.styles=n.AH`:host{--tile-color:var(--state-inactive-color);-webkit-tap-highlight-color:transparent}ha-card:has(.background:focus-visible){--shadow-default:var(--ha-card-box-shadow, 0 0 0 0 transparent);--shadow-focus:0 0 0 1px var(--tile-color);border-color:var(--tile-color);box-shadow:var(--shadow-default),var(--shadow-focus)}ha-card{--ha-ripple-color:var(--tile-color);--ha-ripple-hover-opacity:0.04;--ha-ripple-pressed-opacity:0.12;height:100%;transition:box-shadow 180ms ease-in-out,border-color 180ms ease-in-out;display:flex;flex-direction:column;justify-content:space-between}ha-card.active{--tile-color:var(--state-icon-color)}[role=button]{cursor:pointer;pointer-events:auto}[role=button]:focus{outline:0}.background{position:absolute;top:0;left:0;bottom:0;right:0;border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));margin:calc(-1 * var(--ha-card-border-width,1px));overflow:hidden}.container{margin:calc(-1 * var(--ha-card-border-width,1px));display:flex;flex-direction:column;flex:1}.container.horizontal{flex-direction:row}.content{position:relative;display:flex;flex-direction:row;align-items:center;padding:10px;flex:1;min-width:0;box-sizing:border-box;pointer-events:none;gap:10px}.vertical{flex-direction:column;text-align:center;justify-content:center}.vertical ha-tile-info{width:100%;flex:none}ha-tile-icon{--tile-icon-color:var(--tile-color);position:relative;padding:6px;margin:-6px}ha-tile-info{position:relative;min-width:0;transition:background-color 180ms ease-in-out;box-sizing:border-box}`,(0,s.Cg)([(0,c.MZ)({attribute:!1})],k.prototype,"hass",void 0),(0,s.Cg)([(0,c.wk)()],k.prototype,"_config",void 0),(0,s.Cg)([(0,c.wk)()],k.prototype,"_energyData",void 0),k=(0,s.Cg)([(0,c.EM)("hui-home-summary-card")],k),a()}catch(t){a(t)}})},56434(t,e,i){i.d(e,{e:()=>s});var a=i(81977);function s(t,e,i){return(0,a.P)(t,12*e,i)}}};
//# sourceMappingURL=28038.e96b7d120dbdce65.js.map