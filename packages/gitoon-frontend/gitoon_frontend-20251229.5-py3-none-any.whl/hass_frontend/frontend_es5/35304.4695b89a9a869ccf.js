"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["35304"],{68348:function(t,e,n){n.d(e,{u:function(){return i}});n(18111),n(13579),n(26099);var i=function(t){var e;if(t.some(function(t){return"tagName"in t&&("HA-MENU"===t.tagName||"HA-CODE-EDITOR"===t.tagName)}))return!1;var n=t[0];if("TEXTAREA"===n.tagName)return!1;if("HA-SELECT"===(null===(e=n.parentElement)||void 0===e?void 0:e.tagName))return!1;if("INPUT"!==n.tagName)return!0;switch(n.type){case"button":case"checkbox":case"hidden":case"radio":case"range":return!0;default:return!1}}},69093:function(t,e,n){n.d(e,{t:function(){return a}});var i=n(71727),a=function(t){return(0,i.m)(t.entity_id)}},25240:function(t,e,n){var i,a,r,o,s,l=n(61397),c=n(50264),u=n(72153),h=n(44734),d=n(43080),p=n(69683),f=n(6454),v=n(25460),b=(n(28706),n(74423),n(21699),n(40445)),g=n(96196),m=n(77845),_=n(46190),y=n(69093),w=n(28978),A=n(22675),k=n(88360),C=(n(6),n(26300),n(59646),function(t){return void 0!==t&&!_.jj.includes(t.state)&&!(0,A.g0)(t.state)}),H=function(t){function e(){var t;(0,h.A)(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=(0,p.A)(this,e,[].concat(i)))._isOn=!1,t}return(0,f.A)(e,t),(0,d.A)(e,[{key:"render",value:function(){if(!this.stateObj)return(0,g.qy)(i||(i=(0,u.A)([' <ha-switch disabled="disabled"></ha-switch> '])));if(this.stateObj.attributes.assumed_state||this.stateObj.state===A.HV)return(0,g.qy)(a||(a=(0,u.A)([' <ha-icon-button .label="','" .path="','" .disabled="','" @click="','" class="','"></ha-icon-button> <ha-icon-button .label="','" .path="','" .disabled="','" @click="','" class="','"></ha-icon-button> '])),"Turn ".concat((0,w.u)(this.stateObj)," off"),"M17,10H13L17,2H7V4.18L15.46,12.64M3.27,3L2,4.27L7,9.27V13H10V22L13.58,15.86L17.73,20L19,18.73L3.27,3Z",this.stateObj.state===A.Hh,this._turnOff,this._isOn||this.stateObj.state===A.HV?"":"state-active","Turn ".concat((0,w.u)(this.stateObj)," on"),"M7,2V13H10V22L17,10H13L17,2H7Z",this.stateObj.state===A.Hh,this._turnOn,this._isOn?"state-active":"");var t=(0,g.qy)(r||(r=(0,u.A)(['<ha-switch aria-label="','" .checked="','" .disabled="','" @change="','"></ha-switch>'])),"Toggle ".concat((0,w.u)(this.stateObj)," ").concat(this._isOn?"off":"on"),this._isOn,this.stateObj.state===A.Hh,this._toggleChanged);return this.label?(0,g.qy)(o||(o=(0,u.A)([' <ha-formfield .label="','">',"</ha-formfield> "])),this.label,t):t}},{key:"firstUpdated",value:function(t){(0,v.A)(e,"firstUpdated",this,3)([t]),this.addEventListener("click",function(t){return t.stopPropagation()})}},{key:"willUpdate",value:function(t){(0,v.A)(e,"willUpdate",this,3)([t]),t.has("stateObj")&&(this._isOn=C(this.stateObj))}},{key:"_toggleChanged",value:function(t){var e=t.target.checked;e!==this._isOn&&this._callService(e)}},{key:"_turnOn",value:function(){this._callService(!0)}},{key:"_turnOff",value:function(){this._callService(!1)}},{key:"_callService",value:(n=(0,c.A)((0,l.A)().m(function t(e){var n,i,a,r,o=this;return(0,l.A)().w(function(t){for(;;)switch(t.n){case 0:if(this.hass&&this.stateObj){t.n=1;break}return t.a(2);case 1:return(0,k.j)(this,"light"),"lock"===(n=(0,y.t)(this.stateObj))?(i="lock",a=e?"unlock":"lock"):"cover"===n?(i="cover",a=e?"open_cover":"close_cover"):"valve"===n?(i="valve",a=e?"open_valve":"close_valve"):"group"===n?(i="homeassistant",a=e?"turn_on":"turn_off"):(i=n,a=e?"turn_on":"turn_off"),r=this.stateObj,this._isOn=e,t.n=2,this.hass.callService(i,a,{entity_id:this.stateObj.entity_id});case 2:setTimeout((0,c.A)((0,l.A)().m(function t(){return(0,l.A)().w(function(t){for(;;)switch(t.n){case 0:o.stateObj===r&&(o._isOn=C(o.stateObj));case 1:return t.a(2)}},t)})),2e3);case 3:return t.a(2)}},t,this)})),function(t){return n.apply(this,arguments)})}]);var n}(g.WF);H.styles=(0,g.AH)(s||(s=(0,u.A)([":host{white-space:nowrap;min-width:38px}ha-icon-button{--mdc-icon-button-size:40px;color:var(--ha-icon-button-inactive-color,var(--primary-text-color));transition:color .5s}ha-icon-button.state-active{color:var(--ha-icon-button-active-color,var(--primary-color))}ha-switch{padding:13px 5px}"]))),(0,b.Cg)([(0,m.MZ)({attribute:!1})],H.prototype,"stateObj",void 0),(0,b.Cg)([(0,m.MZ)()],H.prototype,"label",void 0),(0,b.Cg)([(0,m.wk)()],H.prototype,"_isOn",void 0),H=(0,b.Cg)([(0,m.EM)("ha-entity-toggle")],H)},27661:function(t,e,n){var i,a,r,o=n(72153),s=n(44734),l=n(43080),c=n(69683),u=n(25460),h=n(6454),d=n(40445),p=n(51978),f=n(94743),v=n(77845),b=n(96196),g=n(63091),m=function(t){function e(){return(0,s.A)(this,e),(0,c.A)(this,e,arguments)}return(0,h.A)(e,t),(0,l.A)(e,[{key:"firstUpdated",value:function(t){(0,u.A)(e,"firstUpdated",this,3)([t]),this.style.setProperty("--mdc-theme-secondary","var(--primary-color)")}}])}(p.n);m.styles=[f.R,(0,b.AH)(i||(i=(0,o.A)([":host{--mdc-typography-button-text-transform:none;--mdc-typography-button-font-size:var(--ha-font-size-l);--mdc-typography-button-font-family:var(--ha-font-family-body);--mdc-typography-button-font-weight:var(--ha-font-weight-medium)}:host .mdc-fab--extended{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab.mdc-fab--extended .ripple{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab--extended .mdc-fab__icon{margin-inline-start:-8px;margin-inline-end:12px;direction:var(--direction)}:disabled{--mdc-theme-secondary:var(--disabled-text-color);pointer-events:none}"]))),"rtl"===g.G.document.dir?(0,b.AH)(a||(a=(0,o.A)([":host .mdc-fab--extended .mdc-fab__icon{direction:rtl}"]))):(0,b.AH)(r||(r=(0,o.A)([""])))],m=(0,d.Cg)([(0,v.EM)("ha-fab")],m)},6:function(t,e,n){var i,a,r=n(72153),o=n(44734),s=n(43080),l=n(69683),c=n(6454),u=(n(28706),n(40445)),h=n(35949),d=n(38627),p=n(96196),f=n(77845),v=n(94333),b=n(1087),g=function(t){function e(){var t;(0,o.A)(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=(0,l.A)(this,e,[].concat(i))).disabled=!1,t}return(0,c.A)(e,t),(0,s.A)(e,[{key:"render",value:function(){var t={"mdc-form-field--align-end":this.alignEnd,"mdc-form-field--space-between":this.spaceBetween,"mdc-form-field--nowrap":this.nowrap};return(0,p.qy)(i||(i=(0,r.A)([' <div class="mdc-form-field ','"> <slot></slot> <label class="mdc-label" @click="','"> <slot name="label">',"</slot> </label> </div>"])),(0,v.H)(t),this._labelClick,this.label)}},{key:"_labelClick",value:function(){var t=this.input;if(t&&(t.focus(),!t.disabled))switch(t.tagName){case"HA-CHECKBOX":t.checked=!t.checked,(0,b.r)(t,"change");break;case"HA-RADIO":t.checked=!0,(0,b.r)(t,"change");break;default:t.click()}}}])}(h.M);g.styles=[d.R,(0,p.AH)(a||(a=(0,r.A)([":host(:not([alignEnd])) ::slotted(ha-switch){margin-right:10px;margin-inline-end:10px;margin-inline-start:inline}.mdc-form-field{align-items:var(--ha-formfield-align-items,center);gap:var(--ha-space-1)}.mdc-form-field>label{direction:var(--direction);margin-inline-start:0;margin-inline-end:auto;padding:0}:host([disabled]) label{color:var(--disabled-text-color)}"])))],(0,u.Cg)([(0,f.MZ)({type:Boolean,reflect:!0})],g.prototype,"disabled",void 0),g=(0,u.Cg)([(0,f.EM)("ha-formfield")],g)},75248:function(t,e,n){n.a(t,async function(t,i){try{n.r(e),n.d(e,{HaIconOverflowMenu:function(){return C}});var a,r,o,s,l,c,u,h,d=n(72153),p=n(44734),f=n(43080),v=n(69683),b=n(6454),g=(n(28706),n(62062),n(18111),n(61701),n(26099),n(40445)),m=n(96196),_=n(77845),y=n(94333),w=n(14503),A=(n(67134),n(26300),n(67094),n(34127)),k=(n(16443),n(58491),t([A]));A=(k.then?(await k)():k)[0];var C=function(t){function e(){var t;(0,p.A)(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=(0,v.A)(this,e,[].concat(i))).items=[],t.narrow=!1,t}return(0,b.A)(e,t),(0,f.A)(e,[{key:"render",value:function(){return 0===this.items.length?m.s6:(0,m.qy)(a||(a=(0,d.A)([" "," "])),this.narrow?(0,m.qy)(r||(r=(0,d.A)([' <ha-md-button-menu @click="','" positioning="popover"> <ha-icon-button .label="','" .path="','" slot="trigger"></ha-icon-button> '," </ha-md-button-menu>"])),this._handleIconOverflowMenuOpened,this.hass.localize("ui.common.overflow_menu"),"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",this.items.map(function(t){return t.divider?(0,m.qy)(o||(o=(0,d.A)(['<ha-md-divider role="separator" tabindex="-1"></ha-md-divider>']))):(0,m.qy)(s||(s=(0,d.A)(['<ha-md-menu-item ?disabled="','" .clickAction="','" class="','"> <ha-svg-icon slot="start" class="','" .path="','"></ha-svg-icon> '," </ha-md-menu-item>"])),t.disabled,t.action,(0,y.H)({warning:Boolean(t.warning)}),(0,y.H)({warning:Boolean(t.warning)}),t.path,t.label)})):(0,m.qy)(l||(l=(0,d.A)([" "," "])),this.items.map(function(t){var e;return t.narrowOnly?m.s6:t.divider?(0,m.qy)(c||(c=(0,d.A)(['<div role="separator"></div>']))):(0,m.qy)(u||(u=(0,d.A)(['<ha-tooltip .disabled="','" .for="icon-button-','">',' </ha-tooltip><ha-icon-button .id="icon-button-','" @click="','" .label="','" .path="','" ?disabled="','"></ha-icon-button> '])),!t.tooltip,t.label,null!==(e=t.tooltip)&&void 0!==e?e:"",t.label,t.action,t.label,t.path,t.disabled)})))}},{key:"_handleIconOverflowMenuOpened",value:function(t){t.stopPropagation()}}],[{key:"styles",get:function(){return[w.RF,(0,m.AH)(h||(h=(0,d.A)([":host{display:flex;justify-content:flex-end;cursor:initial}div[role=separator]{border-right:1px solid var(--divider-color);width:1px}"])))]}}])}(m.WF);(0,g.Cg)([(0,_.MZ)({attribute:!1})],C.prototype,"hass",void 0),(0,g.Cg)([(0,_.MZ)({type:Array})],C.prototype,"items",void 0),(0,g.Cg)([(0,_.MZ)({type:Boolean})],C.prototype,"narrow",void 0),C=(0,g.Cg)([(0,_.EM)("ha-icon-overflow-menu")],C),i()}catch(H){i(H)}})},59646:function(t,e,n){var i,a=n(72153),r=n(44734),o=n(43080),s=n(69683),l=n(6454),c=n(25460),u=(n(28706),n(40445)),h=n(4845),d=n(49065),p=n(96196),f=n(77845),v=n(88360),b=function(t){function e(){var t;(0,r.A)(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=(0,s.A)(this,e,[].concat(i))).haptic=!1,t}return(0,l.A)(e,t),(0,o.A)(e,[{key:"firstUpdated",value:function(){var t=this;(0,c.A)(e,"firstUpdated",this,3)([]),this.addEventListener("change",function(){t.haptic&&(0,v.j)(t,"light")})}}])}(h.U);b.styles=[d.R,(0,p.AH)(i||(i=(0,a.A)([":host{--mdc-theme-secondary:var(--switch-checked-color)}.mdc-switch.mdc-switch--checked .mdc-switch__thumb{background-color:var(--switch-checked-button-color);border-color:var(--switch-checked-button-color)}.mdc-switch.mdc-switch--checked .mdc-switch__track{background-color:var(--switch-checked-track-color);border-color:var(--switch-checked-track-color)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb{background-color:var(--switch-unchecked-button-color);border-color:var(--switch-unchecked-button-color)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__track{background-color:var(--switch-unchecked-track-color);border-color:var(--switch-unchecked-track-color)}"])))],(0,u.Cg)([(0,f.MZ)({type:Boolean})],b.prototype,"haptic",void 0),b=(0,u.Cg)([(0,f.EM)("ha-switch")],b)},34127:function(t,e,n){n.a(t,async function(t,e){try{var i,a=n(72153),r=n(44734),o=n(43080),s=n(69683),l=n(6454),c=(n(28706),n(2892),n(40445)),u=n(52630),h=n(96196),d=n(77845),p=t([u]),f=function(t){function e(){var t;(0,r.A)(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=(0,s.A)(this,e,[].concat(i))).showDelay=150,t.hideDelay=150,t}return(0,l.A)(e,t),(0,o.A)(e,null,[{key:"styles",get:function(){return[u.A.styles,(0,h.AH)(i||(i=(0,a.A)([":host{--wa-tooltip-background-color:var(--secondary-background-color);--wa-tooltip-content-color:var(--primary-text-color);--wa-tooltip-font-family:var(\n            --ha-tooltip-font-family,\n            var(--ha-font-family-body)\n          );--wa-tooltip-font-size:var(\n            --ha-tooltip-font-size,\n            var(--ha-font-size-s)\n          );--wa-tooltip-font-weight:var(\n            --ha-tooltip-font-weight,\n            var(--ha-font-weight-normal)\n          );--wa-tooltip-line-height:var(\n            --ha-tooltip-line-height,\n            var(--ha-line-height-condensed)\n          );--wa-tooltip-padding:8px;--wa-tooltip-border-radius:var(\n            --ha-tooltip-border-radius,\n            var(--ha-border-radius-sm)\n          );--wa-tooltip-arrow-size:var(--ha-tooltip-arrow-size, 8px);--wa-z-index-tooltip:var(--ha-tooltip-z-index, 1000)}"])))]}}])}((u=(p.then?(await p)():p)[0]).A);(0,c.Cg)([(0,d.MZ)({attribute:"show-delay",type:Number})],f.prototype,"showDelay",void 0),(0,c.Cg)([(0,d.MZ)({attribute:"hide-delay",type:Number})],f.prototype,"hideDelay",void 0),f=(0,c.Cg)([(0,d.EM)("ha-tooltip")],f),e()}catch(v){e(v)}})},35891:function(t,e,n){n.d(e,{Bs:function(){return o},Jp:function(){return a},Tk:function(){return r},Xg:function(){return i},oz:function(){return l},x1:function(){return s}});n(74423),n(21699);var i=function(t,e){return t.callWS({type:"blueprint/list",domain:e})},a=function(t,e){return t.callWS({type:"blueprint/import",url:e})},r=function(t,e,n,i,a,r){return t.callWS({type:"blueprint/save",domain:e,path:n,yaml:i,source_url:a,allow_override:r})},o=function(t,e,n){return t.callWS({type:"blueprint/delete",domain:e,path:n})},s=function(t){var e=t.metadata.source_url;return e?e.includes("github.com/home-assistant")?"homeassistant":"community":"local"},l=function(t,e,n,i){return t.callWS({type:"blueprint/substitute",domain:e,path:n,input:i})}},22675:function(t,e,n){n.d(e,{HV:function(){return r},Hh:function(){return a},KF:function(){return s},ON:function(){return o},g0:function(){return u},s7:function(){return l}});var i=n(23832),a="unavailable",r="unknown",o="on",s="off",l=[a,r],c=[a,r,s],u=(0,i.g)(l);(0,i.g)(c)},71606:function(t,e,n){n.d(e,{f:function(){return a},o:function(){return i}});n(23792),n(26099),n(31415),n(17642),n(58004),n(33853),n(45876),n(32475),n(15024),n(31698),n(47764),n(62953);var i=new Set(["automation","script","scene","group"]),a=function(t,e,n){return t.callWS({type:"search/related",item_type:e,item_id:n})}},4797:function(t,e,n){n.a(t,async function(t,e){try{var i,a,r,o,s,l,c,u,h=n(7739),d=n(61397),p=n(50264),f=n(72153),v=n(78261),b=n(44734),g=n(43080),m=n(75864),_=n(69683),y=n(6454),w=n(25460),A=(n(28706),n(50113),n(23792),n(62062),n(44114),n(18111),n(20116),n(7588),n(61701),n(69085),n(5506),n(26099),n(3362),n(38781),n(47764),n(23500),n(62953),n(48408),n(14603),n(47566),n(98721),n(40445)),k=n(96196),C=n(77845),H=n(22786),O=n(93905),M=n(1087),x=n(28978),z=n(91926),V=n(6030),S=(n(25240),n(18350)),Z=(n(27661),n(26300),n(75248)),j=(n(67094),n(88249)),U=n(35891),B=n(84025),L=n(71606),E=(n(34296),n(65063)),q=n(72553),T=n(14503),I=n(81619),R=n(25635),W=n(35464),N=t([S,Z,q]);[S,Z,q]=N.then?(await N)():N;var P="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",D={automation:function(t){(0,j.mX)({alias:t.name,use_blueprint:{path:t.path}})},script:function(t){(0,B.AM)({alias:t.name,use_blueprint:{path:t.path}})}},G=function(t){function e(){var t;(0,b.A)(this,e);for(var n=arguments.length,c=new Array(n),u=0;u<n;u++)c[u]=arguments[u];return(t=(0,_.A)(this,e,[].concat(c))).isWide=!1,t.narrow=!1,t._filter="",t._usageCounts={},t._usageCountRequest=0,t._processedBlueprints=(0,H.A)(function(t,e,n){var i=[];return Object.entries(t).forEach(function(t){var a=(0,v.A)(t,2),r=a[0],o=a[1];return Object.entries(o).forEach(function(t){var a=(0,v.A)(t,2),o=a[0],s=a[1],l="".concat(r,"/").concat(o);"error"in s?i.push({name:s.error,type:r,translated_type:e("ui.panel.config.blueprint.overview.types.".concat(r)),error:!0,path:o,fullpath:l,usageCount:0}):i.push(Object.assign(Object.assign({},s.metadata),{},{type:r,translated_type:e("ui.panel.config.blueprint.overview.types.".concat(r)),error:!1,path:o,fullpath:l,usageCount:n[l]||0}))})}),i}),t._columns=(0,H.A)(function(e){return{name:{title:e("ui.panel.config.blueprint.overview.headers.name"),main:!0,sortable:!0,filterable:!0,direction:"asc",flex:2},translated_type:{title:e("ui.panel.config.blueprint.overview.headers.type"),sortable:!0,filterable:!0,groupable:!0},path:{title:e("ui.panel.config.blueprint.overview.headers.file_name"),sortable:!0,filterable:!0,flex:2},usage_count:{title:e("ui.panel.config.blueprint.overview.headers.usage_count"),sortable:!0,valueColumn:"usageCount",type:"numeric",minWidth:"100px",maxWidth:"120px",template:function(e){var n,a=null!==(n=e.usageCount)&&void 0!==n?n:0;return(0,k.qy)(i||(i=(0,f.A)([' <ha-assist-chip filled .active="','" label="','" title="','" ?disabled="','" data-fullpath="','" @click="','"></ha-assist-chip> '])),a>0,String(a),e.error?String(a):t.hass.localize("ui.panel.config.blueprint.overview.view_".concat(e.type)),e.error,e.fullpath,t._handleUsageClick)}},fullpath:{title:"fullpath",hidden:!0},actions:{title:"",label:t.hass.localize("ui.panel.config.generic.headers.actions"),type:"overflow-menu",showNarrow:!0,moveable:!1,hideable:!1,template:function(e){return e.error?(0,k.qy)(a||(a=(0,f.A)(['<ha-svg-icon style="color:var(--error-color);display:block;margin-inline-end:12px;margin-inline-start:auto" .path="','"></ha-svg-icon>'])),"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"):(0,k.qy)(r||(r=(0,f.A)([' <ha-icon-overflow-menu .hass="','" narrow .items="','"> </ha-icon-overflow-menu> '])),t.hass,[{path:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",label:t.hass.localize("ui.panel.config.blueprint.overview.create_".concat(e.type)),action:function(){return t._createNew(e)}},{path:"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z",label:t.hass.localize("ui.panel.config.blueprint.overview.view_".concat(e.domain)),action:function(){return t._showUsed(e)}},{path:"M18,16.08C17.24,16.08 16.56,16.38 16.04,16.85L8.91,12.7C8.96,12.47 9,12.24 9,12C9,11.76 8.96,11.53 8.91,11.3L15.96,7.19C16.5,7.69 17.21,8 18,8A3,3 0 0,0 21,5A3,3 0 0,0 18,2A3,3 0 0,0 15,5C15,5.24 15.04,5.47 15.09,5.7L8.04,9.81C7.5,9.31 6.79,9 6,9A3,3 0 0,0 3,12A3,3 0 0,0 6,15C6.79,15 7.5,14.69 8.04,14.19L15.16,18.34C15.11,18.55 15.08,18.77 15.08,19C15.08,20.61 16.39,21.91 18,21.91C19.61,21.91 20.92,20.61 20.92,19A2.92,2.92 0 0,0 18,16.08Z",disabled:!e.source_url,label:t.hass.localize(e.source_url?"ui.panel.config.blueprint.overview.share_blueprint":"ui.panel.config.blueprint.overview.share_blueprint_no_url"),action:function(){return t._share(e)}},{path:P,disabled:!e.source_url,label:t.hass.localize(e.source_url?"ui.panel.config.blueprint.overview.re_import_blueprint":"ui.panel.config.blueprint.overview.re_import_blueprint_no_url"),action:function(){return t._reImport(e)}},{divider:!0},{label:t.hass.localize("ui.panel.config.blueprint.overview.delete_blueprint"),path:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",action:function(){return t._delete(e)},warning:!0}])}}}}),t._handleUsageClick=function(e){e.stopPropagation(),e.preventDefault();var n=e.currentTarget,i=null==n?void 0:n.dataset.fullpath;if(i){var a=t._processedBlueprints(t.blueprints,t.hass.localize,t._usageCounts).find(function(t){return t.fullpath===i});a&&!a.error&&t._showUsed(a)}},t._showUsed=function(t){(0,z.o)("/config/".concat(t.domain,"/dashboard?blueprint=").concat(encodeURIComponent(t.path)))},t._createNew=function(t){D[t.domain](t)},t._share=function(t){var e=new URLSearchParams;e.append("redirect","blueprint_import"),e.append("blueprint_url",t.source_url),window.open("https://my.home-assistant.io/create-link/?".concat(e.toString()))},t._reImport=function(){var e=(0,p.A)((0,d.A)().m(function e(n){var i,a,r;return(0,d.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,(0,E.dk)((0,m.A)(t),{title:t.hass.localize("ui.panel.config.blueprint.overview.re_import_confirm_title"),text:(0,k.qy)(o||(o=(0,f.A)([" "," "])),t.hass.localize("ui.panel.config.blueprint.overview.re_import_confirm_text")),confirmText:t.hass.localize("ui.panel.config.blueprint.overview.re_import_confirm_action"),warning:!0});case 1:if(e.v){e.n=2;break}return e.a(2);case 2:return e.p=2,e.n=3,(0,U.Jp)(t.hass,n.source_url);case 3:i=e.v,e.n=5;break;case 4:throw e.p=4,a=e.v,(0,I.P)((0,m.A)(t),{message:t.hass.localize("ui.panel.config.blueprint.overview.re_import_error_source_not_found")}),a;case 5:return e.p=5,e.n=6,(0,U.Tk)(t.hass,n.domain,n.path,i.raw_data,n.source_url,!0);case 6:e.n=8;break;case 7:throw e.p=7,r=e.v,(0,I.P)((0,m.A)(t),{message:t.hass.localize("ui.panel.config.blueprint.overview.re_import_error_save",{error:r.message})}),r;case 8:(0,M.r)((0,m.A)(t),"reload-blueprints"),(0,I.P)((0,m.A)(t),{message:t.hass.localize("ui.panel.config.blueprint.overview.re_import_success",{name:i.blueprint.metadata.name})});case 9:return e.a(2)}},e,null,[[5,7],[2,4]])}));return function(t){return e.apply(this,arguments)}}(),t._delete=function(){var e=(0,p.A)((0,d.A)().m(function e(n){var i,a,r,o;return(0,d.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,L.f)(t.hass,"".concat(n.domain,"_blueprint"),n.path);case 1:if(r=e.v,!(null!==(i=r.automation)&&void 0!==i&&i.length||null!==(a=r.script)&&void 0!==a&&a.length)){e.n=3;break}return o=t.hass.localize("ui.panel.config.blueprint.overview.types_plural.".concat(n.domain)),e.n=2,(0,E.dk)((0,m.A)(t),{title:t.hass.localize("ui.panel.config.blueprint.overview.blueprint_in_use_title"),text:t.hass.localize("ui.panel.config.blueprint.overview.blueprint_in_use_text",{type:o,list:(0,k.qy)(s||(s=(0,f.A)(["<ul> "," </ul>"])),[].concat((0,h.A)(r.automation||[]),(0,h.A)(r.script||[])).map(function(e){var n=t.hass.states[e];return(0,k.qy)(l||(l=(0,f.A)(["<li> "," </li>"])),n?"".concat((0,x.u)(n)," (").concat(e,")"):e)}))}),confirmText:t.hass.localize("ui.panel.config.blueprint.overview.blueprint_in_use_view",{type:o})});case 2:return e.v&&(0,z.o)("/config/".concat(n.domain,"/dashboard?blueprint=").concat(encodeURIComponent(n.path))),e.a(2);case 3:return e.n=4,(0,E.dk)((0,m.A)(t),{title:t.hass.localize("ui.panel.config.blueprint.overview.confirm_delete_title"),text:t.hass.localize("ui.panel.config.blueprint.overview.confirm_delete_text",{name:n.name}),confirmText:t.hass.localize("ui.common.delete"),dismissText:t.hass.localize("ui.common.cancel"),destructive:!0});case 4:if(e.v){e.n=5;break}return e.a(2);case 5:return e.n=6,(0,U.Bs)(t.hass,n.domain,n.path);case 6:(0,M.r)((0,m.A)(t),"reload-blueprints");case 7:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),t}return(0,y.A)(e,t),(0,g.A)(e,[{key:"firstUpdated",value:function(t){if((0,w.A)(e,"firstUpdated",this,3)([t]),this._loadUsageCounts(),"/import"===this.route.path){var n=(0,V.p9)("blueprint_url");(0,z.o)("/config/blueprint/dashboard",{replace:!0}),n&&this._addBlueprint(n)}}},{key:"updated",value:function(t){(0,w.A)(e,"updated",this,3)([t]),t.has("blueprints")&&this._loadUsageCounts()}},{key:"render",value:function(){return(0,k.qy)(c||(c=(0,f.A)([' <hass-tabs-subpage-data-table .hass="','" .narrow="','" back-path="/config" .route="','" .tabs="','" .columns="','" .data="','" id="fullpath" .noDataText="','" has-fab clickable @row-click="','" .appendRow="','" .initialGroupColumn="','" .initialCollapsedGroups="','" .initialSorting="','" .columnOrder="','" .hiddenColumns="','" @columns-changed="','" @sorting-changed="','" @grouping-changed="','" @collapsed-changed="','" .filter="','" @search-changed="','"> <ha-fab slot="fab" .label="','" extended @click="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> </ha-fab> </hass-tabs-subpage-data-table> '])),this.hass,this.narrow,this.route,R.configSections.automations,this._columns(this.hass.localize),this._processedBlueprints(this.blueprints,this.hass.localize,this._usageCounts),this.hass.localize("ui.panel.config.blueprint.overview.no_blueprints"),this._handleRowClicked,(0,k.qy)(u||(u=(0,f.A)(['<div class="mdc-data-table__cell" style="width:100%;text-align:center" role="cell"> <ha-button appearance="plain" href="','" target="_blank" rel="noreferrer noopener" size="small"> ',' <ha-svg-icon slot="end" .path="','"></ha-svg-icon> </ha-button> </div>'])),documentationUrl(this.hass,"/get-blueprints"),this.hass.localize("ui.panel.config.blueprint.overview.discover_more"),"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"),this._activeGrouping,this._activeCollapsed,this._activeSorting,this._activeColumnOrder,this._activeHiddenColumns,this._handleColumnsChanged,this._handleSortingChanged,this._handleGroupingChanged,this._handleCollapseChanged,this._filter,this._handleSearchChange,this.hass.localize("ui.panel.config.blueprint.overview.add_blueprint"),this._addBlueprintClicked,P)}},{key:"_addBlueprint",value:function(t){var e=this;(0,W.S)(this,{url:t,importedCallback:function(){return e._reload()}})}},{key:"_addBlueprintClicked",value:function(){this._addBlueprint()}},{key:"_reload",value:function(){(0,M.r)(this,"reload-blueprints")}},{key:"_loadUsageCounts",value:(n=(0,p.A)((0,d.A)().m(function t(){var e,n,i,a=this;return(0,d.A)().w(function(t){for(;;)switch(t.n){case 0:if(this.blueprints){t.n=1;break}return t.a(2);case 1:return e=++this._usageCountRequest,n={},i=this._processedBlueprints(this.blueprints,this.hass.localize,{}),t.n=2,Promise.all(i.map(function(){var t=(0,p.A)((0,d.A)().m(function t(e){var i,r,o,s;return(0,d.A)().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!e.error){t.n=1;break}return n[e.fullpath]=0,t.a(2);case 1:return t.p=1,t.n=2,(0,L.f)(a.hass,"".concat(e.domain,"_blueprint"),e.path);case 2:o=t.v,s=((null===(i=o.automation)||void 0===i?void 0:i.length)||0)+((null===(r=o.script)||void 0===r?void 0:r.length)||0),n[e.fullpath]=s,t.n=4;break;case 3:t.p=3,t.v,n[e.fullpath]=0;case 4:return t.a(2)}},t,null,[[1,3]])}));return function(e){return t.apply(this,arguments)}}()));case 2:e===this._usageCountRequest&&(this._usageCounts=n);case 3:return t.a(2)}},t,this)})),function(){return n.apply(this,arguments)})},{key:"_handleRowClicked",value:function(t){var e=this._processedBlueprints(this.blueprints,this.hass.localize,this._usageCounts).find(function(e){return e.fullpath===t.detail.id});e.error?(0,E.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.blueprint.overview.error",{path:e.path}),text:e.name}):this._createNew(e)}},{key:"_handleSortingChanged",value:function(t){this._activeSorting=t.detail}},{key:"_handleGroupingChanged",value:function(t){this._activeGrouping=t.detail.value}},{key:"_handleCollapseChanged",value:function(t){this._activeCollapsed=t.detail.value}},{key:"_handleSearchChange",value:function(t){this._filter=t.detail.value}},{key:"_handleColumnsChanged",value:function(t){this._activeColumnOrder=t.detail.columnOrder,this._activeHiddenColumns=t.detail.hiddenColumns}}],[{key:"styles",get:function(){return T.RF}}]);var n}(k.WF);(0,A.Cg)([(0,C.MZ)({attribute:!1})],G.prototype,"hass",void 0),(0,A.Cg)([(0,C.MZ)({attribute:"is-wide",type:Boolean})],G.prototype,"isWide",void 0),(0,A.Cg)([(0,C.MZ)({type:Boolean})],G.prototype,"narrow",void 0),(0,A.Cg)([(0,C.MZ)({attribute:!1})],G.prototype,"route",void 0),(0,A.Cg)([(0,C.MZ)({attribute:!1})],G.prototype,"blueprints",void 0),(0,A.Cg)([(0,O.I)({key:"blueprint-table-sort",state:!1,subscribe:!1})],G.prototype,"_activeSorting",void 0),(0,A.Cg)([(0,O.I)({key:"blueprint-table-grouping",state:!1,subscribe:!1})],G.prototype,"_activeGrouping",void 0),(0,A.Cg)([(0,O.I)({key:"blueprint-table-collapsed",state:!1,subscribe:!1})],G.prototype,"_activeCollapsed",void 0),(0,A.Cg)([(0,O.I)({key:"blueprint-table-column-order",state:!1,subscribe:!1})],G.prototype,"_activeColumnOrder",void 0),(0,A.Cg)([(0,O.I)({key:"blueprint-table-hidden-columns",state:!1,subscribe:!1})],G.prototype,"_activeHiddenColumns",void 0),(0,A.Cg)([(0,C.wk)(),(0,O.I)({storage:"sessionStorage",key:"blueprint-table-search",state:!0,subscribe:!1})],G.prototype,"_filter",void 0),(0,A.Cg)([(0,C.wk)()],G.prototype,"_usageCounts",void 0),G=(0,A.Cg)([(0,C.EM)("ha-blueprint-overview")],G),e()}catch(F){e(F)}})},42468:function(t,e,n){n.a(t,async function(t,i){try{n.r(e);var a=n(61397),r=n(78261),o=n(50264),s=n(44734),l=n(43080),c=n(69683),u=n(6454),h=n(25460),d=(n(28706),n(23792),n(34782),n(26099),n(3362),n(47764),n(62953),n(40445)),p=n(77845),f=n(35891),v=n(324),b=n(4797),g=t([b]);b=(g.then?(await g)():g)[0];var m=function(t){function e(){var t;(0,s.A)(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=(0,c.A)(this,e,[].concat(i))).narrow=!1,t.isWide=!1,t.showAdvanced=!1,t.blueprints={},t.routerOptions={defaultPage:"dashboard",routes:{dashboard:{tag:"ha-blueprint-overview",cache:!0},edit:{tag:"ha-blueprint-editor"}}},t}return(0,u.A)(e,t),(0,l.A)(e,[{key:"_getBlueprints",value:(n=(0,o.A)((0,a.A)().m(function t(){var e,n,i,o;return(0,a.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.all([(0,f.Xg)(this.hass,"automation"),(0,f.Xg)(this.hass,"script")]);case 1:e=t.v,n=(0,r.A)(e,2),i=n[0],o=n[1],this.blueprints={automation:i,script:o};case 2:return t.a(2)}},t,this)})),function(){return n.apply(this,arguments)})},{key:"firstUpdated",value:function(t){var n=this;(0,h.A)(e,"firstUpdated",this,3)([t]),this.addEventListener("reload-blueprints",function(){n._getBlueprints()}),this._getBlueprints()}},{key:"updatePageEl",value:function(t,e){if(t.hass=this.hass,t.narrow=this.narrow,t.isWide=this.isWide,t.route=this.routeTail,t.showAdvanced=this.showAdvanced,t.blueprints=this.blueprints,(!e||e.has("route"))&&"edit"===this._currentPage){var n=this.routeTail.path.slice(1);t.blueprintId="new"===n?null:n}}}]);var n}(v.a);(0,d.Cg)([(0,p.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,d.Cg)([(0,p.MZ)({type:Boolean})],m.prototype,"narrow",void 0),(0,d.Cg)([(0,p.MZ)({attribute:"is-wide",type:Boolean})],m.prototype,"isWide",void 0),(0,d.Cg)([(0,p.MZ)({attribute:!1})],m.prototype,"showAdvanced",void 0),(0,d.Cg)([(0,p.MZ)({attribute:!1})],m.prototype,"blueprints",void 0),m=(0,d.Cg)([(0,p.EM)("ha-config-blueprint")],m),i()}catch(_){i(_)}})},35464:function(t,e,n){n.d(e,{S:function(){return r}});n(23792),n(26099),n(3362),n(47764),n(62953);var i=n(1087),a=function(){return Promise.all([n.e("72130"),n.e("89385"),n.e("51146"),n.e("34310"),n.e("70752"),n.e("77724")]).then(n.bind(n,30722))},r=function(t,e){(0,i.r)(t,"show-dialog",{dialogTag:"ha-dialog-import-blueprint",dialogImport:a,dialogParams:e})}}}]);
//# sourceMappingURL=35304.4695b89a9a869ccf.js.map