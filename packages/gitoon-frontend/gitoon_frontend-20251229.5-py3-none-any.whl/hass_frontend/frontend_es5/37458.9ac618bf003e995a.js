"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["37458"],{90433:function(t,a,e){e.d(a,{Vy:function(){return s},fI:function(){return o},ux:function(){return c}});e(23418),e(47764);var i=e(22786),n=e(79468),r=54;function s(t,a){var e=t%r+1;return a.getPropertyValue("--color-".concat(e))}function o(t,a){var e=a.getPropertyValue("--graph-color-".concat(t+1))||s(t,a);return(0,n.RQ)(e)}var c=(0,i.A)(function(t){return Array.from({length:r},function(a,e){return o(e,t)})},function(t,a){return t[0].getPropertyValue("--graph-color-1")===a[0].getPropertyValue("--graph-color-1")&&t[0].getPropertyValue("--color-1")===a[0].getPropertyValue("--color-1")})},36525:function(t,a,e){e.a(t,async function(t,i){try{e.d(a,{n:function(){return Z}});var n,r,s,o,c,h=e(78261),u=e(7739),l=e(72153),d=e(61397),p=e(50264),m=e(44734),y=e(43080),f=e(69683),v=e(6454),g=(e(28706),e(2008),e(74423),e(23792),e(62062),e(44114),e(26910),e(18111),e(22489),e(7588),e(61701),e(75376),e(2892),e(45374),e(5506),e(79432),e(26099),e(31415),e(17642),e(58004),e(33853),e(45876),e(32475),e(15024),e(31698),e(21699),e(47764),e(23500),e(62953),e(40445)),x=e(96196),A=e(77845),_=e(6415),b=e(22786),D=e(90433),M=e(36312),T=e(95747),S=e(20058),k=e(8549),C=e(15638),w=e(23528),Y=e(44439),L=t([Y,T,S,w]);[Y,T,S,w]=L.then?(await L)():L;var Z={mean:"mean",min:"min",max:"max",sum:"sum",state:"sum",change:"sum"},V=function(t){function a(){var t;(0,m.A)(this,a);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(t=(0,f.A)(this,a,[].concat(i))).statTypes=["sum","min","mean","max"],t.chartType="line",t.fitYData=!1,t.hideLegend=!1,t.logarithmicScale=!1,t.isLoadingData=!1,t.clickForMoreInfo=!0,t._chartData=[],t._statisticIds=[],t._hiddenStats=new Set,t._previousYAxisLabelValue=0,t._renderTooltip=function(a){var e={},i=t.unit?"".concat((0,k.A)(t.unit,t.hass.locale)).concat(t.unit):"";return a.map(function(a,n){var r,s;if(e[a.seriesIndex])return"";e[a.seriesIndex]=!0;var o=t._statisticIds[a.seriesIndex],c=t.hass.states[o],h=t.hass.entities[o],u=String(null!==(r=a.value[2])&&void 0!==r?r:a.value[1]),l=null!==(s=(0,S.ZQ)(c,h))&&void 0!==s?s:{maximumFractionDigits:2},d="".concat((0,S.ZV)(u,t.hass.locale,l)).concat(i),p=0===n?(0,T.yg)(new Date(a.value[0]),t.hass.locale,t.hass.config)+"<br>":"";return"".concat(p).concat(a.marker," ").concat(a.seriesName,": ").concat(d)}).filter(Boolean).join("<br>")},t._getStatisticsMetaData=(0,b.A)(function(){var a=(0,p.A)((0,d.A)().m(function a(e){var i,n;return(0,d.A)().w(function(a){for(;;)switch(a.n){case 0:return a.n=1,(0,w.Wr)(t.hass,e);case 1:return i=a.v,n={},i.forEach(function(t){n[t.statistic_id]=t}),a.a(2,n)}},a)}));return function(t){return a.apply(this,arguments)}}()),t._formatYAxisLabel=function(a){var e=Math.max(1,-Math.floor(Math.log10(Math.abs(a-t._previousYAxisLabelValue||1)))),i=(0,S.ZV)(a,t.hass.locale,{maximumFractionDigits:e});return t._previousYAxisLabelValue=a,i},t}return(0,v.A)(a,t),(0,y.A)(a,[{key:"shouldUpdate",value:function(t){return t.size>1||!t.has("hass")}},{key:"willUpdate",value:function(t){(t.has("statisticsData")||t.has("statTypes")||t.has("chartType")||t.has("hideLegend")||t.has("_hiddenStats"))&&this._generateData(),(!this.hasUpdated||t.has("unit")||t.has("period")||t.has("chartType")||t.has("minYAxis")||t.has("maxYAxis")||t.has("fitYData")||t.has("logarithmicScale")||t.has("hideLegend")||t.has("startTime")||t.has("endTime")||t.has("_legendData")||t.has("_chartData"))&&this._createOptions()}},{key:"firstUpdated",value:function(){this._computedStyle=getComputedStyle(this)}},{key:"render",value:function(){return(0,M.x)(this.hass,"history")?this.isLoadingData&&!this.statisticsData?(0,x.qy)(r||(r=(0,l.A)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.statistics_charts.loading_statistics")):this.statisticsData&&Object.keys(this.statisticsData).length?(0,x.qy)(o||(o=(0,l.A)([' <ha-chart-base .hass="','" .data="','" .options="','" .height="','" style="','" @dataset-hidden="','" @dataset-unhidden="','" .expandLegend="','"></ha-chart-base> '])),this.hass,this._chartData,this._chartOptions,this.height,(0,_.W)({height:this.height}),this._datasetHidden,this._datasetUnhidden,this.expandLegend):(0,x.qy)(s||(s=(0,l.A)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.statistics_charts.no_statistics_found")):(0,x.qy)(n||(n=(0,l.A)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.history_charts.history_disabled"))}},{key:"_datasetHidden",value:function(t){this._hiddenStats.add(t.detail.id),this.requestUpdate("_hiddenStats")}},{key:"_datasetUnhidden",value:function(t){this._hiddenStats.delete(t.detail.id),this.requestUpdate("_hiddenStats")}},{key:"_createOptions",value:function(){var t,a,e=this,i=null!==(t=this.daysToShow)&&void 0!==t?t:1,n=this.minYAxis,r=this.maxYAxis;"number"==typeof n?this.fitYData&&(n=function(t){var a=t.min;return Math.min(e._roundYAxis(a,Math.floor),e.minYAxis)}):this.logarithmicScale&&(n=function(t){var a=t.min,i=a>0?.95*a:1.05*a;return e._roundYAxis(i,Math.floor)}),"number"==typeof r?this.fitYData&&(r=function(t){var a=t.max;return Math.max(e._roundYAxis(a,Math.ceil),e.maxYAxis)}):this.logarithmicScale&&(r=function(t){var a=t.max,i=a>0?1.05*a:.95*a;return e._roundYAxis(i,Math.ceil)});var s=null!==(a=this.endTime)&&void 0!==a?a:new Date,o=this.startTime;o||(this._chartData.forEach(function(t){var a;if(Array.isArray(t.data)&&t.data[0]){var e=t.data[0],i=Array.isArray(e)?e[0]:null===(a=e.value)||void 0===a?void 0:a[0];i&&(!o||new Date(i)<o)&&(o=new Date(i))}}),o||(o=new Date(s.getTime()-24*i*3600*1e3))),this._chartOptions={xAxis:[{id:"xAxis",type:"time",min:o,max:this.endTime},{id:"hiddenAxis",type:"time",show:!1}],yAxis:{type:this.logarithmicScale?"log":"value",name:this.unit,nameGap:2,nameTextStyle:{align:"left"},position:(0,C.qC)(this.hass)?"right":"left",scale:"bar"!==this.chartType||this.logarithmicScale||void 0!==n||void 0!==r,min:this._clampYAxis(n),max:this._clampYAxis(r),splitLine:{show:!0},axisLabel:{formatter:this._formatYAxisLabel}},legend:{type:"custom",show:!this.hideLegend,data:this._legendData},grid:{top:15,left:1,right:1,bottom:0,containLabel:!0},tooltip:{trigger:"axis",appendTo:document.body,formatter:this._renderTooltip}}}},{key:"_generateData",value:(e=(0,p.A)((0,d.A)().m(function t(){var a,e,i,n,r,s,o,c,l,p,m=this;return(0,d.A)().w(function(t){for(;;)switch(t.n){case 0:if(this.statisticsData){t.n=1;break}return t.a(2);case 1:if(p=this.metadata){t.n=3;break}return t.n=2,this._getStatisticsMetaData(Object.keys(this.statisticsData));case 2:p=t.v;case 3:if(e=p,i=0,n=Object.entries(this.statisticsData),r=[],s=[],o=[],0!==n.length){t.n=4;break}return t.a(2);case 4:(this.endTime||new Date(Math.max.apply(Math,(0,u.A)(n.map(function(t){var a=(0,h.A)(t,2),e=(a[0],a[1]);return new Date(e[e.length-1].start).getTime()})))))>new Date&&new Date,l=this.names||{},n.forEach(function(t){var a=(0,h.A)(t,2),n=a[0],d=a[1],p=null==e?void 0:e[n],y=l[n];void 0===y&&(y=(0,w.$O)(m.hass,n,p)),m.unit||(void 0===c?c=(0,w.JE)(m.hass,n,p):null!==c&&c!==(0,w.JE)(m.hass,n,p)&&(c=null));var f,v=null,g=[],x=[],A=(0,D.fI)(i,m._computedStyle||getComputedStyle(m));i++;var _=[],b=m.statTypes.includes("mean")&&(0,w.iY)(d,"mean"),M=m.statTypes.includes("max")&&(0,w.iY)(d,"max"),T=m.statTypes.includes("min")&&(0,w.iY)(d,"min"),S=[b,M,T].filter(Boolean).length>1,k=m.statTypes.includes("state"),C=M?"max":"mean",Y=T?"min":"mean",L=S?(0,u.A)(m.statTypes).sort(function(t,a){return"min"===t||"max"===a?-1:"max"===t||"min"===a?1:0}):m.statTypes,Z=!1;L.forEach(function(t){if((0,w.iY)(d,t)){var a=S&&(t===C||t===Y);_.push(t);var e=a&&T&&M&&b||k&&["change","sum"].includes(t)?A+(m.hideLegend?"00":"7F"):A,i=a?A+"3F":A+"7F",r={id:"".concat(n,"-").concat(t),type:m.chartType,smooth:"line"===m.chartType&&.4,smoothMonotone:"x",cursor:"default",data:[],name:y?"".concat(y," (").concat(m.hass.localize("ui.components.statistics_charts.statistic_types.".concat(t)),")"):m.hass.localize("ui.components.statistics_charts.statistic_types.".concat(t)),symbol:"none",sampling:a&&S?"lttb":"minmax",animationDurationUpdate:0,lineStyle:{width:1.5},itemStyle:"bar"===m.chartType?{borderRadius:[4,4,0,0],borderColor:e,borderWidth:1.5}:void 0,color:"bar"===m.chartType?i:e};if(a&&"line"===m.chartType&&(r.stack="band-".concat(n),r.stackStrategy="all",m._hiddenStats.has("".concat(n,"-").concat(Y))?(r.stackOrder="seriesDesc",r.areaStyle=void 0):(r.stackOrder="seriesAsc",S&&t===C&&(r.areaStyle={color:A+"3F"}))),!m.hideLegend){var s,c=b?"mean"===t:!1===Z;c&&x.push({id:n,name:y,color:r.color,borderColor:null===(s=r.itemStyle)||void 0===s?void 0:s.borderColor}),Z=Z||c}g.push(r),o.push(n)}});var V=null,E=null;d.forEach(function(t){var a=new Date(t.start);if(V!==a){V=a;var e=[];_.forEach(function(a){var i=[];if("sum"===a)null==E?(i.push(0),E=t.sum):i.push((t.sum||0)-E);else if(a===C&&"line"===m.chartType&&S&&!m._hiddenStats.has("".concat(n,"-").concat(Y))){var r=t[C]||0;i.push(Math.abs(r-(t[Y]||0))),i.push(r)}else{var s;i.push(null!==(s=t[a])&&void 0!==s?s:null)}e.push(i)}),m._hiddenStats.has(n)||function(t,a,e){e.length&&(t>a||(g.forEach(function(a,i){"line"===m.chartType&&f&&v&&f.getTime()!==t.getTime()&&(a.data.push(m._transformDataValue([f].concat((0,u.A)(v[i])))),a.data.push([f,null])),a.data.push(m._transformDataValue([t].concat((0,u.A)(e[i]))))}),v=e,f=a))}(a,new Date(t.end),e)}}),Array.prototype.push.apply(r,g),Array.prototype.push.apply(s,x)}),c&&(this.unit=c),s.forEach(function(t){var a=t.id,e=t.name,i=t.color,n=t.borderColor;r.push({id:a,name:e,color:i,itemStyle:{borderColor:n},type:m.chartType,data:[],xAxisIndex:1})}),this._chartData=r,s.length!==(null===(a=this._legendData)||void 0===a?void 0:a.length)&&(this._legendData=s.length>1?s.map(function(t){return{id:t.id,name:t.name}}):void 0),this._statisticIds=o;case 5:return t.a(2)}},t,this)})),function(){return e.apply(this,arguments)})},{key:"_transformDataValue",value:function(t){return"bar"===this.chartType&&t[1]&&t[1]<0?{value:t,itemStyle:{borderRadius:[0,0,4,4]}}:t}},{key:"_clampYAxis",value:function(t){if(this.logarithmicScale){if("number"==typeof t)return Math.max(t,Number.EPSILON);if("function"==typeof t)return function(a){return Math.max(t(a),Number.EPSILON)}}return t}},{key:"_roundYAxis",value:function(t,a){return Math.abs(t)<1?t:a(t)}}]);var e}(x.WF);V.styles=(0,x.AH)(c||(c=(0,l.A)([":host{display:block;min-height:60px}.info{text-align:center;line-height:60px;color:var(--secondary-text-color)}"]))),(0,g.Cg)([(0,A.MZ)({attribute:!1})],V.prototype,"hass",void 0),(0,g.Cg)([(0,A.MZ)({attribute:!1})],V.prototype,"statisticsData",void 0),(0,g.Cg)([(0,A.MZ)({attribute:!1})],V.prototype,"metadata",void 0),(0,g.Cg)([(0,A.MZ)({attribute:!1})],V.prototype,"names",void 0),(0,g.Cg)([(0,A.MZ)()],V.prototype,"unit",void 0),(0,g.Cg)([(0,A.MZ)({attribute:!1})],V.prototype,"startTime",void 0),(0,g.Cg)([(0,A.MZ)({attribute:!1})],V.prototype,"endTime",void 0),(0,g.Cg)([(0,A.MZ)({attribute:!1,type:Array})],V.prototype,"statTypes",void 0),(0,g.Cg)([(0,A.MZ)({attribute:!1})],V.prototype,"chartType",void 0),(0,g.Cg)([(0,A.MZ)({attribute:!1,type:Number})],V.prototype,"minYAxis",void 0),(0,g.Cg)([(0,A.MZ)({attribute:!1,type:Number})],V.prototype,"maxYAxis",void 0),(0,g.Cg)([(0,A.MZ)({attribute:"fit-y-data",type:Boolean})],V.prototype,"fitYData",void 0),(0,g.Cg)([(0,A.MZ)({attribute:"hide-legend",type:Boolean})],V.prototype,"hideLegend",void 0),(0,g.Cg)([(0,A.MZ)({attribute:"logarithmic-scale",type:Boolean})],V.prototype,"logarithmicScale",void 0),(0,g.Cg)([(0,A.MZ)({attribute:"is-loading-data",type:Boolean})],V.prototype,"isLoadingData",void 0),(0,g.Cg)([(0,A.MZ)({attribute:"click-for-more-info",type:Boolean})],V.prototype,"clickForMoreInfo",void 0),(0,g.Cg)([(0,A.MZ)()],V.prototype,"period",void 0),(0,g.Cg)([(0,A.MZ)({attribute:"days-to-show",type:Number})],V.prototype,"daysToShow",void 0),(0,g.Cg)([(0,A.MZ)({type:String})],V.prototype,"height",void 0),(0,g.Cg)([(0,A.MZ)({attribute:"expand-legend",type:Boolean})],V.prototype,"expandLegend",void 0),(0,g.Cg)([(0,A.wk)()],V.prototype,"_chartData",void 0),(0,g.Cg)([(0,A.wk)()],V.prototype,"_legendData",void 0),(0,g.Cg)([(0,A.wk)()],V.prototype,"_statisticIds",void 0),(0,g.Cg)([(0,A.wk)()],V.prototype,"_chartOptions",void 0),(0,g.Cg)([(0,A.wk)()],V.prototype,"_hiddenStats",void 0),V=(0,g.Cg)([(0,A.EM)("statistics-chart")],V),i()}catch(E){i(E)}})},5745:function(t,a,e){var i=e(43080),n=e(44734),r=e(69683),s=e(6454),o=e(40445),c=e(82339),h=e(77845),u=function(t){function a(){return(0,n.A)(this,a),(0,r.A)(this,a,arguments)}return(0,s.A)(a,t),(0,i.A)(a)}(c.Y);u=(0,o.Cg)([(0,h.EM)("ha-chip-set")],u)},2846:function(t,a,e){e.d(a,{G:function(){return f},J:function(){return y}});var i,n,r=e(44734),s=e(43080),o=e(69683),c=e(6454),h=e(72153),u=e(40445),l=e(97154),d=e(82553),p=e(96196),m=e(77845),y=(e(54276),[d.R,(0,p.AH)(i||(i=(0,h.A)([":host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--secondary-text-color)}md-item{overflow:var(--md-item-overflow,hidden);align-items:var(--md-item-align-items,center);gap:var(--ha-md-list-item-gap,16px)}"])))]),f=function(t){function a(){return(0,r.A)(this,a),(0,o.A)(this,a,arguments)}return(0,c.A)(a,t),(0,s.A)(a,[{key:"renderRipple",value:function(){return"text"===this.type?p.s6:(0,p.qy)(n||(n=(0,h.A)(['<ha-ripple part="ripple" for="item" ?disabled="','"></ha-ripple>'])),this.disabled&&"link"!==this.type)}}])}(l.n);f.styles=y,f=(0,u.Cg)([(0,m.EM)("ha-md-list-item")],f)},22348:function(t,a,e){e.d(a,{V:function(){return n}});var i=e(37177),n=function(t){return!!t.auth.external&&i.n}},37177:function(t,a,e){e.d(a,{n:function(){return i}});e(27495),e(90906);var i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}]);
//# sourceMappingURL=37458.9ac618bf003e995a.js.map