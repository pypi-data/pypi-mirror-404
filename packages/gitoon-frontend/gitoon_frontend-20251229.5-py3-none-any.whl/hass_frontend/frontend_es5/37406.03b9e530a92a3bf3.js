"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["37406"],{39039:function(e,t,i){i.d(t,{r:function(){return l}});var n=i(43080),r=i(44734),o=i(69683),s=i(6454),a=i(68790),l=(i(16280),function(e){function t(e,i,n){var s;return(0,r.A)(this,t),(s=(0,o.A)(this,t,[e])).name="GUISupportError",s.warnings=i,s.errors=n,s}return(0,s.A)(t,e),(0,n.A)(t)}((0,a.A)(Error)))},91322:function(e,t,i){i.a(e,async function(e,n){try{i.d(t,{m:function(){return T}});var r,o,s,a,l,u,h,c,d,g,f,p,_=i(72153),m=i(61397),v=i(50264),y=i(44734),E=i(43080),C=i(69683),k=i(6454),A=i(25460),b=(i(28706),i(23792),i(62062),i(18111),i(7588),i(61701),i(69085),i(79432),i(26099),i(3362),i(47764),i(23500),i(62953),i(40445)),w=i(96196),Y=i(77845),M=i(57378),x=i(1087),S=i(78978),U=i(9899),q=i(19459),I=(i(38962),i(65829)),G=i(10763),P=i(39039),z=e([I,G]);[I,G]=z.then?(await z)():z;var T=function(e){function t(){var e;(0,y.A)(this,t);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=(0,C.A)(this,t,[].concat(n)))._guiMode=!0,e._yamlError=!1,e._loading=!1,e._loadCount=0,e._debounceYamlError=(0,U.s)(function(){e._pendingYamlError&&(e._yamlError=!0,e._errors=[e._pendingYamlError],e._pendingYamlError=void 0,e._setConfig())},2e3),e}return(0,k.A)(t,e),(0,E.A)(t,[{key:"value",get:function(){return this._config},set:function(e){this._config&&(0,q.b)(e,this._config)||(this._config=e,this._errors=void 0,this._setConfig())}},{key:"_setConfig",value:function(){var e=this;if(!this._errors)try{this._updateConfigElement()}catch(t){this._errors=[t.message]}this.updateComplete.then(function(){var t;(0,x.r)(e,"config-changed",{config:e.value,error:null===(t=e._errors)||void 0===t?void 0:t.join(", "),guiModeAvailable:!(e.hasWarning||e.hasError||!1===e._guiSupported)})})}},{key:"hasWarning",get:function(){return void 0!==this._warnings&&this._warnings.length>0}},{key:"hasError",get:function(){return void 0!==this._errors&&this._errors.length>0}},{key:"GUImode",get:function(){return this._guiMode},set:function(e){var t=this;this._guiMode=e,this.updateComplete.then(function(){(0,x.r)(t,"GUImode-changed",{guiMode:e,guiModeAvailable:!(t.hasWarning||t.hasError||!1===t._guiSupported)})})}},{key:"toggleMode",value:function(){this.GUImode=!this.GUImode}},{key:"focusYamlEditor",value:function(){var e;null!==(e=this._configElement)&&void 0!==e&&e.focusYamlEditor&&this._configElement.focusYamlEditor(),this._yamlEditor&&this._yamlEditor.focus()}},{key:"getConfigElement",value:(G=(0,v.A)((0,m.A)().m(function e(){return(0,m.A)().w(function(e){for(;;)if(0===e.n)return e.a(2,void 0)},e)})),function(){return G.apply(this,arguments)})},{key:"getConfigForm",value:(I=(0,v.A)((0,m.A)().m(function e(){return(0,m.A)().w(function(e){for(;;)if(0===e.n)return e.a(2,void 0)},e)})),function(){return I.apply(this,arguments)})},{key:"renderConfigElement",value:function(){return(0,w.qy)(r||(r=(0,_.A)(["",""])),this._configElement)}},{key:"_renderSubElement",value:function(){return(0,w.qy)(o||(o=(0,_.A)([' <hui-sub-element-editor .hass="','" .config="','" @go-back="','" @config-changed="','"> </hui-sub-element-editor> '])),this.hass,this._subElementEditorConfig,this._goBack,this._subElementChanged)}},{key:"_subElementChanged",value:function(e){var t,i;e.stopPropagation();var n=e.detail.config;this._subElementEditorConfig=Object.assign(Object.assign({},this._subElementEditorConfig),{},{elementConfig:n}),null===(t=(i=this._subElementEditorConfig).saveElementConfig)||void 0===t||t.call(i,n)}},{key:"_goBack",value:function(e){e.stopPropagation(),this._subElementEditorConfig=void 0}},{key:"_editSubElement",value:(Y=(0,v.A)((0,m.A)().m(function e(t){return(0,m.A)().w(function(e){for(;;)switch(e.n){case 0:return t.stopPropagation(),e.n=1,Promise.all([i.e("26767"),i.e("80131"),i.e("47251"),i.e("22397"),i.e("99788"),i.e("72995"),i.e("21543"),i.e("8851"),i.e("12009"),i.e("80868"),i.e("67862"),i.e("55076"),i.e("12751"),i.e("42758"),i.e("33908"),i.e("99143"),i.e("66990"),i.e("90758"),i.e("81804"),i.e("17960")]).then(i.bind(i,81287));case 1:this._subElementEditorConfig={type:t.detail.type,elementConfig:t.detail.config,context:t.detail.context,saveElementConfig:t.detail.saveConfig};case 2:return e.a(2)}},e,this)})),function(e){return Y.apply(this,arguments)})},{key:"render",value:function(){return(0,w.qy)(s||(s=(0,_.A)([' <div class="wrapper"> '," "," "," "," </div> "])),this.GUImode?(0,w.qy)(a||(a=(0,_.A)([' <div class="gui-editor" @edit-sub-element="','"> '," </div> "])),this._editSubElement,this._loading?(0,w.qy)(l||(l=(0,_.A)([' <ha-spinner class="center margin-bot"></ha-spinner> ']))):(0,M.P)(this._subElementEditorConfig?this._renderSubElement():this.renderConfigElement())):(0,w.qy)(u||(u=(0,_.A)([' <div class="yaml-editor"> <ha-yaml-editor .defaultValue="','" autofocus .hass="','" @value-changed="','" @blur="','" @keydown="','" dir="ltr" .showErrors="','"></ha-yaml-editor> </div> '])),this._config,this.hass,this._handleYAMLChanged,this._onBlurYaml,this._ignoreKeydown,!1),!1===this._guiSupported&&!1===this._loading?(0,w.qy)(h||(h=(0,_.A)([' <ha-alert alert-type="info" .title="','"> '," <br> "," </ha-alert> "])),this.hass.localize("ui.errors.config.visual_editor_not_supported"),this.hass.localize("ui.errors.config.visual_editor_not_supported_reason_type"),this.hass.localize("ui.errors.config.edit_in_yaml_supported")):w.s6,this.hasError?(0,w.qy)(c||(c=(0,_.A)([' <ha-alert alert-type="error" .title="','"> <ul> '," </ul> </ha-alert> "])),this.hass.localize("ui.errors.config.configuration_error"),this._errors.map(function(e){return(0,w.qy)(d||(d=(0,_.A)(["<li>","</li>"])),e)})):w.s6,this.hasWarning?(0,w.qy)(g||(g=(0,_.A)([' <ha-alert alert-type="warning" .title="','"> <ul> '," </ul> "," </ha-alert> "])),this.hass.localize("ui.errors.config.visual_editor_not_supported"),this._warnings.map(function(e){return(0,w.qy)(f||(f=(0,_.A)(["<li>","</li>"])),e)}),this.hass.localize("ui.errors.config.edit_in_yaml_supported")):w.s6)}},{key:"updated",value:function(e){(0,A.A)(t,"updated",this,3)([e]),this._configElement&&e.has("hass")&&(this._configElement.hass=this.hass),this._configElement&&"lovelace"in this._configElement&&e.has("lovelace")&&(this._configElement.lovelace=this.lovelace),this._configElement&&e.has("context")&&(this._configElement.context=this.context)}},{key:"_handleUIConfigChanged",value:function(e){if(e.stopPropagation(),this.GUImode){var t=e.detail.config;Object.keys(t).forEach(function(e){void 0===t[e]&&delete t[e]}),this.value=t}}},{key:"_handleYAMLChanged",value:function(e){e.stopPropagation();var t=e.detail.value;e.detail.isValid?(this._config=t,this._errors=void 0,this._pendingYamlError=void 0,this._yamlError=!1,this._debounceYamlError.cancel(),this._setConfig()):this._yamlError?this._errors=[e.detail.errorMsg]:(this._pendingYamlError=e.detail.errorMsg,this._debounceYamlError())}},{key:"_onBlurYaml",value:function(){this._debounceYamlError.cancel(),this._pendingYamlError&&(this._yamlError=!0,this._errors=[this._pendingYamlError],this._pendingYamlError=void 0,this._setConfig())}},{key:"unloadConfigElement",value:(b=(0,v.A)((0,m.A)().m(function e(){return(0,m.A)().w(function(e){for(;;)switch(e.n){case 0:this._configElement=void 0,this._guiSupported=void 0;case 1:return e.a(2)}},e,this)})),function(){return b.apply(this,arguments)})},{key:"loadConfigElement",value:(p=(0,v.A)((0,m.A)().m(function e(){var t,n,r,o,s,a,l=this;return(0,m.A)().w(function(e){for(;;)switch(e.n){case 0:if(!this._configElement){e.n=1;break}return e.a(2);case 1:return e.n=2,this.getConfigElement();case 2:if(t=e.v){e.n=5;break}return e.n=3,this.getConfigForm();case 3:if(!(n=e.v)){e.n=5;break}return e.n=4,i.e("15106").then(i.bind(i,15737));case 4:t=document.createElement("hui-form-editor"),r=n.schema,o=n.assertConfig,s=n.computeLabel,a=n.computeHelper,t.schema=r,s&&(t.computeLabel=s),a&&(t.computeHelper=a),o&&(t.assertConfig=o);case 5:t?(t.hass=this.hass,"lovelace"in t&&(t.lovelace=this.lovelace),t.context=this.context,t.addEventListener("config-changed",function(e){return l._handleUIConfigChanged(e)}),this._guiSupported=!0):this._guiSupported=!1,this._configElement=t;case 6:return e.a(2)}},e,this)})),function(){return p.apply(this,arguments)})},{key:"_updateConfigElement",value:(n=(0,v.A)((0,m.A)().m(function e(){var t,i,n,r,o;return(0,m.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.value){e.n=1;break}return e.a(2);case 1:return t=++this._loadCount,e.p=2,this._errors=void 0,this._warnings=void 0,e.n=3,this.loadConfigElement();case 3:if(!this._configElement){e.n=7;break}e.p=4,this._configElement.setConfig(this.value),e.n=6;break;case 5:throw e.p=5,r=e.v,i=(0,S._)(this.hass,r),new P.r("Config is not supported",i.warnings,i.errors);case 6:e.n=8;break;case 7:this._guiSupported=!1,this.GUImode=!1;case 8:e.n=11;break;case 9:if(e.p=9,o=e.v,t===this._loadCount){e.n=10;break}return e.a(2);case 10:o instanceof P.r?(this._warnings=null!==(n=o.warnings)&&void 0!==n?n:[o.message],this._errors=o.errors||void 0):this._errors=[o.message],this.GUImode=!1;case 11:return e.p=11,this._loading=!1,e.f(11);case 12:return e.a(2)}},e,this,[[4,5],[2,9,11,12]])})),function(){return n.apply(this,arguments)})},{key:"_ignoreKeydown",value:function(e){e.stopPropagation()}}]);var n,p,b,Y,I,G}(w.WF);T.styles=(0,w.AH)(p||(p=(0,_.A)([":host{display:flex}.wrapper{width:100%}.gui-editor,.yaml-editor{padding:8px 0px}ha-code-editor{--code-mirror-max-height:calc(100vh - 245px)}ha-spinner{display:block;margin:auto}"]))),(0,b.Cg)([(0,Y.MZ)({attribute:!1})],T.prototype,"hass",void 0),(0,b.Cg)([(0,Y.MZ)({attribute:!1})],T.prototype,"lovelace",void 0),(0,b.Cg)([(0,Y.MZ)({attribute:!1})],T.prototype,"context",void 0),(0,b.Cg)([(0,Y.wk)()],T.prototype,"_config",void 0),(0,b.Cg)([(0,Y.wk)()],T.prototype,"_configElement",void 0),(0,b.Cg)([(0,Y.wk)()],T.prototype,"_subElementEditorConfig",void 0),(0,b.Cg)([(0,Y.wk)()],T.prototype,"_guiMode",void 0),(0,b.Cg)([(0,Y.wk)()],T.prototype,"_errors",void 0),(0,b.Cg)([(0,Y.wk)()],T.prototype,"_pendingYamlError",void 0),(0,b.Cg)([(0,Y.wk)()],T.prototype,"_yamlError",void 0),(0,b.Cg)([(0,Y.wk)()],T.prototype,"_warnings",void 0),(0,b.Cg)([(0,Y.wk)()],T.prototype,"_guiSupported",void 0),(0,b.Cg)([(0,Y.wk)()],T.prototype,"_loading",void 0),(0,b.Cg)([(0,Y.P)("ha-yaml-editor")],T.prototype,"_yamlEditor",void 0),n()}catch(L){n(L)}})},63277:function(e,t,i){i.a(e,async function(e,n){try{i.d(t,{U:function(){return p}});var r=i(61397),o=i(50264),s=i(44734),a=i(43080),l=i(69683),u=i(25460),h=i(6454),c=(i(16280),i(40445)),d=i(77845),g=i(91322),f=e([g]),p=function(e){function t(){return(0,s.A)(this,t),(0,l.A)(this,t,arguments)}return(0,h.A)(t,e),(0,a.A)(t,[{key:"configElementType",get:function(){return this.value?this.value.type:void 0}},{key:"loadConfigElement",value:(i=(0,o.A)((0,r.A)().m(function e(){return(0,r.A)().w(function(e){for(;;)switch(e.n){case 0:if(this._configElementType===this.configElementType){e.n=2;break}if(this.unloadConfigElement(),this.configElementType){e.n=1;break}throw new Error(this.hass.localize("ui.errors.config.no_type_provided"));case 1:this._configElementType=this.configElementType;case 2:return e.a(2,(0,u.A)(t,"loadConfigElement",this,3)([]))}},e,this)})),function(){return i.apply(this,arguments)})}]);var i}((g=(f.then?(await f)():f)[0]).m);(0,c.Cg)([(0,d.wk)()],p.prototype,"_configElementType",void 0),n()}catch(_){n(_)}})}}]);
//# sourceMappingURL=37406.03b9e530a92a3bf3.js.map