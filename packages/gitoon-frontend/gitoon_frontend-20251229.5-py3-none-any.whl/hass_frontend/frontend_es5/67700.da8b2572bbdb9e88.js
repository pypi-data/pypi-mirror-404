"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["67700"],{34296:function(e,t,i){var a,n,r,o,s=i(72153),c=i(44734),l=i(43080),u=i(69683),h=i(6454),d=i(25460),p=(i(28706),i(69085),i(40445)),v=i(96229),f=i(26069),y=i(91735),g=i(42034),b=i(96196),m=i(77845),_=function(e){function t(){var e;(0,c.A)(this,t);for(var i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=(0,u.A)(this,t,[].concat(a))).filled=!1,e.active=!1,e}return(0,h.A)(t,e),(0,l.A)(t,[{key:"renderOutline",value:function(){return this.filled?(0,b.qy)(a||(a=(0,s.A)(['<span class="filled"></span>']))):(0,d.A)(t,"renderOutline",this,3)([])}},{key:"getContainerClasses",value:function(){return Object.assign(Object.assign({},(0,d.A)(t,"getContainerClasses",this,3)([])),{},{active:this.active})}},{key:"renderPrimaryContent",value:function(){return(0,b.qy)(n||(n=(0,s.A)([' <span class="leading icon" aria-hidden="true"> ',' </span> <span class="label">','</span> <span class="touch"></span> <span class="trailing leading icon" aria-hidden="true"> '," </span> "])),this.renderLeadingIcon(),this.label,this.renderTrailingIcon())}},{key:"renderTrailingIcon",value:function(){return(0,b.qy)(r||(r=(0,s.A)(['<slot name="trailing-icon"></slot>'])))}}])}(v.k);_.styles=[y.R,g.R,f.R,(0,b.AH)(o||(o=(0,s.A)([":host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-assist-chip-container-shape:var(\n          --ha-assist-chip-container-shape,\n          16px\n        );--md-assist-chip-outline-color:var(--outline-color);--md-assist-chip-label-text-weight:400}.filled{display:flex;pointer-events:none;border-radius:inherit;inset:0;position:absolute;background-color:var(--ha-assist-chip-filled-container-color)}::slotted([slot=icon]),::slotted([slot=trailing-icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px);font-size:var(--_label-text-size)!important}.trailing.icon ::slotted(*),.trailing.icon svg{margin-inline-end:unset;margin-inline-start:var(--_icon-label-space)}::before{background:var(--ha-assist-chip-container-color,transparent);opacity:var(--ha-assist-chip-container-opacity, 1)}:where(.active)::before{background:var(--ha-assist-chip-active-container-color);opacity:var(--ha-assist-chip-active-container-opacity)}.label{font-family:var(--ha-font-family-body)}"])))],(0,p.Cg)([(0,m.MZ)({type:Boolean,reflect:!0})],_.prototype,"filled",void 0),(0,p.Cg)([(0,m.MZ)({type:Boolean})],_.prototype,"active",void 0),_=(0,p.Cg)([(0,m.EM)("ha-assist-chip")],_)},31580:function(e,t,i){i.d(t,{J8:function(){return n},Rr:function(){return o},b9:function(){return a},iV:function(){return r}});i(28706),i(94490),i(34782),i(26099),i(58940),i(38781),i(68156);var a=function(e){var t=e;return"string"==typeof e&&(t=parseInt(e,16)),"0x"+t.toString(16).padStart(4,"0")},n=function(e,t){var i=e.user_given_name?e.user_given_name:e.name,a=t.user_given_name?t.user_given_name:t.name;return i.localeCompare(a)},r=function(e,t){var i=e.name,a=t.name;return i.localeCompare(a)},o=function(e){return"".concat(e.name," (Endpoint id: ").concat(e.endpoint_id,", Id: ").concat(a(e.id),", Type: ").concat(e.type,")")}},94728:function(e,t,i){i.a(e,async function(e,a){try{i.r(t),i.d(t,{ZHANetworkVisualizationPage:function(){return A}});var n,r,o=i(61397),s=i(50264),c=i(72153),l=i(44734),u=i(43080),h=i(69683),d=i(6454),p=i(25460),v=(i(28706),i(2008),i(50113),i(74423),i(44114),i(26910),i(18111),i(20116),i(7588),i(69085),i(26099),i(58940),i(27495),i(25440),i(23500),i(40445)),f=i(96196),y=i(77845),g=i(76774),b=i(91926),m=i(7358),_=i(84621),k=(i(31168),i(31580)),w=i(63670),z=e([m,w]);[m,w]=z.then?(await z)():z;var A=function(e){function t(){var e;(0,l.A)(this,t);for(var i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=(0,h.A)(this,t,[].concat(a))).narrow=!1,e.isWide=!1,e._networkData={nodes:[],links:[],categories:[]},e._devices=[],e._tooltipFormatter=function(t){var i=t.dataType,a=t.data,n=t.name;if("edge"===i){var r,o=a.source,s=a.target,c=a.value,l=e._networkData.nodes.find(function(e){return e.id===s}).name,u=e._networkData.nodes.find(function(e){return e.id===o}).name,h="".concat(u," → ").concat(l).concat(c?" <b>LQI:</b> ".concat(c):""),d=null===(r=e._networkData.links.find(function(e){return e.source===o&&e.target===s}))||void 0===r?void 0:r.reverseValue;return d?"".concat(h,"<br>").concat(l," → ").concat(u," <b>LQI:</b> ").concat(d):h}var p=e._devices.find(function(e){return e.ieee===a.id});if(!p)return n;var v="<b>IEEE: </b>".concat(p.ieee);v+="<br><b>".concat(e.hass.localize("ui.panel.config.zha.visualization.device_type"),": </b>").concat(p.device_type.replace("_"," ")),null!=p.nwk&&(v+="<br><b>NWK: </b>".concat((0,k.b9)(p.nwk))),null!=p.manufacturer&&null!=p.model?v+="<br><b>".concat(e.hass.localize("ui.panel.config.zha.visualization.device"),": </b>").concat(p.manufacturer," ").concat(p.model):v+="<br><b>".concat(e.hass.localize("ui.panel.config.zha.visualization.device_not_in_db"),"</b>");var f=e.hass.devices[p.device_reg_id];if(f){var y=(0,g.w)(f,e.hass).area;y&&(v+="<br><b>".concat(e.hass.localize("ui.panel.config.zha.visualization.area"),": </b>").concat(y.name))}return v},e}return(0,d.A)(t,e),(0,u.A)(t,[{key:"firstUpdated",value:function(e){(0,p.A)(t,"firstUpdated",this,3)([e]),this.hass&&this._fetchData()}},{key:"render",value:function(){return(0,f.qy)(n||(n=(0,c.A)([' <hass-tabs-subpage .tabs="','" .hass="','" .narrow="','" .isWide="','" .route="','" header="','"> <ha-network-graph .hass="','" .data="','" .tooltipFormatter="','" @chart-click="','"> <ha-icon-button slot="button" class="refresh-button" .path="','" @click="','" label="','"></ha-icon-button> </ha-network-graph> </hass-tabs-subpage> '])),w.zhaTabs,this.hass,this.narrow,this.isWide,this.route,this.hass.localize("ui.panel.config.zha.visualization.header"),this.hass,this._networkData,this._tooltipFormatter,this._handleChartClick,"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",this._refreshTopology,this.hass.localize("ui.panel.config.zha.visualization.refresh_topology"))}},{key:"_fetchData",value:(a=(0,s.A)((0,o.A)().m(function e(){return(0,o.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,_.Uc)(this.hass);case 1:this._devices=e.v,this._networkData=this._createChartData(this._devices);case 2:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"_refreshTopology",value:(i=(0,s.A)((0,o.A)().m(function e(){return(0,o.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,_.xU)(this.hass);case 1:return e.n=2,this._fetchData();case 2:return e.a(2)}},e,this)})),function(){return i.apply(this,arguments)})},{key:"_handleChartClick",value:function(e){if("node"===e.detail.dataType&&"pointer"===e.detail.event.target.cursor){var t=e.detail.data.id,i=this._devices.find(function(e){return e.ieee===t});i&&(0,b.o)("/config/devices/device/".concat(i.device_reg_id))}}},{key:"_createChartData",value:function(e){var t=this,i=getComputedStyle(this),a=i.getPropertyValue("--primary-color"),n=i.getPropertyValue("--cyan-color"),r=i.getPropertyValue("--teal-color"),o=i.getPropertyValue("--error-color"),s=[],c=[],l=[{name:this.hass.localize("ui.panel.config.zha.visualization.coordinator"),symbol:"roundRect",itemStyle:{color:a}},{name:this.hass.localize("ui.panel.config.zha.visualization.router"),symbol:"circle",itemStyle:{color:n}},{name:this.hass.localize("ui.panel.config.zha.visualization.end_device"),symbol:"circle",itemStyle:{color:r}},{name:this.hass.localize("ui.panel.config.zha.visualization.offline"),symbol:"circle",itemStyle:{color:o}}];return e.forEach(function(l){var u,h="Coordinator"===l.device_type;u=l.available?h?0:"Router"===l.device_type?1:2:3;var d=t.hass.devices[l.device_reg_id],p=d?(0,g.w)(d,t.hass).area:void 0;s.push({id:l.ieee,name:l.user_given_name||l.name||l.ieee,context:null==p?void 0:p.name,category:u,value:h?3:"Router"===l.device_type?2:1,symbolSize:h?40:"Router"===l.device_type?30:20,symbol:h?"roundRect":"circle",itemStyle:{color:l.available?h?a:"Router"===l.device_type?n:r:o},polarDistance:0===u?0:1===u?.5:.9,fixed:h});var v=c.filter(function(e){return e.source===l.ieee||e.target===l.ieee});if(l.routes&&l.routes.length>0)l.routes.forEach(function(e){var n=l.neighbors.find(function(t){return t.nwk===e.next_hop});if(n){var r=v.find(function(e){return e.source===n.ieee||e.target===n.ieee});if(r){var o;if(r.source===l.ieee)r.value=Math.max(r.value,parseInt(n.lqi));else r.reverseValue=Math.max(null!==(o=r.reverseValue)&&void 0!==o?o:0,parseInt(n.lqi));var s=t._getLQIWidth(parseInt(n.lqi));r.symbolSize=s/4*6+3,r.lineStyle=Object.assign(Object.assign({},r.lineStyle),{},{width:s,color:"Active"===e.route_status?a:r.lineStyle.color,type:["Child","Parent"].includes(n.relationship)?"solid":r.lineStyle.type})}else{var u=t._getLQIWidth(parseInt(n.lqi)),h={source:l.ieee,target:n.ieee,value:parseInt(n.lqi),lineStyle:{width:u,color:"Active"===e.route_status?a:i.getPropertyValue("--dark-primary-color"),type:["Child","Parent"].includes(n.relationship)?"solid":"dotted"},symbolSize:u/4*6+3,ignoreForceLayout:"0x0000"!==e.dest_nwk};c.push(h),v.push(h)}}});else if(0===v.length){var f,y=null!==(f=l.neighbors)&&void 0!==f?f:[];0===y.length&&e.forEach(function(e){if(e.neighbors&&e.neighbors.length>0){var t=e.neighbors.find(function(e){return e.ieee===l.ieee});t&&y.push({ieee:e.ieee,lqi:t.lqi})}});var b=y.sort(function(e,t){return parseInt(t.lqi)-parseInt(e.lqi)})[0];b&&c.push({source:l.ieee,target:b.ieee,value:parseInt(b.lqi),symbolSize:5,lineStyle:{width:1,color:i.getPropertyValue("--dark-primary-color"),type:"dotted"},ignoreForceLayout:!0})}}),e.forEach(function(e){var t;"Coordinator"===e.device_type?c.forEach(function(t){t.source!==e.ieee&&t.target!==e.ieee||(t.ignoreForceLayout=!1)}):!c.some(function(i){if(i.source===e.ieee||i.target===e.ieee){var a,n;if(!i.ignoreForceLayout)return!0;i.value>(null!==(a=null===(n=t)||void 0===n?void 0:n.value)&&void 0!==a?a:-1)&&(t=i)}return!1})&&t&&(t.ignoreForceLayout=!1)}),{nodes:s,links:c,categories:l}}},{key:"_getLQIWidth",value:function(e){return e>200?3:e>100?2:1}}],[{key:"styles",get:function(){return[(0,f.AH)(r||(r=(0,c.A)(["ha-network-graph{height:100%}"])))]}}]);var i,a}(f.WF);(0,v.Cg)([(0,y.MZ)({attribute:!1})],A.prototype,"hass",void 0),(0,v.Cg)([(0,y.MZ)({attribute:!1})],A.prototype,"route",void 0),(0,v.Cg)([(0,y.MZ)({type:Boolean,reflect:!0})],A.prototype,"narrow",void 0),(0,v.Cg)([(0,y.MZ)({attribute:"is-wide",type:Boolean})],A.prototype,"isWide",void 0),(0,v.Cg)([(0,y.wk)()],A.prototype,"_networkData",void 0),(0,v.Cg)([(0,y.wk)()],A.prototype,"_devices",void 0),A=(0,v.Cg)([(0,y.EM)("zha-network-visualization-page")],A),a()}catch(C){a(C)}})},69235:function(e,t,i){i.a(e,async function(e,t){try{i(23792),i(26099),i(3362),i(47764),i(62953);"function"!=typeof window.ResizeObserver&&(window.ResizeObserver=(await i.e("71055").then(i.bind(i,52370))).default),t()}catch(a){t(a)}},1)}}]);
//# sourceMappingURL=67700.da8b2572bbdb9e88.js.map