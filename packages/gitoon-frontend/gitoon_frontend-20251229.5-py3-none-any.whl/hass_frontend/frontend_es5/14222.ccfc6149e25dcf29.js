"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["14222"],{23528:function(t,e,n){n.a(t,async function(t,i){try{n.d(e,{$3:function(){return y},$O:function(){return C},$j:function(){return m},ED:function(){return o},JE:function(){return E},OQ:function(){return k},PU:function(){return M},Ph:function(){return g},Uf:function(){return A},W1:function(){return p},Wr:function(){return _},Z:function(){return l},gF:function(){return v},iY:function(){return S},jU:function(){return c},nN:function(){return w},p3:function(){return d},pJ:function(){return f},r_:function(){return u},sz:function(){return h}});n(74423),n(18111),n(13579),n(62953);var a=n(28978),r=n(380),s=t([r]);r=(s.then?(await s)():s)[0];var o=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({});const c=["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"],u=["L","gal","ft³","m³","CCF","MCF"],l=t=>t.sendMessagePromise({type:"recorder/info"}),d=(t,e)=>t.callWS({type:"recorder/list_statistic_ids",statistic_type:e}),_=(t,e)=>t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e}),h=(t,e,n,i,a="hour",r,s)=>t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:null==n?void 0:n.toISOString(),statistic_ids:i,period:a,units:r,types:s}),f=(t,e,n,i)=>t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:i,fixed_period:n.fixed_period?{start_time:n.fixed_period.start instanceof Date?n.fixed_period.start.toISOString():n.fixed_period.start,end_time:n.fixed_period.end instanceof Date?n.fixed_period.end.toISOString():n.fixed_period.end}:void 0,calendar:n.calendar?{..."week"===n.calendar.period?{first_weekday:(0,r.D)(t.locale).substring(0,3)}:{},...n.calendar}:void 0,rolling_window:n.rolling_window}),g=t=>t.callWS({type:"recorder/validate_statistics"}),p=(t,e,n,i)=>t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:n,unit_class:i}),y=(t,e)=>t.callWS({type:"recorder/clear_statistics",statistic_ids:e}),m=t=>{let e=null;if(!t)return null;for(const n of t)null!==n.change&&void 0!==n.change&&(null===e?e=n.change:e+=n.change);return e},v=(t,e)=>{let n=null;for(const i of e){if(!(i in t))continue;const e=m(t[i]);null!==e&&(null===n?n=e:n+=e)}return n},S=(t,e)=>t.some(t=>void 0!==t[e]&&null!==t[e]),x=["mean","min","max"],b=["sum","state","change"],w=(t,e)=>!(!x.includes(e)||0===t.mean_type)||!(!b.includes(e)||!t.has_sum),A=(t,e,n,i,a)=>{const r=new Date(n).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:r,adjustment:i,adjustment_unit_of_measurement:a})},C=(t,e,n)=>{const i=t.states[e];return i?(0,a.u)(i):(null==n?void 0:n.name)||e},E=(t,e,n)=>{let i;var a;e&&(i=null===(a=t.states[e])||void 0===a?void 0:a.attributes.unit_of_measurement);return void 0===i?null==n?void 0:n.statistics_unit_of_measurement:i},k=t=>t.includes(":"),M=t=>t.callWS({type:"recorder/update_statistics_issues"});i()}catch(c){i(c)}})},57545:function(t,e,n){n.a(t,async function(t,i){try{n.r(e);var a,r,s,o,c,u,l=n(72153),d=n(44734),_=n(43080),h=n(69683),f=n(6454),g=(n(28706),n(72712),n(18111),n(18237),n(26099),n(16034),n(40445)),p=n(96196),y=n(77845),m=n(6415),v=n(79791),S=(n(76776),n(5127)),x=(n(67094),n(34127)),b=n(38114),w=n(54706),A=n(85979),C=n(91874),E=n(784),k=t([S,x,b,C]);[S,x,b,C]=k.then?(await k)():k;var M={maximumFractionDigits:0},W=function(t){function e(){var t;(0,d.A)(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=(0,h.A)(this,e,[].concat(i))).hassSubscribeRequiredHostProps=["_config"],t}return(0,f.A)(e,t),(0,_.A)(e,[{key:"getCardSize",value:function(){return 4}},{key:"setConfig",value:function(t){this._config=t}},{key:"hassSubscribe",value:function(){var t,e=this;return[(0,b.tb)(this.hass,{key:null===(t=this._config)||void 0===t?void 0:t.collection_key}).subscribe(function(t){e._data=t})]}},{key:"shouldUpdate",value:function(t){var e;return(0,E.xP)(this,t)||t.size>1||!t.has("hass")||!(null===(e=this._data)||void 0===e||!e.co2SignalEntity)&&this.hass.states[this._data.co2SignalEntity]!==t.get("hass").states[this._data.co2SignalEntity]}},{key:"render",value:function(){var t;if(!this._config||!this.hass)return p.s6;if(!this._data)return(0,p.qy)(a||(a=(0,l.A)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.loading"));if(!this._data.co2SignalEntity)return p.s6;if(!this.hass.states[this._data.co2SignalEntity])return(0,p.qy)(r||(r=(0,l.A)(['<hui-warning .hass="','"> '," </hui-warning>"])),this.hass,(0,A.j)(this.hass,this._data.co2SignalEntity));var e,n=(0,b.gv)(this._data),i=n.summedData,u=(n.compareSummedData,null!==(t=i.total.from_grid)&&void 0!==t?t:0);if(this._data.fossilEnergyConsumption){var d,_,h=this._data.fossilEnergyConsumption?Object.values(this._data.fossilEnergyConsumption).reduce(function(t,e){return t+e},0):0,f=null!==(d=i.total.solar)&&void 0!==d?d:0,g=null!==(_=i.total.to_grid)&&void 0!==_?_:0,y=u+Math.max(0,f-g);y&&(e=(0,v.L)(100*(1-h/y)))}return(0,p.qy)(s||(s=(0,l.A)([" <ha-card> "," </ha-card> "])),void 0!==e?(0,p.qy)(o||(o=(0,l.A)([' <ha-gauge min="0" max="100" .value="','" .formatOptions="','" .locale="','" label="%" style="','"></ha-gauge> <ha-svg-icon id="info" .path="','"></ha-svg-icon> <ha-tooltip for="info" placement="left"> ',' </ha-tooltip> <div class="name"> '," </div> "])),e,M,this.hass.locale,(0,m.W)({"--gauge-color":this._computeSeverity(e)}),"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",this.hass.localize("ui.panel.lovelace.cards.energy.carbon_consumed_gauge.card_indicates_energy_used"),this.hass.localize("ui.panel.lovelace.cards.energy.carbon_consumed_gauge.low_carbon_energy_consumed")):(0,p.qy)(c||(c=(0,l.A)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.carbon_consumed_gauge.low_carbon_energy_not_calculated")))}},{key:"_computeSeverity",value:function(t){return t<10?C.severityMap.red:t<30?C.severityMap.yellow:t>75?C.severityMap.green:C.severityMap.normal}}])}((0,w.E)(p.WF));W.styles=(0,p.AH)(u||(u=(0,l.A)(["ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-gauge{width:100%;max-width:250px}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:var(--ha-font-size-m);margin-top:8px}ha-svg-icon{position:absolute;right:4px;inset-inline-end:4px;inset-inline-start:initial;top:4px;color:var(--secondary-text-color)}ha-tooltip::part(base__popup){margin-top:4px}"]))),(0,g.Cg)([(0,y.MZ)({attribute:!1})],W.prototype,"hass",void 0),(0,g.Cg)([(0,y.wk)()],W.prototype,"_config",void 0),(0,g.Cg)([(0,y.wk)()],W.prototype,"_data",void 0),W=(0,g.Cg)([(0,y.EM)("hui-energy-carbon-consumed-gauge-card")],W),i()}catch(I){i(I)}})},56434:function(t,e,n){n.d(e,{e:function(){return a}});var i=n(81977);function a(t,e,n){return(0,i.P)(t,12*e,n)}}}]);
//# sourceMappingURL=14222.ccfc6149e25dcf29.js.map