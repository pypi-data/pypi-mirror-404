"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["53885"],{55212:function(e,t,i){i.d(t,{KT:function(){return b},Bi:function(){return _},ZI:function(){return m},Yp:function(){return w}});var n=i(31432),r=i(78261),a=i(7739),o=(i(28706),i(2008),i(50113),i(74423),i(23792),i(62062),i(44114),i(26910),i(13609),i(18111),i(22489),i(20116),i(7588),i(61701),i(69085),i(5506),i(79432),i(26099),i(16034),i(31415),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(21699),i(47764),i(42762),i(23500),i(62953),i(46190)),s=i(71727),u=i(69093),l=i(28978),c=i(79461),d=i(52220),p=i(95350),y=i(28669),f=i(24367),v=i(37642),h=new Set(["ai_task","automation","configurator","device_tracker","event","geo_location","notify","persistent_notification","script","sun","tag","todo","zone"].concat((0,a.A)(o.gt))),g=new Set(["backup","mobile_app"]),m=function(e,t){return Object.assign({type:"grid",cards:e.map(function(e){return{type:"tile",entity:e,show_entity_picture:["camera","image","person"].includes((0,s.m)(e))||void 0}})},t)},_=function(e,t,i){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=[],p=e.states,y=[],f=i.title?i.title.toLowerCase():void 0,h=[],g=(0,n.A)(t);try{for(g.s();!(r=g.n()).done;){var m=r.value,b=p[m],w=(0,s.m)(m);if("alarm_control_panel"===w){var E={type:"alarm-panel",entity:m};u.push(E)}else if("camera"===w){var k={type:"picture-entity",entity:m};u.push(k)}else if("image"===w){var A={type:"picture",image_entity:m};u.push(A)}else if("climate"===w){var j,O,x,C={type:"thermostat",entity:m,features:(null!==(j=null===(O=p[m])||void 0===O||null===(O=O.attributes)||void 0===O||null===(O=O.hvac_modes)||void 0===O?void 0:O.length)&&void 0!==j?j:0)>1?[{type:"climate-hvac-modes",hvac_modes:null===(x=p[m])||void 0===x||null===(x=x.attributes)||void 0===x?void 0:x.hvac_modes}]:void 0};u.push(C)}else if("humidifier"===w){var W={type:"humidifier",entity:m,features:[{type:"humidifier-toggle"}]};u.push(W)}else if("media_player"===w){var L={type:"media-control",entity:m};u.push(L)}else if("plant"===w){var S={type:"plant-status",entity:m};u.push(S)}else if("weather"===w){var z={type:"weather-forecast",entity:m,show_forecast:!1};u.push(z)}else if(!a||"scene"!==w&&"script"!==w){var I=void 0,P=f&&b&&(I=(0,c.p)((0,l.u)(b),f))?{entity:m,name:I}:m;y.push(P)}else{var V={entity:m,show_icon:!0,show_name:!0},q=void 0;f&&b&&(q=(0,c.p)((0,l.u)(b),f))&&(V.name=q),h.push(V)}}}catch(F){g.e(F)}finally{g.f()}if(y.sort(function(t,i){var n="string"==typeof t?t:t.entity,r="string"==typeof i?i:i.entity,a=o.JF.includes((0,s.m)(n))?"sensor":"control";return a!==(o.JF.includes((0,s.m)(r))?"sensor":"control")?"sensor"===a?1:-1:(0,d.xL)("string"==typeof t?p[t]?(0,l.u)(p[t]):"":p[t.entity]?(0,v.v)(e,p[t.entity],t.name):"","string"==typeof i?p[i]?(0,l.u)(p[i]):"":p[i.entity]?(0,v.v)(e,p[i.entity],i.name):"")}),0===y.length&&h.length>0)return _(e,t,i,!1);if(y.length>0||h.length>0){var B=Object.assign({type:"entities",entities:y},i);h.length>0&&(B.footer={type:"buttons",entities:h}),u.unshift(B)}return u.length<2?u:[{type:"grid",square:!1,columns:1,cards:u}]},b=function(e,t){var i,r=[],a=(0,n.A)(t);try{for(a.s();!(i=a.n()).done;){var o={type:"entity",entity:i.value};r.push(o)}}catch(s){a.e(s)}finally{a.f()}return r},w=function(e,t,i,o,c,v){for(var m,b,w=e.states,E=e.areas,k=e.devices,A=e.entities,j=function(e,t){for(var i={},n=new Set(Object.values(t).filter(function(e){return e.entity_category||e.platform&&g.has(e.platform)||e.hidden}).map(function(e){return e.entity_id})),r=0,a=Object.keys(e);r<a.length;r++){var o=a[r],s=e[o];h.has((0,u.t)(s))||n.has(s.entity_id)||(i[o]=e[o])}return i}(w,A),O={},x=0,C=Object.keys(j);x<C.length;x++){var W=C[x],L=j[W];L.attributes.order&&(O[W]=L.attributes.order)}var S=function(e,t,i,n){for(var a=Object.assign({},n),o={},s={},u=0,l=Object.values(i);u<l.length;u++){var c,d=l[u],p=d.area_id||d.device_id&&(null===(c=t[d.device_id])||void 0===c?void 0:c.area_id);p&&p in e&&d.entity_id in a?(p in o||(o[p]=[]),o[p].push(a[d.entity_id]),delete a[d.entity_id]):d.device_id&&d.device_id in t&&d.entity_id in a&&(d.device_id in s||(s[d.device_id]=[]),s[d.device_id].push(a[d.entity_id]),delete a[d.entity_id])}for(var y=0,f=Object.entries(s);y<f.length;y++){var v=(0,r.A)(f[y],2),h=v[0],g=v[1];1===g.length&&(a[g[0].entity_id]=g[0],delete s[h])}return{areasWithEntities:o,devicesWithEntities:s,otherEntities:a}}(E,k,A,j);if(null!=o&&o.hidden){var z,I=(0,n.A)(o.hidden);try{for(I.s();!(z=I.n()).done;){var P=z.value;delete S.areasWithEntities[P]}}catch(ae){I.e(ae)}finally{I.f()}}c&&(S.devicesWithEntities={},S.otherEntities={});var V=function(e){var t=[],i={};return Object.keys(e).forEach(function(n){var r=e[n];"group"===(0,s.m)(n)?t.push(r):i[n]=r}),t.forEach(function(e){return e.attributes.entity_id.forEach(function(e){delete i[e]})}),{groups:t,ungrouped:i}}(S.otherEntities);V.groups.sort(function(e,t){return O[e.entity_id]-O[t.entity_id]});var q,B=[],F=(0,n.A)(V.groups);try{for(F.s();!(q=F.n()).done;){var J=q.value;B.push.apply(B,(0,a.A)(_(e,J.attributes.entity_id,{title:(0,l.u)(J),show_header_toggle:"hidden"!==J.attributes.control})))}}catch(ae){F.e(ae)}finally{F.f()}var R=function(e,t,i,r,o){for(var s={},c=e.localize,v=0,h=Object.keys(o);v<h.length;v++){var g=h[v],m=o[g],b=(0,u.t)(m);b in s||(s[b]=[]),s[b].push(m.entity_id)}var w=[];if("person"in s){var E=[];if(1===s.person.length)w.push({type:"entities",entities:s.person});else{var k,A,j="",O=(0,n.A)(s.person);try{for(O.s();!(A=O.n()).done;){var x=A.value,C=o[x],W=C.attributes.entity_picture;if(!W){if(void 0===k){var L=getComputedStyle(document.body);k=encodeURIComponent(L.getPropertyValue("--light-primary-color").trim()),j=encodeURIComponent((L.getPropertyValue("--text-light-primary-color")||L.getPropertyValue("--primary-text-color")).trim())}var S=(0,y._2)(C.attributes.friendly_name||"");W="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' width='50' height='50' style='background-color:".concat(k,"'%3E%3Cg%3E%3Ctext font-family='roboto' x='50%25' y='50%25' text-anchor='middle' stroke='").concat(j,"' font-size='1.3em' dy='.3em'%3E").concat(S,"%3C/text%3E%3C/g%3E%3C/svg%3E")}E.push({type:"picture-entity",entity:x,aspect_ratio:"1",show_name:!1,image:W})}}catch(ae){O.e(ae)}finally{O.f()}w.push({type:"grid",square:!0,columns:3,cards:E})}delete s.person}var z,I=[],P=(0,n.A)(f.LA);try{for(P.s();!(z=P.n()).done;){var V=z.value;V in s&&(I.push.apply(I,(0,a.A)(s[V])),delete s[V])}}catch(ae){P.e(ae)}finally{P.f()}for(var q={},B=0,F=Object.keys(s);B<F.length;B++){var J=F[B];q[J]=(0,p.p$)(c,J)}I.length&&(s._helpers=I,q._helpers=c("ui.panel.lovelace.strategy.original-states.helpers")),Object.keys(s).sort(function(e,t){return(0,d.xL)(q[e],q[t])}).forEach(function(t){w.push.apply(w,(0,a.A)(_(e,s[t].sort(function(e,t){return(0,d.xL)((0,l.u)(o[e]),(0,l.u)(o[t]))}),{title:q[t]})))});var R={path:t,title:i,cards:w};return r&&(R.icon=r),R}(e,"default_view","Home",undefined,V.ungrouped),U=[],H=Object.keys(E);if(null!=o&&o.order){var K=o.order;H.sort((0,d.u1)(K))}for(var T=0,Y=H;T<Y.length;T++){var Z=Y[T];if(Z in S.areasWithEntities){var $=S.areasWithEntities[Z],D=E[Z];U.push.apply(U,(0,a.A)(_(e,$.map(function(e){return e.entity_id}),{title:D.name})))}}var G,M,N=[],Q=Object.entries(S.devicesWithEntities).sort(function(e,t){var i=k[e[0]],n=k[t[0]];return(0,d.xL)(i.name_by_user||i.name||"",n.name_by_user||n.name||"")}),X=(0,n.A)(Q);try{for(X.s();!(G=X.n()).done;){var ee=(0,r.A)(G.value,2),te=ee[0],ie=ee[1],ne=k[te];N.push.apply(N,(0,a.A)(_(e,ie.map(function(e){return e.entity_id}),{title:ne.name_by_user||ne.name||t("ui.panel.config.devices.unnamed_device",{type:t("ui.panel.config.devices.type.".concat(ne.entry_type||"device"))})})))}}catch(ae){X.e(ae)}finally{X.f()}if(i&&!v){var re=i.energy_sources.find(function(e){return"grid"===e.type});re&&re.flow_from.length>0&&(M={title:t("ui.panel.lovelace.cards.energy.energy_distribution.title_today"),type:"energy-distribution",link_dashboard:!0})}return(m=R.cards).unshift.apply(m,U.concat(B,(0,a.A)(M?[M]:[]))),(b=R.cards).push.apply(b,N),R}}}]);
//# sourceMappingURL=53885.d6169b1ad85793b5.js.map