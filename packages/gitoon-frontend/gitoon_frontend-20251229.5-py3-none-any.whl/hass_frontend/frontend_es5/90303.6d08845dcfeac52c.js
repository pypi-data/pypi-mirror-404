"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["90303"],{46754:function(e,t,a){a.a(e,async function(e,n){try{a.r(t),a.d(t,{HuiStatisticCardEditor:function(){return O}});var i,o=a(61397),r=a(50264),c=a(72153),s=a(78261),l=a(44734),u=a(43080),d=a(69683),h=a(6454),p=(a(28706),a(62062),a(18111),a(7588),a(61701),a(69085),a(5506),a(79432),a(26099),a(23500),a(40445)),f=a(96196),_=a(77845),y=a(22786),m=a(63533),v=a(1087),g=a(19459),b=(a(52763),a(23528)),k=a(30345),q=a(84698),j=a(44155),w=e([b]);b=(w.then?(await w)():w)[0];var Y=(0,m.kp)(q.H,(0,m.Ik)({entity:(0,m.lq)((0,m.Yj)()),name:(0,m.lq)(j.q),icon:(0,m.lq)((0,m.Yj)()),unit:(0,m.lq)((0,m.Yj)()),stat_type:(0,m.lq)((0,m.Yj)()),period:(0,m.lq)((0,m.bz)()),theme:(0,m.lq)((0,m.Yj)()),footer:(0,m.lq)(k.zb),collection_key:(0,m.lq)((0,m.Yj)())})),A=["mean","min","max","change"],z={mean:"mean",min:"min",max:"max",change:"sum"},C={today:{calendar:{period:"day"}},yesterday:{calendar:{period:"day",offset:-1}},this_week:{calendar:{period:"week"}},last_week:{calendar:{period:"week",offset:-1}},this_month:{calendar:{period:"month"}},last_month:{calendar:{period:"month",offset:-1}},this_year:{calendar:{period:"year"}},last_year:{calendar:{period:"year",offset:-1}}},O=function(e){function t(){var e;(0,l.A)(this,t);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=(0,d.A)(this,t,[].concat(n)))._data=(0,y.A)(function(e){if(!e||!e.period)return e;for(var t=0,a=Object.entries(C);t<a.length;t++){var n=(0,s.A)(a[t],2),i=n[0],o=n[1];if((0,g.b)(o,e.period))return Object.assign(Object.assign({},e),{},{period:i})}return e}),e._schema=(0,y.A)(function(e,t,a){return[{name:"entity",required:!0,selector:{statistic:{}}},{name:"stat_type",required:!0,selector:{select:{multiple:!1,options:A.map(function(e){return{value:e,label:t("ui.panel.lovelace.editor.card.statistic.stat_type_labels.".concat(e)),disabled:!a||!(0,b.nN)(a,z[e])}})}}},{name:"period",required:!0,selector:e&&e in C?{select:{multiple:!1,options:Object.keys(C).map(function(e){return{value:e,label:t("ui.panel.lovelace.editor.card.statistic.periods.".concat(e))||e}})}}:{object:{}}},{name:"name",selector:{entity_name:{}},context:{entity:"entity"}},{type:"grid",name:"",schema:[{name:"icon",selector:{icon:{}},context:{icon_entity:"entity"}},{name:"unit",selector:{text:{}}},{name:"theme",selector:{theme:{}}}]}]}),e._computeLabelCallback=function(t){return"period"===t.name?e.hass.localize("ui.panel.lovelace.editor.card.statistic.period"):"theme"===t.name?"".concat(e.hass.localize("ui.panel.lovelace.editor.card.generic.theme")," (").concat(e.hass.localize("ui.panel.lovelace.editor.card.config.optional"),")"):e.hass.localize("ui.panel.lovelace.editor.card.generic.".concat(t.name))},e}return(0,h.A)(t,e),(0,u.A)(t,[{key:"setConfig",value:function(e){(0,m.vA)(e,Y),this._config=e,this._fetchMetadata()}},{key:"firstUpdated",value:function(){var e=this;this._fetchMetadata().then(function(){var t,a,n;null!==(t=e._config)&&void 0!==t&&t.stat_type||null===(a=e._config)||void 0===a||!a.entity||(0,v.r)(e,"config-changed",{config:Object.assign(Object.assign({},e._config),{},{stat_type:null!==(n=e._metadata)&&void 0!==n&&n.has_sum?"change":"mean"})})})}},{key:"render",value:function(){if(!this.hass||!this._config)return f.s6;var e=this._data(this._config),t=this._schema("string"==typeof e.period?e.period:void 0,this.hass.localize,this._metadata);return(0,f.qy)(i||(i=(0,c.A)([' <ha-form .hass="','" .data="','" .schema="','" .computeLabel="','" @value-changed="','"></ha-form> '])),this.hass,e,t,this._computeLabelCallback,this._valueChanged)}},{key:"_fetchMetadata",value:(n=(0,r.A)((0,o.A)().m(function e(){return(0,o.A)().w(function(e){for(;;)switch(e.n){case 0:if(this.hass&&this._config){e.n=1;break}return e.a(2);case 1:return e.n=2,(0,b.Wr)(this.hass,[this._config.entity]);case 2:this._metadata=e.v[0];case 3:return e.a(2)}},e,this)})),function(){return n.apply(this,arguments)})},{key:"_valueChanged",value:(a=(0,r.A)((0,o.A)().m(function e(t){var a,n,i,r,c,s,l,u,d,h,p,f,_;return(0,o.A)().w(function(e){for(;;)switch(e.n){case 0:if(n=Object.assign({},t.detail.value),Object.keys(n).forEach(function(e){return""===n[e]&&delete n[e]}),"string"==typeof n.period&&(i=C[n.period])&&(n.period=i),!n.stat_type||!n.entity||n.entity===(null===(a=this._metadata)||void 0===a?void 0:a.statistic_id)){e.n=5;break}return e.n=1,(0,b.Wr)(this.hass,[n.entity]);case 1:if(d=r=e.v,u=null===d){e.n=2;break}u=void 0===r;case 2:if(!u){e.n=3;break}h=void 0,e.n=4;break;case 3:h=r[0];case 4:(c=h)&&!c.has_sum&&"change"===n.stat_type&&(n.stat_type="mean"),c&&c.mean_type===b.ED.NONE&&"change"!==n.stat_type&&(n.stat_type="change");case 5:if(n.stat_type||!n.entity){e.n=10;break}return e.n=6,(0,b.Wr)(this.hass,[n.entity]);case 6:if(f=s=e.v,p=null===f){e.n=7;break}p=void 0===s;case 7:if(!p){e.n=8;break}_=void 0,e.n=9;break;case 8:_=s[0];case 9:l=_,n.stat_type=null!=l&&l.has_sum?"change":"mean";case 10:(0,v.r)(this,"config-changed",{config:n});case 11:return e.a(2)}},e,this)})),function(e){return a.apply(this,arguments)})}]);var a,n}(f.WF);(0,p.Cg)([(0,_.MZ)({attribute:!1})],O.prototype,"hass",void 0),(0,p.Cg)([(0,_.wk)()],O.prototype,"_config",void 0),(0,p.Cg)([(0,_.wk)()],O.prototype,"_metadata",void 0),O=(0,p.Cg)([(0,_.EM)("hui-statistic-card-editor")],O),n()}catch(M){n(M)}})},84698:function(e,t,a){a.d(t,{H:function(){return i}});var n=a(63533),i=(0,n.Ik)({type:(0,n.Yj)(),view_layout:(0,n.bz)(),layout_options:(0,n.bz)(),grid_options:(0,n.bz)(),visibility:(0,n.bz)(),disabled:(0,n.lq)((0,n.zM)())})},55904:function(e,t,a){a.d(t,{J:function(){return o}});var n=a(63533),i=a(91408),o=(0,n.Ik)({entity:(0,n.Yj)(),name:(0,n.lq)((0,n.Yj)()),icon:(0,n.lq)((0,n.Yj)()),image:(0,n.lq)((0,n.Yj)()),show_name:(0,n.lq)((0,n.zM)()),show_icon:(0,n.lq)((0,n.zM)()),tap_action:(0,n.lq)(i.kn),hold_action:(0,n.lq)(i.kn),double_tap_action:(0,n.lq)(i.kn)})},30345:function(e,t,a){a.d(t,{oe:function(){return l},zb:function(){return u}});var n=a(47075),i=a(63533),o=a(91408),r=a(55904),c=(0,i.Ik)({type:(0,i.Yj)(),image:(0,i.Yj)(),tap_action:(0,i.lq)(o.kn),hold_action:(0,i.lq)(o.kn),double_tap_action:(0,i.lq)(o.kn),alt_text:(0,i.lq)((0,i.Yj)())}),s=(0,i.Ik)({type:(0,i.Yj)(),entities:(0,i.YO)(r.J)}),l=(0,i.Ik)({type:(0,i.Yj)(),entity:(0,i.Yj)(),detail:(0,i.lq)((0,i.ai)()),hours_to_show:(0,i.lq)((0,i.ai)())}),u=(0,i.OR)(function(e){if(e&&"object"===(0,n.A)(e)&&"type"in e)switch(e.type){case"buttons":return s;case"graph":return l;case"picture":return c}return(0,i.KC)([s,l,c])})}}]);
//# sourceMappingURL=90303.6d08845dcfeac52c.js.map