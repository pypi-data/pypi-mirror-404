"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["86292"],{58527:function(e,i,r){r.a(e,async function(e,a){try{r.r(i),r.d(i,{CloudRegister:function(){return k}});var s,t,o,n=r(61397),l=r(50264),c=r(72153),u=r(44734),d=r(43080),h=r(69683),p=r(6454),g=(r(28706),r(40445)),f=r(96196),_=r(77845),y=r(1087),m=r(89300),w=(r(38962),r(76776),r(75709),r(71117)),v=(r(81310),r(14503)),b=(r(20820),r(71418),e([m]));m=(b.then?(await b)():b)[0];var k=function(e){function i(){var e;(0,u.A)(this,i);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=(0,h.A)(this,i,[].concat(a))).isWide=!1,e.narrow=!1,e._requestInProgress=!1,e._password="",e}return(0,p.A)(i,e),(0,d.A)(i,[{key:"render",value:function(){var e;return(0,f.qy)(s||(s=(0,c.A)([' <hass-subpage .hass="','" .narrow="','" .header="','"> <div class="content"> <ha-config-section .isWide="','"> <span slot="header">','</span> <div slot="introduction"> <p> '," </p> <p> "," </p> <ul> <li> "," </li> <li> "," </li> <li> "," </li> <li> "," </li> </ul> <p> ",' <a href="https://www.nabucasa.com" target="_blank">Nabu Casa, Inc</a> '," </p> <p> ",' </p> <ul> <li> <a href="https://www.nabucasa.com/tos/" target="_blank" rel="noreferrer"> ',' </a> </li> <li> <a href="https://www.nabucasa.com/privacy_policy/" target="_blank" rel="noreferrer"> ',' </a> </li> </ul> </div> <ha-card outlined .header="','"><div class="card-content register-form"> ',' <ha-textfield autofocus id="email" name="email" .label="','" type="email" autocomplete="email" required .value="','" @keydown="','" validationMessage="','"></ha-textfield> <ha-password-field id="password" name="password" .label="','" .value="','" autocomplete="new-password" minlength="8" required @keydown="','" validationMessage="','"></ha-password-field> </div> <div class="card-actions"> <button class="link" .disabled="','" @click="','"> ',' </button> <ha-progress-button @click="','" .progress="','">',"</ha-progress-button> </div> </ha-card> </ha-config-section> </div> </hass-subpage> "])),this.hass,this.narrow,this.hass.localize("ui.panel.config.cloud.register.title"),this.isWide,this.hass.localize("ui.panel.config.cloud.register.headline"),this.hass.localize("ui.panel.config.cloud.register.information"),this.hass.localize("ui.panel.config.cloud.register.information2"),this.hass.localize("ui.panel.config.cloud.register.feature_remote_control"),this.hass.localize("ui.panel.config.cloud.register.feature_google_home"),this.hass.localize("ui.panel.config.cloud.register.feature_amazon_alexa"),this.hass.localize("ui.panel.config.cloud.register.feature_webhook_apps"),this.hass.localize("ui.panel.config.cloud.register.information3"),this.hass.localize("ui.panel.config.cloud.register.information3a"),this.hass.localize("ui.panel.config.cloud.register.information4"),this.hass.localize("ui.panel.config.cloud.register.link_terms_conditions"),this.hass.localize("ui.panel.config.cloud.register.link_privacy_policy"),this.hass.localize("ui.panel.config.cloud.register.create_account"),this._error?(0,f.qy)(t||(t=(0,c.A)(['<ha-alert alert-type="error">',"</ha-alert>"])),this._error):"",this.hass.localize("ui.panel.config.cloud.register.email_address"),null!==(e=this.email)&&void 0!==e?e:"",this._keyDown,this.hass.localize("ui.panel.config.cloud.register.email_error_msg"),this.hass.localize("ui.panel.config.cloud.register.password"),this._password,this._keyDown,this.hass.localize("ui.panel.config.cloud.register.password_error_msg"),this._requestInProgress,this._handleResendVerifyEmail,this.hass.localize("ui.panel.config.cloud.register.resend_confirm_email"),this._handleRegister,this._requestInProgress,this.hass.localize("ui.panel.config.cloud.register.start_trial"))}},{key:"_keyDown",value:function(e){"Enter"===e.key&&this._handleRegister()}},{key:"_handleRegister",value:(a=(0,l.A)((0,n.A)().m(function e(){var i,r,a,s,t;return(0,n.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i=this._emailField,r=this._passwordField,i.reportValidity()){e.n=1;break}return r.reportValidity(),i.focus(),e.a(2);case 1:if(r.reportValidity()){e.n=2;break}return r.focus(),e.a(2);case 2:return a=i.value.toLowerCase(),s=r.value,this._requestInProgress=!0,e.p=3,e.n=4,(0,w.vO)(this.hass,a,s);case 4:this._verificationEmailSent(a),e.n=6;break;case 5:e.p=5,t=e.v,this._password="",this._requestInProgress=!1,this._error=t&&t.body&&t.body.message?t.body.message:"Unknown error";case 6:return e.a(2)}},e,this,[[3,5]])})),function(){return a.apply(this,arguments)})},{key:"_handleResendVerifyEmail",value:(r=(0,l.A)((0,n.A)().m(function e(){var i,r,a,s=this;return(0,n.A)().w(function(e){for(;;)switch(e.n){case 0:if((i=this._emailField).reportValidity()){e.n=1;break}return i.focus(),e.a(2);case 1:return r=i.value,a=function(){var e=(0,l.A)((0,n.A)().m(function e(i){var r;return(0,n.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,(0,w.q3)(s.hass,i);case 1:s._verificationEmailSent(i),e.n=5;break;case 2:if(e.p=2,"usernotfound"!==((r=e.v)&&r.body&&r.body.code)||i===i.toLowerCase()){e.n=4;break}return e.n=3,a(i.toLowerCase());case 3:e.n=5;break;case 4:s._error=r&&r.body&&r.body.message?r.body.message:"Unknown error";case 5:return e.a(2)}},e,null,[[0,2]])}));return function(i){return e.apply(this,arguments)}}(),e.n=2,a(r);case 2:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"_verificationEmailSent",value:function(e){this._requestInProgress=!1,this._password="",(0,y.r)(this,"cloud-email-changed",{value:e}),(0,y.r)(this,"cloud-done",{flashMessage:this.hass.localize("ui.panel.config.cloud.register.account_created")})}}],[{key:"styles",get:function(){return[v.RF,(0,f.AH)(o||(o=(0,c.A)(["[slot=introduction]{margin:-1em 0}[slot=introduction] a{color:var(--primary-color)}a{color:var(--primary-color)}h1{margin:0}.register-form{display:flex;flex-direction:column}.card-actions{display:flex;justify-content:space-between;align-items:center}"])))]}}]);var r,a}(f.WF);(0,g.Cg)([(0,_.MZ)({attribute:!1})],k.prototype,"hass",void 0),(0,g.Cg)([(0,_.MZ)({attribute:"is-wide",type:Boolean})],k.prototype,"isWide",void 0),(0,g.Cg)([(0,_.MZ)({type:Boolean})],k.prototype,"narrow",void 0),(0,g.Cg)([(0,_.MZ)()],k.prototype,"email",void 0),(0,g.Cg)([(0,_.wk)()],k.prototype,"_requestInProgress",void 0),(0,g.Cg)([(0,_.wk)()],k.prototype,"_password",void 0),(0,g.Cg)([(0,_.wk)()],k.prototype,"_error",void 0),(0,g.Cg)([(0,_.P)("#email",!0)],k.prototype,"_emailField",void 0),(0,g.Cg)([(0,_.P)("#password",!0)],k.prototype,"_passwordField",void 0),k=(0,g.Cg)([(0,_.EM)("cloud-register")],k),a()}catch(z){a(z)}})}}]);
//# sourceMappingURL=86292.6eebd9489c32e5b3.js.map