"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["85030"],{67013:function(t,i,e){e.d(i,{e:function(){return n}});e(28706);var n=function(t){return"/api/image_proxy/".concat(t.entity_id,"?token=").concat(t.attributes.access_token,"&state=").concat(t.state)}},17022:function(t,i,e){e.d(i,{A1:function(){return a},CY:function(){return c},Fn:function(){return s},Jz:function(){return h},St:function(){return u},VA:function(){return _},WI:function(){return d},iY:function(){return f},xw:function(){return r}});var n=e(61397),o=e(50264),a=(e(16280),e(11392),function(t,i){return t.callWS({type:"media_source/resolve_media",media_content_id:i})}),s=function(t,i){return t.callWS({type:"media_source/browse_media",media_content_id:i})},r="__MANUAL_ENTRY__",c=function(t){return t.startsWith(r)},u=function(t){return t.startsWith("media-source://")},h=function(t){return t.startsWith("media-source://media_source")},f=function(t){return t.startsWith("media-source://image_upload")},_=function(){var t=(0,o.A)((0,n.A)().m(function t(i,e,o){var a,s;return(0,n.A)().w(function(t){for(;;)switch(t.n){case 0:return(a=new FormData).append("media_content_id",e),a.append("file",o),t.n=1,i.fetchWithAuth("/api/media_source/local_source/upload",{method:"POST",body:a});case 1:if(413!==(s=t.v).status){t.n=2;break}throw new Error("Uploaded file is too large (".concat(o.name,")"));case 2:if(200===s.status){t.n=3;break}throw new Error("Unknown error");case 3:return t.a(2,s.json())}},t)}));return function(i,e,n){return t.apply(this,arguments)}}(),d=function(){var t=(0,o.A)((0,n.A)().m(function t(i,e){return(0,n.A)().w(function(t){for(;;)if(0===t.n)return t.a(2,i.callWS({type:"media_source/local_source/remove",media_content_id:e}))},t)}));return function(i,e){return t.apply(this,arguments)}}()},30789:function(t,i,e){e.r(i),e.d(i,{HuiPictureCard:function(){return U}});var n,o,a,s=e(61397),r=e(50264),c=e(72153),u=e(47075),h=e(44734),f=e(43080),_=e(69683),d=e(25460),g=e(6454),l=(e(16280),e(23792),e(69085),e(26099),e(3362),e(47764),e(62953),e(40445)),m=e(96196),p=e(77845),v=e(94333),y=e(32288),A=e(42372),w=e(71727),b=(e(76776),e(67013)),k=e(19037),C=e(37544),W=e(97176),I=e(784),S=e(85979),E=e(17022),U=function(t){function i(){return(0,h.A)(this,i),(0,_.A)(this,i,arguments)}return(0,g.A)(i,t),(0,f.A)(i,[{key:"getCardSize",value:function(){return 5}},{key:"setConfig",value:function(t){if(!t||!t.image&&!t.image_entity)throw new Error("Image required");this._config=Object.assign({tap_action:{action:"more-info"}},t)}},{key:"shouldUpdate",value:function(t){if(!this._config||(0,I.xP)(this,t)||t.has("_resolvedImage"))return!0;if(this._config.image_entity&&t.has("hass")){var i=t.get("hass");if(!i||i.states[this._config.image_entity]!==this.hass.states[this._config.image_entity])return!0}return!1}},{key:"willUpdate",value:function(t){var e,n,o,a=this;if((0,d.A)(i,"willUpdate",this,3)([t]),this._config&&this.hass){var s=t.has("hass")&&void 0===t.get("hass"),r=t.has("_config")&&(null===(e=t.get("_config"))||void 0===e?void 0:e.image)!==(null===(n=this._config)||void 0===n?void 0:n.image),c="object"===(0,u.A)(null===(o=this._config)||void 0===o?void 0:o.image)&&this._config.image.media_content_id||this._config.image;(s||r)&&"string"==typeof c&&(0,E.St)(c)?(this._resolvedImage=void 0,(0,E.A1)(this.hass,c).then(function(t){a._resolvedImage=t.url})):r&&(this._resolvedImage=c)}}},{key:"updated",value:function(t){if((0,d.A)(i,"updated",this,3)([t]),this._config&&this.hass){var e=t.get("hass"),n=t.get("_config");e&&n&&e.themes===this.hass.themes&&n.theme===this._config.theme||(0,A.Q)(this,this.hass.themes,this._config.theme)}}},{key:"render",value:function(){var t,i;if(!this._config||!this.hass)return m.s6;if(this._config.image_entity&&!(i=this.hass.states[this._config.image_entity]))return(0,m.qy)(n||(n=(0,c.A)(['<hui-warning .hass="','"> '," </hui-warning>"])),this.hass,(0,S.j)(this.hass,this._config.image_entity));var e=this._resolvedImage;if(this._config.image_entity)switch((0,w.m)(this._config.image_entity)){case"image":e=(0,b.e)(i);break;case"person":i.attributes.entity_picture&&(e=i.attributes.entity_picture)}return void 0===e?m.s6:(0,m.qy)(o||(o=(0,c.A)([' <ha-card @action="','" .actionHandler="','" tabindex="','" class="','"> <img alt="','" src="','"> </ha-card> '])),this._handleAction,(0,k.T)({hasHold:(0,W.h)(this._config.hold_action),hasDoubleClick:(0,W.h)(this._config.double_tap_action)}),(0,y.J)((0,W.h)(this._config.tap_action)||this._config.image_entity?"0":void 0),(0,v.H)({clickable:Boolean(this._config.image_entity&&!this._config.tap_action||this._config.tap_action&&"none"!==this._config.tap_action.action||this._config.hold_action&&"none"!==this._config.hold_action.action||this._config.double_tap_action&&"none"!==this._config.double_tap_action.action)}),(0,y.J)(this._config.alt_text||(null===(t=i)||void 0===t?void 0:t.attributes.friendly_name)),this.hass.hassUrl(e))}},{key:"_handleAction",value:function(t){(0,C.$)(this,this.hass,this._config,t.detail.action)}}],[{key:"getConfigElement",value:(a=(0,r.A)((0,s.A)().m(function t(){return(0,s.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.all([e.e("44533"),e.e("92769"),e.e("44966"),e.e("34326"),e.e("89385"),e.e("29861"),e.e("41742"),e.e("7592"),e.e("39005"),e.e("70752"),e.e("86243"),e.e("12562"),e.e("95754")]).then(e.bind(e,75930));case 1:return t.a(2,document.createElement("hui-picture-card-editor"))}},t)})),function(){return a.apply(this,arguments)})},{key:"getStubConfig",value:function(){return{type:"picture",image:"https://demo.home-assistant.io/stub_config/t-shirt-promo.png"}}}]);var a}(m.WF);U.styles=(0,m.AH)(a||(a=(0,c.A)(["ha-card{overflow:hidden;height:100%}ha-card.clickable{cursor:pointer}img{display:block;width:100%}"]))),(0,l.Cg)([(0,p.MZ)({attribute:!1})],U.prototype,"hass",void 0),(0,l.Cg)([(0,p.wk)()],U.prototype,"_config",void 0),(0,l.Cg)([(0,p.wk)()],U.prototype,"_resolvedImage",void 0),U=(0,l.Cg)([(0,p.EM)("hui-picture-card")],U)}}]);
//# sourceMappingURL=85030.578efbfa553401a6.js.map