"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["21727"],{5127:function(t,e,i){i.a(t,async function(t,e){try{var n,a,r,o,s,l,u,h=i(72153),c=i(44734),v=i(43080),g=i(69683),f=i(6454),d=i(25460),m=(i(28706),i(62062),i(26910),i(18111),i(61701),i(2892),i(26099),i(40445)),p=i(96196),y=i(77845),_=i(6415),b=i(20058),A=i(67258),x=i(12587),k=i(36240),w=t([b]);b=(w.then?(await w)():w)[0];var M=function(t,e,i){return 180*(0,k.NN)((0,k.S8)(t,e,i),e,i)/100},C=function(t){function e(){var t;(0,c.A)(this,e);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(t=(0,g.A)(this,e,[].concat(n))).min=0,t.max=100,t.value=0,t.needle=!1,t.label="",t._angle=0,t._updated=!1,t._segment_label="",t}return(0,f.A)(e,t),(0,v.A)(e,[{key:"firstUpdated",value:function(t){var i=this;(0,d.A)(e,"firstUpdated",this,3)([t]),(0,x.m)(function(){i._updated=!0,i._angle=M(i.value,i.min,i.max),i._segment_label=i._getSegmentLabel(),i._rescaleSvg()})}},{key:"updated",value:function(t){(0,d.A)(e,"updated",this,3)([t]),this._updated&&(t.has("value")||t.has("valueText")||t.has("label")||t.has("_segment_label"))&&(this._angle=M(this.value,this.min,this.max),this._segment_label=this._getSegmentLabel(),this._rescaleSvg())}},{key:"render",value:function(){var t=this;return(0,p.JW)(n||(n=(0,h.A)([' <svg viewBox="-50 -50 100 50" class="gauge"> '," "," ",'  </svg> <svg class="text"> <text class="value-text"> ',""," </text> </svg>"])),this.needle&&this.levels?"":(0,p.JW)(a||(a=(0,h.A)(['<path class="dial" d="M -40 0 A 40 40 0 0 1 40 0"></path>']))),this.levels?this.levels.sort(function(t,e){return t.level-e.level}).map(function(e,i){var n;if(0===i&&e.level!==t.min){var a=M(t.min,t.min,t.max);n=(0,p.JW)(r||(r=(0,h.A)(['<path stroke="var(--info-color)" class="level" d="M\n                          ',"\n                          ",'\n                         A 40 40 0 0 1 40 0\n                        "></path>'])),0-40*Math.cos(a*Math.PI/180),0-40*Math.sin(a*Math.PI/180))}var s=M(e.level,t.min,t.max);return(0,p.JW)(o||(o=(0,h.A)(["",'<path stroke="','" class="level" d="M\n                        ',"\n                        ",'\n                       A 40 40 0 0 1 40 0\n                      "></path>'])),n,e.stroke,0-40*Math.cos(s*Math.PI/180),0-40*Math.sin(s*Math.PI/180))}):"",this.needle?(0,p.JW)(s||(s=(0,h.A)(['<path class="needle" d="M -25 -2.5 L -47.5 0 L -25 2.5 z" style="','"> </path>'])),(0,_.W)({transform:"rotate(".concat(this._angle,"deg)")})):(0,p.JW)(l||(l=(0,h.A)(['<path class="value" d="M -40 0 A 40 40 0 1 0 40 0" style="','"></path>'])),(0,_.W)({transform:"rotate(".concat(this._angle,"deg)")})),this._segment_label?this._segment_label:this.valueText||(0,b.ZV)(this.value,this.locale,this.formatOptions),this._segment_label?"":"%"===this.label?(0,A.d)(this.locale)+"%":" ".concat(this.label))}},{key:"_rescaleSvg",value:function(){var t=this.shadowRoot.querySelector(".text"),e=t.querySelector("text").getBBox();t.setAttribute("viewBox","".concat(e.x," ").concat(e.y," ").concat(e.width," ").concat(e.height))}},{key:"_getSegmentLabel",value:function(){if(this.levels){this.levels.sort(function(t,e){return t.level-e.level});for(var t=this.levels.length-1;t>=0;t--)if(this.value>=this.levels[t].level)return this.levels[t].label}return""}}])}(p.WF);C.styles=(0,p.AH)(u||(u=(0,h.A)([":host{position:relative}.dial{fill:none;stroke:var(--primary-background-color);stroke-width:15}.value{fill:none;stroke-width:15;stroke:var(--gauge-color);transition:all 1s ease 0s}.needle{fill:var(--primary-text-color);transition:all 1s ease 0s}.level{fill:none;stroke-width:15}.gauge{display:block}.text{position:absolute;max-height:40%;max-width:55%;left:50%;bottom:-6%;transform:translate(-50%,0%)}.value-text{font-size:50px;fill:var(--primary-text-color);text-anchor:middle;direction:ltr}"]))),(0,m.Cg)([(0,y.MZ)({type:Number})],C.prototype,"min",void 0),(0,m.Cg)([(0,y.MZ)({type:Number})],C.prototype,"max",void 0),(0,m.Cg)([(0,y.MZ)({type:Number})],C.prototype,"value",void 0),(0,m.Cg)([(0,y.MZ)({attribute:!1})],C.prototype,"formatOptions",void 0),(0,m.Cg)([(0,y.MZ)({attribute:!1,type:String})],C.prototype,"valueText",void 0),(0,m.Cg)([(0,y.MZ)({attribute:!1})],C.prototype,"locale",void 0),(0,m.Cg)([(0,y.MZ)({type:Boolean})],C.prototype,"needle",void 0),(0,m.Cg)([(0,y.MZ)({type:Array})],C.prototype,"levels",void 0),(0,m.Cg)([(0,y.MZ)()],C.prototype,"label",void 0),(0,m.Cg)([(0,y.wk)()],C.prototype,"_angle",void 0),(0,m.Cg)([(0,y.wk)()],C.prototype,"_updated",void 0),(0,m.Cg)([(0,y.wk)()],C.prototype,"_segment_label",void 0),C=(0,m.Cg)([(0,y.EM)("ha-gauge")],C),e()}catch(N){e(N)}})},91874:function(t,e,i){i.a(t,async function(t,n){try{i.r(e),i.d(e,{DEFAULT_MAX:function(){return O},DEFAULT_MIN:function(){return I},severityMap:function(){return T}});var a,r,o,s,l,u=i(61397),h=i(50264),c=i(31432),v=i(7739),g=i(72153),f=i(44734),d=i(43080),m=i(69683),p=i(25460),y=i(6454),_=(i(16280),i(23792),i(62062),i(26910),i(18111),i(61701),i(2892),i(69085),i(79432),i(26099),i(3362),i(47764),i(62953),i(40445)),b=i(96196),A=i(77845),x=i(94333),k=i(32288),w=i(6415),M=i(42372),C=i(78649),N=i(20058),S=(i(76776),i(5127)),Z=i(22675),W=i(19037),L=i(37642),E=i(13632),z=i(37544),J=i(97176),q=i(784),B=i(85979),H=t([S,N]);[S,N]=H.then?(await H)():H;var I=0,O=100,T={red:"var(--error-color)",green:"var(--success-color)",yellow:"var(--warning-color)",normal:"var(--info-color)"},j=function(t){function e(){return(0,f.A)(this,e),(0,m.A)(this,e,arguments)}return(0,y.A)(e,t),(0,d.A)(e,[{key:"getCardSize",value:function(){return 4}},{key:"setConfig",value:function(t){if(!t.entity)throw new Error("Entity must be specified");if(!(0,C.n)(t.entity))throw new Error("Invalid entity");this._config=Object.assign({min:I,max:O},t)}},{key:"render",value:function(){var t;if(!this._config||!this.hass)return b.s6;var e=this.hass.states[this._config.entity];if(!e)return(0,b.qy)(a||(a=(0,g.A)([' <hui-warning .hass="','"> '," </hui-warning> "])),this.hass,(0,B.j)(this.hass,this._config.entity));if(e.state===Z.Hh)return(0,b.qy)(r||(r=(0,g.A)([" <hui-warning>","</hui-warning> "])),this.hass.localize("ui.panel.lovelace.warning.entity_unavailable",{entity:this._config.entity}));var i=this._config.attribute?e.attributes[this._config.attribute]:e.state;if(isNaN(i))return(0,b.qy)(o||(o=(0,g.A)([" <hui-warning>","</hui-warning> "])),this.hass.localize(this._config.attribute?"ui.panel.lovelace.warning.attribute_not_numeric":"ui.panel.lovelace.warning.entity_non_numeric",{entity:this._config.entity,attribute:this._config.attribute}));var n=(0,L.v)(this.hass,e,this._config.name);return(0,b.qy)(s||(s=(0,g.A)([' <ha-card class="','" @action="','" .actionHandler="','" tabindex="','"> <ha-gauge .min="','" .max="','" .value="','" .formatOptions="','" .locale="','" .label="','" style="','" .needle="','" .levels="','"></ha-gauge> <div class="name" .title="','">',"</div> </ha-card> "])),(0,x.H)({action:(0,J.A)(this._config)}),this._handleAction,(0,W.T)({hasHold:(0,J.h)(this._config.hold_action),hasDoubleClick:(0,J.h)(this._config.double_tap_action)}),(0,k.J)(!this._config.tap_action||(0,J.h)(this._config.tap_action)?"0":void 0),this._config.min,this._config.max,i,(0,N.ZQ)(e,this.hass.entities[e.entity_id]),this.hass.locale,this._config.unit||(null===(t=this.hass)||void 0===t?void 0:t.states[this._config.entity].attributes.unit_of_measurement)||"",(0,w.W)({"--gauge-color":this._computeSeverity(Number(i))}),this._config.needle,this._config.needle?this._severityLevels():void 0,n,n)}},{key:"shouldUpdate",value:function(t){return(0,q.LX)(this,t)}},{key:"updated",value:function(t){if((0,p.A)(e,"updated",this,3)([t]),this._config&&this.hass){var i=t.get("hass"),n=t.get("_config");i&&n&&i.themes===this.hass.themes&&n.theme===this._config.theme||(0,M.Q)(this,this.hass.themes,this._config.theme)}}},{key:"_computeSeverity",value:function(t){if(!this._config.needle){var e=this._config.segments;if(e){e=(0,v.A)(e).sort(function(t,e){return t.from-e.from});for(var i=0;i<e.length;i++){var n,a=e[i];if(a&&t>=a.from&&(i+1===e.length||t<(null===(n=e[i+1])||void 0===n?void 0:n.from)))return a.color}return T.normal}var r=this._config.severity;if(!r)return T.normal;var o,s=Object.keys(r).map(function(t){return[t,r[t]]}),l=(0,c.A)(s);try{for(l.s();!(o=l.n()).done;){var u=o.value;if(null==T[u[0]]||isNaN(u[1]))return T.normal}}catch(h){l.e(h)}finally{l.f()}return s.sort(function(t,e){return t[1]-e[1]}),t>=s[0][1]&&t<s[1][1]?T[s[0][0]]:t>=s[1][1]&&t<s[2][1]?T[s[1][0]]:t>=s[2][1]?T[s[2][0]]:T.normal}}},{key:"_severityLevels",value:function(){var t=this._config.segments;if(t)return t.map(function(t){return{level:null==t?void 0:t.from,stroke:null==t?void 0:t.color,label:null==t?void 0:t.label}});var e=this._config.severity;return e?Object.keys(e).map(function(t){return{level:e[t],stroke:T[t]}}):[{level:0,stroke:T.normal}]}},{key:"_handleAction",value:function(t){(0,z.$)(this,this.hass,this._config,t.detail.action)}}],[{key:"getConfigElement",value:(n=(0,h.A)((0,u.A)().m(function t(){return(0,u.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,i.e("88292").then(i.bind(i,89647));case 1:return t.a(2,document.createElement("hui-gauge-card-editor"))}},t)})),function(){return n.apply(this,arguments)})},{key:"getStubConfig",value:function(t,e,i){return{type:"gauge",entity:(0,E.B)(t,1,e,i,["counter","input_number","number","sensor"],function(t){return!isNaN(Number(t.state))})[0]||""}}}]);var n}(b.WF);j.styles=(0,b.AH)(l||(l=(0,g.A)(["ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-card.action{cursor:pointer}ha-card:focus{outline:0}ha-gauge{width:100%;max-width:250px}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:var(--ha-font-size-m);margin-top:8px}"]))),(0,_.Cg)([(0,A.MZ)({attribute:!1})],j.prototype,"hass",void 0),(0,_.Cg)([(0,A.wk)()],j.prototype,"_config",void 0),j=(0,_.Cg)([(0,A.EM)("hui-gauge-card")],j),n()}catch(U){n(U)}})},36240:function(t,e,i){i.d(e,{NN:function(){return a},S8:function(){return n},gN:function(){return r}});var n=function(t,e,i){return isNaN(t)||isNaN(e)||isNaN(i)?0:t>i?i:t<e?e:t},a=function(t,e,i){return 100*(t-e)/(i-e)},r=function(t){return Math.round(10*t)/10}}}]);
//# sourceMappingURL=21727.099f8ddc93c3ad38.js.map