"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["77183"],{91069:function(t,e,r){r.a(t,async function(t,n){try{r.d(e,{EO:function(){return w},Yq:function(){return k},_U:function(){return W},eE:function(){return A},fU:function(){return M},ol:function(){return h},xo:function(){return b}});var o=r(78016),a=r(31810),i=r(49134),s=r(81977),u=r(36307),c=r(35932),l=r(73983),f=r(6946),_=r(92913),g=r(83339),y=r(77972),d=r(31886),m=r(46927),p=t([d]);d=(p.then?(await p)():p)[0];var v=function(t,e,r,n){var o=r(new d.BB(t,e),n);return o instanceof Date?new Date(o.getTime()):o},h=function(t,e,r,n,o){return r.time_zone===m.Wj.server?v(t,n.time_zone,e,o):e(t,o)},b=function(t,e,r,n,o){return r.time_zone===m.Wj.server?v(t,n.time_zone,e,o):e(t,o)},w=function(t,e,r,n,o){return b(t,r,n,o,n.time_zone===m.Wj.server?new d.BB(e,o.time_zone):e)},A=function(t,e,r,n,d){var m,p;if(b(t,o.e,n,d)&&b(e,a.c,n,d)){var v=(w(e,t,i.W,n,d)+1)*(r?1:-1);m=h(t,s.P,n,d,v),p=h(h(e,s.P,n,d,v),u.p,n,d)}else if(b(t,function(t){return(0,c.o)(t).getMilliseconds()===t.getMilliseconds()},n,d)&&b(e,function(t){return(0,l.D)(t).getMilliseconds()===t.getMilliseconds()},n,d)){var A=(w(e,t,f.c,n,d)+1)*(r?1:-1);m=h(t,_.f,n,d,A),p=h(e,_.f,n,d,A)}else{var W=w(e,t,g.b,n,d)*(r?1:-1);m=h(t,y.A,n,d,W),p=h(e,y.A,n,d,W)}return{start:m,end:p}},W=function(t,e){var r=new d.BB(t,e);return new Date(r.getTime())},k=function(t,e){return new d.BB(t,e).toISOString().split("T")[0]},M=function(t,e){return new d.BB(t,e).toISOString().split("T")[1].split(".")[0]};n()}catch(D){n(D)}})},46223:function(t,e,r){r.a(t,async function(t,n){try{r.d(e,{b:function(){return w}});var o=r(35932),a=r(73983),i=r(92913),s=r(52640),u=r(69137),c=r(35660),l=r(36307),f=r(11650),_=r(15797),g=r(33977),y=r(69748),d=r(55144),m=r(21828),p=r(66708),v=r(91069),h=r(380),b=t([h,v]);[h,v]=b.then?(await b)():b;var w=function(t,e){var r=new Date,n=(0,h.P)(t.locale);switch(e){case"today":return[(0,v.ol)(r,o.o,t.locale,t.config,{weekStartsOn:n}),(0,v.ol)(r,a.D,t.locale,t.config,{weekStartsOn:n})];case"yesterday":return[(0,v.ol)((0,i.f)(r,-1),o.o,t.locale,t.config,{weekStartsOn:n}),(0,v.ol)((0,i.f)(r,-1),a.D,t.locale,t.config,{weekStartsOn:n})];case"this_week":return[(0,v.ol)(r,s.k,t.locale,t.config,{weekStartsOn:n}),(0,v.ol)(r,u.$,t.locale,t.config,{weekStartsOn:n})];case"this_month":return[(0,v.ol)(r,c.w,t.locale,t.config),(0,v.ol)(r,l.p,t.locale,t.config)];case"this_quarter":return[(0,v.ol)(r,f.a,t.locale,t.config),(0,v.ol)(r,_.j,t.locale,t.config)];case"this_year":return[(0,v.ol)(r,g.D,t.locale,t.config),(0,v.ol)(r,y.Q,t.locale,t.config)];case"now-7d":return[(0,v.ol)(r,d.e,t.locale,t.config,7),(0,v.ol)(r,d.e,t.locale,t.config,0)];case"now-30d":return[(0,v.ol)(r,d.e,t.locale,t.config,30),(0,v.ol)(r,d.e,t.locale,t.config,0)];case"now-12m":return[(0,v.ol)((0,m.a)(r,12),c.w,t.locale,t.config),(0,v.ol)((0,m.a)(r,1),l.p,t.locale,t.config)];case"now-1h":return[(0,v.ol)(r,p.O,t.locale,t.config,1),(0,v.ol)(r,p.O,t.locale,t.config,0)];case"now-12h":return[(0,v.ol)(r,p.O,t.locale,t.config,12),(0,v.ol)(r,p.O,t.locale,t.config,0)];case"now-24h":return[(0,v.ol)(r,p.O,t.locale,t.config,24),(0,v.ol)(r,p.O,t.locale,t.config,0)]}return[r,r]};n()}catch(A){n(A)}})},5911:function(t,e,r){r.d(e,{$:function(){return o}});var n=r(31432),o=(r(44114),function(t,e){var r,o={},a=(0,n.A)(t);try{for(a.s();!(r=a.n()).done;){var i=r.value,s=e(i);s in o?o[s].push(i):o[s]=[i]}}catch(u){a.e(u)}finally{a.f()}return o})},38114:function(t,e,r){r.a(t,async function(t,n){try{r.d(e,{AN:function(){return q},B2:function(){return N},BV:function(){return I},DR:function(){return ot},E$:function(){return $},GW:function(){return z},Q4:function(){return j},RB:function(){return B},WN:function(){return G},X4:function(){return et},_d:function(){return Z},al:function(){return Q},bs:function(){return U},c:function(){return P},gv:function(){return rt},h4:function(){return ct},lh:function(){return L},m7:function(){return E},n3:function(){return st},oU:function(){return C},pe:function(){return ut},t5:function(){return lt},tb:function(){return J},uh:function(){return x}});var o=r(78261),a=r(7739),i=r(31432),s=r(61397),u=r(50264),c=(r(16280),r(28706),r(2008),r(48980),r(23418),r(74423),r(23792),r(62062),r(44114),r(26910),r(18111),r(81148),r(22489),r(7588),r(61701),r(69085),r(5506),r(26099),r(16034),r(3362),r(31415),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698),r(21699),r(47764),r(11392),r(23500),r(62953),r(6946)),l=r(78016),f=r(31810),_=r(81977),g=r(49134),y=r(92913),d=r(77972),m=r(56434),p=r(35932),v=r(73983),h=r(57279),b=r(70570),w=r(22786),A=r(91069),W=r(30162),k=r(5911),M=r(23528),D=r(46223),O=r(20058),T=t([W,D,A,M,O]);[W,D,A,M,O]=T.then?(await T)():T;var S=[],E=function(){return{stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}},B=function(){return{stat_energy_to:"",stat_compensation:null,entity_energy_price:null,number_energy_price:null}},x=function(){return{type:"grid",flow_from:[],flow_to:[],cost_adjustment_day:0}},j=function(){return{type:"solar",stat_energy_from:"",config_entry_solar_forecast:null}},C=function(){return{type:"battery",stat_energy_from:"",stat_energy_to:""}},P=function(){return{type:"gas",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}},z=function(){return{type:"water",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}},I=function(t){return t.callWS({type:"energy/info"})},N=function(){var t=(0,u.A)((0,s.A)().m(function t(e){return(0,s.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,e.loadBackendTranslation("issues","energy");case 1:return t.a(2,e.callWS({type:"energy/validate"}))}},t)}));return function(e){return t.apply(this,arguments)}}(),U=function(t){return t.callWS({type:"energy/get_prefs"})},G=function(){var t=(0,u.A)((0,s.A)().m(function t(e,r){var n;return(0,s.A)().w(function(t){for(;;)if(0===t.n)return n=e.callWS(Object.assign({type:"energy/save_prefs"},r)),Y(e),t.a(2,n)},t)}));return function(e,r){return t.apply(this,arguments)}}(),V=function(){var t=(0,u.A)((0,s.A)().m(function t(e,r,n,o,a){var i,u=arguments;return(0,s.A)().w(function(t){for(;;)if(0===t.n)return i=u.length>5&&void 0!==u[5]?u[5]:"hour",t.a(2,e.callWS({type:"energy/fossil_energy_consumption",start_time:r.toISOString(),end_time:null==a?void 0:a.toISOString(),energy_statistic_ids:n,co2_statistic_id:o,period:i}))},t)}));return function(e,r,n,o,a){return t.apply(this,arguments)}}(),$=function(t){return(0,k.$)(t.energy_sources,function(t){return t.type})},q=function(t,e,r){var n,o=[],s=(0,i.A)(t.energy_sources);try{for(s.s();!(n=s.n()).done;){var u=n.value;if(!r||r.includes(u.type))if("solar"!==u.type)if("gas"!==u.type&&"water"!==u.type)if("battery"!==u.type){var c,l=(0,i.A)(u.flow_from);try{for(l.s();!(c=l.n()).done;){var f=c.value;o.push(f.stat_energy_from),f.stat_cost&&o.push(f.stat_cost);var _=e.cost_sensors[f.stat_energy_from];_&&o.push(_)}}catch(v){l.e(v)}finally{l.f()}var g,y=(0,i.A)(u.flow_to);try{for(y.s();!(g=y.n()).done;){var d=g.value;o.push(d.stat_energy_to),d.stat_compensation&&o.push(d.stat_compensation);var m=e.cost_sensors[d.stat_energy_to];m&&o.push(m)}}catch(v){y.e(v)}finally{y.f()}}else o.push(u.stat_energy_from),o.push(u.stat_energy_to);else{o.push(u.stat_energy_from),u.stat_cost&&o.push(u.stat_cost);var p=e.cost_sensors[u.stat_energy_from];p&&o.push(p)}else o.push(u.stat_energy_from)}}catch(v){s.e(v)}finally{s.f()}return r&&!r.includes("device")||o.push.apply(o,(0,a.A)(t.device_consumption.map(function(t){return t.stat_consumption}))),r&&!r.includes("water")||o.push.apply(o,(0,a.A)(t.device_consumption_water.map(function(t){return t.stat_consumption}))),o},F=function(t){var e,r=[],n=(0,i.A)(t.energy_sources);try{for(n.s();!(e=n.n()).done;){var o=e.value;"gas"!==o.type&&"water"!==o.type&&("solar"!==o.type&&"battery"!==o.type?o.power&&r.push.apply(r,(0,a.A)(o.power.map(function(t){return t.stat_rate}))):r.push(o.stat_rate))}}catch(s){n.e(s)}finally{n.f()}return r.push.apply(r,(0,a.A)(t.device_consumption.map(function(t){return t.stat_rate}))),r.filter(Boolean)},L=function(t){return t.NONE="",t.PREVIOUS="previous",t.YOY="yoy",t}({}),R=function(){var t=(0,u.A)((0,s.A)().m(function t(e,r,n,u,p){var v,h,b,w,W,k,D,O,T,S,E,B,x,j,C,P,z,N,U,G,$,L,R,Y,H,J,Q,X,Z,et,rt,nt,ot,at,it,st,ut,ct,lt,ft,_t,gt,yt,dt,mt,pt,vt,ht,bt,wt;return(0,s.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,I(e);case 1:v=t.v,b=0,w=Object.values(e.entities);case 2:if(!(b<w.length)){t.n=6;break}if("co2signal"===(W=w[b]).platform){t.n=3;break}return t.a(3,5);case 3:if((k=e.states[W.entity_id])&&"%"===k.attributes.unit_of_measurement){t.n=4;break}return t.a(3,5);case 4:return h=k.entity_id,t.a(3,6);case 5:b++,t.n=2;break;case 6:D=[],O=(0,i.A)(r.energy_sources);try{for(O.s();!(T=O.n()).done;)if("grid"===(S=T.value).type){E=(0,i.A)(S.flow_from);try{for(E.s();!(B=E.n()).done;)x=B.value,D.push(x.stat_energy_from)}catch(s){E.e(s)}finally{E.f()}}}catch(s){O.e(s)}finally{O.f()}if(j=q(r,v,["grid","solar","battery","gas","device"]),C=F(r),P=q(r,v,["water"]),z=[].concat((0,a.A)(j),(0,a.A)(P),(0,a.A)(C)),N=(0,c.c)(u||new Date,n),U=(0,l.e)(n)&&(!u||(0,f.c)(u))&&N>35?"month":N>2?"day":"hour",G=N>64?"day":N>8?"hour":"5minute",$={},!z.length){t.n=8;break}return t.n=7,(0,M.Wr)(e,z);case 7:wt=t.v,t.n=9;break;case 8:wt=[];case 9:return L=wt,z.length&&L.forEach(function(t){$[t.statistic_id]=t}),R=K(e,r,$),Y=M.r_.includes(R),H={energy:"kWh",volume:Y?R:void 0},J={power:"kW"},Q=tt(e,r,$),X={volume:Q},Z=j.length?(0,M.sz)(e,n,u,j,U,H,["change"]):{},et=C.length?(0,M.sz)(e,n,u,C,G,J,["mean"]):{},rt=P.length?(0,M.sz)(e,n,u,P,U,X,["change"]):{},it={},st={},p&&("previous"===p?(ot=(0,A.xo)(n,l.e,e.locale,e.config)&&(0,A.xo)(u||new Date,f.c,e.locale,e.config)?(0,A.ol)(n,_.P,e.locale,e.config,-(0,A.EO)(u||new Date,n,g.W,e.locale,e.config)-1):(0,A.ol)(n,y.f,e.locale,e.config,-1*(N+1)),at=(0,d.A)(n,-1)):"yoy"===p&&(ot=(0,A.ol)(n,m.e,e.locale,e.config,-1),at=(0,A.ol)(u,m.e,e.locale,e.config,-1)),j.length&&(it=(0,M.sz)(e,ot,at,j,U,H,["change"])),P.length&&(st=(0,M.sz)(e,ot,at,P,U,X,["change"]))),void 0!==h&&(ut=V(e,n,D,h,u,N>35?"month":N>2?"day":"hour"),p&&(ct=V(e,ot,D,h,at,N>35?"month":N>2?"day":"hour"))),t.n=10,Promise.all([Z,et,rt,it,st,ut,ct]);case 10:return lt=t.v,ft=(0,o.A)(lt,7),_t=ft[0],gt=ft[1],yt=ft[2],dt=ft[3],mt=ft[4],pt=ft[5],vt=ft[6],ht=Object.assign(Object.assign(Object.assign({},_t),yt),gt),p&&(nt=Object.assign(Object.assign({},dt),mt)),bt={start:n,end:u,startCompare:ot,endCompare:at,compareMode:p,info:v,prefs:r,stats:ht,statsMetadata:$,statsCompare:nt,co2SignalEntity:h,fossilEnergyConsumption:pt,fossilEnergyConsumptionCompare:vt,waterUnit:Q,gasUnit:R},t.a(2,bt)}},t)}));return function(e,r,n,o,a){return t.apply(this,arguments)}}(),Y=function(t){S.forEach(function(e){var r=J(t,{key:e});r.clearPrefs(),r._active&&r.refresh()})},H=function(t){if(t._refreshTimeout&&clearTimeout(t._refreshTimeout),t._active&&(!t.end||t.end>new Date)){var e=new Date;e.getMinutes()>=20&&e.setHours(e.getHours()+1),e.setMinutes(20,0,0),t._refreshTimeout=window.setTimeout(function(){return t.refresh()},e.getTime()-Date.now())}},J=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="_energy";if(e.key){if(!e.key.startsWith("energy_"))throw new Error("Key need to start with energy_");r="_".concat(e.key)}if(t.connection[r])return t.connection[r];S.push(e.key);var n=(0,b.X)(t.connection,r,(0,u.A)((0,s.A)().m(function e(){return(0,s.A)().w(function(e){for(;;)switch(e.n){case 0:if(n.prefs){e.n=2;break}return e.n=1,U(t);case 1:n.prefs=e.v;case 2:return H(n),e.a(2,R(t,n.prefs,n.start,n.end,n.compare))}},e)}))),a=n.subscribe;n.subscribe=function(t){var e=a(t);return n._active++,void 0===n._refreshTimeout&&H(n),function(){n._active--,n._active<1&&(clearTimeout(n._refreshTimeout),n._refreshTimeout=void 0),e()}},n._active=0,n.prefs=e.prefs;var i=new Date,c=(0,W.LW)(i,t.locale,t.config).split(":")[0],l=localStorage.getItem("energy-default-period-".concat(r))||"today",f="today"===l&&"0"===c?"yesterday":l,_=(0,D.b)(t,f),g=(0,o.A)(_,2),y=g[0],d=g[1];n.start=(0,A.ol)(y,p.o,t.locale,t.config),n.end=(0,A.ol)(d,v.D,t.locale,t.config);var m=function(){n._updatePeriodTimeout=window.setTimeout(function(){n.start=(0,A.ol)(new Date,p.o,t.locale,t.config),n.end=(0,A.ol)(new Date,v.D,t.locale,t.config),n.refresh(),m()},(0,h.L)((0,A.ol)(new Date,v.D,t.locale,t.config),1).getTime()-Date.now())};return m(),n.clearPrefs=function(){n.prefs=void 0},n.setPeriod=function(e,r){var o;n._updatePeriodTimeout&&(clearTimeout(n._updatePeriodTimeout),n._updatePeriodTimeout=void 0),n.start=e,n.end=r,n.start.getTime()===(0,A.ol)(new Date,p.o,t.locale,t.config).getTime()&&(null===(o=n.end)||void 0===o?void 0:o.getTime())===(0,A.ol)(new Date,v.D,t.locale,t.config).getTime()&&m()},n.setCompare=function(t){n.compare=t},n},Q=function(t){return t.callWS({type:"energy/solar_forecast"})},X=["volume","energy"],Z=function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(0,i.A)(t.energy_sources);try{for(o.s();!(r=o.n()).done;){var a=r.value;if("gas"===a.type&&(!e||e!==a.stat_energy_from)){var s=n[a.stat_energy_from];if(X.includes(null==s?void 0:s.unit_class))return s.unit_class}}}catch(u){o.e(u)}finally{o.f()}},K=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("energy"===Z(e,void 0,r))return"kWh";var n=e.energy_sources.filter(function(t){return"gas"===t.type}).map(function(e){return(0,M.JE)(t,e.stat_energy_from,r[e.stat_energy_from])});if(n.length){var o=n[0];if(M.r_.includes(o)&&n.every(function(t){return t===o}))return o}return"km"===t.config.unit_system.length?"m³":"ft³"},tt=function(t,e,r){var n=e.energy_sources.filter(function(t){return"water"===t.type}).map(function(e){return(0,M.JE)(t,e.stat_energy_from,r[e.stat_energy_from])});if(n.length){var o=n[0];if(M.r_.includes(o)&&n.every(function(t){return t===o}))return o}return"km"===t.config.unit_system.length?"L":"gal"},et="/docs/energy/faq/#troubleshooting-missing-entities",rt=(0,w.A)(function(t){return{summedData:nt(t),compareSummedData:t.statsCompare?nt(t,!0):void 0}}),nt=function(t,e){var r,n={},a=(0,i.A)(t.prefs.energy_sources);try{for(a.s();!(r=a.n()).done;){var s=r.value;if("solar"!==s.type)if("battery"!==s.type){if("grid"===s.type){var u,c=(0,i.A)(s.flow_from);try{for(c.s();!(u=c.n()).done;){var l=u.value;n.from_grid?n.from_grid.push(l.stat_energy_from):n.from_grid=[l.stat_energy_from]}}catch(m){c.e(m)}finally{c.f()}var f,_=(0,i.A)(s.flow_to);try{for(_.s();!(f=_.n()).done;){var g=f.value;n.to_grid?n.to_grid.push(g.stat_energy_to):n.to_grid=[g.stat_energy_to]}}catch(m){_.e(m)}finally{_.f()}}}else n.to_battery?(n.to_battery.push(s.stat_energy_to),n.from_battery.push(s.stat_energy_from)):(n.to_battery=[s.stat_energy_to],n.from_battery=[s.stat_energy_from]);else n.solar?n.solar.push(s.stat_energy_from):n.solar=[s.stat_energy_from]}}catch(m){a.e(m)}finally{a.f()}var y={total:{},timestamps:[]},d=new Set;return Object.entries(n).forEach(function(r){var n=(0,o.A)(r,2),a=n[0],i=n[1],s={},u={},c=0;i.forEach(function(r){var n=e?t.statsCompare[r]:t.stats[r];if(n){n.forEach(function(t){if(null!==t.change&&void 0!==t.change){var e=t.change;c+=e,s[t.start]=t.start in s?s[t.start]+e:e,d.add(t.start)}}),u[r]={}}}),y[a]=s,y.total[a]=c}),y.timestamps=Array.from(d).sort(),y},ot=(0,w.A)(function(t,e){return{consumption:at(t),compareConsumption:e?at(e):void 0}}),at=function(t){var e={used_total:{},grid_to_battery:{},battery_to_grid:{},solar_to_battery:{},solar_to_grid:{},used_solar:{},used_grid:{},used_battery:{},total:{used_total:0,grid_to_battery:0,battery_to_grid:0,solar_to_battery:0,solar_to_grid:0,used_solar:0,used_grid:0,used_battery:0}};return t.timestamps.forEach(function(r){var n,o,a,i,s,u=it({from_grid:t.from_grid&&(null!==(n=t.from_grid[r])&&void 0!==n?n:0),to_grid:t.to_grid&&(null!==(o=t.to_grid[r])&&void 0!==o?o:0),solar:t.solar&&(null!==(a=t.solar[r])&&void 0!==a?a:0),to_battery:t.to_battery&&(null!==(i=t.to_battery[r])&&void 0!==i?i:0),from_battery:t.from_battery&&(null!==(s=t.from_battery[r])&&void 0!==s?s:0)}),c=u.grid_to_battery,l=u.battery_to_grid,f=u.used_solar,_=u.used_grid,g=u.used_battery,y=u.used_total,d=u.solar_to_battery,m=u.solar_to_grid;e.used_total[r]=y,e.total.used_total+=y,e.grid_to_battery[r]=c,e.total.grid_to_battery+=c,e.battery_to_grid[r]=l,e.total.battery_to_grid+=l,e.used_battery[r]=g,e.total.used_battery+=g,e.used_grid[r]=_,e.total.used_grid+=_,e.used_solar[r]=f,e.total.used_solar+=f,e.solar_to_battery[r]=d,e.total.solar_to_battery+=d,e.solar_to_grid[r]=m,e.total.solar_to_grid+=m}),e},it=function(t){var e,r,n,o,a,i,s=Math.max(t.to_grid||0,0),u=Math.max(t.to_battery||0,0),c=Math.max(t.solar||0,0),l=Math.max(t.from_grid||0,0),f=Math.max(t.from_battery||0,0),_=(l||0)+(c||0)+(f||0)-(s||0)-(u||0),g=0,y=Math.max(_,0),d=Math.max(0,Math.min(u,l-y));g+=d,u-=d,l-=d,u-=n=Math.min(c,u),c-=n,s-=o=Math.min(c,s),c-=o,f-=r=Math.min(f,s),s-=r;var m=Math.min(l,u);return g+=m,l-=m,u-=m,y-=e=Math.min(y,c),c-=e,f-=a=Math.min(f,y),y-=a,y-=l-=i=Math.min(y,l),{used_solar:e,used_grid:i,used_battery:a,used_total:_,grid_to_battery:g,battery_to_grid:r,solar_to_battery:n,solar_to_grid:o}},st=function(t,e,r,n){var o=["Wh","kWh","MWh","GWh","TWh"],a=r,i=e||0,s=-1;n&&(s=o.findIndex(function(t){return t===n}));var u=o.findIndex(function(t){return t===r});if(u>=0){for(;s>-1?s<u:Math.abs(i)<1&&u>0;)i*=1e3,u--;for(;s>-1?s>u:Math.abs(i)>=1e3&&u<o.length-1;)i/=1e3,u++;a=o[u]}return(0,O.ZV)(i,t.locale,{maximumFractionDigits:Math.abs(i)<10?2:Math.abs(i)<100?1:0})+" "+a},ut=function(t,e){if(e.total.solar){var r=ot(e,void 0),n=r.consumption;r.compareConsumption;if(!t){var o=e.total.solar;return n.total.used_solar/o*100}var a=0,i=0,s=[];e.timestamps.forEach(function(t){var e,r,o,u;a+=null!==(e=n.used_solar[t])&&void 0!==e?e:0,i+=null!==(r=n.solar_to_grid[t])&&void 0!==r?r:0,n.grid_to_battery[t]&&s.push({type:"grid",value:n.grid_to_battery[t]}),n.solar_to_battery[t]&&s.push({type:"solar",value:n.solar_to_battery[t]});for(var c=null!==(o=n.battery_to_grid[t])&&void 0!==o?o:0,l=null!==(u=n.used_battery[t])&&void 0!==u?u:0,f=function(t){var e=s[s.length-1],r=e.type;if(t>=e.value){var n=e.value;return s.pop(),{energy:n,type:r}}return e.value-=t,{energy:t,type:r}};l>0&&s.length;){var _=f(l),g=_.energy;"solar"===_.type&&(a+=g),l-=g}for(;c>0&&s.length;){var y=f(c),d=y.energy;"solar"===y.type&&(i+=d),c-=d}});var u=a+i;return!!u?a/u*100:void 0}},ct=function(t){if(t){var e=parseFloat(t.state);if(!isNaN(e))switch(t.attributes.unit_of_measurement){case"W":default:return e;case"kW":return 1e3*e;case"mW":return e/1e3;case"MW":return 1e6*e;case"GW":return 1e9*e;case"TW":return 1e12*e}}},lt=function(t,e){for(var r=["W","kW","MW","GW","TW"],n=0,o=e;Math.abs(o)>=1e3&&n<r.length-1;)o/=1e3,n++;return(0,O.ZV)(o,t.locale,{maximumFractionDigits:"W"===r[n]?0:3})+" "+r[n]};n()}catch(ft){n(ft)}})}}]);
//# sourceMappingURL=77183.f80667b3fc7a6cf8.js.map