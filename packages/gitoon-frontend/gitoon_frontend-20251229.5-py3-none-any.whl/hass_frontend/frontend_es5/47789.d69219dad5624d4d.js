"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["47789"],{90433:function(t,e,i){i.d(e,{Vy:function(){return o},fI:function(){return a},ux:function(){return c}});i(23418),i(47764);var n=i(22786),r=i(79468),s=54;function o(t,e){var i=t%s+1;return e.getPropertyValue("--color-".concat(i))}function a(t,e){var i=e.getPropertyValue("--graph-color-".concat(t+1))||o(t,e);return(0,r.RQ)(i)}var c=(0,n.A)(function(t){return Array.from({length:s},function(e,i){return a(i,t)})},function(t,e){return t[0].getPropertyValue("--graph-color-1")===e[0].getPropertyValue("--graph-color-1")&&t[0].getPropertyValue("--color-1")===e[0].getPropertyValue("--color-1")})},15090:function(t,e,i){i.d(e,{n:function(){return h},v:function(){return u}});var n=i(78261),r=i(7739),s=(i(2008),i(23792),i(62062),i(44114),i(26910),i(18111),i(22489),i(61701),i(5506),i(26099),i(31415),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(47764),i(62953),i(22675)),o=i(52220),a=i(71727),c=i(69093),u={alarm_control_panel:["armed_away","armed_custom_bypass","armed_home","armed_night","armed_vacation","arming","disarmed","disarming","pending","triggered"],alert:["on","off","idle"],assist_satellite:["idle","listening","responding","processing"],automation:["on","off"],binary_sensor:["on","off"],button:[],calendar:["on","off"],camera:["idle","recording","streaming"],cover:["closed","closing","open","opening"],device_tracker:["home","not_home"],fan:["on","off"],humidifier:["on","off"],input_boolean:["on","off"],input_button:[],lawn_mower:["error","paused","mowing","returning","docked"],light:["on","off"],lock:["jammed","locked","locking","unlocked","unlocking","opening","open"],media_player:["off","on","idle","playing","paused","standby","buffering"],person:["home","not_home"],plant:["ok","problem"],remote:["on","off"],scene:[],schedule:["on","off"],script:["on","off"],siren:["on","off"],sun:["above_horizon","below_horizon"],switch:["on","off"],timer:["active","idle","paused"],update:["on","off"],vacuum:["cleaning","docked","error","idle","paused","returning"],valve:["closed","closing","open","opening"],weather:["clear-night","cloudy","exceptional","fog","hail","lightning-rainy","lightning","partlycloudy","pouring","rainy","snowy-rainy","snowy","sunny","windy-variant","windy"]},l={alarm_control_panel:{code_format:["number","text"]},binary_sensor:{device_class:["battery","battery_charging","co","cold","connectivity","door","garage_door","gas","heat","light","lock","moisture","motion","moving","occupancy","opening","plug","power","presence","problem","running","safety","smoke","sound","tamper","update","vibration","window"]},button:{device_class:["restart","update"]},camera:{frontend_stream_type:["hls","web_rtc"]},climate:{hvac_action:["off","idle","preheating","defrosting","heating","cooling","drying","fan"]},cover:{device_class:["awning","blind","curtain","damper","door","garage","gate","shade","shutter","window"]},device_tracker:{source_type:["bluetooth","bluetooth_le","gps","router"]},fan:{direction:["forward","reverse"]},humidifier:{device_class:["humidifier","dehumidifier"],action:["off","idle","humidifying","drying"]},media_player:{device_class:["tv","speaker","receiver"],media_content_type:["album","app","artist","channel","channels","composer","contributing_artist","episode","game","genre","image","movie","music","playlist","podcast","season","track","tvshow","url","video"],repeat:["off","one","all"]},number:{device_class:["temperature"]},sensor:{device_class:["apparent_power","aqi","battery","carbon_dioxide","carbon_monoxide","current","date","duration","energy","frequency","gas","humidity","illuminance","monetary","nitrogen_dioxide","nitrogen_monoxide","nitrous_oxide","ozone","ph","pm1","pm10","pm25","pm4","power_factor","power","pressure","reactive_power","signal_strength","sulphur_dioxide","temperature","timestamp","volatile_organic_compounds","volatile_organic_compounds_parts","voltage","volume_flow_rate"],state_class:["measurement","total","total_increasing"]},switch:{device_class:["outlet","switch"]},update:{device_class:["firmware"]},water_heater:{away_mode:["on","off"]}},h=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,h=(0,c.t)(e),d=[];switch(!i&&h in u?d.push.apply(d,(0,r.A)(u[h])):i&&h in l&&i in l[h]&&d.push.apply(d,(0,r.A)(l[h][i])),h){case"climate":i?"fan_mode"===i?d.push.apply(d,(0,r.A)(e.attributes.fan_modes)):"preset_mode"===i?d.push.apply(d,(0,r.A)(e.attributes.preset_modes)):"swing_mode"===i&&d.push.apply(d,(0,r.A)(e.attributes.swing_modes)):d.push.apply(d,(0,r.A)(e.attributes.hvac_modes));break;case"device_tracker":case"person":i||d.push.apply(d,(0,r.A)(Object.entries(t.states).filter(function(t){var e=(0,n.A)(t,2),i=e[0],r=e[1];return"zone"===(0,a.m)(i)&&"zone.home"!==i&&r.attributes.friendly_name}).map(function(t){var e=(0,n.A)(t,2);e[0];return e[1].attributes.friendly_name}).sort(function(e,i){return(0,o.xL)(e,i,t.locale.language)})));break;case"event":"event_type"===i&&d.push.apply(d,(0,r.A)(e.attributes.event_types));break;case"fan":"preset_mode"===i&&d.push.apply(d,(0,r.A)(e.attributes.preset_modes));break;case"humidifier":"mode"===i&&d.push.apply(d,(0,r.A)(e.attributes.available_modes));break;case"input_select":case"select":i||d.push.apply(d,(0,r.A)(e.attributes.options));break;case"light":"effect"===i&&e.attributes.effect_list?d.push.apply(d,(0,r.A)(e.attributes.effect_list)):"color_mode"===i&&e.attributes.supported_color_modes&&d.push.apply(d,(0,r.A)(e.attributes.supported_color_modes));break;case"media_player":"sound_mode"===i?d.push.apply(d,(0,r.A)(e.attributes.sound_mode_list)):"source"===i&&d.push.apply(d,(0,r.A)(e.attributes.source_list));break;case"remote":"current_activity"===i&&d.push.apply(d,(0,r.A)(e.attributes.activity_list));break;case"sensor":i||"enum"!==e.attributes.device_class||d.push.apply(d,(0,r.A)(e.attributes.options));break;case"vacuum":"fan_speed"===i&&d.push.apply(d,(0,r.A)(e.attributes.fan_speed_list));break;case"water_heater":i&&"operation_mode"!==i||d.push.apply(d,(0,r.A)(e.attributes.operation_list))}return i||d.push.apply(d,(0,r.A)(s.s7)),(0,r.A)(new Set(d))}},72190:function(t,e,i){i.d(e,{c:function(){return f}});i(25276),i(23792),i(36033),i(26099),i(47764),i(62953);var n=i(90433),r=i(79468),s=i(39274),o=i(71727),a=i(69093),c=i(15090),u=i(27120),l=i(22675),h=i(86030),d={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};var _=0,p=new Map;function f(t,e,i){return function(t,e,i){var n;if(!i||t===l.Hh)return(0,h.a)("--history-unavailable-color",e);if(t===l.HV)return(0,h.a)("--history-unknown-color",e);var a=(0,u.mg)(i,t);if(a){var c=(0,h.a)(a,e);if(c){var _=(0,o.m)(i.entity_id),p=null===(n=d[_])||void 0===n?void 0:n[t];return p?(0,r.zm)((0,s.T)((0,r.Nc)((0,r.xp)(c)),p)):c}}}(t,e,i)||function(t,e,i){if(i){var r=(0,a.t)(i),s=(c.v[r]||"sensor"===r&&"enum"===i.attributes.device_class&&i.attributes.options||[]).indexOf(t);if(-1!==s)return(0,n.fI)(s,e)}}(t,e,i)||function(t,e){if(p.has(t))return p.get(t);var i=(0,n.fI)(_,e);return _++,p.set(t,i),i}(t,e)}},23528:function(t,e,i){i.a(t,async function(t,n){try{i.d(e,{$3:function(){return g},$O:function(){return S},$j:function(){return m},ED:function(){return a},JE:function(){return I},OQ:function(){return H},PU:function(){return C},Ph:function(){return f},Uf:function(){return x},W1:function(){return y},Wr:function(){return d},Z:function(){return l},gF:function(){return v},iY:function(){return b},jU:function(){return c},nN:function(){return A},p3:function(){return h},pJ:function(){return p},r_:function(){return u},sz:function(){return _}});i(74423),i(18111),i(13579),i(62953);var r=i(28978),s=i(380),o=t([s]);s=(o.then?(await o)():o)[0];var a=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({});const c=["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"],u=["L","gal","ft³","m³","CCF","MCF"],l=t=>t.sendMessagePromise({type:"recorder/info"}),h=(t,e)=>t.callWS({type:"recorder/list_statistic_ids",statistic_type:e}),d=(t,e)=>t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e}),_=(t,e,i,n,r="hour",s,o)=>t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:null==i?void 0:i.toISOString(),statistic_ids:n,period:r,units:s,types:o}),p=(t,e,i,n)=>t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:n,fixed_period:i.fixed_period?{start_time:i.fixed_period.start instanceof Date?i.fixed_period.start.toISOString():i.fixed_period.start,end_time:i.fixed_period.end instanceof Date?i.fixed_period.end.toISOString():i.fixed_period.end}:void 0,calendar:i.calendar?{..."week"===i.calendar.period?{first_weekday:(0,s.D)(t.locale).substring(0,3)}:{},...i.calendar}:void 0,rolling_window:i.rolling_window}),f=t=>t.callWS({type:"recorder/validate_statistics"}),y=(t,e,i,n)=>t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:i,unit_class:n}),g=(t,e)=>t.callWS({type:"recorder/clear_statistics",statistic_ids:e}),m=t=>{let e=null;if(!t)return null;for(const i of t)null!==i.change&&void 0!==i.change&&(null===e?e=i.change:e+=i.change);return e},v=(t,e)=>{let i=null;for(const n of e){if(!(n in t))continue;const e=m(t[n]);null!==e&&(null===i?i=e:i+=e)}return i},b=(t,e)=>t.some(t=>void 0!==t[e]&&null!==t[e]),w=["mean","min","max"],k=["sum","state","change"],A=(t,e)=>!(!w.includes(e)||0===t.mean_type)||!(!k.includes(e)||!t.has_sum),x=(t,e,i,n,r)=>{const s=new Date(i).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:s,adjustment:n,adjustment_unit_of_measurement:r})},S=(t,e,i)=>{const n=t.states[e];return n?(0,r.u)(n):(null==i?void 0:i.name)||e},I=(t,e,i)=>{let n;var r;e&&(n=null===(r=t.states[e])||void 0===r?void 0:r.attributes.unit_of_measurement);return void 0===n?null==i?void 0:i.statistics_unit_of_measurement:n},H=t=>t.includes(":"),C=t=>t.callWS({type:"recorder/update_statistics_issues"});n()}catch(c){n(c)}})},41544:function(t,e,i){i.a(t,async function(t,n){try{i.r(e),i.d(e,{DEFAULT_HOURS_TO_SHOW:function(){return z},HuiHistoryGraphCard:function(){return D}});var r,s,o,a,c,u=i(72153),l=i(61397),h=i(50264),d=i(44734),_=i(43080),p=i(69683),f=i(6454),y=i(25460),g=(i(16280),i(28706),i(23792),i(62062),i(18111),i(7588),i(61701),i(69085),i(26099),i(3362),i(38781),i(47764),i(23500),i(62953),i(40445)),m=i(96196),v=i(77845),b=i(94333),w=i(36312),k=i(6030),A=i(66737),x=(i(38962),i(76776),i(43661),i(34127)),S=i(25064),I=i(23528),H=i(64808),C=i(37642),O=i(784),T=i(20939),E=t([A,x,I,S]);[A,x,I,S]=E.then?(await E)():E;var z=24,D=function(t){function e(){var t;(0,d.A)(this,e);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=(0,p.A)(this,e,[].concat(n)))._names={},t._entityIds=[],t._entities=[],t._historyLinkId="history-".concat(Math.random().toString(36).substring(2,9)),t._hoursToShow=z,t}return(0,f.A)(e,t),(0,_.A)(e,[{key:"getCardSize",value:function(){var t,e;return null!==(t=this._config)&&void 0!==t&&t.title?2:0+2*((null===(e=this._entityIds)||void 0===e?void 0:e.length)||1)}},{key:"getGridOptions",value:function(){return{columns:12,min_columns:6,min_rows:2}}},{key:"setConfig",value:function(t){if(!t.entities||!Array.isArray(t.entities))throw new Error("Entities need to be an array");if(!t.entities.length)throw new Error("You must include at least one entity");this._entities=t.entities?(0,T.L)(t.entities):[],this._entityIds=this._entities.map(function(t){return t.entity}),this._hoursToShow=t.hours_to_show||z,this._config=t,this._computeNames()}},{key:"_computeNames",value:function(){var t=this;this.hass&&this._config&&(this._names={},this._entities.forEach(function(e){var i=t.hass.states[e.entity];t._names[e.entity]=i?(0,C.v)(t.hass,i,e.name):e.entity}))}},{key:"willUpdate",value:function(t){(0,y.A)(e,"willUpdate",this,3)([t]),t.has("hass")&&this._computeNames()}},{key:"connectedCallback",value:function(){(0,y.A)(e,"connectedCallback",this,3)([]),this.hasUpdated&&this._subscribeHistory()}},{key:"disconnectedCallback",value:function(){(0,y.A)(e,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{key:"_subscribeHistory",value:(g=(0,h.A)((0,l.A)().m(function t(){var e,i,n=this;return(0,l.A)().w(function(t){for(;;)switch(t.n){case 0:if((0,w.x)(this.hass,"history")&&!this._subscribed){t.n=1;break}return t.a(2);case 1:return t.n=2,(0,H.KL)(this.hass);case 2:if(e=t.v,i=e.numeric_device_classes,this.isConnected){t.n=3;break}return t.a(2);case 3:return this._subscribed=(0,S.IQ)(this.hass,function(t){var e;n._subscribed&&(n._stateHistory=(0,S.Mm)(n.hass,t,n._entityIds,n.hass.localize,i,null===(e=n._config)||void 0===e?void 0:e.split_device_classes),n._mergeHistory())},this._hoursToShow,this._entityIds).catch(function(t){n._subscribed=void 0,n._error=t}),t.n=4,this._fetchStatistics(i);case 4:this._setRedrawTimer();case 5:return t.a(2)}},t,this)})),function(){return g.apply(this,arguments)})},{key:"_mergeHistory",value:function(){var t;this._stateHistory&&(this._history=(0,S.tG)(this._stateHistory,this._statisticsHistory,null===(t=this._config)||void 0===t?void 0:t.split_device_classes))}},{key:"_fetchStatistics",value:(c=(0,h.A)((0,l.A)().m(function t(e){var i,n,r,s;return(0,l.A)().w(function(t){for(;;)switch(t.n){case 0:return n=new Date,(r=new Date).setHours(r.getHours()-this._hoursToShow-1),t.n=1,(0,I.sz)(this.hass,r,n,this._entityIds,"hour",void 0,["mean","state"]);case 1:s=t.v,this._statisticsHistory=(0,S._1)(this.hass,s,this._entityIds,e,null===(i=this._config)||void 0===i?void 0:i.split_device_classes),this._mergeHistory();case 2:return t.a(2)}},t,this)})),function(t){return c.apply(this,arguments)})},{key:"_redrawGraph",value:function(){this._history&&(this._history=Object.assign({},this._history))}},{key:"_setRedrawTimer",value:function(){var t=this;clearInterval(this._interval),this.isConnected&&(this._interval=window.setInterval(function(){return t._redrawGraph()},6e4))}},{key:"_unsubscribeHistory",value:function(){clearInterval(this._interval),this._subscribed&&(this._subscribed.then(function(t){return null==t?void 0:t()}),this._subscribed=void 0)}},{key:"shouldUpdate",value:function(t){return(0,O.pY)(this,t)||t.size>1||!t.has("hass")}},{key:"updated",value:function(t){if((0,y.A)(e,"updated",this,3)([t]),this._config&&this.hass&&this._hoursToShow&&this._entityIds.length&&(t.has("_config")||t.has("hass"))){var i=t.get("_config");!t.has("_config")||(null==i?void 0:i.entities)===this._config.entities&&(null==i?void 0:i.hours_to_show)===this._config.hours_to_show||(this._unsubscribeHistory(),this._subscribeHistory())}}},{key:"render",value:function(){var t,e,i,n;if(!this.hass||!this._config)return m.s6;var c=new Date;c.setHours(c.getHours()-this._hoursToShow);var l="/history?".concat((0,k.KH)({entity_id:this._entityIds.join(","),back:"1",start_date:c.toISOString()})),h=null!==(t=null===(e=this._config.grid_options)||void 0===e?void 0:e.columns)&&void 0!==t?t:12,d="number"==typeof h&&h<=12,_="number"==typeof(null===(i=this._config.grid_options)||void 0===i?void 0:i.rows);return(0,m.qy)(r||(r=(0,u.A)([" <ha-card> ",' <div class="content ','"> '," </div> </ha-card> "])),this._config.title?(0,m.qy)(s||(s=(0,u.A)([' <h1 class="card-header"> ',' <a id="','" href="','" aria-label="','"> <ha-icon-next></ha-icon-next> </a> <ha-tooltip for="','" placement="left"> '," </ha-tooltip> </h1> "])),this._config.title,this._historyLinkId,l,this.hass.localize("panel.history"),this._historyLinkId,this.hass.localize("panel.history")):m.s6,(0,b.H)({"has-header":!!this._config.title,"has-rows":!(null===(n=this._config.grid_options)||void 0===n||!n.rows),"has-height":_}),this._error?(0,m.qy)(o||(o=(0,u.A)([' <ha-alert alert-type="error"> ',": "," </ha-alert> "])),this.hass.localize("ui.components.history_charts.error"),this._error.message||this._error.code):(0,m.qy)(a||(a=(0,u.A)([' <state-history-charts .hass="','" .isLoadingData="','" .historyData="','" .names="','" up-to-now .hoursToShow="','" .showNames="','" .logarithmicScale="','" .minYAxis="','" .maxYAxis="','" .fitYData="','" .height="','" .narrow="','" .expandLegend="','"></state-history-charts> '])),this.hass,!this._history,this._history,this._names,this._hoursToShow,void 0===this._config.show_names||this._config.show_names,this._config.logarithmic_scale||!1,this._config.min_y_axis,this._config.max_y_axis,this._config.fit_y_data||!1,_?"100%":void 0,d,this._config.expand_legend))}}],[{key:"getConfigElement",value:(n=(0,h.A)((0,l.A)().m(function t(){return(0,l.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.all([i.e("44533"),i.e("92769"),i.e("44966"),i.e("52242"),i.e("7592"),i.e("39005"),i.e("44838"),i.e("33908"),i.e("99143"),i.e("66990"),i.e("37406"),i.e("81804"),i.e("4637")]).then(i.bind(i,67801));case 1:return t.a(2,document.createElement("hui-history-graph-card-editor"))}},t)})),function(){return n.apply(this,arguments)})},{key:"getStubConfig",value:function(){return{type:"history-graph",entities:["sun.sun"]}}}]);var n,c,g}(m.WF);D.styles=(0,m.AH)(c||(c=(0,u.A)(["ha-card{display:flex;flex-direction:column;height:100%}.card-header{justify-content:space-between;display:flex;padding-bottom:0}.card-header ha-icon-next{--mdc-icon-button-size:24px;line-height:24px;color:var(--primary-text-color)}.content{padding:0 16px 8px;flex:1;overflow:hidden}.has-header{padding-top:0}state-history-charts{--timeline-top-margin:16px}.has-height state-history-charts{height:100%}.has-rows{--chart-max-height:100%}"]))),(0,g.Cg)([(0,v.MZ)({attribute:!1})],D.prototype,"hass",void 0),(0,g.Cg)([(0,v.wk)()],D.prototype,"_history",void 0),(0,g.Cg)([(0,v.wk)()],D.prototype,"_statisticsHistory",void 0),(0,g.Cg)([(0,v.wk)()],D.prototype,"_config",void 0),(0,g.Cg)([(0,v.wk)()],D.prototype,"_error",void 0),D=(0,g.Cg)([(0,v.EM)("hui-history-graph-card")],D),n()}catch(L){n(L)}})},49340:function(t){var e=Math.log,i=Math.LOG10E;t.exports=Math.log10||function(t){return e(t)*i}},75376:function(t,e,i){i(46518)({target:"Math",stat:!0},{log10:i(49340)})},13611:function(t,e,i){var n=i(46518),r=i(22195),s=i(62106),o=i(43724),a=TypeError,c=Object.defineProperty,u=r.self!==r;try{if(o){var l=Object.getOwnPropertyDescriptor(r,"self");!u&&l&&l.get&&l.enumerable||s(r,"self",{get:function(){return r},set:function(t){if(this!==r)throw new a("Illegal invocation");c(r,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else n({global:!0,simple:!0,forced:u},{self:r})}catch(h){}}}]);
//# sourceMappingURL=47789.d69219dad5624d4d.js.map