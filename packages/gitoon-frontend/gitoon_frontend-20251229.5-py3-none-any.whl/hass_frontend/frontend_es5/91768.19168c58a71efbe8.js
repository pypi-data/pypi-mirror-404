(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["91768"],{90433:function(t,e,i){"use strict";i.d(e,{Vy:function(){return s},fI:function(){return a},ux:function(){return u}});i(23418),i(47764);var o=i(22786),n=i(79468),r=54;function s(t,e){var i=t%r+1;return e.getPropertyValue("--color-".concat(i))}function a(t,e){var i=e.getPropertyValue("--graph-color-".concat(t+1))||s(t,e);return(0,n.RQ)(i)}var u=(0,o.A)(function(t){return Array.from({length:r},function(e,i){return a(i,t)})},function(t,e){return t[0].getPropertyValue("--graph-color-1")===e[0].getPropertyValue("--graph-color-1")&&t[0].getPropertyValue("--color-1")===e[0].getPropertyValue("--color-1")})},58548:function(t,e,i){"use strict";i.d(e,{A:function(){return n}});i(16280),i(34782),i(27495),i(99449),i(25440);var o=function(t){var e=parseFloat(t);if(isNaN(e))throw new Error("".concat(t," is not a number"));return e};function n(t){if(!t)return null;try{if(t.endsWith("%"))return{w:100,h:o(t.slice(0,-1))};var e=t.replace(":","x").split("x");return 0===e.length?null:1===e.length?{w:o(e[0]),h:1}:{w:o(e[0]),h:o(e[1])}}catch(i){}return null}},22845:function(t,e,i){"use strict";i.a(t,async function(t,o){try{i.r(e),i.d(e,{DEFAULT_HOURS_TO_SHOW:function(){return j},DEFAULT_ZOOM:function(){return D}});var n,r,s,a,u=i(61397),l=i(50264),c=i(7739),h=i(72153),f=i(31432),d=i(44734),_=i(43080),g=i(69683),v=i(6454),p=i(25460),y=(i(16280),i(28706),i(2008),i(50113),i(23792),i(62062),i(44114),i(18111),i(20116),i(7588),i(61701),i(2892),i(69085),i(79432),i(26099),i(16034),i(3362),i(31415),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(47764),i(23500),i(62953),i(40445)),b=i(96196),m=i(77845),A=i(22786),k=i(90433),w=i(36312),E=i(71727),M=i(69093),C=i(28978),H=i(19459),x=i(58548),S=(i(38962),i(76776),i(26300),i(22273)),V=i(25064),O=i(13632),P=i(784),z=i(20939),F=t([S,V]);[S,V]=F.then?(await F)():F;var j=0,D=14,U=function(t){function e(){var t;(0,d.A)(this,e);for(var i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(t=(0,g.A)(this,e,[].concat(o)))._mapEntities=[],t._colorDict={},t._colorIndex=0,t._clusterMarkers=!0,t._getHistoryPaths=(0,A.A)(function(e,i){var o;if(i&&(null!==(o=e.hours_to_show)&&void 0!==o?o:j)){for(var n=[],r=function(){var o,r,u,l=a[s];if("zone"===(0,E.m)(l))return 0;var c=i[l];if(null==c||!c.length)return 0;var h,d=[],_=(0,f.A)(c);try{for(_.s();!(h=_.n()).done;){var g=h.value,v=g.a.latitude,p=g.a.longitude;if(v&&p){var y={};y.point=[v,p],y.timestamp=new Date(1e3*g.lu),d.push(y)}}}catch(A){_.e(A)}finally{_.f()}var b=null===(o=t._configEntities)||void 0===o?void 0:o.find(function(t){return t.entity===l}),m=null!==(r=null==b?void 0:b.name)&&void 0!==r?r:l in t.hass.states?(0,C.u)(t.hass.states[l]):l;n.push({points:d,name:m,fullDatetime:(null!==(u=e.hours_to_show)&&void 0!==u?u:j)>144,color:t._getColor(l),gradualOpacity:.8})},s=0,a=Object.keys(i);s<a.length;s++)r();return n}}),t}return(0,v.A)(e,t),(0,_.A)(e,[{key:"_getAllEntities",value:function(){var t=this.hass,e=new Set,i=[];return Object.values(t.states).forEach(function(t){"latitude"in t.attributes&&"longitude"in t.attributes&&(i.push(t.entity_id),"person"===(0,M.t)(t)&&t.attributes.source&&e.add(t.attributes.source))}),i.filter(function(i){var o;return!(null!==(o=t.entities)&&void 0!==o&&null!==(o=o[i])&&void 0!==o&&o.hidden||e.has(i))})}},{key:"setConfig",value:function(t){var e,i;if(!t)throw new Error("Error in card configuration.");if(!(t.show_all||null!==(e=t.entities)&&void 0!==e&&e.length||t.geo_location_sources))throw new Error("Either show_all, entities, or geo_location_sources must be specified");if(t.entities&&!Array.isArray(t.entities))throw new Error("Entities need to be an array");if(t.geo_location_sources&&!Array.isArray(t.geo_location_sources))throw new Error("Parameter geo_location_sources needs to be an array");if(t.show_all&&(t.entities||t.geo_location_sources))throw new Error("Cannot specify show_all and entities or geo_location_sources");this._config=Object.assign({},t),this.hass&&t.show_all&&(this._config.entities=this._getAllEntities()),this._configEntities=this._config.entities?(0,z.L)(this._config.entities):[],this._mapEntities=this._getMapEntities(),this._clusterMarkers=null===(i=this._config.cluster)||void 0===i||i}},{key:"getCardSize",value:function(){var t;if(null===(t=this._config)||void 0===t||!t.aspect_ratio)return 7;var e=(0,x.A)(this._config.aspect_ratio),i=e&&e.w>0&&e.h>0?"".concat((100*e.h/e.w).toFixed(2)):"100";return 1+Math.floor(Number(i)/25)||3}},{key:"firstUpdated",value:function(){this._mapEntities=this._getMapEntities()}},{key:"render",value:function(){var t;if(!this._config)return b.s6;if(this._error)return(0,b.qy)(n||(n=(0,h.A)(['<ha-alert alert-type="error"> ',": "," (",") </ha-alert>"])),this.hass.localize("ui.components.map.error"),this._error.message,this._error.code);var e=!(!this._config.dark_mode&&"dark"!==this._config.theme_mode)||"light"!==this._config.theme_mode&&this.hass.themes.darkMode,i=this._config.theme_mode||(this._config.dark_mode?"dark":"auto");return(0,b.qy)(r||(r=(0,h.A)([' <ha-card id="card" .header="','"> <div id="root"> <ha-map .hass="','" .entities="','" .zoom="','" .paths="','" .autoFit="','" .fitZones="','" .themeMode="','" .clusterMarkers="','" interactive-zones render-passive></ha-map> <div id="buttons"> ',' <ha-icon-button .label="','" .path="','" style="','" @click="','" tabindex="0"></ha-icon-button> </div> </div> </ha-card> '])),this._config.title,this.hass,this._mapEntities,null!==(t=this._config.default_zoom)&&void 0!==t?t:D,this._getHistoryPaths(this._config,this._stateHistory),this._config.auto_fit||!1,this._config.fit_zones||!1,i,this._clusterMarkers,this._mapEntities.length>1?(0,b.qy)(s||(s=(0,h.A)([' <ha-icon-button .label="','" .path="','" style="','" @click="','" tabindex="0"></ha-icon-button> '])),this.hass.localize("ui.panel.lovelace.cards.map.toggle_grouping"),this._clusterMarkers?"M15,12C13.89,12 13,12.89 13,14A2,2 0 0,0 15,16A2,2 0 0,0 17,14C17,12.89 16.1,12 15,12M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M14,9C14,7.89 13.1,7 12,7C10.89,7 10,7.89 10,9A2,2 0 0,0 12,11A2,2 0 0,0 14,9M9,12A2,2 0 0,0 7,14A2,2 0 0,0 9,16A2,2 0 0,0 11,14C11,12.89 10.1,12 9,12Z":"M16 12C16 10.9 16.9 10 18 10S20 10.9 20 12 19.1 14 18 14 16 13.1 16 12M10 12C10 10.9 10.9 10 12 10S14 10.9 14 12 13.1 14 12 14 10 13.1 10 12M4 12C4 10.9 4.9 10 6 10S8 10.9 8 12 7.1 14 6 14 4 13.1 4 12M13 18C13 16.9 13.9 16 15 16S17 16.9 17 18 16.1 20 15 20 13 19.1 13 18M7 18C7 16.9 7.9 16 9 16S11 16.9 11 18 10.1 20 9 20 7 19.1 7 18M13 6C13 4.9 13.9 4 15 4S17 4.9 17 6 16.1 8 15 8 13 7.1 13 6M7 6C7 4.9 7.9 4 9 4S11 4.9 11 6 10.1 8 9 8 7 7.1 7 6",e?"color:#ffffff":"color:#000000",this._toggleClusterMarkers):b.s6,this.hass.localize("ui.panel.lovelace.cards.map.reset_focus"),"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M19,19H15V21H19A2,2 0 0,0 21,19V15H19M19,3H15V5H19V9H21V5A2,2 0 0,0 19,3M5,5H9V3H5A2,2 0 0,0 3,5V9H5M5,15H3V19A2,2 0 0,0 5,21H9V19H5V15Z",e?"color:#ffffff":"color:#000000",this._resetFocus)}},{key:"shouldUpdate",value:function(t){var e,i;if(!t.has("hass")||t.size>1)return!0;var o=t.get("hass");return!o||!this._configEntities||(o.themes.darkMode!==this.hass.themes.darkMode||(!!t.has("_stateHistory")||(!(null===(e=this._config)||void 0===e||!e.geo_location_sources||o.states===this.hass.states)||(null!==(i=this._config)&&void 0!==i&&i.entities?(0,P.pY)(this,t):(0,P.xP)(this,t)))))}},{key:"willUpdate",value:function(t){var i,o,n,r;(0,p.A)(e,"willUpdate",this,3)([t]),null!==(i=this._config)&&void 0!==i&&i.show_all&&(null===(o=this._config)||void 0===o||!o.entities)&&this.hass&&t.has("hass")&&(this._config.entities=this._getAllEntities(),this._configEntities=(0,z.L)(this._config.entities),this._mapEntities=this._getMapEntities()),t.has("hass")&&null!==(n=this._config)&&void 0!==n&&n.geo_location_sources&&!(0,H.b)(this._getSourceEntities(null===(r=t.get("hass"))||void 0===r?void 0:r.states),this._getSourceEntities(this.hass.states))&&(this._mapEntities=this._getMapEntities())}},{key:"connectedCallback",value:function(){var t;(0,p.A)(e,"connectedCallback",this,3)([]),this.hasUpdated&&null!==(t=this._configEntities)&&void 0!==t&&t.length&&this._subscribeHistory()}},{key:"disconnectedCallback",value:function(){(0,p.A)(e,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{key:"_subscribeHistory",value:function(){var t,e,i,o=this;(0,w.x)(this.hass,"history")&&!this._subscribed&&(null!==(t=null===(e=this._config)||void 0===e?void 0:e.hours_to_show)&&void 0!==t?t:j)&&(this._subscribed=(0,V.IQ)(this.hass,function(t){o._subscribed&&(o._stateHistory=t)},null!==(i=this._config.hours_to_show)&&void 0!==i?i:j,(this._configEntities||[]).map(function(t){return t.entity}),!1,!1,!1).catch(function(t){o._subscribed=void 0,o._error=t}))}},{key:"_unsubscribeHistory",value:function(){this._subscribed&&(this._subscribed.then(function(t){return null==t?void 0:t()}),this._subscribed=void 0)}},{key:"updated",value:function(t){var e;null!==(e=this._configEntities)&&void 0!==e&&e.length?this._subscribed&&!t.has("_config")||(this._unsubscribeHistory(),this._subscribeHistory()):this._unsubscribeHistory(),t.has("_config")&&this._computePadding()}},{key:"_computePadding",value:function(){var t=this.shadowRoot.getElementById("root"),e="panel"===this.layout||"grid"===this.layout;if(this._config&&!e&&t)if(this._config.aspect_ratio){t.style.height="auto";var i=(0,x.A)(this._config.aspect_ratio);t.style.paddingBottom=i&&i.w>0&&i.h>0?"".concat((100*i.h/i.w).toFixed(2),"%"):t.style.paddingBottom="100%"}else t.style.paddingBottom="100%"}},{key:"_resetFocus",value:function(){var t;null===(t=this._map)||void 0===t||t.fitMap({unpause_autofit:!0})}},{key:"_toggleClusterMarkers",value:function(){this._clusterMarkers=!this._clusterMarkers}},{key:"_getColor",value:function(t){var e=this._colorDict[t];if(e)return e;var i=getComputedStyle(this);return e=(0,k.Vy)(this._colorIndex,i),this._colorIndex++,this._colorDict[t]=e,e}},{key:"_getSourceEntities",value:function(t){var e;if(!t||null===(e=this._config)||void 0===e||!e.geo_location_sources)return[];for(var i=this._config.geo_location_sources.map(function(t){return"string"==typeof t?{source:t}:t}),o=[],n=i.find(function(t){return"all"===t.source}),r=function(){var t,e,r,u,l,c=a[s],h=i.find(function(t){return t.source===c.attributes.source});"geo_location"===(0,E.m)(c.entity_id)&&(n||h)&&o.push({entity_id:c.entity_id,label_mode:null!==(t=null==h?void 0:h.label_mode)&&void 0!==t?t:null==n?void 0:n.label_mode,attribute:null!==(e=null==h?void 0:h.attribute)&&void 0!==e?e:null==n?void 0:n.attribute,unit:null!==(r=null==h?void 0:h.unit)&&void 0!==r?r:null==n?void 0:n.unit,focus:h?null===(u=h.focus)||void 0===u||u:null===(l=null==n?void 0:n.focus)||void 0===l||l})},s=0,a=Object.values(t);s<a.length;s++)r();return o}},{key:"_getMapEntities",value:function(){var t,e=this;return[].concat((0,c.A)((this._configEntities||[]).map(function(t){return{entity_id:t.entity,color:e._getColor(t.entity),label_mode:t.label_mode,attribute:t.attribute,unit:t.unit,focus:t.focus,name:t.name}})),(0,c.A)(this._getSourceEntities(null===(t=this.hass)||void 0===t?void 0:t.states).map(function(t){return Object.assign(Object.assign({},t),{},{color:e._getColor(t.entity_id)})})))}},{key:"getGridOptions",value:function(){return{columns:"full",rows:4,min_columns:6,min_rows:2}}}],[{key:"getConfigElement",value:(o=(0,l.A)((0,u.A)().m(function t(){return(0,u.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.all([i.e("44533"),i.e("92769"),i.e("44966"),i.e("34326"),i.e("52242"),i.e("4939"),i.e("81913"),i.e("7592"),i.e("39005"),i.e("44838"),i.e("68257"),i.e("9975")]).then(i.bind(i,81846));case 1:return t.a(2,document.createElement("hui-map-card-editor"))}},t)})),function(){return o.apply(this,arguments)})},{key:"getStubConfig",value:function(t,e,i){return{type:"map",entities:(0,O.B)(t,2,e,i,["device_tracker"]),theme_mode:"auto"}}}]);var o}(b.WF);U.styles=(0,b.AH)(a||(a=(0,h.A)(["ha-card{overflow:hidden;width:100%;height:100%;display:flex;flex-direction:column}ha-map{z-index:0;border:none;position:absolute;top:0;left:0;width:100%;height:100%;background:inherit;border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));overflow:hidden}#buttons{position:absolute;top:75px;left:3px;display:flex;flex-direction:column}#root{position:relative;height:100%}"]))),(0,y.Cg)([(0,m.MZ)({attribute:!1})],U.prototype,"hass",void 0),(0,y.Cg)([(0,m.MZ)({attribute:!1})],U.prototype,"layout",void 0),(0,y.Cg)([(0,m.wk)()],U.prototype,"_stateHistory",void 0),(0,y.Cg)([(0,m.wk)()],U.prototype,"_config",void 0),(0,y.Cg)([(0,m.P)("ha-map")],U.prototype,"_map",void 0),(0,y.Cg)([(0,m.wk)()],U.prototype,"_mapEntities",void 0),(0,y.Cg)([(0,m.wk)()],U.prototype,"_error",void 0),(0,y.Cg)([(0,m.wk)()],U.prototype,"_clusterMarkers",void 0),U=(0,y.Cg)([(0,m.EM)("hui-map-card")],U),o()}catch(I){o(I)}})},51613:function(t,e,i){function o(e){return t.exports=o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,o(e)}i(52675),i(89463),i(2259),i(23792),i(26099),i(47764),i(62953),t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},13611:function(t,e,i){"use strict";var o=i(46518),n=i(22195),r=i(62106),s=i(43724),a=TypeError,u=Object.defineProperty,l=n.self!==n;try{if(s){var c=Object.getOwnPropertyDescriptor(n,"self");!l&&c&&c.get&&c.enumerable||r(n,"self",{get:function(){return n},set:function(t){if(this!==n)throw new a("Illegal invocation");u(n,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else o({global:!0,simple:!0,forced:l},{self:n})}catch(h){}}}]);
//# sourceMappingURL=91768.19168c58a71efbe8.js.map