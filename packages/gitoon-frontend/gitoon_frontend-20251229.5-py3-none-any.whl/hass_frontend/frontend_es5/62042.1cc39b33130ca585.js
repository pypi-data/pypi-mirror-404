"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["62042"],{67084:function(t,e,i){i.d(e,{A:function(){return n}});i(28706),i(58940);var a=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=""+t,a=1;a<e;a++)i=parseInt(i)<Math.pow(10,a)?"0".concat(i):i;return i};function n(t){var e=Math.floor(t/1e3/3600),i=Math.floor(t/1e3%3600/60),n=Math.floor(t/1e3%3600%60),o=Math.floor(t%1e3);return e>0?"".concat(e,":").concat(a(i),":").concat(a(n)):i>0?"".concat(i,":").concat(a(n)):n>0||o>0?"".concat(n).concat(o>0?".".concat(a(o,3)):""):null}},26218:function(t,e,i){i.d(e,{a:function(){return o}});var a=i(47075),n=(i(16280),i(69085),i(83851),(0,i(77796).n)(function(t){history.replaceState({scrollPosition:t},"")},300));function o(t){return function(e,i){if("object"===(0,a.A)(i))throw new Error("This decorator does not support this compilation type.");var o=e.connectedCallback;e.connectedCallback=function(){var e=this;o.call(this);var a=this[i];a&&this.updateComplete.then(function(){var i=e.renderRoot.querySelector(t);i&&setTimeout(function(){i.scrollTop=a},0)})};var r,s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s)r={get:function(){var t;return this["__".concat(String(i))]||(null===(t=history.state)||void 0===t?void 0:t.scrollPosition)},set:function(t){n(t),this["__".concat(String(i))]=t},configurable:!0,enumerable:!0};else{var h=s.set;r=Object.assign(Object.assign({},s),{},{set:function(t){n(t),this["__".concat(String(i))]=t,null==h||h.call(this,t)}})}Object.defineProperty(e,i,r)}}},75428:function(t,e,i){i.d(e,{D:function(){return o}});var a=i(75158),n=i.n(a),o=function(t){return n()(t,{whiteList:{},stripIgnoreTag:!0,stripIgnoreTagBody:!0})}},23577:function(t,e,i){i.a(t,async function(t,e){try{var a,n=i(31432),o=i(72153),r=i(44734),s=i(43080),h=i(75864),c=i(69683),l=i(6454),d=(i(28706),i(50113),i(23792),i(62062),i(44114),i(18111),i(20116),i(7588),i(13579),i(75376),i(2892),i(45374),i(26099),i(31415),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(47764),i(23500),i(62953),i(40445)),u=i(96196),m=i(77845),p=i(6415),y=i(90433),v=i(15638),g=i(44439),f=i(95747),_=i(20058),x=i(3461),b=i(1087),w=i(38279),A=i(8549),C=t([f,_,g]);[f,_,g]=C.then?(await C)():C;var M=function(t){var e=parseFloat(t);return isFinite(e)?e:null},T=function(t){function e(){var t;(0,r.A)(this,e);for(var i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(t=(0,c.A)(this,e,[].concat(a))).data=[],t.showNames=!0,t.clickForMoreInfo=!0,t.paddingYAxis=0,t.logarithmicScale=!1,t.fitYData=!1,t._chartData=[],t._entityIds=[],t._datasetToDataIndex=[],t._hiddenStats=new Set,t._yWidth=25,t._chartTime=new Date,t._previousYAxisLabelValue=0,t._yAxisMaximumFractionDigits=0,t._renderTooltip=function(e){var i=e[0].axisValue,a=(0,f.yg)(new Date(i),t.hass.locale,t.hass.config)+"<br>",n=[];t._chartData.forEach(function(a,o){var r;if(!1!==(null===(r=a.tooltip)||void 0===r?void 0:r.show)&&!t._hiddenStats.has(a.id)){var s=e.find(function(t){return t.seriesIndex===o});if(s)n.push(s);else{for(var h,c=a.data||[],l=c.length-1;l>=0;l--){var d=c[l];if(d&&d[0]<=i&&"number"==typeof d[1]){h=d;break}}h&&n.push({seriesName:a.name,seriesIndex:o,value:h,marker:'<span style="display:inline-block;margin-right:4px;margin-inline-end:4px;margin-inline-start:initial;border-radius:10px;width:10px;height:10px;background-color:'.concat(a.color,';"></span>')})}}});var o=t.unit?"".concat((0,A.A)(t.unit,t.hass.locale)).concat(t.unit):"";return a+n.map(function(e){var i=t._entityIds[e.seriesIndex],a=t.hass.states[i],n=t.hass.entities[i],r=String(e.value[1]),s=a?t.hass.formatEntityState(a,r):"".concat((0,_.ZV)(r,t.hass.locale,(0,_.ZQ)(void 0,n))).concat(o),h=t._datasetToDataIndex[e.seriesIndex],c=t.data[h];c.statistics&&c.statistics.length>0&&(s+="<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",s+=0===c.states.length||e.value[0]<c.states[0].last_changed?"".concat(t.hass.localize("ui.components.history_charts.source_stats")):"".concat(t.hass.localize("ui.components.history_charts.source_history")));return e.seriesName?"".concat(e.marker," ").concat(e.seriesName,": ").concat(s):"".concat(e.marker," ").concat(s)}).join("<br>")},t._formatYAxisLabel=function(e){var i=Math.max(1,-Math.floor(Math.log10(Math.abs(e-t._previousYAxisLabelValue||1))));t._yAxisMaximumFractionDigits=Math.max(t._yAxisMaximumFractionDigits,i);var a=(0,_.ZV)(e,t.hass.locale,{maximumFractionDigits:t._yAxisMaximumFractionDigits}),n=(0,x.W)(a,12)+5;return n>t._yWidth&&(t._yWidth=n,(0,b.r)((0,h.A)(t),"y-width-changed",{value:t._yWidth,chartIndex:t.chartIndex})),t._previousYAxisLabelValue=e,a},t}return(0,l.A)(e,t),(0,s.A)(e,[{key:"render",value:function(){return(0,u.qy)(a||(a=(0,o.A)([' <ha-chart-base .hass="','" .data="','" .options="','" .height="','" style="','" @dataset-hidden="','" @dataset-unhidden="','" @chart-zoom="','" .expandLegend="','" .hideResetButton="','"></ha-chart-base> '])),this.hass,this._chartData,this._chartOptions,this.height,(0,p.W)({height:this.height}),this._datasetHidden,this._datasetUnhidden,this._handleDataZoom,this.expandLegend,this.hideResetButton)}},{key:"_datasetHidden",value:function(t){this._hiddenStats.add(t.detail.id)}},{key:"_datasetUnhidden",value:function(t){this._hiddenStats.delete(t.detail.id)}},{key:"zoom",value:function(t,e){this.shadowRoot.querySelector("ha-chart-base").zoom(t,e,!0)}},{key:"_handleDataZoom",value:function(t){var e,i;(0,b.r)(this,"chart-zoom-with-index",{start:null!==(e=t.detail.start)&&void 0!==e?e:0,end:null!==(i=t.detail.end)&&void 0!==i?i:100,chartIndex:this.chartIndex})}},{key:"willUpdate",value:function(t){var e=this;if((t.has("data")||t.has("startTime")||t.has("endTime")||this._chartTime<new Date(this.endTime.getTime()-g.p))&&this._generateData(),!this.hasUpdated||t.has("showNames")||t.has("startTime")||t.has("endTime")||t.has("unit")||t.has("logarithmicScale")||t.has("minYAxis")||t.has("maxYAxis")||t.has("fitYData")||t.has("paddingYAxis")||t.has("_visualMap")||t.has("_yWidth")){var i=(0,v.qC)(this.hass),a=this.minYAxis,n=this.maxYAxis;"number"==typeof a?this.fitYData&&(a=function(t){var i=t.min;return Math.min(e._roundYAxis(i,Math.floor),e.minYAxis)}):this.logarithmicScale&&(a=function(t){var i=t.min,a=i>0?.95*i:1.05*i;return e._roundYAxis(a,Math.floor)}),"number"==typeof n?this.fitYData&&(n=function(t){var i=t.max;return Math.max(e._roundYAxis(i,Math.ceil),e.maxYAxis)}):this.logarithmicScale&&(n=function(t){var i=t.max,a=i>0?1.05*i:.95*i;return e._roundYAxis(a,Math.ceil)}),this._chartOptions={xAxis:{type:"time",min:this.startTime,max:this.endTime},yAxis:{type:this.logarithmicScale?"log":"value",name:this.unit,min:this._clampYAxis(a),max:this._clampYAxis(n),position:i?"right":"left",scale:!0,nameGap:2,nameTextStyle:{align:"left"},axisLine:{show:!1},axisLabel:{margin:5,formatter:this._formatYAxisLabel}},legend:{type:"custom",show:this.showNames},grid:{top:15,left:i?1:Math.max(this.paddingYAxis,this._yWidth),right:i?Math.max(this.paddingYAxis,this._yWidth):1,bottom:20},visualMap:this._visualMap,tooltip:{trigger:"axis",appendTo:document.body,formatter:this._renderTooltip}}}}},{key:"_generateData",value:function(){var t=this,e=0,i=getComputedStyle(this),a=this.data,o=[],r=[],s=[];if(0!==a.length){this._chartTime=new Date;var h=this.endTime,c=this.names||{};a.forEach(function(a,l){var d=a.domain,u=c[a.entity_id]||a.name,m=null,p=[],v=function(t,e){e&&(t>h||(p.forEach(function(i,a){null===e[a]&&m&&null!==m[a]&&i.data.push([t,m[a]]),i.data.push([t,e[a]])}),m=e))},g=function(t,n,o){var h=arguments.length>3&&void 0!==arguments[3]&&arguments[3];o||(o=(0,y.fI)(e,i),e++),p.push({id:t,data:[],type:"line",cursor:"default",name:n,color:o,symbol:"circle",symbolSize:1,step:"end",sampling:"minmax",animationDurationUpdate:0,lineStyle:{width:h?0:1.5},areaStyle:h?{color:o+"7F"}:void 0,tooltip:{show:!h}}),r.push(a.entity_id),s.push(l)};if("thermostat"===d||"climate"===d||"water_heater"===d){var f=a.states.some(function(t){var e;return null===(e=t.attributes)||void 0===e?void 0:e.hvac_action}),_="climate"===d&&f?function(t){var e;return"heat"===w.sx[null===(e=t.attributes)||void 0===e?void 0:e.hvac_action]}:function(t){return"heat"===t.state},x="climate"===d&&f?function(t){var e;return"cool"===w.sx[null===(e=t.attributes)||void 0===e?void 0:e.hvac_action]}:function(t){return"cool"===t.state},b=a.states.some(_),A=a.states.some(x),C=a.states.some(function(t){return t.attributes&&t.attributes.target_temp_high!==t.attributes.target_temp_low});g(a.entity_id+"-current_temperature",t.showNames?t.hass.localize("ui.card.climate.current_temperature",{name:u}):t.hass.localize("component.climate.entity_component._.state_attributes.current_temperature.name")),b&&g(a.entity_id+"-heating",t.showNames?t.hass.localize("ui.card.climate.heating",{name:u}):t.hass.localize("component.climate.entity_component._.state_attributes.hvac_action.state.heating"),i.getPropertyValue("--state-climate-heat-color"),!0),A&&g(a.entity_id+"-cooling",t.showNames?t.hass.localize("ui.card.climate.cooling",{name:u}):t.hass.localize("component.climate.entity_component._.state_attributes.hvac_action.state.cooling"),i.getPropertyValue("--state-climate-cool-color"),!0),C?(g(a.entity_id+"-target_temperature_mode",t.showNames?t.hass.localize("ui.card.climate.target_temperature_mode",{name:u,mode:t.hass.localize("ui.card.climate.high")}):t.hass.localize("component.climate.entity_component._.state_attributes.target_temp_high.name")),g(a.entity_id+"-target_temperature_mode_low",t.showNames?t.hass.localize("ui.card.climate.target_temperature_mode",{name:u,mode:t.hass.localize("ui.card.climate.low")}):t.hass.localize("component.climate.entity_component._.state_attributes.target_temp_low.name"))):g(a.entity_id+"-target_temperature",t.showNames?t.hass.localize("ui.card.climate.target_temperature_entity",{name:u}):t.hass.localize("component.climate.entity_component._.state_attributes.temperature.name")),a.states.forEach(function(t){if(t.attributes){var e=M(t.attributes.current_temperature),i=[e];if(b&&i.push(_(t)?e:null),A&&i.push(x(t)?e:null),C){var a=M(t.attributes.target_temp_high),n=M(t.attributes.target_temp_low);i.push(a,n),v(new Date(t.last_changed),i)}else{var o=M(t.attributes.temperature);i.push(o),v(new Date(t.last_changed),i)}}})}else if("humidifier"===d){var T=a.states.some(function(t){var e;return null===(e=t.attributes)||void 0===e?void 0:e.action}),k=a.states.some(function(t){var e;return null===(e=t.attributes)||void 0===e?void 0:e.current_humidity}),D=T&&a.states.some(function(t){var e;return"humidifying"===(null===(e=t.attributes)||void 0===e?void 0:e.action)}),z=T&&a.states.some(function(t){var e;return"drying"===(null===(e=t.attributes)||void 0===e?void 0:e.action)});g(a.entity_id+"-target_humidity",t.showNames?t.hass.localize("ui.card.humidifier.target_humidity_entity",{name:u}):t.hass.localize("component.humidifier.entity_component._.state_attributes.humidity.name")),k&&g(a.entity_id+"-current_humidity",t.showNames?t.hass.localize("ui.card.humidifier.current_humidity_entity",{name:u}):t.hass.localize("component.humidifier.entity_component._.state_attributes.current_humidity.name")),D?g(a.entity_id+"-humidifying",t.showNames?t.hass.localize("ui.card.humidifier.humidifying",{name:u}):t.hass.localize("component.humidifier.entity_component._.state_attributes.action.state.humidifying"),i.getPropertyValue("--state-humidifier-on-color"),!0):z?g(a.entity_id+"-drying",t.showNames?t.hass.localize("ui.card.humidifier.drying",{name:u}):t.hass.localize("component.humidifier.entity_component._.state_attributes.action.state.drying"),i.getPropertyValue("--state-humidifier-on-color"),!0):g(a.entity_id+"-on",t.showNames?t.hass.localize("ui.card.humidifier.on_entity",{name:u}):t.hass.localize("component.humidifier.entity_component._.state.on"),void 0,!0),a.states.forEach(function(t){var e;if(t.attributes){var i,a=M(t.attributes.humidity),n=k?M(null===(e=t.attributes)||void 0===e?void 0:e.current_humidity):a,o=[a];if(k&&o.push(n),D)o.push("humidifying"===(null===(i=t.attributes)||void 0===i?void 0:i.action)?n:null);else if(z){var r;o.push("drying"===(null===(r=t.attributes)||void 0===r?void 0:r.action)?n:null)}else o.push("on"===t.state?n:null);v(new Date(t.last_changed),o)}})}else{var Z,Y;g(a.entity_id,u);var S=null,I=function(t){var e=M(t.state),i=new Date(t.last_changed);if(null!==e&&S){var a,n=i.getTime(),o=S.getTime(),r=null===(a=Y)||void 0===a?void 0:a.getTime();v(S,[(o-r)/(n-r)*(e-Z)+Z]),v(new Date(o+1),[null]),v(i,[e]),Y=i,Z=e,S=null}else null!==e&&null===S?(v(i,[e]),Y=i,Z=e):null===e&&null===S&&void 0!==Z&&(S=i)};if(a.statistics){var N,W=a.states&&0!==a.states.length?a.states[0].last_changed:0,B=(0,n.A)(a.statistics);try{for(B.s();!(N=B.n()).done;){var L=N.value;if(W&&L.last_changed>=W)break;I(L)}}catch(E){B.e(E)}finally{B.f()}}a.states.forEach(function(t){I(t)}),null!==S&&v(S,[null])}v(h,m),Array.prototype.push.apply(o,p)}),this._chartData=o,this._entityIds=r,this._datasetToDataIndex=s;var l=[];this._chartData.forEach(function(e,i){var a,n,o=t._datasetToDataIndex[i],r=t.data[o];if(r.statistics&&0!==r.statistics.length){var s=null!==(a=null===(n=r.states[0])||void 0===n?void 0:n.last_changed)&&void 0!==a?a:t.endTime.getTime();l.push({show:!1,seriesIndex:i,dimension:0,pieces:[{max:s-.01,colorAlpha:.5},{min:s,colorAlpha:1}]})}}),this._visualMap=l.length>0?l:void 0}}},{key:"_clampYAxis",value:function(t){if(this.logarithmicScale){if("number"==typeof t)return Math.max(t,Number.EPSILON);if("function"==typeof t)return function(e){return Math.max(t(e),Number.EPSILON)}}return t}},{key:"_roundYAxis",value:function(t,e){return Math.abs(t)<1?t:e(t)}}])}(u.WF);(0,d.Cg)([(0,m.MZ)({attribute:!1})],T.prototype,"hass",void 0),(0,d.Cg)([(0,m.MZ)({attribute:!1})],T.prototype,"data",void 0),(0,d.Cg)([(0,m.MZ)({attribute:!1})],T.prototype,"names",void 0),(0,d.Cg)([(0,m.MZ)()],T.prototype,"unit",void 0),(0,d.Cg)([(0,m.MZ)()],T.prototype,"identifier",void 0),(0,d.Cg)([(0,m.MZ)({attribute:"show-names",type:Boolean})],T.prototype,"showNames",void 0),(0,d.Cg)([(0,m.MZ)({attribute:"click-for-more-info",type:Boolean})],T.prototype,"clickForMoreInfo",void 0),(0,d.Cg)([(0,m.MZ)({attribute:!1})],T.prototype,"startTime",void 0),(0,d.Cg)([(0,m.MZ)({attribute:!1})],T.prototype,"endTime",void 0),(0,d.Cg)([(0,m.MZ)({attribute:!1,type:Number})],T.prototype,"paddingYAxis",void 0),(0,d.Cg)([(0,m.MZ)({attribute:!1,type:Number})],T.prototype,"chartIndex",void 0),(0,d.Cg)([(0,m.MZ)({attribute:"logarithmic-scale",type:Boolean})],T.prototype,"logarithmicScale",void 0),(0,d.Cg)([(0,m.MZ)({attribute:!1,type:Number})],T.prototype,"minYAxis",void 0),(0,d.Cg)([(0,m.MZ)({attribute:!1,type:Number})],T.prototype,"maxYAxis",void 0),(0,d.Cg)([(0,m.MZ)({attribute:"fit-y-data",type:Boolean})],T.prototype,"fitYData",void 0),(0,d.Cg)([(0,m.MZ)({type:String})],T.prototype,"height",void 0),(0,d.Cg)([(0,m.MZ)({attribute:"expand-legend",type:Boolean})],T.prototype,"expandLegend",void 0),(0,d.Cg)([(0,m.MZ)({attribute:"hide-reset-button",type:Boolean})],T.prototype,"hideResetButton",void 0),(0,d.Cg)([(0,m.wk)()],T.prototype,"_chartData",void 0),(0,d.Cg)([(0,m.wk)()],T.prototype,"_entityIds",void 0),(0,d.Cg)([(0,m.wk)()],T.prototype,"_chartOptions",void 0),(0,d.Cg)([(0,m.wk)()],T.prototype,"_yWidth",void 0),(0,d.Cg)([(0,m.wk)()],T.prototype,"_visualMap",void 0),T=(0,d.Cg)([(0,m.EM)("state-history-chart-line")],T),e()}catch(k){e(k)}})},13672:function(t,e,i){i.a(t,async function(t,e){try{var a,n,o=i(72153),r=i(44734),s=i(43080),h=i(69683),c=i(6454),l=(i(28706),i(50113),i(44114),i(18111),i(20116),i(7588),i(2892),i(69085),i(26099),i(27495),i(25440),i(79978),i(23500),i(40445)),d=i(96196),u=i(77845),m=i(95747),p=i(67084),y=i(15638),v=i(44439),g=i(72190),f=i(71578),_=i(79622),x=i(79468),b=i(3461),w=i(1087),A=t([m,v]);[m,v]=A.then?(await A)():A;var C=function(t){function e(){var t;(0,r.A)(this,e);for(var i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(t=(0,h.A)(this,e,[].concat(a))).data=[],t.narrow=!1,t.showNames=!0,t.clickForMoreInfo=!0,t.chunked=!1,t.paddingYAxis=0,t._chartData=[],t._yWidth=0,t._chartTime=new Date,t._renderItem=function(t,e){var i=e.value(0),a=e.coord([e.value(1),i]),n=e.coord([e.value(2),i]),o=t.coordSys,r=f.default.graphic.clipRectByRect({x:a[0],y:a[1]-10,width:n[0]-a[0],height:20},{x:o.x,y:o.y,width:o.width,height:o.height});if(!r)return null;var s={type:"rect",transition:"shape",shape:r,style:{fill:e.value(4)}},h=e.value(3).replaceAll("\n"," ");return(0,b.W)(h,12)<r.width-8?{type:"group",children:[s,{type:"text",style:Object.assign(Object.assign({},r),{},{x:r.x+4,text:h,fill:e.value(5),fontSize:12,lineHeight:r.height})}]}:s},t._renderTooltip=function(e){var i=Array.isArray(e)?e[0]:e,a=i.value,n=i.name,o=i.marker,r=i.seriesName,s=i.color,h=r?'<h4 style="text-align: center; margin: 0;">'.concat(r,"</h4>"):"",c=a[2]-a[1],l="".concat(t.hass.localize("ui.components.history_charts.duration"),": ").concat((0,p.A)(c));return[h,[((0,y.qC)(t.hass)?'<span style="direction: rtl;display:inline-block;margin-right:4px;margin-inline-end:4px;border-radius:10px;width:10px;height:10px;background-color:'.concat(s,';"></span>'):o)+n,(0,m.yg)(new Date(a[1]),t.hass.locale,t.hass.config),(0,m.yg)(new Date(a[2]),t.hass.locale,t.hass.config),l].join("<br>")].join("")},t}return(0,c.A)(e,t),(0,s.A)(e,[{key:"render",value:function(){return(0,d.qy)(a||(a=(0,o.A)([' <ha-chart-base .hass="','" .options="','" .height="','" .data="','" small-controls @chart-click="','" @chart-zoom="','" .hideResetButton="','"></ha-chart-base> '])),this.hass,this._chartOptions,"".concat(30*this.data.length+30,"px"),this._chartData,this._handleChartClick,this._handleDataZoom,this.hideResetButton)}},{key:"willUpdate",value:function(t){(t.has("startTime")||t.has("endTime")||t.has("data")||this._chartTime<new Date(this.endTime.getTime()-v.p))&&this._generateData(),(!this.hasUpdated||t.has("startTime")||t.has("endTime")||t.has("showNames")||t.has("paddingYAxis")||t.has("_yWidth"))&&this._createOptions()}},{key:"_createOptions",value:function(){var t=this,e=this.narrow,i=this.chunked||this.showNames,a=e?105:185,n=i?Math.max(this.paddingYAxis,this._yWidth):0,o=(0,y.qC)(this.hass);this._chartOptions={xAxis:{type:"time",min:this.startTime,max:this.endTime,axisTick:{show:!0},splitLine:{show:!1}},yAxis:{type:"category",inverse:!0,position:o?"right":"left",triggerEvent:!0,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:i,width:n,overflow:"truncate",margin:5,formatter:function(e){var i,n=null===(i=t._chartData.find(function(t){return t.id===e}))||void 0===i?void 0:i.name,o=n?Math.min((0,b.W)(n,12)+5,a):0;return o>t._yWidth&&(t._yWidth=o,(0,w.r)(t,"y-width-changed",{value:t._yWidth,chartIndex:t.chartIndex})),n},hideOverlap:!0}},grid:{top:10,bottom:30,left:o?1:n,right:o?n:1},tooltip:{appendTo:document.body,formatter:this._renderTooltip}}}},{key:"zoom",value:function(t,e){this.shadowRoot.querySelector("ha-chart-base").zoom(t,e,!0)}},{key:"_handleDataZoom",value:function(t){var e,i;(0,w.r)(this,"chart-zoom-with-index",{start:null!==(e=t.detail.start)&&void 0!==e?e:0,end:null!==(i=t.detail.end)&&void 0!==i?i:100,chartIndex:this.chartIndex})}},{key:"_generateData",value:function(){var t=this,e=getComputedStyle(this),i=this.data;i||(i=[]),this._chartTime=new Date;var a=this.startTime,n=this.endTime,o=[],r=this.names||{};i.forEach(function(i){var s,h=null,c=null,l=a,d=t.showNames?r[i.entity_id]||i.name||i.entity_id:"",u=[];if(i.data.forEach(function(a){var o=a.state;if(o||(o=null),!(new Date(a.last_changed)>n))if(null===h)h=o,c=a.state_localize,l=new Date(a.last_changed);else if(o!==h){s=new Date(a.last_changed);var r=(0,g.c)(h,e,t.hass.states[i.entity_id]);u.push({value:[i.entity_id,l,s,c,r,(0,_.EP)((0,x.xp)(r))>.5?"#000":"#fff"],itemStyle:{color:r}}),h=o,c=a.state_localize,l=s}}),null!==h){var m=(0,g.c)(h,e,t.hass.states[i.entity_id]);u.push({value:[i.entity_id,l,n,c,m,(0,_.EP)((0,x.xp)(m))>.5?"#000":"#fff"],itemStyle:{color:m}})}o.push({id:i.entity_id,data:u,name:d,dimensions:["id","start","end","name","color","textColor"],type:"custom",encode:{x:[1,2],y:0,itemName:3},renderItem:t._renderItem,progressive:0})}),this._chartData=o}},{key:"_handleChartClick",value:function(t){if("axisLabel"===t.detail.targetType){var e=this._chartData[t.detail.dataIndex];e&&(0,w.r)(this,"hass-more-info",{entityId:e.id})}}}])}(d.WF);C.styles=(0,d.AH)(n||(n=(0,o.A)(["ha-chart-base{--chart-max-height:none}"]))),(0,l.Cg)([(0,u.MZ)({attribute:!1})],C.prototype,"hass",void 0),(0,l.Cg)([(0,u.MZ)({attribute:!1})],C.prototype,"data",void 0),(0,l.Cg)([(0,u.MZ)({type:Boolean})],C.prototype,"narrow",void 0),(0,l.Cg)([(0,u.MZ)({attribute:!1})],C.prototype,"names",void 0),(0,l.Cg)([(0,u.MZ)()],C.prototype,"unit",void 0),(0,l.Cg)([(0,u.MZ)()],C.prototype,"identifier",void 0),(0,l.Cg)([(0,u.MZ)({attribute:"show-names",type:Boolean})],C.prototype,"showNames",void 0),(0,l.Cg)([(0,u.MZ)({attribute:"click-for-more-info",type:Boolean})],C.prototype,"clickForMoreInfo",void 0),(0,l.Cg)([(0,u.MZ)({type:Boolean})],C.prototype,"chunked",void 0),(0,l.Cg)([(0,u.MZ)({attribute:!1})],C.prototype,"startTime",void 0),(0,l.Cg)([(0,u.MZ)({attribute:!1})],C.prototype,"endTime",void 0),(0,l.Cg)([(0,u.MZ)({attribute:!1,type:Number})],C.prototype,"paddingYAxis",void 0),(0,l.Cg)([(0,u.MZ)({attribute:!1,type:Number})],C.prototype,"chartIndex",void 0),(0,l.Cg)([(0,u.MZ)({attribute:"hide-reset-button",type:Boolean})],C.prototype,"hideResetButton",void 0),(0,l.Cg)([(0,u.wk)()],C.prototype,"_chartData",void 0),(0,l.Cg)([(0,u.wk)()],C.prototype,"_chartOptions",void 0),(0,l.Cg)([(0,u.wk)()],C.prototype,"_yWidth",void 0),C=(0,l.Cg)([(0,u.EM)("state-history-chart-timeline")],C),e()}catch(M){e(M)}})},66737:function(t,e,i){i.a(t,async function(t,e){try{var a,n,o,r,s,h,c,l,d,u,m,p=i(7739),y=i(72153),v=i(44734),g=i(43080),f=i(69683),_=i(6454),x=(i(28706),i(74423),i(23792),i(62062),i(44114),i(72712),i(18111),i(7588),i(61701),i(18237),i(2892),i(26099),i(16034),i(23500),i(62953),i(40445)),b=i(96196),w=i(77845),A=i(36312),C=i(26218),M=i(85614),T=(i(27661),i(67094),i(23577)),k=i(13672),D=t([T,k]);[T,k]=D.then?(await D)():D;var z=function(t){function e(){var t;(0,v.A)(this,e);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=(0,f.A)(this,e,[].concat(r))).narrow=!1,t.virtualize=!1,t.upToNow=!1,t.showNames=!0,t.clickForMoreInfo=!0,t.isLoadingData=!1,t.logarithmicScale=!1,t.fitYData=!1,t.syncCharts=!1,t._maxYWidth=0,t._childYWidths=[],t._chartCount=0,t._hasZoomedCharts=!1,t._isSyncing=!1,t._renderHistoryItem=function(e,i){return e&&void 0!==i?Array.isArray(e)?(0,b.qy)(o||(o=(0,y.A)(['<div class="entry-container timeline"> <state-history-chart-timeline .hass="','" .data="','" .startTime="','" .endTime="','" .showNames="','" .names="','" .narrow="','" .chunked="','" .paddingYAxis="','" .chartIndex="','" .clickForMoreInfo="','" @y-width-changed="','" @chart-zoom-with-index="','" ?hide-reset-button="','"></state-history-chart-timeline> </div> '])),t.hass,e,t._computedStartTime,t._computedEndTime,t.showNames,t.names,t.narrow,t.virtualize,t._maxYWidth,i,t.clickForMoreInfo,t._yWidthChanged,t._handleTimelineSync,t.syncCharts):(0,b.qy)(n||(n=(0,y.A)(['<div class="entry-container line"> <state-history-chart-line .hass="','" .unit="','" .data="','" .identifier="','" .showNames="','" .startTime="','" .endTime="','" .paddingYAxis="','" .names="','" .chartIndex="','" .clickForMoreInfo="','" .logarithmicScale="','" .minYAxis="','" .maxYAxis="','" .fitYData="','" @y-width-changed="','" @chart-zoom-with-index="','" .height="','" .expandLegend="','" ?hide-reset-button="','"></state-history-chart-line> </div> '])),t.hass,e.unit,e.data,e.identifier,t.showNames,t._computedStartTime,t._computedEndTime,t._maxYWidth,t.names,i,t.clickForMoreInfo,t.logarithmicScale,t.minYAxis,t.maxYAxis,t.fitYData,t._yWidthChanged,t._handleTimelineSync,t.virtualize?void 0:t.height,t.expandLegend,t.syncCharts):(0,b.qy)(a||(a=(0,y.A)([""])))},t}return(0,_.A)(e,t),(0,g.A)(e,[{key:"render",value:function(){var t=this;if(!(0,A.x)(this.hass,"history"))return(0,b.qy)(r||(r=(0,y.A)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.history_charts.history_disabled"));if(this.isLoadingData&&!this.historyData)return(0,b.qy)(s||(s=(0,y.A)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.history_charts.loading_history"));if(this._isHistoryEmpty())return(0,b.qy)(h||(h=(0,y.A)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.history_charts.no_history_found"));var e,i,a=this.historyData.timeline.length?(this.virtualize?(e=this.historyData.timeline,i=10,e.reduce(function(t,e,a){var n=Math.floor(a/i);return t[n]||(t[n]=[]),t[n].push(e),t},[])):[this.historyData.timeline]).concat(this.historyData.line):this.historyData.line;return this._chartCount=a.length,(0,b.qy)(c||(c=(0,y.A)([" "," "," "])),this.virtualize?(0,b.qy)(l||(l=(0,y.A)(['<div class="container ha-scrollbar" @scroll="','"> <lit-virtualizer scroller class="ha-scrollbar" .items="','" .renderItem="','"> </lit-virtualizer> </div>'])),this._saveScrollPos,a,this._renderHistoryItem):(0,b.qy)(d||(d=(0,y.A)(["",""])),a.map(function(e,i){return t._renderHistoryItem(e,i)})),this.syncCharts&&this._hasZoomedCharts?(0,b.qy)(u||(u=(0,y.A)(['<ha-fab slot="fab" class="reset-button" .label="','" @click="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> </ha-fab>'])),this.hass.localize("ui.components.history_charts.zoom_reset"),this._handleGlobalZoomReset,"M12,4C14.1,4 16.1,4.8 17.6,6.3C20.7,9.4 20.7,14.5 17.6,17.6C15.8,19.5 13.3,20.2 10.9,19.9L11.4,17.9C13.1,18.1 14.9,17.5 16.2,16.2C18.5,13.9 18.5,10.1 16.2,7.7C15.1,6.6 13.5,6 12,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15 3.3,11 5.1,7.9L6.6,9.4C5.5,11.6 5.9,14.4 7.8,16.2C8.3,16.7 8.9,17.1 9.6,17.4L9,19.4C8,19 7.1,18.4 6.3,17.6Z"):b.s6)}},{key:"shouldUpdate",value:function(t){return(1!==t.size||!t.has("hass"))&&(1!==t.size||!t.has("_maxYWidth")||t.get("_maxYWidth")!==this._maxYWidth)}},{key:"willUpdate",value:function(t){if(this.hasUpdated||(0,M.i)(),(0,p.A)(t.keys()).some(function(t){return!["_maxYWidth","_childYWidths","_chartCount"].includes(t)})){var e=new Date;if(this._computedEndTime=this.upToNow||!this.endTime||this.endTime>e?e:this.endTime,this.startTime)this._computedStartTime=this.startTime;else if(this.hoursToShow)this._computedStartTime=new Date((new Date).getTime()-3600*this.hoursToShow*1e3);else{var i,a,n,o,r=(null!==(i=null===(a=this.historyData)||void 0===a?void 0:a.timeline)&&void 0!==i?i:[]).reduce(function(t,e){return Math.min(t,new Date(e.data[0].last_changed).getTime())},(new Date).getTime());r=(null!==(n=null===(o=this.historyData)||void 0===o?void 0:o.line)&&void 0!==n?n:[]).reduce(function(t,e){return Math.min(t,e.data.reduce(function(t,e){return Math.min(t,new Date(e.states[0].last_changed).getTime())},t))},r),this._computedStartTime=new Date(r)}}}},{key:"updated",value:function(t){t.has("_chartCount")&&this._chartCount<this._childYWidths.length&&(this._childYWidths.length=this._chartCount,this._maxYWidth=Math.max.apply(Math,(0,p.A)(Object.values(this._childYWidths)).concat([0])))}},{key:"_yWidthChanged",value:function(t){this._childYWidths[t.detail.chartIndex]=t.detail.value,this._maxYWidth=Math.max.apply(Math,(0,p.A)(Object.values(this._childYWidths)).concat([0]))}},{key:"_handleTimelineSync",value:function(t){if(this.syncCharts&&!this._isSyncing){var e=t.detail,i=e.start,a=e.end,n=e.chartIndex;this._hasZoomedCharts=0!==i||100!==a,this._syncZoomToAllCharts(i,a,n)}}},{key:"_syncZoomToAllCharts",value:function(t,e,i){var a=this;this._isSyncing=!0,requestAnimationFrame(function(){a.renderRoot.querySelectorAll("state-history-chart-line, state-history-chart-timeline").forEach(function(a,n){n!==i&&"zoom"in a&&a.zoom(t,e)}),a._isSyncing=!1})}},{key:"_handleGlobalZoomReset",value:function(){var t=this;this._hasZoomedCharts=!1,this._isSyncing=!0,requestAnimationFrame(function(){t.renderRoot.querySelectorAll("state-history-chart-line, state-history-chart-timeline").forEach(function(t){var e,i=null===(e=t.renderRoot)||void 0===e?void 0:e.querySelector("ha-chart-base");i&&i.chart&&i.zoom(0,100)}),t._isSyncing=!1})}},{key:"_isHistoryEmpty",value:function(){var t=!this.historyData||!this.historyData.timeline||!this.historyData.line||0===this.historyData.timeline.length&&0===this.historyData.line.length;return!this.isLoadingData&&t}},{key:"_saveScrollPos",value:function(t){this._savedScrollPos=t.target.scrollTop}}])}(b.WF);z.styles=(0,b.AH)(m||(m=(0,y.A)([":host{display:flex;flex-direction:column;min-height:60px}:host([virtualize]){height:100%}.info{text-align:center;line-height:60px;color:var(--secondary-text-color)}.container{max-height:var(--history-max-height)}.entry-container{width:100%}.entry-container.line{flex:1;padding-top:8px;overflow:hidden}.entry-container:hover{z-index:1}:host([virtualize]) .entry-container{padding-left:1px;padding-right:1px;padding-inline-start:1px;padding-inline-end:1px}.entry-container.timeline:first-child{margin-top:var(--timeline-top-margin)}.entry-container:not(:first-child){border-top:2px solid var(--divider-color);margin-top:16px}.container,lit-virtualizer{height:100%;width:100%}lit-virtualizer{contain:size layout!important}state-history-chart-line,state-history-chart-timeline{width:100%}.reset-button{position:fixed;bottom:calc(24px + var(--safe-area-inset-bottom));right:calc(24px + var(--safe-area-inset-bottom));z-index:1}"]))),(0,x.Cg)([(0,w.MZ)({attribute:!1})],z.prototype,"hass",void 0),(0,x.Cg)([(0,w.MZ)({attribute:!1})],z.prototype,"historyData",void 0),(0,x.Cg)([(0,w.MZ)({type:Boolean})],z.prototype,"narrow",void 0),(0,x.Cg)([(0,w.MZ)({attribute:!1})],z.prototype,"names",void 0),(0,x.Cg)([(0,w.MZ)({type:Boolean,reflect:!0})],z.prototype,"virtualize",void 0),(0,x.Cg)([(0,w.MZ)({attribute:!1})],z.prototype,"endTime",void 0),(0,x.Cg)([(0,w.MZ)({attribute:!1})],z.prototype,"startTime",void 0),(0,x.Cg)([(0,w.MZ)({type:Boolean,attribute:"up-to-now"})],z.prototype,"upToNow",void 0),(0,x.Cg)([(0,w.MZ)({attribute:!1,type:Number})],z.prototype,"hoursToShow",void 0),(0,x.Cg)([(0,w.MZ)({attribute:"show-names",type:Boolean})],z.prototype,"showNames",void 0),(0,x.Cg)([(0,w.MZ)({attribute:"click-for-more-info",type:Boolean})],z.prototype,"clickForMoreInfo",void 0),(0,x.Cg)([(0,w.MZ)({attribute:"is-loading-data",type:Boolean})],z.prototype,"isLoadingData",void 0),(0,x.Cg)([(0,w.MZ)({attribute:"logarithmic-scale",type:Boolean})],z.prototype,"logarithmicScale",void 0),(0,x.Cg)([(0,w.MZ)({attribute:!1,type:Number})],z.prototype,"minYAxis",void 0),(0,x.Cg)([(0,w.MZ)({attribute:!1,type:Number})],z.prototype,"maxYAxis",void 0),(0,x.Cg)([(0,w.MZ)({attribute:"fit-y-data",type:Boolean})],z.prototype,"fitYData",void 0),(0,x.Cg)([(0,w.MZ)({type:String})],z.prototype,"height",void 0),(0,x.Cg)([(0,w.MZ)({attribute:"expand-legend",type:Boolean})],z.prototype,"expandLegend",void 0),(0,x.Cg)([(0,w.MZ)({attribute:"sync-charts",type:Boolean})],z.prototype,"syncCharts",void 0),(0,x.Cg)([(0,w.wk)()],z.prototype,"_maxYWidth",void 0),(0,x.Cg)([(0,w.wk)()],z.prototype,"_childYWidths",void 0),(0,x.Cg)([(0,w.wk)()],z.prototype,"_chartCount",void 0),(0,x.Cg)([(0,w.wk)()],z.prototype,"_hasZoomedCharts",void 0),(0,x.Cg)([(0,C.a)(".container")],z.prototype,"_savedScrollPos",void 0),(0,x.Cg)([(0,w.Ls)({passive:!0})],z.prototype,"_saveScrollPos",null),z=(0,x.Cg)([(0,w.EM)("state-history-charts")],z),e()}catch(Z){e(Z)}})},34296:function(t,e,i){var a,n,o,r,s=i(72153),h=i(44734),c=i(43080),l=i(69683),d=i(6454),u=i(25460),m=(i(28706),i(69085),i(40445)),p=i(96229),y=i(26069),v=i(91735),g=i(42034),f=i(96196),_=i(77845),x=function(t){function e(){var t;(0,h.A)(this,e);for(var i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(t=(0,l.A)(this,e,[].concat(a))).filled=!1,t.active=!1,t}return(0,d.A)(e,t),(0,c.A)(e,[{key:"renderOutline",value:function(){return this.filled?(0,f.qy)(a||(a=(0,s.A)(['<span class="filled"></span>']))):(0,u.A)(e,"renderOutline",this,3)([])}},{key:"getContainerClasses",value:function(){return Object.assign(Object.assign({},(0,u.A)(e,"getContainerClasses",this,3)([])),{},{active:this.active})}},{key:"renderPrimaryContent",value:function(){return(0,f.qy)(n||(n=(0,s.A)([' <span class="leading icon" aria-hidden="true"> ',' </span> <span class="label">','</span> <span class="touch"></span> <span class="trailing leading icon" aria-hidden="true"> '," </span> "])),this.renderLeadingIcon(),this.label,this.renderTrailingIcon())}},{key:"renderTrailingIcon",value:function(){return(0,f.qy)(o||(o=(0,s.A)(['<slot name="trailing-icon"></slot>'])))}}])}(p.k);x.styles=[v.R,g.R,y.R,(0,f.AH)(r||(r=(0,s.A)([":host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-assist-chip-container-shape:var(\n          --ha-assist-chip-container-shape,\n          16px\n        );--md-assist-chip-outline-color:var(--outline-color);--md-assist-chip-label-text-weight:400}.filled{display:flex;pointer-events:none;border-radius:inherit;inset:0;position:absolute;background-color:var(--ha-assist-chip-filled-container-color)}::slotted([slot=icon]),::slotted([slot=trailing-icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px);font-size:var(--_label-text-size)!important}.trailing.icon ::slotted(*),.trailing.icon svg{margin-inline-end:unset;margin-inline-start:var(--_icon-label-space)}::before{background:var(--ha-assist-chip-container-color,transparent);opacity:var(--ha-assist-chip-container-opacity, 1)}:where(.active)::before{background:var(--ha-assist-chip-active-container-color);opacity:var(--ha-assist-chip-active-container-opacity)}.label{font-family:var(--ha-font-family-body)}"])))],(0,m.Cg)([(0,_.MZ)({type:Boolean,reflect:!0})],x.prototype,"filled",void 0),(0,m.Cg)([(0,_.MZ)({type:Boolean})],x.prototype,"active",void 0),x=(0,m.Cg)([(0,_.EM)("ha-assist-chip")],x)},27661:function(t,e,i){var a,n,o,r=i(72153),s=i(44734),h=i(43080),c=i(69683),l=i(25460),d=i(6454),u=i(40445),m=i(51978),p=i(94743),y=i(77845),v=i(96196),g=i(63091),f=function(t){function e(){return(0,s.A)(this,e),(0,c.A)(this,e,arguments)}return(0,d.A)(e,t),(0,h.A)(e,[{key:"firstUpdated",value:function(t){(0,l.A)(e,"firstUpdated",this,3)([t]),this.style.setProperty("--mdc-theme-secondary","var(--primary-color)")}}])}(m.n);f.styles=[p.R,(0,v.AH)(a||(a=(0,r.A)([":host{--mdc-typography-button-text-transform:none;--mdc-typography-button-font-size:var(--ha-font-size-l);--mdc-typography-button-font-family:var(--ha-font-family-body);--mdc-typography-button-font-weight:var(--ha-font-weight-medium)}:host .mdc-fab--extended{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab.mdc-fab--extended .ripple{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab--extended .mdc-fab__icon{margin-inline-start:-8px;margin-inline-end:12px;direction:var(--direction)}:disabled{--mdc-theme-secondary:var(--disabled-text-color);pointer-events:none}"]))),"rtl"===g.G.document.dir?(0,v.AH)(n||(n=(0,r.A)([":host .mdc-fab--extended .mdc-fab__icon{direction:rtl}"]))):(0,v.AH)(o||(o=(0,r.A)([""])))],f=(0,u.Cg)([(0,y.EM)("ha-fab")],f)},71578:function(t,e,i){i.r(e),i.d(e,{LinearGradient:function(){return _.A}});var a=i(88648),n=i(59126),o=i(25636),r=i(2403),s=i(3650),h=i(30137),c=i(69913),l=i(43401),d=i(87370),u=i(57610),m=i(44390),p=i(11069),y=i(88132),v=i(6036),g=i(88298),f=i(15490),_=i(67665);a.Y([o.a,r.a,s.a,h.a,c.a,l.a,d.a,u.a,m.a,p.a,v._,g.i,f.a,y.a]),e.default=n},85614:function(t,e,i){i.d(e,{i:function(){return o}});var a=i(61397),n=i(50264),o=(i(23792),i(26099),i(3362),i(47764),i(62953),function(){var t=(0,n.A)((0,a.A)().m(function t(){return(0,a.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.all([i.e("38085"),i.e("64391")]).then(i.bind(i,40772));case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}())},3461:function(t,e,i){i.d(e,{W:function(){return n}});var a;i(28706);function n(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Roboto, Noto, sans-serif";a||(a=document.createElement("canvas"));var n=a.getContext("2d");if(!n)return 0;n.font="".concat(e,"px ").concat(i);var o=n.measureText(t);return Math.ceil(Math.max(o.actualBoundingBoxRight+o.actualBoundingBoxLeft,o.width))}}}]);
//# sourceMappingURL=62042.1cc39b33130ca585.js.map