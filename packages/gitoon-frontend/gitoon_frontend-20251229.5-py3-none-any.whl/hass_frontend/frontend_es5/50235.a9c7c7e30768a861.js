"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["50235"],{58548:function(t,e,i){i.d(e,{A:function(){return r}});i(16280),i(34782),i(27495),i(99449),i(25440);var a=function(t){var e=parseFloat(t);if(isNaN(e))throw new Error("".concat(t," is not a number"));return e};function r(t){if(!t)return null;try{if(t.endsWith("%"))return{w:100,h:a(t.slice(0,-1))};var e=t.replace(":","x").split("x");return 0===e.length?null:1===e.length?{w:a(e[0]),h:1}:{w:a(e[0]),h:a(e[1])}}catch(i){}return null}},39168:function(t,e,i){var a,r,n,o=i(72153),s=i(44734),c=i(43080),l=i(69683),u=i(6454),h=(i(28706),i(40445)),d=i(96196),v=i(77845),f=i(6415),p=i(58548),g=function(t){function e(){var t;(0,s.A)(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=(0,l.A)(this,e,[].concat(a)))._ratio=null,t}return(0,u.A)(e,t),(0,c.A)(e,[{key:"willUpdate",value:function(t){(t.has("aspect_ratio")||null===this._ratio)&&(this._ratio=this.aspectRatio?(0,p.A)(this.aspectRatio):null,(null===this._ratio||this._ratio.w<=0||this._ratio.h<=0)&&(this._ratio=(0,p.A)("16:9")))}},{key:"render",value:function(){return this.aspectRatio?(0,d.qy)(r||(r=(0,o.A)([' <div class="ratio" style="','"> <slot></slot> </div> '])),(0,f.W)({paddingBottom:"".concat((100*this._ratio.h/this._ratio.w).toFixed(2),"%")})):(0,d.qy)(a||(a=(0,o.A)(["<slot></slot>"])))}}])}(d.WF);g.styles=(0,d.AH)(n||(n=(0,o.A)([".ratio ::slotted(*){position:absolute;top:0;left:0;width:100%;height:100%}"]))),(0,h.Cg)([(0,v.MZ)({type:String,attribute:"aspect-ratio"})],g.prototype,"aspectRatio",void 0),g=(0,h.Cg)([(0,v.EM)("ha-aspect-ratio")],g)},17366:function(t,e,i){i.a(t,async function(t,a){try{i.r(e),i.d(e,{DEFAULT_ASPECT_RATIO:function(){return Z},DEVICE_CLASSES:function(){return T},HuiAreaCard:function(){return J},SUM_DEVICE_CLASSES:function(){return U}});var r,n,o,s,c,l,u,h,d,v,f,p,g,_=i(61397),y=i(50264),m=i(72153),b=i(44734),A=i(43080),w=i(69683),x=i(6454),k=(i(16280),i(28706),i(2008),i(50113),i(74423),i(23792),i(62062),i(44114),i(72712),i(34782),i(26910),i(18111),i(22489),i(20116),i(61701),i(18237),i(36033),i(2892),i(69085),i(79432),i(26099),i(16034),i(3362),i(21699),i(47764),i(62953),i(40445)),C=i(96196),S=i(77845),E=i(94333),M=i(32288),q=i(6415),j=i(22786),z=i(78870),B=i(46190),H=i(65522),L=i(4423),O=i(91926),V=i(20058),D=i(8549),F=i(58548),I=(i(39168),i(76776),i(48374),i(28624),i(59174)),N=(i(88945),i(54276),i(67094),i(22109),i(80933),i(32248),i(22675)),P=i(32359),R=i(19037),W=t([I,P,V]);[I,P,V]=W.then?(await W)():W;var Z="16:9",T={sensor:["temperature","humidity"],binary_sensor:["motion","moisture"]},U=["power","apparent_power","reactive_power","energy","reactive_energy","current","gas","monetary","volume","water"],J=function(t){function e(){var t;(0,b.A)(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=(0,w.A)(this,e,[].concat(a)))._featureContext={},t._ratio=null,t._groupEntitiesByDeviceClass=function(e){return e.reduce(function(e,i){var a=t.hass.states[i],r=a.attributes.device_class;return e.has(r)||e.set(r,[]),e.get(r).push(a.entity_id),e},new Map)},t._groupedSensorEntityIds=(0,j.A)(function(e,i,a,r){var n=(0,L.r)(t.hass,{area:i,entity_category:"none",domain:"sensor",device_class:a}),o=Object.keys(e).filter(function(t){return n(t)&&!(null!=r&&r.includes(t))});return t._groupEntitiesByDeviceClass(o)}),t._groupedBinarySensorEntityIds=(0,j.A)(function(e,i,a,r){var n=(0,L.r)(t.hass,{area:i,entity_category:"none",domain:"binary_sensor",device_class:a}),o=Object.keys(e).filter(function(t){return n(t)&&!(null!=r&&r.includes(t))});return t._groupEntitiesByDeviceClass(o)}),t._getCameraEntity=(0,j.A)(function(e,i){var a=(0,L.r)(t.hass,{area:i,entity_category:"none",domain:"camera"}),r=Object.keys(e).filter(a);return r.length>0?r[0]:void 0}),t._featurePosition=(0,j.A)(function(t){return t.vertical?"bottom":t.features_position||"bottom"}),t._displayedFeatures=(0,j.A)(function(e){var i=e.features||[];return"inline"===t._featurePosition(e)?i.slice(0,1):i}),t}return(0,x.A)(e,t),(0,A.A)(e,[{key:"setConfig",value:function(t){if(!t.area)throw new Error("Specify an area");var e=t.display_type||(t.show_camera?"camera":"picture"),i="compact"===e&&t.vertical;this._config=Object.assign(Object.assign({},t),{},{vertical:i,display_type:e}),this._featureContext={area_id:t.area,exclude_entities:t.exclude_entities}}},{key:"getCardSize",value:function(){var t,e,i,a=this._config&&this._featurePosition(this._config),r=(null===(t=this._config)||void 0===t?void 0:t.display_type)||"picture",n=(null===(e=this._config)||void 0===e||null===(e=e.features)||void 0===e?void 0:e.length)||0;return 1+("compact"===r?null!==(i=this._config)&&void 0!==i&&i.vertical?1:0:2)+("inline"===a?0:n)}},{key:"getGridOptions",value:function(){var t,e,i,a=6,r=6,n=1,o=this._config?this._featurePosition(this._config):"bottom",s=(null===(t=this._config)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.length)||0;s&&("inline"===o?(r=12,a=12):n+=s);var c=(null===(e=this._config)||void 0===e?void 0:e.display_type)||"picture";return null!==(i=this._config)&&void 0!==i&&i.vertical&&(n++,r=3),"compact"!==c&&(n+="inline"===o&&s>0?3:2),{columns:a,rows:n,min_columns:r,min_rows:n}}},{key:"_hasCardAction",get:function(){var t;return null===(t=this._config)||void 0===t?void 0:t.navigation_path}},{key:"_handleAction",value:function(){var t;null!==(t=this._config)&&void 0!==t&&t.navigation_path&&(0,O.o)(this._config.navigation_path)}},{key:"_computeActiveAlertStates",value:function(){var t,e,i,a=this,r=null===(t=this._config)||void 0===t?void 0:t.area,n=r?this.hass.areas[r]:void 0,o=null===(e=this._config)||void 0===e?void 0:e.alert_classes,s=null===(i=this._config)||void 0===i?void 0:i.exclude_entities;if(!n||!o)return[];var c=this._groupedBinarySensorEntityIds(this.hass.entities,n.area_id,o,s);return o.map(function(t){var e=c.get(t)||[];return e?e.map(function(t){return a.hass.states[t]}).filter(function(t){return(null==t?void 0:t.state)===B.Or}):[]}).filter(function(t){return t.length>0}).map(function(t){return t[0]})}},{key:"_renderAlertSensorBadge",value:function(){var t=this._computeActiveAlertStates();if(0===t.length)return C.s6;var e=t[0];return(0,C.qy)(r||(r=(0,m.A)([' <ha-tile-badge class="alert-badge"> <ha-state-icon .hass="','" .stateObj="','"></ha-state-icon> </ha-tile-badge> '])),this.hass,e)}},{key:"_renderAlertSensors",value:function(){var t=this,e=this._computeActiveAlertStates();return 0===e.length?C.s6:(0,C.qy)(n||(n=(0,m.A)([' <div class="alerts"> '," </div> "])),e.map(function(e){return(0,C.qy)(o||(o=(0,m.A)([' <div class="alert"> <ha-state-icon .hass="','" .stateObj="','"></ha-state-icon> </div> '])),t.hass,e)}))}},{key:"_computeSensorsDisplay",value:function(){var t,e,i,a=this,r=null===(t=this._config)||void 0===t?void 0:t.area,n=r?this.hass.areas[r]:void 0,o=null===(e=this._config)||void 0===e?void 0:e.sensor_classes,s=null===(i=this._config)||void 0===i?void 0:i.exclude_entities;if(n&&o){var c=this._groupedSensorEntityIds(this.hass.entities,n.area_id,o,s);return o.map(function(t){var e;if("temperature"===t&&n.temperature_entity_id){var i=a.hass.states[n.temperature_entity_id];return!i||(0,N.g0)(i.state)?"":a.hass.formatEntityState(i)}if("humidity"===t&&n.humidity_entity_id){var r=a.hass.states[n.humidity_entity_id];return!r||(0,N.g0)(r.state)?"":a.hass.formatEntityState(r)}var o=c.get(t);if(o){var s=o.map(function(t){return a.hass.states[t]}).filter(Boolean);if(0!==s.length){if(1===s.length){var l=s[0];return(0,N.g0)(l.state)?"":a.hass.formatEntityState(l)}var u=null===(e=s.find(function(t){return t.attributes.unit_of_measurement}))||void 0===e?void 0:e.attributes.unit_of_measurement,h=s.filter(function(t){return t.attributes.unit_of_measurement===u&&(0,V.x)(t)&&!isNaN(Number(t.state))});if(0!==h.length){var d=U.includes(t)?a._computeSumState(h):a._computeMedianState(h),v=(0,V.ZV)(d,a.hass.locale,{maximumFractionDigits:1}),f=u?"".concat((0,D.A)(u,a.hass.locale)).concat(u):"";return"".concat(v).concat(f)}}}}).filter(Boolean).join(" Â· ")}}},{key:"_computeSumState",value:function(t){return t.reduce(function(t,e){return t+Number(e.state)},0)}},{key:"_computeMedianState",value:function(t){var e=t.map(function(t){return Number(t.state)}).sort(function(t,e){return t-e});if(e.length%2==0){var i=e.length/2;return(e[i]+e[i-1])/2}return e[Math.floor(e.length/2)]}},{key:"willUpdate",value:function(t){var e,i;(t.has("_config")||null===this._ratio)&&(this._ratio=null!==(e=this._config)&&void 0!==e&&e.aspect_ratio?(0,F.A)(null===(i=this._config)||void 0===i?void 0:i.aspect_ratio):null,(null===this._ratio||this._ratio.w<=0||this._ratio.h<=0)&&(this._ratio=(0,F.A)(Z)))}},{key:"render",value:function(){var t;if(!this._config||!this.hass)return C.s6;var e=null===(t=this._config)||void 0===t?void 0:t.area,i=e?this.hass.areas[e]:void 0;if(!i)return(0,C.qy)(s||(s=(0,m.A)([' <hui-warning .hass="','"> '," </hui-warning> "])),this.hass,this.hass.localize("ui.card.area.area_not_found"));var a={vertical:Boolean(this._config.vertical)},r=i.icon,n=this._config.name||(0,H.A)(i),o=this._computeSensorsDisplay(),g=this._featurePosition(this._config),_=this._displayedFeatures(this._config),y="inline"===g?"horizontal":"",b=this._config.display_type||"picture",A="camera"===b?this._getCameraEntity(this.hass.entities,i.area_id):void 0,w="grid"===this.layout||"panel"===this.layout,x={"--tile-color":this._config.color?(0,z.M)(this._config.color):void 0};return(0,C.qy)(c||(c=(0,m.A)([' <ha-card style="','"> <div class="background" @action="','" .actionHandler="','" role="','" tabindex="','" aria-labelledby="info"> <ha-ripple .disabled="','"></ha-ripple> </div> ',' <div class="container ','"> <div class="content ','"> <ha-tile-icon> '," ",' </ha-tile-icon> <ha-tile-info id="info" .primary="','" .secondary="','"></ha-tile-info> </div> '," </div> </ha-card> "])),(0,q.W)(x),this._handleAction,(0,R.T)(),(0,M.J)(this._hasCardAction?"button":void 0),(0,M.J)(this._hasCardAction?"0":void 0),!this._hasCardAction,"compact"===b?C.s6:(0,C.qy)(l||(l=(0,m.A)([' <div class="header"> <div class="picture"> '," </div> "," </div> "])),"picture"!==b&&"camera"!==b||!A&&!i.picture?(0,C.qy)(h||(h=(0,m.A)([' <ha-aspect-ratio .aspectRatio="','"> <div class="icon-container"> '," </div> </ha-aspect-ratio> "])),w?void 0:this._config.aspect_ratio||Z,i.icon?(0,C.qy)(d||(d=(0,m.A)(['<ha-icon .icon="','"></ha-icon>'])),i.icon):C.s6):(0,C.qy)(u||(u=(0,m.A)([' <hui-image .cameraImage="','" .cameraView="','" .image="','" .hass="','" fit-mode="cover" .aspectRatio="','"></hui-image> '])),A,this._config.camera_view,i.picture?i.picture:void 0,this.hass,w?void 0:this._config.aspect_ratio||Z),this._renderAlertSensors()),y,(0,E.H)(a),"compact"===b?this._renderAlertSensorBadge():C.s6,r?(0,C.qy)(v||(v=(0,m.A)(['<ha-icon slot="icon" .icon="','"></ha-icon>'])),r):(0,C.qy)(f||(f=(0,m.A)([' <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> '])),"M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z"),n,o,_.length>0?(0,C.qy)(p||(p=(0,m.A)([' <hui-card-features .hass="','" .context="','" .color="','" .features="','" .position="','"></hui-card-features> '])),this.hass,this._featureContext,this._config.color,_,g):C.s6)}}],[{key:"getConfigElement",value:(g=(0,y.A)((0,_.A)().m(function t(){return(0,_.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.all([i.e("64442"),i.e("88862")]).then(i.bind(i,25453));case 1:return t.a(2,document.createElement("hui-area-card-editor"))}},t)})),function(){return g.apply(this,arguments)})},{key:"getStubConfig",value:(a=(0,y.A)((0,_.A)().m(function t(e){var i,a;return(0,_.A)().w(function(t){for(;;)if(0===t.n)return a=Object.values(e.areas),t.a(2,{type:"area",area:(null===(i=a[0])||void 0===i?void 0:i.area_id)||""})},t)})),function(t){return a.apply(this,arguments)})}]);var a,g}(C.WF);J.styles=(0,C.AH)(g||(g=(0,m.A)([':host{--tile-color:var(--state-icon-color);-webkit-tap-highlight-color:transparent}ha-card:has(.background:focus-visible){--shadow-default:var(--ha-card-box-shadow, 0 0 0 0 transparent);--shadow-focus:0 0 0 1px var(--tile-color);border-color:var(--tile-color);box-shadow:var(--shadow-default),var(--shadow-focus)}ha-card{--ha-ripple-color:var(--tile-color);--ha-ripple-hover-opacity:0.04;--ha-ripple-pressed-opacity:0.12;height:100%;transition:box-shadow 180ms ease-in-out,border-color 180ms ease-in-out;display:flex;flex-direction:column;justify-content:space-between}[role=button]{cursor:pointer;pointer-events:auto}[role=button]:focus{outline:0}.background{position:absolute;top:0;left:0;bottom:0;right:0;border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));margin:calc(-1 * var(--ha-card-border-width,1px));overflow:hidden}.header{flex:1;overflow:hidden;border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));border-end-end-radius:0;border-end-start-radius:0;pointer-events:none}.picture{height:100%;width:100%;background-size:cover;background-position:center;position:relative}.picture hui-image{height:100%}.picture .icon-container{height:100%;width:100%;display:flex;align-items:center;justify-content:center;--mdc-icon-size:var(--ha-space-12);color:var(--tile-color)}.picture .icon-container::before{position:absolute;content:"";width:100%;height:100%;background-color:var(--tile-color);opacity:.12}.container{margin:calc(-1 * var(--ha-card-border-width,1px));display:flex;flex-direction:column;flex:1}.header+.container{height:auto;flex:none}.container.horizontal{flex-direction:row}.content{position:relative;display:flex;flex-direction:row;align-items:center;padding:10px;flex:1;min-width:0;box-sizing:border-box;pointer-events:none;gap:10px}.vertical{flex-direction:column;text-align:center;justify-content:center}.vertical ha-tile-info{width:100%;flex:none}ha-tile-icon{--tile-icon-color:var(--tile-color);position:relative;padding:6px;margin:-6px}ha-tile-badge{position:absolute;top:3px;right:3px;inset-inline-end:3px;inset-inline-start:initial}ha-tile-info{position:relative;min-width:0;transition:background-color 180ms ease-in-out;box-sizing:border-box}hui-card-features{--feature-color:var(--tile-color);padding:0 var(--ha-space-3) var(--ha-space-3) var(--ha-space-3)}.container.horizontal hui-card-features{width:calc(50% - var(--column-gap,0px)/ 2 - var(--ha-space-3));flex:none;--feature-height:var(--ha-space-9);padding:0 var(--ha-space-3);padding-inline-start:0}.alert-badge{--tile-badge-background-color:var(--orange-color)}.alerts{position:absolute;top:0;left:0;display:flex;flex-direction:row;gap:var(--ha-space-2);padding:var(--ha-space-2);pointer-events:none;z-index:1}.alert{background-color:var(--orange-color);border-radius:var(--ha-border-radius-lg);width:var(--ha-space-6);height:var(--ha-space-6);padding:2px;box-sizing:border-box;--mdc-icon-size:var(--ha-space-4);display:flex;align-items:center;justify-content:center;color:#fff}']))),(0,k.Cg)([(0,S.MZ)({attribute:!1})],J.prototype,"hass",void 0),(0,k.Cg)([(0,S.MZ)({attribute:!1})],J.prototype,"layout",void 0),(0,k.Cg)([(0,S.wk)()],J.prototype,"_config",void 0),(0,k.Cg)([(0,S.wk)()],J.prototype,"_featureContext",void 0),J=(0,k.Cg)([(0,S.EM)("hui-area-card")],J),a()}catch(G){a(G)}})}}]);
//# sourceMappingURL=50235.a9c7c7e30768a861.js.map