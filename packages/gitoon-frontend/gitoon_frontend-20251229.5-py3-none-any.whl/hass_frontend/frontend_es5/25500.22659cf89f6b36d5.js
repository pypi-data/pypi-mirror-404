"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["25500"],{18427:function(t,e,a){a.d(e,{g:function(){return i}});a(42762);var r=a(79468),n=a(39274);function i(t,e,a,i,o,s){var c=t.getPropertyValue(o+"-"+s).trim(),h=c.length>0?c:t.getPropertyValue(o).trim(),u=(0,r.RQ)(h);return 0===c.length&&s&&(u=(0,r.v2)((0,r.BE)(e?(0,n.T)((0,r.Nc)((0,r.xp)(u)),s):(0,n.d)((0,r.Nc)((0,r.xp)(u)),s)))),i?u+=a?"32":"7F":a&&(u+="7F"),u}},40345:function(t,e,a){a.a(t,async function(t,e){try{var r,n,i=a(72153),o=a(44734),s=a(43080),c=a(69683),h=a(6454),u=a(40445),l=a(96196),d=a(77845),p=a(34127),g=t([p]);p=(g.then?(await g)():g)[0];var f=function(t){function e(){return(0,o.A)(this,e),(0,c.A)(this,e,arguments)}return(0,h.A)(e,t),(0,s.A)(e,[{key:"render",value:function(){var t="energy-graph-chip-".concat(Date.now());return(0,l.qy)(r||(r=(0,i.A)([' <div class="chip" id="','"> <slot></slot> </div> <ha-tooltip for="','" placement="top">',"</ha-tooltip> "])),t,t,this.tooltip)}}])}(l.WF);f.styles=(0,l.AH)(n||(n=(0,i.A)([".chip{font-size:var(--ha-font-size-m);font-weight:var(--ha-font-weight-medium);padding:var(--ha-space-1) var(--ha-space-2);border-radius:var(--ha-border-radius-md);border:1px solid var(--divider-color)}"]))),(0,u.Cg)([(0,d.MZ)({type:String})],f.prototype,"tooltip",void 0),f=(0,u.Cg)([(0,d.EM)("hui-energy-graph-chip")],f),e()}catch(_){e(_)}})},62743:function(t,e,a){a.a(t,async function(t,r){try{a.r(e),a.d(e,{HuiEnergyWaterGraphCard:function(){return V}});var n,i,o,s,c,h=a(31432),u=a(61397),l=a(7739),d=a(50264),p=a(72153),g=a(44734),f=a(43080),_=a(69683),y=a(6454),v=(a(28706),a(2008),a(44114),a(72712),a(18111),a(22489),a(7588),a(18237),a(26099),a(23500),a(40445)),m=a(81859),w=a(40600),k=a(73684),A=a(96196),b=a(77845),C=a(94333),S=a(22786),x=a(18427),D=a(44439),E=(a(76776),a(38114)),M=a(23528),z=a(54706),q=a(784),T=a(97372),H=a(20058),R=a(40345),F=a(34127),P=t([D,R,F,E,H,T,M]);[D,R,F,E,H,T,M]=P.then?(await P)():P;var V=function(t){function e(){var t;(0,g.A)(this,e);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=(0,_.A)(this,e,[].concat(r)))._chartData=[],t._start=(0,m.R)(),t._end=(0,w.o)(),t.hassSubscribeRequiredHostProps=["_config"],t._formatTotal=function(e){return t.hass.localize("ui.panel.lovelace.cards.energy.energy_water_graph.total_consumed",{num:(0,H.ZV)(e,t.hass.locale),unit:t._unit})},t._createOptions=(0,S.A)(function(e,a,r,n,i,o,s){return(0,T.od)(e,a,r,n,i,o,s,t._formatTotal)}),t}return(0,y.A)(e,t),(0,f.A)(e,[{key:"hassSubscribe",value:function(){var t,e=this;return[(0,E.tb)(this.hass,{key:null===(t=this._config)||void 0===t?void 0:t.collection_key}).subscribe(function(t){return e._getStatistics(t)})]}},{key:"getCardSize",value:function(){return 3}},{key:"setConfig",value:function(t){this._config=t}},{key:"shouldUpdate",value:function(t){return(0,q.xP)(this,t)||t.size>1||!t.has("hass")}},{key:"render",value:function(){return this.hass&&this._config?(0,A.qy)(n||(n=(0,p.A)([" <ha-card> ",' <div class="content ','"> <ha-chart-base .hass="','" .data="','" .options="','" chart-type="bar"></ha-chart-base> '," </div> </ha-card> "])),this._config.title?(0,A.qy)(i||(i=(0,p.A)([' <div class="card-header"> <span>',"</span> "," </div>"])),this._config.title?this._config.title:A.s6,this._total?(0,A.qy)(o||(o=(0,p.A)(['<hui-energy-graph-chip .tooltip="','"> '," "," </hui-energy-graph-chip>"])),this._formatTotal(this._total),(0,H.ZV)(this._total,this.hass.locale),this._unit):A.s6):A.s6,(0,C.H)({"has-header":!!this._config.title}),this.hass,this._chartData,this._createOptions(this._start,this._end,this.hass.locale,this.hass.config,this._unit,this._compareStart,this._compareEnd),this._chartData.length?"":(0,A.qy)(s||(s=(0,p.A)(['<div class="no-data"> '," </div>"])),(0,k.c)(this._start)?this.hass.localize("ui.panel.lovelace.cards.energy.no_data"):this.hass.localize("ui.panel.lovelace.cards.energy.no_data_period"))):A.s6}},{key:"_getStatistics",value:(a=(0,d.A)((0,u.A)().m(function t(e){var a,r,n,i,o,s;return(0,u.A)().w(function(t){for(;;)switch(t.n){case 0:this._start=e.start,this._end=e.end||(0,w.o)(),this._compareStart=e.startCompare,this._compareEnd=e.endCompare,a=e.prefs.energy_sources.filter(function(t){return"water"===t.type}),this._unit=e.waterUnit,r=[],n=getComputedStyle(this),e.statsCompare?r.push.apply(r,(0,l.A)(this._processDataSet(e.statsCompare,e.statsMetadata,a,n,!0))):(s=null!==(i=null===(o=a[0])||void 0===o?void 0:o.stat_energy_from)&&void 0!==i?i:"placeholder",r.push({id:"compare-"+s,type:"bar",stack:"water",data:[]})),r.push.apply(r,(0,l.A)(this._processDataSet(e.stats,e.statsMetadata,a,n))),(0,T.RR)(r),this._chartData=r,this._total=this._processTotal(e.stats,a);case 1:return t.a(2)}},t,this)})),function(t){return a.apply(this,arguments)})},{key:"_processTotal",value:function(t,e){return e.reduce(function(e,a){return e+(a.stat_energy_from in t?t[a.stat_energy_from].reduce(function(t,e){return t+(e.change||0)},0):0)},0)}},{key:"_processDataSet",value:function(t,e,a,r){var n=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[],s=(0,T.ok)(this._start,this._compareStart);return a.forEach(function(a,c){var u=null,l=[];if(a.stat_energy_from in t){var d,p=t[a.stat_energy_from],g=(0,h.A)(p);try{for(g.s();!(d=g.n()).done;){var f=d.value;if(null!==f.change&&void 0!==f.change&&0!==f.change&&u!==f.start){var _=[f.start,f.change];i&&(_[2]=_[0],_[0]=s(new Date(f.start))),l.push(_),u=f.start}}}catch(y){g.e(y)}finally{g.f()}}o.push({type:"bar",cursor:"default",id:i?"compare-"+a.stat_energy_from:a.stat_energy_from,name:(0,M.$O)(n.hass,a.stat_energy_from,e[a.stat_energy_from]),barMaxWidth:50,itemStyle:{borderColor:(0,x.g)(r,n.hass.themes.darkMode,!1,i,"--energy-water-color",c)},color:(0,x.g)(r,n.hass.themes.darkMode,!0,i,"--energy-water-color",c),data:l,stack:i?"compare":"water"})}),o}}]);var a}((0,z.E)(A.WF));V.styles=(0,A.AH)(c||(c=(0,p.A)(["ha-card{height:100%}.card-header{display:flex;justify-content:space-between;align-items:center;padding-bottom:0}.content{padding:16px}.has-header{padding-top:0}.no-data{position:absolute;height:100%;top:0;left:0;right:0;display:flex;justify-content:center;align-items:center;padding:20%;margin-left:32px;margin-inline-start:32px;margin-inline-end:initial;box-sizing:border-box}"]))),(0,v.Cg)([(0,b.MZ)({attribute:!1})],V.prototype,"hass",void 0),(0,v.Cg)([(0,b.wk)()],V.prototype,"_config",void 0),(0,v.Cg)([(0,b.wk)()],V.prototype,"_chartData",void 0),(0,v.Cg)([(0,b.wk)()],V.prototype,"_start",void 0),(0,v.Cg)([(0,b.wk)()],V.prototype,"_end",void 0),(0,v.Cg)([(0,b.wk)()],V.prototype,"_compareStart",void 0),(0,v.Cg)([(0,b.wk)()],V.prototype,"_compareEnd",void 0),(0,v.Cg)([(0,b.wk)()],V.prototype,"_unit",void 0),(0,v.Cg)([(0,b.wk)()],V.prototype,"_total",void 0),V=(0,v.Cg)([(0,b.EM)("hui-energy-water-graph-card")],V),r()}catch(W){r(W)}})},43382:function(t,e,a){a.d(e,{A:function(){return n}});var r=a(51039);function n(t){return(0,r.w)(t,Date.now())}},83309:function(t,e,a){a.d(e,{r:function(){return o}});var r=a(78261),n=a(74816),i=a(35932);function o(t,e,a){var o=(0,n.x)(null==a?void 0:a.in,t,e),s=(0,r.A)(o,2),c=s[0],h=s[1];return+(0,i.o)(c)===+(0,i.o)(h)}},73684:function(t,e,a){a.d(e,{c:function(){return o}});var r=a(51039),n=a(43382),i=a(83309);function o(t,e){return(0,i.r)((0,r.w)((null==e?void 0:e.in)||t,t),(0,n.A)((null==e?void 0:e.in)||t))}}}]);
//# sourceMappingURL=25500.22659cf89f6b36d5.js.map