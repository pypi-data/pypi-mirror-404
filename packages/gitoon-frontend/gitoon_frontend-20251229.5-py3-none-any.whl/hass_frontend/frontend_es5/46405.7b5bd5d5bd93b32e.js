"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["46405"],{72828:function(e,t,r){r.a(e,async function(e,i){try{r.r(t),r.d(t,{FlowPreviewGeneric:function(){return k}});var s,n,o=r(61397),a=r(50264),u=r(72153),h=r(44734),l=r(43080),p=r(69683),c=r(6454),v=r(25460),d=(r(28706),r(69085),r(40445)),_=r(96196),w=r(77845),f=r(51840),y=r(7986),b=r(9899),g=r(1087),A=(r(38962),e([y]));y=(A.then?(await A)():A)[0];var k=function(e){function t(){var e;(0,h.A)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=(0,p.A)(this,t,[].concat(i)))._setPreview=function(t){if(t.error)return e._error=t.error,void(e._preview=void 0);var r=(new Date).toISOString();e._preview=Object.assign({entity_id:"".concat(e.stepId,".___flow_preview___"),last_changed:r,last_updated:r,context:{id:"",parent_id:null,user_id:null}},t)},e._debouncedSubscribePreview=(0,b.s)(function(){e._subscribePreview()},250),e}return(0,c.A)(t,e),(0,l.A)(t,[{key:"disconnectedCallback",value:function(){(0,v.A)(t,"disconnectedCallback",this,3)([]),this._unsub&&(this._unsub.then(function(e){return e()}),this._unsub=void 0)}},{key:"willUpdate",value:function(e){e.has("stepData")&&this._debouncedSubscribePreview()}},{key:"render",value:function(){return this._error?(0,_.qy)(s||(s=(0,u.A)(['<ha-alert alert-type="error">',"</ha-alert>"])),this._error):(0,_.qy)(n||(n=(0,u.A)(['<entity-preview-row .hass="','" .stateObj="','"></entity-preview-row>'])),this.hass,this._preview)}},{key:"_subscribePreview",value:(r=(0,a.A)((0,o.A)().m(function e(){var t;return(0,o.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this._unsub){e.n=2;break}return e.n=1,this._unsub;case 1:(0,e.v)(),this._unsub=void 0;case 2:if("config_flow"===this.flowType||"options_flow"===this.flowType||"config_subentries_flow"===this.flowType){e.n=3;break}return e.a(2);case 3:return this._error=void 0,e.p=4,this._unsub=(0,f.Q)(this.hass,this.domain,this.flowId,this.flowType,this.stepData,this._setPreview),e.n=5,this._unsub;case 5:(0,g.r)(this,"set-flow-errors",{errors:{}}),e.n=7;break;case 6:e.p=6,"string"==typeof(t=e.v).message?this._error=t.message:(this._error=void 0,(0,g.r)(this,"set-flow-errors",t.message)),this._unsub=void 0,this._preview=void 0;case 7:return e.a(2)}},e,this,[[4,6]])})),function(){return r.apply(this,arguments)})}]);var r}(_.WF);(0,d.Cg)([(0,w.MZ)({attribute:!1})],k.prototype,"hass",void 0),(0,d.Cg)([(0,w.MZ)({attribute:!1})],k.prototype,"flowType",void 0),(0,d.Cg)([(0,w.MZ)()],k.prototype,"domain",void 0),(0,d.Cg)([(0,w.MZ)({attribute:!1})],k.prototype,"stepId",void 0),(0,d.Cg)([(0,w.MZ)({attribute:!1})],k.prototype,"flowId",void 0),(0,d.Cg)([(0,w.MZ)({attribute:!1})],k.prototype,"stepData",void 0),(0,d.Cg)([(0,w.wk)()],k.prototype,"_preview",void 0),(0,d.Cg)([(0,w.wk)()],k.prototype,"_error",void 0),k=(0,d.Cg)([(0,w.EM)("flow-preview-generic")],k),i()}catch(C){i(C)}})},25380:function(e,t,r){r.a(e,async function(e,i){try{r.r(t);var s,n,o,a,u=r(72153),h=r(44734),l=r(43080),p=r(69683),c=r(6454),v=r(40445),d=r(96196),_=r(77845),w=r(72828),f=(r(92639),r(65829)),y=e([f,w]);[f,w]=y.then?(await y)():y;var b=function(e){function t(){return(0,h.A)(this,t),(0,p.A)(this,t,arguments)}return(0,c.A)(t,e),(0,l.A)(t,[{key:"render",value:function(){if(!this._preview)return d.s6;if(this._error)return(0,d.qy)(s||(s=(0,u.A)(['<ha-alert alert-type="error">',"</ha-alert>"])),this._error);var e=this._preview.attributes.still_url,t=this._preview.attributes.stream_url;return(0,d.qy)(n||(n=(0,u.A)([" "," ",""])),e?(0,d.qy)(o||(o=(0,u.A)(['<p>Still image:</p> <p> <img src="','" alt="Still preview"> </p>'])),e):"",t?(0,d.qy)(a||(a=(0,u.A)(['<p>Stream:</p> <ha-spinner class="render-spinner" id="hls-load-spinner" size="large"></ha-spinner> <ha-hls-player autoplay playsinline .hass="','" .url="','" @load="','"></ha-hls-player>'])),this.hass,t,this._videoLoaded):"")}},{key:"_videoLoaded",value:function(){var e;null===(e=this.shadowRoot.getElementById("hls-load-spinner"))||void 0===e||e.remove()}}])}(w.FlowPreviewGeneric);b=(0,v.Cg)([(0,_.EM)("flow-preview-generic_camera")],b),i()}catch(g){i(g)}})}}]);
//# sourceMappingURL=46405.7b5bd5d5bd93b32e.js.map