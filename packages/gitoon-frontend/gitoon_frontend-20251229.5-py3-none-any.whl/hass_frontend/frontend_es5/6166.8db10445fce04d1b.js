"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["6166"],{57094:function(n,t,e){e.d(t,{g:function(){return r},x:function(){return o}});var i=e(7739);e(44114),e(72712),e(18111),e(18237),e(26099);function r(n){return n.reduce(function(n,t){return"conditions"in t&&t.conditions&&n.push.apply(n,(0,i.A)(r(t.conditions))),"screen"===t.condition&&t.media_query&&n.push(t.media_query),n},[])}function o(n){return n.reduce(function(n,t){return"conditions"in t&&t.conditions&&n.push.apply(n,(0,i.A)(o(t.conditions))),"time"===t.condition&&n.push(t),n},[])}},43574:function(n,t,e){e.a(n,async function(n,i){try{e.d(t,{b:function(){return f},m:function(){return d}});e(18111),e(7588),e(26099),e(23500);var r=e(71769),o=e(14487),u=e(57094),a=e(25075),s=n([a,o]);[a,o]=s.then?(await s)():s;var c=2147483647;function f(n,t,e,i){var a=(0,u.g)(n);if(0!==a.length){var s=1===n.length&&"screen"===n[0].condition&&!!n[0].media_query;a.forEach(function(u){var a=(0,r.m)(u,function(e){if(s)i(e);else{var r=(0,o.XH)(n,t);i(r)}});e(a)})}}function d(n,t,e,i){var r=(0,u.x)(n);0!==r.length&&r.forEach(function(r){var u,s=function(){var e=(0,a.S)(t,r);if(void 0!==e){var l=Math.min(e,c);u=setTimeout(function(){if(e<=c){var r=(0,o.XH)(n,t);i(r)}s()},l)}};e(function(){void 0!==u&&clearTimeout(u)}),s()})}i()}catch(l){i(l)}})},25075:function(n,t,e){e.a(n,async function(n,i){try{e.d(t,{S:function(){return h}});e(44114),e(72712),e(26099);var r=e(74487),o=e(31886),u=e(92913),a=e(35932),s=e(78733),c=e(83339),l=e(46927),f=e(82447),d=n([r,o,f]);function h(n,t){var e=t.after,i=t.before,r=t.weekdays,d=n.locale.time_zone===l.Wj.server?n.config.time_zone:Intl.DateTimeFormat().resolvedOptions().timeZone,v=new o.BB(new Date,d),h=[];if(e){var y=(0,f.MV)(e,d);y<=v&&(y=(0,u.f)(y,1)),h.push(y)}if(i){var p=(0,f.MV)(i,d);p<=v&&(p=(0,u.f)(p,1)),h.push(p)}if(r&&r.length>0&&r.length<7){var b=(0,u.f)(v,1),g=(0,a.o)(b);h.push(g)}if(0!==h.length){var _=h.reduce(function(n,t){return t<n?t:n}),m=(0,s.z)(_,1);return(0,c.b)(m,v)}}[r,o,f]=d.then?(await d)():d,i()}catch(v){i(v)}})},82447:function(n,t,e){e.a(n,async function(n,i){try{e.d(t,{MV:function(){return d},Uo:function(){return v},fn:function(){return y}});var r=e(74487),o=(e(74423),e(18111),e(81148),e(26099),e(58940),e(27495),e(90906),e(21699),e(42762),e(31886)),u=e(7562),a=e(72659),s=e(20687),c=e(46927),l=e(96029),f=n([r,o]);function y(n){if(!n||""===n.trim())return!1;var t=n.split(":");if(t.length<2||t.length>3)return!1;if(!t.every(function(n){return/^\d+$/.test(n)}))return!1;var e=parseInt(t[0],10),i=parseInt(t[1],10),r=3===t.length?parseInt(t[2],10):0;return!(isNaN(e)||isNaN(i)||isNaN(r))&&(e>=0&&e<=23&&i>=0&&i<=59&&r>=0&&r<=59)}[r,o]=f.then?(await f)():f;var d=function(n,t){var e=n.split(":"),i=parseInt(e[0],10),r=parseInt(e[1],10),u=3===e.length?parseInt(e[2],10):0,a=new o.BB(new Date,t),s=new o.BB(a.getFullYear(),a.getMonth(),a.getDate(),i,r,u,0,t);return new Date(s.getTime())},v=function(n,t){var e=t.after,i=t.before,r=t.weekdays,f=n.locale.time_zone===c.Wj.server?n.config.time_zone:Intl.DateTimeFormat().resolvedOptions().timeZone,v=new o.BB(new Date,f);if(r&&r.length>0){var h=l.sj[v.getDay()];if(!r.includes(h))return!1}if(!e&&!i)return!0;var y=e?d(e,f):void 0,p=i?d(i,f):void 0;return y&&p?(0,u.Y)(p,y)?!(0,u.Y)(v,y)||!(0,a.d)(v,p):(0,s.v)(v,{start:y,end:p}):y?!(0,u.Y)(v,y):!p||!(0,a.d)(v,p)};i()}catch(h){i(h)}})},85547:function(n,t,e){e.d(t,{Fj:function(){return r},Gu:function(){return o},H2:function(){return a},xA:function(){return c},xs:function(){return u}});e(50113),e(18111),e(20116),e(69085),e(26099),e(16034);var i=e(69093),r=function(n){return n.callWS({type:"person/list"})},o=function(n,t){return n.callWS(Object.assign({type:"person/create"},t))},u=function(n,t,e){return n.callWS(Object.assign({type:"person/update",person_id:t},e))},a=function(n,t){return n.callWS({type:"person/delete",person_id:t})},s={},c=function(n){var t;if(null!==(t=n.user)&&void 0!==t&&t.id){var e=s[n.user.id];if(e){var r=n.states[e];if(r&&r.attributes.user_id===n.user.id)return r}var o=Object.values(n.states).find(function(t){return t.attributes.user_id===n.user.id&&"person"===(0,i.t)(t)});return o&&(s[n.user.id]=o.entity_id),o}}},91263:function(n,t,e){e.a(n,async function(n,i){try{e.d(t,{M:function(){return f}});var r=e(44734),o=e(43080),u=e(69683),a=e(6454),s=e(25460),c=(e(28706),e(44114),e(18111),e(7588),e(26099),e(23500),e(43574)),l=n([c]);c=(l.then?(await l)():l)[0];var f=function(n){var t=function(n){function t(){var n;(0,r.A)(this,t);for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=(0,u.A)(this,t,[].concat(i))).__listeners=[],n}return(0,a.A)(t,n),(0,o.A)(t,[{key:"connectedCallback",value:function(){(0,s.A)(t,"connectedCallback",this,3)([]),this.setupConditionalListeners()}},{key:"disconnectedCallback",value:function(){(0,s.A)(t,"disconnectedCallback",this,3)([]),this.clearConditionalListeners()}},{key:"clearConditionalListeners",value:function(){this.__listeners.forEach(function(n){return n()}),this.__listeners=[]}},{key:"addConditionalListener",value:function(n){this.__listeners.push(n)}},{key:"setupConditionalListeners",value:function(n){var t=this,e=this.config||this._config,i=n||(null==e?void 0:e.visibility);if(i&&this.hass){var r=function(n){t._updateVisibility?t._updateVisibility(n):t._updateElement&&e&&t._updateElement(e)};(0,c.b)(i,this.hass,function(n){return t.addConditionalListener(n)},r),(0,c.m)(i,this.hass,function(n){return t.addConditionalListener(n)},r)}}}])}(n);return t};i()}catch(d){i(d)}})},14487:function(n,t,e){e.a(n,async function(n,i){try{e.d(t,{Wx:function(){return k},XH:function(){return C},db:function(){return O},lB:function(){return I}});var r=e(31432),o=e(7739),u=(e(28706),e(2008),e(74423),e(23792),e(62062),e(44114),e(18111),e(81148),e(22489),e(61701),e(13579),e(2892),e(69085),e(26099),e(31415),e(17642),e(58004),e(33853),e(45876),e(32475),e(15024),e(31698),e(21699),e(47764),e(62953),e(44537)),a=e(82447),s=e(96029),c=e(78649),l=e(22675),f=e(85547),d=n([a]);function h(n,t){var e;if((0,c.n)(t)&&n.states[t])return null===(e=n.states[t])||void 0===e?void 0:e.state}function y(n,t){var e,i=n.entity&&t.states[n.entity]?t.states[n.entity].state:l.HV,r=null!==(e=n.state)&&void 0!==e?e:n.state_not;if(Array.isArray(r)){var a=r.map(function(n){return h(t,n)}).filter(function(n){return void 0!==n});r=[].concat((0,o.A)(r),(0,o.A)(a))}else if("string"==typeof r){var s=h(t,r);r=[r],s&&r.push(s)}return null!=n.state?(0,u.e)(r).includes(i):!(0,u.e)(r).includes(i)}function p(n,t){var e,i,r,o=null===(e=n.entity?t.states[n.entity]:void 0)||void 0===e?void 0:e.state,u=n.above,a=n.below;"string"==typeof u&&(u=null!==(i=h(t,u))&&void 0!==i?i:u);"string"==typeof a&&(a=null!==(r=h(t,a))&&void 0!==r?r:a);var s=Number(o),c=Number(u),l=Number(a);return!isNaN(s)&&((null==n.above||isNaN(c)||c<s)&&(null==n.below||isNaN(l)||l>s))}function b(n,t){return(0,a.Uo)(t,n)}function g(n,t){var e,i=(0,f.xA)(t);return!!i&&(null===(e=n.locations)||void 0===e?void 0:e.includes(i.state))}function _(n,t){var e;return!(!n.users||null===(e=t.user)||void 0===e||!e.id)&&n.users.includes(t.user.id)}function m(n,t){return!n.conditions||C(n.conditions,t)}function w(n,t){return!n.conditions||!C(n.conditions,t)}function A(n,t){return!n.conditions||n.conditions.some(function(n){return C([n],t)})}function C(n,t){return n.every(function(n){if("condition"in n)switch(n.condition){case"time":return b(n,t);case"screen":return!!(e=n).media_query&&matchMedia(e.media_query).matches;case"user":return _(n,t);case"location":return g(n,t);case"numeric_state":return p(n,t);case"and":return m(n,t);case"not":return w(n,t);case"or":return A(n,t);default:return y(n,t)}var e;return y(n,t)})}function k(n){var t,e=new Set,i=(0,r.A)(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;if("numeric_state"===a.condition)a.entity&&e.add(a.entity),"string"==typeof a.above&&(0,c.n)(a.above)&&e.add(a.above),"string"==typeof a.below&&(0,c.n)(a.below)&&e.add(a.below);else if("state"===a.condition){var s,l;a.entity&&e.add(a.entity),[].concat((0,o.A)(null!==(s=(0,u.e)(a.state))&&void 0!==s?s:[]),(0,o.A)(null!==(l=(0,u.e)(a.state_not))&&void 0!==l?l:[])).forEach(function(n){n&&(0,c.n)(n)&&e.add(n)})}else if("conditions"in a&&a.conditions)return new Set([].concat((0,o.A)(e),(0,o.A)(k(a.conditions))))}}catch(f){i.e(f)}finally{i.f()}return e}function N(n){return null!=n.entity&&(null!=n.state||null!=n.state_not)}function E(n){var t=null!=n.after&&""!==n.after,e=null!=n.before&&""!==n.before,i=t||e,r=null!=n.weekdays&&n.weekdays.length>0,o=!r||n.weekdays.every(function(n){return s.ZV.includes(n)}),u=(!t||(0,a.fn)(n.after))&&(!e||(0,a.fn)(n.before)),c=!t||!e||n.after!==n.before;return(i||r)&&o&&u&&c}function V(n){return null!=n.users}function M(n){return null!=n.locations}function j(n){return null!=n.conditions}function L(n){return null!=n.conditions}function B(n){return null!=n.conditions}function D(n){return null!=n.entity&&(null!=n.above||null!=n.below)}function O(n){return n.every(function(n){if("condition"in n)switch(n.condition){case"screen":return null!=n.media_query;case"time":return E(n);case"user":return V(n);case"location":return M(n);case"numeric_state":return D(n);case"and":return j(n);case"not":return L(n);case"or":return B(n);default:return N(n)}return N(n)})}function I(n,t){return"conditions"in n&&n.conditions?Object.assign(Object.assign({},n),{},{conditions:n.conditions.map(function(n){return I(n,t)})}):"state"===n.condition||"numeric_state"===n.condition?Object.assign({entity:t},n):n}a=(d.then?(await d)():d)[0],i()}catch(v){i(v)}})},37693:function(n,t,e){e.a(n,async function(n,i){try{e.d(t,{E:function(){return y}});var r=e(44734),o=e(43080),u=e(69683),a=e(6454),s=e(25460),c=(e(49255),e(16280),e(28706),e(2008),e(18111),e(22489),e(26099),e(40445)),l=e(96196),f=e(77845),d=e(91263),v=e(14487),h=n([d,v]);[d,v]=h.then?(await h)():h;var y=function(n){function t(){var n;(0,r.A)(this,t);for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=(0,u.A)(this,t,[].concat(i))).preview=!1,n}return(0,a.A)(t,n),(0,o.A)(t,[{key:"createRenderRoot",value:function(){return this}},{key:"validateConfig",value:function(n){if(!n.conditions)throw new Error("No conditions configured");if(!Array.isArray(n.conditions))throw new Error("Conditions need to be an array");if(!(0,v.db)(n.conditions))throw new Error("Conditions are invalid");this.lastChild&&this.removeChild(this.lastChild),this._config=n}},{key:"disconnectedCallback",value:function(){(0,s.A)(t,"disconnectedCallback",this,3)([])}},{key:"connectedCallback",value:function(){(0,s.A)(t,"connectedCallback",this,3)([]),this._updateVisibility()}},{key:"setupConditionalListeners",value:function(){if(this._config&&this.hass){var n=this._config.conditions.filter(function(n){return"condition"in n});(0,s.A)(t,"setupConditionalListeners",this,3)([n])}}},{key:"update",value:function(n){(0,s.A)(t,"update",this,3)([n]),(n.has("_element")||n.has("_config")||n.has("hass")||n.has("preview"))&&(this.clearConditionalListeners(),this.setupConditionalListeners(),this._updateVisibility())}},{key:"_updateVisibility",value:function(n){if(this._element&&this.hass&&this._config){this._element.preview=this.preview;var t=null!=n?n:(0,v.XH)(this._config.conditions,this.hass);this.setVisibility(t)}}},{key:"setVisibility",value:function(n){if(this._element&&this.hass){var t=this.preview||n;this.hidden!==!t&&(this.toggleAttribute("hidden",!t),this.style.setProperty("display",t?"":"none")),t?(this._element.hass=this.hass,this._element.parentElement||this.appendChild(this._element)):this._element.parentElement&&this.removeChild(this._element)}}}])}((0,d.M)(l.mN));(0,c.Cg)([(0,f.MZ)({attribute:!1})],y.prototype,"hass",void 0),(0,c.Cg)([(0,f.MZ)({type:Boolean})],y.prototype,"preview",void 0),(0,c.Cg)([(0,f.wk)()],y.prototype,"_config",void 0),y=(0,c.Cg)([(0,f.EM)("hui-conditional-base")],y),i()}catch(p){i(p)}})},80725:function(n,t,e){e.a(n,async function(n,i){try{e.r(t);var r=e(44734),o=e(43080),u=e(69683),a=e(25460),s=e(6454),c=(e(16280),e(69085),e(40445)),l=e(77845),f=e(37693),d=e(94225),v=e(1087),h=n([f,d]);[f,d]=h.then?(await h)():h;var y=function(n){function t(){return(0,r.A)(this,t),(0,u.A)(this,t,arguments)}return(0,s.A)(t,n),(0,o.A)(t,[{key:"setConfig",value:function(n){if(this.validateConfig(n),!n.row)throw new Error("No row configured");this._element=(0,d.T)(n.state_color?Object.assign({state_color:!0},n.row):n.row)}},{key:"setVisibility",value:function(n){var e=this.preview||n,i=this.hidden;(0,a.A)(t,"setVisibility",this,3)([n]),i!==this.hidden&&(0,v.r)(this,"row-visibility-changed",{row:this,value:e})}}])}(f.E);y=(0,c.Cg)([(0,l.EM)("hui-conditional-row")],y),i()}catch(p){i(p)}})},92913:function(n,t,e){e.d(t,{f:function(){return o}});var i=e(51039),r=e(83504);function o(n,t,e){var o=(0,r.a)(n,null==e?void 0:e.in);return isNaN(t)?(0,i.w)((null==e?void 0:e.in)||n,NaN):t?(o.setDate(o.getDate()+t),o):o}},78733:function(n,t,e){e.d(t,{z:function(){return o}});var i=e(9160),r=e(83504);function o(n,t,e){var o=(0,r.a)(n,null==e?void 0:e.in);return o.setTime(o.getTime()+t*i.Cg),o}},83339:function(n,t,e){e.d(t,{b:function(){return r}});var i=e(83504);function r(n,t){return+(0,i.a)(n)-+(0,i.a)(t)}},72659:function(n,t,e){e.d(t,{d:function(){return r}});var i=e(83504);function r(n,t){return+(0,i.a)(n)>+(0,i.a)(t)}},7562:function(n,t,e){e.d(t,{Y:function(){return r}});var i=e(83504);function r(n,t){return+(0,i.a)(n)<+(0,i.a)(t)}},20687:function(n,t,e){e.d(t,{v:function(){return o}});var i=e(78261),r=(e(26910),e(83504));function o(n,t,e){var o=+(0,r.a)(n,null==e?void 0:e.in),u=[+(0,r.a)(t.start,null==e?void 0:e.in),+(0,r.a)(t.end,null==e?void 0:e.in)].sort(function(n,t){return n-t}),a=(0,i.A)(u,2),s=a[0],c=a[1];return o>=s&&o<=c}}}]);
//# sourceMappingURL=6166.8db10445fce04d1b.js.map