"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["19409"],{72190:function(t,e,i){i.d(e,{c:function(){return g}});i(25276),i(23792),i(36033),i(26099),i(47764),i(62953);var n=i(90433),r=i(79468),o=i(39274),a=i(71727),s=i(69093),c=i(15090),l=i(27120),d=i(22675),u=i(86030),h={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};var v=0,_=new Map;function g(t,e,i){return function(t,e,i){var n;if(!i||t===d.Hh)return(0,u.a)("--history-unavailable-color",e);if(t===d.HV)return(0,u.a)("--history-unknown-color",e);var s=(0,l.mg)(i,t);if(s){var c=(0,u.a)(s,e);if(c){var v=(0,a.m)(i.entity_id),_=null===(n=h[v])||void 0===n?void 0:n[t];return _?(0,r.zm)((0,o.T)((0,r.Nc)((0,r.xp)(c)),_)):c}}}(t,e,i)||function(t,e,i){if(i){var r=(0,s.t)(i),o=(c.v[r]||"sensor"===r&&"enum"===i.attributes.device_class&&i.attributes.options||[]).indexOf(t);if(-1!==o)return(0,n.fI)(o,e)}}(t,e,i)||function(t,e){if(_.has(t))return _.get(t);var i=(0,n.fI)(v,e);return v++,_.set(t,i),i}(t,e)}},63625:function(t,e,i){i.d(e,{gq:function(){return a},E4:function(){return r},Ci:function(){return s},d1:function(){return o},AB:function(){return c}});i(16280),i(50113),i(94490),i(18111),i(20116),i(2892),i(79432),i(26099);var n=i(88249),r=function(t,e,i,n){return t.callWS({type:"trace/get",domain:e,item_id:i,run_id:n})},o=function(t,e,i){return t.callWS({type:"trace/list",domain:e,item_id:i})},a=function(t,e,i){return t.callWS({type:"trace/contexts",domain:e,item_id:i})},s=function(t,e){for(var i=e.split("/").reverse(),r=t;i.length;){var o=i.pop(),a=Number(o);if(isNaN(a)){var s=r[o];if(!s&&"sequence"===o)continue;s||"trigger"!==o||(s=r.triggers),s||"condition"!==o||(s=r.conditions),s||"action"!==o||(s=r.actions),r="trigger"===o?(0,n.aI)(s):s}else if(Array.isArray(r))r=r[a];else if(0!==a)throw new Error("If config is not an array, can only return index 0")}return r},c=function(t){return"trigger"===t||(e="trigger/",t.substring(0,e.length)===e);var e}},11184:function(t,e,i){i.a(t,async function(t,e){try{var n,r,o,a,s,c,l,d,u,h,v,_,g,y,m,p,f,x,b=i(72153),k=i(44734),w=i(43080),C=i(69683),z=i(6454),A=(i(28706),i(74423),i(25276),i(23792),i(62062),i(44114),i(54554),i(18111),i(61701),i(26099),i(27495),i(99449),i(21699),i(25440),i(62953),i(40445)),I=i(96196),M=i(77845),q=i(94333),E=i(6415),S=i(36312),N=i(72487),T=i(30162),P=i(26218),W=i(1087),Z=i(71727),B=i(91926),L=i(72190),D=i(74281),U=(i(43661),i(36158)),H=i(86531),O=i(14503),$=i(85614),j=i(44144),F=i(95350),G=t([D,U,N,T,H]);[D,U,N,T,H]=G.then?(await G)():G;var R=["script","automation"],V=function(t){function e(){var t;(0,k.A)(this,e);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return(t=(0,C.A)(this,e,[].concat(c))).userIdToName={},t.traceContexts={},t.entries=[],t.narrow=!1,t.virtualize=!1,t.showIndicator=!1,t.noIcon=!1,t.noName=!1,t.relativeTime=!1,t._renderLogbookItem=function(e,i){var c;if(!e||void 0===i)return I.s6;var l=t.entries[i-1],d=[],u=e.entity_id?t.hass.states[e.entity_id]:void 0,h=u?(0,H.dG)(u,e.state):void 0,v=e.entity_id?(0,Z.m)(e.entity_id):e.domain,_=h||e.icon||e.state||!v||!(0,S.x)(t.hass,v)?void 0:(0,j.MR)({domain:v,type:"icon",useFallback:!0,darkOptimized:null===(c=t.hass.themes)||void 0===c?void 0:c.darkMode}),g=R.includes(e.domain)&&e.context_id&&e.context_id in t.traceContexts?t.traceContexts[e.context_id]:void 0,y=void 0!==g;return(0,I.qy)(n||(n=(0,b.A)([' <div class="entry-container ','" .traceLink="','" @click="','"> ',' <div class="entry ','"> <div class="icon-message"> '," ",' <div class="message-relative_time"> <div class="message"> '," "," ",' </div> <div class="secondary"> <span>','</span> - <ha-relative-time .hass="','" .datetime="','" capitalize></ha-relative-time> '," "," </div> </div> </div> "," </div> </div> "])),(0,q.H)({clickable:y}),g?"/config/".concat(g.domain,"/trace/").concat(g.item_id,"?run_id=").concat(g.run_id):void 0,t._handleClick,0===i||null!=e&&e.when&&null!=l&&l.when&&new Date(1e3*e.when).toDateString()!==new Date(1e3*l.when).toDateString()?(0,I.qy)(r||(r=(0,b.A)([' <h4 class="date"> '," </h4> "])),(0,N.Yq)(new Date(1e3*e.when),t.hass.locale,t.hass.config)):I.s6,(0,q.H)({"no-entity":!e.entity_id}),t.noIcon?"":(0,I.qy)(o||(o=(0,b.A)([' <state-badge .hass="','" .overrideIcon="','" .overrideImage="','" .stateObj="','" .stateColor="','"></state-badge> '])),t.hass,e.icon,_,e.icon?void 0:h,!1),t.showIndicator?t._renderIndicator(e):"",t.noName?"":t._renderEntity(e.entity_id,e.name,y),t._renderMessage(e,d,v,h,y),t._renderContextMessage(e,d,y),(0,T.ie)(new Date(1e3*e.when),t.hass.locale,t.hass.config),t.hass,1e3*e.when,e.context_user_id?(0,I.qy)(a||(a=(0,b.A)(["",""])),t._renderUser(e)):"",y?"- ".concat(t.hass.localize("ui.components.logbook.show_trace")):"",y?(0,I.qy)(s||(s=(0,b.A)(["<ha-icon-next></ha-icon-next>"]))):"")},t}return(0,z.A)(e,t),(0,w.A)(e,[{key:"willUpdate",value:function(t){(!this.hasUpdated&&this.virtualize||t.has("virtualize")&&this.virtualize)&&(this.hass.loadBackendTranslation("services"),this.hass.loadBackendTranslation("title"),(0,$.i)())}},{key:"shouldUpdate",value:function(t){var e=t.get("hass"),i=void 0===e||e.locale!==this.hass.locale;return t.has("entries")||t.has("traceContexts")||i}},{key:"render",value:function(){var t,e=this;return null!==(t=this.entries)&&void 0!==t&&t.length?(0,I.qy)(l||(l=(0,b.A)([' <div class="container ha-scrollbar ','" @scroll="','"> '," </div> "])),(0,q.H)({narrow:this.narrow,"no-name":this.noName,"no-icon":this.noIcon}),this._saveScrollPos,this.virtualize?(0,I.qy)(d||(d=(0,b.A)(['<lit-virtualizer @visibilityChanged="','" scroller class="ha-scrollbar" .items="','" .renderItem="','"> </lit-virtualizer>'])),this._visibilityChanged,this.entries,this._renderLogbookItem):this.entries.map(function(t,i){return e._renderLogbookItem(t,i)})):(0,I.qy)(c||(c=(0,b.A)([' <div class="container no-entries"> '," </div> "])),this.hass.localize("ui.components.logbook.entries_not_found"))}},{key:"_saveScrollPos",value:function(t){this._savedScrollPos=t.target.scrollTop}},{key:"_visibilityChanged",value:function(t){(0,W.r)(this,"hass-logbook-live",{enable:0===t.first})}},{key:"_renderIndicator",value:function(t){var e=this.hass.states[t.entity_id],i=getComputedStyle(this),n={backgroundColor:void 0!==t.state?(0,L.c)(t.state,i,e):void 0};return(0,I.qy)(u||(u=(0,b.A)([' <div class="indicator" style="','"></div> '])),(0,E.W)(n))}},{key:"_renderMessage",value:function(t,e,i,n,r){if(t.entity_id&&t.state)return n?(0,H.a$)(this.hass,this.hass.localize,t.state,n,i):t.state;var o=function(t){return t.context_event_type||t.context_state||t.context_message}(t),a=t.message;if(R.includes(i)&&t.source){if(o)return"";a=(0,H.$O)(this.hass.localize,t.source)}return a?this._formatMessageWithPossibleEntity(o?function(t,e){return e?t.replace(e," "):t}(a,t.context_entity_id):a,e,void 0,r):""}},{key:"_renderUser",value:function(t){var e=t.context_user_id&&this.userIdToName[t.context_user_id];return e?"- ".concat(e):""}},{key:"_renderUnseenContextSourceEntity",value:function(t,e,i){return!t.context_entity_id||e.includes(t.context_entity_id)?"":(0,I.qy)(h||(h=(0,b.A)([" (",")"])),this._renderEntity(t.context_entity_id,t.context_entity_id_name,i))}},{key:"_renderContextMessage",value:function(t,e,i){if(t.context_state){var n=t.context_entity_id&&t.context_entity_id in this.hass.states?(0,H.dG)(this.hass.states[t.context_entity_id],t.context_state):void 0;return(0,I.qy)(v||(v=(0,b.A)([""," "," ",""])),this.hass.localize("ui.components.logbook.triggered_by_state_of"),this._renderEntity(t.context_entity_id,t.context_entity_id_name,i),n?(0,H.a$)(this.hass,this.hass.localize,t.context_state,n,(0,Z.m)(t.context_entity_id)):t.context_state)}var r;if("call_service"===t.context_event_type)return(0,I.qy)(_||(_=(0,b.A)([""," ",""])),this.hass.localize("ui.components.logbook.triggered_by_action"),t.context_domain&&t.context_service?"".concat((0,F.p$)(this.hass.localize,t.context_domain),":\n      ").concat(this.hass.localize("component.".concat(t.context_domain,".services.").concat(t.context_service,".name"),this.hass.services[t.context_domain][t.context_service].description_placeholders)||(null===(r=this.hass.services[t.context_domain])||void 0===r||null===(r=r[t.context_service])||void 0===r?void 0:r.name)||t.context_service):"");if(!t.context_message||e.includes(t.context_entity_id))return"";if("automation_triggered"===t.context_event_type||"script_started"===t.context_event_type){var o=t.context_source?t.context_source:t.context_message.replace("triggered by ",""),a=(0,H.$O)(this.hass.localize,o);return(0,I.qy)(g||(g=(0,b.A)([""," "," ",""])),this.hass.localize("automation_triggered"===t.context_event_type?"ui.components.logbook.triggered_by_automation":"ui.components.logbook.triggered_by_script"),this._renderEntity(t.context_entity_id,t.context_entity_id_name,i),t.context_message?this._formatMessageWithPossibleEntity(a,e,void 0,i):"")}return(0,I.qy)(y||(y=(0,b.A)([" "," "," "," ",""])),this.hass.localize("ui.components.logbook.triggered_by"),t.context_name,this._formatMessageWithPossibleEntity(t.context_message,e,t.context_entity_id,i),this._renderUnseenContextSourceEntity(t,e,i))}},{key:"_renderEntity",value:function(t,e,i){var n=t&&t in this.hass.states,r=e||n&&this.hass.states[t].attributes.friendly_name||t;return n?i?r:(0,I.qy)(m||(m=(0,b.A)(['<button class="link" @click="','" .entityId="','"> '," </button>"])),this._entityClicked,t,r):r}},{key:"_formatMessageWithPossibleEntity",value:function(t,e,i,n){if(-1!==t.indexOf("."))for(var r=t.split(" "),o=0,a=r.length;o<a;o++)if(r[o]in this.hass.states){var s=r[o];if(e.includes(s))return"";e.push(s);var c=r.splice(o);return c.shift(),(0,I.qy)(p||(p=(0,b.A)([""," "," ",""])),r.join(" "),this._renderEntity(s,this.hass.states[s].attributes.friendly_name,n),c.join(" "))}if(i&&i in this.hass.states){var l=this.hass.states[i].attributes.friendly_name;if(l&&t.endsWith(l))return e.includes(i)?"":(e.push(i),t=t.substring(0,t.length-l.length),(0,I.qy)(f||(f=(0,b.A)([""," ",""])),t,this._renderEntity(i,l,n)))}return t}},{key:"_entityClicked",value:function(t){var e=t.currentTarget.entityId;e&&(t.preventDefault(),t.stopPropagation(),(0,W.r)(this,"hass-more-info",{entityId:e}))}},{key:"_handleClick",value:function(t){var e=t.currentTarget;e.traceLink&&((0,B.o)(e.traceLink),(0,W.r)(this,"closed"))}}],[{key:"styles",get:function(){return[O.RF,O.dp,O.og,(0,I.AH)(x||(x=(0,b.A)([":host([virtualize]){display:block;height:100%}.entry-container{width:100%}.entry{position:relative;display:flex;width:100%;line-height:var(--ha-line-height-expanded);padding:8px 16px;box-sizing:border-box;border-top:1px solid var(--divider-color);justify-content:space-between;align-items:center}.indicator{background-color:var(--disabled-color);height:8px;width:8px;border-radius:var(--ha-border-radius-sm);flex-shrink:0;margin-right:12px;margin-inline-start:initial;margin-inline-end:12px;direction:var(--direction)}ha-icon-next{color:var(--secondary-text-color)}.clickable{cursor:pointer}:not(.clickable) .entry.no-entity,:not(.clickable) .no-name .entry{cursor:default}.entry:hover{background-color:rgba(var(--rgb-primary-text-color),.04)}.narrow:not(.no-icon) .time{margin-left:32px;margin-inline-start:32px;margin-inline-end:initial;direction:var(--direction)}.message-relative_time{display:flex;flex-direction:column}.secondary{font-size:var(--ha-font-size-s);line-height:var(--ha-line-height-normal)}.secondary a{color:var(--secondary-text-color)}.date{margin:8px 0;padding:0 16px}.icon-message{display:flex;align-items:center}.no-entries{text-align:center;color:var(--secondary-text-color)}state-badge{margin-right:16px;margin-inline-start:initial;flex-shrink:0;color:var(--state-icon-color);margin-inline-end:16px;direction:var(--direction)}.message{color:var(--primary-text-color)}.no-name .message:first-letter{text-transform:capitalize}a{color:var(--primary-color);text-decoration:none}button.link{color:var(--state-icon-color);text-decoration:none}.container{max-height:var(--logbook-max-height)}.container,lit-virtualizer{height:100%}lit-virtualizer{contain:size layout!important}.narrow .entry{line-height:var(--ha-line-height-normal)}.narrow .icon-message state-badge{margin-left:0;margin-inline-start:0;margin-right:8px;margin-inline-end:8px;direction:var(--direction)}"])))]}}])}(I.WF);(0,A.Cg)([(0,M.MZ)({attribute:!1})],V.prototype,"hass",void 0),(0,A.Cg)([(0,M.MZ)({attribute:!1})],V.prototype,"userIdToName",void 0),(0,A.Cg)([(0,M.MZ)({attribute:!1})],V.prototype,"traceContexts",void 0),(0,A.Cg)([(0,M.MZ)({attribute:!1})],V.prototype,"entries",void 0),(0,A.Cg)([(0,M.MZ)({type:Boolean,attribute:"narrow"})],V.prototype,"narrow",void 0),(0,A.Cg)([(0,M.MZ)({type:Boolean,attribute:"virtualize",reflect:!0})],V.prototype,"virtualize",void 0),(0,A.Cg)([(0,M.MZ)({type:Boolean,attribute:"show-indicator"})],V.prototype,"showIndicator",void 0),(0,A.Cg)([(0,M.MZ)({type:Boolean,attribute:"no-icon"})],V.prototype,"noIcon",void 0),(0,A.Cg)([(0,M.MZ)({type:Boolean,attribute:"no-name"})],V.prototype,"noName",void 0),(0,A.Cg)([(0,M.MZ)({type:Boolean,attribute:"relative-time"})],V.prototype,"relativeTime",void 0),(0,A.Cg)([(0,P.a)(".container")],V.prototype,"_savedScrollPos",void 0),(0,A.Cg)([(0,M.Ls)({passive:!0})],V.prototype,"_saveScrollPos",null),(0,A.Cg)([(0,M.Ls)({passive:!0})],V.prototype,"_visibilityChanged",null),V=(0,A.Cg)([(0,M.EM)("ha-logbook-renderer")],V),e()}catch(Y){e(Y)}})}}]);
//# sourceMappingURL=19409.7d026bdee5d1322c.js.map