{"version":3,"file":"58597.ed1d00207eae9be4.js","sources":["https://raw.githubusercontent.com/home-assistant/frontend/20251229.5/src/panels/lovelace/cards/energy/hui-energy-sankey-card.ts"],"names":["DEFAULT_CONFIG","group_by_floor","group_by_area","HuiEnergySankeyCard","_SubscribeMixin","_this","_callSuper","concat","args","hassSubscribeRequiredHostProps","_valueFormatter","value","formatNumber","hass","locale","maximumFractionDigits","undefined","config","this","_config","Object","assign","key","_this$_config","_this2","getEnergyDataCollection","collection_key","subscribe","data","_data","columns","min_columns","rows","min_rows","changedProps","has","_this3","nothing","html","_templateObject","_taggedTemplateLiteral","localize","prefs","types","energySourcesByType","_getSummedData","getSummedData","summedData","_computeConsumptionDa","compareSummedData","computeConsumptionData","consumption","computedStyle","compareConsumption","getComputedStyle","nodes","links","homeNode","id","label","Math","max","total","used_total","color","getPropertyValue","trim","index","push","battery","_summedData$total$fro","_summedData$total$to_","totalBatteryOut","from_battery","totalBatteryIn","to_battery","source","target","used_battery","grid_to_battery","solar_to_battery","grid","_summedData$total$fro2","totalFromGrid","from_grid","used_grid","solar","_summedData$total$sol","totalSolarProduction","used_solar","flow_to","_summedData$total$to_2","totalToGrid","to_grid","battery_to_grid","solar_to_grid","untrackedConsumption","deviceNodes","parentLinks","device_consumption","forEach","device","idx","stat_consumption","stats","calculateStatisticSumGrowth","node","name","getStatisticLabel","statsMetadata","getGraphColorByIndex","parent","included_in_stat","devicesWithoutParent","filter","_this$_config2","_this$_groupByFloorAn","_groupByFloorAndArea","areas","floors","keys","sort","a","b","_this3$hass$floors$b$","_this3$hass$floors$b","_this3$hass$floors$a$","_this3$hass$floors$a","level","Infinity","floorId","floorNodeId","areaId","targetNodeId","areaNodeId","devices","deviceNode","deviceSections","_getDeviceSections","section","length","hasData","some","vertical","layout","_isMobileSize","_templateObject2","title","classMap","_templateObject3","_templateObject4","_this4","no_area","no_floor","entity","states","_ref","getEntityContext","entities","area","floor","area_id","floor_id","includes","unshift","parentSection","childSection","parentIds","values","remainingLinks","isChild","entries","_ref2","_ref3","_slicedToArray","child","_toConsumableArray","SubscribeMixin","MobileAwareMixin","LitElement","styles","css","_templateObject5","attribute"],"mappings":"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"}