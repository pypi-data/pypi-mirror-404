"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["99104"],{6275:function(t,e,i){i.a(t,async function(t,n){try{i.r(e),i.d(e,{HuiEntityFilterCard:function(){return A}});var s=i(31432),r=i(47075),a=i(44734),o=i(43080),h=i(69683),c=i(6454),u=i(25460),l=(i(49255),i(16280),i(28706),i(2008),i(62062),i(18111),i(81148),i(22489),i(61701),i(13579),i(69085),i(26099),i(40445)),f=i(96196),d=i(77845),y=i(1087),g=i(33121),v=i(68289),_=i(13632),p=i(20939),m=i(14487),b=t([m]);m=(b.then?(await b)():b)[0];var A=function(t){function e(){var t;(0,a.A)(this,e);for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=(0,h.A)(this,e,[].concat(n))).preview=!1,t}return(0,c.A)(e,t),(0,o.A)(e,[{key:"getCardSize",value:function(){return this._element?(0,g.Z)(this._element):1}},{key:"setConfig",value:function(t){if(!t.entities||!t.entities.length||!Array.isArray(t.entities))throw new Error("Entities must be specified");if(!t.conditions&&!t.state_filter&&!t.entities.some(function(t){return"object"===(0,r.A)(t)&&(t.state_filter||t.conditions)}))throw new Error("At least one conditions or state_filter is required");if(t.conditions&&!Array.isArray(t.conditions)||t.state_filter&&!Array.isArray(t.state_filter)||t.entities.some(function(t){return"object"===(0,r.A)(t)&&(t.state_filter&&!Array.isArray(t.state_filter)||t.conditions&&!Array.isArray(t.conditions))}))throw new Error("Conditions or state_filter must be an array");if(t.conditions&&t.state_filter||t.entities.some(function(t){return"object"===(0,r.A)(t)&&t.state_filter&&t.conditions}))throw new Error("Conditions and state_filter may not be simultaneously defined");this._configEntities=(0,p.L)(t.entities),this._config=t,this._baseCardConfig=Object.assign({type:"entities",entities:[]},this._config.card),this.lastChild&&this.removeChild(this.lastChild),this._element=this._createCardElement(this._baseCardConfig)}},{key:"createRenderRoot",value:function(){return this}},{key:"shouldUpdate",value:function(t){return this._element&&(this._element.hass=this.hass,this._element.preview=this.preview,this._element.layout=this.layout),!(!t.has("_config")&&!t.has("preview"))||!!t.has("hass")&&this._haveEntitiesChanged(t.get("hass"))}},{key:"update",value:function(t){var i=this;if((0,u.A)(e,"update",this,3)([t]),this.hass&&this._config&&this._configEntities&&this._element){var n=this._configEntities.filter(function(t){var e,n,s=i.hass.states[t.entity];if(!s)return!1;var r=null!==(e=t.conditions)&&void 0!==e?e:i._config.conditions;if(r&&!t.state_filter){var a=r.map(function(e){return(0,m.lB)(e,t.entity)});return(0,m.XH)(a,i.hass)}var o=null!==(n=t.state_filter)&&void 0!==n?n:i._config.state_filter;return!o||o.some(function(t){return(0,v.J)(s,t)})});if(0!==n.length||!1!==this._config.show_empty||this.preview){if(this.lastChild)this._oldEntities&&n.length===this._oldEntities.length&&n.every(function(t,e){return t===i._oldEntities[e]})||(this._oldEntities=n,this._element.config=Object.assign(Object.assign({},this._baseCardConfig),{},{entities:n}));else this._element.config=Object.assign(Object.assign({},this._baseCardConfig),{},{entities:n}),this._oldEntities=n;this.lastChild||this.appendChild(this._element),this.hidden&&(this.style.display="block",this.toggleAttribute("hidden",!1),(0,y.r)(this,"card-visibility-changed",{value:!0}))}else this.hidden||(this.style.display="none",this.toggleAttribute("hidden",!0),(0,y.r)(this,"card-visibility-changed",{value:!1}))}}},{key:"_haveEntitiesChanged",value:function(t){var e;if(!this.hass||!t)return!0;if(!this._configEntities)return!0;if(this.hass.localize!==t.localize)return!0;var i,n=(0,s.A)(this._configEntities);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(this.hass.states[r.entity]!==t.states[r.entity])return!0;if(r.conditions){var a,o=(0,m.Wx)(r.conditions),h=(0,s.A)(o);try{for(h.s();!(a=h.n()).done;){var c=a.value;if(this.hass.states[c]!==t.states[c])return!0}}catch(g){h.e(g)}finally{h.f()}}}}catch(g){n.e(g)}finally{n.f()}if(null!==(e=this._config)&&void 0!==e&&e.conditions){var u,l,f=(0,m.Wx)(null===(u=this._config)||void 0===u?void 0:u.conditions),d=(0,s.A)(f);try{for(d.s();!(l=d.n()).done;){var y=l.value;if(this.hass.states[y]!==t.states[y])return!0}}catch(g){d.e(g)}finally{d.f()}}return!1}},{key:"_createCardElement",value:function(t){var e=document.createElement("hui-card");return e.hass=this.hass,e.preview=this.preview,e.config=t,e.load(),e}}],[{key:"getStubConfig",value:function(t,e,i){var n=(0,_.B)(t,3,e,i,["light","switch","sensor"]);return{type:"entity-filter",entities:n,conditions:n[0]?[{condition:"state",state:t.states[n[0]].state}]:[],card:{type:"entities"}}}}])}(f.mN);(0,l.Cg)([(0,d.MZ)({attribute:!1})],A.prototype,"hass",void 0),(0,l.Cg)([(0,d.MZ)({attribute:!1})],A.prototype,"layout",void 0),(0,l.Cg)([(0,d.MZ)({type:Boolean})],A.prototype,"preview",void 0),(0,l.Cg)([(0,d.wk)()],A.prototype,"_config",void 0),A=(0,l.Cg)([(0,d.EM)("hui-entity-filter-card")],A),n()}catch(C){n(C)}})},68289:function(t,e,i){i.d(e,{J:function(){return s}});var n=i(47075),s=(i(74423),i(62062),i(18111),i(61701),i(33110),i(2892),i(26099),i(84864),i(57465),i(27495),i(90906),i(38781),i(21699),i(42762),function(t,e){var i,s,r;if("object"===(0,n.A)(e)?(i=e.operator,s=e.value,r=e.attribute?t.attributes[e.attribute]:t.state):(i="==",s=e,r=t.state),"=="===i||"!="===i){var a="number"==typeof s||"string"==typeof s&&s.trim()&&!isNaN(Number(s)),o="number"==typeof r||"string"==typeof r&&r.trim()&&!isNaN(Number(r));a&&o&&(s=Number(s),r=Number(r))}switch(i){case"==":return r===s;case"<=":return r<=s;case"<":return r<s;case">=":return r>=s;case">":return r>s;case"!=":return r!==s;case"in":return!(!Array.isArray(s)&&"string"!=typeof s)&&(Array.isArray(s)&&(s=s.map(function(t){return"".concat(t)})),s.includes(r));case"not in":return!(!Array.isArray(s)&&"string"!=typeof s)&&(Array.isArray(s)&&(s=s.map(function(t){return"".concat(t)})),!s.includes(r));case"regex":return"string"==typeof s&&(null!==r&&"object"===(0,n.A)(r)?RegExp(s).test(JSON.stringify(r)):RegExp(s).test(r));default:return!1}})}}]);
//# sourceMappingURL=99104.d27f6b492df0a209.js.map