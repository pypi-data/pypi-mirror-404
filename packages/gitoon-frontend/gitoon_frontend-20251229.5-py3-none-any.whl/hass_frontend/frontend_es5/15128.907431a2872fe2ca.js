"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["15128"],{81310:function(e,t,a){var o,r,i,n,s,c=a(72153),l=a(44734),u=a(43080),h=a(69683),d=a(6454),v=(a(28706),a(40445)),b=a(96196),p=a(77845),f=a(26218),g=a(91926),m=(a(90248),a(2054),a(14503)),y=function(e){function t(){var e;(0,l.A)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=(0,h.A)(this,t,[].concat(o))).mainPage=!1,e.narrow=!1,e.supervisor=!1,e}return(0,d.A)(t,e),(0,u.A)(t,[{key:"render",value:function(){var e;return(0,b.qy)(o||(o=(0,c.A)([' <div class="toolbar"> <div class="toolbar-content"> ',' <div class="main-title"> <slot name="header">','</slot> </div> <slot name="toolbar-icon"></slot> </div> </div> <div class="content ha-scrollbar" @scroll="','"> <slot></slot> </div> <div id="fab"> <slot name="fab"></slot> </div> '])),this.mainPage||null!==(e=history.state)&&void 0!==e&&e.root?(0,b.qy)(r||(r=(0,c.A)([' <ha-menu-button .hassio="','" .hass="','" .narrow="','"></ha-menu-button> '])),this.supervisor,this.hass,this.narrow):this.backPath?(0,b.qy)(i||(i=(0,c.A)([' <a href="','"> <ha-icon-button-arrow-prev .hass="','"></ha-icon-button-arrow-prev> </a> '])),this.backPath,this.hass):(0,b.qy)(n||(n=(0,c.A)([' <ha-icon-button-arrow-prev .hass="','" @click="','"></ha-icon-button-arrow-prev> '])),this.hass,this._backTapped),this.header,this._saveScrollPos)}},{key:"_saveScrollPos",value:function(e){this._savedScrollPos=e.target.scrollTop}},{key:"_backTapped",value:function(){this.backCallback?this.backCallback():(0,g.O)()}}],[{key:"styles",get:function(){return[m.dp,(0,b.AH)(s||(s=(0,c.A)([":host{display:block;height:100%;background-color:var(--primary-background-color);overflow:hidden;position:relative}:host([narrow]){width:100%;position:fixed}.toolbar{background-color:var(--app-header-background-color);padding-top:var(--safe-area-inset-top);padding-right:var(--safe-area-inset-right)}:host([narrow]) .toolbar{padding-left:var(--safe-area-inset-left)}.toolbar-content{display:flex;align-items:center;font-size:var(--ha-font-size-xl);height:var(--header-height);font-weight:var(--ha-font-weight-normal);color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box;padding:8px 12px}.toolbar a{color:var(--sidebar-text-color);text-decoration:none}::slotted([slot=toolbar-icon]),ha-icon-button-arrow-prev,ha-menu-button{display:flex;align-items:center;pointer-events:auto;color:var(--sidebar-icon-color)}.main-title{margin:var(--margin-title);line-height:var(--ha-line-height-normal);min-width:0;flex-grow:1;overflow-wrap:break-word;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.content{position:relative;width:calc(100% - var(--safe-area-inset-right,0px));height:calc(100% - 1px - var(--header-height,0px) - var(--safe-area-inset-top,0px) - var(--hass-subpage-bottom-inset,var(--safe-area-inset-bottom,0px)));margin-bottom:var(--hass-subpage-bottom-inset,var(--safe-area-inset-bottom));margin-right:var(--safe-area-inset-right);overflow-y:auto;overflow:auto;-webkit-overflow-scrolling:touch}:host([narrow]) .content{width:calc(100% - var(--safe-area-inset-left,0px) - var(--safe-area-inset-right,0px));margin-left:var(--safe-area-inset-left)}#fab{position:absolute;right:calc(16px + var(--safe-area-inset-right,0px));inset-inline-end:calc(16px + var(--safe-area-inset-right,0px));inset-inline-start:initial;bottom:calc(16px + var(--safe-area-inset-bottom,0px));z-index:1;display:flex;flex-wrap:wrap;justify-content:flex-end;gap:var(--ha-space-2)}:host([narrow]) #fab.tabs{bottom:calc(84px + var(--safe-area-inset-bottom,0px))}#fab[is-wide]{bottom:calc(24px + var(--safe-area-inset-bottom,0px));right:calc(24px + var(--safe-area-inset-right,0px));inset-inline-end:calc(24px + var(--safe-area-inset-right,0px));inset-inline-start:initial}"])))]}}])}(b.WF);(0,v.Cg)([(0,p.MZ)({attribute:!1})],y.prototype,"hass",void 0),(0,v.Cg)([(0,p.MZ)()],y.prototype,"header",void 0),(0,v.Cg)([(0,p.MZ)({type:Boolean,attribute:"main-page"})],y.prototype,"mainPage",void 0),(0,v.Cg)([(0,p.MZ)({type:String,attribute:"back-path"})],y.prototype,"backPath",void 0),(0,v.Cg)([(0,p.MZ)({attribute:!1})],y.prototype,"backCallback",void 0),(0,v.Cg)([(0,p.MZ)({type:Boolean,reflect:!0})],y.prototype,"narrow",void 0),(0,v.Cg)([(0,p.MZ)({type:Boolean})],y.prototype,"supervisor",void 0),(0,v.Cg)([(0,f.a)(".content")],y.prototype,"_savedScrollPos",void 0),(0,v.Cg)([(0,p.Ls)({passive:!0})],y.prototype,"_saveScrollPos",null),y=(0,v.Cg)([(0,p.EM)("hass-subpage")],y)},2854:function(e,t,a){a.a(e,async function(e,o){try{a.r(t),a.d(t,{BluetoothNetworkVisualization:function(){return M}});var r,i,n=a(72153),s=a(78261),c=a(31432),l=a(44734),u=a(43080),h=a(75864),d=a(69683),v=a(6454),b=a(25460),p=(a(28706),a(2008),a(50113),a(23792),a(62062),a(44114),a(18111),a(22489),a(20116),a(7588),a(61701),a(53921),a(26099),a(16034),a(23500),a(40445)),f=a(96196),g=a(77845),m=a(22786),y=a(98975),_=a(76774),w=a(91926),k=a(77796),x=a(7358),C=a(21030),A=(a(81310),a(29703)),D=e([x,y,A]);[x,y,A]=D.then?(await D)():D;var z="ha",P="Home Assistant",S=[[-70,"--green-color"],[-75,"--lime-color"],[-80,"--yellow-color"],[-85,"--amber-color"],[-90,"--orange-color"],[-95,"--deep-orange-color"],[-1/0,"--red-color"]],M=function(e){function t(){var e;(0,l.A)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=(0,d.A)(this,t,[].concat(o))).narrow=!1,e.isWide=!1,e._data=[],e._scanners={},e._sourceDevices={},e._throttledUpdateData=(0,k.n)(function(t){e._data=t},1e4),e._getRssiColorVar=(0,m.A)(function(e){var t,a=(0,c.A)(S);try{for(a.s();!(t=a.n()).done;){var o=(0,s.A)(t.value,2),r=o[0],i=o[1];if(e>r)return i}}catch(n){a.e(n)}finally{a.f()}return"--red-color"}),e._formatNetworkData=(0,m.A)(function(t,a){var o=getComputedStyle((0,h.A)(e)),r=[{name:P,symbol:"roundRect",itemStyle:{color:o.getPropertyValue("--primary-color")}},{name:e.hass.localize("ui.panel.config.bluetooth.scanners"),symbol:"circle",itemStyle:{color:o.getPropertyValue("--cyan-color")}},{name:e.hass.localize("ui.panel.config.bluetooth.known_devices"),symbol:"circle",itemStyle:{color:o.getPropertyValue("--teal-color")}},{name:e.hass.localize("ui.panel.config.bluetooth.unknown_devices"),symbol:"circle",itemStyle:{color:o.getPropertyValue("--disabled-color")}}],i=[{id:z,name:P,category:0,value:4,symbol:"roundRect",symbolSize:40,polarDistance:0}],n=[];return Object.values(a).forEach(function(t){var a=e._sourceDevices[t.source],r=a?(0,_.w)(a,e.hass).area:void 0;i.push({id:t.source,name:(null==a?void 0:a.name_by_user)||(null==a?void 0:a.name)||t.name,context:null==r?void 0:r.name,category:1,value:5,symbol:"circle",symbolSize:30,polarDistance:.25}),n.push({source:z,target:t.source,value:0,symbol:"none",lineStyle:{width:3,color:o.getPropertyValue("--primary-color")}})}),t.forEach(function(t){if(a[t.address])n.push({source:t.source,target:t.address,value:t.rssi,symbol:"none",lineStyle:{width:e._getLineWidth(t.rssi),color:o.getPropertyValue(e._getRssiColorVar(t.rssi))}});else{var r=e._sourceDevices[t.address],s=r?(0,_.w)(r,e.hass).area:void 0;i.push({id:t.address,name:e._getBluetoothDeviceName(t.address),context:null==s?void 0:s.name,value:r?1:0,category:r?2:3,symbolSize:20}),n.push({source:t.source,target:t.address,value:t.rssi,symbol:"none",lineStyle:{width:e._getLineWidth(t.rssi),color:r?o.getPropertyValue(e._getRssiColorVar(t.rssi)):o.getPropertyValue("--disabled-color")}})}}),{nodes:i,links:n,categories:r}}),e._tooltipFormatter=function(t){var a=t.dataType,o=t.data,r="";if("edge"===a){var i=o.source,n=o.target,s=o.value,c=e._getBluetoothDeviceName(i),l=e._getBluetoothDeviceName(n);r="".concat(c," â†’ ").concat(l),i!==z&&(r+=" <b>".concat(e.hass.localize("ui.panel.config.bluetooth.rssi"),":</b> ").concat(s))}else{var u=o.id,h=e._getBluetoothDeviceName(u),d=e._data.find(function(e){return e.address===u});if(d){r="<b>".concat(h,"</b><br><b>").concat(e.hass.localize("ui.panel.config.bluetooth.address"),":</b> ").concat(u,"<br><b>").concat(e.hass.localize("ui.panel.config.bluetooth.rssi"),":</b> ").concat(d.rssi,"<br><b>").concat(e.hass.localize("ui.panel.config.bluetooth.source"),":</b> ").concat(d.source,"<br><b>").concat(e.hass.localize("ui.panel.config.bluetooth.updated"),":</b> ").concat((0,y.K)(new Date(1e3*d.time),e.hass.locale));var v=e._sourceDevices[u];if(v){var b=(0,_.w)(v,e.hass).area;b&&(r+="<br><b>".concat(e.hass.localize("ui.panel.config.bluetooth.area"),": </b>").concat(b.name))}}else{var p=e._sourceDevices[u];if(p){r="<b>".concat(h,"</b><br><b>").concat(e.hass.localize("ui.panel.config.bluetooth.address"),":</b> ").concat(u);var f=(0,_.w)(p,e.hass).area;f&&(r+="<br><b>".concat(e.hass.localize("ui.panel.config.bluetooth.area"),": </b>").concat(f.name))}}}return r},e}return(0,v.A)(t,e),(0,u.A)(t,[{key:"connectedCallback",value:function(){var e=this;if((0,b.A)(t,"connectedCallback",this,3)([]),this.hass){this._unsub_advertisements=(0,C.Ht)(this.hass.connection,function(t){e._data.length?e._throttledUpdateData(t):e._data=t}),this._unsub_scanners=(0,C.mj)(this.hass.connection,function(t){e._scanners=t});var a=Object.values(this.hass.devices).filter(function(e){return e.connections.find(function(e){return"bluetooth"===e[0]})});this._sourceDevices=Object.fromEntries(a.map(function(e){return[e.connections.find(function(e){return"bluetooth"===e[0]})[1],e]}))}}},{key:"disconnectedCallback",value:function(){(0,b.A)(t,"disconnectedCallback",this,3)([]),this._unsub_advertisements&&(this._unsub_advertisements(),this._unsub_advertisements=void 0),this._throttledUpdateData.cancel(),this._unsub_scanners&&(this._unsub_scanners(),this._unsub_scanners=void 0)}},{key:"render",value:function(){return(0,f.qy)(r||(r=(0,n.A)([' <hass-tabs-subpage .hass="','" .narrow="','" .route="','" header="','" .tabs="','"> <ha-network-graph .hass="','" .data="','" .tooltipFormatter="','" @chart-click="','"></ha-network-graph> </hass-tabs-subpage> '])),this.hass,this.narrow,this.route,this.hass.localize("ui.panel.config.bluetooth.visualization"),A.bluetoothAdvertisementMonitorTabs,this.hass,this._formatNetworkData(this._data,this._scanners),this._tooltipFormatter,this._handleChartClick)}},{key:"_getBluetoothDeviceName",value:function(e){var t,a,o,r;return e===z?P:this._sourceDevices[e]?(null===(a=this._sourceDevices[e])||void 0===a?void 0:a.name_by_user)||(null===(o=this._sourceDevices[e])||void 0===o?void 0:o.name)||e:this._scanners[e]?(null===(r=this._scanners[e])||void 0===r?void 0:r.name)||e:(null===(t=this._data.find(function(t){return t.address===e}))||void 0===t?void 0:t.name)||e}},{key:"_getLineWidth",value:function(e){return e>-33?3:e>-66?2:1}},{key:"_handleChartClick",value:function(e){if("node"===e.detail.dataType&&"pointer"===e.detail.event.target.cursor){var t=e.detail.data.id,a=this._sourceDevices[t];a&&(0,w.o)("/config/devices/device/".concat(a.id))}}}],[{key:"styles",get:function(){return[(0,f.AH)(i||(i=(0,n.A)(["ha-network-graph{height:100%}"])))]}}])}(f.WF);(0,p.Cg)([(0,g.MZ)({attribute:!1})],M.prototype,"hass",void 0),(0,p.Cg)([(0,g.MZ)({type:Boolean,reflect:!0})],M.prototype,"narrow",void 0),(0,p.Cg)([(0,g.MZ)({attribute:"is-wide",type:Boolean})],M.prototype,"isWide",void 0),(0,p.Cg)([(0,g.MZ)({attribute:!1})],M.prototype,"route",void 0),(0,p.Cg)([(0,g.wk)()],M.prototype,"_data",void 0),(0,p.Cg)([(0,g.wk)()],M.prototype,"_scanners",void 0),(0,p.Cg)([(0,g.wk)()],M.prototype,"_sourceDevices",void 0),M=(0,p.Cg)([(0,g.EM)("bluetooth-network-visualization")],M),o()}catch(V){o(V)}})},83339:function(e,t,a){a.d(t,{b:function(){return r}});var o=a(83504);function r(e,t){return+(0,o.a)(e)-+(0,o.a)(t)}},6116:function(e,t,a){a.d(t,{o:function(){return n}});var o=a(6439),r=a(9160),i=a(83339);function n(e,t,a){var n=(0,i.b)(e,t)/r.Cg;return(0,o.u)(null==a?void 0:a.roundingMethod)(n)}}}]);
//# sourceMappingURL=15128.907431a2872fe2ca.js.map