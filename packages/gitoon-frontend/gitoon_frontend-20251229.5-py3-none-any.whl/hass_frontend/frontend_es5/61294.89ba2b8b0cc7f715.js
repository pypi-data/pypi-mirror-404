"use strict";(self.webpackChunkgitoon_frontend=self.webpackChunkgitoon_frontend||[]).push([["61294"],{5127:function(t,e,n){n.a(t,async function(t,e){try{var i,a,r,o,s,l,u,c=n(72153),d=n(44734),h=n(43080),g=n(69683),v=n(6454),p=n(25460),_=(n(28706),n(62062),n(26910),n(18111),n(61701),n(2892),n(26099),n(40445)),f=n(96196),m=n(77845),y=n(6415),x=n(20058),b=n(67258),A=n(12587),k=n(36240),M=t([x]);x=(M.then?(await M)():M)[0];var S=function(t,e,n){return 180*(0,k.NN)((0,k.S8)(t,e,n),e,n)/100},w=function(t){function e(){var t;(0,d.A)(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=(0,g.A)(this,e,[].concat(i))).min=0,t.max=100,t.value=0,t.needle=!1,t.label="",t._angle=0,t._updated=!1,t._segment_label="",t}return(0,v.A)(e,t),(0,h.A)(e,[{key:"firstUpdated",value:function(t){var n=this;(0,p.A)(e,"firstUpdated",this,3)([t]),(0,A.m)(function(){n._updated=!0,n._angle=S(n.value,n.min,n.max),n._segment_label=n._getSegmentLabel(),n._rescaleSvg()})}},{key:"updated",value:function(t){(0,p.A)(e,"updated",this,3)([t]),this._updated&&(t.has("value")||t.has("valueText")||t.has("label")||t.has("_segment_label"))&&(this._angle=S(this.value,this.min,this.max),this._segment_label=this._getSegmentLabel(),this._rescaleSvg())}},{key:"render",value:function(){var t=this;return(0,f.JW)(i||(i=(0,c.A)([' <svg viewBox="-50 -50 100 50" class="gauge"> '," "," ",'  </svg> <svg class="text"> <text class="value-text"> ',""," </text> </svg>"])),this.needle&&this.levels?"":(0,f.JW)(a||(a=(0,c.A)(['<path class="dial" d="M -40 0 A 40 40 0 0 1 40 0"></path>']))),this.levels?this.levels.sort(function(t,e){return t.level-e.level}).map(function(e,n){var i;if(0===n&&e.level!==t.min){var a=S(t.min,t.min,t.max);i=(0,f.JW)(r||(r=(0,c.A)(['<path stroke="var(--info-color)" class="level" d="M\n                          ',"\n                          ",'\n                         A 40 40 0 0 1 40 0\n                        "></path>'])),0-40*Math.cos(a*Math.PI/180),0-40*Math.sin(a*Math.PI/180))}var s=S(e.level,t.min,t.max);return(0,f.JW)(o||(o=(0,c.A)(["",'<path stroke="','" class="level" d="M\n                        ',"\n                        ",'\n                       A 40 40 0 0 1 40 0\n                      "></path>'])),i,e.stroke,0-40*Math.cos(s*Math.PI/180),0-40*Math.sin(s*Math.PI/180))}):"",this.needle?(0,f.JW)(s||(s=(0,c.A)(['<path class="needle" d="M -25 -2.5 L -47.5 0 L -25 2.5 z" style="','"> </path>'])),(0,y.W)({transform:"rotate(".concat(this._angle,"deg)")})):(0,f.JW)(l||(l=(0,c.A)(['<path class="value" d="M -40 0 A 40 40 0 1 0 40 0" style="','"></path>'])),(0,y.W)({transform:"rotate(".concat(this._angle,"deg)")})),this._segment_label?this._segment_label:this.valueText||(0,x.ZV)(this.value,this.locale,this.formatOptions),this._segment_label?"":"%"===this.label?(0,b.d)(this.locale)+"%":" ".concat(this.label))}},{key:"_rescaleSvg",value:function(){var t=this.shadowRoot.querySelector(".text"),e=t.querySelector("text").getBBox();t.setAttribute("viewBox","".concat(e.x," ").concat(e.y," ").concat(e.width," ").concat(e.height))}},{key:"_getSegmentLabel",value:function(){if(this.levels){this.levels.sort(function(t,e){return t.level-e.level});for(var t=this.levels.length-1;t>=0;t--)if(this.value>=this.levels[t].level)return this.levels[t].label}return""}}])}(f.WF);w.styles=(0,f.AH)(u||(u=(0,c.A)([":host{position:relative}.dial{fill:none;stroke:var(--primary-background-color);stroke-width:15}.value{fill:none;stroke-width:15;stroke:var(--gauge-color);transition:all 1s ease 0s}.needle{fill:var(--primary-text-color);transition:all 1s ease 0s}.level{fill:none;stroke-width:15}.gauge{display:block}.text{position:absolute;max-height:40%;max-width:55%;left:50%;bottom:-6%;transform:translate(-50%,0%)}.value-text{font-size:50px;fill:var(--primary-text-color);text-anchor:middle;direction:ltr}"]))),(0,_.Cg)([(0,m.MZ)({type:Number})],w.prototype,"min",void 0),(0,_.Cg)([(0,m.MZ)({type:Number})],w.prototype,"max",void 0),(0,_.Cg)([(0,m.MZ)({type:Number})],w.prototype,"value",void 0),(0,_.Cg)([(0,m.MZ)({attribute:!1})],w.prototype,"formatOptions",void 0),(0,_.Cg)([(0,m.MZ)({attribute:!1,type:String})],w.prototype,"valueText",void 0),(0,_.Cg)([(0,m.MZ)({attribute:!1})],w.prototype,"locale",void 0),(0,_.Cg)([(0,m.MZ)({type:Boolean})],w.prototype,"needle",void 0),(0,_.Cg)([(0,m.MZ)({type:Array})],w.prototype,"levels",void 0),(0,_.Cg)([(0,m.MZ)()],w.prototype,"label",void 0),(0,_.Cg)([(0,m.wk)()],w.prototype,"_angle",void 0),(0,_.Cg)([(0,m.wk)()],w.prototype,"_updated",void 0),(0,_.Cg)([(0,m.wk)()],w.prototype,"_segment_label",void 0),w=(0,_.Cg)([(0,m.EM)("ha-gauge")],w),e()}catch(C){e(C)}})},23528:function(t,e,n){n.a(t,async function(t,i){try{n.d(e,{$3:function(){return f},$O:function(){return S},$j:function(){return m},ED:function(){return s},JE:function(){return w},OQ:function(){return C},PU:function(){return W},Ph:function(){return p},Uf:function(){return M},W1:function(){return _},Wr:function(){return h},Z:function(){return c},gF:function(){return y},iY:function(){return x},jU:function(){return l},nN:function(){return k},p3:function(){return d},pJ:function(){return v},r_:function(){return u},sz:function(){return g}});n(74423),n(18111),n(13579),n(62953);var a=n(28978),r=n(380),o=t([r]);r=(o.then?(await o)():o)[0];var s=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({});const l=["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"],u=["L","gal","ft³","m³","CCF","MCF"],c=t=>t.sendMessagePromise({type:"recorder/info"}),d=(t,e)=>t.callWS({type:"recorder/list_statistic_ids",statistic_type:e}),h=(t,e)=>t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e}),g=(t,e,n,i,a="hour",r,o)=>t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:null==n?void 0:n.toISOString(),statistic_ids:i,period:a,units:r,types:o}),v=(t,e,n,i)=>t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:i,fixed_period:n.fixed_period?{start_time:n.fixed_period.start instanceof Date?n.fixed_period.start.toISOString():n.fixed_period.start,end_time:n.fixed_period.end instanceof Date?n.fixed_period.end.toISOString():n.fixed_period.end}:void 0,calendar:n.calendar?{..."week"===n.calendar.period?{first_weekday:(0,r.D)(t.locale).substring(0,3)}:{},...n.calendar}:void 0,rolling_window:n.rolling_window}),p=t=>t.callWS({type:"recorder/validate_statistics"}),_=(t,e,n,i)=>t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:n,unit_class:i}),f=(t,e)=>t.callWS({type:"recorder/clear_statistics",statistic_ids:e}),m=t=>{let e=null;if(!t)return null;for(const n of t)null!==n.change&&void 0!==n.change&&(null===e?e=n.change:e+=n.change);return e},y=(t,e)=>{let n=null;for(const i of e){if(!(i in t))continue;const e=m(t[i]);null!==e&&(null===n?n=e:n+=e)}return n},x=(t,e)=>t.some(t=>void 0!==t[e]&&null!==t[e]),b=["mean","min","max"],A=["sum","state","change"],k=(t,e)=>!(!b.includes(e)||0===t.mean_type)||!(!A.includes(e)||!t.has_sum),M=(t,e,n,i,a)=>{const r=new Date(n).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:r,adjustment:i,adjustment_unit_of_measurement:a})},S=(t,e,n)=>{const i=t.states[e];return i?(0,a.u)(i):(null==n?void 0:n.name)||e},w=(t,e,n)=>{let i;var a;e&&(i=null===(a=t.states[e])||void 0===a?void 0:a.attributes.unit_of_measurement);return void 0===i?null==n?void 0:n.statistics_unit_of_measurement:i},C=t=>t.includes(":"),W=t=>t.callWS({type:"recorder/update_statistics_issues"});i()}catch(l){i(l)}})},80449:function(t,e,n){n.a(t,async function(t,i){try{n.r(e);var a,r,o,s,l=n(72153),u=n(44734),c=n(43080),d=n(69683),h=n(6454),g=(n(28706),n(40445)),v=n(96196),p=n(77845),_=n(20058),f=(n(76776),n(5127)),m=(n(67094),n(34127)),y=n(38114),x=n(54706),b=n(784),A=t([f,m,y,_]);[f,m,y,_]=A.then?(await A)():A;var k=[{level:-1,stroke:"var(--energy-grid-consumption-color)"},{level:0,stroke:"var(--energy-grid-return-color)"}],M=function(t){function e(){var t;(0,u.A)(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=(0,d.A)(this,e,[].concat(i))).hassSubscribeRequiredHostProps=["_config"],t}return(0,h.A)(e,t),(0,c.A)(e,[{key:"hassSubscribe",value:function(){var t,e=this;return[(0,y.tb)(this.hass,{key:null===(t=this._config)||void 0===t?void 0:t.collection_key}).subscribe(function(t){e._data=t})]}},{key:"getCardSize",value:function(){return 4}},{key:"setConfig",value:function(t){this._config=t}},{key:"shouldUpdate",value:function(t){return(0,b.xP)(this,t)||t.size>1||!t.has("hass")}},{key:"render",value:function(){var t,e;if(!this._config||!this.hass)return v.s6;if(!this._data)return(0,v.qy)(a||(a=(0,l.A)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.loading"));var n,i=(0,y.gv)(this._data),s=i.summedData;i.compareSummedData;if(!("from_grid"in s.total))return v.s6;var u=null!==(t=s.total.from_grid)&&void 0!==t?t:0,c=null!==(e=s.total.to_grid)&&void 0!==e?e:0;return null!==u&&null!==c&&(n=c>u?1-u/c:c<u?-1*(1-c/u):0),(0,v.qy)(r||(r=(0,l.A)([" <ha-card> "," </ha-card> "])),void 0!==n?(0,v.qy)(o||(o=(0,l.A)([' <ha-gauge min="-1" max="1" .value="','" .valueText="','" .locale="','" .levels="','" label="kWh" needle></ha-gauge> <ha-svg-icon id="info" .path="','"></ha-svg-icon> <ha-tooltip for="info" placement="left"> '," <br><br> ",' </ha-tooltip> <div class="name"> '," </div> "])),n,(0,_.ZV)(Math.abs(c-u),this.hass.locale,{maximumFractionDigits:2}),this.hass.locale,k,"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.energy_dependency"),this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.color_explain"),c>=u?this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.net_returned_grid"):this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.net_consumed_grid")):this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.grid_neutrality_not_calculated"))}}])}((0,x.E)(v.WF));M.styles=(0,v.AH)(s||(s=(0,l.A)(["ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-gauge{width:100%;max-width:250px;direction:ltr}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:var(--ha-font-size-m);margin-top:8px}ha-svg-icon{position:absolute;right:4px;inset-inline-end:4px;inset-inline-start:initial;top:4px;color:var(--secondary-text-color)}ha-tooltip::part(base__popup){margin-top:4px}"]))),(0,g.Cg)([(0,p.MZ)({attribute:!1})],M.prototype,"hass",void 0),(0,g.Cg)([(0,p.wk)()],M.prototype,"_config",void 0),(0,g.Cg)([(0,p.wk)()],M.prototype,"_data",void 0),M=(0,g.Cg)([(0,p.EM)("hui-energy-grid-neutrality-gauge-card")],M),i()}catch(S){i(S)}})},36240:function(t,e,n){n.d(e,{NN:function(){return a},S8:function(){return i},gN:function(){return r}});var i=function(t,e,n){return isNaN(t)||isNaN(e)||isNaN(n)?0:t>n?n:t<e?e:t},a=function(t,e,n){return 100*(t-e)/(n-e)},r=function(t){return Math.round(10*t)/10}},56434:function(t,e,n){n.d(e,{e:function(){return a}});var i=n(81977);function a(t,e,n){return(0,i.P)(t,12*e,n)}}}]);
//# sourceMappingURL=61294.89ba2b8b0cc7f715.js.map