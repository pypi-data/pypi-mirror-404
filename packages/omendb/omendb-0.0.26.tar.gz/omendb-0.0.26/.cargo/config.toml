# Baseline x86-64 for maximum compatibility (releases/CI)
# multiversion handles runtime dispatch to AVX2/AVX-512
#
# For local development, override with:
#   RUSTFLAGS="-C target-cpu=native" cargo build --release
# This enables 8x faster SIMD on modern CPUs.
[target.x86_64-unknown-linux-gnu]
rustflags = ["-C", "target-cpu=x86-64"]

[target.x86_64-apple-darwin]
rustflags = ["-C", "target-cpu=x86-64"]

[target.x86_64-pc-windows-msvc]
rustflags = ["-C", "target-cpu=x86-64"]

# ARM Linux - use generic baseline for cross-compilation safety
[target.aarch64-unknown-linux-gnu]
rustflags = ["-C", "target-cpu=generic"]

# Apple Silicon - native is fine (always built on ARM runners)
[target.aarch64-apple-darwin]
rustflags = ["-C", "target-cpu=native"]
