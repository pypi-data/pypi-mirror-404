"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from img_src.types import BaseModel, UNSET_SENTINEL
import pydantic
from pydantic import model_serializer
from typing import Literal, Optional
from typing_extensions import Annotated, NotRequired, TypedDict


Fit = Literal[
    "cover",
    "contain",
    "fill",
    "scale-down",
]


Format = Literal[
    "webp",
    "avif",
    "jpeg",
    "png",
]


class TransformationTypedDict(TypedDict):
    r"""Optional image transformation parameters"""

    width: NotRequired[int]
    height: NotRequired[int]
    fit: NotRequired[Fit]
    quality: NotRequired[int]
    format_: NotRequired[Format]


class Transformation(BaseModel):
    r"""Optional image transformation parameters"""

    width: Optional[int] = None

    height: Optional[int] = None

    fit: Optional[Fit] = None

    quality: Optional[int] = None

    format_: Annotated[Optional[Format], pydantic.Field(alias="format")] = None

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = set(["width", "height", "fit", "quality", "format"])
        serialized = handler(self)
        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)

            if val != UNSET_SENTINEL:
                if val is not None or k not in optional_fields:
                    m[k] = val

        return m


class CreateSignedURLRequestTypedDict(TypedDict):
    expires_in_seconds: NotRequired[int]
    r"""Expiration time in seconds (60-86400, default 3600)"""
    transformation: NotRequired[TransformationTypedDict]
    r"""Optional image transformation parameters"""


class CreateSignedURLRequest(BaseModel):
    expires_in_seconds: Optional[int] = 3600
    r"""Expiration time in seconds (60-86400, default 3600)"""

    transformation: Optional[Transformation] = None
    r"""Optional image transformation parameters"""

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = set(["expires_in_seconds", "transformation"])
        serialized = handler(self)
        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)

            if val != UNSET_SENTINEL:
                if val is not None or k not in optional_fields:
                    m[k] = val

        return m
