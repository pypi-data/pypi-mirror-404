"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from .credits import Credits, CreditsTypedDict
from .currentperiod import CurrentPeriod, CurrentPeriodTypedDict
from .planlimits import PlanLimits, PlanLimitsTypedDict
from img_src.types import BaseModel, Nullable, UNSET_SENTINEL
from pydantic import model_serializer
from typing import Literal
from typing_extensions import TypedDict


PlanStatus = Literal[
    "active",
    "cancelling",
    "expired",
]
r"""Current plan status"""


class UsageResponseTypedDict(TypedDict):
    plan: str
    r"""User's plan ID"""
    plan_name: str
    r"""Human-readable plan name"""
    plan_status: PlanStatus
    r"""Current plan status"""
    subscription_ends_at: Nullable[int]
    r"""Unix timestamp when subscription ends (for cancelling plans)"""
    plan_limits: PlanLimitsTypedDict
    total_images: int
    r"""Total images (lifetime)"""
    storage_used_bytes: int
    r"""Total storage used in bytes"""
    storage_used_mb: float
    r"""Total storage used in MB"""
    storage_used_gb: float
    r"""Total storage used in GB"""
    current_period: CurrentPeriodTypedDict
    credits: CreditsTypedDict


class UsageResponse(BaseModel):
    plan: str
    r"""User's plan ID"""

    plan_name: str
    r"""Human-readable plan name"""

    plan_status: PlanStatus
    r"""Current plan status"""

    subscription_ends_at: Nullable[int]
    r"""Unix timestamp when subscription ends (for cancelling plans)"""

    plan_limits: PlanLimits

    total_images: int
    r"""Total images (lifetime)"""

    storage_used_bytes: int
    r"""Total storage used in bytes"""

    storage_used_mb: float
    r"""Total storage used in MB"""

    storage_used_gb: float
    r"""Total storage used in GB"""

    current_period: CurrentPeriod

    credits: Credits

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        serialized = handler(self)
        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)

            if val != UNSET_SENTINEL:
                m[k] = val

        return m
