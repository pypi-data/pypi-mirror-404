{
  "name": "Arc Positioned Circles",
  "description": "Places circular milestones along an arc projected from below the viewport.",
  "properties": {
    "canvas": {
      "width": 1280,
      "height": 640
    },
    "arc_span": 140,
    "start_angle": 20,
    "radius": 460,
    "arc_offset": 60,
    "bubble_radius": 48,
    "radius_label_offset": 72,
    "font_family": "Inter, Arial, sans-serif",
    "label_color": "#0f172a",
    "value_color": "#1e3a8a",
    "palette": [
      "#0ea5e9",
      "#38bdf8",
      "#22d3ee",
      "#06b6d4",
      "#0284c7"
    ],
    "background": "#f0f9ff"
  },
  "schema": {
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "type": "object",
    "title": "Arc milestones payload",
    "description": "Top-level payload containing the milestone collection and optional metadata.",
    "required": [
      "items"
    ],
    "properties": {
      "items": {
        "type": "array",
        "minItems": 1,
        "maxItems": 12,
        "items": {
          "type": "object",
          "required": [
            "label",
            "value"
          ],
          "additionalProperties": false,
          "properties": {
            "label": {
              "type": "string",
              "description": "Milestone name rendered above the circle."
            },
            "value": {
              "type": "string",
              "description": "Timeline position text displayed inside the milestone."
            }
          }
        }
      },
      "metadata": {
        "type": "object",
        "description": "Optional details shared with downstream consumers.",
        "additionalProperties": true
      }
    }
  },
  "template": [
    {
      "type": "rect",
      "attributes": {
        "x": "0",
        "y": "0",
        "width": "100%",
        "height": "100%",
        "fill": "{background}"
      }
    },
    {
      "type": "g",
      "repeat": {
        "items": "items",
        "as": "entry"
      },
      "let": {
        "label": "entry.label",
        "value": "entry.value",
        "center_x": "canvas.width / 2",
        "center_y": "canvas.height + arc_offset",
        "step": "arc_span / max(__total__ - 1, 1)",
        "angle": "start_angle + __index__ * step",
        "angle_rad": "angle * Math.pi / 180",
        "cx": "center_x + radius * Math.cos(angle_rad)",
        "cy": "center_y - radius * Math.sin(angle_rad)",
        "fill_color": "palette[__index__ % palette.length]",
        "label_y": "cy - radius_label_offset"
      },
      "children": [
        {
          "type": "circle",
          "attributes": {
            "cx": "{cx}",
            "cy": "{cy}",
            "r": "{bubble_radius}",
            "fill": "{fill_color}",
            "opacity": "0.92"
          }
        },
        {
          "type": "text",
          "attributes": {
            "x": "{cx}",
            "y": "{label_y}",
            "fill": "{label_color}",
            "fontFamily": "{font_family}",
            "fontSize": "22",
            "fontWeight": "600",
            "textAnchor": "middle"
          },
          "text": "{label}"
        },
        {
          "type": "text",
          "attributes": {
            "x": "{cx}",
            "y": "{cy + 6}",
            "fill": "{value_color}",
            "fontFamily": "{font_family}",
            "fontSize": "20",
            "textAnchor": "middle",
            "dominantBaseline": "middle"
          },
          "text": "{value}"
        }
      ]
    }
  ]
}
