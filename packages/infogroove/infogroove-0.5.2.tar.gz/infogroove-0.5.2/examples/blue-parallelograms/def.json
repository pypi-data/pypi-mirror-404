{
  "name": "Blue Parallelogram Bands",
  "description": "Displays adjacent skewed bands with tonal blue fills.",
  "properties": {
    "canvas": {
      "width": 1200,
      "height": 420
    },
    "margin_top": 48,
    "margin_bottom": 48,
    "margin_left": 40,
    "margin_right": 40,
    "skew": 28,
    "font_family": "Inter, Arial, sans-serif",
    "title_color": "#0f172a",
    "value_color": "#1e3a8a",
    "colors": [
      "#1d4ed8",
      "#2563eb",
      "#3b82f6",
      "#60a5fa",
      "#93c5fd"
    ],
    "background": "#f8fafc"
  },
  "schema": {
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "type": "object",
    "title": "Parallelogram band payload",
    "description": "Top-level payload that contains the bands collection and optional secondary series.",
    "required": [
      "items"
    ],
    "properties": {
      "items": {
        "type": "array",
        "minItems": 1,
        "maxItems": 8,
        "items": {
          "type": "object",
          "required": [
            "title",
            "value"
          ],
          "additionalProperties": false,
          "properties": {
            "title": {
              "type": "string",
              "description": "Headline label shown at the top of the band."
            },
            "value": {
              "type": ["number", "string"],
              "description": "Secondary figure rendered beneath the title."
            },
            "values": {
              "type": "array",
              "description": "Optional series values for downstream consumers.",
              "items": {
                "type": "number"
              }
            },
            "points": {
              "type": "array",
              "description": "Optional precomputed polygon points when overriding geometry.",
              "items": {
                "type": "object",
                "required": ["x", "y"],
                "additionalProperties": false,
                "properties": {
                  "x": {"type": "number"},
                  "y": {"type": "number"}
                }
              }
            }
          }
        }
      },
      "items2": {
        "type": "array",
        "description": "Optional secondary collection that agents may use for comparisons.",
        "items": {
          "type": "object",
          "properties": {
            "title": {"type": "string"},
            "value": {"type": ["number", "string"]}
          },
          "additionalProperties": true
        }
      }
    }
  },
  "template": [
    {
      "type": "rect",
      "attributes": {
        "x": "0",
        "y": "0",
        "width": "100%",
        "height": "100%",
        "fill": "{background}"
      }
    },
    {
      "type": "g",
      "repeat": {
        "items": "items",
        "as": "entry"
      },
      "let": {
        "title": "entry.title",
        "value": "entry.value",
        "bar_width": "(canvas.width - margin_left - margin_right - skew) / max(__total__, 1)",
        "x": "margin_left + __index__ * bar_width",
        "top_y": "margin_top",
        "bottom_y": "canvas.height - margin_bottom",
        "color_index": "__index__ % colors.length",
        "fill_color": "colors[color_index]",
        "points": "{x},{top_y} {x + bar_width},{top_y} {x + bar_width + skew},{bottom_y} {x + skew},{bottom_y}",
        "label_x": "x + (bar_width + skew) / 2",
        "label_y": "top_y + 44",
        "value_y": "label_y + 30"
      },
      "children": [
        {
          "type": "polygon",
          "attributes": {
            "points": "{points}",
            "fill": "{fill_color}"
          }
        },
        {
          "type": "text",
          "attributes": {
            "x": "{label_x}",
            "y": "{label_y}",
            "fill": "{title_color}",
            "fontFamily": "{font_family}",
            "fontSize": "24",
            "fontWeight": "600",
            "textAnchor": "middle"
          },
          "text": "{title}"
        },
        {
          "type": "text",
          "attributes": {
            "x": "{label_x}",
            "y": "{value_y}",
            "fill": "{value_color}",
            "fontFamily": "{font_family}",
            "fontSize": "18",
            "textAnchor": "middle"
          },
          "text": "{value}"
        }
      ]
    }
  ]
}
