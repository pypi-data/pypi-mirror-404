# Agent Builder Rules

> How we create specialized AI agents for this codebase.

## Purpose

The agent-builder creates custom AGENTS.md profiles by analyzing the codebase, PRs, and review patterns to capture institutional knowledge.

## What to Gather

1. **Related PRs** - Find PRs related to the agent's purpose using keyword search
2. **Review Patterns** - What reviewers consistently care about (from APPROVED reviews)
3. **Anti-Patterns** - Things from REQUEST_CHANGES reviews that should be avoided
4. **Domain Experts** - Authors and reviewers with most activity in the area
5. **Code Communities** - Clustered areas of related code in the graph
6. **Entry Points** - Key files and functions relevant to the purpose

## AGENTS.md Format

The output should be Claude Code CLAUDE.md compatible:

```markdown
# <agent-name>

## Purpose
Single paragraph defining what this agent does and specializes in.

## Knowledge Context
### Code Areas
- Community descriptions from graph analysis

### Key Files
- List of relevant file paths

## Hints
1. Best practice from approved reviews
2. Specific, actionable advice (not generic)
...

## Things to Avoid
- (PR #N, @reviewer) Feedback from CHANGES_REQUESTED reviews
...

## Related PRs
- **PR #N**: Title (by @author)
...

## Domain Experts
- @username (N PRs in this area)
...

## MCP Tools
Reference to mcp.json tools.
```

## Exploration Strategy

1. Start with semantic search for the agent's purpose
2. Use github_search_prs to find related PRs
3. For top PRs, extract review comments with github_pr_details
4. Find communities that contain the relevant code
5. Identify top contributors from PR authors

## Hint Quality Guidelines

Good hints are:
- Specific to this codebase (reference actual patterns)
- Actionable (tell the agent what TO DO)
- Derived from real review feedback
- Concise (1-2 sentences each)

Bad hints:
- Generic advice ("write good tests")
- Vague guidance ("follow best practices")
- Not backed by PR evidence

## Things to Avoid

- Generic hints that apply to any project
- Listing every file touched (focus on patterns)
- Ignoring negative feedback (REQUEST_CHANGES are valuable)
- Creating duplicate entries
