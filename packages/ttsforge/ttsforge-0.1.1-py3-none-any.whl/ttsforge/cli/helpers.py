"""Shared utilities and helpers for CLI commands."""

from rich.console import Console

# Shared console instance for all CLI commands
console = Console()


def parse_voice_parameter(voice: str) -> tuple[str | None, str | None]:
    """Parse voice parameter to detect if it's a single voice or a blend.

    Args:
        voice: Voice parameter (e.g., 'af_sky' or 'af_nicole:50,am_michael:50')

    Returns:
        Tuple of (voice, voice_blend) where one will be None

    Examples:
        >>> parse_voice_parameter('af_sky')
        ('af_sky', None)
        >>> parse_voice_parameter('af_nicole:50,am_michael:50')
        (None, 'af_nicole:50,am_michael:50')
    """
    # Detect if it's a blend (contains both : and ,)
    if ":" in voice and "," in voice:
        return (None, voice)
    else:
        return (voice, None)


def get_version() -> str:
    """Get the package version."""
    try:
        from .._version import version

        return version
    except ImportError:
        return "0.0.0+unknown"


# Default sample text for testing TTS settings
DEFAULT_SAMPLE_TEXT = (
    "The quick brown fox jumps over the lazy dog. "
    "This sample text demonstrates the text-to-speech capabilities, "
    "including punctuation handling, and natural speech flow."
)


# Demo sample text per language
DEMO_TEXT = {
    "a": "Hello! This audio was generated by {voice}. How do you like it?",
    "b": "Hello! This audio was generated by {voice}. How do you like it?",
    "e": "Hola! Este audio fue generado por {voice}. Que te parece?",
    "f": "Bonjour! Cet audio a ete genere par {voice}. Comment le trouvez-vous?",
    "h": "Namaste! Yah audio {voice} dwara banaya gaya hai. Aapko kaisa laga?",
    "i": "Ciao! Questo audio e stato generato da {voice}. Ti piace?",
    "j": "Konnichiwa! Kono onsei wa {voice} ni yotte sakusei saremashita.",
    "p": "Ola! Este audio foi gerado por {voice}. O que voce achou?",
    "z": "Ni hao! Zhe ge yinpin shi you {voice} shengcheng de.",
}

# Preset voice blends for demo command
# Format: (blend_string, description)
VOICE_BLEND_PRESETS = [
    # Same language, different gender
    ("af_nicole:50,am_michael:50", "American female + male blend"),
    ("bf_emma:50,bm_george:50", "British female + male blend"),
    # Same gender, different accent
    ("af_heart:50,bf_emma:50", "American + British female blend"),
    ("am_adam:50,bm_daniel:50", "American + British male blend"),
    # Same gender, different voice
    ("af_nicole:50,af_bella:50", "Two American females blend"),
    ("am_adam:50,am_eric:50", "Two American males blend"),
    # Multi-voice blend
    ("af_heart:33,af_nicole:33,af_bella:34", "Three American females blend"),
]
