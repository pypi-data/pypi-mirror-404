(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6556],{80396:function(e,t,o){var l=o(79867),i=o(78859);e.exports=function(e,t,o,n){return i(e,t,o(l(e,t)),n)}},62079:function(e,t,o){var l=o(31137);e.exports=function(e){return"function"==typeof e?e:l}},47215:function(e,t,o){var l=o(78859);e.exports=function(e,t,o){return null==e?e:l(e,t,o)}},90271:function(e,t,o){var l=o(80396),i=o(62079);e.exports=function(e,t,o){return null==e?e:l(e,t,i(o))}},59972:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[datasetId]/[collectionName]",function(){return o(47355)}])},12627:function(e,t,o){"use strict";var l=o(24246),i=o(79283),n=o(34929);t.Z=e=>{let{selectedTaxonomies:t,showDisabled:o=!1,...a}=e,{getDataCategoryDisplayNameProps:s,getDataCategories:d}=(0,n.Z)(),r=(o?d():d().filter(e=>e.active)).filter(e=>!(null==t?void 0:t.includes(e.fides_key))).map(e=>{let{name:t,primaryName:o}=s(e.fides_key);return{value:e.fides_key,name:t,primaryName:o,description:e.description||"",label:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("strong",{children:o||t}),o&&": ".concat(t)]}),title:e.fides_key}});return(0,l.jsx)(i.l,{options:r,...a})}},66112:function(e,t,o){"use strict";var l=o(24246),i=o(36010),n=o(27378),a=o(12627),s=o(34929),d=o(26183);t.Z=e=>{let{selectedTaxonomies:t,onAddTaxonomy:o,onRemoveTaxonomy:r}=e,[c,u]=(0,n.useState)(!1),{getDataCategoryDisplayName:f}=(0,s.Z)();return(0,l.jsxs)(d.Z,{children:[t.map(e=>(0,l.jsx)(i.Vp9,{"data-testid":"classification-".concat(e),color:"white",closable:!0,onClose:()=>r(e),closeButtonLabel:"Remove category",children:f(e)},e)),(0,l.jsx)(i.Vp9,{onClick:()=>u(!0),"data-testid":"add-category-btn",addable:!0,"aria-label":"Add category"}),c&&(0,l.jsx)(i.TJV,{className:"select-wrapper",position:"absolute",zIndex:10,top:"0",left:"0",width:"100%",height:"max",bgColor:"#fff",children:(0,l.jsx)(a.Z,{selectedTaxonomies:t,onChange:e=>{u(!1),o(e)},onBlur:()=>u(!1),open:c})})]})}},76252:function(e,t,o){"use strict";var l=o(24246),i=o(36010),n=o(30454),a=o.n(n),s=o(47215),d=o.n(s),r=o(90271),c=o.n(r),u=o(79806),f=o(20386),m=o(63927),h=o(69435);t.Z=e=>{let{field:t,isOpen:o,onClose:n,dataset:s,collectionName:r,subfields:x}=e,[g]=(0,f.TG)(),{isOpen:p,onOpen:v,onClose:j}=(0,i.E2M)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.ZP,{isOpen:o,onClose:n,description:"Fields are an array of objects that describe the collection's fields. Provide additional context to this field by filling out the fields below.",header:(0,l.jsx)(u.zR,{title:"Field Name: ".concat(null==t?void 0:t.name)}),footer:(0,l.jsx)(u.Gn,{onClose:n,onDelete:v,formId:m.e}),children:(0,l.jsx)(m.Z,{values:t,onSubmit:e=>{let o=(0,h.Fk)({dataset:s,collectionName:r,subfields:x?[...x,(null==t?void 0:t.name)||""]:[(null==t?void 0:t.name)||""]}),l={...t,...e},i=a()(s);d()(i,o,l),g(i),n()},dataType:"field"})}),(0,l.jsx)(i.cVQ,{isOpen:p,onClose:j,onConfirm:()=>{let e=(0,h.Fk)({dataset:s,collectionName:r,subfields:x}),o=a()(s);c()(o,e,e=>({...e,fields:e.fields.filter(e=>e.name!==(null==t?void 0:t.name))})),g(o),n(),j()},title:"Delete Field",message:(0,l.jsxs)(i.Bjg,{children:["You are about to permanently delete the field named"," ",(0,l.jsx)(i.Bjg,{color:"complimentary.500",as:"span",fontWeight:"bold",children:null==t?void 0:t.name})," ","from this dataset. Are you sure you would like to continue?"]})})]})}},47355:function(e,t,o){"use strict";o.r(t);var l=o(24246),i=o(92222),n=o(59003),a=o(36010),s=o(86677),d=o(27378),r=o(59849),c=o(77213),u=o(77830),f=o(58754),m=o(15793),h=o(66112),x=o(69828),g=o(41966),p=o(76252),v=o(69435);let j=(0,i.Cl)(),b=()=>(0,l.jsx)(a.s_g,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,l.jsx)(a.s_g,{children:(0,l.jsx)(a.Bjg,{fontSize:"md",fontWeight:"600",children:"No fields found."})})});t.default=()=>{let e=(0,s.useRouter)(),[t]=(0,g.TG)(),o=decodeURIComponent(e.query.datasetId),C=decodeURIComponent(e.query.collectionName),{isLoading:w,data:_,error:y}=(0,g.oM)(o),R=(0,d.useMemo)(()=>(null==_?void 0:_.collections)||[],[_]),k=R.find(e=>e.name===C),N=(0,d.useMemo)(()=>(null==k?void 0:k.fields)||[],[k]),[Z,I]=(0,d.useState)(),M=(0,d.useCallback)(e=>{let{dataCategory:o,field:l}=e,i=l.data_categories||[],n={...l,data_categories:[...i,o]},a=R.indexOf(k),s=k.fields.indexOf(l);t((0,v._n)(_,n,a,s))},[k,R,_,t]),T=(0,d.useCallback)(e=>{var o;let{dataCategory:l,field:i}=e,n={...i,data_categories:null===(o=i.data_categories)||void 0===o?void 0:o.filter(e=>e!==l)},a=R.indexOf(k),s=k.fields.indexOf(i);t((0,v._n)(_,n,a,s))},[k,R,_,t]),O=(0,d.useCallback)(t=>{e.push({pathname:u.y1,query:{datasetId:encodeURIComponent(o),collectionName:encodeURIComponent(C),subfieldNames:encodeURIComponent(t.name)}})},[o,e,C]),F=(0,d.useMemo)(()=>[j.accessor(e=>e.name,{id:"name",cell:e=>{var t;let o=e.row.original.fields&&(null===(t=e.row.original.fields)||void 0===t?void 0:t.length)>0;return(0,l.jsx)(m.G3,{fontWeight:o?"semibold":"normal",value:e.getValue()})},header:e=>(0,l.jsx)(m.Rr,{value:"Field Name",...e}),size:180}),j.accessor(e=>{var t;return null===(t=e.fides_meta)||void 0===t?void 0:t.data_type},{id:"type",cell:e=>e.getValue()?(0,l.jsx)(m.A4,{value:e.getValue()}):(0,l.jsx)(m.G3,{value:void 0}),header:e=>(0,l.jsx)(m.Rr,{value:"Type",...e}),size:80}),j.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(m.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(m.Rr,{value:"Description",...e}),size:300,meta:{showHeaderMenu:!0}}),j.accessor(e=>e.data_categories,{id:"data_categories",cell:e=>{var t;let o=e.row.original;return!(e.row.original.fields&&(null===(t=e.row.original.fields)||void 0===t?void 0:t.length)>0)&&(0,l.jsx)(h.Z,{selectedTaxonomies:e.getValue()||[],onAddTaxonomy:e=>M({dataCategory:e,field:o}),onRemoveTaxonomy:e=>T({dataCategory:e,field:o})})},header:e=>(0,l.jsx)(m.Rr,{value:"Data categories",...e}),size:300,meta:{disableRowClick:!0}}),j.display({id:"actions",header:"Actions",cell:e=>{let{row:t}=e,o=t.original;return(0,l.jsx)(a.Br$,{spacing:0,"data-testid":"field-".concat(o.name),children:(0,l.jsx)(a.zxk,{size:"small",icon:(0,l.jsx)(a.oji,{}),onClick:()=>{G(o),A(!0)},children:"Edit"})})},meta:{disableRowClick:!0}})],[M,T]),z=(0,d.useMemo)(()=>Z?N.filter(e=>e.name.toLowerCase().includes(Z.toLowerCase())):N,[N,Z]),V=(0,n.b7)({getCoreRowModel:(0,i.sC)(),getFilteredRowModel:(0,i.vL)(),getSortedRowModel:(0,i.tj)(),columns:F,data:z,columnResizeMode:"onChange"}),[S,A]=(0,d.useState)(!1),[E,G]=(0,d.useState)(),B=(0,d.useMemo)(()=>[{title:"All datasets",href:u.$m},{title:o,href:{pathname:u.o5,query:{datasetId:o}},icon:x.Y[1]},{title:C,icon:x.Y[2]}],[o,C]);return y?(0,l.jsx)(r.Z,{error:y,defaultMessage:"A problem occurred while fetching fields for collection ".concat(C),actions:[{label:"Return to datasets",onClick:()=>e.push(u.$m)}]}):(0,l.jsxs)(c.Z,{title:"Dataset - ".concat(o),children:[(0,l.jsx)(f.Z,{heading:"Datasets",breadcrumbItems:B}),w?(0,l.jsx)(m.I4,{rowHeight:36,numRows:15}):(0,l.jsxs)(a.TJV,{"data-testid":"fields-table",children:[(0,l.jsx)(m.Q$,{children:(0,l.jsx)(m.HO,{globalFilter:Z,setGlobalFilter:I,placeholder:"Search",testid:"fields-search"})}),(0,l.jsx)(m.ZK,{tableInstance:V,emptyTableNotice:(0,l.jsx)(b,{}),onRowClick:O,getRowIsClickable:e=>{var t;return!!(e.fields&&(null===(t=e.fields)||void 0===t?void 0:t.length)>0)}}),(0,l.jsx)(p.Z,{isOpen:S,onClose:()=>{A(!1),G(void 0)},field:E,dataset:_,collectionName:C})]})]})}}},function(e){e.O(0,[454,409,343,2888,9774,179],function(){return e(e.s=59972)}),_N_E=e.O()}]);