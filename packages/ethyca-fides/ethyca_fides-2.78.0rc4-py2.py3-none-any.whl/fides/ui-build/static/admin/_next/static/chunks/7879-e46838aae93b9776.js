(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7879],{46008:function(e,t,n){var s=n(50517)("length");e.exports=s},85630:function(e){e.exports=function(e){return e.split("")}},280:function(e,t,n){var s=n(99736),i=n(92360);e.exports=function(e){return i(e)&&"[object RegExp]"==s(e)}},75733:function(e){e.exports=function(e,t,n){var s=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var r=Array(i);++s<i;)r[s]=e[s+t];return r}},39158:function(e,t,n){var s=n(75733);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:s(e,t,n)}},25348:function(e){var t=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},64090:function(e,t,n){var s=n(46008),i=n(25348),r=n(44088);e.exports=function(e){return i(e)?r(e):s(e)}},63528:function(e,t,n){var s=n(85630),i=n(25348),r=n(84890);e.exports=function(e){return i(e)?r(e):s(e)}},44088:function(e){var t="\ud800-\udfff",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",s="\ud83c[\udffb-\udfff]",i="[^"+t+"]",r="(?:\ud83c[\udde6-\uddff]){2}",a="[\ud800-\udbff][\udc00-\udfff]",l="(?:"+n+"|"+s+")?",o="[\\ufe0e\\ufe0f]?",d="(?:\\u200d(?:"+[i,r,a].join("|")+")"+o+l+")*",u=RegExp(s+"(?="+s+")|(?:"+[i+n+"?",n,r,a,"["+t+"]"].join("|")+")"+(o+l+d),"g");e.exports=function(e){for(var t=u.lastIndex=0;u.test(e);)++t;return t}},84890:function(e){var t="\ud800-\udfff",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",s="\ud83c[\udffb-\udfff]",i="[^"+t+"]",r="(?:\ud83c[\udde6-\uddff]){2}",a="[\ud800-\udbff][\udc00-\udfff]",l="(?:"+n+"|"+s+")?",o="[\\ufe0e\\ufe0f]?",d="(?:\\u200d(?:"+[i,r,a].join("|")+")"+o+l+")*",u=RegExp(s+"(?="+s+")|(?:"+[i+n+"?",n,r,a,"["+t+"]"].join("|")+")"+(o+l+d),"g");e.exports=function(e){return e.match(u)||[]}},95280:function(e,t,n){var s=n(280),i=n(39334),r=n(18125),a=r&&r.isRegExp,l=a?i(a):s;e.exports=l},26092:function(e,t,n){var s=n(34282),i=n(39158),r=n(25348),a=n(11611),l=n(95280),o=n(64090),d=n(63528),u=n(47991),c=n(65567),f=/\w*$/;e.exports=function(e,t){var n=30,m="...";if(a(t)){var h="separator"in t?t.separator:h;n="length"in t?u(t.length):n,m="omission"in t?s(t.omission):m}var x=(e=c(e)).length;if(r(e)){var p=d(e);x=p.length}if(n>=x)return e;var v=n-o(m);if(v<1)return m;var g=p?i(p,0,v).join(""):e.slice(0,v);if(void 0===h)return g+m;if(p&&(v+=g.length-v),l(h)){if(e.slice(v).search(h)){var y,j=g;for(h.global||(h=RegExp(h.source,c(f.exec(h))+"g")),h.lastIndex=0;y=h.exec(j);)var b=y.index;g=g.slice(0,void 0===b?v:b)}}else if(e.indexOf(s(h),v)!=v){var w=g.lastIndexOf(h);w>-1&&(g=g.slice(0,w))}return g+m}},30952:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});var s=n(24246),i=n(26917);let r=e=>{let{...t}=e;return(0,s.jsx)(i.Z,{debounce:!0,...t})}},29850:function(e,t,n){"use strict";n.d(t,{R:function(){return u}});var s=n(24246),i=n(36010),r=n(27378),a=n(65450);let l=e=>{let{children:t,className:n,style:r,...a}=e;return(0,s.jsx)(i.zxk,{...a,type:"text",className:"w-full justify-start ".concat(n),style:{fontWeight:600,padding:"var(--ant-select-option-padding)",backgroundColor:"var(--ant-select-option-selected-bg)",...r},children:t})};var o=n(16394);let d=(e,t)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l,{onClick:t,"data-testid":"add-new-system",id:"add-new-system",children:"Add new system +"}),e]}),u=e=>{var t;let{onAddSystem:n,...l}=e,[u,c]=(0,r.useState)(),{data:f,isFetching:m}=(0,a.xF)({page:1,size:25,search:u||void 0}),h=null==f?void 0:null===(t=f.items)||void 0===t?void 0:t.map(e=>({value:e.fides_key,label:e.name})),x=(0,r.useCallback)(e=>{(null==e?void 0:e.length)>1&&c(e),(null==e?void 0:e.length)===0&&c(void 0)},[c]),p=(0,r.useMemo)(()=>(0,o.Ds)(x,300),[x]);return(0,s.jsx)(i.PhF,{placeholder:"Search...","aria-label":"Search for a system to select",popupRender:n?e=>d(e,n):void 0,"data-testid":"system-select",...l,styles:{popup:{root:{minWidth:"500px"}},...l.styles},filterOption:!1,options:h,onSearch:p,loading:l.loading||m})}},77685:function(e,t,n){"use strict";n.d(t,{i:function(){return S}});var s=n(24246),i=n(36010),r=n(34090),a=n(27378),l=n(55484),o=n(16134),d=n(25980),u=n(97181),c=n(40324),f=n(812),m=n(17245),h=n(45938),x=n(8133),p=n(33335),v=n(32885),g=n(57865),y=n(93237),j=n(65450),b=n(36345);let{Text:w}=i.Typography,k={name:"",vendor_id:void 0,description:"",tags:[]},S=e=>{let{onSuccessfulSubmit:t,toastOnSuccess:n,...S}=e,[_,C]=(0,a.useState)(!1),I=(0,o.T)(),{tcf:R,dictionaryService:E}=(0,d.hz)(),{isLoading:z}=(0,v.Rd)(void 0,{skip:!E}),N=(0,o.C)(v.o),T=(0,o.C)(g.gU),[B]=(0,j.in)(),[D]=(0,v.Qk)(),[F]=(0,j.f7)(),{successAlert:$,errorAlert:q}=(0,m.VY)(),{setSuggestions:V,setLockedForGVL:A}=g.dictSuggestionsSlice.actions,G=(0,a.useRef)(null),W=(0,a.useMemo)(()=>l.Ry().shape({name:l.Z_().required().label("System name").test("is-unique","",async(e,t)=>{let{data:n}=await B({page:1,size:10,search:e});return!((null==n?void 0:n.items)||[]).filter(t=>t.name===e).some(t=>t.name===e)||t.createError({message:'You already have a system called "'.concat(e,'". Please specify a unique name for this system.')})})}),[B]),M=e=>{if(E){if(!e){I(V("hiding")),I(A(!1));return}I(V("showing")),R&&(0,f.cj)(e)===f.c6.GVL?I(A(!0)):I(A(!1))}},O=()=>{S.onClose(),I(V("initial")),I(A(!1))},Z=async e=>{if(C(!0),e.vendor_id){let s=await D([e.vendor_id]);if((0,f.D4)(s))q((0,f.e$)(s.error));else{let{data:e}=s,i=e.systems[0];null==t||t(i.fides_key,i.name),n&&$("".concat(e.name," has been added to your system inventory.")),O()}}else{let s={...e,fides_key:(0,p.E)(e.name),system_type:"",body:"",privacy_declarations:[]},i=await F(s);if((0,f.D4)(i))q((0,f.e$)(i.error));else{let{fides_key:s,name:r}=i.data;null==t||t(s,r),n&&$("".concat(e.name," has been added to your system inventory."))}O()}C(!1)};return(0,s.jsx)(x.Z,{title:"Add New System",...S,onClose:O,children:(0,s.jsx)(r.J9,{initialValues:k,onSubmit:Z,validationSchema:W,innerRef:G,children:e=>{let{dirty:t,isValid:n}=e;return(0,s.jsxs)(r.l0,{children:[(0,s.jsx)(h.Gt,{id:"new-system-modal",name:"Add New System"}),(0,s.jsxs)(i.kCb,{vertical:!0,gap:20,className:"pb-6 pt-4",children:[(0,s.jsx)(w,{children:"Fides will add this system to your inventory and configure it for consent using the categories of consent listed below. Optionally, you can check if this system is listed within the Fides compass library by selecting the compass icon below."}),E?(0,s.jsx)(b.Z,{label:"System name",options:N,onVendorSelected:M,isCreate:!0,lockedForGVL:T,isLoading:z}):(0,s.jsx)(c.j0,{id:"name",name:"name",label:"System name",tooltip:"Give the system a unique, and relevant name for reporting purposes. e.g. “Email Data Warehouse”",variant:"stacked",isRequired:!0}),(0,s.jsx)(y.Sv,{id:"description",name:"description",label:"Description",tooltip:"What services does this system perform?",disabled:T}),(0,s.jsx)(u.d,{mode:"tags",id:"tags",name:"tags",label:"System Tags",options:[],layout:"stacked",tooltip:"Are there any tags to associate with this system?",disabled:T})]}),(0,s.jsxs)(i.kCb,{justify:"space-between",children:[(0,s.jsx)(i.zxk,{htmlType:"reset",onClick:O,"data-testid":"cancel-btn",children:"Cancel"}),(0,s.jsx)(i.zxk,{htmlType:"submit",type:"primary",disabled:z||!t||!n,loading:_,"data-testid":"save-btn",children:"Save"})]})]})}})})}},93237:function(e,t,n){"use strict";n.d(t,{Sv:function(){return h},Yb:function(){return m},dQ:function(){return x},lm:function(){return p}});var s=n(24246),i=n(36010),r=n(34090),a=n(27378),l=n(16134),o=n(40324),d=n(46238),u=n(32885),c=n(57865);let f=(e,t,n)=>{var s,i;let[o,d,{setValue:f,setTouched:m}]=(0,r.U$)({name:e,type:n||void 0}),h=!!(d.touched&&d.error),{error:x}=d,p={...o,value:null!==(s=o.value)&&void 0!==s?s:""},[v,g]=(0,a.useState)(null!==(i=p.value)&&void 0!==i?i:""),{values:y}=(0,r.u6)(),{vendor_id:j}=y,b=(0,l.C)((0,u.$e)(j||"")),w=(0,l.C)(c.bN),k=(0,a.useRef)(null);return(0,a.useEffect)(()=>{"showing"===w&&g(p.value)},[w,g]),(0,a.useEffect)(()=>{if("showing"===w&&b){let n=t?t(b):b[e];p.value!==n&&(f(n),setTimeout(()=>{var e;m(!0),null===(e=k.current)||void 0===e||e.blur()},300))}},[w,f,b,k.current]),(0,a.useEffect)(()=>{"hiding"===w&&f(v)},[w,f,v]),{field:p,isInvalid:h,isShowingSuggestions:w,error:x,inputRef:k}},m=e=>{let{label:t,tooltip:n,disabled:r,isRequired:a=!1,dictField:l,name:u,placeholder:c,id:m}=e,{field:h,isInvalid:x,isShowingSuggestions:p,error:v,inputRef:g}=f(u,l);return(0,s.jsx)(i.DTt,{isInvalid:x,isRequired:a,children:(0,s.jsxs)(i.s_g,{alignItems:"start",children:[(0,s.jsxs)(i.ad9,{alignItems:"center",children:[(0,s.jsx)(o.__,{htmlFor:m||u,fontSize:"xs",my:0,mr:1,children:t}),(0,s.jsx)(d.b,{label:n})]}),(0,s.jsx)(o.oi,{...h,ref:g,isRequired:a,isDisabled:r,"data-testid":"input-".concat(h.name),placeholder:c,isPassword:!1,color:"showing"===p?"complimentary.500":"gray.800"}),(0,s.jsx)(o.Bc,{isInvalid:x,message:v,fieldName:h.name})]})})},h=e=>{let{label:t,tooltip:n,disabled:r,isRequired:a=!1,dictField:l,name:u,id:c}=e,{field:m,isInvalid:h,isShowingSuggestions:x,error:p}=f(u,l);return(0,s.jsx)(i.DTt,{isInvalid:h,isRequired:a,children:(0,s.jsxs)(i.s_g,{alignItems:"start",children:[(0,s.jsxs)(i.ad9,{alignItems:"center",children:[(0,s.jsx)(o.__,{htmlFor:c||u,fontSize:"xs",my:0,mr:1,children:t}),(0,s.jsx)(d.b,{label:n})]}),(0,s.jsx)(i.$gm,{...m,size:"sm","data-testid":"input-".concat(m.name),focusBorderColor:"primary.600",color:"showing"===x?"complimentary.500":"gray.800",isDisabled:r}),(0,s.jsx)(o.Bc,{isInvalid:h,message:p,fieldName:m.name})]})})},x=e=>{let{label:t,tooltip:n,dictField:a,name:l,id:u,disabled:c}=e,{field:m,isInvalid:h,error:x}=f(l,a,"checkbox");return(0,s.jsxs)(i.DTt,{isInvalid:h,width:"full",children:[(0,s.jsxs)(i.TJV,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,s.jsxs)(i.Br$,{spacing:1,children:[(0,s.jsx)(o.__,{htmlFor:u||l,fontSize:"xs",my:0,mr:0,children:t}),(0,s.jsx)(d.b,{label:n})]}),(0,s.jsx)(i.Br$,{children:(0,s.jsx)(r.gN,{name:m.name,children:e=>{let{form:{setFieldValue:t}}=e;return(0,s.jsx)(i.rsf,{checked:m.checked,onChange:e=>{t(m.name,e)},disabled:c,className:"mr-2","data-testid":"input-".concat(m.name),size:"small"})}})})]}),(0,s.jsx)(o.Bc,{isInvalid:h,message:x,fieldName:m.name})]})},p=e=>{let{label:t,tooltip:n,dictField:a,name:l,id:u,disabled:c}=e,{field:m,isInvalid:h,error:x,isShowingSuggestions:p}=f(l,a,"numeric"),{setFieldValue:v}=(0,r.u6)();return(0,s.jsxs)(i.DTt,{isInvalid:h,width:"full",children:[(0,s.jsxs)(i.TJV,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,s.jsxs)(i.Br$,{spacing:1,children:[(0,s.jsx)(o.__,{htmlFor:u||l,fontSize:"xs",my:0,mr:0,children:t}),(0,s.jsx)(d.b,{label:n})]}),(0,s.jsx)(i.Br$,{children:(0,s.jsxs)(i.UW0,{value:m.value,name:m.name,size:"xs",onBlur:m.onBlur,onChange:e=>{v(m.name,e)},w:"100%",colorScheme:"terracotta",inputMode:"numeric","data-testid":"input-".concat(m.name),color:"showing"===p?"complimentary.500":"gray.800",focusBorderColor:"primary.600",isDisabled:c,children:[(0,s.jsx)(i.v4G,{}),(0,s.jsxs)(i.eMw,{children:[(0,s.jsx)(i.tTI,{}),(0,s.jsx)(i.ey7,{})]})]})})]}),(0,s.jsx)(o.Bc,{isInvalid:h,message:x,fieldName:m.name})]})}}}]);