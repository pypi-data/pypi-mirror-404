"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8852],{59969:function(e,t,n){var i=n(24246),r=n(36010);n(27378);var a=n(8557);t.Z=e=>{let t,{daysLeft:n,includeText:s,status:l}=e;if(!n||l===a.q.COMPLETE||l===a.q.CANCELED||l===a.q.DENIED||l===a.q.IDENTITY_UNVERIFIED)return(0,i.jsx)("span",{children:"-"});switch(!0){case n>=10:t=r.tAb.SUCCESS;break;case n<10&&n>4:t=r.tAb.WARNING;break;case n<5:t=r.tAb.ERROR}return(0,i.jsx)(r.Vp9,{color:t,children:s?"".concat(n," days left"):n})}},18225:function(e,t,n){var i=n(24246),r=n(36010);t.Z=e=>{let{alignment:t="center",...n}=e;return(0,i.jsx)(r.ad9,{boxSize:"full",align:"center",justify:t,children:(0,i.jsx)(r.Y6B,{color:"primary",...n})})}},58754:function(e,t,n){var i=n(24246),r=n(36010),a=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:s=!0,children:l,rightContent:o,style:c,...u}=e;return(0,i.jsxs)("div",{...u,style:s?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,i.jsxs)(r.kCb,{justify:"space-between",children:["string"==typeof t?(0,i.jsx)(r.Dxz,{className:n||l?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,o&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:o})]}),!!n&&(0,i.jsx)(a.m,{className:l?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),l]})}},45259:function(e,t,n){var i=n(24246),r=n(36010);let a={approved:{color:r.tAb.SUCCESS,label:"Approved"},complete:{color:r.tAb.SUCCESS,label:"Completed"},awaiting_email_send:{color:r.tAb.MARBLE,label:"Awaiting Email Send"},denied:{color:r.tAb.WARNING,label:"Denied"},canceled:{color:r.tAb.MARBLE,label:"Canceled"},error:{color:r.tAb.ERROR,label:"Error"},in_processing:{color:r.tAb.CAUTION,label:"In Progress"},paused:{color:r.tAb.MARBLE,label:"Paused"},pending:{color:r.tAb.INFO,label:"New"},identity_unverified:{color:r.tAb.MARBLE,label:"Unverified"},requires_input:{color:r.tAb.MINOS,label:"Requires Input"},requires_manual_finalization:{color:r.tAb.MINOS,label:"Requires Finalization"},duplicate:{color:r.tAb.DEFAULT,label:"Duplicate"}};t.Z=e=>{let{status:t}=e;return(0,i.jsx)(r.Vp9,{color:a[t].color,className:"justify-center","data-testid":"request-status-badge",children:a[t].label})}},19904:function(e,t,n){n.d(t,{Tg:function(){return s}});var i=n(24246),r=n(16134),a=n(31793);let s=e=>(0,r.C)(a.uu).filter(t=>e.includes(t)).length>0;t.ZP=e=>{let{scopes:t,children:n}=e;return s(t)?(0,i.jsx)(i.Fragment,{children:n}):null}},59849:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(24246),r=n(36010),a=n(86677),s=n(88340);let l="/images/errors";var o=e=>{let{status:t}=e;return 404===t?(0,i.jsx)(r.Eep,{src:"".concat(l,"/404.svg"),alt:"Error 404",preview:!1}):500===t?(0,i.jsx)(r.Eep,{src:"".concat(l,"/500.svg"),alt:"Error 500",preview:!1}):(0,i.jsx)(r.Eep,{src:"".concat(l,"/unknown.svg"),alt:"Error Unknown",preview:!1})},c=n(812),u=e=>{let{error:t,defaultMessage:n="An unexpected error occurred.  Please try again",actions:l,showReload:u=!0}=e,d=(0,c.e$)(t,n),g="data"in t&&t.data?JSON.stringify(t.data):JSON.stringify(t),f="status"in t&&t.status?t.status:void 0,p=(0,a.useRouter)(),h=l&&l.length>0||u;return(0,i.jsx)(r.kCb,{vertical:!0,align:"center",justify:"center",className:"h-screen","data-testid":"error-page-result",children:(0,i.jsx)(r.x4B,{status:"error",icon:(0,i.jsx)(o,{status:f}),title:"Error ".concat(f),subTitle:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Typography.Paragraph,{type:"secondary",children:d}),(0,i.jsx)(r.kCb,{justify:"start",className:"max-w-96",children:(0,i.jsx)(r.UO1,{ghost:!0,size:"small",items:[{key:"1",label:"Show details",classNames:{header:"w-fit"},children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Typography.Text,{type:"secondary",children:g}),(0,i.jsx)(s.Z,{copyText:g})]})}]})})]}),extra:h&&(0,i.jsxs)(r.kCb,{gap:"small",justify:"center",children:[null==l?void 0:l.map((e,t)=>(0,i.jsx)(r.zxk,{...e,children:e.label},t)),u&&(0,i.jsx)(r.zxk,{onClick:()=>p.reload(),type:"primary",children:"Reload"})]})})})}},70788:function(e,t,n){n.d(t,{m:function(){return c}});var i=n(24246),r=n(36010),a=n(79894),s=n.n(a),l=n(27378);let{Text:o}=r.Typography,c=e=>{let{items:t,...n}=e,a=(0,l.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let a=n===t.length-1,l={...e},c=l.onClick&&!l.href;return("string"==typeof l.title&&(l.title=(0,i.jsx)(o,{style:{color:"inherit",maxWidth:a?void 0:400},ellipsis:!a,id:a?"breadcrumb-current-page":void 0,children:l.title})),c)?l.title=(0,i.jsx)(r.zxk,{type:"text",size:"small",icon:l.icon,onClick:l.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:l.title}):(l.icon&&(l.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:l.icon}),l.title]})),l.href&&l.title&&(l.title=(0,i.jsx)(s(),{href:l.href,className:"ant-breadcrumb-link",children:l.title}),delete l.href)),l}),[t]);return(0,i.jsx)(r.aGc,{items:a,...n})}},42478:function(e,t,n){n.d(t,{FU:function(){return c},JE:function(){return r},Ki:function(){return d},SU:function(){return g},W:function(){return f},h9:function(){return a},jc:function(){return i},qt:function(){return o},sn:function(){return u}});let{useGetEmailInviteStatusQuery:i,useGetActiveMessagingProviderQuery:r,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:s,useGetMessagingConfigurationDetailsQuery:l,useGetMessagingConfigurationsQuery:o,useGetMessagingConfigurationByKeyQuery:c,useUpdateMessagingConfigurationByKeyMutation:u,useUpdateMessagingConfigurationSecretsByKeyMutation:d,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:f}=n(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,n,i)=>{let r=await i({url:"messaging/default/active"});return r.error&&404===r.error.status?{data:null}:r},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},57526:function(e,t,n){var i=n(24246),r=n(36010),a=n(27378),s=n(90449);t.Z=e=>{let{isOpen:t,onClose:n,onApproveRequest:l,isLoading:o,subjectRequest:c}=e,{identity:u,identity_verified_at:d,custom_privacy_request_fields:g}=c,f=(0,s.o8)(u),p=(0,s.Ub)(u,f),h=[...f?[f]:[],...p],y=(0,s.aP)(g),m=(0,a.useCallback)(()=>{l().then(()=>{n()})},[l,n]);return(0,i.jsxs)(r.TGG,{isOpen:t,onClose:n,size:"lg",isCentered:!0,children:[(0,i.jsx)(r.T5Q,{}),(0,i.jsxs)(r.Z8H,{children:[(0,i.jsx)(r.geD,{children:"Privacy request approval"}),(0,i.jsxs)(r.zOL,{paddingTop:0,paddingBottom:0,children:[(0,i.jsx)(r.Bjg,{color:"gray.500",fontSize:"14px",marginBottom:4,children:"Are you sure you want to approve this privacy request?"}),(0,i.jsxs)(r.e4Y,{children:[h.map(e=>(0,i.jsx)(r.BKM,{children:(0,i.jsxs)(r.ad9,{alignItems:"flex-start",children:[(0,i.jsxs)(r.Bjg,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[e.label,":"]}),(0,i.jsx)(r.Bjg,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:e.value}),"(",d?"Verified":"Unverified",")"]})},e.key)),y.map(e=>(0,i.jsx)(r.BKM,{children:(0,i.jsxs)(r.ad9,{alignItems:"flex-start",children:[(0,i.jsxs)(r.Bjg,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[e.label,":"]}),(0,i.jsx)(r.Bjg,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:Array.isArray(e.value)?e.value.join(", "):String(e.value)}),"(Unverified)"]})},e.key))]})]}),(0,i.jsx)(r.NGc,{children:(0,i.jsxs)(r.RmD,{columns:2,width:"100%",children:[(0,i.jsx)(r.zxk,{onClick:n,className:"mr-3","data-testid":"cancel-btn",children:"Cancel"}),(0,i.jsx)(r.zxk,{type:"primary","data-testid":"continue-btn",onClick:m,loading:o,children:"Confirm"})]})})]})]})}},66548:function(e,t,n){var i=n(24246),r=n(40324),a=n(36010),s=n(34090),l=n(27378),o=n(55484);let c={denialReason:""};t.Z=e=>{let{isOpen:t,onClose:n,onDenyRequest:u}=e,d=(0,l.useCallback)((e,t)=>{let{setSubmitting:i}=t;u(e.denialReason).then(()=>{i(!1),n()})},[u,n]);return(0,i.jsxs)(a.TGG,{isOpen:t,onClose:n,isCentered:!0,returnFocusOnClose:!1,children:[(0,i.jsx)(a.T5Q,{}),(0,i.jsx)(a.Z8H,{width:"100%",maxWidth:"456px","data-testid":"deny-privacy-request-modal",children:(0,i.jsx)(s.J9,{initialValues:c,validationSchema:o.Ry({denialReason:o.Z_().required().label("Reason for denial")}),onSubmit:d,children:e=>{let{isSubmitting:t,dirty:l,isValid:o}=e;return(0,i.jsxs)(s.l0,{children:[(0,i.jsx)(a.geD,{children:"Privacy request denial"}),(0,i.jsx)(a.zOL,{color:"gray.500",fontSize:"14px",children:"Please enter a reason for denying this privacy request. Please note: this can be seen by the user in their notification email."}),(0,i.jsx)(a.zOL,{children:(0,i.jsx)(r.Ks,{name:"denialReason",textAreaProps:{focusBorderColor:"primary.600",resize:"none"}})}),(0,i.jsxs)(a.NGc,{className:"flex w-full gap-4",children:[(0,i.jsx)(a.zxk,{disabled:t,onClick:n,className:"grow",children:"Cancel"}),(0,i.jsx)(a.zxk,{htmlType:"submit",type:"primary",disabled:!l||!o,loading:t,className:"grow","data-testid":"deny-privacy-request-modal-btn",children:"Confirm"})]})]})}})})]})}},90449:function(e,t,n){n.d(t,{$u:function(){return h},Pp:function(){return c},Ub:function(){return g},V1:function(){return p},aP:function(){return f},o8:function(){return d}});var i=n(90104),r=n.n(i),a=n(30644),s=n.n(a),l=n(71975),o=n.n(l);let c=(0,n(40431).jo)({parse:e=>{try{return JSON.parse(e)}catch(e){return null}},serialize:e=>JSON.stringify(e)}).withOptions({throttleMs:500}),u=(e,t)=>t?"string"==typeof t&&t.length>0?{value:t,label:e,key:e}:"object"!=typeof t||r()(t.value)?null:{value:t.value,label:t.label,key:e}:null,d=e=>{if(!e)return null;let t=u("email",e.email);if(t)return t;let n=u("phone_number",e.phone_number);if(n)return n;let i=Object.keys(e);return i.length>0?u(i[0],e[i[0]]):null},g=(e,t)=>e?Object.entries(e).map(e=>{let[t,n]=e;return u(t,n)}).filter(e=>!!e).filter(e=>e.key!==(null==t?void 0:t.key)):[],f=e=>e&&e?Object.entries(e).filter(e=>{let[,t]=e;return!s()(t.value)&&""!==t.value}).map(e=>{let[t,n]=e;return{key:t,label:n.label,value:n.value}}):[],p=e=>{if(!e)return{};let t={};return e.forEach(e=>{e.custom_privacy_request_fields&&Object.entries(e.custom_privacy_request_fields).forEach(e=>{let[n,i]=e;t[n]||(t[n]=i)})}),t},h=e=>{if(!e)return null;let t=o()(e,e=>null!==e);return Object.keys(t).length>0?t:null}},45489:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(90867);let r=e=>{let{subjectRequest:t}=e,[n,r]=(0,i.RW)({fixedCacheKey:t.id}),[a,s]=(0,i.F1)({fixedCacheKey:t.id}),[l,o]=(0,i.rC)({fixedCacheKey:t.id}),[c,u]=(0,i.zB)({fixedCacheKey:t.id}),d=s.isLoading||r.isLoading||u.isLoading;return{approveRequest:n,approveRequestResult:r,denyRequest:a,denyRequestResult:s,handleApproveRequest:()=>n({id:t.id}),handleDenyRequest:e=>a({id:t.id,reason:e}),handleDeleteRequest:()=>l({id:t.id}),handleFinalizeRequest:()=>c({privacyRequestId:t.id}),softDeleteRequestResult:o,finalizeRequestResult:u,isLoading:d}}},72281:function(e,t,n){n.d(t,{G:function(){return l},d:function(){return o}});var i=n(86677),r=n(27378),a=n(19904),s=n(60240);let l={REQUEST:"request",MANUAL_TASK:"manual-tasks"},o=()=>{let e=(0,i.useRouter)(),t=(0,a.Tg)([s.Sh.PRIVACY_REQUEST_READ]),n=(0,a.Tg)([s.Sh.MANUAL_FIELD_READ_OWN,s.Sh.MANUAL_FIELD_READ_ALL]),o=(0,r.useMemo)(()=>({request:t,manualTask:n}),[t,n]),[c,u]=(0,r.useState)(o.request?l.REQUEST:l.MANUAL_TASK),d=(0,r.useCallback)(()=>{let{tab:t}=e.query;return t&&"string"==typeof t&&Object.values(l).includes(t)?t:null},[e.query]),g=(0,r.useCallback)(t=>{e.replace({pathname:e.pathname,query:{tab:t}},void 0,{shallow:!0})},[e]);return(0,r.useEffect)(()=>{if(!e.isReady)return;let t=d();t?(t===l.REQUEST||t===l.MANUAL_TASK&&o.manualTask)&&u(t):o.request&&u(l.REQUEST)},[e.isReady,e.query,o,d,g]),{activeTab:c,handleTabChange:(0,r.useCallback)(e=>{Object.values(l).includes(e)&&(u(e),g(e))},[g]),availableTabs:o}}}}]);