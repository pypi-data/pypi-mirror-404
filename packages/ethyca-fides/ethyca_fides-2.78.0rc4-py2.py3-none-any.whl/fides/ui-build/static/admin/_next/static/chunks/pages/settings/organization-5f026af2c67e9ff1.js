(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2828],{85082:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/organization",function(){return t(5417)}])},77213:function(e,i,t){"use strict";t.d(i,{Z:function(){return m}});var n=t(24246),r=t(36010),a=t(88038),s=t.n(a),o=t(86677);t(27378);var d=t(25980),l=t(90867),c=t(42478),u=t(77830),g=()=>{let e=(0,o.useRouter)();return(0,n.jsx)(r.TJV,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,n.jsxs)(r.TJV,{children:[(0,n.jsxs)(r.EO$,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,n.jsx)(r.Bjg,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,n.jsx)(r.zxk,{onClick:()=>{e.push(u.AD)},children:"Configure"})]}),(0,n.jsxs)(r.Bjg,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},m=e=>{let{children:i,title:t,padded:a=!0,mainProps:u}=e,m=(0,d.hz)(),p=(0,o.useRouter)(),x="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,f=!(m.flags.messagingConfiguration&&x),{data:h}=(0,c.JE)(void 0,{skip:f}),{data:v}=(0,l.PW)(void 0,{skip:f}),j=m.flags.messagingConfiguration&&(!h||!v)&&x;return(0,n.jsxs)(r.ad9,{"data-testid":t,direction:"column",h:"100vh",children:[(0,n.jsxs)(s(),{children:[(0,n.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,n.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)(r.ad9,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...u,children:[j?(0,n.jsx)(g,{}):null,i]})]})}},58754:function(e,i,t){"use strict";var n=t(24246),r=t(36010),a=t(70788);i.Z=e=>{let{heading:i,breadcrumbItems:t,isSticky:s=!0,children:o,rightContent:d,style:l,...c}=e;return(0,n.jsxs)("div",{...c,style:s?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...l}:{paddingBottom:"24px",...l},children:[(0,n.jsxs)(r.kCb,{justify:"space-between",children:["string"==typeof i?(0,n.jsx)(r.Dxz,{className:t||o?"pb-4":void 0,level:1,"data-testid":"page-heading",children:i}):i,d&&(0,n.jsx)("div",{"data-testid":"page-header-right-content",children:d})]}),!!t&&(0,n.jsx)(a.m,{className:o?"pb-4":void 0,items:t,"data-testid":"page-breadcrumb"}),o]})}},19904:function(e,i,t){"use strict";t.d(i,{Tg:function(){return s}});var n=t(24246),r=t(16134),a=t(31793);let s=e=>(0,r.C)(a.uu).filter(i=>e.includes(i)).length>0;i.ZP=e=>{let{scopes:i,children:t}=e;return s(i)?(0,n.jsx)(n.Fragment,{children:t}):null}},97181:function(e,i,t){"use strict";t.d(i,{d:function(){return l}});var n=t(24246),r=t(36010),a=t(34090),s=t(27378),o=t(46238),d=t(40324);let l=e=>{let{name:i,label:t,labelProps:l,tooltip:c,isRequired:u,layout:g="inline",helperText:m,...p}=e,[x,f,{setValue:h}]=(0,a.U$)(i),v=!!(f.touched&&f.error),[j,y]=(0,s.useState)("");x.value||"tags"!==p.mode&&"multiple"!==p.mode||(x.value=[]),"tags"===p.mode&&"string"==typeof x.value&&(x.value=[x.value]);let b="tags"===p.mode?(e,i)=>e?e.value!==j||x.value.includes(j)?p.optionRender?p.optionRender(e,i):e.label:'Create "'.concat(j,'"'):void 0:p.optionRender||void 0,C=e=>{y(e),p.onSearch&&p.onSearch(e)},k=(e,i)=>{h(e),p.onChange&&p.onChange(e,i)};return"inline"===g?(0,n.jsx)(r.DTt,{isInvalid:v,isRequired:u,children:(0,n.jsxs)(r.MoG,{templateColumns:t?"1fr 3fr":"1fr",children:[t?(0,n.jsx)(d.__,{htmlFor:p.id||i,...l,children:t}):null,(0,n.jsxs)(r.kCb,{align:"center",children:[(0,n.jsxs)(r.kCb,{vertical:!0,flex:1,className:"mr-2",children:[(0,n.jsx)(r.PhF,{...x,id:p.id||i,"data-testid":"controlled-select-".concat(x.name),...p,optionRender:b,onSearch:"tags"===p.mode?C:void 0,onChange:k,value:x.value||void 0,status:v?"error":void 0}),m&&(0,n.jsx)(r.Kug,{children:m}),(0,n.jsx)(d.Bc,{isInvalid:v,message:f.error,fieldName:x.name})]}),(0,n.jsx)(o.b,{label:c,className:v?"mt-2 self-start":void 0})]})]})}):(0,n.jsx)(r.DTt,{isInvalid:v,isRequired:u,children:(0,n.jsxs)(r.s_g,{alignItems:"start",children:[(0,n.jsxs)(r.kCb,{align:"center",children:[t?(0,n.jsx)(d.__,{htmlFor:p.id||i,fontSize:"xs",my:0,mr:1,...l,children:t}):null,(0,n.jsx)(o.b,{label:c})]}),(0,n.jsx)(r.PhF,{...x,id:p.id||i,"data-testid":"controlled-select-".concat(x.name),...p,optionRender:b,onSearch:"tags"===p.mode?C:void 0,onChange:k,value:x.value||void 0,status:v?"error":void 0}),m&&(0,n.jsx)(r.Kug,{style:{marginTop:0},children:m}),(0,n.jsx)(d.Bc,{isInvalid:v,message:f.error,fieldName:x.name})]})})}},8133:function(e,i,t){"use strict";var n=t(24246),r=t(36010);i.Z=e=>{let{title:i,children:t,isOpen:a,onClose:s,modalContentProps:o,showCloseButton:d=!1,footer:l,...c}=e;return(0,n.jsxs)(r.TGG,{isOpen:a,onClose:s,isCentered:!0,scrollBehavior:"inside",size:"xl",id:"add-modal",...c,children:[(0,n.jsx)(r.T5Q,{}),(0,n.jsxs)(r.Z8H,{textAlign:"left",p:0,"data-testid":"add-modal-content",...o,children:[d&&(0,n.jsx)(r.fpf,{}),(0,n.jsx)(r.geD,{p:0,children:(0,n.jsx)(r.TJV,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,n.jsx)(r.y_b,{as:"h3",size:"sm",children:i})})}),(0,n.jsx)(r.zOL,{pb:4,overflow:"auto",children:t}),l&&(0,n.jsx)(r.NGc,{children:l})]})]})}},70788:function(e,i,t){"use strict";t.d(i,{m:function(){return l}});var n=t(24246),r=t(36010),a=t(79894),s=t.n(a),o=t(27378);let{Text:d}=r.Typography,l=e=>{let{items:i,...t}=e,a=(0,o.useMemo)(()=>null==i?void 0:i.map((e,t)=>{let a=t===i.length-1,o={...e},l=o.onClick&&!o.href;return("string"==typeof o.title&&(o.title=(0,n.jsx)(d,{style:{color:"inherit",maxWidth:a?void 0:400},ellipsis:!a,id:a?"breadcrumb-current-page":void 0,children:o.title})),l)?o.title=(0,n.jsx)(r.zxk,{type:"text",size:"small",icon:o.icon,onClick:o.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:o.title}):(o.icon&&(o.title=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"anticon align-text-bottom",children:o.icon}),o.title]})),o.href&&o.title&&(o.title=(0,n.jsx)(s(),{href:o.href,className:"ant-breadcrumb-link",children:o.title}),delete o.href)),o}),[i]);return(0,n.jsx)(r.aGc,{items:a,...t})}},42478:function(e,i,t){"use strict";t.d(i,{FU:function(){return l},JE:function(){return r},Ki:function(){return u},SU:function(){return g},W:function(){return m},h9:function(){return a},jc:function(){return n},qt:function(){return d},sn:function(){return c}});let{useGetEmailInviteStatusQuery:n,useGetActiveMessagingProviderQuery:r,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:s,useGetMessagingConfigurationDetailsQuery:o,useGetMessagingConfigurationsQuery:d,useGetMessagingConfigurationByKeyQuery:l,useUpdateMessagingConfigurationByKeyMutation:c,useUpdateMessagingConfigurationSecretsByKeyMutation:u,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:m}=t(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,i,t,n)=>{let r=await n({url:"messaging/default/active"});return r.error&&404===r.error.status?{data:null}:r},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},5417:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return M}});var n=t(24246),r=t(19904),a=t(36010),s=t(25980),o=t(77213),d=t(58754),l=t(8133),c=t(34090),u=t(27378),g=t(55484),m=t(40324),p=t(812),x=t(46628),f=t(76174),h=t(97181);let v={identifier:"",name:"",client_id:"",client_secret:""},j=e=>({...e}),y=g.Ry().shape({provider:g.Z_().required().label("Provider"),name:g.Z_().required().label("Name"),client_id:g.Z_().required().label("Client ID"),client_secret:g.Z_().required().label("Client Secret")});var b=e=>{let{openIDProvider:i,onSuccess:t,onClose:r}=e,[s]=(0,f.Qc)(),[o]=(0,f.oP)(),d=(0,u.useMemo)(()=>i?j(i):v,[i]),l=(0,a.p8r)(),g=async(e,i)=>{(e=>{if((0,p.D4)(e)){let i=(0,p.e$)(e.error,"An unexpected error occurred while editing the SSO provider. Please try again.");l((0,x.Vo)(i))}else l((0,x.t5)("SSO provider configuration saved.")),r(),i.resetForm({}),t&&t(e.data)})(d.id?await o(e):await s(e))},b=[{label:"Azure",value:"azure"},{label:"Google",value:"google"},{label:"Okta",value:"okta"},{label:"Custom",value:"custom"}],C=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.j0,{id:"authorization_url",name:"authorization_url",label:"Authorization URL",tooltip:"Authorization URL for your provider",variant:"stacked",isRequired:!0}),(0,n.jsx)(m.j0,{id:"token_url",name:"token_url",label:"Token URL",tooltip:"Token URL for your provider",variant:"stacked",isRequired:!0})]}),k=()=>(0,n.jsx)(m.j0,{id:"domain",name:"domain",label:"Domain",tooltip:"Domain for your Okta provider",variant:"stacked",isRequired:!0}),S=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.j0,{id:"authorization_url",name:"authorization_url",label:"Authorization URL",tooltip:"Authorization URL for your provider",variant:"stacked",isRequired:!0}),(0,n.jsx)(m.j0,{id:"token_url",name:"token_url",label:"Token URL",tooltip:"Token URL for your provider",variant:"stacked",isRequired:!0}),(0,n.jsx)(m.j0,{id:"userinfo_url",name:"user_info_url",label:"User Info URL",tooltip:"User Info URL for your provider",variant:"stacked",isRequired:!0})]});return(0,n.jsx)(c.J9,{initialValues:d,enableReinitialize:!0,onSubmit:g,validationSchema:y,children:e=>{let{dirty:i,isValid:t,values:s}=e;return(0,n.jsx)(c.l0,{"data-testid":"openIDProvider-form",children:(0,n.jsxs)(a.EO$,{spacing:4,children:[(0,n.jsx)(h.d,{name:"provider",label:"Provider",options:b,layout:"stacked",isRequired:!0}),(0,n.jsx)(m.j0,{id:"identifier",name:"identifier",label:"Identifier",tooltip:"Unique identifier for your provider",variant:"stacked",isRequired:!0,disabled:!!d.id}),(0,n.jsx)(m.j0,{id:"name",name:"name",label:"Name",tooltip:"Display name for your provider",variant:"stacked",isRequired:!0}),(0,n.jsx)(m.j0,{id:"client_id",name:"client_id",label:"Client ID",type:"password",tooltip:"Client ID for your provider",variant:"stacked",isRequired:!0}),(0,n.jsx)(m.j0,{id:"client_secret",name:"client_secret",label:"Client secret",type:"password",tooltip:"Client secret for your provider",variant:"stacked",isRequired:!0}),"azure"===s.provider&&C(),"okta"===s.provider&&k(),"custom"===s.provider&&S(),(0,n.jsxs)(a.TJV,{textAlign:"right",children:[(0,n.jsx)(a.zxk,{htmlType:"button","data-testid":"cancel-btn",className:"mr-3",onClick:r,children:"Cancel"}),(0,n.jsx)(a.zxk,{htmlType:"submit",type:"primary",disabled:!i||!t,"data-testid":"save-btn",children:"Save"})]})]})})}})},C=e=>{let{isOpen:i,onClose:t}=e;return(0,n.jsx)(l.Z,{isOpen:i,onClose:t,title:"Add SSO Provider",children:(0,n.jsx)(b,{onClose:t})})},k=e=>{let{isOpen:i,onClose:t,openIDProvider:r}=e;return(0,n.jsx)(l.Z,{isOpen:i,onClose:t,title:"Edit SSO Provider",children:(0,n.jsx)(b,{openIDProvider:r,onClose:t})})},S=e=>{let{openIDProvider:i}=e,{onOpen:t,isOpen:r,onClose:s}=(0,a.E2M)(),{onOpen:o,isOpen:d,onClose:l}=(0,a.E2M)(),c=(0,a.p8r)(),[u]=(0,f.rB)(),g=async()=>{let e=await u(i.identifier);if((0,p.D4)(e)){c((0,x.Vo)((0,p.e$)(e.error))),l();return}c((0,x.t5)("SSO provider deleted successfully")),l()};return(0,n.jsxs)(a.TJV,{alignItems:"center",borderRadius:"lg",borderWidth:"1px",display:"flex",height:"74px",marginBottom:"24px",padding:2,children:[(0,n.jsxs)(a.TJV,{display:"flex",alignItems:"center",children:[(0,n.jsx)(a.B1T,{src:"/images/oauth-login/".concat(i.provider,".svg"),alt:"".concat(i.provider," icon"),width:"40px",height:"40px"}),(0,n.jsxs)(a.TJV,{display:"flex",flexDirection:"column",children:[(0,n.jsx)(a.Bjg,{fontSize:"medium",fontWeight:"bold",marginLeft:"16px",children:i.name}),(0,n.jsx)(a.Bjg,{fontSize:"medium",marginLeft:"16px",children:i.identifier})]})]}),(0,n.jsxs)(a.TJV,{flexGrow:1,display:"flex",justifyContent:"flex-end",children:[(0,n.jsx)(a.zxk,{className:"mr-3",onClick:o,"data-testid":"remove-sso-provider-btn",children:"Remove"}),(0,n.jsx)(a.zxk,{className:"mr-3",onClick:t,"data-testid":"edit-sso-provider-btn",children:"Edit"})]}),(0,n.jsx)(k,{isOpen:r,onClose:s,openIDProvider:i}),(0,n.jsx)(a.cVQ,{isOpen:d,onClose:l,onConfirm:g,title:"Remove SSO provider",message:(0,n.jsx)(a.Bjg,{children:"You are about to permanently remove this SSO provider. Are you sure you would like to continue?"})})]})},_=()=>{let{onOpen:e,isOpen:i,onClose:t}=(0,a.E2M)(),{data:r}=(0,f.qv)();return(0,n.jsxs)(a.TJV,{maxWidth:"600px",marginTop:"40px",children:[(0,n.jsxs)(a.y_b,{marginBottom:4,fontSize:"lg",display:"flex",justifyContent:"space-between",children:["SSO Providers",r&&r.length<5&&(0,n.jsx)(a.zxk,{onClick:e,"data-testid":"add-sso-provider-btn",children:"Add SSO Provider"})]}),(0,n.jsx)(a.Bjg,{marginBottom:"30px",fontSize:"sm",children:"Use this area to add and manage SSO providers for you organization. Select “Add SSO provider” to add a new provider."}),null==r?void 0:r.map(e=>(0,n.jsx)(S,{openIDProvider:e},e.identifier)),(0,n.jsx)(C,{isOpen:i,onClose:t})]})},T=t(83265);let z={description:"",fides_key:T.Av,name:""},R=e=>({...e}),q=e=>({description:e.description,fides_key:e.fides_key,name:e.name}),O=g.Ry().shape({description:g.Z_().required().label("Description"),fides_key:g.Z_().required().label("Organization Fides Key"),name:g.Z_().required().label("Name")}),P=e=>{let{organization:i,onSuccess:t}=e,[r,s]=(0,T.$f)(),o=(0,u.useMemo)(()=>i?R(i):z,[i]),d=(0,a.p8r)(),l=async(e,i)=>{let n=q(e);(r=>{if((0,p.D4)(r)){let e=(0,p.e$)(r.error,"An unexpected error occurred while editing the organization. Please try again.");d((0,x.Vo)(e))}else d((0,x.t5)("Organization configuration saved.")),i.resetForm({values:e}),t&&t(n)})(await r(n))},g=!i||s.isLoading;return(0,n.jsx)(c.J9,{initialValues:o,enableReinitialize:!0,onSubmit:l,validationSchema:O,children:e=>{let{dirty:i,isValid:t}=e;return(0,n.jsx)(c.l0,{"data-testid":"organization-form",children:(0,n.jsxs)(a.EO$,{spacing:4,children:[(0,n.jsx)(m.j0,{id:"fides_key",name:"fides_key",label:"Fides Key",disabled:!0,tooltip:"A unique key that identifies your organization. Not editable via UI.",variant:"stacked"}),(0,n.jsx)(m.j0,{id:"name",name:"name",label:"Name",disabled:g,tooltip:"User-friendly name for your organization, used in messaging to end-users and other public locations.",variant:"stacked"}),(0,n.jsx)(m.j0,{id:"description",name:"description",label:"Description",disabled:g,tooltip:"Short description of your organization, your services, etc.",variant:"stacked"}),(0,n.jsx)(a.TJV,{textAlign:"right",children:(0,n.jsx)(a.zxk,{htmlType:"submit",type:"primary",disabled:g||!i||!t,loading:g,"data-testid":"save-btn",children:"Save"})})]})})}})};var w=t(60240),M=()=>{let{data:e}=(0,T.GQ)(T.Av),{plus:i}=(0,s.hz)();return(0,n.jsx)(o.Z,{title:"Organization",children:(0,n.jsxs)(a.TJV,{"data-testid":"organization-management",children:[(0,n.jsx)(d.Z,{heading:"Organization Management"}),(0,n.jsxs)(a.TJV,{maxWidth:"600px",children:[(0,n.jsx)(a.Bjg,{pb:6,fontSize:"sm",children:"Please use this section to manage your organization‘s details, including key information that will be recorded in the RoPA (Record of Processing Activities)."}),(0,n.jsx)(a.TJV,{background:"gray.50",padding:2,children:(0,n.jsx)(P,{organization:e})}),i&&(0,n.jsx)(r.ZP,{scopes:[w.Sh.OPENID_PROVIDER_CREATE],children:(0,n.jsx)(_,{})})]})]})})}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=85082)}),_N_E=e.O()}]);