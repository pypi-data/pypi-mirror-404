(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6446],{10463:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datastore-connection/[id]",function(){return t(88228)}])},88228:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return g}});var i=t(24246),l=t(1226),s=t(36010),r=t(86677),a=t(27378),o=t(16134),c=t(17245),d=t(77830),u=t(20682),h=t(94725),f=t(58754),p=t(11274),x=t(26788),y=t(38212),j=t(50881),m=t(41337),_=()=>{let e=(0,o.T)(),{connection:n,connectionOption:t}=(0,o.C)(u.ZZ),[l,r]=(0,a.useState)(void 0),c=(0,a.useMemo)(()=>{let e=[];return(null==l?void 0:l.options)&&l.options.forEach(t=>{let l;switch(t){case x.H5.CONNECTOR_PARAMETERS:l={label:t,key:t,children:(0,i.jsx)(p.s,{})};break;case x.H5.DATASET_CONFIGURATION:l=(null==n?void 0:n.key)?{label:t,key:t,children:(0,i.jsx)(y.Z,{})}:void 0;break;case x.H5.DSR_CUSTOMIZATION:l=(null==n?void 0:n.key)?{label:t,key:t,children:(0,i.jsx)(j.Z,{})}:void 0}l&&e.push(l)}),e},[null==n?void 0:n.key,null==l?void 0:l.options]);return(0,a.useEffect)(()=>{if(t){let n=x.IM.find(e=>e.type===(null==t?void 0:t.type));n&&(r(n),e((0,u.nj)(x.Ss[2])))}return()=>{e((0,u.mc)())}},[t,e]),n&&t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.Z,{heading:"Connection manager",breadcrumbItems:[{title:"All connections",href:d.JR},{title:n.name}]}),(0,i.jsx)(s.y_b,{fontSize:"md",fontWeight:"semibold",maxHeight:"40px",mb:"4px",whiteSpace:"nowrap",children:(0,i.jsxs)(s.TJV,{alignItems:"center",display:"flex",children:[(0,i.jsx)(m.ZP,{data:(0,m.PT)(t)}),(0,i.jsx)(s.Bjg,{ml:"8px",children:n.name})]})}),(0,i.jsx)(s.s_g,{alignItems:"stretch",flex:"1",gap:"18px",children:(0,i.jsx)(s.mQc,{items:c})})]}):null},v=t(60240),g=()=>{let e=(0,o.T)(),n=(0,r.useRouter)(),{id:t}=n.query,{errorAlert:f}=(0,c.VY)(),p=(0,o.C)(u.y_),[x,y]=(0,a.useState)(!0),j=(e,n)=>n.find(n=>{var t;return n.identifier===e.connection_type&&n.identifier!==v.Rj.SAAS||n.identifier===(null===(t=e.saas_config)||void 0===t?void 0:t.type)});return(0,a.useEffect)(()=>{let i=()=>{f("An error occurred while loading ".concat(n.query.id)),n.push(d.JR,void 0,{shallow:!0})},l=async n=>{try{let t=[];t.push(e(h.DM.endpoints.getDatastoreConnectionByKey.initiate(n))),0===p.length&&t.push(e(u.d8.endpoints.getAllConnectionTypes.initiate({search:""})));let l=await Promise.allSettled(t);if(l.every(e=>"fulfilled"===e.status)){e((0,u.lm)(l[0].value.data));let n=[...l[1]?l[1].value.data.items:p],t=j(l[0].value.data,n);e((0,u.yA)(t)),y(!1)}else i()}catch(e){i()}};return t&&l(t),()=>{}},[t]),(0,i.jsxs)(i.Fragment,{children:[x&&(0,i.jsx)(s.TJV,{display:"flex",h:"100vh",justifyContent:"center",children:(0,i.jsx)(s.w4_,{children:(0,i.jsx)(s.Y6B,{})})}),!x&&(0,i.jsx)(l.Z,{children:(0,i.jsx)(_,{})})]})}}},function(e){e.O(0,[431,454,6527,7245,7476,6362,2888,9774,179],function(){return e(e.s=10463)}),_N_E=e.O()}]);