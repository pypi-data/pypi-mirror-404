(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2734],{95372:function(e){e.exports=function(e,t,n,i){for(var s=e.length,a=n+(i?1:-1);i?a--:++a<s;)if(t(e[a],a,e))return a;return -1}},56632:function(e,t,n){var i=n(89278),s=n(80068),a=n(50098);e.exports=function(e){return function(t,n,r){var o=Object(t);if(!s(t)){var l=i(n,3);t=a(t),n=function(e){return l(o[e],e,o)}}var u=e(t,n,r);return u>-1?o[l?t[u]:u]:void 0}}},64925:function(e,t,n){var i=n(56632)(n(66259));e.exports=i},66259:function(e,t,n){var i=n(95372),s=n(89278),a=n(47991),r=Math.max;e.exports=function(e,t,n){var o=null==e?0:e.length;if(!o)return -1;var l=null==n?0:a(n);return l<0&&(l=r(o+l,0)),i(e,s(t,3),l)}},94919:function(e,t,n){var i=n(91936),s=1/0;e.exports=function(e){return e?(e=i(e))===s||e===-s?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},47991:function(e,t,n){var i=n(94919);e.exports=function(e){var t=i(e),n=t%1;return t==t?n?t-n:t:0}},35287:function(e,t,n){"use strict";var i=n(24246),s=n(36010),a=n(88038),r=n.n(a);n(27378),t.Z=e=>{let{children:t,title:n,fullHeight:a,fullWidth:o,mainProps:l}=e;return(0,i.jsxs)(s.ad9,{"data-testid":n,direction:"column",height:a?"100vh":"calc(100vh - 48px)",width:o?"100vw":"calc(100vw - 240px)",children:[(0,i.jsxs)(r(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)(s.ad9,{px:10,py:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0,...l,children:t})]})}},77213:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var i=n(24246),s=n(36010),a=n(88038),r=n.n(a),o=n(86677);n(27378);var l=n(25980),u=n(90867),c=n(42478),d=n(77830),g=()=>{let e=(0,o.useRouter)();return(0,i.jsx)(s.TJV,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(s.TJV,{children:[(0,i.jsxs)(s.EO$,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(s.Bjg,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(s.zxk,{onClick:()=>{e.push(d.AD)},children:"Configure"})]}),(0,i.jsxs)(s.Bjg,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},m=e=>{let{children:t,title:n,padded:a=!0,mainProps:d}=e,m=(0,l.hz)(),f=(0,o.useRouter)(),h="/privacy-requests"===f.pathname||"/datastore-connection"===f.pathname,v=!(m.flags.messagingConfiguration&&h),{data:p}=(0,c.JE)(void 0,{skip:v}),{data:y}=(0,u.PW)(void 0,{skip:v}),x=m.flags.messagingConfiguration&&(!p||!y)&&h;return(0,i.jsxs)(s.ad9,{"data-testid":n,direction:"column",h:"100vh",children:[(0,i.jsxs)(r(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(s.ad9,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...d,children:[x?(0,i.jsx)(g,{}):null,t]})]})}},79283:function(e,t,n){"use strict";n.d(t,{l:function(){return c}});var i=n(24246),s=n(36010),a=n(72707),r=n.n(a);let o=e=>{let{data:{formattedTitle:t,description:n,name:a,primaryName:r}}=e;return(0,i.jsxs)(s.kCb,{gap:12,title:"".concat(t," - ").concat(n),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:r||a}),r&&": ".concat(a)]}),(0,i.jsx)("em",{className:"overflow-hidden text-ellipsis",children:n})]})},l=e=>"options"in e&&Array.isArray(e.options),u=e=>({...e,className:r().option,formattedTitle:e.formattedTitle||[e.primaryName,e.name].filter(e=>e).join(": ")}),c=e=>{let{options:t,...n}=e,a=null==t?void 0:t.map(e=>l(e)?{...e,options:e.options.map(u)}:u(e));return(0,i.jsx)(s.PhF,{options:a,filterOption:(e,t)=>{var n,i;return(null==t?void 0:null===(n=t.formattedTitle)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null==t?void 0:null===(i=t.value)||void 0===i?void 0:i.toLowerCase().includes(e.toLowerCase()))||!1},optionFilterProp:"label",autoFocus:!0,variant:"borderless",optionRender:o,styles:{popup:{root:{minWidth:"500px"}}},className:"w-full p-0","data-testid":"taxonomy-select",...n})}},34929:function(e,t,n){"use strict";var i=n(24246),s=n(64925),a=n.n(s),r=n(27378),o=n(16134),l=n(30002),u=n(28079),c=n(57072);let d=()=>{let{isLoading:e}=(0,u.fd)(),t=(0,o.C)(u.U3),{isLoading:n}=(0,c.MO)(),i=(0,o.C)(c.qb),{isLoading:s}=(0,l.te)();return{dataUses:t,dataSubjects:(0,o.C)(l.ZL),dataCategories:i,isLoading:e||n||s}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:n,isLoading:s}=d(),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t(e);if(!i)return{};let s=t(o(e,n)),a=!!i.parent_key;return{name:i.name||void 0,primaryName:a&&(null==s?void 0:s.name)!==i.name&&(null==s?void 0:s.name)||void 0}},u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{name:s,primaryName:a}=l(e,t,n);return s?a?(0,i.jsxs)(r.Fragment,{children:[(0,i.jsxs)("strong",{children:[a,":"]})," ",s]},e):(0,i.jsx)("strong",{children:s},e):e},c=t=>a()(e,{fides_key:t}),g=e=>a()(t,{fides_key:e}),m=e=>a()(n,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:c,getDataUseDisplayName:e=>u(e,c,1),getDataUseDisplayNameProps:e=>l(e,c,1),getDataCategories:()=>t,getDataCategoryByKey:g,getDataCategoryDisplayName:e=>u(e,g,2),getDataCategoryDisplayNameProps:e=>l(e,g,2),getDataSubjects:()=>n,getDataSubjectByKey:m,getDataSubjectDisplayName:e=>{let t=m(e);return t?t.name:e},getDataSubjectDisplayNameProps:e=>{let t=m(e);return t?{name:t.name||e}:{}},getPrimaryKey:o,isLoading:s}}},9270:function(e,t,n){"use strict";n.d(t,{S:function(){return a}});var i=n(27378),s=n(36866);let a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.h)(e),{pageIndex:n,pageSize:a,updatePageIndex:r,updatePageSize:o,pageSizeOptions:l,showSizeChanger:u}=t,c=(0,i.useMemo)(()=>({current:n,pageSize:a,showSizeChanger:u,pageSizeOptions:l.map(String),onChange:r,onShowSizeChange:(e,t)=>{o(t)}}),[n,a,u,l,r,o]);return{...t,paginationProps:c}}},9431:function(e,t,n){"use strict";var i=n(24246),s=n(36010),a=n(98784),r=n.n(a),o=n(25980),l=n(35287),u=n(77830),c=n(58754),d=n(49744),g=n(15878);t.Z=e=>{let{children:t,monitorId:n,routeConfig:a}=e,{items:m,activeItem:f,setActiveItem:h}=(0,g.ZP)(a),{flags:{webMonitor:v,heliosV2:p}}=(0,o.hz)();return v||p?(0,i.jsxs)(l.Z,{title:"Action center",mainProps:{overflow:"hidden"},fullHeight:!0,children:[(0,i.jsx)(c.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:u.vi},...n?[{title:n}]:[]],isSticky:!1}),(0,i.jsx)(s.v2r,{"aria-label":"Action center tabs",mode:"horizontal",items:Object.values(m),selectedKeys:r().compact([f]),onClick:async e=>{let t=Object.values(g.em).find(t=>t===e.key);t&&await h(t)},className:"mb-4","data-testid":"action-center-tabs"}),t]}):(0,i.jsx)(d.n,{})}},49744:function(e,t,n){"use strict";n.d(t,{n:function(){return r}});var i=n(24246),s=n(36010),a=n(77213);let r=()=>(0,i.jsx)(a.Z,{title:"Action center",mainProps:{className:"h-full"},children:(0,i.jsx)(s.kCb,{justify:"center",align:"center",className:"h-full",children:(0,i.jsx)(s.bZj,{message:"Coming soon...",description:"Action center is currently disabled.",type:"info",showIcon:!0})})})},15878:function(e,t,n){"use strict";n.d(t,{em:function(){return s},ZP:function(){return g}});var i,s,a=n(24246),r=n(36010),o=n(25980),l=n(63662),u=n(86677),c=e=>{var t,n;let{routes:i,defaultKey:s}=e,{pathname:a,isReady:r,...o}=(0,u.useRouter)(),c=(0,l.useParams)();return{activeItem:null!==(n=null===(t=Object.entries(i).find(e=>{let[,t]=e;return t===a}))||void 0===t?void 0:t[0])&&void 0!==n?n:s,setActiveItem:async e=>{let t=i[e];await o.push({pathname:t,query:c})}}};(i=s||(s={})).ATTENTION_REQUIRED="attention-required",i.ACTIVITY="activity";let d={activity:{key:"activity",type:"item",label:"Activity",icon:(0,a.jsx)(r.PJP.cS$,{})},"attention-required":{key:"attention-required",type:"item",label:"Attention required",icon:(0,a.jsx)(r.PJP.ejL,{})}};var g=e=>{let{flags:{heliosV2:t}}=(0,o.hz)(),n={"attention-required":d["attention-required"],...t?{activity:d.activity}:{}},{activeItem:i,setActiveItem:s}=c({routes:e,defaultKey:"attention-required"});return{activeItem:i,setActiveItem:s,items:n}}},42478:function(e,t,n){"use strict";n.d(t,{FU:function(){return u},JE:function(){return s},Ki:function(){return d},SU:function(){return g},W:function(){return m},h9:function(){return a},jc:function(){return i},qt:function(){return l},sn:function(){return c}});let{useGetEmailInviteStatusQuery:i,useGetActiveMessagingProviderQuery:s,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:r,useGetMessagingConfigurationDetailsQuery:o,useGetMessagingConfigurationsQuery:l,useGetMessagingConfigurationByKeyQuery:u,useUpdateMessagingConfigurationByKeyMutation:c,useUpdateMessagingConfigurationSecretsByKeyMutation:d,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:m}=n(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,n,i)=>{let s=await i({url:"messaging/default/active"});return s.error&&404===s.error.status?{data:null}:s},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},57072:function(e,t,n){"use strict";n.d(t,{Bd:function(){return i.Bd},L5:function(){return i.L5},MO:function(){return i.MO},qb:function(){return i.qb}});var i=n(5785)},72734:function(e,t,n){"use strict";n.r(t),n.d(t,{HELIOS_ACCESS_ERROR:function(){return V},MONITOR_INFRASTRUCTURE_ACTION_CENTER_CONFIG:function(){return L},default:function(){return Z}});var i=n(24246),s=n(36010),a=n(63662),r=n(59849),o=n(25980),l=n(77830),u=n(9431),c=n(15878),d=n(27378),g=n(17245),m=n(9270),f=n(70675),h=n(71985),v=n(88708);let p=e=>{let{monitorId:t,statusFilters:n,vendorFilters:i,dataUsesFilters:s}=e,{paginationProps:a,pageIndex:r,pageSize:o,resetPagination:u}=(0,m.S)({defaultPageSize:50}),c=(0,g.Rx)(),{activeTab:p,filterTabs:y,activeParams:x,onTabChange:j}=(0,v.Z)(),C=(0,d.useMemo)(()=>n&&0!==n.length?1===n.length?n[0]:n.length>0?n:x.diff_status:x.diff_status,[n,x.diff_status]),b=(0,d.useMemo)(()=>{if(i&&0!==i.length)return i},[i]),k=(0,d.useMemo)(()=>{if(s&&0!==s.length)return s},[s]);(0,d.useEffect)(()=>{u()},[n,i,s,u]);let _=(0,f.QP)({monitor_config_key:t,page:r,size:o,search:c.searchQuery,diff_status:C,vendor_id:b,data_uses:k},{refetchOnMountOrArgChange:!0,skip:!t}),{data:S,isLoading:w,isFetching:T,refetch:P}=_,M=(0,d.useMemo)(()=>{var e,t;return{items:null!==(e=null==S?void 0:S.items)&&void 0!==e?e:[],total:null!==(t=null==S?void 0:S.total)&&void 0!==t?t:0}},[S]),I=(0,d.useCallback)(async e=>{await j(e),u(),P()},[j,u,P]),R=(0,d.useCallback)(e=>{var n;let i=null!==(n=e.urn)&&void 0!==n?n:l.Kl,s=p?"#".concat(p):"";return"".concat(l.vi,"/").concat(h.w.INFRASTRUCTURE,"/").concat(t,"/").concat(i).concat(s)},[t,p]);return{data:M,isLoading:w,isFetching:T,refetch:P,error:_.error,searchQuery:c.searchQuery,updateSearch:c.updateSearch,paginationProps:a,filterTabs:y,activeTab:p,handleTabChange:I,activeParams:x,rowClickUrl:R,getRecordKey:(0,d.useCallback)(e=>{var t,n,i;return null!==(i=null!==(n=null!==(t=e.urn)&&void 0!==t?t:e.vendor_id)&&void 0!==n?n:e.name)&&void 0!==i?i:l.Kl},[])}};var y=n(30952),x=n(16394),j=n(98145),C=n(79283),b=n(34929),k=e=>{let{onSelectDataUse:t,urn:n,...a}=e,{getDataUseDisplayNameProps:r,getDataUses:o}=(0,b.Z)(),l=o().filter(e=>e.active),[u,c]=(0,d.useState)(!1),g=l.map(e=>{let{name:t,primaryName:n}=r(e.fides_key);return{value:e.fides_key,label:(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:n||t}),n&&": ".concat(t)]}),name:t,primaryName:n,description:e.description||""}});return(0,i.jsx)(C.l,{options:g,prefix:(0,i.jsx)(s.zxk,{"aria-label":"Add data use",type:"text",size:"small",icon:(0,i.jsx)(s.PJP.mm_,{}),disabled:a.disabled}),placeholder:"",suffixIcon:null,classNames:{root:"w-full max-w-full overflow-hidden p-0 cursor-pointer -ml-5"},style:{"--ant-select-multiple-selector-bg-disabled":"transparent"},variant:"borderless",autoFocus:!1,maxTagCount:"responsive",open:u,onOpenChange:e=>c(e),onSelect:e=>{t(e),c(!1)},"data-classification-select":n,popupMatchSelectWidth:600,...a})},_=n(812),S=n(46628);let w=e=>{let{monitorId:t,system:n,allowIgnore:a,activeTab:r,addIcon:o=(0,i.jsx)(s.PJP.MCw,{}),ignoreIcon:l=(0,i.jsx)(s.PJP.uzw,{}),onPromoteSuccess:u}=e,[c,{isLoading:d}]=(0,f.Kj)(),[g,{isLoading:m}]=(0,f.Lm)(),[h,{isLoading:p}]=(0,f.RA)(),y=(0,s.p8r)(),x=async()=>{if(!n.urn){y((0,S.Vo)("Cannot promote: system URN is missing"));return}let e=await c({monitor_config_key:t,urn:n.urn});(0,_.D4)(e)?y((0,S.Vo)((0,_.e$)(e.error))):(y((0,S.t5)("".concat(n.name||"System"," has been promoted to the system inventory."))),u&&u())},j=async()=>{if(!n.urn){y((0,S.Vo)("Cannot ignore: system URN is missing"));return}let e=await g({monitor_config_key:t,urn:n.urn});(0,_.D4)(e)?y((0,S.Vo)((0,_.e$)(e.error))):(y((0,S.t5)("".concat(n.name||"System"," has been ignored."))),u&&u())},C=async()=>{if(!n.urn){y((0,S.Vo)("Cannot restore: system URN is missing"));return}let e=await h({monitor_config_key:t,urn:n.urn});(0,_.D4)(e)?y((0,S.Vo)((0,_.e$)(e.error))):(y((0,S.t5)("".concat(n.name||"System"," has been restored."))),u&&u())},b=d||m||p,k=r===v.A.IGNORED;return(0,i.jsxs)(s.TaI,{children:[a&&!k&&(0,i.jsx)(s.ua7,{title:"Ignore",children:(0,i.jsx)(s.zxk,{"data-testid":"ignore-btn",size:"small",onClick:j,disabled:!n.urn||b,loading:m,icon:l,"aria-label":"Ignore",children:!l&&"Ignore"})}),k?(0,i.jsx)(s.ua7,{title:n.urn?"Restore":"This system cannot be restored: URN is missing.",children:(0,i.jsx)(s.zxk,{"data-testid":"restore-btn",size:"small",onClick:C,disabled:!n.urn||b,loading:p,icon:(0,i.jsx)(s.PJP.CQM,{}),"aria-label":"Restore",children:"Restore"})}):(0,i.jsx)(s.ua7,{title:n.urn?"Add":"This system cannot be promoted: URN is missing.",children:(0,i.jsx)(s.zxk,{"data-testid":"add-btn",size:"small",onClick:x,disabled:!n.urn||b,loading:d,icon:o,"aria-label":"Add",children:!o&&"Add"})})]})},T=e=>{let{label:t,closable:n,onClose:a,isFromClassifier:r}=e;return(0,i.jsx)(s.Vp9,{color:"white",bordered:!0,onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},closable:n,onClose:a,style:{marginInlineEnd:"calc((var(--ant-padding-xs) * 0.5))"},icon:r&&(0,i.jsx)(s.QMR,{}),children:(0,i.jsx)(s.xvT,{size:"sm",children:t})})},P=e=>{var t,n;let{item:a,selected:r,onSelect:o,onNavigate:l,rowClickUrl:u,monitorId:c,activeTab:g,allowIgnore:m,onSetDataUses:f,onSelectDataUse:h,dataUsesDisabled:v,onPromoteSuccess:p}=e,y=a.urn,C=null==u?void 0:u(a),{metadata:b,diff_status:_}=a,S=null!==(t=a.name)&&void 0!==t?t:"Uncategorized",P=(0,d.useMemo)(()=>{if(null==b?void 0:b.vendor_logo_url)return b.vendor_logo_url;let e=a.vendor_id||S;if(e&&"Uncategorized"!==e)try{let t=(0,x.ge)(e);if(t)return(0,x.Ms)(t,36)}catch(e){}},[null==b?void 0:b.vendor_logo_url,a.vendor_id,S]),M=e=>{o&&y&&o(y,e)};return(0,i.jsx)(s.aVo.Item,{actions:[(0,i.jsx)(w,{monitorId:c,system:a,allowIgnore:m,activeTab:g,onPromoteSuccess:p},"actions")],children:(0,i.jsx)(s.aVo.Item.Meta,{avatar:(0,i.jsxs)(s.kCb,{align:"center",gap:"small",children:[(0,i.jsx)(s.XZJ,{checked:r,onChange:e=>M(e.target.checked),onClick:e=>e.stopPropagation()}),(0,i.jsx)(s.qEK,{size:18,src:P,icon:(0,i.jsx)(s.PJP.Zrf,{}),alt:S})]}),title:(0,i.jsxs)(s.kCb,{gap:"small",align:"center",wrap:"wrap",children:[(0,i.jsx)(s.zxk,{type:"text",size:"small",onClick:()=>{C&&l&&l(C)},children:(0,i.jsx)(s.xvT,{strong:!0,children:S})}),_&&j._7[_]&&(0,i.jsx)(s.Vp9,{color:j.aV[_],children:j._7[_]})]}),description:(0,i.jsx)(k,{mode:"multiple",value:null!==(n=a.preferred_data_uses)&&void 0!==n?n:[],urn:y,tagRender:e=>{var t;let n=null===(t=a.data_uses)||void 0===t?void 0:t.includes(e.value);return T({...e,isFromClassifier:n,onClose:()=>{if(f&&y){var t,n;f(y,null!==(n=null===(t=a.preferred_data_uses)||void 0===t?void 0:t.filter(t=>t!==e.value))&&void 0!==n?n:[])}}})},onSelectDataUse:e=>{if(h)h(e);else if(f&&y){var t;let n=null!==(t=a.preferred_data_uses)&&void 0!==t?t:[];n.includes(e)||f(y,[...n,e])}},disabled:v})})},y)},M=e=>{let{monitorId:t,statusFilters:n,setStatusFilters:a,vendorFilters:r,setVendorFilters:o,dataUsesFilters:l,setDataUsesFilters:u,reset:c}=e,{getDataUseDisplayName:g}=(0,b.Z)(),{data:m}=(0,f.oV)({monitor_config_key:t},{skip:!t}),h=(0,d.useMemo)(()=>{if(n&&0!==n.length)return n[0]},[n]),v=(0,d.useMemo)(()=>(null==m?void 0:m.diff_status)?m.diff_status.map(e=>{var t;return{label:null!==(t=j._7[e])&&void 0!==t?t:e,value:e}}):[],[null==m?void 0:m.diff_status]),p=(0,d.useMemo)(()=>{if(r&&0!==r.length)return r[0]},[r]),y=(0,d.useMemo)(()=>(null==m?void 0:m.data_uses)?m.data_uses.map(e=>({label:g(e),value:e})):[],[null==m?void 0:m.data_uses,g]),x=n&&n.length>0||r&&r.length>0||l&&l.length>0;return(0,i.jsxs)(s.kCb,{gap:"small",align:"center",children:[x&&(0,i.jsx)(s.zxk,{type:"text",onClick:c,"data-testid":"clear-filters-button","aria-label":"Clear all filters",children:"Clear filters"}),(0,i.jsx)(s.PhF,{placeholder:"Status",options:v,value:h,onChange:e=>{e?a([e]):a([])},allowClear:!0,className:"w-40","data-testid":"status-filter-select","aria-label":"Filter by status"}),(0,i.jsx)(s.PhF,{placeholder:"Type",options:j._k.map(e=>({label:e.label,value:e.key})),value:p,onChange:e=>{e?o([e]):o([])},allowClear:!0,className:"w-40","data-testid":"type-filter-select","aria-label":"Filter by type"}),(0,i.jsx)(s.PhF,{placeholder:"Data use",options:y,value:null!=l?l:[],onChange:e=>{u(e.length>0?e:[])},mode:"multiple",allowClear:!0,maxTagCount:"responsive",maxTagPlaceholder:e=>(0,i.jsx)(s.ua7,{title:(0,i.jsx)(s.kCb,{vertical:!0,children:e.map(e=>{let{label:t,value:n}=e;return(0,i.jsx)("span",{children:t},n)})}),children:(0,i.jsxs)("span",{children:["+ ",e.length]})}),className:"w-72","data-testid":"data-use-filter-select","aria-label":"Filter by data use"})]})};var I=n(40431);let R=[],E=[],N=[],A=()=>{let[e,t]=(0,I.v1)("statusFilters",(0,I.S$)(I.Oi).withDefault(R)),[n,i]=(0,I.v1)("vendorFilters",(0,I.S$)(I.Oi).withDefault(E)),[s,a]=(0,I.v1)("dataUsesFilters",(0,I.S$)(I.Oi).withDefault(N));return{statusFilters:e,setStatusFilters:t,vendorFilters:n,setVendorFilters:i,dataUsesFilters:s,setDataUsesFilters:a,reset:()=>{t([]),i([]),a([])}}},D=e=>{let{monitorId:t,onSuccess:n}=e,i=(0,s.p8r)(),[a,{isLoading:r}]=(0,f.OB)(),[o,{isLoading:l}]=(0,f.ip)(),[u,{isLoading:c}]=(0,f.Vd)();return{handleBulkAction:(0,d.useCallback)(async(e,s)=>{let r,l;let c=s.map(e=>e.urn);if(0===c.length){i((0,S.Vo)("No valid systems selected. Please select systems with URNs."));return}if(e===j.Qk.ADD){r=await a({monitor_config_key:t,urns:c});let e=c.length;l="".concat(e," system").concat(e>1?"s":""," ").concat(e>1?"have":"has"," been promoted to the system inventory.")}else if(e===j.Qk.IGNORE){r=await o({monitor_config_key:t,urns:c});let e=c.length;l="".concat(e," system").concat(e>1?"s":""," ").concat(e>1?"have":"has"," been ignored.")}else{if(e!==j.Qk.RESTORE)return;r=await u({monitor_config_key:t,urns:c});let n=c.length;l="".concat(n," system").concat(n>1?"s":""," ").concat(n>1?"have":"has"," been restored.")}(0,_.D4)(r)?i((0,S.Vo)((0,_.e$)(r.error))):(i((0,S.t5)(l)),null==n||n())},[t,a,o,u,i,n]),isBulkActionInProgress:r||l||c}},z=e=>{let{items:t,getRecordKey:n}=e,[i,s]=(0,d.useState)(new Set),a=i.size>0,r=i.size,o=(0,d.useCallback)(e=>{if(e){var i;s(new Set(null!==(i=null==t?void 0:t.map(e=>n(e)))&&void 0!==i?i:[]))}else s(new Set)},[t,n]),l=(0,d.useCallback)((e,t)=>{s(n=>{let i=new Set(n);return t?i.add(e):i.delete(e),i})},[]),u=(0,d.useCallback)(()=>{s(new Set)},[]),c=(0,d.useMemo)(()=>!!t&&0!==t.length&&i.size>0&&i.size===t.length&&t.every(e=>i.has(n(e))),[t,i,n]),g=(0,d.useMemo)(()=>!!t&&0!==t.length&&i.size>0&&i.size<t.length,[t,i]),m=(0,d.useMemo)(()=>t?t.filter(e=>i.has(n(e))):[],[t,i,n]),f=(0,d.useCallback)(e=>i.has(n(e)),[i,n]);return{selectedKeys:i,hasSelectedRows:a,selectedRowsCount:r,selectedItems:m,isAllSelected:c,isIndeterminate:g,handleSelectAll:o,handleSelectItem:l,clearSelection:u,isItemSelected:f}};var O=n(60240);let q=e=>{let{isIgnoredTab:t,allowIgnore:n,isBulkActionInProgress:i,onBulkAction:s}=e;return t?[{key:j.Qk.RESTORE,label:"Restore",onClick:()=>s(j.Qk.RESTORE),disabled:i}]:[...n?[{key:j.Qk.IGNORE,label:"Ignore",onClick:()=>s(j.Qk.IGNORE),disabled:i}]:[],{key:j.Qk.ADD,label:"Add",onClick:()=>s(j.Qk.ADD),disabled:i}]},F=e=>!!e.diff_status&&!e.diff_status.includes(O.LL.MUTED),U=e=>{var t,n;let{monitorId:a}=e,r=A(),{data:o,isLoading:l,searchQuery:u,updateSearch:c,paginationProps:g,activeTab:m,activeParams:f,rowClickUrl:h,getRecordKey:x,refetch:j}=p({monitorId:a,statusFilters:r.statusFilters,vendorFilters:r.vendorFilters,dataUsesFilters:r.dataUsesFilters}),{selectedItems:C,hasSelectedRows:b,selectedRowsCount:k,isAllSelected:_,isIndeterminate:S,handleSelectAll:w,handleSelectItem:T,clearSelection:I,isItemSelected:R}=z({items:null==o?void 0:o.items,getRecordKey:x}),{handleBulkAction:E,isBulkActionInProgress:N}=D({monitorId:a,getRecordKey:x,onSuccess:()=>{I(),j()}}),O=m===v.A.IGNORED,U=F(f),L=(0,d.useCallback)(e=>{E(e,C)},[E,C]),V=(0,d.useMemo)(()=>q({isIgnoredTab:O,allowIgnore:U,isBulkActionInProgress:N,onBulkAction:L}),[O,U,N,L]);return(0,i.jsxs)(s.kCb,{vertical:!0,gap:"middle",className:"h-full",children:[(0,i.jsxs)(s.kCb,{justify:"space-between",children:[(0,i.jsx)(s.kCb,{gap:"small",children:(0,i.jsx)(y.f,{value:u,onChange:c,placeholder:"Search"})}),(0,i.jsxs)(s.kCb,{gap:"small",children:[(0,i.jsx)(M,{monitorId:a,...r}),(0,i.jsx)(s.Ltx,{menu:{items:V},disabled:!b||N,children:(0,i.jsx)(s.zxk,{type:"primary",icon:(0,i.jsx)(s.PJP._ME,{}),iconPosition:"end",disabled:!b||N,loading:N,children:"Actions"})}),(0,i.jsx)(s.ua7,{title:"Refresh",children:(0,i.jsx)(s.zxk,{icon:(0,i.jsx)(s.PJP.CQM,{}),"aria-label":"Refresh",onClick:j,loading:l})})]})]}),(0,i.jsxs)(s.kCb,{gap:"middle",align:"center",children:[(0,i.jsx)(s.XZJ,{checked:_,indeterminate:S,onChange:e=>w(e.target.checked),title:"Select all"}),(0,i.jsx)("span",{className:"ml-2",children:"Select all"}),k>0&&(0,i.jsxs)(s.xvT,{strong:!0,children:[k.toLocaleString()," selected"]})]}),(0,i.jsx)(s.aVo,{dataSource:null==o?void 0:o.items,loading:l,className:"h-full overflow-y-scroll",locale:{emptyText:(0,i.jsx)(s.HYy,{image:s.HYy.PRESENTED_IMAGE_SIMPLE,description:"All caught up!"})},renderItem:e=>(0,i.jsx)(P,{item:e,selected:R(e),onSelect:T,rowClickUrl:h,monitorId:a,activeTab:m,allowIgnore:U,onPromoteSuccess:j})}),(0,i.jsx)(s.tlE,{...g,total:(null==o?void 0:o.total)||0,showSizeChanger:{suffixIcon:(0,i.jsx)(s.PJP._ME,{})},hideOnSinglePage:(null===(t=g.pageSize)||void 0===t?void 0:t.toString())===(null===(n=g.pageSizeOptions)||void 0===n?void 0:n[0])})]})},L={[c.em.ACTIVITY]:l.JF,[c.em.ATTENTION_REQUIRED]:l.wc},V="Attempting to access monitor results without the required feature flag enabled";var Z=()=>{let{flags:{heliosV2:e}}=(0,o.hz)(),t=(0,a.useParams)(),n=(null==t?void 0:t.monitorId)?decodeURIComponent(t.monitorId):void 0,l=!n,c=!e&&V,{error:d}=p({monitorId:n});return c?(0,i.jsx)(s.x4B,{status:"error",title:c}):d?(0,i.jsx)(r.Z,{error:d,defaultMessage:"A problem occurred while fetching your systems"}):(0,i.jsx)(u.Z,{monitorId:n,routeConfig:L,children:l?null:(0,i.jsx)(U,{monitorId:n})})}},72707:function(e){e.exports={option:"TaxonomySelect_option__vY6v2"}}}]);