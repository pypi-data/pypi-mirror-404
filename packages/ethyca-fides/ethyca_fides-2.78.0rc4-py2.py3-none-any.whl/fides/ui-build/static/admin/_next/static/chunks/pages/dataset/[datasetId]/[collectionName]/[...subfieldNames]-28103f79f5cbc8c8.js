(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2096],{80396:function(e,t,l){var o=l(79867),a=l(78859);e.exports=function(e,t,l,n){return a(e,t,l(o(e,t)),n)}},62079:function(e,t,l){var o=l(31137);e.exports=function(e){return"function"==typeof e?e:o}},47215:function(e,t,l){var o=l(78859);e.exports=function(e,t,l){return null==e?e:o(e,t,l)}},90271:function(e,t,l){var o=l(80396),a=l(62079);e.exports=function(e,t,l){return null==e?e:o(e,t,a(l))}},16383:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[datasetId]/[collectionName]/[...subfieldNames]",function(){return l(26052)}])},12627:function(e,t,l){"use strict";var o=l(24246),a=l(79283),n=l(34929);t.Z=e=>{let{selectedTaxonomies:t,showDisabled:l=!1,...i}=e,{getDataCategoryDisplayNameProps:s,getDataCategories:r}=(0,n.Z)(),d=(l?r():r().filter(e=>e.active)).filter(e=>!(null==t?void 0:t.includes(e.fides_key))).map(e=>{let{name:t,primaryName:l}=s(e.fides_key);return{value:e.fides_key,name:t,primaryName:l,description:e.description||"",label:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("strong",{children:l||t}),l&&": ".concat(t)]}),title:e.fides_key}});return(0,o.jsx)(a.l,{options:d,...i})}},66112:function(e,t,l){"use strict";var o=l(24246),a=l(36010),n=l(27378),i=l(12627),s=l(34929),r=l(26183);t.Z=e=>{let{selectedTaxonomies:t,onAddTaxonomy:l,onRemoveTaxonomy:d}=e,[c,u]=(0,n.useState)(!1),{getDataCategoryDisplayName:f}=(0,s.Z)();return(0,o.jsxs)(r.Z,{children:[t.map(e=>(0,o.jsx)(a.Vp9,{"data-testid":"classification-".concat(e),color:"white",closable:!0,onClose:()=>d(e),closeButtonLabel:"Remove category",children:f(e)},e)),(0,o.jsx)(a.Vp9,{onClick:()=>u(!0),"data-testid":"add-category-btn",addable:!0,"aria-label":"Add category"}),c&&(0,o.jsx)(a.TJV,{className:"select-wrapper",position:"absolute",zIndex:10,top:"0",left:"0",width:"100%",height:"max",bgColor:"#fff",children:(0,o.jsx)(i.Z,{selectedTaxonomies:t,onChange:e=>{u(!1),l(e)},onBlur:()=>u(!1),open:c})})]})}},76252:function(e,t,l){"use strict";var o=l(24246),a=l(36010),n=l(30454),i=l.n(n),s=l(47215),r=l.n(s),d=l(90271),c=l.n(d),u=l(79806),f=l(20386),m=l(63927),h=l(69435);t.Z=e=>{let{field:t,isOpen:l,onClose:n,dataset:s,collectionName:d,subfields:p}=e,[g]=(0,f.TG)(),{isOpen:x,onOpen:v,onClose:j}=(0,a.E2M)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.ZP,{isOpen:l,onClose:n,description:"Fields are an array of objects that describe the collection's fields. Provide additional context to this field by filling out the fields below.",header:(0,o.jsx)(u.zR,{title:"Field Name: ".concat(null==t?void 0:t.name)}),footer:(0,o.jsx)(u.Gn,{onClose:n,onDelete:v,formId:m.e}),children:(0,o.jsx)(m.Z,{values:t,onSubmit:e=>{let l=(0,h.Fk)({dataset:s,collectionName:d,subfields:p?[...p,(null==t?void 0:t.name)||""]:[(null==t?void 0:t.name)||""]}),o={...t,...e},a=i()(s);r()(a,l,o),g(a),n()},dataType:"field"})}),(0,o.jsx)(a.cVQ,{isOpen:x,onClose:j,onConfirm:()=>{let e=(0,h.Fk)({dataset:s,collectionName:d,subfields:p}),l=i()(s);c()(l,e,e=>({...e,fields:e.fields.filter(e=>e.name!==(null==t?void 0:t.name))})),g(l),n(),j()},title:"Delete Field",message:(0,o.jsxs)(a.Bjg,{children:["You are about to permanently delete the field named"," ",(0,o.jsx)(a.Bjg,{color:"complimentary.500",as:"span",fontWeight:"bold",children:null==t?void 0:t.name})," ","from this dataset. Are you sure you would like to continue?"]})})]})}},26052:function(e,t,l){"use strict";l.r(t);var o=l(24246),a=l(92222),n=l(59003),i=l(36010),s=l(30454),r=l.n(s),d=l(47215),c=l.n(d),u=l(86677),f=l(27378),m=l(59849),h=l(77213),p=l(77830),g=l(58754),x=l(15793),v=l(66112),j=l(69828),b=l(41966),y=l(76252),C=l(69435);let w=(0,a.Cl)(),_=()=>(0,o.jsx)(i.s_g,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,o.jsx)(i.s_g,{children:(0,o.jsx)(i.Bjg,{fontSize:"md",fontWeight:"600",children:"No fields found."})})});t.default=()=>{let e=(0,u.useRouter)(),[t]=(0,b.TG)(),l=decodeURIComponent(e.query.datasetId),s=decodeURIComponent(e.query.collectionName),d=e.query.subfieldNames.map(decodeURIComponent),{isLoading:R,data:k,error:N}=(0,b.oM)(l),Z=(0,f.useMemo)(()=>(null==k?void 0:k.collections)||[],[k]).find(e=>e.name===s),F=(0,f.useMemo)(()=>(null==Z?void 0:Z.fields)||[],[Z]),M=(0,f.useMemo)(()=>{let e=F;return d.forEach(t=>{let l=e.find(e=>e.name===t);e=(null==l?void 0:l.fields)||[]}),e},[F,d]),[I,T]=(0,f.useState)(),z=(0,f.useCallback)(e=>{let{dataCategory:l,field:o}=e,a=o.data_categories||[],n=(0,C.Fk)({dataset:k,collectionName:s,subfields:[...d,o.name]}),i=r()(k);c()(i,"".concat(n,".data_categories"),[...a,l]),t(i)},[k,t,s,d]),V=(0,f.useCallback)(e=>{let{dataCategory:l,field:o}=e,a=o.data_categories||[],n=(0,C.Fk)({dataset:k,collectionName:s,subfields:[...d,null==o?void 0:o.name]}),i=r()(k);c()(i,"".concat(n,".data_categories"),a.filter(e=>e!==l)),t(i)},[k,t,s,d]),E=(0,f.useCallback)(t=>{let o=[...d.map(encodeURIComponent),t.name];e.push({pathname:p.y1,query:{datasetId:l,collectionName:s,subfieldNames:o}})},[l,e,s,d]),S=(0,f.useMemo)(()=>[w.accessor(e=>e.name,{id:"name",cell:e=>{var t;let l=e.row.original.fields&&(null===(t=e.row.original.fields)||void 0===t?void 0:t.length)>0;return(0,o.jsx)(x.G3,{fontWeight:l?"semibold":"normal",value:e.getValue()})},header:e=>(0,o.jsx)(x.Rr,{value:"Field Name",...e}),size:180}),w.accessor(e=>{var t;return null===(t=e.fides_meta)||void 0===t?void 0:t.data_type},{id:"type",cell:e=>e.getValue()?(0,o.jsx)(x.A4,{value:e.getValue()}):(0,o.jsx)(x.G3,{value:void 0}),header:e=>(0,o.jsx)(x.Rr,{value:"Type",...e}),size:80}),w.accessor(e=>e.description,{id:"description",cell:e=>(0,o.jsx)(x.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,o.jsx)(x.Rr,{value:"Description",...e}),size:300,meta:{showHeaderMenu:!0}}),w.accessor(e=>e.data_categories,{id:"data_categories",cell:e=>{var t;let l=e.row.original;return!(e.row.original.fields&&(null===(t=e.row.original.fields)||void 0===t?void 0:t.length)>0)&&(0,o.jsx)(v.Z,{selectedTaxonomies:e.getValue()||[],onAddTaxonomy:e=>z({dataCategory:e,field:l}),onRemoveTaxonomy:e=>V({dataCategory:e,field:l})})},header:e=>(0,o.jsx)(x.Rr,{value:"Data categories",...e}),size:300,meta:{disableRowClick:!0}}),w.display({id:"actions",header:"Actions",cell:e=>{let{row:t}=e,l=t.original;return(0,o.jsx)(i.Br$,{spacing:0,"data-testid":"field-".concat(l.name),children:(0,o.jsx)(i.zxk,{size:"small",icon:(0,o.jsx)(i.oji,{}),onClick:()=>{D(l),G(!0)},children:"Edit"})})},meta:{disableRowClick:!0}})],[z,V]),A=(0,f.useMemo)(()=>I?M.filter(e=>e.name.toLowerCase().includes(I.toLowerCase())):M,[M,I]),O=(0,n.b7)({getCoreRowModel:(0,a.sC)(),getFilteredRowModel:(0,a.vL)(),getSortedRowModel:(0,a.tj)(),columns:S,data:A,columnResizeMode:"onChange"}),[q,G]=(0,f.useState)(!1),[B,D]=(0,f.useState)(),P=(0,f.useMemo)(()=>{let e=[{title:"All datasets",href:p.$m},{title:l,href:{pathname:p.o5,query:{datasetId:l}},icon:j.Y[1]},{title:s,icon:j.Y[2],href:{pathname:p.RF,query:{datasetId:l,collectionName:s}}}];return d.forEach((t,o)=>{e.push({title:t,href:o<d.length-1?{pathname:p.y1,query:{datasetId:l,collectionName:s,subfieldNames:d.slice(0,o+1).map(encodeURIComponent)}}:void 0,icon:j.Y[3]})}),e},[l,s,d]);return N?(0,o.jsx)(m.Z,{error:N,defaultMessage:"A problem occurred while fetching subfields for the collection ".concat(s)}):(0,o.jsxs)(h.Z,{title:"Dataset - ".concat(l),children:[(0,o.jsx)(g.Z,{heading:"Datasets",breadcrumbItems:P}),R?(0,o.jsx)(x.I4,{rowHeight:36,numRows:15}):(0,o.jsxs)(i.TJV,{"data-testid":"fields-table",children:[(0,o.jsx)(x.Q$,{children:(0,o.jsx)(x.HO,{globalFilter:I,setGlobalFilter:T,placeholder:"Search",testid:"fields-search"})}),(0,o.jsx)(x.ZK,{tableInstance:O,emptyTableNotice:(0,o.jsx)(_,{}),onRowClick:E,getRowIsClickable:e=>{var t;return!!(e.fields&&(null===(t=e.fields)||void 0===t?void 0:t.length)>0)}}),(0,o.jsx)(y.Z,{isOpen:q,onClose:()=>{G(!1),D(void 0)},field:B,dataset:k,collectionName:s,subfields:d})]})]})}}},function(e){e.O(0,[454,409,343,2888,9774,179],function(){return e(e.s=16383)}),_N_E=e.O()}]);