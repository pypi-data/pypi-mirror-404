(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4966],{18193:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/email-templates",function(){return i(43104)}])},77213:function(e,t,i){"use strict";i.d(t,{Z:function(){return m}});var n=i(24246),s=i(36010),a=i(88038),r=i.n(a),o=i(86677);i(27378);var l=i(25980),g=i(90867),u=i(42478),d=i(77830),c=()=>{let e=(0,o.useRouter)();return(0,n.jsx)(s.TJV,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,n.jsxs)(s.TJV,{children:[(0,n.jsxs)(s.EO$,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,n.jsx)(s.Bjg,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,n.jsx)(s.zxk,{onClick:()=>{e.push(d.AD)},children:"Configure"})]}),(0,n.jsxs)(s.Bjg,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},m=e=>{let{children:t,title:i,padded:a=!0,mainProps:d}=e,m=(0,l.hz)(),p=(0,o.useRouter)(),f="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,h=!(m.flags.messagingConfiguration&&f),{data:y}=(0,u.JE)(void 0,{skip:h}),{data:x}=(0,g.PW)(void 0,{skip:h}),j=m.flags.messagingConfiguration&&(!y||!x)&&f;return(0,n.jsxs)(s.ad9,{"data-testid":i,direction:"column",h:"100vh",children:[(0,n.jsxs)(r(),{children:[(0,n.jsxs)("title",{children:["Fides Admin UI - ",i]}),(0,n.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)(s.ad9,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...d,children:[j?(0,n.jsx)(c,{}):null,t]})]})}},58754:function(e,t,i){"use strict";var n=i(24246),s=i(36010),a=i(70788);t.Z=e=>{let{heading:t,breadcrumbItems:i,isSticky:r=!0,children:o,rightContent:l,style:g,...u}=e;return(0,n.jsxs)("div",{...u,style:r?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...g}:{paddingBottom:"24px",...g},children:[(0,n.jsxs)(s.kCb,{justify:"space-between",children:["string"==typeof t?(0,n.jsx)(s.Dxz,{className:i||o?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,l&&(0,n.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!i&&(0,n.jsx)(a.m,{className:o?"pb-4":void 0,items:i,"data-testid":"page-breadcrumb"}),o]})}},10342:function(e,t,i){"use strict";var n=i(24246),s=i(36010),a=i(46238);t.Z=e=>{let{title:t,tooltip:i,children:r,...o}=e;return(0,n.jsxs)(s.TJV,{borderRadius:"md",border:"1px solid",borderColor:"gray.200",...o,children:[(0,n.jsxs)(s.y_b,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:[t,i?(0,n.jsx)(s.Bjg,{as:"span",mx:1,children:(0,n.jsx)(a.b,{label:i})}):void 0]}),(0,n.jsx)(s.EO$,{p:6,spacing:6,children:r})]})}},70788:function(e,t,i){"use strict";i.d(t,{m:function(){return g}});var n=i(24246),s=i(36010),a=i(79894),r=i.n(a),o=i(27378);let{Text:l}=s.Typography,g=e=>{let{items:t,...i}=e,a=(0,o.useMemo)(()=>null==t?void 0:t.map((e,i)=>{let a=i===t.length-1,o={...e},g=o.onClick&&!o.href;return("string"==typeof o.title&&(o.title=(0,n.jsx)(l,{style:{color:"inherit",maxWidth:a?void 0:400},ellipsis:!a,id:a?"breadcrumb-current-page":void 0,children:o.title})),g)?o.title=(0,n.jsx)(s.zxk,{type:"text",size:"small",icon:o.icon,onClick:o.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:o.title}):(o.icon&&(o.title=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"anticon align-text-bottom",children:o.icon}),o.title]})),o.href&&o.title&&(o.title=(0,n.jsx)(r(),{href:o.href,className:"ant-breadcrumb-link",children:o.title}),delete o.href)),o}),[t]);return(0,n.jsx)(s.aGc,{items:a,...i})}},47466:function(e,t,i){"use strict";i.d(t,{KC:function(){return r},ew:function(){return o},gQ:function(){return a},jM:function(){return n},lE:function(){return s}});let{useGetMessagingTemplatesQuery:n,useUpdateMessagingTemplatesMutation:s,useGetMessagingTemplateByIdQuery:a,useGetMessagingTemplateDefaultQuery:r,useDeleteMessagingTemplateByIdMutation:o}=i(78780).u.injectEndpoints({endpoints:e=>({getMessagingTemplates:e.query({query:()=>({url:"messaging/templates"}),providesTags:()=>["Messaging Templates"]}),updateMessagingTemplates:e.mutation({query:e=>({url:"messaging/templates",method:"PUT",body:e}),invalidatesTags:()=>["Messaging Templates"]}),getMessagingTemplateById:e.query({query:e=>({url:"/messaging/templates/".concat(e)}),providesTags:()=>["Property-Specific Messaging Templates"]}),getMessagingTemplateDefault:e.query({query:e=>({url:"/messaging/templates/default/".concat(e)})}),deleteMessagingTemplateById:e.mutation({query:e=>({url:"/messaging/templates/".concat(e),method:"DELETE"}),invalidatesTags:()=>["Property-Specific Messaging Templates"]})})})},42478:function(e,t,i){"use strict";i.d(t,{FU:function(){return g},JE:function(){return s},Ki:function(){return d},SU:function(){return c},W:function(){return m},h9:function(){return a},jc:function(){return n},qt:function(){return l},sn:function(){return u}});let{useGetEmailInviteStatusQuery:n,useGetActiveMessagingProviderQuery:s,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:r,useGetMessagingConfigurationDetailsQuery:o,useGetMessagingConfigurationsQuery:l,useGetMessagingConfigurationByKeyQuery:g,useUpdateMessagingConfigurationByKeyMutation:u,useUpdateMessagingConfigurationSecretsByKeyMutation:d,useCreateTestConnectionMessageMutation:c,useDeleteMessagingConfigurationByKeyMutation:m}=i(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,i,n)=>{let s=await n({url:"messaging/default/active"});return s.error&&404===s.error.status?{data:null}:s},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},43104:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return p}});var n=i(24246),s=i(36010),a=i(77213),r=i(58754),o=i(34090),l=i(10342),g=i(40324),u=i(812),d=i(46628),c=i(47466),m=e=>{let{emailTemplates:t}=e,[i,{isLoading:a}]=(0,c.lE)(),r=(0,s.p8r)(),m=async(e,t)=>{let n=Object.entries(e).map(e=>{let[t,{content:i}]=e;return{type:t,content:i}});(i=>{if((0,u.D4)(i)){let e=(0,u.e$)(i.error,"An unexpected error occurred while editing the email templates. Please try again.");r((0,d.Vo)(e))}else r((0,d.t5)("Email templates saved.")),t.resetForm({values:e})})(await i(n))},p=t.reduce((e,t)=>({...e,[t.type]:{label:t.label,content:t.content}}),{});return(0,n.jsx)(o.J9,{enableReinitialize:!0,initialValues:p,onSubmit:m,children:()=>(0,n.jsxs)(o.l0,{style:{paddingTop:"12px",paddingBottom:"12px"},children:[Object.entries(p).map(e=>{let[t,i]=e;return(0,n.jsx)(s.TJV,{py:3,children:(0,n.jsxs)(l.Z,{title:i.label,children:[(0,n.jsx)(g.j0,{label:"Message subject",name:"".concat(t,".content.subject"),variant:"stacked"}),(0,n.jsx)(g.Ks,{label:"Message body",name:"".concat(t,".content.body"),variant:"stacked",resize:!0})]})},t)}),(0,n.jsx)(s.ad9,{justifyContent:"right",width:"100%",paddingTop:2,children:(0,n.jsx)(s.zxk,{htmlType:"submit",type:"primary",loading:a,children:"Save"})})]})})},p=()=>{let{data:e,isLoading:t}=(0,c.jM)();return t?(0,n.jsx)(a.Z,{title:"Email templates",children:(0,n.jsx)(s.Y6B,{})}):(0,n.jsx)(a.Z,{title:"Email templates",children:(0,n.jsxs)(s.TJV,{"data-testid":"email-templates",children:[(0,n.jsx)(r.Z,{heading:"Email Templates"}),(0,n.jsxs)(s.TJV,{maxWidth:"720px",children:[(0,n.jsx)(s.Bjg,{fontSize:"sm",children:"When privacy requests are submitted, Fides emails the data subject to confirm their identity and keep them updated on the status of the request. The templates below allow you to configure the subject and body of the email to suit your business needs. To change the appearance of the email, you may use the editors within your messaging provider (e.g. Mailgun, SendGrid, Twilio)."}),(0,n.jsx)(s.TJV,{padding:2,children:(0,n.jsx)(m,{emailTemplates:e})})]})]})})}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=18193)}),_N_E=e.O()}]);