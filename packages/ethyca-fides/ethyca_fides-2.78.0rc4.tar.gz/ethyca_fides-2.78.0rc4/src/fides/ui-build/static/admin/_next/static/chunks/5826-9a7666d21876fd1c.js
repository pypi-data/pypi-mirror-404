"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5826],{15826:function(e,t,l){l.d(t,{$:function(){return k}});var s=l(24246),n=l(92222),i=l(59003),o=l(25980),a=l(812),r=l(15793),d=l(46628),c=l(36010),g=l(86677),u=l(27378),h=l(16134),m=l(58452),x=l(77830),j=l(23923),p=l(32885);let C=e=>{let{onChange:t,displayText:l,isChecked:n,value:i}=e;return(0,s.jsx)(c.gxE,{id:"checkbox-".concat(i),value:i,height:"20px",mb:3,isChecked:n,onChange:t,colorScheme:"complimentary",mr:5,children:(0,s.jsx)(c.Bjg,{fontSize:"sm",lineHeight:5,height:"20px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:l})},i)},f={GVL:!1,AC:!1,COMPASS:!1};var b=e=>{let{isOpen:t,onClose:l,tableInstance:n}=e,[i,o]=(0,u.useState)(f);return(0,u.useMemo)(()=>{let e={id:"vendor_id",value:[]};i.GVL&&e.value.push("gvl"),i.AC&&e.value.push("gacp"),n.setColumnFilters([e])},[i,n]),(0,s.jsxs)(c.TGG,{isOpen:t,onClose:l,isCentered:!0,size:"2xl",children:[(0,s.jsx)(c.T5Q,{}),(0,s.jsxs)(c.Z8H,{children:[(0,s.jsx)(c.geD,{children:"Filters"}),(0,s.jsx)(c.fpf,{}),(0,s.jsx)(c.KMv,{}),(0,s.jsxs)(c.zOL,{maxH:"85vh",px:6,py:4,overflowX:"auto",children:[(0,s.jsx)(c.Bjg,{fontSize:"md",fontWeight:"bold",mb:2,children:"Sources"}),(0,s.jsx)(C,{onChange:()=>{o(e=>({...e,GVL:!e.GVL}))},displayText:a.iC.gvl.fullName,isChecked:i.GVL,value:"gvl"}),(0,s.jsx)(C,{onChange:()=>{o(e=>({...e,AC:!e.AC}))},displayText:a.iC.gacp.fullName,isChecked:i.AC,value:"gacp"})]}),(0,s.jsx)(c.NGc,{children:(0,s.jsxs)(c.TJV,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,s.jsx)(c.zxk,{onClick:()=>{n.setColumnFilters([]),o(f)},className:"mr-3 grow",children:"Reset Filters"}),(0,s.jsx)(c.zxk,{"data-testid":"filter-done-btn",type:"primary",onClick:l,className:"grow",children:"Done"})]})})]})]})};let S=e=>{var t;let{value:l}=e,n=(0,a.cj)(l),i=null!==(t=a.iC[n])&&void 0!==t?t:{label:"",fullName:""};return(0,s.jsx)(c.ad9,{alignItems:"center",justifyContent:"center",height:"100%",mr:"2",children:(0,s.jsx)(c.ua7,{title:i.fullName,children:(0,s.jsx)(c.Vp9,{children:i.label})})})},v=(0,n.Cl)(),w=()=>(0,s.jsxs)(c.s_g,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",children:[(0,s.jsxs)(c.s_g,{children:[(0,s.jsx)(c.Bjg,{fontSize:"md",fontWeight:"600",children:"No results found."}),(0,s.jsx)(c.Bjg,{fontSize:"sm",children:'Can\'t find the vendor you are looking for? Add custom systems or unlisted\n      vendors by selecting the "Add custom vendor" button below.'})]}),(0,s.jsx)(j.Z,{buttonLabel:"Add custom vendor",buttonProps:{type:"primary"}})]}),y="Vendor",k=e=>{let{redirectRoute:t}=e,l=(0,c.p8r)(),{dictionaryService:C,tcf:f}=(0,o.hz)(),{isLoading:k}=(0,p.x8)(),R=(0,g.useRouter)(),{isLoading:L}=(0,p.iN)(void 0,{skip:!C}),[z,{isLoading:_,isSuccess:A}]=(0,p.Qk)(),I=(0,h.C)(p.gG),[M,N]=(0,u.useState)(),{isOpen:F,onOpen:G,onClose:V}=(0,c.E2M)(),{isOpen:P,onClose:O,onOpen:T}=(0,c.E2M)(),[B,D]=(0,u.useState)(!1),E=I.every(e=>e.linked_system),H=(0,u.useMemo)(()=>[v.display({id:"select",header:e=>{let{table:t}=e;return(0,s.jsx)(r.k,{dataTestId:"select-page-checkbox",isChecked:t.getIsAllPageRowsSelected(),isDisabled:E||t.getPaginationRowModel().rows.filter(e=>e.original.linked_system).length===t.getState().pagination.pageSize,isIndeterminate:t.getPaginationRowModel().rows.filter(e=>e.getCanSelect()).some(e=>!e.getIsSelected()),onChange:()=>{t.setRowSelection(e=>{let l={...e};return t.getRowModel().rows.forEach(e=>{e.getCanSelect()&&(l[e.id]=!l[e.id])}),l}),D(e=>!e)}})},cell:e=>{let{row:t}=e;return(0,s.jsx)(r.k,{isChecked:t.getIsSelected(),isDisabled:!t.getCanSelect(),isIndeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler()})}}),v.accessor(e=>e.vendor_id,{id:"id",cell:e=>(0,s.jsx)(r.G3,{value:e.getValue()}),header:e=>(0,s.jsx)(r.Rr,{value:"ID",...e}),enableColumnFilter:f}),v.accessor(e=>e.name,{id:"name",cell:e=>(0,s.jsx)(r.G3,{value:e.getValue()}),header:e=>(0,s.jsx)(r.Rr,{value:"Name",...e})}),v.accessor(e=>e.vendor_id,{id:"source",cell:e=>(0,s.jsx)(S,{value:e.getValue()}),header:e=>(0,s.jsx)(r.Rr,{value:"Source",...e}),enableColumnFilter:f,filterFn:"arrIncludesSome"})],[E,f]),W=(0,i.b7)({columns:H,data:I,getCoreRowModel:(0,n.sC)(),getSortedRowModel:(0,n.tj)(),getFilteredRowModel:(0,n.vL)(),getPaginationRowModel:(0,n.G_)(),onGlobalFilterChange:N,enableRowSelection:e=>!e.original.linked_system,enableSorting:!0,enableGlobalFilter:!0,state:{globalFilter:M,columnVisibility:{id:f,source:f}},initialState:{pagination:{pageSize:r.W3[0]},columnSizing:{select:0,id:0,source:0,name:0}},enableColumnResizing:!0,columnResizeMode:"onChange"});(0,u.useEffect)(()=>{let e={};I.forEach((t,l)=>{t.linked_system&&(e[l]=!0)}),Object.keys(e).length&&W.setRowSelection(e)},[I,W]);let{totalRows:Z,onPreviousPageClick:$,isPreviousPageDisabled:Q,onNextPageClick:Y,isNextPageDisabled:J,setPageSize:K,startRange:X,endRange:q}=(0,r.bX)(W),U=async()=>{let e=W.getSelectedRowModel().rows.filter(e=>!e.original.linked_system).map(e=>e.original.vendor_id);if(e.length>0){let s=await z(e);R.push(t),(0,a.D4)(s)?l((0,d.Vo)((0,a.e$)(s.error))):l((0,d.t5)("Successfully added ".concat(e.length," ").concat(y.toLocaleLowerCase()).concat(e.length>1?"s":"")))}},ee=W.getSelectedRowModel().rows.some(e=>!e.original.linked_system);if(!C&&!k)return R.push(x.gp),null;if(_||A)return(0,s.jsx)(c.ad9,{height:"100%",justifyContent:"center",alignItems:"center",children:(0,s.jsx)(c.Y6B,{})});if(L)return(0,s.jsx)(r.I4,{rowHeight:36,numRows:15});let et=E?"All ".concat(y.toLocaleLowerCase(),"s have already been added"):"Select a ".concat(y.toLocaleLowerCase()," "),el=W.getSelectedRowModel().rows.filter(e=>!e.original.linked_system).length,es=W.getState().columnFilters.find(e=>"vendor_id"===e.id),en=es&&Array.isArray(es.value)?es.value.length:0;return(0,s.jsxs)(c.ad9,{flex:1,direction:"column",overflow:"auto","data-testid":"add-multiple-systems-tbl",children:[(0,s.jsx)(m.Z,{isOpen:P,isCentered:!0,onCancel:O,onClose:O,onConfirm:U,title:"Confirmation",message:"You are about to add ".concat(el.toLocaleString("en")," ").concat(y.toLocaleLowerCase()).concat(el>1?"s":"")}),(0,s.jsx)(b,{isOpen:F,onClose:V,tableInstance:W}),(0,s.jsxs)(r.Q$,{children:[(0,s.jsxs)(c.ad9,{alignItems:"center",grow:1,children:[(0,s.jsx)(c.TJV,{maxW:"420px",width:"100%",children:(0,s.jsx)(r.HO,{globalFilter:M,setGlobalFilter:N,placeholder:"Search"})}),el>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.Bjg,{fontWeight:"700",fontSize:"sm",lineHeight:"2",ml:4,children:[el.toLocaleString("en")," selected"]}),(0,s.jsx)(c.ua7,{title:et,children:(0,s.jsx)(c.zxk,{onClick:T,"data-testid":"add-multiple-systems-btn",disabled:!ee,className:"ml-4",children:"Add"})})]}):null]}),(0,s.jsxs)(c.Br$,{spacing:4,alignItems:"center",children:[(0,s.jsx)(j.Z,{buttonLabel:"Add custom vendor"}),f?(0,s.jsx)("span",{children:(0,s.jsxs)(c.zxk,{onClick:G,"data-testid":"filter-multiple-systems-btn",children:["Filter",en>0?(0,s.jsx)(c.Vp9,{className:"mr-0",children:en}):null]})}):null]})]}),(0,s.jsx)(r.ZK,{tableInstance:W,rowActionBar:(0,s.jsx)(r.AA,{tableInstance:W,selectedRows:el,isOpen:B}),renderRowTooltipLabel:e=>{if(!e.getCanSelect())return"This vendor has already been added. You can view the properties of this vendor by going to the System Inventory."},emptyTableNotice:(0,s.jsx)(w,{})}),(0,s.jsx)(r.s8,{pageSizes:r.W3,totalRows:Z||0,onPreviousPageClick:$,isPreviousPageDisabled:Q,onNextPageClick:Y,isNextPageDisabled:J,setPageSize:K,startRange:X,endRange:q})]})}}}]);