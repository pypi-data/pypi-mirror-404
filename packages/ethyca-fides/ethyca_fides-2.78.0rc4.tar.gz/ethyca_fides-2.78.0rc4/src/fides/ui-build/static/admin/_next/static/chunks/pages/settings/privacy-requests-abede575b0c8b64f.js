(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8687],{69489:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/privacy-requests",function(){return i(32193)}])},77213:function(e,t,i){"use strict";i.d(t,{Z:function(){return p}});var n=i(24246),a=i(36010),s=i(88038),r=i.n(s),l=i(86677);i(27378);var o=i(25980),d=i(90867),c=i(42478),u=i(77830),g=()=>{let e=(0,l.useRouter)();return(0,n.jsx)(a.TJV,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,n.jsxs)(a.TJV,{children:[(0,n.jsxs)(a.EO$,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,n.jsx)(a.Bjg,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,n.jsx)(a.zxk,{onClick:()=>{e.push(u.AD)},children:"Configure"})]}),(0,n.jsxs)(a.Bjg,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=e=>{let{children:t,title:i,padded:s=!0,mainProps:u}=e,p=(0,o.hz)(),m=(0,l.useRouter)(),y="/privacy-requests"===m.pathname||"/datastore-connection"===m.pathname,h=!(p.flags.messagingConfiguration&&y),{data:f}=(0,c.JE)(void 0,{skip:h}),{data:x}=(0,d.PW)(void 0,{skip:h}),v=p.flags.messagingConfiguration&&(!f||!x)&&y;return(0,n.jsxs)(a.ad9,{"data-testid":i,direction:"column",h:"100vh",children:[(0,n.jsxs)(r(),{children:[(0,n.jsxs)("title",{children:["Fides Admin UI - ",i]}),(0,n.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)(a.ad9,{as:"main",direction:"column",py:s?6:0,px:s?10:0,h:s?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...u,children:[v?(0,n.jsx)(g,{}):null,t]})]})}},58754:function(e,t,i){"use strict";var n=i(24246),a=i(36010),s=i(70788);t.Z=e=>{let{heading:t,breadcrumbItems:i,isSticky:r=!0,children:l,rightContent:o,style:d,...c}=e;return(0,n.jsxs)("div",{...c,style:r?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,n.jsxs)(a.kCb,{justify:"space-between",children:["string"==typeof t?(0,n.jsx)(a.Dxz,{className:i||l?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,o&&(0,n.jsx)("div",{"data-testid":"page-header-right-content",children:o})]}),!!i&&(0,n.jsx)(s.m,{className:l?"pb-4":void 0,items:i,"data-testid":"page-breadcrumb"}),l]})}},10342:function(e,t,i){"use strict";var n=i(24246),a=i(36010),s=i(46238);t.Z=e=>{let{title:t,tooltip:i,children:r,...l}=e;return(0,n.jsxs)(a.TJV,{borderRadius:"md",border:"1px solid",borderColor:"gray.200",...l,children:[(0,n.jsxs)(a.y_b,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:[t,i?(0,n.jsx)(a.Bjg,{as:"span",mx:1,children:(0,n.jsx)(s.b,{label:i})}):void 0]}),(0,n.jsx)(a.EO$,{p:6,spacing:6,children:r})]})}},70788:function(e,t,i){"use strict";i.d(t,{m:function(){return d}});var n=i(24246),a=i(36010),s=i(79894),r=i.n(s),l=i(27378);let{Text:o}=a.Typography,d=e=>{let{items:t,...i}=e,s=(0,l.useMemo)(()=>null==t?void 0:t.map((e,i)=>{let s=i===t.length-1,l={...e},d=l.onClick&&!l.href;return("string"==typeof l.title&&(l.title=(0,n.jsx)(o,{style:{color:"inherit",maxWidth:s?void 0:400},ellipsis:!s,id:s?"breadcrumb-current-page":void 0,children:l.title})),d)?l.title=(0,n.jsx)(a.zxk,{type:"text",size:"small",icon:l.icon,onClick:l.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:l.title}):(l.icon&&(l.title=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"anticon align-text-bottom",children:l.icon}),l.title]})),l.href&&l.title&&(l.title=(0,n.jsx)(r(),{href:l.href,className:"ant-breadcrumb-link",children:l.title}),delete l.href)),l}),[t]);return(0,n.jsx)(a.aGc,{items:s,...i})}},42478:function(e,t,i){"use strict";i.d(t,{FU:function(){return d},JE:function(){return a},Ki:function(){return u},SU:function(){return g},W:function(){return p},h9:function(){return s},jc:function(){return n},qt:function(){return o},sn:function(){return c}});let{useGetEmailInviteStatusQuery:n,useGetActiveMessagingProviderQuery:a,useCreateMessagingConfigurationMutation:s,useCreateMessagingConfigurationSecretsMutation:r,useGetMessagingConfigurationDetailsQuery:l,useGetMessagingConfigurationsQuery:o,useGetMessagingConfigurationByKeyQuery:d,useUpdateMessagingConfigurationByKeyMutation:c,useUpdateMessagingConfigurationSecretsByKeyMutation:u,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:p}=i(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,i,n)=>{let a=await n({url:"messaging/default/active"});return a.error&&404===a.error.status?{data:null}:a},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},32193:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return C}});var n=i(24246),a=i(36010),s=i(77213),r=i(58754),l=i(16134),o=i(812),d=i(17245),c=i(7426),u=i(31883);let g={enabled:!1,time_window_days:365};var p=()=>{var e,t;let[i]=a.l09.useForm(),{errorAlert:s,successAlert:r}=(0,d.VY)(),{isLoading:p}=(0,c.tB)({api_set:!0}),m=(0,l.C)(c.D9),[y,{isLoading:h}]=(0,c.L)(),f=a.l09.useWatch("enabled",i),x={enabled:null!==(e=null==m?void 0:m.enabled)&&void 0!==e?e:g.enabled,time_window_days:null!==(t=null==m?void 0:m.time_window_days)&&void 0!==t?t:g.time_window_days},v=async e=>{let t={privacy_request_duplicate_detection:{enabled:e.enabled,time_window_days:e.time_window_days}},i=await y(t);(0,u.D4)(i)?s("An error occurred while updating duplicate detection settings.",(0,o.e$)(i.error)):r("Duplicate detection settings updated successfully.")};return(0,n.jsxs)("div",{className:"max-w-[600px]",children:[(0,n.jsx)(a.Typography.Title,{level:2,className:"!mb-2",children:"Duplicate detection"}),(0,n.jsx)(a.Typography.Paragraph,{children:'If you enable duplicate detection, Fides will automatically detect and label likely duplicate privacy requests. Any request submitted by the same email address within the configured period of time is automatically labeled with the status of "duplicate".'}),p?(0,n.jsx)(a.OdW.Input,{active:!0,className:"mt-4"}):(0,n.jsxs)(a.l09,{form:i,layout:"horizontal",onFinish:v,initialValues:x,className:"mt-4",requiredMark:!1,children:[(0,n.jsx)(a.l09.Item,{name:"enabled",label:"Enable duplicate detection",valuePropName:"checked",children:(0,n.jsx)(a.rsf,{"data-testid":"input-enabled"})}),f&&(0,n.jsx)(a.l09.Item,{name:"time_window_days",label:"Duplicate detection window (days)",rules:[{required:!0,message:"Required"},{type:"number",min:1,max:3650,message:"Must be between 1 and 3650 days"}],children:(0,n.jsx)(a.RnZ,{min:1,max:3650,className:"w-[200px]","data-testid":"input-time_window_days"})}),(0,n.jsx)(a.l09.Item,{children:(0,n.jsx)(a.zxk,{type:"primary",htmlType:"submit",loading:h,children:"Save"})})]})]})},m=i(34090),y=i(55484),h=i(10342),f=i(40324);let{useGetPrivacyRequestRedactionPatternsQuery:x,useUpdatePrivacyRequestRedactionPatternsMutation:v}=i(78780).u.injectEndpoints({endpoints:e=>({getPrivacyRequestRedactionPatterns:e.query({query:()=>({url:"privacy-request/redaction-patterns",method:"GET"}),providesTags:["Privacy Request Redaction Patterns"]}),updatePrivacyRequestRedactionPatterns:e.mutation({query:e=>({url:"privacy-request/redaction-patterns",method:"PUT",body:e}),invalidatesTags:["Privacy Request Redaction Patterns"]})})}),b=e=>!!(e&&e.trim().length>0),j=y.Ry().shape({patterns:y.IX().nullable().of(y.Ry().shape({id:y.Z_().required(),value:y.Z_().required().test("is-valid-pattern","Pattern cannot be empty",b).label("Pattern")}))});var w=()=>{let{errorAlert:e,successAlert:t}=(0,d.VY)(),{data:i}=x(void 0),[s,{isLoading:r}]=v(),l=async i=>{let n=i.patterns.filter(e=>b(e.value)).map(e=>e.value.trim()),a=await s({patterns:n});(0,o.D4)(a)?e((0,o.e$)(a.error),"Failed to update privacy request redaction patterns"):t("Privacy request redaction patterns updated successfully.")},c={patterns:((null==i?void 0:i.patterns)||[]).map((e,t)=>({id:"pattern-".concat(t),value:e}))};return(0,n.jsx)(a.TJV,{"data-testid":"privacy-request-redaction-patterns",children:(0,n.jsxs)(a.TJV,{maxW:"600px",children:[(0,n.jsx)(a.Typography.Title,{level:2,className:"!mb-2",children:"Redaction patterns"}),(0,n.jsx)(a.Bjg,{fontSize:"sm",pb:6,children:"List of regex patterns used to mask dataset, collection, and field names in DSR package reports. Names matching these patterns will be replaced with position-based identifiers (e.g. dataset_1, collection_2, field_3)."}),(0,n.jsx)(h.Z,{"data-testid":"privacy-request-redaction-patterns-form",title:"Regex patterns",children:(0,n.jsx)(m.J9,{initialValues:c,enableReinitialize:!0,onSubmit:l,validationSchema:j,validateOnChange:!0,children:e=>{let{dirty:t,values:i,isValid:s}=e;return(0,n.jsxs)(m.l0,{children:[(0,n.jsx)(m.F2,{name:"patterns",render:e=>(0,n.jsxs)(a.ad9,{flexDir:"column",children:[i.patterns.map((t,i)=>(0,n.jsxs)(a.ad9,{flexDir:"row",my:3,children:[(0,n.jsx)(f.j0,{variant:"stacked",name:"patterns[".concat(i,"].value"),placeholder:"Enter regex pattern (e.g., sensitive_.*)"}),(0,n.jsx)(a.zxk,{"aria-label":"remove-pattern",className:"z-[2] ml-4",icon:(0,n.jsx)(a.jBf,{}),onClick:()=>{e.remove(i)}})]},t.id)),(0,n.jsx)(a.ad9,{justifyContent:"center",mt:3,children:(0,n.jsx)(a.zxk,{"aria-label":"add-pattern",className:"w-full",onClick:()=>{e.push({id:"pattern-new-".concat(i.patterns.length),value:""})},children:"Add regex pattern +"})})]})}),(0,n.jsx)(a.TJV,{mt:6,textAlign:"right",children:(0,n.jsx)(a.zxk,{htmlType:"submit",type:"primary",disabled:r||!t||!s,loading:r,"data-testid":"save-btn",children:"Save"})})]})}})})]})})},C=()=>(0,n.jsxs)(s.Z,{title:"Privacy request settings",children:[(0,n.jsx)(r.Z,{heading:"Privacy request settings"}),(0,n.jsxs)(a.kCb,{vertical:!0,gap:"large",children:[(0,n.jsx)(w,{}),(0,n.jsx)(p,{})]})]})},31883:function(e,t,i){"use strict";i.d(t,{Bw:function(){return n.Bw},D4:function(){return n.D4}});var n=i(19043)}},function(e){e.O(0,[431,7245,2888,9774,179],function(){return e(e.s=69489)}),_N_E=e.O()}]);