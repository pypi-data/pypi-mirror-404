(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3709],{54727:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consent/configure",function(){return n(45985)}])},6675:function(e,s,n){"use strict";n.d(s,{ZS:function(){return r},a4:function(){return i}});var l=n(3228);let t=n(78780).u.injectEndpoints({endpoints:e=>({getPurposes:e.query({query:()=>"purposes"})})}),{useGetPurposesQuery:i}=t,a={purposes:{},special_purposes:{}},r=(0,l.P1)(t.endpoints.getPurposes.select(),e=>{let{data:s}=e;return s||a})},45985:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return P}});var l=n(24246),t=n(36010),i=n(27378),a=n(77213),r=n(58754),o=n(92222),c=n(59003),u=n(25980),d=n(15793),p=n(86677);let x=(e,s)=>{let n=e.filter(e=>e.isChecked);return n.length>0?"".concat(s,"=").concat(n.map(e=>e.value).join("&".concat(s,"="))):void 0},h=e=>{let{value:s,displayText:n,isChecked:i,onCheckboxChange:a}=e;return(0,l.jsx)(t.gxE,{value:s,height:"20px",mb:"25px",isChecked:i,onChange:e=>{let{target:n}=e;a(s,n.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,l.jsx)(t.Bjg,{fontSize:"sm",lineHeight:5,textOverflow:"ellipsis",overflow:"hidden",children:n})},s)},g=e=>{let{options:s,header:n,onCheckboxChange:a,columns:r=3,numDefaultOptions:o=15}=e,[c,u]=(0,i.useState)(!1),d=c?s:s.slice(0,o),p=s.length>o;return(0,l.jsxs)(t.nCC,{border:"0px",padding:"12px 8px 8px 12px",children:[(0,l.jsx)(t.y_b,{height:"56px",children:(0,l.jsxs)(t.rKS,{height:"100%",children:[(0,l.jsx)(t.TJV,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",fontWeight:600,children:n}),(0,l.jsx)(t.UhW,{})]})}),(0,l.jsxs)(t.rnb,{id:"panel-".concat(n),children:[(0,l.jsx)(t.RmD,{columns:r,children:d.map(e=>(0,l.jsx)(h,{...e,onCheckboxChange:a},e.value))}),!c&&p?(0,l.jsx)(t.zxk,{type:"text",onClick:()=>{u(!0)},children:"View more"}):null,c&&p?(0,l.jsx)(t.zxk,{type:"text",onClick:()=>{u(!1)},children:"View less"}):null]})]})},j=e=>{let{heading:s,children:n}=e;return(0,l.jsxs)(t.TJV,{padding:"12px 8px 8px 12px",maxHeight:600,children:[s?(0,l.jsx)(t.y_b,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:s}):null,n]})},C=e=>{let{resetFilters:s,isOpen:n,onClose:i,children:a,...r}=e;return(0,l.jsxs)(t.TGG,{isOpen:n,onClose:i,isCentered:!0,size:"2xl",...r,children:[(0,l.jsx)(t.T5Q,{}),(0,l.jsxs)(t.Z8H,{children:[(0,l.jsx)(t.geD,{children:"Filters"}),(0,l.jsx)(t.fpf,{}),(0,l.jsx)(t.KMv,{}),(0,l.jsx)(t.zOL,{maxH:"85vh",padding:"0px",overflowX:"auto",style:{scrollbarGutter:"stable"},children:a}),(0,l.jsx)(t.NGc,{children:(0,l.jsxs)(t.TJV,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,l.jsx)(t.zxk,{onClick:s,className:"mr-3 grow",children:"Reset filters"}),(0,l.jsx)(t.zxk,{type:"primary",onClick:i,className:"grow",children:"Done"})]})})]})]})};var f=n(77830),m=n(23923),k=n(16134),v=n(6675),b=n(28079);let y=()=>{let{isOpen:e,onClose:s,onOpen:n}=(0,t.E2M)();(0,b.fd)();let l=(0,k.C)(b.U3);(0,v.a4)();let a=(0,k.C)(v.ZS),[r,o]=(0,i.useState)([]),[c,u]=(0,i.useState)([]),[d,p]=(0,i.useState)([{displayText:"Consent",value:"Consent",isChecked:!1},{displayText:"Legitimate Interest",value:"Legitimate interests",isChecked:!1}]),[x,h]=(0,i.useState)([{displayText:"Advertising",value:"advertising",isChecked:!1},{displayText:"Analytics",value:"analytics",isChecked:!1},{displayText:"Functional",value:"functional",isChecked:!1},{displayText:"Essential",value:"essential",isChecked:!1}]);(0,i.useEffect)(()=>{0===c.length&&u(l.map(e=>({value:e.fides_key,displayText:e.name||e.fides_key,isChecked:!1})))},[l,c,u]),(0,i.useEffect)(()=>{0===r.length&&o([...Object.entries(a.purposes).map(e=>({value:"normal.".concat(e[0]),displayText:e[1].name,isChecked:!1})),...Object.entries(a.special_purposes).map(e=>({value:"special.".concat(e[0]),displayText:e[1].name,isChecked:!1}))])},[a,r,u]);let g=(e,s,n,l)=>{l(n.map(n=>n.value===e?{...n,isChecked:s}:n))};return{isOpen:e,onClose:s,onOpen:n,resetFilters:()=>{u(e=>e.map(e=>({...e,isChecked:!1}))),p(e=>e.map(e=>({...e,isChecked:!1}))),o(e=>e.map(e=>({...e,isChecked:!1}))),h(e=>e.map(e=>({...e,isChecked:!1})))},purposeOptions:r,onPurposeChange:(e,s)=>{g(e,s,r,o)},dataUseOptions:c,onDataUseChange:(e,s)=>{g(e,s,c,u)},legalBasisOptions:d,onLegalBasisChange:(e,s)=>{g(e,s,d,p)},consentCategoryOptions:x,onConsentCategoryChange:(e,s)=>{g(e,s,x,h)}}},_=e=>{let{isOpen:s,isTcfEnabled:n,onClose:i,resetFilters:a,purposeOptions:r,onPurposeChange:o,dataUseOptions:c,onDataUseChange:u,legalBasisOptions:d,onLegalBasisChange:p,consentCategoryOptions:x,onConsentCategoryChange:h}=e;return(0,l.jsx)(C,{isOpen:s,onClose:i,resetFilters:a,children:(0,l.jsx)(t.NvE,{children:(0,l.jsxs)(j,{children:[n?(0,l.jsx)(g,{options:r,onCheckboxChange:o,header:"TCF purposes",columns:1,numDefaultOptions:5}):null,(0,l.jsx)(g,{options:c,onCheckboxChange:u,header:"Data uses"}),n?(0,l.jsx)(g,{options:d,onCheckboxChange:p,header:"Legal basis"}):null,n?null:(0,l.jsx)(g,{options:x,onCheckboxChange:h,header:"Consent categories"})]})})})};var w=n(32885);let{Text:T,Title:S}=t.Typography,O=()=>{let{isOpen:e,onOpen:s,onClose:n}=(0,t.E2M)();return{isOpen:e,onOpen:s,onClose:n}},z=e=>{let{isOpen:s,onClose:n,fidesKey:i}=e,{data:a,isLoading:r}=(0,w.ho)(i),o=(e,s)=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(S,{level:5,children:e}),(null==s?void 0:s.length)?(0,l.jsx)("div",{children:(0,l.jsx)(t.TaI,{size:[0,2],wrap:!0,children:null==s?void 0:s.map(e=>(0,l.jsx)(t.Vp9,{children:e},e))})}):(0,l.jsxs)(T,{italic:!0,children:["no known ",e.toLowerCase()]})]});return(0,l.jsxs)(t.TGG,{isOpen:s,onClose:n,size:"xxl",returnFocusOnClose:!1,isCentered:!0,children:[(0,l.jsx)(t.T5Q,{}),(0,l.jsxs)(t.Z8H,{maxWidth:"800px",children:[(0,l.jsx)(t.geD,{children:a?null==a?void 0:a.name:"Vendor"}),(0,l.jsx)(t.zOL,{children:r?(0,l.jsx)(t.kCb,{className:"h-80 w-full",align:"center",justify:"center",children:(0,l.jsx)(t.Y6B,{})}):!!a&&(0,l.jsxs)(t.Typography,{children:[(0,l.jsx)(S,{level:5,children:"Purposes"}),Object.entries(a.purposes||{}).length>0?(0,l.jsx)(t.NvE,{allowMultiple:!0,children:Object.entries(a.purposes).map((e,s)=>{let[n]=e;return(0,l.jsx)(t.nCC,{children:e=>{let{isExpanded:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(t.rKS,{backgroundColor:s?"gray.50":"unset",children:[(0,l.jsx)(t.TJV,{flex:"1",textAlign:"left",children:n}),(0,l.jsx)(t.UhW,{})]}),(0,l.jsxs)(t.rnb,{backgroundColor:"gray.50",children:[(0,l.jsx)(t.kCb,{className:"my-4",vertical:!0,children:o("Data uses",a.purposes[n].data_uses)}),(0,l.jsx)(t.kCb,{className:"my-4",vertical:!0,children:o("Legal basis",a.purposes[n].legal_bases)})]})]})}},s)})}):(0,l.jsx)(T,{italic:!0,children:"no known purposes"}),(0,l.jsx)("div",{className:"my-4",children:o("Features",a.features)}),(0,l.jsx)("div",{className:"my-4",children:o("Data categories",a.data_categories)})]})}),(0,l.jsxs)(t.NGc,{children:[(0,l.jsx)(t.zxk,{size:"small",onClick:n,children:"Close"}),(0,l.jsx)(t.s3C,{})]})]})]})},N=(0,o.Cl)(),V={items:[],total:0,page:1,size:25,pages:1},R=()=>{let{tcf:e,dictionaryService:s}=(0,u.hz)(),{isLoading:n}=(0,w.x8)(),{isOpen:a,onOpen:r,onClose:h}=O(),g=(0,p.useRouter)(),[j,C]=(0,i.useState)(),{isOpen:k,onOpen:v,onClose:b,resetFilters:T,purposeOptions:S,onPurposeChange:R,dataUseOptions:E,onDataUseChange:P,legalBasisOptions:F,onLegalBasisChange:M,consentCategoryOptions:D,onConsentCategoryChange:L}=y(),I=(0,i.useMemo)(()=>x(E,"data_uses"),[E]),G=(0,i.useMemo)(()=>x(F,"legal_bases"),[F]),B=(0,i.useMemo)(()=>x(S.filter(e=>e.value.includes("normal")).map(e=>({...e,value:e.value.split(".")[1]})),"purposes"),[S]),H=(0,i.useMemo)(()=>x(S.filter(e=>e.value.includes("special")).map(e=>({...e,value:e.value.split(".")[1]})),"special_purposes"),[S]),U=(0,i.useMemo)(()=>x(D,"consent_category"),[D]),{PAGE_SIZES:Z,pageSize:W,setPageSize:A,onPreviousPageClick:K,isPreviousPageDisabled:J,onNextPageClick:Q,isNextPageDisabled:X,startRange:q,endRange:$,pageIndex:Y,setTotalPages:ee,resetPageIndexToDefault:es}=(0,d.oi)(),[en,el]=(0,i.useState)(),et=(0,i.useCallback)(e=>{es(),el(e)},[es,el]),{isFetching:ei,isLoading:ea,data:er}=(0,w.de)({pageIndex:Y,pageSize:W,dataUses:I,search:en,legalBasis:G,purposes:B,specialPurposes:H,consentCategories:U}),{items:eo,total:ec,pages:eu}=(0,i.useMemo)(()=>er||V,[er]);(0,i.useEffect)(()=>{ee(eu)},[eu,ee]);let ed=(0,i.useMemo)(()=>[N.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(d.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"Vendor",...e})}),N.accessor(e=>e.data_uses,{id:"tcf_purpose",cell:e=>(0,l.jsx)(d.CI,{plSuffix:"purposes",singSuffix:"purpose",count:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"TCF purpose",...e})}),N.accessor(e=>e.data_uses,{id:"data_uses",cell:e=>(0,l.jsx)(d.CI,{plSuffix:"data uses",singSuffix:"data use",count:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"Data use",...e})}),N.accessor(e=>e.legal_bases,{id:"legal_bases",cell:e=>(0,l.jsx)(d.CI,{plSuffix:"bases",singSuffix:"basis",count:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"Legal basis",...e})}),N.accessor(e=>e.consent_categories,{id:"consent_categories",cell:e=>(0,l.jsx)(d.CI,{plSuffix:"categories",singSuffix:"category",count:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"Categories",...e})}),N.accessor(e=>e.cookies,{id:"cookies",cell:e=>(0,l.jsx)(d.CI,{plSuffix:"cookies",singSuffix:"cookie",count:e.getValue()}),header:e=>(0,l.jsx)(d.Rr,{value:"Cookies",...e})})],[]),ep=(0,c.b7)({columns:ed,data:eo,state:{columnVisibility:{tcf_purpose:e,data_uses:e,legal_bases:e,consent_categories:!e,cookies:!e}},getCoreRowModel:(0,o.sC)(),columnResizeMode:"onChange",enableColumnResizing:!0});return ea||n?(0,l.jsx)(d.I4,{rowHeight:36,numRows:15}):(0,l.jsxs)(t.ad9,{flex:1,direction:"column",overflow:"auto",children:[a&&j?(0,l.jsx)(z,{isOpen:a,fidesKey:j,onClose:h}):null,(0,l.jsxs)(d.Q$,{children:[(0,l.jsx)(d.HO,{globalFilter:en,setGlobalFilter:et,placeholder:"Search"}),(0,l.jsx)(_,{isOpen:k,isTcfEnabled:e,onClose:b,resetFilters:T,purposeOptions:S,onPurposeChange:R,dataUseOptions:E,onDataUseChange:P,legalBasisOptions:F,onLegalBasisChange:M,consentCategoryOptions:D,onConsentCategoryChange:L}),(0,l.jsxs)(t.Br$,{alignItems:"center",spacing:2,children:[(0,l.jsx)(m.Z,{buttonLabel:"Add vendors",onButtonClick:s?()=>{g.push(f.Gg)}:void 0}),(0,l.jsx)(t.zxk,{onClick:v,"data-testid":"filter-multiple-systems-btn",children:"Filter"})]})]}),(0,l.jsx)(d.ZK,{tableInstance:ep,onRowClick:e=>{C(e.fides_key),r()}}),(0,l.jsx)(d.s8,{totalRows:ec||0,pageSizes:Z,setPageSize:A,onPreviousPageClick:K,isPreviousPageDisabled:J||ei,onNextPageClick:Q,isNextPageDisabled:X||ei,startRange:q,endRange:$})]})},{Text:E}=t.Typography;var P=()=>(0,l.jsxs)(a.Z,{title:"Vendors",children:[(0,l.jsx)(r.Z,{heading:"Vendors",children:(0,l.jsx)(E,{className:"block w-1/2",children:"Use the table below to manage your vendors. Modify the legal basis for a vendor if permitted and view and group your views by applying different filters"})}),(0,l.jsx)(R,{})]})}},function(e){e.O(0,[401,4093,2888,9774,179],function(){return e(e.s=54727)}),_N_E=e.O()}]);