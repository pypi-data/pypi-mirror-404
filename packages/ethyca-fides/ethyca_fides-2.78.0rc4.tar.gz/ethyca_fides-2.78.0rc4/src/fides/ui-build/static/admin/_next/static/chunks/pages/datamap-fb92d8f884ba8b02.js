(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9738],{58095:function(e,t,n){var l=n(8817);e.exports=function(e,t){return!!(null==e?0:e.length)&&l(e,t,0)>-1}},21796:function(e){e.exports=function(e,t,n){for(var l=-1,r=null==e?0:e.length;++l<r;)if(n(t,e[l]))return!0;return!1}},8817:function(e,t,n){var l=n(95372),r=n(1129),i=n(58263);e.exports=function(e,t,n){return t==t?i(e,t,n):l(e,r,n)}},1129:function(e){e.exports=function(e){return e!=e}},92198:function(e,t,n){var l=n(52485),r=n(58095),i=n(21796),s=n(65581),a=n(47111),o=n(43735);e.exports=function(e,t,n){var d=-1,c=r,u=e.length,x=!0,h=[],f=h;if(n)x=!1,c=i;else if(u>=200){var g=t?null:a(e);if(g)return o(g);x=!1,c=s,f=new l}else f=t?[]:h;e:for(;++d<u;){var p=e[d],m=t?t(p):p;if(p=n||0!==p?p:0,x&&m==m){for(var j=f.length;j--;)if(f[j]===m)continue e;t&&f.push(m),h.push(p)}else c(f,m,n)||(f!==h&&f.push(m),h.push(p))}return h}},47111:function(e,t,n){var l=n(46151),r=n(50344),i=n(43735),s=l&&1/i(new l([,-0]))[1]==1/0?function(e){return new l(e)}:r;e.exports=s},58263:function(e){e.exports=function(e,t,n){for(var l=n-1,r=e.length;++l<r;)if(e[l]===t)return l;return -1}},50344:function(e){e.exports=function(){}},83766:function(e,t,n){var l=n(92198);e.exports=function(e){return e&&e.length?l(e):[]}},53910:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datamap",function(){return n(18839)}])},99811:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});var l=n(27378);class r{updateTableInstance(e){this.tableInstance=e}constructor(e=null){this.tableInstance=e,this.updateTableInstance=this.updateTableInstance.bind(this)}}let i=l.createContext(new r);t.Z=i},18839:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return W}});var l=n(24246),r=n(27378),i=n(59849),s=n(45938),a=n(77213),o=n(58754),d=n(36010),c=n(65218),u=n.n(c),x=n(16134),h=n(35258),f=n(92222),g=n(59003),p=n(30002),m=n(28079),j=n(49600),v=n(99811);let y=e=>{var t;let{column:n}=e,{tableInstance:l}=(0,r.useContext)(v.Z),i=r.useMemo(()=>Array.from(n.getFacetedUniqueValues().keys()),[n]),s=r.useMemo(()=>{let e={};return i.forEach(t=>{e[t]=!1}),e},[i]);return{filterValue:null!==(t=n.getFilterValue())&&void 0!==t?t:s,clearFilterOptions:()=>{let e={};i.forEach(t=>{e[t]=!1}),n.setFilterValue(e)},toggleFilterOption:(e,t)=>{var r;let i={...null!==(r=n.getFilterValue())&&void 0!==r?r:s,[e]:t};Object.values(i).every(e=>!e)?null==l||l.setColumnFilters(null==l?void 0:l.getState().columnFilters.filter(e=>e.id!==n.id)):n.setFilterValue(i)},options:i,header:n.columnDef.header}};var w=n(57072);let b=(0,f.Cl)(),C={multifield:(e,t,n)=>n[e.original[t]]},F=()=>{let e=(0,x.T)(),{updateTableInstance:t}=(0,r.useContext)(v.Z),n=(0,x.C)(j.eo),{data:l,isLoading:i,error:s}=(0,j.Ex)({organizationName:"default_organization"});(0,w.MO)(),(0,m.fd)(),(0,p.te)();let a=(0,r.useRef)(!1);(0,r.useEffect)(()=>{if(l){let{columns:t,rows:n}=l;e((0,j.dd)(t)),a.current||(a.current=!0,0===n.length?e((0,j.ym)(!0)):e((0,j.ym)(!1)))}},[l,e]);let o=(0,r.useMemo)(()=>l?l.rows:[],[l]),d=(0,r.useMemo)(()=>(n||[]).map(e=>{let{text:t,value:n}=e;return b.accessor(e=>e[n],{id:n,header:t,cell:e=>{let{getValue:t}=e,n=t();return Array.isArray(n)?n.join(", "):n},filterFn:C.multifield})}),[n]),c=(0,g.b7)({columns:d,data:o,filterFns:C,getCoreRowModel:(0,f.sC)(),getFilteredRowModel:(0,f.vL)(),getFacetedRowModel:(0,f.o6)(),getFacetedUniqueValues:(0,f.JG)(),manualPagination:!0,columnResizeMode:"onChange"});return(0,r.useEffect)(()=>t(c),[c,t]),{...c,isLoading:i,error:s}};var k=n(83766),S=n.n(k),V=n(25980),_=n(46238),O=n(15793),T=n(22968);let I=e=>{var t,n,r;let{option:i,columnId:s,filterValue:a,toggleFilterOption:o}=e,c=(0,x.C)(w.L5),u=s===T.Ux&&null!==(n=null===(t=c.get(i))||void 0===t?void 0:t.name)&&void 0!==n?n:i;return(0,l.jsx)(d.gxE,{value:i,width:"193px",height:"20px",mb:"25px",isChecked:null!==(r=a[i])&&void 0!==r&&r,onChange:e=>{let{target:t}=e;o(i,t.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,l.jsx)(d.Bjg,{fontSize:"sm",lineHeight:5,height:"20px",width:"170px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:u})},i)};var M=e=>{let{column:t}=e,{filterValue:n,toggleFilterOption:i,options:s}=y({column:t}),[a,o]=(0,r.useState)(!1),c=a?s:s.slice(0,15),u=s.length>15;return(0,l.jsx)(d.NvE,{width:"100%",allowToggle:!0,children:(0,l.jsxs)(d.nCC,{border:"0px",children:[(0,l.jsx)(d.y_b,{height:"56px",children:(0,l.jsxs)(d.rKS,{height:"100%",children:[(0,l.jsx)(d.TJV,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",children:t.columnDef.header}),(0,l.jsx)(d.UhW,{})]})}),(0,l.jsxs)(d.rnb,{children:[(0,l.jsx)(d.RmD,{columns:3,children:c.map(e=>(0,l.jsx)(I,{columnId:t.id,option:e,filterValue:n,toggleFilterOption:i},e))}),!a&&u?(0,l.jsx)(d.zxk,{type:"text",onClick:()=>{o(!0)},children:"View more"}):null,a&&u?(0,l.jsx)(d.zxk,{type:"text",onClick:()=>{o(!1)},children:"View less"}):null]})]})},t.id)};let z=e=>{let{heading:t,children:n}=e;return(0,l.jsxs)(d.TJV,{padding:"24px 8px 8px 24px",children:[(0,l.jsx)(d.y_b,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:t}),n]})};var E=e=>{let t,{isOpen:n,onClose:i}=e,{tableInstance:s}=(0,r.useContext)(v.Z),a=null==s?void 0:s.getHeaderGroups(),o=(e,t)=>e.filter(e=>e.id===t).map(e=>(0,l.jsx)(M,{column:e.column},t)),c=(0,r.useMemo)(()=>(null==a?void 0:a[0].headers)||[],[a]);return(0,l.jsxs)(d.TGG,{isOpen:n,onClose:i,isCentered:!0,size:"2xl",children:[(0,l.jsx)(d.T5Q,{}),(0,l.jsxs)(d.Z8H,{children:[(0,l.jsx)(d.geD,{children:"Filters"}),(0,l.jsx)(d.fpf,{}),(0,l.jsx)(d.KMv,{}),(0,l.jsx)(d.zOL,{maxH:"85vh",padding:"0px",overflowX:"auto",children:(t=[T.vy,T.Ux,T.OL],c.some(e=>t.indexOf(e.id)>-1))?(0,l.jsxs)(z,{heading:"Privacy attributes",children:[o(c,T.vy),o(c,T.Ux),o(c,T.OL)]}):null}),(0,l.jsx)(d.NGc,{children:(0,l.jsxs)(d.TJV,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,l.jsx)(d.zxk,{onClick:()=>{null==s||s.resetColumnFilters()},className:"mr-3 grow",children:"Reset Filters"}),(0,l.jsx)(d.zxk,{onClick:i,type:"primary",className:"grow",children:"Done"})]})})]})]})};let G=()=>{let{isOpen:e,onOpen:t,onClose:n}=(0,d.E2M)();return{isFilterModalOpen:e,onFilterModalOpen:t,onFilterModalClose:n}};var N=()=>{let{isFilterModalOpen:e,onFilterModalOpen:t,onFilterModalClose:n}=G(),{tableInstance:i}=(0,r.useContext)(v.Z),{systemsCount:s,dictionaryService:a}=(0,V.hz)(),o=null==i?void 0:i.getRowModel(),c=(0,r.useMemo)(()=>{let e=(null==o?void 0:o.rows)||[];return S()(null==e?void 0:e.map(e=>e.original["system.fides_key"]))},[o]);if(!i)return null;let u=c.length,x=i.getState().columnFilters.length;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(d.ad9,{justifyContent:"flex-end",flexDirection:"row",alignItems:"center",flexWrap:"wrap",rowGap:4,columnGap:4,children:[(0,l.jsx)(d.ad9,{flexGrow:1,children:(0,l.jsx)(O.HO,{globalFilter:i.getState().globalFilter,setGlobalFilter:i.setGlobalFilter})}),(0,l.jsxs)(d.ad9,{children:[s>0?(0,l.jsxs)(d.ad9,{alignItems:"center",borderRadius:"md",gap:1,marginRight:4,children:[(0,l.jsxs)(d.Bjg,{fontSize:"xs",children:[u," of ",s," systems displayed"]}),a?(0,l.jsx)(_.b,{label:"Note that Global Vendor List (GVL) and Additional Consent (AC) systems are not currently included in these reports"}):null]}):null,(0,l.jsxs)(d.zxk,{"aria-label":"Open Filter Settings",onClick:t,children:["Filter",x>0?(0,l.jsx)(d.Vp9,{className:"ml-2",children:x}):null]})]})]}),(0,l.jsx)(E,{isOpen:e,onClose:n})]})},R=n(38943),Z=n(77830),A=()=>(0,l.jsx)(d.w4_,{flex:1,"data-testid":"get-started-modal",backgroundColor:"gray.100",children:(0,l.jsx)(d.TJV,{backgroundColor:"white",p:10,borderRadius:"6px",boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.1), 0px 1px 2px rgba(0, 0, 0, 0.06)",maxWidth:{base:"80%",lg:"60%",xl:"50%"},maxHeight:"90%",textAlign:"center",children:(0,l.jsxs)(d.EO$,{spacing:4,children:[(0,l.jsx)(d.Bjg,{color:"gray.700",fontWeight:"600",children:"Privacy engineering can seem like an endlessly complex confluence of legal and data engineering terminology—fear not—Fides is here to simplify this."}),(0,l.jsx)(d.Bjg,{children:"Start by scanning your infrastructure. The scanner will connect to your infrastructure to automatically scan and create a list of all systems available and then classify each system containing PII."}),(0,l.jsx)(d.Bjg,{children:"Let's get started!"}),(0,l.jsx)(d.TJV,{children:(0,l.jsx)(d.zxk,{href:Z.xo,role:"link",type:"primary",className:"w-fit","data-testid":"add-systems-btn",children:"Add Systems"})})]})})});let B=u()(()=>Promise.all([n.e(105),n.e(1096),n.e(454),n.e(1533),n.e(2088),n.e(4259),n.e(1975)]).then(n.bind(n,34849)),{loadableGenerated:{webpack:()=>[34849]},ssr:!1,loading:()=>(0,l.jsx)(d.w4_,{width:"100%",flex:"1",children:(0,l.jsx)(d.Y6B,{})})}),L=()=>{let e=(0,x.C)(R.Xt),{attemptAction:t}=(0,s.oI)(),[n,l]=(0,r.useState)(),i=(0,r.useCallback)(e=>{t().then(t=>{t&&l(e)})},[t,l]),a=(0,r.useCallback)(()=>{t().then(e=>{e&&n&&l(void 0)})},[t,n]);return{isGettingStarted:e,selectedSystemId:n,setSelectedSystemId:i,resetSelectedSystemId:a}};var P=()=>{let{isGettingStarted:e,setSelectedSystemId:t,selectedSystemId:n,resetSelectedSystemId:r}=L(),{isLoading:i}=F();return i?(0,l.jsx)(d.w4_,{width:"100%",flex:"1",children:(0,l.jsx)(d.Y6B,{})}):e?(0,l.jsx)(A,{}):(0,l.jsxs)(d.ad9,{direction:"column",height:"100%",children:[(0,l.jsx)(d.TJV,{marginBottom:3,marginRight:10,children:(0,l.jsx)(N,{})}),(0,l.jsxs)(d.ad9,{position:"relative",flex:1,direction:"row",overflow:"auto",borderWidth:"1px",borderStyle:"solid",borderColor:"gray.200",children:[(0,l.jsx)(d.TJV,{flex:1,minWidth:"50%",maxWidth:"100%",children:(0,l.jsx)(B,{setSelectedSystemId:t,selectedSystemId:n})}),(0,l.jsx)(h.Z,{selectedSystemId:n,resetSelectedSystemId:r})]})]})},W=()=>{let e=(0,r.useMemo)(()=>new v.m,[]),{error:t}=F();return t?(0,l.jsx)(i.Z,{error:t,defaultMessage:"A problem occurred while fetching your datamap"}):(0,l.jsxs)(a.Z,{title:"Data lineage",mainProps:{padding:"24px 0 0 40px"},children:[(0,l.jsx)(o.Z,{style:{paddingLeft:0},heading:"Data lineage"}),(0,l.jsxs)(v.Z.Provider,{value:e,children:[(0,l.jsx)(P,{}),(0,l.jsx)(s.eB,{})]})]})}}},function(e){e.O(0,[431,7245,7476,7218,7888,2888,9774,179],function(){return e(e.s=53910)}),_N_E=e.O()}]);