"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4339],{74339:function(e,n,i){i.d(n,{Z:function(){return G}});var t=i(24246),o=i(36010),a=i(34090),l=i(86677),r=i(27378),s=i(55484),d=i(16134),c=i(812),p=i(77830),u=i(46628),v=i(7426),_=i(60325);let m={language:{label:"Language",validation:s.Z_()},title:{label:"Title",validation:s.Z_()},description:{label:"Description",validation:s.Z_()},accept_button_label:{label:"Accept button label",validation:s.Z_()},reject_button_label:{label:"Reject button label",validation:s.Z_()},save_button_label:{label:"Save button label",validation:s.Z_()},acknowledge_button_label:{label:"Acknowledge button label",validation:s.Z_()},privacy_policy_url:{label:"Privacy policy URL",validation:s.Z_().url()},privacy_preferences_link_label:{label:"Privacy preferences link label",validation:s.Z_()},banner_title:{label:"Banner title",validation:s.Z_()},banner_description:{label:"Banner description",validation:s.Z_()},purpose_header:{label:"Purpose header",validation:s.Z_()},privacy_policy_link_label:{label:"Privacy policy link label",validation:s.Z_()},modal_link_label:{label:"Modal link label",validation:s.Z_()},is_default:{label:"Default language",validation:s.O7()},gpc_label:{label:"GPC label",validation:s.Z_()},gpc_title:{label:"GPC title",validation:s.Z_()},gpc_description:{label:"GPC description",validation:s.Z_()},gpc_status_applied_label:{label:"GPC applied status label",validation:s.Z_()},gpc_status_overridden_label:{label:"GPC overridden status label",validation:s.Z_()}};var b=i(34334),f=i(13083),g=i.n(f),y=i(43218),h=i.n(y),w=i(52253),x=i(32885),C=i(60240);let k={language:C.eU.EN,accept_button_label:"Accept",acknowledge_button_label:"OK",banner_description:"",banner_title:"",purpose_header:"",description:"Description",privacy_policy_link_label:"",privacy_policy_url:"",modal_link_label:"",privacy_preferences_link_label:"Privacy preferences",reject_button_label:"Reject All",save_button_label:"Save",title:"Manage your consent preferences",is_default:!0,gpc_label:"Global Privacy Control",gpc_description:"Your global privacy control preference has been honored. You have been automatically opted out of data use cases which adhere to global privacy control.",gpc_title:"Global Privacy Control detected",gpc_status_applied_label:"Applied",gpc_status_overridden_label:"Overridden"},j=e=>({...k,...e.translations?e.translations[0]:{}}),A=(e,n)=>{var i,t,o,a;let l={options:{allowHTMLDescription:!0,base64Cookie:!1,debug:!1,fidesApiUrl:"http://localhost:8080/api/v1",fidesClearCookie:!0,fidesDisableSaveApi:!0,fidesDisableNoticesServedApi:!0,fidesJsBaseUrl:"",fidesLocale:null===(t=e.translations)||void 0===t?void 0:null===(i=t[0])||void 0===i?void 0:i.language,fidesString:null,geolocationApiUrl:"",isGeolocationEnabled:!1,isOverlayEnabled:!0,isPrefetchEnabled:!1,overlayParentId:w.Vk,preventDismissal:null!==(a=e.dismissable)&&void 0!==a&&a,privacyCenterUrl:"http://localhost:3000",showFidesBrandLink:!0},experience:{available_locales:null===(o=e.translations)||void 0===o?void 0:o.map(e=>e.language),component:e.component,experience_config:{allow_language_selection:!0,auto_detect_language:!0,auto_subdomain_cookie_deletion:!0,cookie_deletion_based_on_host_domain:!0,component:e.component,disabled:!1,dismissable:e.dismissable,id:"pri_222",is_default:!0,language:"en",layer1_button_options:C.Of.OPT_IN_OPT_OUT,properties:[],regions:["us_ca"],show_layer1_notices:!1,translations:[j(e)]},id:"pri_111",privacy_notices:n,region:"us_ca"},geolocation:{country:"US",location:"US-CA",region:"CA"}};return e.component===C.re.TCF_OVERLAY&&(l.options.fidesTcfGdprApplies=!0,l.options.tcf_enabled=!0,l.geolocation={location:"eea",country:"eea"},l.experience.experience_config.regions=["eea"],l.experience={...l.experience,region:"eea",minimal_tcf:!0,gvl:{vendors:{}},tcf_purpose_names:["Store and/or access information on a device","Use limited data to select advertising","Create profiles for personalised advertising","Use profiles to select personalised advertising","Create profiles to personalise content","Use profiles to select personalised content","Measure advertising performance","Measure content performance","Understand audiences through statistics or combinations of data from different sources","Develop and improve services","Use limited data to select content"]},l.options.apiOptions={getPrivacyExperienceFn:async()=>l.experience}),l},P=e=>{let{language:n,is_default:i,...t}=k,o=Object.keys(t).map(n=>{let i=e[n];return{[n]:void 0!==i?i:k[n]}}).reduce((e,n)=>({...e,...n}),{});return{language:e.language,is_default:e.is_default,...o}},O=(e,n,i)=>e?e.map(e=>i.find(n=>(null==n?void 0:n.id)===e)).map(e=>n===C.re.TCF_OVERLAY&&void 0!==e?{...e,translations:[{language:"en",text:null==e?void 0:e.name}]}:e).filter(e=>void 0!==e):[];var E=i(74022),N=i(32222);let T=e=>{let{title:n,description:i}=e;return(0,t.jsx)(o.kCb,{className:"h-full items-center justify-center",children:(0,t.jsxs)(o.kCb,{className:"items-center gap-2 rounded-md p-6",style:{backgroundColor:E.Z.colors.white,boxShadow:E.Z.shadows.md,maxWidth:512},vertical:!0,"data-testid":"no-preview-notice",children:[(0,t.jsx)(o.Bjg,{fontSize:"lg",fontWeight:"500",align:"center",children:n}),(0,t.jsx)(o.Bjg,{color:"gray.500",align:"center",children:i})]})})};var L=e=>{var n,i;let{allPrivacyNotices:s,initialValues:d,translation:c,isMobilePreview:p,mockGpcEnabled:u}=e,v=(0,l.useRouter)().pathname.includes("/new"),{values:_}=(0,a.u6)(),[m,b]=(0,r.useState)([]),[f,y]=(0,r.useState)(!1),[k,j]=(0,r.useState)(),E=[C.re.BANNER_AND_MODAL,C.re.MODAL,C.re.TCF_OVERLAY].includes(_.component),{data:L}=(0,x.de)({pageIndex:1,pageSize:1}),D=(0,r.useMemo)(()=>(null==L?void 0:L.total)||0,[null==L?void 0:L.total]);(0,r.useEffect)(()=>{var e,n;return E&&f&&window.FidesPreview&&_.component&&((null===(e=_.privacy_notice_ids)||void 0===e?void 0:e.length)||_.component===C.re.TCF_OVERLAY)?_.component===C.re.TCF_OVERLAY?(window.FidesPreview("tcf"),j("tcf")):(window.FidesPreview("standard"),j("standard")):window.FidesPreview&&(null===(n=window.FidesPreview)||void 0===n||n.cleanup()),()=>{var e;j(void 0),null===(e=window.FidesPreview)||void 0===e||e.cleanup()}},[_.component,f,E,null===(n=_.privacy_notice_ids)||void 0===n?void 0:n.length,v]),(0,r.useEffect)(()=>{d&&_.component&&s&&(_.privacy_notice_ids?b(O(_.privacy_notice_ids,_.component,s)):b([]))},[_.privacy_notice_ids,s,_.component,d]);let R=(0,r.useMemo)(()=>_.component?A({...d,component:_.component},m):null,[d,m,_.component]);(0,r.useEffect)(()=>{(null==L?void 0:L.total)===0&&_.component===C.re.TCF_OVERLAY&&o.t6Z.warning({message:"No vendors available",description:"This TCF Overlay will not appear on live sites until you add consent vendors from the Global Vendor List (GVL)",duration:0,key:"vendor-warning"})},[null==L?void 0:L.total,_.component]),(0,r.useEffect)(()=>{var e,n,i,t;if(!E||!f||!window.FidesPreview||!window.Fides||!(null===(e=_.privacy_notice_ids)||void 0===e?void 0:e.length)&&_.component!==C.re.TCF_OVERLAY)return;_.component===C.re.MODAL&&(R.experience.experience_config.component=C.re.MODAL);let o=null===(n=_.translations)||void 0===n?void 0:n.find(e=>e.language===(null==c?void 0:c.language));(null===(i=_.translations)||void 0===i?void 0:i.length)&&(o?(R.experience.available_locales=[...R.experience.available_locales||[],o.language],R.experience.experience_config.translations[0]=P(o),R.options.fidesLocale=o.language):_.translations&&(R.experience.experience_config.translations[0]=P(_.translations[0]),R.options.fidesLocale=_.translations[0].language)),R.experience.experience_config.show_layer1_notices=!!(null===(t=_.privacy_notice_ids)||void 0===t?void 0:t.length)&&!!_.show_layer1_notices,R.experience.experience_config.layer1_button_options=(_.component===C.re.BANNER_AND_MODAL||_.component===C.re.TCF_OVERLAY)&&_.layer1_button_options?_.layer1_button_options:C.Of.OPT_IN_OPT_OUT,R.options.preventDismissal=!_.dismissable,R.experience.vendor_count=D,R.experience.experience_config.component=_.component,window.Fides.init(R)},[c,R,s,E,D,f,k,_.privacy_notice_ids,_.component,_.translations,_.show_layer1_notices,_.layer1_button_options,_.dismissable,d,m,u]);let Z=document.getElementById("fides-modal");return(Z&&Z.removeAttribute("tabindex"),_.component)?E?(null===(i=_.privacy_notice_ids)||void 0===i?void 0:i.length)||_.component===C.re.TCF_OVERLAY?(0,t.jsxs)(o.kCb,{className:"size-full items-center justify-center overflow-scroll",children:[(0,t.jsx)(g(),{id:"4b2ec2183c5a567e",dynamic:[w.Vk,_.component!==C.re.TCF_OVERLAY?"padding-bottom: 45px;":""],children:"div#fides-overlay{z-index:5000!important}div#".concat(w.Vk,"{width:100%;padding-top:45px;").concat(_.component!==C.re.TCF_OVERLAY?"padding-bottom: 45px;":"","          margin: auto;pointer-events:none}div#fides-banner-container{position:static!important;-webkit-transform:none!important;-moz-transform:none!important;-ms-transform:none!important;-o-transform:none!important;transform:none!important;-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;transition:none!important}div#fides-banner-container.fides-banner-hidden{display:none}.fides-modal-container{background-color:unset!important;position:static!important;display:none!important}.fides-modal-overlay{background-color:inherit!important;position:static!important;display:none!important}div.fides-modal-content{position:relative!important;-webkit-transform:none!important;-moz-transform:none!important;-ms-transform:none!important;-o-transform:none!important;transform:none!important;left:initial!important;top:initial!important}div.fides-modal-footer{width:unset}")}),E?(0,t.jsx)("style",{children:"div#fides-modal {\n          display: flex !important;\n          justify-content: center;\n          background-color: unset;\n          ".concat(_.component===C.re.BANNER_AND_MODAL||_.component===C.re.TCF_OVERLAY?"padding-bottom: 3rem;":"","\n        }")}):null,p?(0,t.jsx)("style",{children:"\n            div#fides-overlay-wrapper {\n              max-width: 400px;\n              margin: auto;\n            }\n            div.fides-modal-button-group {\n              flex-direction: column !important;\n            }\n            div#fides-banner {\n              padding: 24px;\n              width: 100%;\n            }\n\n            div#fides-banner-description {\n              margin-bottom: 0px;\n            }\n\n            div#fides-banner-inner div#fides-button-group {\n              flex-direction: column;\n              align-items: flex-start;\n              gap: 12px;\n              padding-top: 24px;\n            }\n\n            .fides-banner-button-group {\n              flex-direction: column;\n              width: 100%;\n            }\n\n            button.fides-banner-button {\n              margin: 0px;\n              width: 100%;\n            }\n\n            div#fides-banner-inner-container {\n              display: flex;\n              flex-direction: column;\n              max-height: 50vh;\n              overflow-y: auto;\n              scrollbar-gutter: stable;\n            }\n\n            div#fides-privacy-policy-link {\n              order: 1;\n              width: 100%;\n            }\n            .fides-modal-footer {\n              max-width: 100%;\n            }\n            .fides-banner-secondary-actions {\n              flex-direction: column-reverse;\n              gap: 12px;\n            }\n            "}):(0,t.jsx)("style",{children:"\n              div#fides-banner {\n                width: 60%;\n              }\n            @media (min-width: 768px) {\n              div#fides-banner {\n                width: 100%;\n              }\n            }\n            @media (min-width: 1155px) {\n              div#fides-banner {\n                width: 90%;\n              }\n            }\n            @media (min-width: 1440px) {\n              div#fides-banner {\n                width: 60%;\n              }\n            }\n            "}),(0,t.jsx)(h(),{id:"fides-js-script",src:"/lib/fides-preview.js",onReady:()=>{y(!0)}}),(0,t.jsx)("div",{id:w.Vk,"data-a11y-dialog-ignore-focus-trap":"",inert:"",className:g().dynamic([["4b2ec2183c5a567e",[w.Vk,_.component!==C.re.TCF_OVERLAY?"padding-bottom: 45px;":""]]])},_.component)]}):(0,t.jsx)(T,{title:"No privacy notices added",description:'To view a preview of this experience, add a privacy notice under "Privacy Notices" to the left.'}):(0,t.jsx)(T,{title:"".concat(N.J.get(_.component)," preview not available"),description:"There is no preview available for ".concat(N.J.get(_.component),". You can edit the available settings\n    and languages to the left.")}):(0,t.jsx)(T,{title:"No privacy experience type selected",description:"Please select a privacy experience type to preview."})},D=i(94315),R=i(5331),Z=i(16277),F=i(71922),S=i(31883);let V=e=>{let n=(0,_.y3)(e),i={};return Object.entries(n).forEach(e=>{let[n,t]=e;if(t.included){let e=m[n];i[n]=t.required?e.validation.required().label(e.label):e.validation.nullable().label(e.label)}}),s.Ry().shape(i)},M=e=>{let{componentType:n}=e;return V(n)},B=s.Ry().shape({name:s.Z_().required().label("Experience name"),component:s.Z_().required().label("Experience type"),translations:s.IX().when("component",(e,n)=>{let[i]=e;return n.of(M({componentType:i}))}),allow_vendor_asset_disclosure:s.O7().nullable(),asset_disclosure_include_types:s.IX().of(s.Z_()).when(["allow_vendor_asset_disclosure","component"],(e,n)=>{let[i,t]=e;return i&&(t===C.re.BANNER_AND_MODAL||t===C.re.MODAL)?n.min(1).label("Asset types to disclose"):n.notRequired().nullable()})});var G=e=>{var n,i;let{passedInExperience:s,passedInTranslations:m}=e,[f]=(0,D.mJ)(),[g]=(0,D.$d)(),y=(0,o.p8r)(),[h,w]=(0,r.useState)(!1),[x,C]=(0,r.useState)(!1),k=(null===(n=window.navigator)||void 0===n?void 0:n.globalPrivacyControl)===!0,j=(0,l.useRouter)(),{data:A}=(0,v.tB)({api_set:!1}),P=null==A?void 0:null===(i=A.plus_consent_settings)||void 0===i?void 0:i.enable_translations,O=(0,d.C)(b.Zp),E=(0,d.C)(b.G1);(0,b.Ah)({page:O,size:E});let N=(0,d.C)(b.fJ),T=(0,d.C)(F.sX),V=s?{..._.DD,...(0,_.Uv)(s)}:_.DD,M=async e=>{var n,i;let t;e.privacy_notice_ids=null===(n=e.privacy_notice_ids)||void 0===n?void 0:n.filter(e=>"tcf_purposes_placeholder"!==e),V.tcf_configuration_id&&!e.tcf_configuration_id&&(e.tcf_configuration_id=null);let o={...e,disabled:null===(i=null==s?void 0:s.disabled)||void 0===i||i,allow_language_selection:e.translations&&e.translations.length>1};if(s){let{component:e,...n}=o;t=await g({...n,id:s.id})}else t=await f(o);(0,S.D4)(t)?y((0,u.Vo)((0,c.e$)(t.error))):(y((0,u.t5)("Privacy experience successfully ".concat(s?"updated":"created"))),j.push(p.w0))},[G,U]=(0,r.useState)(void 0),[Y,z]=(0,r.useState)(!1);return(0,t.jsx)(a.J9,{initialValues:V,enableReinitialize:!0,onSubmit:M,validationSchema:B,children:(0,t.jsx)(a.l0,{style:{height:"100vh"},children:(0,t.jsxs)(o.kCb,{className:"size-full","data-testid":"privacy-experience-detail-page",children:[G?(0,t.jsx)(Z.Z,{translation:G,translationsEnabled:P,isOOB:Y,onReturnToMainForm:()=>{U(void 0),z(!1)}}):(0,t.jsx)(R.d0,{allPrivacyNotices:T,translationsEnabled:P,onSelectTranslation:e=>{U({...e,name:(0,_.Go)(e,N)})},onCreateTranslation:e=>{let n=null==m?void 0:m.find(n=>n.language===e);return n&&z(!0),null!=n?n:{language:e,is_default:!1}}}),(0,t.jsxs)(o.kCb,{vertical:!0,className:"w-full overflow-y-hidden",style:{backgroundColor:o.rSc.colors.gray[50]},children:[(0,t.jsxs)(o.kCb,{className:"flex-row items-center p-4",style:{backgroundColor:o.rSc.colors.white,borderBottom:"1px solid ".concat(o.rSc.colors.gray[100])},children:[(0,t.jsx)(o.Bjg,{fontSize:"md",fontWeight:"semibold",children:"PREVIEW"}),(0,t.jsx)(o.s3C,{}),(0,t.jsxs)(o.kCb,{className:"flex-row items-center gap-2",children:[(0,t.jsx)(o.ua7,{title:k?"GPC is enabled at the browser level. Disable it to use this toggle.":void 0,children:(0,t.jsx)(o.rsf,{"aria-label":"Toggle GPC preview mode",checkedChildren:"GPC",unCheckedChildren:"GPC",checked:k||x,onChange:e=>{C(e),j.replace({pathname:j.pathname,query:{...j.query,globalPrivacyControl:e.toString()}})},"data-testid":"gpc-preview-toggle",disabled:k})}),(0,t.jsx)(o.rgf,{options:[{value:"mobile",icon:(0,t.jsx)(o.PJP.ij_,{title:"Mobile"})},{value:"desktop",icon:(0,t.jsx)(o.PJP.lLr,{title:"Desktop"})}],defaultValue:"desktop",onChange:e=>w("mobile"===e)})]})]}),(0,t.jsx)(L,{allPrivacyNotices:T,initialValues:V,translation:G,isMobilePreview:h,mockGpcEnabled:x})]})]})})})}},32222:function(e,n,i){i.d(n,{J:function(){return t}});let t=new Map([["overlay","Overlay"],["privacy_center","Privacy center"],["tcf_overlay","TCF overlay"],["modal","Modal"],["banner_and_modal","Banner and modal"],["headless","Headless"]])},31883:function(e,n,i){i.d(n,{Bw:function(){return t.Bw},D4:function(){return t.D4}});var t=i(19043)}}]);