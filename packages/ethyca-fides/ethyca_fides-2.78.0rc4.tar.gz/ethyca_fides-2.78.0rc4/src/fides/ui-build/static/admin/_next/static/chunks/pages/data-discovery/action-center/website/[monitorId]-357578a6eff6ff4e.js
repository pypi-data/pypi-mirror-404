(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1206],{55515:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center/website/[monitorId]",function(){return n(56497)}])},30952:function(e,t,n){"use strict";n.d(t,{f:function(){return a}});var s=n(24246),i=n(26917);let a=e=>{let{...t}=e;return(0,s.jsx)(i.Z,{debounce:!0,...t})}},35287:function(e,t,n){"use strict";var s=n(24246),i=n(36010),a=n(88038),l=n.n(a);n(27378),t.Z=e=>{let{children:t,title:n,fullHeight:a,fullWidth:o,mainProps:r}=e;return(0,s.jsxs)(i.ad9,{"data-testid":n,direction:"column",height:a?"100vh":"calc(100vh - 48px)",width:o?"100vw":"calc(100vw - 240px)",children:[(0,s.jsxs)(l(),{children:[(0,s.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,s.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsx)(i.ad9,{px:10,py:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0,...r,children:t})]})}},25415:function(e,t,n){"use strict";n.d(t,{a:function(){return a}});var s=n(24246);let{Text:i}=n(36010).Typography,a=e=>{let{count:t}=e;return(0,s.jsx)(i,{size:"sm",strong:!0,"data-testid":"selected-count",children:"".concat(t," selected")})}},56497:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var s=n(24246),i=n(36010),a=n(86677),l=n(59849),o=n(25980),r=n(35287),c=n(77830),u=n(58754),d=n(27378),m=n(812),v=n(8125),h=n(46628),f=n(60240),y=n(37059),p=n(98145),b=n(9320),g=n(71985),x=n(88708),_=n(66213);let w=e=>{let{monitorId:t,readonly:n,allowIgnore:s,onTabChange:i,consentStatus:a,rowClickUrl:l,resourceType:o}=e,[r,c]=(0,d.useState)(!1),[u,m]=(0,d.useState)(!1),[v,h]=(0,d.useState)(!1),[f,y]=(0,d.useState)(0),[p,b]=(0,d.useState)(0),[g,x]=(0,d.useState)(0);return{columns:(0,d.useMemo)(()=>{if((0,_.yu)(o))return(0,_.b$)({rowClickUrl:l});let e={monitorId:t,readonly:n,allowIgnore:s,onTabChange:i,consentStatus:a,rowClickUrl:l,isDataUsesExpanded:v,isLocationsExpanded:r,isDomainsExpanded:u,dataUsesVersion:g,locationsVersion:f,domainsVersion:p,setIsDataUsesExpanded:h,setIsLocationsExpanded:c,setIsDomainsExpanded:m,setDataUsesVersion:x,setLocationsVersion:y,setDomainsVersion:b};return n?(0,_.Ah)(e):(0,_.xg)(e)},[n,a,l,v,r,u,g,f,p,t,s,i,o])}},j=e=>{let{monitorId:t}=e,n=(0,a.useRouter)(),l=(0,i.p8r)(),[o,r]=(0,d.useState)(),u=(0,v.o)({sorting:{validColumns:Object.values(p.vQ)}}),{pageIndex:_,pageSize:j,searchQuery:k,updateSearch:E,resetState:S}=u,{filterTabs:A,activeTab:C,onTabChange:P,activeParams:I,actionsDisabled:T}=(0,x.Z)(),{data:R,error:L,isLoading:M,isFetching:N}=(0,y.wi)({key:t,page:_,size:j,search:k,...I}),[z,{isLoading:D}]=(0,y.rs)(),[Z,{isLoading:K}]=(0,y.nP)(),U=(0,d.useCallback)(e=>{var t,n,s;return null!==(s=null!==(n=null!==(t=e.id)&&void 0!==t?t:e.vendor_id)&&void 0!==n?n:e.name)&&void 0!==s?s:c.Kl},[]),F=(0,d.useCallback)(e=>{var n;let s=null!==(n=e.id)&&void 0!==n?n:c.Kl,i=C?"#".concat(C):"";return"".concat(c.vi,"/").concat(g.w.WEBSITE,"/").concat(t,"/").concat(s).concat(i)},[t,C]),O=(0,d.useMemo)(()=>({enableSelection:!0,getRowKey:U,isLoading:M,isFetching:N,dataSource:(null==R?void 0:R.items)||[],totalRows:(null==R?void 0:R.total)||0,customTableProps:{locale:{emptyText:(0,s.jsx)(i.HYy,{image:i.HYy.PRESENTED_IMAGE_SIMPLE,description:"All caught up!"})},sticky:{offsetHeader:40}}}),[U,M,N,null==R?void 0:R.items,null==R?void 0:R.total]),B=(0,v.V)(u,O),{selectedRows:H,resetSelections:V}=B,$=(0,d.useCallback)(async e=>{r(void 0),await P(e),S(),V()},[P,S,V]),{columns:q}=w({monitorId:t,onTabChange:$,readonly:T,allowIgnore:!("diff_status"in I)||!I.diff_status.includes(f.LL.MUTED),consentStatus:o,rowClickUrl:F});(0,d.useEffect)(()=>{if((null==R?void 0:R.items)&&!o){var e;let t=null===(e=R.items.find(e=>{var t;return(null===(t=e.consent_status)||void 0===t?void 0:t.status)===f.pF.ALERT}))||void 0===e?void 0:e.consent_status;r(null!=t?t:void 0)}},[R,o]);let G=(0,d.useCallback)(async()=>{let e=H.reduce((e,t)=>e+t.total_updates,0),s=await z({monitor_config_key:t,resolved_system_ids:H.map(e=>e.id)});(0,m.D4)(s)?l((0,h.Vo)((0,m.e$)(s.error))):(l((0,h.t5)((0,b._)("".concat(e," assets have been added to the system inventory."),()=>n.push(c.So)))),V())},[H,z,t,l,n,V]),W=(0,d.useCallback)(async()=>{let e=H.reduce((e,t)=>e+t.total_updates,0),n=await Z({monitor_config_key:t,resolved_system_ids:H.map(e=>{var t;return null!==(t=e.id)&&void 0!==t?t:c.Kl})});(0,m.D4)(n)?l((0,h.Vo)((0,m.e$)(n.error))):(l((0,h.t5)((0,b._)("".concat(e," assets have been ignored and will not appear in future scans."),async()=>{await P(x.A.IGNORED)}))),V())},[H,Z,t,l,P,V]),X=H.some(e=>null===e.id);return{columns:q,data:R,error:L,isLoading:M,isFetching:N,searchQuery:k,updateSearch:E,resetState:S,tableProps:B.tableProps,selectionProps:B.selectionProps,filterTabs:A,activeTab:C,handleTabChange:$,activeParams:I,actionsDisabled:T,selectedRows:H,hasSelectedRows:B.hasSelectedRows,resetSelections:V,uncategorizedIsSelected:X,handleBulkAdd:G,handleBulkIgnore:W,anyBulkActionIsLoading:D||K,isAddingResults:D,isIgnoringResults:K}};var k=n(25415),E=n(30952);let S=e=>{let{monitorId:t}=e,{columns:n,searchQuery:a,updateSearch:l,tableProps:o,selectionProps:r,filterTabs:c,activeTab:u,handleTabChange:d,activeParams:m,selectedRows:v,hasSelectedRows:h,uncategorizedIsSelected:y,handleBulkAdd:p,handleBulkIgnore:b,anyBulkActionIsLoading:g}=j({monitorId:t});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.v2r,{"aria-label":"Asset state filter",mode:"horizontal",items:c.map(e=>({key:e.hash,label:e.label})),selectedKeys:[u],onClick:async e=>{await d(e.key)},className:"mb-4","data-testid":"asset-state-filter"}),(0,s.jsxs)(i.kCb,{justify:"space-between",align:"center",className:"sticky -top-6 z-10 bg-white py-4",children:[(0,s.jsx)(E.f,{value:a,onChange:l}),(0,s.jsxs)(i.TaI,{size:"large",children:[h&&(0,s.jsx)(k.a,{count:v.length}),(0,s.jsx)(i.Ltx,{menu:{items:[{key:"add",label:(0,s.jsx)(i.ua7,{title:y?"Uncategorized assets can't be added to the inventory":null,placement:"left",children:"Add"}),onClick:p,disabled:y},"diff_status"in m&&!m.diff_status.includes(f.LL.MUTED)?{key:"ignore",label:"Ignore",onClick:b}:null]},trigger:["click"],children:(0,s.jsx)(i.zxk,{type:"primary",icon:(0,s.jsx)(i.PJP._ME,{}),iconPosition:"end",loading:g,disabled:!h,"data-testid":"bulk-actions-menu",children:"Actions"})})]})]}),(0,s.jsx)(i.iA_,{...o,columns:n,rowSelection:r})]})},A=()=>(0,s.jsx)(s.Fragment,{children:"Attempting to access monitor results without the required feature flag enabled"});var C=()=>{let{flags:e}=(0,o.hz)(),t=(0,a.useRouter)(),n=decodeURIComponent(t.query.monitorId),{error:d}=j({monitorId:n});return d?(0,s.jsx)(l.Z,{error:d,defaultMessage:"A problem occurred while fetching your monitor results",actions:[{label:"Return to action center",onClick:()=>{t.push(c.vi)}}]}):e.webMonitor?(0,s.jsxs)(r.Z,{title:"Action center - Discovered assets by system",children:[(0,s.jsx)(u.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:c.vi},{title:n}],isSticky:!1}),(0,s.jsx)(S,{monitorId:n})]}):(0,s.jsx)(i.x4B,{status:"error",title:(0,s.jsx)(A,{})})}}},function(e){e.O(0,[431,7245,9698,5022,6043,2888,9774,179],function(){return e(e.s=55515)}),_N_E=e.O()}]);