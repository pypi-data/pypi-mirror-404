(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9196],{6446:function(e){e.exports=function(e,t,a,s){var r=-1,i=null==e?0:e.length;for(s&&i&&(a=e[++r]);++r<i;)a=t(a,e[r],r,e);return a}},40585:function(e){var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},52033:function(e,t,a){var s=a(26194),r=a(26789)(s);e.exports=r},49819:function(e,t,a){var s=a(18911)();e.exports=s},26194:function(e,t,a){var s=a(49819),r=a(50098);e.exports=function(e,t){return e&&s(e,t,r)}},67375:function(e,t,a){var s=a(52033),r=a(80068);e.exports=function(e,t){var a=-1,i=r(e)?Array(e.length):[];return s(e,function(e,s,r){i[++a]=t(e,s,r)}),i}},17646:function(e){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},26789:function(e,t,a){var s=a(80068);e.exports=function(e,t){return function(a,r){if(null==a)return a;if(!s(a))return e(a,r);for(var i=a.length,n=t?i:-1,l=Object(a);(t?n--:++n<i)&&!1!==r(l[n],n,l););return a}}},18911:function(e){e.exports=function(e){return function(t,a,s){for(var r=-1,i=Object(t),n=s(t),l=n.length;l--;){var o=n[e?l:++r];if(!1===a(i[o],o,i))break}return t}}},68267:function(e,t,a){var s=a(6446),r=a(69689),i=a(93254),n=RegExp("['’]","g");e.exports=function(e){return function(t){return s(i(r(t).replace(n,"")),e,"")}}},56632:function(e,t,a){var s=a(89278),r=a(80068),i=a(50098);e.exports=function(e){return function(t,a,n){var l=Object(t);if(!r(t)){var o=s(a,3);t=i(t),a=function(e){return o(l[e],e,l)}}var c=e(t,a,n);return c>-1?l[o?t[c]:c]:void 0}}},4248:function(e,t,a){var s=a(17646)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});e.exports=s},73909:function(e){var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},97025:function(e){var t="\ud800-\udfff",a="\\u2700-\\u27bf",s="a-z\\xdf-\\xf6\\xf8-\\xff",r="A-Z\\xc0-\\xd6\\xd8-\\xde",i="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",n="['’]",l="["+i+"]",o="["+s+"]",c="[^"+t+i+"\\d+"+a+s+r+"]",d="(?:\ud83c[\udde6-\uddff]){2}",u="[\ud800-\udbff][\udc00-\udfff]",_="["+r+"]",p="(?:"+o+"|"+c+")",m="(?:"+n+"(?:d|ll|m|re|s|t|ve))?",E="(?:"+n+"(?:D|LL|M|RE|S|T|VE))?",f="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\ud83c[\udffb-\udfff])?",S="[\\ufe0e\\ufe0f]?",g="(?:\\u200d(?:"+["[^"+t+"]",d,u].join("|")+")"+S+f+")*",h="(?:"+["["+a+"]",d,u].join("|")+")"+(S+f+g),x=RegExp([_+"?"+o+"+"+m+"(?="+[l,_,"$"].join("|")+")","(?:"+_+"|"+c+")+"+E+"(?="+[l,_+p,"$"].join("|")+")",_+"?"+p+"+"+m,_+"+"+E,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",h].join("|"),"g");e.exports=function(e){return e.match(x)||[]}},69689:function(e,t,a){var s=a(4248),r=a(65567),i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,n=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=r(e))&&e.replace(i,s).replace(n,"")}},64925:function(e,t,a){var s=a(56632)(a(66259));e.exports=s},66259:function(e,t,a){var s=a(95372),r=a(89278),i=a(47991),n=Math.max;e.exports=function(e,t,a){var l=null==e?0:e.length;if(!l)return -1;var o=null==a?0:i(a);return o<0&&(o=n(l+o,0)),s(e,r(t,3),o)}},55807:function(e,t,a){var s=a(66070),r=a(89278),i=a(67375),n=a(19785);e.exports=function(e,t){return(n(e)?s:i)(e,r(t,3))}},32526:function(e,t,a){var s=a(68267)(function(e,t,a){return e+(a?"_":"")+t.toLowerCase()});e.exports=s},94919:function(e,t,a){var s=a(91936),r=1/0;e.exports=function(e){return e?(e=s(e))===r||e===-r?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},47991:function(e,t,a){var s=a(94919);e.exports=function(e){var t=s(e),a=t%1;return t==t?a?t-a:t:0}},93254:function(e,t,a){var s=a(40585),r=a(73909),i=a(65567),n=a(97025);e.exports=function(e,t,a){return(e=i(e),void 0===(t=a?void 0:t))?r(e)?n(e):s(e):e.match(t)||[]}},86548:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reporting/datamap",function(){return a(27901)}])},624:function(e,t,a){"use strict";var s=a(24246),r=a(36010),i=a(27378);let n=e=>{let t=e.split("."),a=[];return t.forEach(e=>{let t=a.length>0?a[a.length-1]:null;t?a.push("".concat(t,".").concat(e)):a.push(e)}),a},l=(e,t)=>{let a=n(t).filter(e=>e!==t);return e.filter(e=>a.includes(e)).length>0},o=(e,t)=>!!(e===t||e.startsWith("".concat(t,"."))),c=(e,t,a)=>{let s=null!=a?a:[];return e.forEach(e=>{e.children&&c(e.children,t,s),o(e.value,t)&&s.push(e)}),s},d=e=>{let{node:t,isChecked:a,onChecked:i,isExpanded:n,onExpanded:l,isIndeterminate:o,isDisabled:c,children:d}=e,{value:u,label:_}=t,p=!!t.children&&t.children.length>0;return(0,s.jsxs)(r.TJV,{children:[(0,s.jsxs)(r.TJV,{display:"flex",justifyContent:"space-between",_hover:{backgroundColor:"gray.100",cursor:"pointer"},onClick:()=>l(t),minHeight:8,children:[(0,s.jsx)(r.gxE,{colorScheme:"complimentary",value:u,isChecked:!o&&a,isIndeterminate:o,isDisabled:c,onChange:()=>i(t),mx:2,"data-testid":"checkbox-".concat(_),children:_}),p?(0,s.jsx)(r.zxk,{"data-testid":"expand-".concat(_),"aria-label":n?"collapse":"expand",icon:(0,s.jsx)(r.tMo,{boxSize:5}),type:"text",onClick:()=>l(t),className:n?"rotate-180":void 0}):null]}),d&&(0,s.jsx)(r.TJV,{ml:5,children:d})]})};t.ZP=e=>{let{nodes:t,selected:a,onSelected:u,..._}=e,[p,m]=(0,i.useState)([]),[E,f]=(0,i.useState)([]);(0,i.useEffect)(()=>{let e=Array.from(new Set([...a.map(e=>n(e)).reduce((e,t)=>e.concat(t),[]),...a.map(e=>c(t,e)).reduce((e,t)=>e.concat(t),[]).map(e=>e.value)]));f(e),m(e)},[a,t]);let S=e=>{let s=[],r=[];p.indexOf(e.value)>=0?(s=p.filter(t=>!o(t,e.value)),r=a.filter(t=>!o(t,e.value))):(s=[...p,...c(t,e.value).map(e=>e.value)],r=[...a,e.value]),m(s),u(r)},g=e=>{E.indexOf(e.value)>=0?f(E.filter(t=>!o(t,e.value))):f([...E,e.value])},h=e=>{if(e.children){let r=p.indexOf(e.value)>=0,n=E.indexOf(e.value)>=0,o=c(t,e.value),u=r&&e.children.length>0&&p.filter(t=>t.startsWith("".concat(e.value,"."))).length+1!==o.length,_=l(a,e.value);return(0,s.jsx)(d,{node:e,isChecked:r,onChecked:S,isExpanded:n,onExpanded:g,isDisabled:_,isIndeterminate:u,children:n?e.children.map(e=>(0,s.jsx)(i.Fragment,{children:h(e)},e.value)):void 0})}return null};return(0,s.jsx)(r.TJV,{..._,children:t.map(e=>(0,s.jsx)(r.TJV,{children:h(e)},e.value))})}},35287:function(e,t,a){"use strict";var s=a(24246),r=a(36010),i=a(88038),n=a.n(i);a(27378),t.Z=e=>{let{children:t,title:a,fullHeight:i,fullWidth:l,mainProps:o}=e;return(0,s.jsxs)(r.ad9,{"data-testid":a,direction:"column",height:i?"100vh":"calc(100vh - 48px)",width:l?"100vw":"calc(100vw - 240px)",children:[(0,s.jsxs)(n(),{children:[(0,s.jsxs)("title",{children:["Fides Admin UI - ",a]}),(0,s.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsx)(r.ad9,{px:10,py:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0,...o,children:t})]})}},58754:function(e,t,a){"use strict";var s=a(24246),r=a(36010),i=a(70788);t.Z=e=>{let{heading:t,breadcrumbItems:a,isSticky:n=!0,children:l,rightContent:o,style:c,...d}=e;return(0,s.jsxs)("div",{...d,style:n?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,s.jsxs)(r.kCb,{justify:"space-between",children:["string"==typeof t?(0,s.jsx)(r.Dxz,{className:a||l?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,o&&(0,s.jsx)("div",{"data-testid":"page-header-right-content",children:o})]}),!!a&&(0,s.jsx)(i.m,{className:l?"pb-4":void 0,items:a,"data-testid":"page-breadcrumb"}),l]})}},19904:function(e,t,a){"use strict";a.d(t,{Tg:function(){return n}});var s=a(24246),r=a(16134),i=a(31793);let n=e=>(0,r.C)(i.uu).filter(t=>e.includes(t)).length>0;t.ZP=e=>{let{scopes:t,children:a}=e;return n(t)?(0,s.jsx)(s.Fragment,{children:a}):null}},34929:function(e,t,a){"use strict";var s=a(24246),r=a(64925),i=a.n(r),n=a(27378),l=a(16134),o=a(30002),c=a(28079),d=a(57072);let u=()=>{let{isLoading:e}=(0,c.fd)(),t=(0,l.C)(c.U3),{isLoading:a}=(0,d.MO)(),s=(0,l.C)(d.qb),{isLoading:r}=(0,o.te)();return{dataUses:t,dataSubjects:(0,l.C)(o.ZL),dataCategories:s,isLoading:e||a||r}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:a,isLoading:r}=u(),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},o=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=t(e);if(!s)return{};let r=t(l(e,a)),i=!!s.parent_key;return{name:s.name||void 0,primaryName:i&&(null==r?void 0:r.name)!==s.name&&(null==r?void 0:r.name)||void 0}},c=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{name:r,primaryName:i}=o(e,t,a);return r?i?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsxs)("strong",{children:[i,":"]})," ",r]},e):(0,s.jsx)("strong",{children:r},e):e},d=t=>i()(e,{fides_key:t}),_=e=>i()(t,{fides_key:e}),p=e=>i()(a,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:d,getDataUseDisplayName:e=>c(e,d,1),getDataUseDisplayNameProps:e=>o(e,d,1),getDataCategories:()=>t,getDataCategoryByKey:_,getDataCategoryDisplayName:e=>c(e,_,2),getDataCategoryDisplayNameProps:e=>o(e,_,2),getDataSubjects:()=>a,getDataSubjectByKey:p,getDataSubjectDisplayName:e=>{let t=p(e);return t?t.name:e},getDataSubjectDisplayNameProps:e=>{let t=p(e);return t?{name:t.name||e}:{}},getPrimaryKey:l,isLoading:r}}},70788:function(e,t,a){"use strict";a.d(t,{m:function(){return c}});var s=a(24246),r=a(36010),i=a(79894),n=a.n(i),l=a(27378);let{Text:o}=r.Typography,c=e=>{let{items:t,...a}=e,i=(0,l.useMemo)(()=>null==t?void 0:t.map((e,a)=>{let i=a===t.length-1,l={...e},c=l.onClick&&!l.href;return("string"==typeof l.title&&(l.title=(0,s.jsx)(o,{style:{color:"inherit",maxWidth:i?void 0:400},ellipsis:!i,id:i?"breadcrumb-current-page":void 0,children:l.title})),c)?l.title=(0,s.jsx)(r.zxk,{type:"text",size:"small",icon:l.icon,onClick:l.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:l.title}):(l.icon&&(l.title=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"anticon align-text-bottom",children:l.icon}),l.title]})),l.href&&l.title&&(l.title=(0,s.jsx)(n(),{href:l.href,className:"ant-breadcrumb-link",children:l.title}),delete l.href)),l}),[t]);return(0,s.jsx)(r.aGc,{items:i,...a})}},2525:function(e,t,a){"use strict";a.d(t,{Q:function(){return l}});var s=a(24246),r=a(36010),i=a(27378),n=a(3110);let l=e=>{let{values:t,columnState:a,tagProps:l,onTagClose:o,onStateChange:c,...d}=e,{isExpanded:u,isWrapped:_,version:p}=a||{},[m,E]=(0,i.useState)(!u),[f,S]=(0,i.useState)(!!_),[g,h]=(0,i.useState)(u?t:null==t?void 0:t.slice(0,2));(0,i.useEffect)(()=>{E(!u)},[u,p]),(0,i.useEffect)(()=>{S(!!_)},[_]),(0,i.useEffect)(()=>{(null==t?void 0:t.length)?h(m?t.slice(0,2):t):h(t)},[m,t,c]),(0,i.useEffect)(()=>{(null==t?void 0:t.length)&&t.length<=2&&!m&&(E(!0),null==c||c(!1))},[t,c,m]);let x=(0,i.useCallback)(()=>{h(null==t?void 0:t.slice(0,2)),E(!0),null==c||c(!1)},[t,c]),A=(0,i.useCallback)(()=>{E(!1),null==c||c(!0)},[c]),T=(0,i.useCallback)(()=>{m?A():x()},[m,A,x]);return(0,i.useMemo)(()=>(null==g?void 0:g.length)?(0,s.jsxs)(r.kCb,{align:m?"center":"start",wrap:f?"wrap":"nowrap",vertical:!m,gap:"small","data-testid":"tag-expandable-cell",style:{overflowX:"auto",...d.style},...d,children:[g.map(e=>(0,s.jsx)(r.Vp9,{color:"white","data-testid":e.key,onClose:o?()=>o(e.key):void 0,...l,...e.tagProps,children:(0,s.jsx)(r.xvT,{ellipsis:!!m&&{tooltip:!0},style:{color:"inherit",maxWidth:m?n.TD:void 0},children:e.label})},e.key)),t&&t.length>2&&(0,s.jsx)(r.zxk,{type:"link",size:"small",onClick:e=>{e.stopPropagation(),T()},className:"h-auto p-0",style:{fontSize:"var(--ant-font-size)"},children:m?"+".concat(t.length-2," more"):n.T5})]}):(0,s.jsx)("span",{"data-testid":"tag-expandable-cell-empty"}),[g,m,f,d,t,l,o,T])}},3110:function(e,t,a){"use strict";a.d(t,{DI:function(){return l},T5:function(){return i},TD:function(){return n}});var s=a(24246),r=a(36010);let i="show less",n=150,l=[{key:"expand-all",label:"Expand all",icon:(0,s.jsx)(r.PJP.jbG,{})},{key:"collapse-all",label:"Collapse all",icon:(0,s.jsx)(r.PJP.MVB,{})}]},24813:function(e,t,a){"use strict";a.d(t,{ED:function(){return n},vx:function(){return d},Q3:function(){return u.Q}});var s=a(24246),r=a(36010),i=a(46238);let n=e=>{let{value:t,tooltip:a}=e;return(0,s.jsxs)(r.kCb,{align:"center",gap:"small",children:[t,(0,s.jsx)(i.b,{label:a})]})};var l=a(27378),o=a(3110);let{Text:c}=r.Typography,d=e=>{let{values:t,valueSuffix:a,columnState:i,containerProps:n}=e,{isExpanded:d,version:u}=i||{},[_,p]=(0,l.useState)(!d);(0,l.useEffect)(()=>{p(!d)},[d,u]);let m=(0,l.useCallback)(()=>{p(!0)},[]),E=(0,l.useCallback)(()=>{p(!1)},[]),f=(0,l.useCallback)(()=>{_?E():m()},[_,E,m]);return(0,l.useMemo)(()=>(null==t?void 0:t.length)?1===t.length?(0,s.jsx)(r.kCb,{...n,children:(0,s.jsx)(c,{ellipsis:!0,"data-testid":"list-expandable-cell-single",children:t[0]})}):(0,s.jsxs)(r.kCb,{align:_?"center":"flex-start",vertical:!_,gap:_?"small":"none","data-testid":"list-expandable-cell",...n,children:[_?(0,s.jsxs)(c,{ellipsis:!0,children:[t.length," ",a]}):(0,s.jsx)(r.aVo,{dataSource:t,renderItem:e=>(0,s.jsx)("li",{children:e})}),(0,s.jsx)(r.zxk,{type:"link",size:"small",onClick:e=>{e.stopPropagation(),f()},className:"h-auto p-0",style:{fontSize:"var(--ant-font-size)"},children:_?"view":o.T5})]}):null,[_,t,a,f,n])};var u=a(2525)},22583:function(e,t,a){"use strict";a.d(t,{j:function(){return i}});var s=a(36010),r=a(60240);let i={[r.Ej.TAXONOMY_WHITE]:s.tAb.DEFAULT,[r.Ej.TAXONOMY_RED]:s.tAb.ERROR,[r.Ej.TAXONOMY_ORANGE]:s.tAb.WARNING,[r.Ej.TAXONOMY_YELLOW]:s.tAb.CAUTION,[r.Ej.TAXONOMY_GREEN]:s.tAb.SUCCESS,[r.Ej.TAXONOMY_BLUE]:s.tAb.INFO,[r.Ej.TAXONOMY_PURPLE]:s.tAb.ALERT,[r.Ej.SANDSTONE]:s.tAb.SANDSTONE,[r.Ej.MINOS]:s.tAb.MINOS}},59001:function(e,t,a){"use strict";a.d(t,{Ch:function(){return o},Lo:function(){return n},_g:function(){return c},ac:function(){return i},aq:function(){return d}});var s,r,i,n,l=a(60240);let o="root";(s=i||(i={})).DATA_CATEGORY="data_category",s.DATA_USE="data_use",s.DATA_SUBJECT="data_subject",s.SYSTEM_GROUP="system_group",(r=n||(n={})).DATA_CATEGORIES="Data categories",r.DATA_USES="Data uses",r.DATA_SUBJECTS="Data subjects",r.SYSTEM_GROUPS="System groups";let c=e=>{switch(e){case"data_category":return"Data categories";case"data_use":return"Data uses";case"data_subject":return"Data subjects";case"system_group":return"System groups";default:return e}},d=e=>{switch(e){case"data_category":return{UPDATE:l.Sh.DATA_CATEGORY_UPDATE,CREATE:l.Sh.DATA_CATEGORY_CREATE,DELETE:l.Sh.DATA_CATEGORY_DELETE,READ:l.Sh.DATA_CATEGORY_READ};case"data_use":return{UPDATE:l.Sh.DATA_USE_UPDATE,CREATE:l.Sh.DATA_USE_CREATE,DELETE:l.Sh.DATA_USE_DELETE,READ:l.Sh.DATA_USE_READ};case"data_subject":return{UPDATE:l.Sh.DATA_SUBJECT_UPDATE,CREATE:l.Sh.DATA_SUBJECT_CREATE,DELETE:l.Sh.DATA_SUBJECT_DELETE,READ:l.Sh.DATA_SUBJECT_READ};case"system_group":return{UPDATE:l.Sh.SYSTEM_GROUP_UPDATE,CREATE:l.Sh.SYSTEM_GROUP_CREATE,DELETE:l.Sh.SYSTEM_GROUP_DELETE,READ:l.Sh.SYSTEM_GROUP_READ};default:return{UPDATE:l.Sh.TAXONOMY_UPDATE,CREATE:l.Sh.TAXONOMY_CREATE,DELETE:l.Sh.TAXONOMY_DELETE,READ:l.Sh.TAXONOMY_READ}}}},90673:function(e,t,a){"use strict";a.d(t,{Cd:function(){return i},Xl:function(){return n}});var s=a(20987),r=a(59001);let i=(e,t)=>{let a;if(null==t&&e.every(e=>void 0===e.parent_key))a=e;else{let s=null!=t?t:null;a=e.filter(e=>e.parent_key===s)}return a.map(t=>{var a,s;let r=t.fides_key;return{value:t.fides_key,label:t.name||t.fides_key,description:t.description,children:i(e,r),is_default:null!==(a=t.is_default)&&void 0!==a&&a,active:null!==(s=t.active)&&void 0!==s&&s}})},n=e=>{switch(e){case r.ac.DATA_CATEGORY:return s.J.DATA_CATEGORY;case r.ac.DATA_SUBJECT:return s.J.DATA_SUBJECT;case r.ac.DATA_USE:return s.J.DATA_USE;case r.ac.SYSTEM_GROUP:return"system group";default:return e}}},27901:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eO}});var s,r,i,n,l=a(24246),o=a(27378),c=a(59849),d=a(35287),u=a(58754),_=a(71795),p=a(60240);(s=i||(i={})).COLUMN_EXPANSION_STATE="datamap-column-expansion-state",s.COLUMN_NAMES="datamap-column-names",s.COLUMN_ORDER="datamap-column-order",s.COLUMN_SIZING="datamap-column-sizing",s.COLUMN_VISIBILITY="datamap-column-visibility",s.CUSTOM_REPORT_ID="datamap-custom-report-id",s.FILTERS="datamap-filters",s.GROUP_BY="datamap-group-by",s.SORTING_STATE="datamap-sorting-state",s.WRAPPING_COLUMNS="datamap-wrapping-columns",(r=n||(n={})).SYSTEM_NAME="system_name",r.DATA_USE="data_uses",r.DATA_CATEGORY="data_categories",r.DATA_SUBJECT="data_subjects",r.LEGAL_NAME="legal_name",r.DPO="dpo",r.LEGAL_BASIS_FOR_PROCESSING="legal_basis_for_processing",r.ADMINISTRATING_DEPARTMENT="administrating_department",r.COOKIE_MAX_AGE_SECONDS="cookie_max_age_seconds",r.PRIVACY_POLICY="privacy_policy",r.LEGAL_ADDRESS="legal_address",r.COOKIE_REFRESH="cookie_refresh",r.DATA_SECURITY_PRACTICES="data_security_practices",r.DATA_SHARED_WITH_THIRD_PARTIES="data_shared_with_third_parties",r.DATA_STEWARDS="data_stewards",r.DECLARATION_NAME="declaration_name",r.DOES_INTERNATIONAL_TRANSFERS="does_international_transfers",r.DPA_LOCATION="dpa_location",r.DESTINATIONS="egress",r.EXEMPT_FROM_PRIVACY_REGULATIONS="exempt_from_privacy_regulations",r.FEATURES="features",r.FIDES_KEY="fides_key",r.FLEXIBLE_LEGAL_BASIS_FOR_PROCESSING="flexible_legal_basis_for_processing",r.IMPACT_ASSESSMENT_LOCATION="impact_assessment_location",r.SOURCES="ingress",r.JOINT_CONTROLLER_INFO="joint_controller_info",r.LEGAL_BASIS_FOR_PROFILING="legal_basis_for_profiling",r.LEGAL_BASIS_FOR_TRANSFERS="legal_basis_for_transfers",r.LEGITIMATE_INTEREST_DISCLOSURE_URL="legitimate_interest_disclosure_url",r.PROCESSES_PERSONAL_DATA="processes_personal_data",r.REASON_FOR_EXEMPTION="reason_for_exemption",r.REQUIRES_DATA_PROTECTION_ASSESSMENTS="requires_data_protection_assessments",r.RESPONSIBILITY="responsibility",r.RETENTION_PERIOD="retention_period",r.SHARED_CATEGORIES="shared_categories",r.SPECIAL_CATEGORY_LEGAL_BASIS="special_category_legal_basis",r.THIRD_PARTIES="third_parties",r.COOKIES="cookies",r.USES_COOKIES="uses_cookies",r.USES_NON_COOKIE_ACCESS="uses_non_cookie_access",r.USES_PROFILING="uses_profiling",r.SYSTEM_UNDECLARED_DATA_CATEGORIES="system_undeclared_data_categories",r.DATA_USE_UNDECLARED_DATA_CATEGORIES="data_use_undeclared_data_categories",r.PROCESSES_SPECIAL_CATEGORY_DATA="processes_special_category_data",r.SYSTEM_GROUPS="system_groups",r.SYSTEM_GROUP="system_group_fides_key",r.SYSTEM_GROUP_DATA_USES="system_group_data_uses";let m={system_name:"System",data_uses:"Data use",data_categories:"Data categories",data_subjects:"Data subject",legal_name:"Legal name",dpo:"Data privacy officer",legal_basis_for_processing:"Legal basis for processing",administrating_department:"Administrating department",cookie_max_age_seconds:"Cookie max age seconds",privacy_policy:"Privacy policy",legal_address:"Legal address",cookie_refresh:"Cookie refresh",data_security_practices:"Data security practices",data_shared_with_third_parties:"Data shared with third parties",data_stewards:"Data stewards",declaration_name:"Declaration name",does_international_transfers:"Does international transfers",dpa_location:"DPA location",egress:"Destination",exempt_from_privacy_regulations:"Exempt from privacy regulations",features:"Features",fides_key:"Fides key",flexible_legal_basis_for_processing:"Flexible legal basis for processing",impact_assessment_location:"Impact assessment location",ingress:"Source",joint_controller_info:"Joint controller info",legal_basis_for_profiling:"Legal basis for profiling",legal_basis_for_transfers:"Legal basis for transfers",legitimate_interest_disclosure_url:"Legitimate interest disclosure URL",processes_personal_data:"Processes personal data",reason_for_exemption:"Reason for exemption",requires_data_protection_assessments:"Requires data protection assessments",responsibility:"Responsibility",retention_period:"Retention period",shared_categories:"Shared categories",special_category_legal_basis:"Special category legal basis",third_parties:"Third parties",system_undeclared_data_categories:"System undeclared data categories",data_use_undeclared_data_categories:"Data use undeclared data categories",cookies:"Cookies",uses_cookies:"Uses cookies",uses_non_cookie_access:"Uses non-cookie access",uses_profiling:"Uses profiling",processes_special_category_data:"Processes special category data",system_groups:"System groups",system_group_fides_key:"System group",system_group_data_uses:"Data uses"},E={[n.SYSTEM_UNDECLARED_DATA_CATEGORIES]:!1,[n.DATA_USE_UNDECLARED_DATA_CATEGORIES]:!1},f={dataUses:[],dataSubjects:[],dataCategories:[]},S=(0,o.createContext)({}),g=e=>{let{children:t}=e,[a,s]=(0,_._)(i.CUSTOM_REPORT_ID,""),[r,n]=(0,_._)(i.GROUP_BY,p.fI.SYSTEM_DATA_USE),[c,d]=(0,_._)(i.FILTERS,f),[u,m]=(0,_._)(i.COLUMN_ORDER,[]),[g,h]=(0,_._)(i.COLUMN_VISIBILITY,E),[x,A]=(0,_._)(i.COLUMN_SIZING,{}),[T,C]=(0,_._)(i.COLUMN_NAMES,{}),O=(0,o.useMemo)(()=>({savedCustomReportId:a,setSavedCustomReportId:s,groupBy:r,setGroupBy:n,selectedFilters:c,setSelectedFilters:d,columnOrder:u,setColumnOrder:m,columnVisibility:g,setColumnVisibility:h,columnSizing:x,setColumnSizing:A,columnNameMapOverrides:T,setColumnNameMapOverrides:C}),[a,s,r,n,c,d,u,m,g,h,x,A,T,C]);return(0,l.jsx)(S.Provider,{value:O,children:t})},h=()=>{let e=(0,o.useContext)(S);if(!e||0===Object.keys(e).length)throw Error("useDatamapReport must be used within a DatamapReportProvider");return e};var x=a(59003),A=a(92222),T=a(15793),C=a(36010),O=a(34090),v=a(66726),b=a.n(v),R=a(16134),y=a(34929),j=a(14048),D=a(19904),I=a(16394),N=a(38943),M=a(35258),P=e=>{let{children:t,heading:a,onCancel:s,onConfirm:r,isLoading:i,cancelButtonText:n,continueButtonText:o,"data-testid":c="standard-dialog",...d}=e,{onClose:u}=d;return(0,l.jsxs)(C.TGG,{closeOnOverlayClick:i,...d,children:[(0,l.jsx)(C.T5Q,{}),(0,l.jsxs)(C.Z8H,{"data-testid":c,children:[a&&(0,l.jsx)(C.geD,{children:a}),(0,l.jsx)(C.fpf,{isDisabled:i,"data-testid":"standard-dialog-close-btn"}),t&&(0,l.jsx)(C.zOL,{children:t}),(0,l.jsxs)(C.NGc,{gap:3,width:"100%",sx:{"& button":{width:"100%"}},children:[(0,l.jsx)(C.zxk,{onClick:()=>{s&&s(),u()},"data-testid":"".concat(c?"".concat(c,"-"):"","cancel-btn"),disabled:i,children:n||"Cancel"}),(0,l.jsx)(C.zxk,{onClick:r,type:"primary","data-testid":"".concat(c?"".concat(c,"-"):"","continue-btn"),loading:i,children:o||"Continue"})]})]})]})},U=a(22968),k=e=>{let[t,a]=(0,o.useState)(U.T2.csv),{onConfirm:s}=e;return(0,l.jsx)(P,{heading:"Export report",continueButtonText:"Download",size:"xl",...e,onConfirm:()=>s(t),"data-testid":"export-modal",children:(0,l.jsxs)(C.ad9,{direction:"column",gap:3,pb:3,children:[(0,l.jsx)(C.Bjg,{textAlign:"left",children:"Export your data map report using the options below. Depending on the number of rows, the file may take a few minutes to process."}),(0,l.jsxs)(C.DTt,{children:[(0,l.jsx)(C.tLq,{htmlFor:"format",children:"Choose Format"}),(0,l.jsx)(C.PhF,{id:"format",value:t,onChange:a,"data-testid":"export-format-select",options:[{value:U.T2.csv,label:"CSV"},{value:U.T2.xlsx,label:"XLSX"}],className:"w-full"})]})]})})},L=a(624),w=a(30002),G=a(28079),Y=a(5785),z=a(90673);let F=e=>{let{label:t,children:a,...s}=e;return(0,l.jsxs)(C.nCC,{...s,children:[(0,l.jsx)(C.y_b,{children:(0,l.jsxs)(C.rKS,{height:"100%","data-testid":"filter-modal-accordion-button",textAlign:"left",fontWeight:600,children:[(0,l.jsx)(C.TJV,{flex:1,children:t}),(0,l.jsx)(C.UhW,{boxSize:7})]})}),(0,l.jsx)(C.rnb,{children:a})]})},V=e=>{let{columnNameMap:t,selectedFilters:a,onFilterChange:s,onClose:r,...i}=e;(0,G.fd)(),(0,w.te)(),(0,Y.MO)();let{dataUses:n,dataSubjects:c,dataCategories:d}=a,u=(0,R.C)(G.U3),_=(0,R.C)(w.ZL),p=(0,R.C)(Y.qb),[m,E]=(0,o.useState)(n),[f,S]=(0,o.useState)(c),[g,h]=(0,o.useState)(d);(0,o.useEffect)(()=>{E(n)},[n]),(0,o.useEffect)(()=>{S(c)},[c]),(0,o.useEffect)(()=>{h(d)},[d]);let x=(0,o.useMemo)(()=>(0,z.Cd)(u),[u]),A=(0,o.useMemo)(()=>(0,z.Cd)(_),[_]),T=(0,o.useMemo)(()=>(0,z.Cd)(p),[p]);return(0,l.jsx)(P,{heading:"Filter Datamap Report",...i,onCancel:()=>{E([]),S([]),h([]),s({dataUses:[],dataSubjects:[],dataCategories:[]}),r()},onConfirm:()=>{s({dataUses:m,dataSubjects:f,dataCategories:g}),r()},onClose:r,cancelButtonText:"Reset filters",continueButtonText:"Done","data-testid":"datamap-report-filter-modal",children:(0,l.jsxs)(C.NvE,{allowToggle:!0,children:[(0,l.jsx)(F,{label:t.data_uses,children:(0,l.jsx)(L.ZP,{nodes:x,selected:m,onSelected:E,"data-testid":"filter-modal-checkbox-tree-uses"})}),(0,l.jsx)(F,{label:t.data_categories,children:(0,l.jsx)(L.ZP,{nodes:T,selected:g,onSelected:h,"data-testid":"filter-modal-checkbox-tree-categories"})}),(0,l.jsx)(F,{label:t.data_subjects,children:(0,l.jsx)(L.ZP,{nodes:A,selected:f,onSelected:S,"data-testid":"filter-modal-checkbox-tree-subjects"})})]})})};var H=a(32885),Z=a(69353),B=a(812);let{useGetMinimalCustomReportsQuery:W,useLazyGetCustomReportByIdQuery:J,usePostCustomReportMutation:X,useDeleteCustomReportMutation:q}=a(78780).u.injectEndpoints({endpoints:e=>({getMinimalCustomReports:e.query({query:e=>{let{pageIndex:t=1,pageSize:a=50,report_type:s=p.C2.DATAMAP}=e,r="page=".concat(t,"&size=").concat(a,"&report_type=").concat(s);return{url:"plus/custom-report/minimal?".concat(r)}},providesTags:["Custom Reports"]}),getCustomReportById:e.query({query:e=>({url:"plus/custom-report/".concat(e)}),providesTags:(e,t,a)=>[{type:"Custom Reports",id:a}]}),postCustomReport:e.mutation({query:e=>({method:"POST",url:"plus/custom-report",body:e}),invalidatesTags:["Custom Reports"]}),deleteCustomReport:e.mutation({query:e=>({method:"DELETE",url:"plus/custom-report/".concat(e)}),invalidatesTags:["Custom Reports"]})})});var K=a(55484),Q=a(40324);let $="Report name",ee=e=>{let{isOpen:t,handleClose:a,tableStateToSave:s,columnMapToSave:r={},unavailableNames:i,onCreateCustomReport:n}=e,c=(0,C.p8r)(),[d]=X(),u=(0,o.useMemo)(()=>K.Ry().shape({reportName:K.Z_().label($).required("Please provide a name for this report").test("is-unique","",async(e,t)=>null==i||!i.includes(e)||t.createError({message:"This name already exists"})).max(80,"Report name is too long (max 80 characters)")}),[i]),_=async e=>{var t;let i={};Object.entries(r).forEach(e=>{let[t,a]=e;i[t]={label:a,enabled:!0}}),Object.entries(null!==(t=null==s?void 0:s.columnVisibility)&&void 0!==t?t:{}).forEach(e=>{let[t,a]=e;i[t]||(i[t]={}),i[t].enabled=a});try{let t={name:e.trim(),type:p.C2.DATAMAP,config:{column_map:i,table_state:s}},r=await d(t);if((0,B.D4)(r))throw r.error;n(r.data),a()}catch(e){c({status:"error",description:(0,B.e$)(e,"A problem occurred while creating the report.")})}};return(0,l.jsxs)(C.TGG,{size:"lg",isOpen:t,onClose:a,motionPreset:"none",children:[(0,l.jsx)(C.T5Q,{}),(0,l.jsxs)(C.Z8H,{children:[(0,l.jsx)(C.geD,{pb:0,children:"Create a report"}),(0,l.jsx)(O.J9,{initialValues:{reportName:""},onSubmit:e=>_(e.reportName),onReset:a,validateOnBlur:!1,validationSchema:u,children:e=>{let{dirty:t,isValid:a}=e;return(0,l.jsxs)(O.l0,{"data-testid":"custom-report-form",children:[(0,l.jsxs)(C.zOL,{children:[(0,l.jsx)(C.Bjg,{fontSize:"sm",color:"gray.600",pb:6,children:"Customize and save your current filter settings for easy access in the future. This saved report will include the column layout and currently applied filter settings."}),(0,l.jsx)(Q.j0,{id:"reportName",name:"reportName",isRequired:!0,label:$,placeholder:"Enter a name for the report...",variant:"stacked",maxLength:80})]}),(0,l.jsxs)(C.NGc,{gap:2,children:[(0,l.jsx)(C.zxk,{size:"small",htmlType:"reset",children:"Cancel"}),(0,l.jsx)(C.zxk,{size:"small",disabled:!t||!a,type:"primary","data-testid":"custom-report-form-submit",htmlType:"submit",children:"Save"})]})]})}})]})]})},et="Report",ea="Reports",es=e=>{var t;let{reportType:a,savedReportId:s,tableStateToSave:r,currentColumnMap:i,onCustomReportSaved:n,onSavedReportDeleted:c}=e,d=(0,D.Tg)([p.Sh.CUSTOM_REPORT_CREATE]),u=(0,D.Tg)([p.Sh.CUSTOM_REPORT_DELETE]),_=(0,C.p8r)({id:"custom-report-toast"}),{data:m,isLoading:E}=W({report_type:a}),[f,S]=(0,o.useState)(),[g]=J(),[h]=q(),{isOpen:x,onOpen:A,onClose:T}=(0,C.E2M)(),{isOpen:v,onOpen:b,onClose:R}=(0,C.E2M)(),{isOpen:y,onOpen:j,onClose:I}=(0,C.E2M)(),[N,M]=(0,o.useState)(),[P,U]=(0,o.useState)(),[k,L]=(0,o.useState)(),[w,G]=(0,o.useState)(!1),{resetForm:Y}=(0,O.u6)(),z=(0,o.useMemo)(()=>{var e;let t=null==m?void 0:null===(e=m.items.find(e=>e.id===s))||void 0===e?void 0:e.name;return null!=t?t:ea},[null==m?void 0:m.items,s]),F=!E&&!(null==m?void 0:null===(t=m.items)||void 0===t?void 0:t.length),V=e=>{S(null==m?void 0:m.items.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())))},H=async e=>{M(e);let{data:t,isError:a,error:s}=await g(e);if(a){let e=(0,B.e$)(s,"A problem occurred while fetching the ".concat(et,"."));e.includes("not found")&&c(),_({status:"error",description:e})}else U(t)},Z=()=>{M(""),U(void 0),G(!1)},X=()=>{P?(G(!1),P.id!==s&&n(P,Y),T()):N?G(!0):(n(null,Y),T())},K=async e=>{e===(null==P?void 0:P.id)&&(Z(),c()),h(e)};(0,o.useEffect)(()=>{m&&S(m.items)},[m]),(0,o.useEffect)(()=>{w&&(G(!1),X())},[P]),(0,o.useEffect)(()=>{s?H(s):Z()},[s]),(0,o.useEffect)(()=>{k&&j()},[j,k]);let Q=!P&&!s||(null==P?void 0:P.id)===s,$=(0,l.jsx)("div",{"data-testid":"custom-reports-popover",children:(0,l.jsx)(O.J9,{initialValues:{},onSubmit:X,onReset:Z,children:(0,l.jsxs)(O.l0,{children:[(0,l.jsxs)("div",{className:"relative p-3",style:{borderBottom:"var(--ant-popover-title-border-bottom)"},children:[(0,l.jsx)(C.zxk,{size:"small",disabled:F,htmlType:"reset",className:"absolute left-3 top-3","data-testid":"custom-reports-reset-button",children:"Reset"}),(0,l.jsx)(C.zxk,{type:"text",size:"small","aria-label":"Cancel",icon:(0,l.jsx)(C.PJP.x8P,{}),className:"absolute right-3 top-3",onClick:()=>{s?H(s):Z(),T()},"data-testid":"custom-report-popover-cancel"}),(0,l.jsx)("div",{className:"text-center",style:{color:"var(--ant-color-text-heading)",fontWeight:"var(--ant-font-weight-strong)"},children:ea}),(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsx)(C.IIB,{size:"small",placeholder:"Search...",onChange:e=>V(e.target.value)})})]}),(0,l.jsxs)("div",{className:"px-5 pb-1 pt-3",children:[F&&(0,l.jsx)(C.HYy,{image:(0,l.jsx)(C.zxk,{type:"primary",shape:"circle",size:"small","aria-label":"add ".concat(et),icon:(0,l.jsx)(C.PJP.mm_,{}),onClick:b,"data-testid":"add-report-button"}),description:"No ".concat(ea.toLowerCase()," have been created. Start by applying your preferred filter and column settings, then create a ").concat(et.toLowerCase()," for easy access later."),styles:{image:{height:"24px"}},"data-testid":"custom-reports-empty-state"}),!F&&(E?(0,l.jsx)(C.OdW,{active:!0,paragraph:{rows:3,width:"100%"},title:!1,className:"pt-2"}):(0,l.jsx)(C.Y8K.Group,{onChange:e=>H(e.target.value),value:N,style:{width:"100%"},children:(0,l.jsx)(C.TaI,{direction:"vertical",className:"w-full",size:"small",children:null==f?void 0:f.map(e=>(0,l.jsxs)(C.kCb,{justify:u?"space-between":"flex-start",align:"center",children:[(0,l.jsx)(C.Y8K,{value:e.id,name:"custom-report-id","data-testid":"custom-report-item",children:e.name}),u&&(0,l.jsx)(C.zxk,{type:"text",size:"small",icon:(0,l.jsx)(C.PJP.ZNm,{}),onClick:()=>L(e),"data-testid":"delete-report-button","aria-label":"Delete"})]},e.id))})}))]}),(0,l.jsxs)(C.kCb,{className:"px-5 py-4",gap:"small",children:[d&&r&&(0,l.jsxs)(C.zxk,{size:"small",onClick:b,className:"flex-1 gap-1 pl-0","data-testid":"create-report-button",htmlType:"button",icon:(0,l.jsx)(C.PJP.mm_,{}),iconPosition:"start",children:["Create ",et.toLowerCase()]}),(0,l.jsx)(C.zxk,{size:"small",type:"primary",loading:w,disabled:Q,className:"flex-1","data-testid":"apply-report-button",htmlType:"submit",children:"Apply"})]})]})})});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C.J2e,{content:$,trigger:"click",placement:"bottomRight",open:x,onOpenChange:e=>{e?A():X()},styles:{root:{width:"320px"}},zIndex:1400,children:(0,l.jsx)(C.zxk,{className:"max-w-40",icon:(0,l.jsx)(C.tMo,{}),iconPosition:"end","data-testid":"custom-reports-trigger",children:(0,l.jsx)(C.xvT,{ellipsis:!0,children:z})})}),(0,l.jsx)(ee,{isOpen:v,handleClose:()=>{R(),setTimeout(()=>{A()},100)},tableStateToSave:r,columnMapToSave:i,unavailableNames:null==m?void 0:m.items.map(e=>e.name),onCreateCustomReport:e=>n(e,Y)}),(0,l.jsx)(C.cVQ,{isOpen:y,onClose:()=>{L(void 0),I()},onConfirm:()=>{k&&K(k.id),I()},title:"Delete ".concat(et),message:(0,l.jsxs)(C.xvT,{children:["You are about to permanently delete the"," ",et.toLowerCase()," named"," ",(0,l.jsx)("strong",{children:null==k?void 0:k.name}),". Are you sure you would like to continue?"]})})]})};var er=a(19785),ei=a.n(er),en=a(55807),el=a.n(en),eo=a(32526),ec=a.n(eo),ed=a(24813),eu=a(72625),e_=a(43862),ep=a(22583);let em=(0,A.Cl)(),eE=(e,t)=>({cell:e=>(0,l.jsx)(T.G3,{value:e.getValue()}),header:a=>{let s={};return Object.keys(e).forEach(t=>{"string"==typeof e[t]?s[t]=e[t]:e[t].label&&(s[t]=e[t].label||"")}),(0,l.jsx)(eu.Hm,{value:(0,e_.AH)({columnId:a.column.id,columnNameMap:s}),defaultValue:m[a.column.id]||(0,e_.AH)({columnId:a.column.id}),isEditing:t,...a})}}),ef=(e,t)=>{var a;let s=(null==e?void 0:null===(a=e.items)||void 0===a?void 0:a.length)?Object.keys(e.items[0]):[],r=Object.values(n);return s.filter(e=>!r.includes(e)).filter(e=>e.startsWith("privacy_declaration_")||e.startsWith("system_")).map(e=>{let a=t.find(t=>e.includes(ec()(t.name)));return em.accessor(t=>t[e],{id:e,cell:e=>Array.isArray(e.getValue())?(0,l.jsx)(T.WP,{value:e.getValue(),ignoreZero:!0,...e}):(0,l.jsx)(T.G3,{value:e.getValue()}),meta:{showHeaderMenu:(null==a?void 0:a.field_type)==="string[]"}})})},eS=e=>{let{onSelectRow:t,getDataUseDisplayName:a,getDataCategoryDisplayName:s,getDataSubjectDisplayName:r,datamapReport:i,customFields:o,systemGroups:c=[],isRenaming:d=!1,groupBy:u}=e,_=ef(i,o),m=e=>{let t=c.find(t=>t.fides_key===e);return(null==t?void 0:t.label_color)?ep.j[t.label_color]:void 0},E=e=>{if(e&&0!==e.length&&1===e.length)return m(e[0])},f=[em.accessor(e=>e.system_name,{enableGrouping:!0,id:n.SYSTEM_NAME,meta:{onCellClick:t}}),em.accessor(e=>e.data_uses,{id:n.DATA_USE,cell:e=>{let t=e.getValue();return(0,l.jsx)(T.WP,{suffix:"data uses",ignoreZero:!0,value:ei()(t)?el()(t,a):a(t||""),tagProps:{color:"white"},...e})},meta:{width:"auto"}}),em.accessor(e=>e.data_categories,{id:n.DATA_CATEGORY,cell:e=>{let t=e.getValue();if(!t||0===t.length)return null;let a=ei()(t)?t.map(e=>({label:s(e),key:e})):[{label:s(t),key:t}];return(0,l.jsx)(eu.mb,{values:a,cellProps:e})},meta:{showHeaderMenu:!d,showHeaderMenuWrapOption:!0,width:"auto",overflow:"hidden"}}),em.accessor(e=>e.data_subjects,{id:n.DATA_SUBJECT,cell:e=>{let t=e.getValue();return(0,l.jsx)(T.WP,{suffix:"data subjects",ignoreZero:!0,value:ei()(t)?el()(t,r):r(t||""),tagProps:{color:"white"},...e})},meta:{showHeaderMenu:!d}}),em.accessor(e=>e.legal_name,{id:n.LEGAL_NAME}),em.accessor(e=>e.dpo,{id:n.DPO}),em.accessor(e=>e.legal_basis_for_processing,{id:n.LEGAL_BASIS_FOR_PROCESSING}),em.accessor(e=>e.administrating_department,{id:n.ADMINISTRATING_DEPARTMENT}),em.accessor(e=>e.cookie_max_age_seconds,{id:n.COOKIE_MAX_AGE_SECONDS}),em.accessor(e=>e.privacy_policy,{id:n.PRIVACY_POLICY}),em.accessor(e=>e.legal_address,{id:n.LEGAL_ADDRESS}),em.accessor(e=>e.cookie_refresh,{id:n.COOKIE_REFRESH}),em.accessor(e=>e.data_security_practices,{id:n.DATA_SECURITY_PRACTICES}),em.accessor(e=>e.data_shared_with_third_parties,{id:n.DATA_SHARED_WITH_THIRD_PARTIES}),em.accessor(e=>e.processes_special_category_data,{id:n.PROCESSES_SPECIAL_CATEGORY_DATA}),em.accessor(e=>e.data_stewards,{id:n.DATA_STEWARDS,cell:e=>(0,l.jsx)(T.WP,{suffix:"data stewards",ignoreZero:!0,value:e.getValue(),...e}),meta:{showHeaderMenu:!d,width:"auto"}}),em.accessor(e=>e.declaration_name,{id:n.DECLARATION_NAME}),em.accessor(e=>e.does_international_transfers,{id:n.DOES_INTERNATIONAL_TRANSFERS}),em.accessor(e=>e.dpa_location,{id:n.DPA_LOCATION}),em.accessor(e=>e.egress,{id:n.DESTINATIONS,cell:e=>(0,l.jsx)(T.WP,{suffix:"destinations",ignoreZero:!0,value:e.getValue(),...e}),meta:{showHeaderMenu:!d,width:"auto"}}),em.accessor(e=>e.exempt_from_privacy_regulations,{id:n.EXEMPT_FROM_PRIVACY_REGULATIONS}),em.accessor(e=>e.features,{id:n.FEATURES,cell:e=>(0,l.jsx)(T.WP,{suffix:"features",ignoreZero:!0,value:e.getValue(),...e}),meta:{showHeaderMenu:!d,width:"auto"}}),em.accessor(e=>e.fides_key,{id:n.FIDES_KEY}),em.accessor(e=>e.flexible_legal_basis_for_processing,{id:n.FLEXIBLE_LEGAL_BASIS_FOR_PROCESSING}),em.accessor(e=>e.impact_assessment_location,{id:n.IMPACT_ASSESSMENT_LOCATION}),em.accessor(e=>e.ingress,{id:n.SOURCES,cell:e=>(0,l.jsx)(T.WP,{suffix:"sources",ignoreZero:!0,value:e.getValue(),...e}),meta:{showHeaderMenu:!d,width:"auto"}}),em.accessor(e=>e.joint_controller_info,{id:n.JOINT_CONTROLLER_INFO}),em.accessor(e=>e.legal_basis_for_profiling,{id:n.LEGAL_BASIS_FOR_PROFILING,cell:e=>(0,l.jsx)(T.WP,{suffix:"profiles",ignoreZero:!0,value:e.getValue(),...e}),meta:{showHeaderMenu:!d,width:"auto"}}),em.accessor(e=>e.legal_basis_for_transfers,{id:n.LEGAL_BASIS_FOR_TRANSFERS,cell:e=>(0,l.jsx)(T.WP,{suffix:"transfers",ignoreZero:!0,value:e.getValue(),...e}),meta:{showHeaderMenu:!d,width:"auto"}}),em.accessor(e=>e.legitimate_interest_disclosure_url,{id:n.LEGITIMATE_INTEREST_DISCLOSURE_URL}),em.accessor(e=>e.processes_personal_data,{id:n.PROCESSES_PERSONAL_DATA}),em.accessor(e=>e.reason_for_exemption,{id:n.REASON_FOR_EXEMPTION}),em.accessor(e=>e.requires_data_protection_assessments,{id:n.REQUIRES_DATA_PROTECTION_ASSESSMENTS}),em.accessor(e=>e.responsibility,{id:n.RESPONSIBILITY,cell:e=>(0,l.jsx)(T.WP,{suffix:"responsibilities",ignoreZero:!0,value:e.getValue(),...e}),meta:{showHeaderMenu:!d,width:"auto"}}),em.accessor(e=>e.retention_period,{id:n.RETENTION_PERIOD}),em.accessor(e=>e.shared_categories,{id:n.SHARED_CATEGORIES,cell:e=>(0,l.jsx)(T.WP,{suffix:"shared categories",ignoreZero:!0,value:e.getValue(),tagProps:{color:"white"},...e}),meta:{showHeaderMenu:!d,width:"auto"}}),em.accessor(e=>e.special_category_legal_basis,{id:n.SPECIAL_CATEGORY_LEGAL_BASIS}),em.accessor(e=>e.third_parties,{id:n.THIRD_PARTIES}),em.accessor(e=>e.system_undeclared_data_categories,{id:n.SYSTEM_UNDECLARED_DATA_CATEGORIES,cell:e=>{let t=e.getValue();if(!t||0===t.length)return null;let a=ei()(t)?t.map(e=>({label:s(e),key:e})):[{label:s(t),key:t}];return(0,l.jsx)(eu.mb,{values:a,cellProps:e})},meta:{showHeaderMenu:!d,showHeaderMenuWrapOption:!0,width:"auto",overflow:"hidden"}}),em.accessor(e=>e.data_use_undeclared_data_categories,{id:n.DATA_USE_UNDECLARED_DATA_CATEGORIES,cell:e=>{let t=e.getValue();if(!t||0===t.length)return null;let a=ei()(t)?t.map(e=>({label:s(e),key:e})):[{label:s(t),key:t}];return(0,l.jsx)(eu.mb,{values:a,cellProps:e})},meta:{showHeaderMenu:!d,showHeaderMenuWrapOption:!0,width:"auto",overflow:"hidden"}}),em.accessor(e=>e.cookies,{id:n.COOKIES,cell:e=>(0,l.jsx)(T.WP,{ignoreZero:!0,suffix:"cookies",value:e.getValue(),...e}),meta:{showHeaderMenu:!d,width:"auto"}}),em.accessor(e=>e.uses_cookies,{id:n.USES_COOKIES}),em.accessor(e=>e.uses_non_cookie_access,{id:n.USES_NON_COOKIE_ACCESS}),em.accessor(e=>e.uses_profiling,{id:n.USES_PROFILING}),em.accessor(e=>e.system_groups,{id:n.SYSTEM_GROUPS,cell:e=>{let t=e.getValue();if(!t||Array.isArray(t)&&0===t.length)return null;let a=(Array.isArray(t)?t:[t]).map(e=>{let t=c.find(t=>t.fides_key===e);return{label:(null==t?void 0:t.name)||e,key:e,tagProps:{color:(null==t?void 0:t.label_color)?ep.j[t.label_color]:void 0,bordered:!1}}});return(0,l.jsx)(ed.Q3,{values:a})},meta:{width:"auto"}}),..._],S=[];return u===p.fI.SYSTEM_GROUP&&S.push(em.accessor(e=>e.system_group_fides_key,{id:n.SYSTEM_GROUP,cell:e=>{var t;let a=e.getValue();if(!a||Array.isArray(a)&&0===a.length)return null;let s=Array.isArray(a)?a.map(e=>{var t;return(null===(t=c.find(t=>t.fides_key===e))||void 0===t?void 0:t.name)||e}):[(null===(t=c.find(e=>e.fides_key===a))||void 0===t?void 0:t.name)||a],r=E(Array.isArray(a)?a:[a]);return(0,l.jsx)(T.WP,{suffix:"system group",ignoreZero:!0,value:s,tagProps:{color:null!=r?r:C.tAb.WHITE,bordered:!1},...e})},meta:{width:"auto",showHeaderMenu:!d}}),em.accessor(e=>e.system_group_data_uses,{id:n.SYSTEM_GROUP_DATA_USES,cell:e=>{let t=e.getValue();return!t||Array.isArray(t)&&0===t.length?null:(0,l.jsx)(T.WP,{suffix:"data uses",ignoreZero:!0,value:ei()(t)?el()(t,a):a(t||""),tagProps:{color:"white"},...e})},meta:{width:"auto",showHeaderMenu:!d}})),[...f,...S]},eg=e=>{let{columnNameMapOverrides:t,setColumnNameMapOverrides:a,setSavedCustomReportId:s,setIsRenamingColumns:r}=e,{submitForm:i,resetForm:n}=(0,O.u6)();return(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(C.zxk,{size:"small","data-testid":"rename-columns-reset-btn",onClick:()=>{a({}),s(""),n({values:{}}),r(!1)},children:"Reset all"}),(0,l.jsx)(C.zxk,{size:"small","data-testid":"rename-columns-cancel-btn",onClick:()=>{n({values:t}),r(!1)},children:"Cancel"}),(0,l.jsx)(C.zxk,{size:"small",type:"primary",htmlType:"submit","data-testid":"rename-columns-apply-btn",onClick:i,children:"Apply"})]})},eh=e=>{switch(e){case p.fI.DATA_USE_SYSTEM:return[n.DATA_USE];case p.fI.SYSTEM_GROUP:return[n.SYSTEM_GROUP];default:return[n.SYSTEM_NAME]}},ex=e=>{let t=[];return p.fI.SYSTEM_DATA_USE===e&&(t=[n.SYSTEM_NAME,n.DATA_USE]),p.fI.DATA_USE_SYSTEM===e&&(t=[n.DATA_USE,n.SYSTEM_NAME]),p.fI.SYSTEM_GROUP===e&&(t=[n.SYSTEM_GROUP,n.SYSTEM_GROUP_DATA_USES,n.SYSTEM_NAME,n.DATA_USE]),t},eA=(e,t)=>{let a=ex(e),s=new Set(a);return[...a,...t.filter(e=>!s.has(e))]},eT={items:[],total:0,page:1,size:25,pages:1},eC=e=>{let{onError:t}=e,a=(0,D.Tg)([p.Sh.CUSTOM_REPORT_READ]),{isLoading:s}=(0,H.x8)(),{data:r}=(0,Z.QD)(),{PAGE_SIZES:c,pageSize:d,setPageSize:u,onPreviousPageClick:_,isPreviousPageDisabled:S,onNextPageClick:g,isNextPageDisabled:v,startRange:P,endRange:U,pageIndex:L,setTotalPages:w,resetPageIndexToDefault:G}=(0,T.oi)(),Y=(0,C.p8r)({id:"datamap-report-toast"}),{isOpen:z,onClose:F,onOpen:B}=(0,C.E2M)(),{getDataUseDisplayName:W,getDataCategoryDisplayName:J,getDataSubjectDisplayName:X,isLoading:q}=(0,y.Z)(),[K,Q]=(0,o.useState)(),{savedCustomReportId:$,setSavedCustomReportId:ee,groupBy:et,setGroupBy:ea,selectedFilters:er,setSelectedFilters:ei,columnOrder:en,setColumnOrder:el,columnVisibility:eo,setColumnVisibility:ec,columnSizing:ed,setColumnSizing:eu,columnNameMapOverrides:e_,setColumnNameMapOverrides:ep}=h(),[em,ef]=(0,o.useState)(!1),eC=e=>{ee(""),ea(e),ef(!0),G()},[eO,ev]=(0,o.useState)(""),eb=(0,o.useCallback)(e=>{G(),ev(e)},[G,ev]),eR={pageIndex:L,pageSize:d,groupBy:et,search:eO,dataUses:(0,I.du)(er.dataUses,"data_uses"),dataSubjects:(0,I.du)(er.dataSubjects,"data_subjects"),dataCategories:(0,I.du)(er.dataCategories,"data_categories")},{data:ey,isLoading:ej,isFetching:eD,error:eI}=(0,N.tH)(eR);(0,o.useEffect)(()=>{eI&&t(eI)},[eI,t]);let[eN,{isLoading:eM,isError:eP}]=(0,N.Eo)(),{data:eU,totalRows:ek}=(0,o.useMemo)(()=>{let e=ey||eT,t=e.items;return em&&ef(!1),w(e.pages),{totalRows:e.total,data:t}},[ey]);(0,H.GH)();let eL=(0,R.C)(H.fN),[ew,eG]=(0,o.useState)(!1),eY=(0,o.useMemo)(()=>ey?eS({onSelectRow:e=>Q(e.fides_key),getDataUseDisplayName:W,getDataCategoryDisplayName:J,getDataSubjectDisplayName:X,datamapReport:ey,customFields:eL,systemGroups:r,isRenaming:ew,groupBy:et}):[],[W,X,J,ey,eL,r,ew,et]),{isOpen:ez,onOpen:eF,onClose:eV}=(0,C.E2M)(),{isOpen:eH,onOpen:eZ,onClose:eB}=(0,C.E2M)(),eW=(0,x.b7)({getCoreRowModel:(0,A.sC)(),getGroupedRowModel:(0,A.qe)(),getExpandedRowModel:(0,A.rV)(),manualPagination:!0,enableColumnResizing:!0,columnResizeMode:"onChange",columns:eY,defaultColumn:eE({...m,...e_},ew),data:eU,initialState:{expanded:!0,columnSizing:ed,columnOrder:en,columnVisibility:eo,grouping:eh(et)}});(0,o.useEffect)(()=>{et&&eW&&ey&&(0===eW.getState().columnOrder.length?el(eA(et,eW.getAllColumns().map(e=>e.id))):el(eA(et,eW.getState().columnOrder)))},[et,eW,ey]),(0,o.useEffect)(()=>{let e=eh(et);ey&&eW.setGrouping(e)},[ey]);let eJ=(0,o.useMemo)(()=>b()(eu,300),[eu]);(0,o.useEffect)(()=>{let e=eW.getState().columnSizing;e&&eJ(e)},[eW.getState().columnSizing]);let eX=()=>e_[n.SYSTEM_GROUP]||"System group",eq=(e,t)=>{if(e||$){if(!e){try{ee(""),ec(E),eW.toggleAllColumnsVisible(!0),eW.setColumnVisibility(E),el([]),eW.setColumnOrder([]),ea(p.fI.SYSTEM_DATA_USE),ei(f),ep({}),t({values:{}})}catch(e){Y({status:"error",description:"There was a problem resetting the report."})}return}try{var a,s,r,i;if(null===(a=e.config)||void 0===a?void 0:a.table_state){let{groupBy:t,filters:a,columnOrder:s}=e.config.table_state,i={};Object.entries(null!==(r=e.config.column_map)&&void 0!==r?r:{}).forEach(e=>{let[t,a]=e;i[t]=a.enabled||!1}),t&&ea(t),a&&ei(a),s&&(el(s),eW.setColumnOrder(s)),i&&(ec(i),eW.setColumnVisibility(i))}if(null===(s=e.config)||void 0===s?void 0:s.column_map){let a={};Object.entries(null!==(i=e.config.column_map)&&void 0!==i?i:{}).forEach(e=>{let[t,s]=e;s.label&&(a[t]=s.label)}),ep(a),t({values:a})}ee(e.id),Y({status:"success",description:"Report applied successfully."})}catch(e){Y({status:"error",description:"There was a problem applying report."})}}};return ej||s||q?(0,l.jsx)(T.I4,{rowHeight:36,numRows:15}):(0,l.jsxs)(C.ad9,{flex:1,direction:"column",overflow:"auto",children:[(0,l.jsx)(V,{columnNameMap:{...m,...e_},selectedFilters:er,isOpen:z,onClose:F,onFilterChange:e=>{ee(""),ei(e)}}),(0,l.jsx)(T.F1,{isOpen:ez,onClose:eV,headerText:"Columns",columnNameMap:{...m,...e_},prefixColumns:ex(et),tableInstance:eW,savedCustomReportId:$,onColumnOrderChange:e=>{ee(""),eW.setColumnOrder(e),el(e)},onColumnVisibilityChange:e=>{ee(""),eW.setColumnVisibility(e),ec(e)}}),(0,l.jsx)(k,{isOpen:eH,onClose:eB,onConfirm:e=>{let t={};Object.entries(eo).forEach(e=>{let[a,s]=e;t[a]={enabled:s}}),Object.entries(e_).forEach(e=>{let[a,s]=e;if(t[a])t[a].label=s;else{var r;t[a]={label:s,enabled:null===(r=eo[a])||void 0===r||r}}}),eN({...eR,format:e,report_id:$,report:{name:"",type:"datamap",config:{column_map:t,table_state:{groupBy:et,filters:er,columnOrder:en}}}}).then(()=>{eP||eB()})},isLoading:eM}),(0,l.jsx)(O.J9,{initialValues:e_,onSubmit:e=>{ee(""),ep(e),eG(!1)},children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(T.Q$,{children:[(0,l.jsx)(T.HO,{globalFilter:eO,setGlobalFilter:eb,placeholder:"System name, Fides key, or ID"}),(0,l.jsxs)(C.ad9,{alignItems:"center",gap:2,children:[a&&(0,l.jsx)(es,{reportType:p.C2.DATAMAP,savedReportId:$,tableStateToSave:{groupBy:et,filters:er,columnOrder:en,columnVisibility:eo},currentColumnMap:e_,onCustomReportSaved:(e,t)=>eq(e,t),onSavedReportDeleted:()=>{ee("")}}),(0,l.jsxs)(C.xJ8,{children:[(0,l.jsxs)(C.zCq,{as:C.zxk,icon:(0,l.jsx)(C.tMo,{}),iconPosition:"end",loading:em,"data-testid":"group-by-menu",children:["Group by ",(()=>{switch(et){case p.fI.SYSTEM_DATA_USE:return"system";case p.fI.DATA_USE_SYSTEM:return"data use";case p.fI.SYSTEM_GROUP:{let e=eX();return e.charAt(0).toLowerCase()+e.slice(1)}default:return"system"}})()]}),(0,l.jsxs)(C.hTI,{zIndex:11,"data-testid":"group-by-menu-list",children:[(0,l.jsx)(C.xqM,{onClick:()=>{eC(p.fI.SYSTEM_DATA_USE)},isChecked:p.fI.SYSTEM_DATA_USE===et,value:p.fI.SYSTEM_DATA_USE,"data-testid":"group-by-system-data-use",children:"System"}),(0,l.jsx)(C.xqM,{onClick:()=>{eC(p.fI.DATA_USE_SYSTEM)},isChecked:p.fI.DATA_USE_SYSTEM===et,value:p.fI.DATA_USE_SYSTEM,"data-testid":"group-by-data-use-system",children:"Data use"}),(0,l.jsx)(C.xqM,{onClick:()=>{eC(p.fI.SYSTEM_GROUP)},isChecked:p.fI.SYSTEM_GROUP===et,value:p.fI.SYSTEM_GROUP,"data-testid":"group-by-system-group",children:eX()})]})]}),(0,l.jsx)(C.zxk,{"data-testid":"filter-multiple-systems-btn",onClick:B,children:"Filter"}),(0,l.jsx)(C.zxk,{"aria-label":"Export report","data-testid":"export-btn",onClick:eZ,icon:(0,l.jsx)(j.nM,{ml:"1.5px"})}),(0,l.jsxs)(C.xJ8,{placement:"bottom-end",children:[(0,l.jsx)(C.zCq,{as:C.zxk,icon:(0,l.jsx)(C.nXP,{className:"rotate-90"}),"data-testid":"more-menu","aria-label":"More options",className:"w-6 gap-0"}),(0,l.jsxs)(C.hTI,{"data-testid":"more-menu-list",children:[(0,l.jsx)(C.qHN,{onClick:eF,"data-testid":"edit-columns-btn",children:"Edit columns"}),(0,l.jsx)(C.qHN,{onClick:()=>eG(!0),"data-testid":"rename-columns-btn",children:"Rename columns"})]})]}),ew&&(0,l.jsx)(eg,{columnNameMapOverrides:e_,setColumnNameMapOverrides:ep,setSavedCustomReportId:ee,setIsRenamingColumns:eG})]})]}),(0,l.jsx)(O.l0,{children:(0,l.jsx)(T.ZK,{tableInstance:eW,columnExpandStorageKey:i.COLUMN_EXPANSION_STATE,columnWrapStorageKey:i.WRAPPING_COLUMNS})})]})}),(0,l.jsx)(T.s8,{totalRows:ek||0,pageSizes:c,setPageSize:u,onPreviousPageClick:_,isPreviousPageDisabled:S||eD,onNextPageClick:g,isNextPageDisabled:v||eD,startRange:P,endRange:U}),(0,l.jsx)(M.Z,{selectedSystemId:K,resetSelectedSystemId:()=>Q(void 0)})]})};var eO=()=>{let[e,t]=(0,o.useState)(null),a=(0,o.useCallback)(e=>{t(e)},[]);return e?(0,l.jsx)(c.Z,{error:e,defaultMessage:"A problem occurred while fetching the datamap report"}):(0,l.jsxs)(d.Z,{title:"Datamap Report",children:[(0,l.jsx)(u.Z,{"data-testid":"datamap-report-heading",heading:"Data map report"}),(0,l.jsx)(g,{children:(0,l.jsx)(eC,{onError:a})})]})}}},function(e){e.O(0,[431,7245,7218,7888,2888,9774,179],function(){return e(e.s=86548)}),_N_E=e.O()}]);