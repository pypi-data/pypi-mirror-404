(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1747],{77213:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var i=n(24246),s=n(36010),a=n(88038),r=n.n(a),o=n(86677);n(27378);var l=n(25980),c=n(90867),d=n(42478),u=n(77830),g=()=>{let e=(0,o.useRouter)();return(0,i.jsx)(s.TJV,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(s.TJV,{children:[(0,i.jsxs)(s.EO$,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(s.Bjg,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(s.zxk,{onClick:()=>{e.push(u.AD)},children:"Configure"})]}),(0,i.jsxs)(s.Bjg,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},m=e=>{let{children:t,title:n,padded:a=!0,mainProps:u}=e,m=(0,l.hz)(),f=(0,o.useRouter)(),p="/privacy-requests"===f.pathname||"/datastore-connection"===f.pathname,h=!(m.flags.messagingConfiguration&&p),{data:x}=(0,d.JE)(void 0,{skip:h}),{data:v}=(0,c.PW)(void 0,{skip:h}),y=m.flags.messagingConfiguration&&(!x||!v)&&p;return(0,i.jsxs)(s.ad9,{"data-testid":n,direction:"column",h:"100vh",children:[(0,i.jsxs)(r(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(s.ad9,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...u,children:[y?(0,i.jsx)(g,{}):null,t]})]})}},54762:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var i=n(24246),s=n(36010),a=n(62165),r=n(60240);let o=e=>{let{consentStatus:t}=e,{flags:n}=(0,a.hz)(),{assetConsentStatusLabels:o}=n;return o&&(null==t?void 0:t.status)===r.pF.ALERT?(0,i.jsx)(s.ua7,{title:null==t?void 0:t.message,"data-testid":"discovery-status-icon-alert-tooltip",children:(0,i.jsx)("div",{className:"mb-px","data-testid":"discovery-status-icon-alert",children:(0,i.jsx)(s.PJP.OdJ,{style:{color:"var(--fidesui-error)"}})})}):null}},42478:function(e,t,n){"use strict";n.d(t,{FU:function(){return c},JE:function(){return s},Ki:function(){return u},SU:function(){return g},W:function(){return m},h9:function(){return a},jc:function(){return i},qt:function(){return l},sn:function(){return d}});let{useGetEmailInviteStatusQuery:i,useGetActiveMessagingProviderQuery:s,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:r,useGetMessagingConfigurationDetailsQuery:o,useGetMessagingConfigurationsQuery:l,useGetMessagingConfigurationByKeyQuery:c,useUpdateMessagingConfigurationByKeyMutation:d,useUpdateMessagingConfigurationSecretsByKeyMutation:u,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:m}=n(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,n,i)=>{let s=await i({url:"messaging/default/active"});return s.error&&404===s.error.status?{data:null}:s},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},80363:function(e,t,n){"use strict";n.r(t),n.d(t,{ROOT_ACTION_CENTER_CONFIG:function(){return es},default:function(){return ea}});var i=n(24246),s=n(59849),a=n(25980),r=n(77830),o=n(37059),l=n(9431),c=n(15878),d=n(36010),u=n(27378),g=n(9270),m=n(49744),f=n(62080),p=n(79894),h=n.n(p),x=n(16125),v=n(91317),y=n(1315);let j=()=>{var e,t,n,s;let a=(0,x.v9)(v.dy),{data:o}=(0,y.xF)((null==a?void 0:a.id)?{data_stewards:[a.username],page:1,size:3}:f.CN),l=(null!==(n=null==o?void 0:o.total)&&void 0!==n?n:0)-((null==o?void 0:null===(e=o.items)||void 0===e?void 0:e.length)||0),[c,u]=function(e){var t;let[n,i]=(t=Math.max(e.length-1,1),[e.toSpliced(t,e.length),e.toSpliced(0,t)]);return[n,i[0]]}([...null!==(s=null==o?void 0:null===(t=o.items)||void 0===t?void 0:t.map(e=>{let{name:t}=e;return t}))&&void 0!==s?s:[],...l>0?["".concat(l," more.")]:[]]);return(0,i.jsx)(d.HYy,{image:(0,i.jsxs)(d.kCb,{align:"center",justify:"center",children:[(0,i.jsxs)("div",{className:"size-20",children:[(0,i.jsxs)(d.X2j,{align:"middle",justify:"center",children:[(0,i.jsx)(d.JXS,{span:8}),(0,i.jsx)(d.JXS,{span:8,children:(0,i.jsx)(d.Eep,{rootClassName:"flex",src:"/images/connector-logos/bigquery.svg",preview:!1,alt:""})}),(0,i.jsx)(d.JXS,{span:8})]}),(0,i.jsxs)(d.X2j,{align:"middle",justify:"center",children:[(0,i.jsx)(d.JXS,{span:8,children:(0,i.jsx)(d.Eep,{rootClassName:"flex",src:"/images/connector-logos/okta.svg",preview:!1,alt:""})}),(0,i.jsx)(d.JXS,{span:8}),(0,i.jsx)(d.JXS,{span:8,children:(0,i.jsx)(d.Eep,{rootClassName:"flex",src:"/images/connector-logos/snowflake.svg",preview:!1,alt:""})})]}),(0,i.jsxs)(d.X2j,{align:"middle",justify:"center",children:[(0,i.jsx)(d.JXS,{span:8}),(0,i.jsx)(d.JXS,{span:8,children:(0,i.jsx)(d.Eep,{rootClassName:"flex",src:"/images/connector-logos/generic.svg",preview:!1,alt:""})}),(0,i.jsx)(d.JXS,{span:8})]})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(d.Eep,{rootClassName:"flex",src:"/images/service.svg",preview:!1,alt:""}),(0,i.jsx)("div",{className:"absolute left-0 top-0 size-full",children:(0,i.jsx)(d.kCb,{className:"h-full",justify:"center",align:"center",children:(0,i.jsx)(d.xvT,{children:"Monitors"})})})]}),(0,i.jsx)("div",{children:d.HYy.PRESENTED_IMAGE_SIMPLE})]}),description:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Dxz,{children:"Nothing To Review"}),(0,i.jsxs)(d.nvN,{children:["You’re a steward on systems that currently have no active monitor results.",(0,i.jsx)("br",{}),"When monitors detect changes in those systems, they’ll appear here automatically."]}),c.length>0&&(0,i.jsx)(d.nvN,{children:"You’re a steward on the following systems: ".concat([c.join(", "),...u?[u]:[]].join(", and "))})]}),children:(0,i.jsx)(h(),{href:r.So,passHref:!0,legacyBehavior:!0,children:(0,i.jsx)(d.zxk,{type:"primary",children:"View inventory"})})})};var C=n(40431),w=e=>{let{queryState:t,initialValues:n,translate:i}=e,[s,a]=(0,C.XI)(t,{history:"push"}),[r]=d.l09.useForm();return(0,u.useEffect)(()=>{let e=Object.fromEntries(Object.entries(s).map(e=>{let[t,n]=e;return[t,""===n?void 0:n]}));r.setFieldsValue(e)},[s]),{form:r,onFieldsChange:()=>{a(Object.fromEntries(Object.entries(r.getFieldsValue(!0)).map(e=>{let[t,n]=e;return[t,void 0===n?"":n]})))},initialValues:{...n,...s},requestData:i(s)}},T=n(40262),b=n(3124),E=n.n(b),_=n(16394),S=n(41337),N=n(83158),I=n(9110),M=n(62678),k=n(31883),O=n(99824),A=n(99089),R=n(63537);let q=e=>{let t=(0,d.ddY)(),[n]=(0,A.rL)(),i=(0,d.UD8)();return{confirmAll:async(s,a)=>{let r=M.FieldActionType.PROMOTE,o=Date.now();if(!await t.confirm((0,R.nB)(O.Me[r],O.e_[r](a))))return;i.open({key:o,type:"loading",content:"".concat(O.T0[r]," ").concat(a," ").concat((0,_._6)(a,"field","fields"),"..."),duration:0});let l=await n({query:{confidence_bucket:[s]},path:{monitor_config_id:e,action_type:r},body:{excluded_resource_urns:[]}});if((0,k.D4)(l)){i.open({key:o,type:"error",content:(0,R.v_)(r),duration:5});return}i.open({key:o,type:"success",content:"".concat(a," ").concat((0,_._6)(a,"field","fields")," approved — stronger governance, less busywork."),duration:10})}}},D=e=>{let{item:t,reviewHref:n,onConfirmAll:s}=e,a=[(0,i.jsx)(h(),{href:{pathname:n,query:{confidenceBucket:t.severity}},passHref:!0,children:(0,i.jsx)(d.zxk,{type:"text",size:"small",icon:(0,i.jsx)(d.PJP.ejL,{}),"aria-label":"Review ".concat(t.label," fields"),children:"Review"})},t.label)];return t.severity===N.$.HIGH&&s&&a.push((0,i.jsx)(d.zxk,{type:"text",size:"small",icon:(0,i.jsx)(d.PJP.WzW,{}),"aria-label":"Approve all ".concat(t.label," fields"),onClick:s,children:"Approve"},"confirm")),a},F=e=>{let{item:t,reviewHref:n,monitorId:s}=e,a=(0,R.Oq)(t.severity),{confirmAll:r}=q(s);return(0,i.jsx)(d.Zbd,{size:"small",styles:{body:{display:"none"}},title:(0,i.jsxs)(d.TaI,{children:[(0,i.jsx)(d.qEK,{size:24,icon:(0,i.jsx)(d.QMR,{color:"black"})}),(0,i.jsxs)(d.xvT,{type:"secondary",className:"font-normal",children:[(0,_.pF)(t.count)," ",(0,_._6)(t.count,"field","fields")]}),(0,i.jsx)(d.xvT,{children:t.label}),a&&(0,i.jsx)(I.D,{severity:a,format:()=>null})]}),actions:D({item:t,reviewHref:n,onConfirmAll:()=>{r(t.severity,t.count)}})})};var z=n(98145);let P=e=>{let{confidenceCounts:t,reviewHref:n,monitorId:s,...a}=e,r=(0,u.useMemo)(()=>[{label:z.bI.HIGH,count:t.highConfidenceCount,severity:N.$.HIGH},{label:z.bI.MEDIUM,count:t.mediumConfidenceCount,severity:N.$.MEDIUM},{label:z.bI.LOW,count:t.lowConfidenceCount,severity:N.$.LOW}].filter(e=>e.count>0),[t]);return(0,i.jsx)(d.nxd,{dataSource:r,itemKey:e=>e.severity,columns:3,gutter:4,renderItem:e=>(0,i.jsx)(F,{item:e,reviewHref:n,monitorId:s}),...a})};var J=n(54762),U=n(42905),B=n.n(U);let H=(e,t)=>{let n=z.v8.get(e);return n?(0,_._6)(t,n[0],n[1]):e},X=e=>{let{updates:t,isAssetList:n}=e,s=(0,u.useMemo)(()=>t?Object.entries(t).filter(e=>{let[t,n]=e;return null!==n&&n>0&&!z.EP.includes(t)}).sort((e,t)=>{let n=z.H6.indexOf(e[0]),i=z.H6.indexOf(t[0]);return -1===n&&-1===i?0:-1===n?1:-1===i?-1:n-i}).map(e=>{let[t,n]=e;return"".concat((0,_.pF)(null!=n?n:0)," ").concat(H(t,null!=n?n:0))}):[],[t]);if(!t)return null;if(n){let e=s.join(", ");return(0,i.jsxs)("span",{children:[e," detected."]})}let a=s.join(", ");return(0,i.jsx)("span",{children:a})};var W=n(71985);let{Text:V}=d.Typography,L={[W.w.WEBSITE]:["asset","assets"],[W.w.DATASTORE]:["field","fields"],[W.w.INFRASTRUCTURE]:["system","systems"]},K=e=>{let t,{monitorSummary:n,href:s,...r}=e,{flags:o}=(0,a.hz)(),{heliosV2:l}=o,{name:c,consent_status:g,total_updates:m,updates:f,last_monitored:p,secrets:x,key:v,connection_type:y,saas_config:j,monitorType:C,isTestMonitor:w,stewards:b}=n;if(C===W.w.DATASTORE){var N,I,M;t={highConfidenceCount:null!==(N=null==f?void 0:f.classified_high_confidence)&&void 0!==N?N:0,mediumConfidenceCount:null!==(I=null==f?void 0:f.classified_medium_confidence)&&void 0!==I?I:0,lowConfidenceCount:null!==(M=null==f?void 0:f.classified_low_confidence)&&void 0!==M?M:0}}let[k,O]=(0,u.useState)(!1),A=!!t&&(t.highConfidenceCount>0||t.mediumConfidenceCount>0||t.lowConfidenceCount>0),R=C===W.w.DATASTORE&&A&&!!v,q=p?(0,_.p6)(new Date(p)):void 0,D=p?(0,T.H)(new Date(p),new Date,{addSuffix:!0}):void 0,F=(0,_._6)(null!=m?m:0,L[C][0],L[C][1]);return(0,i.jsx)(d.aVo.Item,{"data-testid":"monitor-result-".concat(v),...r,children:(0,i.jsxs)(d.kCb,{vertical:!0,className:"grow",children:[(0,i.jsxs)(d.X2j,{gutter:{xs:6,lg:12},className:"items-center",children:[(0,i.jsx)(d.JXS,{span:l?14:17,children:(0,i.jsx)(d.aVo.Item.Meta,{avatar:(0,i.jsx)(S.ZP,{data:{kind:S.hY.CONNECTION,connectionType:y,name:c,key:v,saasType:null==j?void 0:j.type,websiteUrl:null==x?void 0:x.url}}),title:(0,i.jsxs)(d.kCb,{align:"center",gap:4,className:B()["monitor-result__title"],children:[(0,i.jsx)(h(),{href:s,"data-testid":"monitor-link",children:c}),(0,i.jsxs)(V,{type:"secondary",children:[(0,_.pF)(null!=m?m:0)," ",F]}),g&&(0,i.jsx)(J.l,{consentStatus:g}),w&&(0,i.jsx)(d.Vp9,{color:"nectar",children:"test monitor"})]}),description:!!f&&(0,i.jsx)(X,{updates:f,isAssetList:C===W.w.WEBSITE})})}),(0,i.jsx)(d.JXS,{span:2,className:"flex justify-end",children:!!b&&(0,i.jsx)(d.qEK.Group,{max:{count:5,style:{background:E().FIDESUI_NEUTRAL_700}},children:b.map(e=>{var t,n;return(0,i.jsx)(d.ua7,{title:(0,_.gJ)(e),children:(0,i.jsxs)(d.qEK,{style:{background:E().FIDESUI_MINOS},children:[null===(t=e.first_name)||void 0===t?void 0:t.charAt(0),null===(n=e.last_name)||void 0===n?void 0:n.charAt(0)]})},e.id)})})}),(0,i.jsx)(d.JXS,{span:3,className:"flex justify-end",children:!!D&&(0,i.jsx)(d.ua7,{title:q,children:(0,i.jsxs)(V,{type:"secondary","data-testid":"monitor-date",children:[(0,i.jsx)("span",{className:"hidden lg:inline",children:"Last scan: "}),D]})})}),(0,i.jsxs)(d.JXS,{span:l?5:2,className:"flex items-center justify-end",children:[l&&R&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.zxk,{type:"link",className:"p-0",icon:(0,i.jsx)(d.CHo,{isOpen:k}),iconPosition:"end",onClick:()=>O(!k),"aria-haspopup":"true","aria-expanded":k,"aria-controls":"confidence-row-".concat(v),"aria-label":"".concat(k?"Collapse":"Expand"," findings"),children:(0,i.jsxs)(d.TaI,{children:[(0,i.jsx)(d.QMR,{}),"Findings"]})}),(0,i.jsx)(d.izJ,{type:"vertical",orientationMargin:0})]}),(0,i.jsx)(h(),{href:s,passHref:!0,legacyBehavior:!0,children:(0,i.jsx)(d.zxk,{type:"link",className:"p-0","data-testid":"review-button-".concat(n.key),children:"Review"})},"review")]})]}),l&&R&&t&&(0,i.jsx)(d.RrR,{isExpanded:k,motionKey:"confidence-row-".concat(v),children:(0,i.jsx)(P,{confidenceCounts:t,reviewHref:s,monitorId:v,className:"mt-6",id:"confidence-row-".concat(v)})})]})})};var Y=n(98784),G=n.n(Y),Z=n(16134),$=n(26917),Q=n(31793);let ee={[W.w.DATASTORE]:"Data store monitors",[W.w.WEBSITE]:"Website monitors",[W.w.INFRASTRUCTURE]:"Infrastructure monitors"};var et=e=>{let{form:t,availableMonitorTypes:n,...s}=e,a=(0,Z.C)(v.dy),{data:r,isLoading:o}=(0,Q.wv)({page:1,size:100,include_external:!1,exclude_approvers:!0}),l=G().uniqBy([...a?[{label:"Assigned to me",value:a.id}]:[],...((null==r?void 0:r.items)||[]).map(e=>({label:(0,_.gJ)(e),value:e.id}))],"value");return(0,i.jsxs)(d.l09,{form:t,...s,layout:"inline",className:"flex grow gap-2",children:[(0,i.jsx)(d.kCb,{className:"grow justify-between self-stretch",children:(0,i.jsx)(d.l09.Item,{name:"search",className:"self-end",children:(0,i.jsx)($.Z,{})})}),(0,i.jsx)(d.l09.Item,{name:"monitor_type",className:"!me-0 self-end",children:(0,i.jsx)(d.PhF,{options:n.map(e=>({value:e,label:ee[e]})),className:"w-auto min-w-[200px]",placeholder:"Monitor type",allowClear:!0,"data-testid":"monitor-type-filter","aria-label":"Filter by monitor type"})}),(0,i.jsx)(d.l09.Item,{name:"steward_key",className:"!me-0 self-end",children:(0,i.jsx)(d.PhF,{options:l,loading:o,popupMatchSelectWidth:!0,placeholder:"Data steward",allowClear:!0,"aria-label":"Filter by data steward",className:"min-w-[220px]"})})]})};let en=(e,t)=>({search:C.Oi.withDefault(""),monitor_type:(0,C.jx)(e),steward_key:t?C.Oi.withDefault(t).withOptions({clearOnDefault:!1}):C.Oi});var ei=()=>{var e,t,n;let s=(0,d.p8r)(),{flags:{webMonitor:l,heliosV2:c,oktaMonitor:f}}=(0,a.hz)(),{paginationProps:p,pageIndex:h,pageSize:x,resetPagination:v}=(0,g.S)(),y=[...l?[W.w.WEBSITE]:[],...c?[W.w.DATASTORE]:[],...f?[W.w.INFRASTRUCTURE]:[]],{requestData:C,...T}=w({queryState:en([...y]),translate:e=>{let{steward_key:t,search:n,monitor_type:i}=e;return{search:n||void 0,monitor_type:i?[i]:void 0,steward_user_id:void 0!==t&&t?[t]:[]}}}),{data:b,isError:E,isLoading:_}=(0,o.Ud)({..."object"==typeof C?C:{},page:h,size:x});(0,u.useEffect)(()=>{E&&s({title:"Error fetching data",description:"Please try again later",status:"error"})},[E,s]);let S=(null==b?void 0:null===(e=b.items)||void 0===e?void 0:e.flatMap(e=>e.key&&void 0!==e.key?[e]:[]))||[];return l||c||f?(0,i.jsxs)(d.kCb,{className:"h-[calc(100%-48px)] overflow-hidden",gap:"middle",vertical:!0,children:[(0,i.jsx)(et,{...T,onFieldsChange:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];v(),T.onFieldsChange(...t)},availableMonitorTypes:y}),(0,i.jsx)(d.aVo,{loading:_,dataSource:S,locale:{emptyText:(0,i.jsx)(j,{})},className:"h-full overflow-y-auto overflow-x-clip",renderItem:e=>{let t=e.key&&e.monitorType?"".concat(r.vi,"/").concat(e.monitorType,"/").concat(e.key):"";return!!(null==e?void 0:e.key)&&(0,i.jsx)(K,{monitorSummary:e,href:t},e.key)}}),(0,i.jsx)(d.tlE,{...p,total:(null==b?void 0:b.total)||0,showSizeChanger:{suffixIcon:(0,i.jsx)(d.PJP._ME,{})},hideOnSinglePage:(null===(t=p.pageSize)||void 0===t?void 0:t.toString())===(null===(n=p.pageSizeOptions)||void 0===n?void 0:n[0])})]}):(0,i.jsx)(m.n,{})};let es={[c.em.ACTIVITY]:r.Bp,[c.em.ATTENTION_REQUIRED]:r.vi};var ea=()=>{let{flags:e}=(0,a.hz)(),{webMonitor:t,heliosV2:n}=e,r=[...t?[W.w.WEBSITE]:[],...n?[W.w.DATASTORE]:[]],{error:c}=(0,o.Ud)({page:1,size:20,monitor_type:r.length>0?r:void 0});return c?(0,i.jsx)(s.Z,{error:c,defaultMessage:"A problem occurred while fetching your monitor results"}):(0,i.jsx)(l.Z,{routeConfig:es,children:(0,i.jsx)(ei,{})})}},42905:function(e){e.exports={"monitor-result__title":"MonitorResult_monitor-result__title__Wqv_l"}}}]);