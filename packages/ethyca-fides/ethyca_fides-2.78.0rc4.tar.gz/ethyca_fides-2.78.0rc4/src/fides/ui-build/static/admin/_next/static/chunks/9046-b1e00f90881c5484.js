"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9046],{12627:function(e,s,a){var i=a(24246),t=a(79283),l=a(34929);s.Z=e=>{let{selectedTaxonomies:s,showDisabled:a=!1,...r}=e,{getDataCategoryDisplayNameProps:n,getDataCategories:o}=(0,l.Z)(),d=(a?o():o().filter(e=>e.active)).filter(e=>!(null==s?void 0:s.includes(e.fides_key))).map(e=>{let{name:s,primaryName:a}=n(e.fides_key);return{value:e.fides_key,name:s,primaryName:a,description:e.description||"",label:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{children:a||s}),a&&": ".concat(s)]}),title:e.fides_key}});return(0,i.jsx)(t.l,{options:d,...r})}},14908:function(e,s,a){var i=a(86677),t=a(27378);let l=e=>e.startsWith("#")?e.slice(1):e;s.Z=e=>{let{tabKeys:s,initialTab:a}=e,r=(0,i.useRouter)(),n=r.asPath.split("#")[1]||s[0],[o,d]=(0,t.useState)(n);return(0,t.useEffect)(()=>{a&&s.includes(a)&&d(a)},[a,s,r.isReady]),{activeTab:o,onTabChange:(0,t.useCallback)(async e=>{if(!s.includes(e)){await r.replace({pathname:r.pathname,query:r.query,hash:void 0}),d(s[0]);return}r.isReady&&(await r.replace({pathname:r.pathname,query:r.query,hash:l(e)},void 0,{shallow:!0}),d(e))},[r,s]),setActiveTab:d}}},69828:function(e,s,a){a.d(s,{Y:function(){return r}});var i=a(24246),t=a(36010),l=a(70788);let r=[(0,i.jsx)(t.PJP.S9g,{},"layers"),(0,i.jsx)(t.PJP.ehp,{},"dataset"),(0,i.jsx)(t.PJP.iA_,{},"table"),(0,i.jsx)(t.PJP.$4y,{style:{transform:"rotate(-90deg)"}},"field")];s.Z=e=>{let{resourceUrn:s,parentLink:a,onPathClick:t=()=>{}}=e,n=[];if(s||n.push({title:"All activity"}),s){n.push({title:"All activity",href:a});let e=s.split(".");e.forEach((s,a)=>{0!==a&&n.push({title:s,icon:r[a-1],onClick:s=>{s.preventDefault(),t(e.slice(0,a+1).join("."))}})})}return(0,i.jsx)(l.m,{"data-testid":"results-breadcrumb",items:n})}},11904:function(e,s,a){a.d(s,{Z:function(){return F}});var i,t,l=a(24246),r=a(59003),n=a(92222),o=a(36010),d=a(27378),c=a(15793),u=a(70675),g=a(72625),h=a(79947),x=a(50169),j=a(28278),m=a(74241),p=a(60240),f=a(91761),I=a(61099),_=a(87667),y=e=>{let{resourceType:s}=e,a=(0,n.Cl)();return s===p.D$.SCHEMA?{columns:[a.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(_.Z,{result:e.row.original,changeTypeOverride:j.E.CLASSIFICATION}),header:e=>(0,l.jsx)(c.Rr,{value:"Name",...e}),size:300}),a.accessor(e=>e.urn,{id:"project",cell:e=>(0,l.jsx)(c.G3,{value:(0,m.Z)(e.getValue())}),header:e=>(0,l.jsx)(c.Rr,{value:"Project",...e})}),a.display({id:"status",cell:e=>(0,l.jsx)(x.Z,{result:e.row.original}),header:e=>(0,l.jsx)(c.Rr,{value:"Status",...e})}),a.accessor(e=>e.system,{id:"system",cell:e=>(0,l.jsx)(c.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(c.Rr,{value:"System",...e})}),a.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,l.jsx)(c.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(c.Rr,{value:"Detected by",...e})}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(g.Cy,{time:e.getValue()}),header:e=>(0,l.jsx)(c.Rr,{value:"When",...e})}),a.display({id:"action",cell:e=>e.row.original.diff_status!==p.LL.MUTED?(0,l.jsx)(f.Z,{resource:e.row.original}):(0,l.jsx)(c.G3,{value:"--"}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:s===p.D$.TABLE?{columns:[a.display({id:"select",cell:e=>{var s;let{row:a}=e;return(0,l.jsx)(g.k,{isChecked:a.getIsSelected(),onChange:a.getToggleSelectedHandler(),dataTestId:"select-".concat(null!==(s=a.original.name)&&void 0!==s?s:a.id)})},header:e=>{let{table:s}=e;return(0,l.jsx)(g.k,{isChecked:s.getIsAllPageRowsSelected(),isIndeterminate:s.getIsSomeRowsSelected(),onChange:s.getToggleAllRowsSelectedHandler(),dataTestId:"select-all-rows"})},maxSize:40}),a.accessor(e=>e.name,{id:"tables",cell:e=>(0,l.jsx)(_.Z,{result:e.row.original}),header:e=>(0,l.jsx)(c.Rr,{value:"Table name",...e}),size:300}),a.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(c.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(c.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),a.display({id:"status",cell:e=>(0,l.jsx)(x.Z,{result:e.row.original}),header:e=>(0,l.jsx)(c.Rr,{value:"Status",...e})}),a.display({id:"type",cell:()=>(0,l.jsx)(c.G3,{value:"Table"}),header:"Type"}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(g.Cy,{time:e.getValue()}),header:"Time"}),a.display({id:"actions",cell:e=>(0,l.jsx)(f.Z,{resource:e.row.original}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:s===p.D$.FIELD?{columns:[a.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(_.Z,{result:e.row.original}),header:e=>(0,l.jsx)(c.Rr,{value:"Field name",...e}),size:300}),a.accessor(e=>e.source_data_type,{id:"data-type",cell:e=>(0,l.jsx)(h.Z,{type:e.getValue()}),header:e=>(0,l.jsx)(c.Rr,{value:"Data type",...e})}),a.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(c.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(c.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),a.display({id:"status",cell:e=>(0,l.jsx)(x.Z,{result:e.row.original}),header:e=>(0,l.jsx)(c.Rr,{value:"Status",...e})}),a.display({id:"type",cell:()=>(0,l.jsx)(c.G3,{value:"Field"}),header:"Type"}),a.display({id:"classifications",cell:e=>{let{row:s}=e;return(0,l.jsx)(I.Z,{resource:s.original})},meta:{overflow:"visible",disableRowClick:!0},header:"Data category",minSize:280}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(g.Cy,{time:e.getValue()}),header:e=>(0,l.jsx)(c.Rr,{value:"When",...e})}),a.display({id:"actions",cell:e=>(0,l.jsx)(f.Z,{resource:e.row.original}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:s===p.D$.ENDPOINT?{columns:[a.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(_.Z,{result:e.row.original}),header:e=>(0,l.jsx)(c.Rr,{value:"Object",...e}),size:300}),a.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(c.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(c.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),a.display({id:"status",cell:e=>(0,l.jsx)(x.Z,{result:e.row.original}),header:e=>(0,l.jsx)(c.Rr,{value:"Status",...e})}),a.display({id:"type",cell:()=>(0,l.jsx)(c.G3,{value:"Endpoint"}),header:"Type"}),a.display({id:"classifications",cell:e=>{let{row:s}=e;return(0,l.jsx)(I.Z,{resource:s.original})},meta:{overflow:"visible",disableRowClick:!0},header:"Data category",minSize:280}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(g.Cy,{time:e.getValue()}),header:e=>(0,l.jsx)(c.Rr,{value:"When",...e})}),a.display({id:"actions",cell:e=>(0,l.jsx)(f.Z,{resource:e.row.original}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:{columns:[]}},C=a(14908);(i=t||(t={})).ACTION_REQUIRED="action-required",i.IN_PROGRESS="in-progress",i.UNMONITORED="unmonitored";let v={"action-required":{label:"Action Required",key:"action-required",filters:[p.LL.CLASSIFICATION_ADDITION,p.LL.CLASSIFICATION_UPDATE,p.LL.REVIEWED],childFilters:[p.LL.CLASSIFICATION_ADDITION,p.LL.CLASSIFICATION_UPDATE,p.LL.REVIEWED]},"in-progress":{label:"In progress",key:"in-progress",filters:[p.LL.CLASSIFYING,p.LL.CLASSIFICATION_QUEUED],childFilters:[p.LL.CLASSIFYING,p.LL.CLASSIFICATION_QUEUED]},unmonitored:{label:"Unmonitored",key:"unmonitored",filters:[p.LL.MUTED],childFilters:[]}};var L=()=>{var e,s;let{activeTab:a,onTabChange:i}=(0,C.Z)({tabKeys:Object.values(t)});return{filterTabs:Object.values(v),activeTab:a,onTabChange:i,activeDiffFilters:null===(e=v[a])||void 0===e?void 0:e.filters,activeChildDiffFilters:null===(s=v[a])||void 0===s?void 0:s.childFilters}},b=a(47182),S=a(38347),w=a(79494),A=e=>{let{resourceUrn:s}=e,[a,{isLoading:i}]=(0,u.Hf)(),[t,{isLoading:r}]=(0,u.zV)(),n=i||r,d=async e=>{await t({staged_resource_urns:e})},c=async e=>{await a({staged_resource_urns:e})};return(0,l.jsx)(o.kCb,{"data-testid":"bulk-actions-menu",children:(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(w.Z,{title:"Confirm all",icon:(0,l.jsx)(o.Hwx,{}),onClick:()=>c([s]),disabled:n,loading:i,type:"primary",size:"middle"}),(0,l.jsx)(w.Z,{title:"Ignore all",icon:(0,l.jsx)(o.rFZ,{}),onClick:()=>d([s]),disabled:n,loading:r,size:"middle"})]})})},R=e=>{let{selectedUrns:s}=e,[a,{isLoading:i}]=(0,u.Hf)(),[t,{isLoading:r}]=(0,u.zV)(),n=i||r,d=async e=>{await a({staged_resource_urns:e})},c=async e=>{await t({staged_resource_urns:e})};return s.length?(0,l.jsxs)(o.kCb,{className:"items-center","data-testid":"bulk-actions-menu",children:[(0,l.jsx)(o.Bjg,{fontSize:"xs",fontWeight:"semibold",minW:16,mr:4,children:"".concat(s.length," selected")}),(0,l.jsxs)(o.kCb,{className:"gap-2",children:[(0,l.jsx)(w.Z,{title:"Confirm",icon:(0,l.jsx)(o.Hwx,{}),onClick:()=>d(s),disabled:n,loading:i,type:"primary",size:"middle"}),(0,l.jsx)(w.Z,{title:"Ignore",icon:(0,l.jsx)(o.rFZ,{}),disabled:n,loading:r,onClick:()=>c(s),size:"middle"})]})]}):null},D=a(7940),T=a(80285),k=a(36168),E=a(30952);let Z={items:[],total:0,page:1,size:50,pages:1},N=()=>(0,l.jsx)(o.s_g,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"empty-state",alignSelf:"center",margin:"auto",children:(0,l.jsxs)(o.s_g,{children:[(0,l.jsx)(o.Bjg,{fontSize:"md",fontWeight:"600",children:"No activity found"}),(0,l.jsx)(o.Bjg,{fontSize:"sm",children:"You're up to date!"})]})});var F=e=>{let{resourceUrn:s}=e,[a,i]=(0,d.useState)(""),{filterTabs:t,activeTab:g,onTabChange:h,activeDiffFilters:x,activeChildDiffFilters:j}=L(),[m,f]=(0,d.useState)({}),{PAGE_SIZES:I,pageSize:_,setPageSize:C,onPreviousPageClick:v,isPreviousPageDisabled:w,onNextPageClick:F,isNextPageDisabled:P,startRange:z,endRange:O,pageIndex:V,setTotalPages:G,resetPageIndexToDefault:U}=(0,c.oi)();(0,d.useEffect)(()=>{U()},[s,a,U,x,j]);let{isFetching:M,isLoading:$,data:H}=(0,u.z8)({staged_resource_urn:s,page:V,size:_,child_diff_status:j,diff_status:x,search:a}),W=(0,D.G)(null==H?void 0:H.items[0]),{items:q,total:J,pages:B}=(0,d.useMemo)(()=>null!=H?H:Z,[H]);(0,d.useEffect)(()=>{G(B)},[B,G]);let{columns:Q}=y({resourceType:W}),Y=(0,d.useMemo)(()=>Q,[Q]),{navigateToDiscoveryResults:K}=(0,b.Z)(),X=(0,r.b7)({getCoreRowModel:(0,n.sC)(),getGroupedRowModel:(0,n.qe)(),getExpandedRowModel:(0,n.rV)(),columns:Y,manualPagination:!0,onRowSelectionChange:f,state:{rowSelection:m},getRowId:T.Z,data:q,columnResizeMode:"onChange"}),ee=Object.keys(m).filter(e=>m[e]);return $?(0,l.jsx)(c.I4,{rowHeight:36,numRows:36}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.mQc,{items:t.map(e=>({key:e.key,label:e.label})),activeKey:g,onChange:e=>h(e)}),(0,l.jsxs)(c.Q$,{children:[(0,l.jsxs)(o.ad9,{gap:6,align:"center",children:[(0,l.jsx)(o.TJV,{flexShrink:0,children:(0,l.jsx)(E.f,{value:a,onChange:i})}),(0,l.jsx)(S.a,{})]}),W===p.D$.TABLE&&!!ee.length&&(0,l.jsx)(R,{selectedUrns:ee}),W===p.D$.FIELD&&"unmonitored"!==g&&(0,l.jsx)(A,{resourceUrn:s})]}),(0,l.jsx)(c.ZK,{tableInstance:X,onRowClick:e=>K({resourceUrn:e.urn,filterTab:g}),getRowIsClickable:e=>W!==p.D$.FIELD||(0,k.Z)(e),emptyTableNotice:(0,l.jsx)(N,{})}),(0,l.jsx)(c.s8,{totalRows:J||0,pageSizes:I,setPageSize:C,onPreviousPageClick:v,isPreviousPageDisabled:w||M,onNextPageClick:F,isNextPageDisabled:P||M,startRange:z,endRange:O})]})}},91761:function(e,s,a){var i=a(24246),t=a(36010),l=a(812),r=a(17245),n=a(7940),o=a(98559),d=a(60240),c=a(79494),u=a(70675);s.Z=e=>{let{resource:s}=e,[a,{isLoading:g}]=(0,u.v8)(),[h,{isLoading:x}]=(0,u.cM)(),[j,{isLoading:m}]=(0,u.vi)(),p=x||m||g,{diff_status:f,child_diff_statuses:I,top_level_field_name:_}=s,{successAlert:y,errorAlert:C}=(0,r.VY)(),v=f===d.LL.CLASSIFICATION_ADDITION||f===d.LL.CLASSIFICATION_UPDATE||f===d.LL.REVIEWED,L=I&&(I[d.LL.CLASSIFICATION_ADDITION]||I[d.LL.CLASSIFICATION_UPDATE]||I[d.LL.REVIEWED]),b=(v||L)&&!_,S=v||L,w=(0,n.G)(s)!==d.D$.FIELD,A=b&&S&&w,R=async()=>{let e=await h({staged_resource_urn:s.urn});(0,l.D4)(e)?C((0,l.e$)(e.error),"Failed to promote resource"):y('These changes have been added to a Fides dataset. To view, navigate to "Manage datasets".',"Table changes confirmed")},D=async()=>{let e=await j({staged_resource_urn:s.urn});(0,l.D4)(e)?C((0,l.e$)(e.error),"Failed to mute resource"):y("Ignored changes will not be added to a Fides dataset.","".concat(s.name||"Changes"," ignored"))},T=async()=>{let e=await a({staged_resource_urn:s.urn,monitor_config_id:s.monitor_config_id,start_classification:!0,diff_statuses_to_classify:[d.LL.CLASSIFICATION_ADDITION,d.LL.CLASSIFICATION_UPDATE,d.LL.CLASSIFYING,d.LL.CLASSIFICATION_QUEUED]});(0,l.D4)(e)?C((0,l.e$)(e.error),"Failed to reclassify resource"):y("Reclassification of ".concat((0,o.Z)(s)||"the resource"," has begun.  The results may take some time to appear in the “Data discovery“ tab."),"Reclassification started")};return(0,i.jsxs)(t.Br$,{gap:2,children:[b&&(0,i.jsx)(c.Z,{title:"Confirm",icon:(0,i.jsx)(t.Hwx,{}),onClick:R,disabled:p,loading:x}),S&&(0,i.jsx)(c.Z,{title:"Ignore",icon:(0,i.jsx)(t.rFZ,{}),onClick:D,disabled:p,loading:m}),w&&!A&&(0,i.jsx)(c.Z,{title:"Reclassify",icon:(0,i.jsx)(t.GZJ,{}),onClick:T,disabled:p,loading:g}),A&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.s3C,{}),(0,i.jsxs)(t.xJ8,{children:[(0,i.jsx)(t.zCq,{as:t.zxk,size:"small",type:"text",icon:(0,i.jsx)(t.nXP,{transform:"rotate(90deg)"}),className:"w-6 gap-0","data-testid":"actions-overflow-btn"}),(0,i.jsx)(t.hTI,{children:(0,i.jsx)(t.qHN,{onClick:T,icon:(0,i.jsx)(t.GZJ,{}),"data-testid":"action-reclassify",children:"Reclassify"})})]})]})]})}},61099:function(e,s,a){var i=a(24246),t=a(36010),l=a(27378),r=a(12627),n=a(34929),o=a(26183),d=a(70675);s.Z=e=>{var s,a,c;let{resource:u}=e,[g,h]=(0,l.useState)(!1),{getDataCategoryDisplayName:x}=(0,n.Z)(),[j]=(0,d.NA)(),m=(null===(s=u.classifications)||void 0===s?void 0:s.length)?u.classifications[0].label:null,p=null!==(c=u.user_assigned_data_categories)&&void 0!==c?c:[],f=!m&&!(null==p?void 0:p.length),I=null===(a=u.sub_field_urns)||void 0===a?void 0:a.length,_=e=>{j({staged_resource_urn:u.urn,monitor_config_id:u.monitor_config_id,user_assigned_data_categories:[...p,e]})},y=e=>{var s;j({staged_resource_urn:u.urn,monitor_config_id:u.monitor_config_id,user_assigned_data_categories:null!==(s=null==p?void 0:p.filter(s=>s!==e))&&void 0!==s?s:[]})},C=!g&&!!p.length,v=!g&&!!m&&!p.length;return(0,i.jsxs)(o.Z,{"data-testid":"edit-category-cell",children:[f&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.Vp9,{"data-testid":"no-classifications",color:"white",children:"None"}),!I&&(0,i.jsx)(t.Vp9,{onClick:()=>h(!0),addable:!0,"data-testid":"taxonomy-add-btn","aria-label":"Add category"})]}),C&&(0,i.jsxs)(i.Fragment,{children:[p.map(e=>(0,i.jsx)(t.Vp9,{"data-testid":"user-classification-".concat(e),color:"white",closable:!0,onClose:()=>y(e),closeButtonLabel:"Remove category",children:x(e)},e)),(0,i.jsx)(t.Vp9,{onClick:()=>h(!0),addable:!0,"data-testid":"taxonomy-add-btn","aria-label":"Add category"})]}),v&&(0,i.jsxs)(t.Vp9,{onClick:()=>h(!0),color:"white","data-testid":"classification-".concat(m),hasSparkle:!0,children:[x(m),(0,i.jsx)(t.PJP.I8b,{size:10})]}),g&&(0,i.jsx)(t.TJV,{className:"select-wrapper",position:"absolute",zIndex:10,top:"0",left:"0",width:"100%",height:"max",bgColor:"#fff",children:(0,i.jsx)(r.Z,{selectedTaxonomies:p,onChange:e=>{h(!1),_(e)},onBlur:()=>h(!1),open:!0})})]})}},79947:function(e,s,a){var i=a(24246),t=a(36010);s.Z=e=>{let{type:s}=e;return(0,i.jsx)(t.ad9,{align:"center",h:"full",children:!!s&&(0,i.jsx)(t.Vp9,{children:s})})}}}]);