[build-system]
requires = ["hatchling>=1.24"]
build-backend = "hatchling.build"

[project]
name = "hypergumbo-lang-common"
version = "2.0.0"
description = "Common domain-specific language analyzers for hypergumbo"
readme = "README.md"
requires-python = ">=3.10"
license = { text = "AGPL-3.0-or-later" }
authors = [{ name = "Hypergumbo contributors" }]
keywords = ["static-analysis", "code-graph", "language-support"]
classifiers = [
  "Development Status :: 3 - Alpha",
  "License :: OSI Approved :: GNU Affero General Public License v3 or later (AGPLv3+)",
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3 :: Only",
]
dependencies = [
  "hypergumbo-core==2.0.0",
  # Tree-sitter grammars for common languages
  "tree-sitter-haskell>=0.21",
  "tree-sitter-ocaml>=0.21",
  "tree-sitter-language-pack>=0.13",  # Elixir, Dart, LaTeX, R, COBOL
  "tree-sitter-commonlisp>=0.4",
  # Additional common language grammars (separate packages, not in language-pack)
  "tree-sitter-cuda>=0.20",
  "tree-sitter-fortran>=0.1",
  "tree-sitter-glsl>=0.1",
  "tree-sitter-graphql>=0.1",
  "tree-sitter-hcl>=1.2",
  "tree-sitter-julia>=0.23",
  "tree-sitter-nix>=0.1",
  "tree-sitter-robot>=1.1",
  # Note: scss, hlsl, wgsl, proto use tree-sitter-language-pack (get_language()),
  # not separate packages
  # Note: Some grammars may need to be built from source
  # (see scripts/build-source-grammars)
]

[project.entry-points."hypergumbo.analyzers"]
common = "hypergumbo_lang_common:ANALYZER_SPECS"

[tool.hatch.build.targets.wheel]
packages = ["src/hypergumbo_lang_common"]

[tool.ruff]
target-version = "py310"
line-length = 100
src = ["src", "tests"]

[tool.ruff.lint]
select = ["E", "W", "F", "B", "C4", "S", "RUF"]
ignore = ["E501", "S101", "S105", "S106", "S110", "RUF059", "RUF005", "B028"]

[tool.ruff.lint.per-file-ignores]
"tests/**/*.py" = ["S101", "S105", "S106", "S603", "S108", "E741", "F401", "F841", "RUF005"]
"src/hypergumbo_lang_common/*.py" = ["E402"]
