============================= test session starts ==============================
platform linux -- Python 3.11.14, pytest-8.4.2, pluggy-1.6.0 -- /home/lionel/code/confiture/.venv/bin/python3
cachedir: .pytest_cache
metadata: {'Python': '3.11.14', 'Platform': 'Linux-6.17.9-arch1-1-x86_64-with-glibc2.42', 'Packages': {'pytest': '8.4.2', 'pluggy': '1.6.0'}, 'Plugins': {'json-report': '1.5.0', 'metadata': '3.1.1', 'asyncio': '1.2.0', 'cov': '7.0.0'}}
rootdir: /home/lionel/code/confiture
configfile: pyproject.toml
plugins: json-report-1.5.0, metadata-3.1.1, asyncio-1.2.0, cov-7.0.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 858 items

tests/e2e/test_cli.py::TestCLIBasics::test_cli_help PASSED               [  0%]
tests/e2e/test_cli.py::TestCLIBasics::test_cli_version PASSED            [  0%]
tests/e2e/test_cli.py::TestInitCommand::test_init_creates_directory_structure PASSED [  0%]
tests/e2e/test_cli.py::TestInitCommand::test_init_creates_config_files PASSED [  0%]
tests/e2e/test_cli.py::TestInitCommand::test_init_creates_example_schema PASSED [  0%]
tests/e2e/test_cli.py::TestInitCommand::test_init_displays_success_message PASSED [  0%]
tests/e2e/test_cli.py::TestInitCommand::test_init_fails_if_already_initialized PASSED [  0%]
tests/e2e/test_cli.py::TestMigrateStatusCommand::test_status_shows_no_migrations PASSED [  0%]
tests/e2e/test_cli.py::TestMigrateStatusCommand::test_status_shows_pending_migrations PASSED [  1%]
tests/e2e/test_cli.py::TestMigrateGenerateCommand::test_generate_creates_migration_file PASSED [  1%]
tests/e2e/test_cli.py::TestMigrateGenerateCommand::test_generate_with_custom_sql PASSED [  1%]
tests/e2e/test_cli.py::TestMigrateGenerateCommand::test_generate_displays_file_path PASSED [  1%]
tests/e2e/test_cli.py::TestMigrateDiffCommand::test_diff_compares_two_schemas PASSED [  1%]
tests/e2e/test_cli.py::TestMigrateDiffCommand::test_diff_with_no_changes PASSED [  1%]
tests/e2e/test_cli.py::TestMigrateDiffCommand::test_diff_with_generate_flag PASSED [  1%]
tests/e2e/test_cli.py::TestMigrateUpCommand::test_up_applies_pending_migrations PASSED [  1%]
tests/e2e/test_cli.py::TestMigrateUpCommand::test_up_with_no_pending_migrations PASSED [  1%]
tests/e2e/test_cli.py::TestMigrateDownCommand::test_down_rolls_back_last_migration PASSED [  2%]
tests/e2e/test_cli.py::TestCLIErrorHandling::test_nonexistent_command PASSED [  2%]
tests/e2e/test_cli.py::TestCLIErrorHandling::test_missing_required_argument PASSED [  2%]
tests/e2e/test_cli.py::TestCLIErrorHandling::test_invalid_file_path PASSED [  2%]
tests/e2e/test_cli_error_reporting.py::test_migrate_up_shows_detailed_error_on_sql_failure PASSED [  2%]
tests/e2e/test_cli_error_reporting.py::test_migrate_up_shows_progress_and_stops_on_error PASSED [  2%]
tests/e2e/test_cli_error_reporting.py::test_error_message_includes_troubleshooting_hints PASSED [  2%]
tests/integration/test_linting.py::TestLinderIntegration::test_lint_valid_schema PASSED [  2%]
tests/integration/test_linting.py::TestLinderIntegration::test_lint_naming_convention_violations PASSED [  3%]
tests/integration/test_linting.py::TestLinderIntegration::test_lint_missing_primary_key PASSED [  3%]
tests/integration/test_linting.py::TestLinderIntegration::test_lint_security_violations PASSED [  3%]
tests/integration/test_linting.py::TestLinderIntegration::test_lint_with_custom_config PASSED [  3%]
tests/integration/test_linting.py::TestLinderIntegration::test_lint_report_has_all_metrics PASSED [  3%]
tests/integration/test_linting.py::TestLinderIntegration::test_lint_exclude_tables PASSED [  3%]
tests/integration/test_migrate_force.py::TestForceMigrationWorkflow::test_force_workflow_issue_4_scenario PASSED [  3%]
tests/integration/test_migrate_force.py::TestForceMigrationWorkflow::test_force_mode_updates_migration_tracking PASSED [  3%]
tests/integration/test_migrate_force.py::TestForceMigrationWorkflow::test_multiple_force_applications PASSED [  3%]
tests/integration/test_migrate_force.py::TestForceMigrationWorkflow::test_force_mode_with_empty_migrations_dir PASSED [  4%]
tests/integration/test_migration_transaction_rollback.py::TestMigrationTransactionRollback::test_partial_migration_is_rolled_back PASSED [  4%]
tests/integration/test_migration_transaction_rollback.py::TestMigrationTransactionRollback::test_migrator_apply_rolls_back_on_failure PASSED [  4%]
tests/integration/test_migration_transaction_rollback.py::TestMigrationTransactionRollback::test_connection_state_after_failed_migration PASSED [  4%]
tests/integration/test_migrator.py::TestMigratorIntegration::test_migrator_creates_tracking_table PASSED [  4%]
tests/integration/test_migrator.py::TestMigratorIntegration::test_apply_migration PASSED [  4%]
tests/integration/test_migrator.py::TestMigratorIntegration::test_apply_migration_records_execution_time PASSED [  4%]
tests/integration/test_migrator.py::TestMigratorIntegration::test_rollback_migration PASSED [  4%]
tests/integration/test_schema_to_schema.py::TestSchemaToSchemaFDW::test_setup_fdw_connection PASSED [  5%]
tests/integration/test_schema_to_schema.py::TestSchemaToSchemaFDW::test_migrate_table_with_column_mapping PASSED [  5%]
tests/integration/test_schema_to_schema.py::TestSchemaToSchemaFDW::test_copy_strategy_for_large_table PASSED [  5%]
tests/integration/test_schema_to_schema.py::TestSchemaToSchemaFDW::test_analyze_tables_recommends_strategy PASSED [  5%]
tests/integration/test_schema_to_schema.py::TestSchemaToSchemaFDW::test_verify_migration_counts PASSED [  5%]
tests/integration/test_schema_to_schema.py::TestSchemaToSchemaFDW::test_verify_migration_detects_mismatch PASSED [  5%]
tests/integration/test_syncer.py::test_get_all_tables PASSED             [  5%]
tests/integration/test_syncer.py::test_select_tables_include PASSED      [  5%]
tests/integration/test_syncer.py::test_select_tables_exclude PASSED      [  5%]
tests/integration/test_syncer.py::test_sync_single_table PASSED          [  6%]
tests/integration/test_syncer.py::test_sync_large_table PASSED           [  6%]
tests/integration/test_syncer.py::test_sync_multiple_tables PASSED       [  6%]
tests/integration/test_syncer.py::test_sync_truncates_target PASSED      [  6%]
tests/integration/test_syncer.py::test_sync_verifies_row_count PASSED    [  6%]
tests/integration/test_syncer_anonymization.py::test_anonymize_email_addresses PASSED [  6%]
tests/integration/test_syncer_anonymization.py::test_anonymize_phone_numbers PASSED [  6%]
tests/integration/test_syncer_anonymization.py::test_anonymize_multiple_columns PASSED [  6%]
tests/integration/test_syncer_anonymization.py::test_redact_strategy PASSED [  6%]
tests/integration/test_syncer_anonymization.py::test_hash_strategy PASSED [  7%]
tests/integration/test_syncer_anonymization.py::test_deterministic_anonymization PASSED [  7%]
tests/integration/test_syncer_anonymization.py::test_null_values_not_anonymized PASSED [  7%]
tests/integration/test_syncer_anonymization.py::test_auto_detect_pii_columns PASSED [  7%]
tests/integration/test_syncer_anonymization.py::test_no_anonymization_without_rules PASSED [  7%]
tests/integration/test_syncer_progress.py::test_progress_reporting_single_table PASSED [  7%]
tests/integration/test_syncer_progress.py::test_progress_metrics_calculation PASSED [  7%]
tests/integration/test_syncer_progress.py::test_resume_from_checkpoint PASSED [  7%]
tests/integration/test_syncer_progress.py::test_checkpoint_structure PASSED [  8%]
tests/integration/test_syncer_progress.py::test_incremental_sync_large_table PASSED [  8%]
tests/integration/test_syncer_progress.py::test_resume_skips_completed_tables PASSED [  8%]
tests/integration/test_syncer_progress.py::test_progress_multiple_tables PASSED [  8%]
tests/migration_testing/test_advanced_scenarios.py::test_multi_table_migration_with_dependencies PASSED [  8%]
tests/migration_testing/test_advanced_scenarios.py::test_complex_constraint_scenario PASSED [  8%]
tests/migration_testing/test_advanced_scenarios.py::test_data_transformation_migration PASSED [  8%]
tests/migration_testing/test_advanced_scenarios.py::test_denormalization_migration PASSED [  8%]
tests/migration_testing/test_advanced_scenarios.py::test_versioned_schema_migration PASSED [  8%]
tests/migration_testing/test_advanced_scenarios.py::test_partitioning_migration PASSED [  9%]
tests/migration_testing/test_advanced_scenarios.py::test_indexing_strategy_migration PASSED [  9%]
tests/migration_testing/test_advanced_scenarios.py::test_trigger_and_function_migration PASSED [  9%]
tests/migration_testing/test_advanced_scenarios.py::test_materialized_view_migration PASSED [  9%]
tests/migration_testing/test_advanced_scenarios.py::test_schema_extension_migration PASSED [  9%]
tests/migration_testing/test_edge_cases.py::test_duplicate_table_name_conflict PASSED [  9%]
tests/migration_testing/test_edge_cases.py::test_column_type_mismatch_handling PASSED [  9%]
tests/migration_testing/test_edge_cases.py::test_constraint_name_collision PASSED [  9%]
tests/migration_testing/test_edge_cases.py::test_index_name_collision PASSED [ 10%]
tests/migration_testing/test_edge_cases.py::test_schema_naming_convention_enforcement PASSED [ 10%]
tests/migration_testing/test_edge_cases.py::test_concurrent_table_creation_safety PASSED [ 10%]
tests/migration_testing/test_edge_cases.py::test_concurrent_index_creation_safety PASSED [ 10%]
tests/migration_testing/test_edge_cases.py::test_concurrent_data_modification_consistency PASSED [ 10%]
tests/migration_testing/test_edge_cases.py::test_concurrent_view_access_safety PASSED [ 10%]
tests/migration_testing/test_edge_cases.py::test_large_table_creation PASSED [ 10%]
tests/migration_testing/test_edge_cases.py::test_bulk_insert_performance PASSED [ 10%]
tests/migration_testing/test_edge_cases.py::test_large_table_indexing PASSED [ 10%]
tests/migration_testing/test_edge_cases.py::test_large_table_constraint_addition PASSED [ 11%]
tests/migration_testing/test_edge_cases.py::test_large_table_view_creation PASSED [ 11%]
tests/migration_testing/test_edge_cases.py::test_not_null_constraint_violation PASSED [ 11%]
tests/migration_testing/test_edge_cases.py::test_unique_constraint_violation PASSED [ 11%]
tests/migration_testing/test_edge_cases.py::test_foreign_key_violation PASSED [ 11%]
tests/migration_testing/test_edge_cases.py::test_check_constraint_violation PASSED [ 11%]
tests/migration_testing/test_edge_cases.py::test_primary_key_violation PASSED [ 11%]
tests/migration_testing/test_edge_cases.py::test_view_with_base_table_dependency PASSED [ 11%]
tests/migration_testing/test_edge_cases.py::test_cascading_view_dependencies PASSED [ 12%]
tests/migration_testing/test_edge_cases.py::test_view_with_joined_tables PASSED [ 12%]
tests/migration_testing/test_edge_cases.py::test_view_with_aggregates PASSED [ 12%]
tests/migration_testing/test_edge_cases.py::test_multi_table_creation_sequence PASSED [ 12%]
tests/migration_testing/test_edge_cases.py::test_multi_step_schema_modification PASSED [ 12%]
tests/migration_testing/test_edge_cases.py::test_data_transformation_across_steps PASSED [ 12%]
tests/migration_testing/test_edge_cases.py::test_uuid_to_string_transformation PASSED [ 12%]
tests/migration_testing/test_edge_cases.py::test_enum_to_varchar_transformation PASSED [ 12%]
tests/migration_testing/test_edge_cases.py::test_denormalization_transformation PASSED [ 12%]
tests/migration_testing/test_forward_migrations.py::test_migration_file_structure PASSED [ 13%]
tests/migration_testing/test_forward_migrations.py::test_migration_naming_convention PASSED [ 13%]
tests/migration_testing/test_forward_migrations.py::test_schema_ddl_structure PASSED [ 13%]
tests/migration_testing/test_forward_migrations.py::test_migration_with_single_statement PASSED [ 13%]
tests/migration_testing/test_forward_migrations.py::test_migration_tracks_content_size PASSED [ 13%]
tests/migration_testing/test_forward_migrations.py::test_schema_file_extension PASSED [ 13%]
tests/migration_testing/test_forward_migrations.py::test_schema_directory_organization PASSED [ 13%]
tests/migration_testing/test_forward_migrations.py::test_common_schema_contains_extensions PASSED [ 13%]
tests/migration_testing/test_forward_migrations.py::test_tables_schema_section PASSED [ 13%]
tests/migration_testing/test_forward_migrations.py::test_views_schema_section PASSED [ 14%]
tests/migration_testing/test_forward_migrations.py::test_migration_files_are_independent PASSED [ 14%]
tests/migration_testing/test_forward_migrations.py::test_sql_comment_preservation PASSED [ 14%]
tests/migration_testing/test_forward_migrations.py::test_schema_preserves_ddl_structure PASSED [ 14%]
tests/migration_testing/test_forward_migrations.py::test_schema_creates_valid_columns PASSED [ 14%]
tests/migration_testing/test_forward_migrations.py::test_schema_enforces_constraints PASSED [ 14%]
tests/migration_testing/test_forward_migrations.py::test_schema_preserves_indices PASSED [ 14%]
tests/migration_testing/test_forward_migrations.py::test_schema_foreign_keys_valid PASSED [ 14%]
tests/migration_testing/test_forward_migrations.py::test_migration_does_not_truncate_data PASSED [ 15%]
tests/migration_testing/test_forward_migrations.py::test_empty_migration_directory_handled PASSED [ 15%]
tests/migration_testing/test_forward_migrations.py::test_duplicate_migration_names_detected PASSED [ 15%]
tests/migration_testing/test_forward_migrations.py::test_migration_with_special_characters_in_name PASSED [ 15%]
tests/migration_testing/test_forward_migrations.py::test_large_migration_file_handled PASSED [ 15%]
tests/migration_testing/test_forward_migrations.py::test_migration_with_multiple_statements PASSED [ 15%]
tests/migration_testing/test_forward_migrations.py::test_migration_with_comments_and_whitespace PASSED [ 15%]
tests/migration_testing/test_forward_migrations.py::test_schema_file_execution_completes PASSED [ 15%]
tests/migration_testing/test_forward_migrations.py::test_multiple_schema_files_execution PASSED [ 15%]
tests/migration_testing/test_forward_migrations.py::test_index_creation_performance PASSED [ 16%]
tests/migration_testing/test_forward_migrations.py::test_constraint_creation_performance PASSED [ 16%]
tests/migration_testing/test_forward_migrations.py::test_view_creation_performance PASSED [ 16%]
tests/migration_testing/test_forward_migrations.py::test_schema_execution_idempotent PASSED [ 16%]
tests/migration_testing/test_forward_migrations.py::test_index_idempotent PASSED [ 16%]
tests/migration_testing/test_forward_migrations.py::test_view_idempotent PASSED [ 16%]
tests/migration_testing/test_forward_migrations.py::test_schema_extension_idempotent PASSED [ 16%]
tests/migration_testing/test_forward_migrations.py::test_constraint_idempotent PASSED [ 16%]
tests/migration_testing/test_load_testing.py::test_create_large_table PASSED [ 17%]
tests/migration_testing/test_load_testing.py::test_bulk_insert_10k_rows PASSED [ 17%]
tests/migration_testing/test_load_testing.py::test_bulk_insert_50k_rows PASSED [ 17%]
tests/migration_testing/test_load_testing.py::test_index_creation_on_large_table PASSED [ 17%]
tests/migration_testing/test_load_testing.py::test_constraint_on_large_table PASSED [ 17%]
tests/migration_testing/test_load_testing.py::test_bulk_update_on_large_table PASSED [ 17%]
tests/migration_testing/test_load_testing.py::test_bulk_delete_on_large_table PASSED [ 17%]
tests/migration_testing/test_load_testing.py::test_aggregation_on_large_table PASSED [ 17%]
tests/migration_testing/test_load_testing.py::test_view_on_large_table PASSED [ 17%]
tests/migration_testing/test_load_testing.py::test_join_on_large_tables PASSED [ 18%]
tests/migration_testing/test_load_testing.py::test_transaction_with_many_operations PASSED [ 18%]
tests/migration_testing/test_mutations.py::test_mutation_registry_loads PASSED [ 18%]
tests/migration_testing/test_mutations.py::test_schema_mutations_available PASSED [ 18%]
tests/migration_testing/test_mutations.py::test_data_mutations_available PASSED [ 18%]
tests/migration_testing/test_mutations.py::test_rollback_mutations_available PASSED [ 18%]
tests/migration_testing/test_mutations.py::test_performance_mutations_available PASSED [ 18%]
tests/migration_testing/test_mutations.py::test_mutation_severity_levels PASSED [ 18%]
tests/migration_testing/test_mutations.py::test_mutation_descriptions PASSED [ 18%]
tests/migration_testing/test_mutations.py::test_mutation_apply_functions PASSED [ 19%]
tests/migration_testing/test_mutations.py::test_mutation_kill_rate_calculation PASSED [ 19%]
tests/migration_testing/test_mutations.py::test_mutation_metrics_by_category PASSED [ 19%]
tests/migration_testing/test_performance.py::test_performance_profiler_available PASSED [ 19%]
tests/migration_testing/test_performance.py::test_simple_migration_performance PASSED [ 19%]
tests/migration_testing/test_performance.py::test_index_creation_performance PASSED [ 19%]
tests/migration_testing/test_performance.py::test_constraint_creation_performance PASSED [ 19%]
tests/migration_testing/test_performance.py::test_view_creation_performance PASSED [ 19%]
tests/migration_testing/test_performance.py::test_performance_regression_detection PASSED [ 20%]
tests/migration_testing/test_performance.py::test_bulk_insert_performance PASSED [ 20%]
tests/migration_testing/test_performance.py::test_large_table_index_performance PASSED [ 20%]
tests/migration_testing/test_performance.py::test_performance_baseline_tracking PASSED [ 20%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_reverses_table_creation PASSED [ 20%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_removes_column PASSED [ 20%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_removes_index PASSED [ 20%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_reverses_constraint PASSED [ 20%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_recreates_view PASSED [ 20%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_preserves_data_on_column_removal PASSED [ 21%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_does_not_delete_existing_data PASSED [ 21%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_on_failed_migration_keeps_data_intact PASSED [ 21%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_restores_unique_constraint_data PASSED [ 21%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_preserves_foreign_key_relationships PASSED [ 21%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_cascade_delete_handling PASSED [ 21%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_fails_with_invalid_sql PASSED [ 21%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_maintains_transaction_integrity PASSED [ 21%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_sequence_order PASSED [ 22%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_with_dependent_views PASSED [ 22%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_preserves_system_state PASSED [ 22%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_idempotent_operations PASSED [ 22%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_concurrent_safety PASSED [ 22%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_idempotent_drop_table PASSED [ 22%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_idempotent_drop_column PASSED [ 22%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_idempotent_drop_index PASSED [ 22%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_idempotent_drop_constraint PASSED [ 22%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_idempotent_drop_view PASSED [ 23%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_idempotent_drop_extension PASSED [ 23%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_idempotent_sequence_reset PASSED [ 23%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_simple_table_fast PASSED [ 23%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_multiple_tables_fast PASSED [ 23%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_index_removal_fast PASSED [ 23%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_constraint_removal_fast PASSED [ 23%]
tests/migration_testing/test_rollback_migrations.py::test_rollback_view_recreation_fast PASSED [ 23%]
tests/performance/test_linting_performance.py::TestLintingPerformance::test_naming_rule_performance_with_compiled_patterns PASSED [ 24%]
tests/performance/test_linting_performance.py::TestLintingPerformance::test_linting_with_typical_schema PASSED [ 24%]
tests/performance/test_linting_performance.py::TestLintingPerformance::test_linting_speed_improvement_from_optimizations PASSED [ 24%]
tests/performance/test_linting_performance.py::TestLintingOptimizations::test_regex_pattern_correctness PASSED [ 24%]
tests/performance/test_linting_performance.py::TestLintingOptimizations::test_cli_format_validation_constant PASSED [ 24%]
tests/performance/test_rust_speedup.py::test_build_performance PASSED    [ 24%]
tests/performance/test_rust_speedup.py::test_hash_performance PASSED     [ 24%]
tests/performance/test_rust_speedup.py::test_repeated_operations_performance PASSED [ 24%]
tests/performance/test_rust_speedup.py::test_rust_extension_availability PASSED [ 24%]
tests/performance/test_rust_speedup.py::test_build_vs_hash_ratio PASSED  [ 25%]
tests/performance/test_syncer_benchmarks.py::test_baseline_copy_performance PASSED [ 25%]
tests/performance/test_syncer_benchmarks.py::test_baseline_anonymization_performance PASSED [ 25%]
tests/performance/test_syncer_benchmarks.py::test_batch_size_impact PASSED [ 25%]
tests/performance/test_syncer_benchmarks.py::test_connection_overhead PASSED [ 25%]
tests/performance/test_syncer_benchmarks.py::test_multi_table_sync_performance PASSED [ 25%]
tests/performance/test_syncer_benchmarks.py::test_memory_usage_estimate PASSED [ 25%]
tests/performance/test_syncer_benchmarks.py::test_checkpoint_overhead PASSED [ 25%]
tests/performance/test_syncer_benchmarks.py::test_performance_consistency PASSED [ 25%]
tests/unit/test_anonymization_audit.py::TestAuditEntryCreation::test_create_minimal_entry PASSED [ 26%]
tests/unit/test_anonymization_audit.py::TestAuditEntryCreation::test_entry_with_multiple_tables PASSED [ 26%]
tests/unit/test_anonymization_audit.py::TestAuditEntryCreation::test_entry_with_verification_failure PASSED [ 26%]
tests/unit/test_anonymization_audit.py::TestAuditEntrySerialization::test_to_json PASSED [ 26%]
tests/unit/test_anonymization_audit.py::TestAuditEntrySerialization::test_from_json PASSED [ 26%]
tests/unit/test_anonymization_audit.py::TestAuditEntrySerialization::test_json_roundtrip PASSED [ 26%]
tests/unit/test_anonymization_audit.py::TestAuditSignature::test_sign_entry PASSED [ 26%]
tests/unit/test_anonymization_audit.py::TestAuditSignature::test_signature_changes_with_different_secret PASSED [ 26%]
tests/unit/test_anonymization_audit.py::TestAuditSignature::test_signature_is_deterministic PASSED [ 27%]
tests/unit/test_anonymization_audit.py::TestAuditSignature::test_verify_valid_signature PASSED [ 27%]
tests/unit/test_anonymization_audit.py::TestAuditSignature::test_verify_fails_with_wrong_secret PASSED [ 27%]
tests/unit/test_anonymization_audit.py::TestAuditSignature::test_tamper_detection_user_field PASSED [ 27%]
tests/unit/test_anonymization_audit.py::TestAuditSignature::test_tamper_detection_profile_hash PASSED [ 27%]
tests/unit/test_anonymization_audit.py::TestAuditSignature::test_tamper_detection_verification_passed PASSED [ 27%]
tests/unit/test_anonymization_audit.py::TestCreateAuditEntry::test_create_entry_with_defaults PASSED [ 27%]
tests/unit/test_anonymization_audit.py::TestCreateAuditEntry::test_created_entry_is_signed PASSED [ 27%]
tests/unit/test_anonymization_audit.py::TestCreateAuditEntry::test_created_entry_is_tamperable PASSED [ 27%]
tests/unit/test_anonymization_audit.py::TestAuditLoggerDatabase::test_audit_logger_init PASSED [ 28%]
tests/unit/test_anonymization_audit.py::TestAuditLoggerDatabase::test_audit_logger_is_idempotent PASSED [ 28%]
tests/unit/test_anonymization_audit.py::TestAuditLoggerDatabase::test_log_single_entry FAILED [ 28%]
tests/unit/test_anonymization_audit.py::TestAuditLoggerDatabase::test_log_multiple_entries FAILED [ 28%]
tests/unit/test_anonymization_audit.py::TestAuditLoggerDatabase::test_get_audit_log_ordered FAILED [ 28%]
tests/unit/test_anonymization_audit.py::TestAuditLoggerDatabase::test_audit_entries_preserve_signature FAILED [ 28%]
tests/unit/test_anonymization_profile.py::TestStrategyTypeWhitelist::test_strategy_type_values PASSED [ 28%]
tests/unit/test_anonymization_profile.py::TestStrategyTypeWhitelist::test_strategy_type_count PASSED [ 28%]
tests/unit/test_anonymization_profile.py::TestStrategyDefinitionValidation::test_valid_strategy_definition PASSED [ 29%]
tests/unit/test_anonymization_profile.py::TestStrategyDefinitionValidation::test_strategy_with_config PASSED [ 29%]
tests/unit/test_anonymization_profile.py::TestStrategyDefinitionValidation::test_strategy_with_seed_env_var PASSED [ 29%]
tests/unit/test_anonymization_profile.py::TestStrategyDefinitionValidation::test_invalid_strategy_type_rejected PASSED [ 29%]
tests/unit/test_anonymization_profile.py::TestStrategyDefinitionValidation::test_all_whitelisted_types_accepted PASSED [ 29%]
tests/unit/test_anonymization_profile.py::TestStrategyDefinitionValidation::test_case_sensitive_strategy_types PASSED [ 29%]
tests/unit/test_anonymization_profile.py::TestAnonymizationRuleValidation::test_minimal_rule PASSED [ 29%]
tests/unit/test_anonymization_profile.py::TestAnonymizationRuleValidation::test_rule_with_seed PASSED [ 29%]
tests/unit/test_anonymization_profile.py::TestAnonymizationRuleValidation::test_rule_with_options PASSED [ 29%]
tests/unit/test_anonymization_profile.py::TestAnonymizationRuleValidation::test_rule_missing_required_field PASSED [ 30%]
tests/unit/test_anonymization_profile.py::TestAnonymizationProfileValidation::test_minimal_valid_profile PASSED [ 30%]
tests/unit/test_anonymization_profile.py::TestAnonymizationProfileValidation::test_profile_with_global_seed PASSED [ 30%]
tests/unit/test_anonymization_profile.py::TestAnonymizationProfileValidation::test_profile_with_strategies PASSED [ 30%]
tests/unit/test_anonymization_profile.py::TestAnonymizationProfileValidation::test_profile_with_tables PASSED [ 30%]
tests/unit/test_anonymization_profile.py::TestAnonymizationProfileValidation::test_profile_missing_required_field PASSED [ 30%]
tests/unit/test_anonymization_profile.py::TestAnonymizationProfileValidation::test_profile_from_dict PASSED [ 30%]
tests/unit/test_anonymization_profile.py::TestYAMLSafeLoading::test_yaml_injection_prevented PASSED [ 30%]
tests/unit/test_anonymization_profile.py::TestYAMLSafeLoading::test_yaml_object_constructor_blocked PASSED [ 31%]
tests/unit/test_anonymization_profile.py::TestYAMLSafeLoading::test_valid_yaml_still_loads PASSED [ 31%]
tests/unit/test_anonymization_profile.py::TestProfileLoading::test_load_minimal_profile PASSED [ 31%]
tests/unit/test_anonymization_profile.py::TestProfileLoading::test_load_complete_profile PASSED [ 31%]
tests/unit/test_anonymization_profile.py::TestProfileLoading::test_load_file_not_found PASSED [ 31%]
tests/unit/test_anonymization_profile.py::TestProfileLoading::test_load_malformed_yaml PASSED [ 31%]
tests/unit/test_anonymization_profile.py::TestProfileLoading::test_load_empty_yaml PASSED [ 31%]
tests/unit/test_anonymization_profile.py::TestProfileLoading::test_load_yaml_with_comments PASSED [ 31%]
tests/unit/test_anonymization_profile.py::TestSeedResolution::test_column_specific_seed_wins PASSED [ 31%]
tests/unit/test_anonymization_profile.py::TestSeedResolution::test_global_seed_applies_to_column PASSED [ 32%]
tests/unit/test_anonymization_profile.py::TestSeedResolution::test_default_seed_when_no_global PASSED [ 32%]
tests/unit/test_anonymization_profile.py::TestSeedResolution::test_foreign_key_consistency PASSED [ 32%]
tests/unit/test_anonymization_profile.py::TestSeedResolution::test_column_override_breaks_consistency PASSED [ 32%]
tests/unit/test_anonymization_profile.py::TestStrategyTypeValidationEdgeCases::test_empty_strategy_type_rejected PASSED [ 32%]
tests/unit/test_anonymization_profile.py::TestStrategyTypeValidationEdgeCases::test_whitespace_strategy_type_rejected PASSED [ 32%]
tests/unit/test_anonymization_profile.py::TestStrategyTypeValidationEdgeCases::test_strategy_type_with_spaces_rejected PASSED [ 32%]
tests/unit/test_anonymization_profile.py::TestStrategyTypeValidationEdgeCases::test_similar_strategy_name_rejected PASSED [ 32%]
tests/unit/test_anonymization_profile.py::TestComplexScenarios::test_multiple_tables_same_strategy PASSED [ 32%]
tests/unit/test_anonymization_profile.py::TestComplexScenarios::test_mixed_seeds_different_strategies PASSED [ 33%]
tests/unit/test_anonymization_strategies.py::TestEmailMaskingStrategy::test_deterministic_email_masking PASSED [ 33%]
tests/unit/test_anonymization_strategies.py::TestEmailMaskingStrategy::test_different_emails_different_masks PASSED [ 33%]
tests/unit/test_anonymization_strategies.py::TestEmailMaskingStrategy::test_email_format_preserved PASSED [ 33%]
tests/unit/test_anonymization_strategies.py::TestEmailMaskingStrategy::test_null_email_handling PASSED [ 33%]
tests/unit/test_anonymization_strategies.py::TestEmailMaskingStrategy::test_empty_email_handling PASSED [ 33%]
tests/unit/test_anonymization_strategies.py::TestEmailMaskingStrategy::test_custom_format PASSED [ 33%]
tests/unit/test_anonymization_strategies.py::TestEmailMaskingStrategy::test_hash_length_configuration PASSED [ 33%]
tests/unit/test_anonymization_strategies.py::TestEmailMaskingStrategy::test_validate_valid_email PASSED [ 34%]
tests/unit/test_anonymization_strategies.py::TestEmailMaskingStrategy::test_validate_invalid_email PASSED [ 34%]
tests/unit/test_anonymization_strategies.py::TestEmailMaskingStrategy::test_unicode_email_handling PASSED [ 34%]
tests/unit/test_anonymization_strategies.py::TestPhoneMaskingStrategy::test_deterministic_phone_masking PASSED [ 34%]
tests/unit/test_anonymization_strategies.py::TestPhoneMaskingStrategy::test_different_phones_different_masks PASSED [ 34%]
tests/unit/test_anonymization_strategies.py::TestPhoneMaskingStrategy::test_phone_format_preserved PASSED [ 34%]
tests/unit/test_anonymization_strategies.py::TestPhoneMaskingStrategy::test_null_phone_handling PASSED [ 34%]
tests/unit/test_anonymization_strategies.py::TestPhoneMaskingStrategy::test_empty_phone_handling PASSED [ 34%]
tests/unit/test_anonymization_strategies.py::TestPhoneMaskingStrategy::test_custom_phone_format PASSED [ 34%]
tests/unit/test_anonymization_strategies.py::TestPhoneMaskingStrategy::test_validate_valid_phone PASSED [ 35%]
tests/unit/test_anonymization_strategies.py::TestPhoneMaskingStrategy::test_validate_invalid_phone PASSED [ 35%]
tests/unit/test_anonymization_strategies.py::TestPhoneMaskingStrategy::test_various_phone_formats PASSED [ 35%]
tests/unit/test_anonymization_strategies.py::TestSimpleRedactStrategy::test_redaction_consistency PASSED [ 35%]
tests/unit/test_anonymization_strategies.py::TestSimpleRedactStrategy::test_null_not_redacted PASSED [ 35%]
tests/unit/test_anonymization_strategies.py::TestSimpleRedactStrategy::test_empty_string_redacted PASSED [ 35%]
tests/unit/test_anonymization_strategies.py::TestSimpleRedactStrategy::test_custom_redaction_text PASSED [ 35%]
tests/unit/test_anonymization_strategies.py::TestSimpleRedactStrategy::test_validate_all_types PASSED [ 35%]
tests/unit/test_anonymization_strategies.py::TestSimpleRedactStrategy::test_no_determinism_needed PASSED [ 36%]
tests/unit/test_anonymization_strategies.py::TestSimpleRedactStrategy::test_unicode_redaction PASSED [ 36%]
tests/unit/test_anonymization_strategy.py::TestSeedResolution::test_seed_from_environment_variable PASSED [ 36%]
tests/unit/test_anonymization_strategy.py::TestSeedResolution::test_seed_fallback_to_hardcoded PASSED [ 36%]
tests/unit/test_anonymization_strategy.py::TestSeedResolution::test_seed_default_zero PASSED [ 36%]
tests/unit/test_anonymization_strategy.py::TestSeedResolution::test_env_var_takes_precedence PASSED [ 36%]
tests/unit/test_anonymization_strategy.py::TestSeedResolution::test_invalid_env_var_raises_error PASSED [ 36%]
tests/unit/test_anonymization_strategy.py::TestSeedResolution::test_empty_env_var_falls_back PASSED [ 36%]
tests/unit/test_anonymization_strategy.py::TestDeterministicHashStrategy::test_deterministic_hashing PASSED [ 36%]
tests/unit/test_anonymization_strategy.py::TestDeterministicHashStrategy::test_different_values_different_hashes PASSED [ 37%]
tests/unit/test_anonymization_strategy.py::TestDeterministicHashStrategy::test_different_seeds_different_hashes PASSED [ 37%]
tests/unit/test_anonymization_strategy.py::TestDeterministicHashStrategy::test_null_handling PASSED [ 37%]
tests/unit/test_anonymization_strategy.py::TestDeterministicHashStrategy::test_empty_string_handling PASSED [ 37%]
tests/unit/test_anonymization_strategy.py::TestDeterministicHashStrategy::test_unicode_handling PASSED [ 37%]
tests/unit/test_anonymization_strategy.py::TestDeterministicHashStrategy::test_length_truncation PASSED [ 37%]
tests/unit/test_anonymization_strategy.py::TestDeterministicHashStrategy::test_prefix_addition PASSED [ 37%]
tests/unit/test_anonymization_strategy.py::TestDeterministicHashStrategy::test_prefix_and_length_combined PASSED [ 37%]
tests/unit/test_anonymization_strategy.py::TestDeterministicHashStrategy::test_algorithm_validation PASSED [ 37%]
tests/unit/test_anonymization_strategy.py::TestDeterministicHashStrategy::test_supported_algorithms PASSED [ 38%]
tests/unit/test_anonymization_strategy.py::TestDeterministicHashStrategy::test_validate_accepts_any_type PASSED [ 38%]
tests/unit/test_anonymization_strategy.py::TestDeterministicHashStrategy::test_integer_hashing PASSED [ 38%]
tests/unit/test_anonymization_strategy.py::TestDeterministicHashStrategy::test_float_hashing PASSED [ 38%]
tests/unit/test_anonymization_strategy.py::TestDeterministicHashStrategy::test_hmac_with_secret PASSED [ 38%]
tests/unit/test_anonymization_strategy.py::TestDeterministicHashStrategy::test_strategy_name_short PASSED [ 38%]
tests/unit/test_anonymization_strategy.py::TestDeterministicHashStrategy::test_strategy_repr PASSED [ 38%]
tests/unit/test_anonymization_strategy.py::TestHashStrategyConfiguration::test_config_defaults PASSED [ 38%]
tests/unit/test_anonymization_strategy.py::TestHashStrategyConfiguration::test_config_custom_values PASSED [ 39%]
tests/unit/test_anonymization_strategy.py::TestHashStrategyConfiguration::test_invalid_algorithm_in_config PASSED [ 39%]
tests/unit/test_builder.py::TestSchemaBuilderFileDiscovery::test_find_sql_files_returns_sorted_list PASSED [ 39%]
tests/unit/test_builder.py::TestSchemaBuilderFileDiscovery::test_find_sql_files_excludes_directories PASSED [ 39%]
tests/unit/test_builder.py::TestSchemaBuilderFileDiscovery::test_find_sql_files_fails_if_directory_missing PASSED [ 39%]
tests/unit/test_builder.py::TestSchemaBuilderFileDiscovery::test_find_sql_files_fails_if_empty PASSED [ 39%]
tests/unit/test_builder.py::TestSchemaBuilderBuild::test_build_concatenates_files_in_order PASSED [ 39%]
tests/unit/test_builder.py::TestSchemaBuilderBuild::test_build_writes_to_file PASSED [ 39%]
tests/unit/test_builder.py::TestSchemaBuilderBuild::test_build_includes_file_count PASSED [ 39%]
tests/unit/test_builder.py::TestSchemaBuilderHash::test_compute_hash_is_deterministic PASSED [ 40%]
tests/unit/test_builder.py::TestSchemaBuilderHash::test_compute_hash_changes_on_content_change PASSED [ 40%]
tests/unit/test_builder.py::TestSchemaBuilderHash::test_compute_hash_changes_on_file_rename PASSED [ 40%]
tests/unit/test_builder.py::TestSchemaBuilderHash::test_compute_hash_changes_on_file_addition PASSED [ 40%]
tests/unit/test_builder.py::TestSchemaBuilderPerformance::test_build_large_schema PASSED [ 40%]
tests/unit/test_builder.py::TestSchemaBuilderPerformance::test_hash_computation_is_fast PASSED [ 40%]
tests/unit/test_builder.py::TestSchemaBuilderEdgeCases::test_find_common_parent_single_dir PASSED [ 40%]
tests/unit/test_builder.py::TestSchemaBuilderEdgeCases::test_build_with_empty_files PASSED [ 40%]
tests/unit/test_builder.py::TestSchemaBuilderEdgeCases::test_build_with_unicode_content PASSED [ 41%]
tests/unit/test_builder.py::TestSchemaBuilderEdgeCases::test_compute_hash_with_unicode PASSED [ 41%]
tests/unit/test_builder_comprehensive.py::TestFindCommonParent::test_find_common_parent_multiple_paths PASSED [ 41%]
tests/unit/test_builder_comprehensive.py::TestFindCommonParent::test_find_common_parent_nested_paths PASSED [ 41%]
tests/unit/test_builder_comprehensive.py::TestFindCommonParent::test_find_common_parent_no_common_parts PASSED [ 41%]
tests/unit/test_builder_comprehensive.py::TestFindSqlFilesErrorHandling::test_find_sql_files_exclude_filtering PASSED [ 41%]
tests/unit/test_builder_comprehensive.py::TestBuildErrorHandling::test_build_with_file_path_handling PASSED [ 41%]
tests/unit/test_builder_comprehensive.py::TestBuildErrorHandling::test_build_error_writing_output PASSED [ 41%]
tests/unit/test_builder_comprehensive.py::TestComputeHashErrorHandling::test_compute_hash_includes_path_and_content PASSED [ 41%]
tests/unit/test_builder_comprehensive.py::TestBuilderInitialization::test_initialization_no_include_dirs PASSED [ 42%]
tests/unit/test_builder_comprehensive.py::TestBuildWithFileVariations::test_build_file_without_trailing_newline PASSED [ 42%]
tests/unit/test_builder_comprehensive.py::TestBuildWithFileVariations::test_build_with_multiple_include_dirs PASSED [ 42%]
tests/unit/test_builder_comprehensive.py::TestBuildWithFileVariations::test_build_relative_path_calculation PASSED [ 42%]
tests/unit/test_builder_error_paths.py::TestBuilderErrorPaths::test_builder_initialization_invalid_env PASSED [ 42%]
tests/unit/test_builder_error_paths.py::TestBuilderErrorPaths::test_build_creates_output_directory PASSED [ 42%]
tests/unit/test_builder_error_paths.py::TestBuilderErrorPaths::test_find_sql_files_with_nested_directories PASSED [ 42%]
tests/unit/test_builder_error_paths.py::TestBuilderErrorPaths::test_compute_hash_with_large_files PASSED [ 42%]
tests/unit/test_builder_error_paths.py::TestBuilderErrorPaths::test_build_with_only_comments PASSED [ 43%]
tests/unit/test_builder_hex_sorting.py::test_hex_file_ordering PASSED    [ 43%]
tests/unit/test_builder_hex_sorting.py::test_mixed_hex_and_alphabetical PASSED [ 43%]
tests/unit/test_builder_hex_sorting.py::test_alphabetical_sorting_default PASSED [ 43%]
tests/unit/test_builder_hex_sorting.py::test_hex_sort_key_method PASSED  [ 43%]
tests/unit/test_builder_hex_sorting.py::test_is_hex_prefix_method PASSED [ 43%]
tests/unit/test_builder_hex_sorting.py::test_hex_sorting_only_when_hex_files_present PASSED [ 43%]
tests/unit/test_cli_dry_run.py::TestMigrateUpDryRun::test_migrate_up_dry_run_analyzes_without_execution PASSED [ 43%]
tests/unit/test_cli_dry_run.py::TestMigrateUpDryRun::test_migrate_up_dry_run_json_format PASSED [ 43%]
tests/unit/test_cli_dry_run.py::TestMigrateUpDryRun::test_migrate_up_dry_run_saves_to_file PASSED [ 44%]
tests/unit/test_cli_dry_run.py::TestMigrateUpDryRun::test_migrate_up_dry_run_execute_with_confirmation PASSED [ 44%]
tests/unit/test_cli_dry_run.py::TestMigrateDownDryRun::test_migrate_down_dry_run_analyzes_without_rollback PASSED [ 44%]
tests/unit/test_cli_dry_run.py::TestMigrateDownDryRun::test_migrate_down_dry_run_json_format PASSED [ 44%]
tests/unit/test_cli_dry_run.py::TestDryRunValidation::test_dry_run_and_dry_run_execute_mutually_exclusive PASSED [ 44%]
tests/unit/test_cli_dry_run.py::TestDryRunValidation::test_dry_run_with_force_not_allowed PASSED [ 44%]
tests/unit/test_cli_dry_run.py::TestDryRunValidation::test_invalid_format_option PASSED [ 44%]
tests/unit/test_cli_dry_run.py::TestDryRunValidation::test_migrate_down_invalid_format PASSED [ 44%]
tests/unit/test_cli_dry_run.py::TestDryRunExecution::test_migrate_up_dry_run_execute_user_cancels PASSED [ 44%]
tests/unit/test_cli_dry_run.py::TestDryRunExecution::test_migrate_up_no_pending_migrations_with_dry_run PASSED [ 45%]
tests/unit/test_cli_error_paths.py::TestBuildCommand::test_build_with_schema_only_flag PASSED [ 45%]
tests/unit/test_cli_error_paths.py::TestBuildCommand::test_build_with_show_hash_flag PASSED [ 45%]
tests/unit/test_cli_error_paths.py::TestBuildCommand::test_build_with_file_not_found_error PASSED [ 45%]
tests/unit/test_cli_error_paths.py::TestBuildCommand::test_build_with_custom_output PASSED [ 45%]
tests/unit/test_cli_error_paths.py::TestMigrateStatusCommand::test_migrate_status_no_migrations_dir PASSED [ 45%]
tests/unit/test_cli_error_paths.py::TestMigrateStatusCommand::test_migrate_status_empty_migrations_dir PASSED [ 45%]
tests/unit/test_cli_error_paths.py::TestMigrateStatusCommand::test_migrate_status_with_migrations PASSED [ 45%]
tests/unit/test_cli_error_paths.py::TestMigrateGenerateCommand::test_migrate_generate_creates_file PASSED [ 46%]
tests/unit/test_cli_error_paths.py::TestMigrateDiffCommand::test_migrate_diff_old_file_not_found PASSED [ 46%]
tests/unit/test_cli_error_paths.py::TestMigrateDiffCommand::test_migrate_diff_new_file_not_found PASSED [ 46%]
tests/unit/test_cli_error_paths.py::TestMigrateDiffCommand::test_migrate_diff_no_changes PASSED [ 46%]
tests/unit/test_cli_error_paths.py::TestMigrateDiffCommand::test_migrate_diff_with_changes PASSED [ 46%]
tests/unit/test_cli_error_paths.py::TestInitCommand::test_init_creates_structure PASSED [ 46%]
tests/unit/test_cli_error_paths.py::TestInitCommand::test_init_existing_project PASSED [ 46%]
tests/unit/test_cli_migrate.py::TestMigrateUpCommand::test_migrate_up_force_flag_parsing PASSED [ 46%]
tests/unit/test_cli_migrate.py::TestMigrateUpCommand::test_migrate_up_force_flag_defaults_to_false PASSED [ 46%]
tests/unit/test_cli_migrate.py::TestMigrateUpCommand::test_migrate_up_force_flag_help_text PASSED [ 47%]
tests/unit/test_cli_migrate.py::TestMigrateUpCommand::test_migrate_up_force_shows_warning_message PASSED [ 47%]
tests/unit/test_config.py::TestEnvironmentLoading::test_load_environment_from_yaml PASSED [ 47%]
tests/unit/test_config.py::TestEnvironmentLoading::test_load_missing_environment_file PASSED [ 47%]
tests/unit/test_config.py::TestEnvironmentLoading::test_load_malformed_yaml PASSED [ 47%]
tests/unit/test_config.py::TestEnvironmentLoading::test_load_missing_required_fields PASSED [ 47%]
tests/unit/test_config.py::TestEnvironmentValidation::test_database_url_validation PASSED [ 47%]
tests/unit/test_config.py::TestEnvironmentValidation::test_include_dirs_must_exist PASSED [ 47%]
tests/unit/test_config.py::TestEnvironmentDefaults::test_default_migration_table PASSED [ 48%]
tests/unit/test_config.py::TestEnvironmentDefaults::test_default_exclude_dirs_empty PASSED [ 48%]
tests/unit/test_config.py::TestEnvironmentDefaults::test_default_auto_backup_true PASSED [ 48%]
tests/unit/test_config.py::TestEnvironmentPaths::test_resolve_include_dirs_absolute PASSED [ 48%]
tests/unit/test_connection.py::TestLoadConfig::test_load_config_success PASSED [ 48%]
tests/unit/test_connection.py::TestLoadConfig::test_load_config_file_not_found PASSED [ 48%]
tests/unit/test_connection.py::TestLoadConfig::test_load_config_invalid_yaml PASSED [ 48%]
tests/unit/test_connection.py::TestLoadConfig::test_load_config_empty_file PASSED [ 48%]
tests/unit/test_connection.py::TestCreateConnection::test_create_connection_success PASSED [ 48%]
tests/unit/test_connection.py::TestCreateConnection::test_create_connection_defaults PASSED [ 49%]
tests/unit/test_connection.py::TestCreateConnection::test_create_connection_no_database_section PASSED [ 49%]
tests/unit/test_connection.py::TestCreateConnection::test_create_connection_error PASSED [ 49%]
tests/unit/test_connection.py::TestLoadMigrationModule::test_load_migration_module_success PASSED [ 49%]
tests/unit/test_connection.py::TestLoadMigrationModule::test_load_migration_module_invalid_file PASSED [ 49%]
tests/unit/test_connection.py::TestLoadMigrationModule::test_load_migration_module_import_error PASSED [ 49%]
tests/unit/test_connection.py::TestGetMigrationClass::test_get_migration_class_success PASSED [ 49%]
tests/unit/test_connection.py::TestGetMigrationClass::test_get_migration_class_no_migration PASSED [ 49%]
tests/unit/test_connection.py::TestGetMigrationClass::test_get_migration_class_multiple_migrations PASSED [ 50%]
tests/unit/test_differ.py::TestSQLParser::test_parse_simple_create_table PASSED [ 50%]
tests/unit/test_differ.py::TestSQLParser::test_parse_create_table_with_not_null PASSED [ 50%]
tests/unit/test_differ.py::TestSQLParser::test_parse_multiple_tables PASSED [ 50%]
tests/unit/test_differ.py::TestSQLParser::test_parse_with_default_values PASSED [ 50%]
tests/unit/test_differ.py::TestSQLParser::test_parse_ignores_non_create_statements PASSED [ 50%]
tests/unit/test_differ.py::TestSQLParser::test_parse_empty_sql PASSED    [ 50%]
tests/unit/test_differ.py::TestSQLParser::test_parse_comments_in_sql PASSED [ 50%]
tests/unit/test_differ.py::TestSchemaDiffAlgorithm::test_compare_identical_schemas PASSED [ 50%]
tests/unit/test_differ.py::TestSchemaDiffAlgorithm::test_detect_new_table PASSED [ 51%]
tests/unit/test_differ.py::TestSchemaDiffAlgorithm::test_detect_dropped_table PASSED [ 51%]
tests/unit/test_differ.py::TestSchemaDiffAlgorithm::test_detect_new_column PASSED [ 51%]
tests/unit/test_differ.py::TestSchemaDiffAlgorithm::test_detect_dropped_column PASSED [ 51%]
tests/unit/test_differ.py::TestSchemaDiffAlgorithm::test_detect_column_type_change PASSED [ 51%]
tests/unit/test_differ.py::TestSchemaDiffAlgorithm::test_detect_column_rename PASSED [ 51%]
tests/unit/test_differ.py::TestSchemaDiffAlgorithm::test_detect_nullable_change PASSED [ 51%]
tests/unit/test_differ.py::TestSchemaDiffAlgorithm::test_detect_default_change PASSED [ 51%]
tests/unit/test_differ.py::TestSchemaDiffAlgorithm::test_detect_multiple_changes PASSED [ 51%]
tests/unit/test_differ.py::TestSchemaDiffAlgorithm::test_compare_empty_schemas PASSED [ 52%]
tests/unit/test_differ.py::TestSchemaDiffAlgorithm::test_compare_with_table_rename PASSED [ 52%]
tests/unit/test_dry_run.py::TestDryRunMode::test_dry_run_executor_can_test_migration_in_transaction PASSED [ 52%]
tests/unit/test_dry_run.py::TestDryRunMode::test_dry_run_result_contains_execution_metrics PASSED [ 52%]
tests/unit/test_dry_run.py::TestDryRunMode::test_dry_run_detects_constraint_violations PASSED [ 52%]
tests/unit/test_dry_run.py::TestDryRunMode::test_dry_run_captures_lock_times PASSED [ 52%]
tests/unit/test_dry_run.py::TestDryRunMode::test_dry_run_estimates_production_time PASSED [ 52%]
tests/unit/test_dry_run.py::TestDryRunMode::test_dry_run_provides_confidence_level PASSED [ 52%]
tests/unit/test_dry_run.py::TestDryRunMode::test_dry_run_automatic_rollback PASSED [ 53%]
tests/unit/test_dry_run.py::TestDryRunMode::test_dry_run_comparison_with_production PASSED [ 53%]
tests/unit/test_dry_run.py::TestDryRunMode::test_migration_integrates_with_dry_run_executor PASSED [ 53%]
tests/unit/test_dynamic_discovery.py::test_auto_discover_skips_missing_directories PASSED [ 53%]
tests/unit/test_dynamic_discovery.py::test_exclude_patterns PASSED       [ 53%]
tests/unit/test_dynamic_discovery.py::test_include_patterns PASSED       [ 53%]
tests/unit/test_dynamic_discovery.py::test_custom_include_patterns PASSED [ 53%]
tests/unit/test_dynamic_discovery.py::test_non_recursive_with_patterns PASSED [ 53%]
tests/unit/test_dynamic_discovery.py::test_auto_discover_disabled_raises_error PASSED [ 53%]
tests/unit/test_dynamic_discovery.py::test_multiple_include_dirs_with_patterns PASSED [ 54%]
tests/unit/test_entry_points.py::TestHookRegistryEntryPoints::test_hook_registry_has_load_entry_points_method PASSED [ 54%]
tests/unit/test_entry_points.py::TestHookRegistryEntryPoints::test_load_entry_points_called_on_init PASSED [ 54%]
tests/unit/test_entry_points.py::TestHookRegistryEntryPoints::test_load_entry_points_discovers_entry_points PASSED [ 54%]
tests/unit/test_entry_points.py::TestHookRegistryEntryPoints::test_load_entry_points_handles_missing_entry_points PASSED [ 54%]
tests/unit/test_entry_points.py::TestHookRegistryEntryPoints::test_load_entry_points_handles_load_failure_gracefully PASSED [ 54%]
tests/unit/test_entry_points.py::TestHookRegistryEntryPoints::test_load_entry_points_handles_type_error_gracefully PASSED [ 54%]
tests/unit/test_entry_points.py::TestHookRegistryEntryPoints::test_load_entry_points_supports_python_3_9_compatibility PASSED [ 54%]
tests/unit/test_entry_points.py::TestHookRegistryEntryPoints::test_manual_registration_still_works_with_entry_points PASSED [ 55%]
tests/unit/test_entry_points.py::TestHookRegistryEntryPoints::test_entry_points_and_manual_registration_coexist PASSED [ 55%]
tests/unit/test_entry_points.py::TestHookRegistryEntryPoints::test_load_entry_points_logs_failures PASSED [ 55%]
tests/unit/test_entry_points.py::TestHookRegistryEntryPoints::test_load_entry_points_with_multiple_hooks PASSED [ 55%]
tests/unit/test_foreign_key_consistency.py::TestGlobalSeedConsistency::test_same_email_same_hash_in_different_tables PASSED [ 55%]
tests/unit/test_foreign_key_consistency.py::TestGlobalSeedConsistency::test_different_emails_different_hashes_with_global_seed PASSED [ 55%]
tests/unit/test_foreign_key_consistency.py::TestGlobalSeedConsistency::test_hash_strategy_global_seed_consistency PASSED [ 55%]
tests/unit/test_foreign_key_consistency.py::TestGlobalSeedConsistency::test_multiple_tables_same_global_seed PASSED [ 55%]
tests/unit/test_foreign_key_consistency.py::TestGlobalSeedConsistency::test_column_seed_override_precedence PASSED [ 55%]
tests/unit/test_foreign_key_consistency.py::TestGlobalSeedConsistency::test_column_seed_override_creates_different_hash PASSED [ 56%]
tests/unit/test_foreign_key_consistency.py::TestForeignKeyIntegration::test_user_id_consistency_across_tables PASSED [ 56%]
tests/unit/test_foreign_key_consistency.py::TestForeignKeyIntegration::test_email_consistency_across_users_and_orders PASSED [ 56%]
tests/unit/test_foreign_key_consistency.py::TestForeignKeyIntegration::test_three_table_consistency PASSED [ 56%]
tests/unit/test_foreign_key_consistency.py::TestForeignKeyIntegration::test_no_consistency_without_global_seed PASSED [ 56%]
tests/unit/test_foreign_key_consistency.py::TestSeedPrecedence::test_column_seed_highest_priority PASSED [ 56%]
tests/unit/test_foreign_key_consistency.py::TestSeedPrecedence::test_global_seed_second_priority PASSED [ 56%]
tests/unit/test_foreign_key_consistency.py::TestSeedPrecedence::test_default_seed_lowest_priority PASSED [ 56%]
tests/unit/test_foreign_key_consistency.py::TestSeedPrecedence::test_precedence_order_complex_scenario PASSED [ 56%]
tests/unit/test_foreign_key_consistency.py::TestRealWorldScenarios::test_ecommerce_schema_consistency PASSED [ 57%]
tests/unit/test_foreign_key_consistency.py::TestRealWorldScenarios::test_multi_tenant_schema_with_overrides PASSED [ 57%]
tests/unit/test_hooks.py::TestHookSystem::test_hook_base_class_can_be_defined PASSED [ 57%]
tests/unit/test_hooks.py::TestHookSystem::test_hook_phases_enum_exists PASSED [ 57%]
tests/unit/test_hooks.py::TestHookSystem::test_hook_result_dataclass PASSED [ 57%]
tests/unit/test_hooks.py::TestHookSystem::test_hook_executor_runs_hooks_in_sequence PASSED [ 57%]
tests/unit/test_hooks.py::TestHookSystem::test_hook_context_provides_migration_data PASSED [ 57%]
tests/unit/test_hooks.py::TestHookSystem::test_hook_error_is_rolled_back_via_savepoint PASSED [ 57%]
tests/unit/test_hooks.py::TestHookSystem::test_migration_can_define_hooks PASSED [ 58%]
tests/unit/test_hooks.py::TestHookSystem::test_hook_registry_registration PASSED [ 58%]
tests/unit/test_hooks.py::TestHookSystem::test_global_hook_registration PASSED [ 58%]
tests/unit/test_init.py::TestPackageMetadata::test_version_exists PASSED [ 58%]
tests/unit/test_init.py::TestPackageMetadata::test_author_exists PASSED  [ 58%]
tests/unit/test_init.py::TestPackageMetadata::test_email_exists PASSED   [ 58%]
tests/unit/test_init.py::TestLazyImports::test_lazy_import_schema_builder PASSED [ 58%]
tests/unit/test_init.py::TestLazyImports::test_lazy_import_migrator PASSED [ 58%]
tests/unit/test_init.py::TestLazyImports::test_lazy_import_environment PASSED [ 58%]
tests/unit/test_init.py::TestLazyImports::test_lazy_import_invalid_attribute PASSED [ 59%]
tests/unit/test_init.py::TestLazyImports::test_lazy_import_preserves_functionality PASSED [ 59%]
tests/unit/test_init.py::TestPackageAll::test_all_exports_metadata PASSED [ 59%]
tests/unit/test_init.py::TestPackageAll::test_all_is_list PASSED         [ 59%]
tests/unit/test_init.py::TestPackageAll::test_can_import_from_all PASSED [ 59%]
tests/unit/test_lint_cli.py::TestLintCommand::test_lint_command_basic PASSED [ 59%]
tests/unit/test_lint_cli.py::TestLintCommand::test_lint_command_with_env PASSED [ 59%]
tests/unit/test_lint_cli.py::TestLintCommand::test_lint_command_with_errors_fail_on_error PASSED [ 59%]
tests/unit/test_lint_cli.py::TestLintCommand::test_lint_command_with_warnings_fail_on_warning PASSED [ 60%]
tests/unit/test_lint_cli.py::TestLintCommand::test_lint_command_with_warnings_no_fail PASSED [ 60%]
tests/unit/test_lint_cli.py::TestLintCommand::test_lint_command_json_format PASSED [ 60%]
tests/unit/test_lint_cli.py::TestLintCommand::test_lint_command_csv_format PASSED [ 60%]
tests/unit/test_lint_cli.py::TestLintCommand::test_lint_command_save_json_output PASSED [ 60%]
tests/unit/test_lint_cli.py::TestLintCommand::test_lint_command_invalid_format PASSED [ 60%]
tests/unit/test_linting_core.py::TestLintRuleBase::test_lint_rule_is_abstract PASSED [ 60%]
tests/unit/test_linting_core.py::TestLintRuleBase::test_lint_rule_subclass_requires_lint_method PASSED [ 60%]
tests/unit/test_linting_core.py::TestLintRuleBase::test_lint_rule_subclass_can_be_created PASSED [ 60%]
tests/unit/test_linting_core.py::TestSchemaLinter::test_schema_linter_initialization_with_default_config PASSED [ 61%]
tests/unit/test_linting_core.py::TestSchemaLinter::test_schema_linter_initialization_with_custom_config PASSED [ 61%]
tests/unit/test_linting_core.py::TestSchemaLinter::test_schema_linter_registers_all_rules PASSED [ 61%]
tests/unit/test_linting_core.py::TestSchemaLinter::test_schema_linter_all_rules_are_lint_rule_instances PASSED [ 61%]
tests/unit/test_linting_core.py::TestSchemaLinter::test_schema_linter_lint_returns_lint_report PASSED [ 61%]
tests/unit/test_linting_core.py::TestSchemaLinter::test_schema_linter_report_has_violation_counts PASSED [ 61%]
tests/unit/test_linting_core.py::TestSchemaLinter::test_schema_linter_respects_excluded_tables PASSED [ 61%]
tests/unit/test_linting_core.py::TestSchemaLinter::test_schema_linter_disabled_linting PASSED [ 61%]
tests/unit/test_linting_models.py::TestLintSeverity::test_severity_values PASSED [ 62%]
tests/unit/test_linting_models.py::TestLintSeverity::test_severity_string_comparison PASSED [ 62%]
tests/unit/test_linting_models.py::TestViolation::test_violation_creation_minimal PASSED [ 62%]
tests/unit/test_linting_models.py::TestViolation::test_violation_creation_with_suggested_fix PASSED [ 62%]
tests/unit/test_linting_models.py::TestViolation::test_violation_string_representation PASSED [ 62%]
tests/unit/test_linting_models.py::TestLintConfig::test_lint_config_default PASSED [ 62%]
tests/unit/test_linting_models.py::TestLintConfig::test_lint_config_default_has_all_rules PASSED [ 62%]
tests/unit/test_linting_models.py::TestLintConfig::test_lint_config_default_naming_convention PASSED [ 62%]
tests/unit/test_linting_models.py::TestLintConfig::test_lint_config_default_multi_tenant PASSED [ 62%]
tests/unit/test_linting_models.py::TestLintConfig::test_lint_config_custom PASSED [ 63%]
tests/unit/test_linting_models.py::TestLintConfig::test_lint_config_exclude_tables PASSED [ 63%]
tests/unit/test_linting_models.py::TestLintConfig::test_lint_config_fail_modes PASSED [ 63%]
tests/unit/test_linting_models.py::TestLintConfig::test_lint_config_disabled PASSED [ 63%]
tests/unit/test_linting_models.py::TestLintReport::test_lint_report_creation PASSED [ 63%]
tests/unit/test_linting_models.py::TestLintReport::test_lint_report_has_errors_property PASSED [ 63%]
tests/unit/test_linting_models.py::TestLintReport::test_lint_report_has_warnings_property PASSED [ 63%]
tests/unit/test_linting_models.py::TestLintReport::test_lint_report_violations_by_severity PASSED [ 63%]
tests/unit/test_linting_models.py::TestLintReport::test_lint_report_empty_violations PASSED [ 63%]
tests/unit/test_linting_models.py::TestLintReport::test_lint_report_string_representation PASSED [ 64%]
tests/unit/test_linting_rules.py::TestNamingConventionRule::test_naming_rule_detects_camel_case_table PASSED [ 64%]
tests/unit/test_linting_rules.py::TestNamingConventionRule::test_naming_rule_detects_camel_case_columns PASSED [ 64%]
tests/unit/test_linting_rules.py::TestNamingConventionRule::test_naming_rule_accepts_snake_case PASSED [ 64%]
tests/unit/test_linting_rules.py::TestNamingConventionRule::test_naming_rule_suggests_fix PASSED [ 64%]
tests/unit/test_linting_rules.py::TestPrimaryKeyRule::test_primary_key_rule_detects_missing_pk PASSED [ 64%]
tests/unit/test_linting_rules.py::TestPrimaryKeyRule::test_primary_key_rule_accepts_tables_with_pk PASSED [ 64%]
tests/unit/test_linting_rules.py::TestPrimaryKeyRule::test_primary_key_rule_skips_system_tables PASSED [ 64%]
tests/unit/test_linting_rules.py::TestDocumentationRule::test_documentation_rule_detects_missing_comment PASSED [ 65%]
tests/unit/test_linting_rules.py::TestDocumentationRule::test_documentation_rule_accepts_commented_tables PASSED [ 65%]
tests/unit/test_linting_rules.py::TestDocumentationRule::test_documentation_rule_rejects_empty_comment PASSED [ 65%]
tests/unit/test_linting_rules.py::TestDocumentationRule::test_documentation_rule_suggests_fix PASSED [ 65%]
tests/unit/test_linting_rules.py::TestMultiTenantRule::test_multi_tenant_rule_detects_missing_tenant_id PASSED [ 65%]
tests/unit/test_linting_rules.py::TestMultiTenantRule::test_multi_tenant_rule_accepts_with_tenant_id PASSED [ 65%]
tests/unit/test_linting_rules.py::TestMultiTenantRule::test_multi_tenant_rule_custom_identifier PASSED [ 65%]
tests/unit/test_linting_rules.py::TestMultiTenantRule::test_multi_tenant_rule_skips_non_multi_tenant_tables PASSED [ 65%]
tests/unit/test_linting_rules.py::TestMissingIndexRule::test_missing_index_rule_detects_unindexed_fk PASSED [ 65%]
tests/unit/test_linting_rules.py::TestMissingIndexRule::test_missing_index_rule_accepts_indexed_fk PASSED [ 66%]
tests/unit/test_linting_rules.py::TestMissingIndexRule::test_missing_index_rule_ignores_non_fk_columns PASSED [ 66%]
tests/unit/test_linting_rules.py::TestSecurityRule::test_security_rule_detects_password_column PASSED [ 66%]
tests/unit/test_linting_rules.py::TestSecurityRule::test_security_rule_detects_token_column PASSED [ 66%]
tests/unit/test_linting_rules.py::TestSecurityRule::test_security_rule_detects_secret_column PASSED [ 66%]
tests/unit/test_linting_rules.py::TestSecurityRule::test_security_rule_ignores_non_sensitive_columns PASSED [ 66%]
tests/unit/test_linting_rules.py::TestSecurityRule::test_security_rule_suggests_hashing_for_passwords PASSED [ 66%]
tests/unit/test_logging.py::TestHookExecutorLogging::test_hook_executor_has_logger PASSED [ 66%]
tests/unit/test_logging.py::TestHookExecutorLogging::test_hook_executor_logs_phase_start PASSED [ 67%]
tests/unit/test_logging.py::TestHookExecutorLogging::test_hook_executor_logs_hook_completion PASSED [ 67%]
tests/unit/test_logging.py::TestHookExecutorLogging::test_hook_executor_logs_hook_failure PASSED [ 67%]
tests/unit/test_logging.py::TestHookExecutorLogging::test_hook_executor_logs_execution_time PASSED [ 67%]
tests/unit/test_logging.py::TestHookExecutorLogging::test_hook_executor_logs_migration_context PASSED [ 67%]
tests/unit/test_logging.py::TestHookExecutorLogging::test_hook_executor_logs_multiple_hooks PASSED [ 67%]
tests/unit/test_logging.py::TestHookExecutorLogging::test_hook_executor_logs_rows_affected PASSED [ 67%]
tests/unit/test_logging.py::TestDryRunExecutorLogging::test_dry_run_executor_has_logger PASSED [ 67%]
tests/unit/test_logging.py::TestDryRunExecutorLogging::test_dry_run_executor_logs_dry_run_start PASSED [ 67%]
tests/unit/test_logging.py::TestDryRunExecutorLogging::test_dry_run_executor_logs_dry_run_completion PASSED [ 68%]
tests/unit/test_logging.py::TestDryRunExecutorLogging::test_dry_run_executor_logs_execution_time PASSED [ 68%]
tests/unit/test_logging.py::TestDryRunExecutorLogging::test_dry_run_executor_logs_failure PASSED [ 68%]
tests/unit/test_logging.py::TestDryRunExecutorLogging::test_dry_run_executor_logs_migration_context PASSED [ 68%]
tests/unit/test_logging.py::TestDryRunExecutorLogging::test_dry_run_executor_logs_success_flag PASSED [ 68%]
tests/unit/test_migration.py::TestMigrationBase::test_migration_base_class PASSED [ 68%]
tests/unit/test_migration.py::TestMigrationBase::test_migration_requires_version_and_name PASSED [ 68%]
tests/unit/test_migration.py::TestMigrationBase::test_execute_runs_sql PASSED [ 68%]
tests/unit/test_migration.py::TestMigrationBase::test_migration_must_implement_up_and_down PASSED [ 68%]
tests/unit/test_migration_edge_cases.py::TestMigrationEdgeCases::test_migration_without_version PASSED [ 69%]
tests/unit/test_migration_edge_cases.py::TestMigrationEdgeCases::test_execute_with_sql_error PASSED [ 69%]
tests/unit/test_migration_edge_cases.py::TestMigrationEdgeCases::test_execute_with_sql_error_and_params PASSED [ 69%]
tests/unit/test_migration_edge_cases.py::TestMigrationEdgeCases::test_migration_with_multiple_sql_statements_error_reporting PASSED [ 69%]
tests/unit/test_migration_generator.py::TestMigrationGenerator::test_generate_migration_creates_file PASSED [ 69%]
tests/unit/test_migration_generator.py::TestMigrationGenerator::test_generate_migration_with_version_number PASSED [ 69%]
tests/unit/test_migration_generator.py::TestMigrationGenerator::test_generate_migration_for_add_table PASSED [ 69%]
tests/unit/test_migration_generator.py::TestMigrationGenerator::test_generate_migration_for_drop_table PASSED [ 69%]
tests/unit/test_migration_generator.py::TestMigrationGenerator::test_generate_migration_for_add_column PASSED [ 70%]
tests/unit/test_migration_generator.py::TestMigrationGenerator::test_generate_migration_for_drop_column PASSED [ 70%]
tests/unit/test_migration_generator.py::TestMigrationGenerator::test_generate_migration_for_rename_column PASSED [ 70%]
tests/unit/test_migration_generator.py::TestMigrationGenerator::test_generate_migration_for_change_column_type PASSED [ 70%]
tests/unit/test_migration_generator.py::TestMigrationGenerator::test_generate_migration_for_change_nullable PASSED [ 70%]
tests/unit/test_migration_generator.py::TestMigrationGenerator::test_generate_migration_for_change_default PASSED [ 70%]
tests/unit/test_migration_generator.py::TestMigrationGenerator::test_generate_migration_with_multiple_changes PASSED [ 70%]
tests/unit/test_migration_generator.py::TestMigrationGenerator::test_generate_migration_empty_diff PASSED [ 70%]
tests/unit/test_migration_generator.py::TestMigrationGenerator::test_migration_file_is_valid_python PASSED [ 70%]
tests/unit/test_migration_generator.py::TestMigrationGenerator::test_get_next_version_empty_dir PASSED [ 71%]
tests/unit/test_migration_generator.py::TestMigrationGenerator::test_get_next_version_with_existing PASSED [ 71%]
tests/unit/test_migration_generator.py::TestMigrationGenerator::test_to_class_name_conversion PASSED [ 71%]
tests/unit/test_migration_generator_edge_cases.py::TestMigrationGeneratorEdgeCases::test_generate_with_existing_directory PASSED [ 71%]
tests/unit/test_migration_generator_edge_cases.py::TestMigrationGeneratorEdgeCases::test_to_class_name_edge_cases PASSED [ 71%]
tests/unit/test_migration_generator_edge_cases.py::TestMigrationGeneratorEdgeCases::test_change_to_up_sql_all_types PASSED [ 71%]
tests/unit/test_migration_generator_edge_cases.py::TestMigrationGeneratorEdgeCases::test_change_to_down_sql_all_types PASSED [ 71%]
tests/unit/test_migration_generator_edge_cases.py::TestMigrationGeneratorEdgeCases::test_generate_migration_with_complex_diff PASSED [ 71%]
tests/unit/test_migration_generator_edge_cases.py::TestMigrationGeneratorEdgeCases::test_get_next_version_with_gaps PASSED [ 72%]
tests/unit/test_migration_generator_edge_cases.py::TestMigrationGeneratorEdgeCases::test_get_next_version_empty_directory PASSED [ 72%]
tests/unit/test_migrator_discovery.py::TestMigrationDiscovery::test_find_migration_files PASSED [ 72%]
tests/unit/test_migrator_discovery.py::TestMigrationDiscovery::test_find_pending_migrations_empty PASSED [ 72%]
tests/unit/test_migrator_discovery.py::TestMigrationDiscovery::test_find_pending_migrations_with_applied PASSED [ 72%]
tests/unit/test_migrator_discovery.py::TestMigrationDiscovery::test_version_from_filename PASSED [ 72%]
tests/unit/test_migrator_discovery.py::TestMigrationDiscovery::test_empty_migrations_directory PASSED [ 72%]
tests/unit/test_migrator_edge_cases.py::TestMigratorInitializeEdgeCases::test_initialize_with_commit_error PASSED [ 72%]
tests/unit/test_migrator_edge_cases.py::TestMigratorInitializeEdgeCases::test_initialize_is_idempotent PASSED [ 72%]
tests/unit/test_migrator_edge_cases.py::TestMigratorApplyEdgeCases::test_apply_already_applied_migration PASSED [ 73%]
tests/unit/test_migrator_edge_cases.py::TestMigratorApplyEdgeCases::test_apply_with_up_failure PASSED [ 73%]
tests/unit/test_migrator_edge_cases.py::TestMigratorRollbackEdgeCases::test_rollback_not_applied_migration PASSED [ 73%]
tests/unit/test_migrator_edge_cases.py::TestMigratorRollbackEdgeCases::test_rollback_with_down_failure PASSED [ 73%]
tests/unit/test_migrator_edge_cases.py::TestMigratorIsApplied::test_is_applied_with_none_result PASSED [ 73%]
tests/unit/test_migrator_edge_cases.py::TestMigratorFindMigrationFiles::test_find_migration_files_nonexistent_dir PASSED [ 73%]
tests/unit/test_migrator_edge_cases.py::TestMigratorVersionExtraction::test_version_from_filename_various_formats PASSED [ 73%]
tests/unit/test_performance.py::TestPerformanceMetric::test_metric_creation PASSED [ 73%]
tests/unit/test_performance.py::TestPerformanceMetric::test_throughput_calculation PASSED [ 74%]
tests/unit/test_performance.py::TestPerformanceMetric::test_throughput_zero_duration PASSED [ 74%]
tests/unit/test_performance.py::TestPerformanceMetric::test_metric_with_error PASSED [ 74%]
tests/unit/test_performance.py::TestPerformanceMonitor::test_monitor_creation PASSED [ 74%]
tests/unit/test_performance.py::TestPerformanceMonitor::test_record_metric PASSED [ 74%]
tests/unit/test_performance.py::TestPerformanceMonitor::test_get_statistics_single_operation PASSED [ 74%]
tests/unit/test_performance.py::TestPerformanceMonitor::test_get_statistics_multiple_operations PASSED [ 74%]
tests/unit/test_performance.py::TestPerformanceMonitor::test_error_rate_calculation PASSED [ 74%]
tests/unit/test_performance.py::TestPerformanceMonitor::test_cleanup_old_metrics PASSED [ 74%]
tests/unit/test_performance.py::TestPerformanceMonitor::test_set_and_check_baseline PASSED [ 75%]
tests/unit/test_performance.py::TestPerformanceMonitor::test_check_regression_nonexistent_baseline PASSED [ 75%]
tests/unit/test_performance.py::TestCacheEntry::test_cache_entry_creation PASSED [ 75%]
tests/unit/test_performance.py::TestCacheEntry::test_cache_entry_expiration PASSED [ 75%]
tests/unit/test_performance.py::TestCacheEntry::test_cache_entry_access_tracking PASSED [ 75%]
tests/unit/test_performance.py::TestAnonymizationCache::test_cache_creation PASSED [ 75%]
tests/unit/test_performance.py::TestAnonymizationCache::test_cache_set_and_get PASSED [ 75%]
tests/unit/test_performance.py::TestAnonymizationCache::test_cache_miss PASSED [ 75%]
tests/unit/test_performance.py::TestAnonymizationCache::test_cache_hit_rate PASSED [ 75%]
tests/unit/test_performance.py::TestAnonymizationCache::test_cache_lru_eviction PASSED [ 76%]
tests/unit/test_performance.py::TestAnonymizationCache::test_cache_ttl_expiration PASSED [ 76%]
tests/unit/test_performance.py::TestAnonymizationCache::test_cache_clear PASSED [ 76%]
tests/unit/test_performance.py::TestAnonymizationCache::test_cache_statistics PASSED [ 76%]
tests/unit/test_performance.py::TestCacheStatistics::test_hit_rate_calculation PASSED [ 76%]
tests/unit/test_performance.py::TestCacheStatistics::test_hit_rate_no_operations PASSED [ 76%]
tests/unit/test_performance.py::TestConnectionPoolManager::test_pool_creation PASSED [ 76%]
tests/unit/test_performance.py::TestConnectionPoolManager::test_pool_initialization PASSED [ 76%]
tests/unit/test_performance.py::TestConnectionPoolManager::test_borrow_connection PASSED [ 77%]
tests/unit/test_performance.py::TestConnectionPoolManager::test_return_connection PASSED [ 77%]
tests/unit/test_performance.py::TestConnectionPoolManager::test_pool_close_all PASSED [ 77%]
tests/unit/test_performance.py::TestQueryOptimizer::test_optimizer_creation PASSED [ 77%]
tests/unit/test_performance.py::TestQueryOptimizer::test_recommend_indexes PASSED [ 77%]
tests/unit/test_performance.py::TestQueryOptimizer::test_get_statistics PASSED [ 77%]
tests/unit/test_performance.py::TestBatchAnonymizer::test_batch_anonymizer_creation PASSED [ 77%]
tests/unit/test_performance.py::TestBatchAnonymizer::test_batch_anonymizer_with_monitor PASSED [ 77%]
tests/unit/test_performance.py::TestConcurrentAnonymizer::test_concurrent_anonymizer_creation PASSED [ 77%]
tests/unit/test_performance.py::TestConcurrentAnonymizer::test_concurrent_anonymizer_with_monitor PASSED [ 78%]
tests/unit/test_performance.py::TestPerformanceOptimizationIntegration::test_monitor_batch_anonymization PASSED [ 78%]
tests/unit/test_performance.py::TestPerformanceOptimizationIntegration::test_cache_improves_performance PASSED [ 78%]
tests/unit/test_performance.py::TestPerformanceOptimizationIntegration::test_performance_monitoring_end_to_end PASSED [ 78%]
tests/unit/test_phase2_compliance.py::TestComplianceModuleStructure::test_compliance_module_exists PASSED [ 78%]
tests/unit/test_phase2_compliance.py::TestComplianceModuleStructure::test_breach_notification_module_exists PASSED [ 78%]
tests/unit/test_phase2_compliance.py::TestComplianceModuleStructure::test_data_subject_rights_module_exists PASSED [ 78%]
tests/unit/test_phase2_compliance.py::TestRegulationCoverage::test_seven_regulations_defined PASSED [ 78%]
tests/unit/test_phase2_compliance.py::TestRegulationCoverage::test_gdpr_coverage PASSED [ 79%]
tests/unit/test_phase2_compliance.py::TestRegulationCoverage::test_ccpa_rights PASSED [ 79%]
tests/unit/test_phase2_compliance.py::TestRegulationCoverage::test_pipeda_principles PASSED [ 79%]
tests/unit/test_phase2_compliance.py::TestRegulationCoverage::test_lgpd_coverage PASSED [ 79%]
tests/unit/test_phase2_compliance.py::TestRegulationCoverage::test_pipl_principles PASSED [ 79%]
tests/unit/test_phase2_compliance.py::TestRegulationCoverage::test_privacy_act_principles PASSED [ 79%]
tests/unit/test_phase2_compliance.py::TestRegulationCoverage::test_popia_principles PASSED [ 79%]
tests/unit/test_phase2_compliance.py::TestDataSubjectRights::test_access_right PASSED [ 79%]
tests/unit/test_phase2_compliance.py::TestDataSubjectRights::test_erasure_right PASSED [ 79%]
tests/unit/test_phase2_compliance.py::TestDataSubjectRights::test_rectification_right PASSED [ 80%]
tests/unit/test_phase2_compliance.py::TestDataSubjectRights::test_portability_right PASSED [ 80%]
tests/unit/test_phase2_compliance.py::TestDataSubjectRights::test_restrict_right PASSED [ 80%]
tests/unit/test_phase2_compliance.py::TestDataSubjectRights::test_object_right PASSED [ 80%]
tests/unit/test_phase2_compliance.py::TestBreachNotification::test_gdpr_breach_timeline PASSED [ 80%]
tests/unit/test_phase2_compliance.py::TestBreachNotification::test_ccpa_breach_timeline PASSED [ 80%]
tests/unit/test_phase2_compliance.py::TestBreachNotification::test_pipeda_breach_timeline PASSED [ 80%]
tests/unit/test_phase2_compliance.py::TestBreachNotification::test_lgpd_breach_timeline PASSED [ 80%]
tests/unit/test_phase2_compliance.py::TestBreachNotification::test_breach_severity_levels PASSED [ 81%]
tests/unit/test_phase2_compliance.py::TestBreachNotification::test_breach_impact_assessment PASSED [ 81%]
tests/unit/test_phase2_compliance.py::TestComplianceMonitoring::test_audit_trail_requirement PASSED [ 81%]
tests/unit/test_phase2_compliance.py::TestComplianceMonitoring::test_cross_regulation_compliance_matrix PASSED [ 81%]
tests/unit/test_phase2_compliance.py::TestComplianceMonitoring::test_compliance_percentage_calculation PASSED [ 81%]
tests/unit/test_phase2_compliance.py::TestComplianceMonitoring::test_remediation_recommendations PASSED [ 81%]
tests/unit/test_phase2_compliance.py::TestAnonymizationStrategy::test_strategy_reversibility_tracking PASSED [ 81%]
tests/unit/test_phase2_compliance.py::TestAnonymizationStrategy::test_strategy_kms_requirement PASSED [ 81%]
tests/unit/test_phase2_compliance.py::TestAnonymizationStrategy::test_strategy_audit_trail PASSED [ 81%]
tests/unit/test_phase2_compliance.py::TestDifferentialPrivacyCompliance::test_epsilon_privacy_level_gdpr PASSED [ 82%]
tests/unit/test_phase2_compliance.py::TestDifferentialPrivacyCompliance::test_differential_privacy_aggregate_only PASSED [ 82%]
tests/unit/test_phase2_compliance.py::TestDifferentialPrivacyCompliance::test_differential_privacy_not_for_individuals PASSED [ 82%]
tests/unit/test_phase2_compliance.py::TestTokenizationCompliance::test_token_reversal_rbac PASSED [ 82%]
tests/unit/test_phase2_compliance.py::TestTokenizationCompliance::test_token_reversal_audit PASSED [ 82%]
tests/unit/test_phase2_compliance.py::TestTokenizationCompliance::test_token_expiration PASSED [ 82%]
tests/unit/test_phase2_compliance.py::TestGovernancePipelineCompliance::test_five_phase_pipeline PASSED [ 82%]
tests/unit/test_phase2_compliance.py::TestGovernancePipelineCompliance::test_pre_validation_checks PASSED [ 82%]
tests/unit/test_phase2_compliance.py::TestGovernancePipelineCompliance::test_post_anonymization_verification PASSED [ 82%]
tests/unit/test_phase2_compliance.py::TestSecurityFoundationsCompliance::test_kms_integration PASSED [ 83%]
tests/unit/test_phase2_compliance.py::TestSecurityFoundationsCompliance::test_encryption_algorithm PASSED [ 83%]
tests/unit/test_phase2_compliance.py::TestSecurityFoundationsCompliance::test_lineage_tamper_protection PASSED [ 83%]
tests/unit/test_phase2_compliance.py::TestSecurityFoundationsCompliance::test_token_store_encryption PASSED [ 83%]
tests/unit/test_recursive_directories.py::test_recursive_directory_discovery PASSED [ 83%]
tests/unit/test_recursive_directories.py::test_non_recursive_discovery PASSED [ 83%]
tests/unit/test_recursive_directories.py::test_mixed_recursive_and_non_recursive PASSED [ 83%]
tests/unit/test_recursive_directories.py::test_directory_ordering PASSED [ 83%]
tests/unit/test_recursive_directories.py::test_backward_compatibility_string_format PASSED [ 84%]
tests/unit/test_recursive_directories.py::test_include_configs_structure PASSED [ 84%]
tests/unit/test_report_generator.py::TestDryRunResult::test_dry_run_result_creation PASSED [ 84%]
tests/unit/test_report_generator.py::TestDryRunResult::test_dry_run_result_defaults PASSED [ 84%]
tests/unit/test_schema_models.py::TestColumn::test_column_creation PASSED [ 84%]
tests/unit/test_schema_models.py::TestColumn::test_column_equality_same PASSED [ 84%]
tests/unit/test_schema_models.py::TestColumn::test_column_equality_different_name PASSED [ 84%]
tests/unit/test_schema_models.py::TestColumn::test_column_equality_different_type PASSED [ 84%]
tests/unit/test_schema_models.py::TestColumn::test_column_equality_not_column PASSED [ 84%]
tests/unit/test_schema_models.py::TestColumn::test_column_hash PASSED    [ 85%]
tests/unit/test_schema_models.py::TestColumn::test_column_with_default PASSED [ 85%]
tests/unit/test_schema_models.py::TestTable::test_table_creation PASSED  [ 85%]
tests/unit/test_schema_models.py::TestTable::test_table_with_columns PASSED [ 85%]
tests/unit/test_schema_models.py::TestTable::test_get_column_exists PASSED [ 85%]
tests/unit/test_schema_models.py::TestTable::test_get_column_not_exists PASSED [ 85%]
tests/unit/test_schema_models.py::TestTable::test_has_column_exists PASSED [ 85%]
tests/unit/test_schema_models.py::TestTable::test_has_column_not_exists PASSED [ 85%]
tests/unit/test_schema_models.py::TestTable::test_table_equality_same PASSED [ 86%]
tests/unit/test_schema_models.py::TestTable::test_table_equality_different_name PASSED [ 86%]
tests/unit/test_schema_models.py::TestTable::test_table_equality_different_columns PASSED [ 86%]
tests/unit/test_schema_models.py::TestTable::test_table_equality_not_table PASSED [ 86%]
tests/unit/test_schema_models.py::TestSchema::test_schema_creation PASSED [ 86%]
tests/unit/test_schema_models.py::TestSchema::test_schema_with_tables PASSED [ 86%]
tests/unit/test_schema_models.py::TestSchema::test_get_table_exists PASSED [ 86%]
tests/unit/test_schema_models.py::TestSchema::test_get_table_not_exists PASSED [ 86%]
tests/unit/test_schema_models.py::TestSchema::test_has_table_exists PASSED [ 86%]
tests/unit/test_schema_models.py::TestSchema::test_has_table_not_exists PASSED [ 87%]
tests/unit/test_schema_models.py::TestSchema::test_table_names PASSED    [ 87%]
tests/unit/test_schema_models.py::TestSchema::test_table_names_empty PASSED [ 87%]
tests/unit/test_schema_models.py::TestSchemaChange::test_schema_change_creation PASSED [ 87%]
tests/unit/test_schema_models.py::TestSchemaChange::test_str_add_table PASSED [ 87%]
tests/unit/test_schema_models.py::TestSchemaChange::test_str_drop_table PASSED [ 87%]
tests/unit/test_schema_models.py::TestSchemaChange::test_str_rename_table PASSED [ 87%]
tests/unit/test_schema_models.py::TestSchemaChange::test_str_add_column PASSED [ 87%]
tests/unit/test_schema_models.py::TestSchemaChange::test_str_drop_column PASSED [ 87%]
tests/unit/test_schema_models.py::TestSchemaChange::test_str_rename_column PASSED [ 88%]
tests/unit/test_schema_models.py::TestSchemaChange::test_str_change_column_type PASSED [ 88%]
tests/unit/test_schema_models.py::TestSchemaChange::test_str_change_column_nullable PASSED [ 88%]
tests/unit/test_schema_models.py::TestSchemaChange::test_str_change_column_default PASSED [ 88%]
tests/unit/test_schema_models.py::TestSchemaChange::test_str_unknown_type PASSED [ 88%]
tests/unit/test_schema_models.py::TestSchemaDiff::test_schema_diff_creation PASSED [ 88%]
tests/unit/test_schema_models.py::TestSchemaDiff::test_schema_diff_with_changes PASSED [ 88%]
tests/unit/test_schema_models.py::TestSchemaDiff::test_has_changes_true PASSED [ 88%]
tests/unit/test_schema_models.py::TestSchemaDiff::test_has_changes_false PASSED [ 89%]
tests/unit/test_schema_models.py::TestSchemaDiff::test_count_by_type PASSED [ 89%]
tests/unit/test_schema_models.py::TestSchemaDiff::test_str_no_changes PASSED [ 89%]
tests/unit/test_schema_models.py::TestSchemaDiff::test_str_with_changes PASSED [ 89%]
tests/unit/test_schema_to_schema_unit.py::TestConstants::test_large_table_threshold PASSED [ 89%]
tests/unit/test_schema_to_schema_unit.py::TestConstants::test_fdw_throughput PASSED [ 89%]
tests/unit/test_schema_to_schema_unit.py::TestConstants::test_copy_throughput PASSED [ 89%]
tests/unit/test_schema_to_schema_unit.py::TestMigratorInitialization::test_init_with_default_names PASSED [ 89%]
tests/unit/test_schema_to_schema_unit.py::TestMigratorInitialization::test_init_with_custom_names PASSED [ 89%]
tests/unit/test_schema_to_schema_unit.py::TestConnectionParams::test_get_connection_params_extracts_dbname_and_user PASSED [ 90%]
tests/unit/test_schema_to_schema_unit.py::TestConnectionParams::test_get_connection_params_defaults PASSED [ 90%]
tests/unit/test_schema_to_schema_unit.py::TestMigrateTableValidation::test_migrate_table_empty_column_mapping_raises PASSED [ 90%]
tests/unit/test_schema_to_schema_unit.py::TestMigrateTableValidation::test_migrate_table_copy_empty_column_mapping_raises PASSED [ 90%]
tests/unit/test_schema_to_schema_unit.py::TestStrategySelection::test_strategy_for_small_table PASSED [ 90%]
tests/unit/test_schema_to_schema_unit.py::TestStrategySelection::test_strategy_for_large_table PASSED [ 90%]
tests/unit/test_schema_to_schema_unit.py::TestStrategySelection::test_strategy_threshold_boundary PASSED [ 90%]
tests/unit/test_schema_to_schema_unit.py::TestEstimatedTime::test_estimated_time_fdw_strategy PASSED [ 90%]
tests/unit/test_schema_to_schema_unit.py::TestEstimatedTime::test_estimated_time_copy_strategy PASSED [ 91%]
tests/unit/test_schema_to_schema_unit.py::TestEstimatedTime::test_estimated_time_rounding PASSED [ 91%]
tests/unit/test_schema_to_schema_unit.py::TestEstimatedTime::test_estimated_time_zero_rows PASSED [ 91%]
tests/unit/test_schema_to_schema_unit.py::TestVerificationLogic::test_verification_matching_counts PASSED [ 91%]
tests/unit/test_schema_to_schema_unit.py::TestVerificationLogic::test_verification_missing_rows PASSED [ 91%]
tests/unit/test_schema_to_schema_unit.py::TestVerificationLogic::test_verification_extra_rows PASSED [ 91%]
tests/unit/test_schema_to_schema_unit.py::TestVerificationLogic::test_verification_empty_tables PASSED [ 91%]
tests/unit/test_schema_to_schema_unit.py::TestSQLComposition::test_column_mapping_builds_correct_structure PASSED [ 91%]
tests/unit/test_schema_to_schema_unit.py::TestSQLComposition::test_sql_identifiers_used_for_tables PASSED [ 91%]
tests/unit/test_schema_to_schema_unit.py::TestErrorHandling::test_empty_column_mapping_raises_migration_error PASSED [ 92%]
tests/unit/test_schema_to_schema_unit.py::TestErrorHandling::test_migration_error_preserves_context PASSED [ 92%]
tests/unit/test_schema_to_schema_unit.py::TestSQLSafety::test_sql_identifier_type_used PASSED [ 92%]
tests/unit/test_schema_to_schema_unit.py::TestSQLSafety::test_sql_literal_type_used PASSED [ 92%]
tests/unit/test_schema_to_schema_unit.py::TestCleanupLogic::test_cleanup_sql_order PASSED [ 92%]
tests/unit/test_schema_to_schema_unit.py::TestCleanupLogic::test_cleanup_uses_cascade PASSED [ 92%]
tests/unit/test_schema_to_schema_unit.py::TestAnalysisRecommendations::test_recommendation_for_small_table PASSED [ 92%]
tests/unit/test_schema_to_schema_unit.py::TestAnalysisRecommendations::test_recommendation_for_large_table PASSED [ 92%]
tests/unit/test_schema_to_schema_unit.py::TestAnalysisRecommendations::test_recommendation_structure PASSED [ 93%]
tests/unit/test_strict_mode.py::TestStrictMode::test_migration_strict_mode_attribute_defaults_to_false PASSED [ 93%]
tests/unit/test_strict_mode.py::TestStrictMode::test_migration_can_enable_strict_mode PASSED [ 93%]
tests/unit/test_strict_mode.py::TestStrictMode::test_strict_mode_enabled_detects_warnings PASSED [ 93%]
tests/unit/test_strict_mode.py::TestStrictMode::test_normal_mode_ignores_notices PASSED [ 93%]
tests/unit/test_strict_mode.py::TestStrictMode::test_cli_strict_flag_enables_strict_mode PASSED [ 93%]
tests/unit/test_strict_mode.py::TestStrictMode::test_config_strict_mode_enables_strict_mode PASSED [ 93%]
tests/unit/test_strict_mode.py::TestStrictMode::test_config_strict_mode_defaults_to_false PASSED [ 93%]
tests/unit/test_syncer_audit_integration.py::TestProfileHashing::test_hash_none_profile PASSED [ 93%]
tests/unit/test_syncer_audit_integration.py::TestProfileHashing::test_hash_simple_profile PASSED [ 94%]
tests/unit/test_syncer_audit_integration.py::TestProfileHashing::test_hash_changes_with_profile_changes PASSED [ 94%]
tests/unit/test_syncer_audit_integration.py::TestProfileHashing::test_hash_includes_all_profile_data PASSED [ 94%]
tests/unit/test_syncer_audit_integration.py::TestCreateSyncAuditEntry::test_create_basic_audit_entry PASSED [ 94%]
tests/unit/test_syncer_audit_integration.py::TestCreateSyncAuditEntry::test_create_audit_entry_with_profile PASSED [ 94%]
tests/unit/test_syncer_audit_integration.py::TestCreateSyncAuditEntry::test_audit_entry_is_signed PASSED [ 94%]
tests/unit/test_syncer_audit_integration.py::TestCreateSyncAuditEntry::test_audit_entry_verification_fails_with_wrong_secret PASSED [ 94%]
tests/unit/test_syncer_audit_integration.py::TestCreateSyncAuditEntry::test_audit_entry_with_verification_report PASSED [ 94%]
tests/unit/test_syncer_audit_integration.py::TestAuditedProductionSyncer::test_create_sync_entry_formatting PASSED [ 94%]
tests/unit/test_syncer_audit_integration.py::TestAuditedProductionSyncer::test_sync_entry_with_profile_info PASSED [ 95%]
tests/unit/test_syncer_audit_integration.py::TestVerifySyncAuditTrail::test_verify_audit_trail_return_structure PASSED [ 95%]
tests/unit/test_syncer_audit_integration.py::TestVerifySyncAuditTrail::test_verify_audit_entry_signature_validation PASSED [ 95%]
tests/unit/test_syncer_audit_integration.py::TestVerifySyncAuditTrail::test_verify_audit_entry_tamper_detection PASSED [ 95%]
tests/unit/test_syncer_audit_integration.py::TestAuditSyncOperationHelper::test_create_sync_audit_entry_is_signed PASSED [ 95%]
tests/unit/test_syncer_audit_integration.py::TestRealWorldSyncAudit::test_complete_sync_audit_workflow PASSED [ 95%]
tests/unit/test_syncer_audit_integration.py::TestRealWorldSyncAudit::test_multi_tenant_sync_audit PASSED [ 95%]
tests/unit/test_syncer_unit.py::TestAnonymizationStrategies::test_anonymize_email_strategy PASSED [ 95%]
tests/unit/test_syncer_unit.py::TestAnonymizationStrategies::test_anonymize_email_deterministic PASSED [ 96%]
tests/unit/test_syncer_unit.py::TestAnonymizationStrategies::test_anonymize_email_different_inputs PASSED [ 96%]
tests/unit/test_syncer_unit.py::TestAnonymizationStrategies::test_anonymize_phone_strategy PASSED [ 96%]
tests/unit/test_syncer_unit.py::TestAnonymizationStrategies::test_anonymize_phone_with_seed PASSED [ 96%]
tests/unit/test_syncer_unit.py::TestAnonymizationStrategies::test_anonymize_phone_different_seeds PASSED [ 96%]
tests/unit/test_syncer_unit.py::TestAnonymizationStrategies::test_anonymize_name_strategy PASSED [ 96%]
tests/unit/test_syncer_unit.py::TestAnonymizationStrategies::test_anonymize_name_deterministic PASSED [ 96%]
tests/unit/test_syncer_unit.py::TestAnonymizationStrategies::test_anonymize_redact_strategy PASSED [ 96%]
tests/unit/test_syncer_unit.py::TestAnonymizationStrategies::test_anonymize_redact_any_value PASSED [ 96%]
tests/unit/test_syncer_unit.py::TestAnonymizationStrategies::test_anonymize_hash_strategy PASSED [ 97%]
tests/unit/test_syncer_unit.py::TestAnonymizationStrategies::test_anonymize_hash_deterministic PASSED [ 97%]
tests/unit/test_syncer_unit.py::TestAnonymizationStrategies::test_anonymize_hash_different_inputs PASSED [ 97%]
tests/unit/test_syncer_unit.py::TestAnonymizationStrategies::test_anonymize_null_value PASSED [ 97%]
tests/unit/test_syncer_unit.py::TestAnonymizationStrategies::test_anonymize_unknown_strategy PASSED [ 97%]
tests/unit/test_syncer_unit.py::TestAnonymizationStrategies::test_anonymize_empty_string PASSED [ 97%]
tests/unit/test_syncer_unit.py::TestTableSelection::test_select_tables_include_only PASSED [ 97%]
tests/unit/test_syncer_unit.py::TestTableSelection::test_select_tables_exclude_only PASSED [ 97%]
tests/unit/test_syncer_unit.py::TestTableSelection::test_select_tables_include_and_exclude PASSED [ 98%]
tests/unit/test_syncer_unit.py::TestTableSelection::test_select_tables_no_filters PASSED [ 98%]
tests/unit/test_syncer_unit.py::TestTableSelection::test_select_tables_include_nonexistent PASSED [ 98%]
tests/unit/test_syncer_unit.py::TestTableSelection::test_select_tables_exclude_all PASSED [ 98%]
tests/unit/test_syncer_unit.py::TestCheckpointFunctionality::test_save_checkpoint_creates_file PASSED [ 98%]
tests/unit/test_syncer_unit.py::TestCheckpointFunctionality::test_save_checkpoint_creates_parent_dirs PASSED [ 98%]
tests/unit/test_syncer_unit.py::TestCheckpointFunctionality::test_load_checkpoint_restores_state PASSED [ 98%]
tests/unit/test_syncer_unit.py::TestCheckpointFunctionality::test_load_checkpoint_nonexistent_file_raises PASSED [ 98%]
tests/unit/test_syncer_unit.py::TestCheckpointFunctionality::test_checkpoint_roundtrip PASSED [ 98%]
tests/unit/test_syncer_unit.py::TestDataclasses::test_table_selection_defaults PASSED [ 99%]
tests/unit/test_syncer_unit.py::TestDataclasses::test_table_selection_with_values PASSED [ 99%]
tests/unit/test_syncer_unit.py::TestDataclasses::test_anonymization_rule PASSED [ 99%]
tests/unit/test_syncer_unit.py::TestDataclasses::test_anonymization_rule_no_seed PASSED [ 99%]
tests/unit/test_syncer_unit.py::TestDataclasses::test_sync_config_defaults PASSED [ 99%]
tests/unit/test_syncer_unit.py::TestDataclasses::test_sync_config_with_anonymization PASSED [ 99%]
tests/unit/test_syncer_unit.py::TestMetrics::test_get_metrics_empty PASSED [ 99%]
tests/unit/test_syncer_unit.py::TestMetrics::test_get_metrics_with_data PASSED [ 99%]
tests/unit/test_syncer_unit.py::TestMetrics::test_get_metrics_multiple_tables PASSED [100%]

=================================== FAILURES ===================================
________________ TestAuditLoggerDatabase.test_log_single_entry _________________
tests/unit/test_anonymization_audit.py:507: in test_log_single_entry
    logged = logger.get_audit_log(limit=1)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
python/confiture/core/anonymization/audit.py:310: in get_audit_log
    id=UUID(row[0]),
       ^^^^^^^^^^^^
../../.local/share/uv/python/cpython-3.11.14-linux-x86_64-gnu/lib/python3.11/uuid.py:175: in __init__
    hex = hex.replace('urn:', '').replace('uuid:', '')
          ^^^^^^^^^^^
E   AttributeError: 'UUID' object has no attribute 'replace'
______________ TestAuditLoggerDatabase.test_log_multiple_entries _______________
tests/unit/test_anonymization_audit.py:532: in test_log_multiple_entries
    all_entries = logger.get_audit_log(limit=10)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
python/confiture/core/anonymization/audit.py:310: in get_audit_log
    id=UUID(row[0]),
       ^^^^^^^^^^^^
../../.local/share/uv/python/cpython-3.11.14-linux-x86_64-gnu/lib/python3.11/uuid.py:175: in __init__
    hex = hex.replace('urn:', '').replace('uuid:', '')
          ^^^^^^^^^^^
E   AttributeError: 'UUID' object has no attribute 'replace'
______________ TestAuditLoggerDatabase.test_get_audit_log_ordered ______________
tests/unit/test_anonymization_audit.py:559: in test_get_audit_log_ordered
    logged = logger.get_audit_log(limit=10)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
python/confiture/core/anonymization/audit.py:310: in get_audit_log
    id=UUID(row[0]),
       ^^^^^^^^^^^^
../../.local/share/uv/python/cpython-3.11.14-linux-x86_64-gnu/lib/python3.11/uuid.py:175: in __init__
    hex = hex.replace('urn:', '').replace('uuid:', '')
          ^^^^^^^^^^^
E   AttributeError: 'UUID' object has no attribute 'replace'
________ TestAuditLoggerDatabase.test_audit_entries_preserve_signature _________
tests/unit/test_anonymization_audit.py:587: in test_audit_entries_preserve_signature
    logged = logger.get_audit_log(limit=1)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
python/confiture/core/anonymization/audit.py:310: in get_audit_log
    id=UUID(row[0]),
       ^^^^^^^^^^^^
../../.local/share/uv/python/cpython-3.11.14-linux-x86_64-gnu/lib/python3.11/uuid.py:175: in __init__
    hex = hex.replace('urn:', '').replace('uuid:', '')
          ^^^^^^^^^^^
E   AttributeError: 'UUID' object has no attribute 'replace'
=========================== short test summary info ============================
FAILED tests/unit/test_anonymization_audit.py::TestAuditLoggerDatabase::test_log_single_entry
FAILED tests/unit/test_anonymization_audit.py::TestAuditLoggerDatabase::test_log_multiple_entries
FAILED tests/unit/test_anonymization_audit.py::TestAuditLoggerDatabase::test_get_audit_log_ordered
FAILED tests/unit/test_anonymization_audit.py::TestAuditLoggerDatabase::test_audit_entries_preserve_signature
======================== 4 failed, 854 passed in 10.51s ========================
