[build-system]
requires = ["poetry-core>=1.9.0"]
build-backend = "poetry.core.masonry.api"

[tool.poetry.scripts]
sprigconfig = "sprigconfig.cli:main"
create-release = "scripts.create_release:main"

[tool.poetry]
name = "sprig-config"
version = "1.4.3"
description = "Spring-like deep merge configuration loader for Python"
authors = ["Derik G. Wilson <derikwilson6@gmail.com>"]
readme = "README.md"
license = "MIT"
# Tell Poetry where your package lives (src layout)
packages = [
  { include = "sprigconfig", from = "src" },
  { include = "scripts" }
]

[tool.poetry.urls]
Homepage = "https://derikgw.github.io/sprig-config/"
Documentation = "https://derikgw.github.io/sprig-config/"
Repository = "https://github.com/derikgw/sprig-config"
Issues = "https://github.com/derikgw/sprig-config/issues"
Changelog = "https://github.com/derikgw/sprig-config/blob/main/CHANGELOG.md"

[[tool.poetry.source]]
name = "gitlab-pypi"
url = "https://gitlab.com/api/v4/projects/72230105/packages/pypi"
priority = "supplemental"

[tool.poetry.dependencies]
python = ">=3.13,<4.0"
PyYAML = ">=6.0.2"
cryptography = "^46.0.1"

[tool.poetry.group.dev.dependencies]
ruff = "^0.14.0"
pytest = "^8.4.2"
pytest-cov = ">=6.2.1"
coverage = ">=7.10.1"
colorama = ">=0.4.6"
iniconfig = ">=2.1.0"
packaging = ">=25.0"
pluggy = ">=1.6.0"
Pygments = ">=2.19.2"
pyproject-hooks = ">=1.2.0"
python-dotenv = "^1.1.1"
pip-audit = "^2.8.0"
filelock = "^3.20.3"
bandit = {extras = ["toml"], version = "^1.8.0"}
markdown = "^3.10"
weasyprint = "^68.0"
pre-commit = "^4.5.1"
virtualenv = "^20.36.1"
jaraco-context = ">=6.1.0"
radon = "^6.0.1"

[tool.poetry.group.docs.dependencies]
mkdocs = "^1.6.0"
mkdocs-material = "^9.5.0"
mkdocstrings = {extras = ["python"], version = "^0.26.0"}
mkdocs-git-revision-date-localized-plugin = "^1.3.0"

[tool.pytest.ini_options]
addopts = "-v"
testpaths = "tests"
pythonpath = "src"
markers = [
  "integration: marks tests as integration tests (deselect with '-m \"not integration\"')",
  "crypto: mark test as requiring real crypto key"
]

[tool.bandit]
# Bandit security linting configuration
targets = ["src"]
exclude_dirs = ["/tests", "/test_*"]
# Skip test-related security checks
skips = ["B101"]  # B101: Use of assert detected (common in tests)
