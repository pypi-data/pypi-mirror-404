# Prism Dev Container
# Generated by prisme generate

FROM mcr.microsoft.com/devcontainers/python:{{ python_version }}

# Install Node.js
ARG NODE_VERSION={{ node_version }}
RUN curl -fsSL https://deb.nodesource.com/setup_${NODE_VERSION}.x | bash - \
    && apt-get install -y nodejs \
    && npm install -g pnpm

# Install development tools
RUN apt-get update && apt-get install -y --no-install-recommends \
    postgresql-client \
    jq \
    vim \
    less \
    && rm -rf /var/lib/apt/lists/*

# Install uv (fast Python package manager)
RUN pip install --no-cache-dir uv

# Install prism CLI
RUN pip install --no-cache-dir prisme

# Set up workspace
WORKDIR /workspace

# Shell customization for vscode user
USER vscode
RUN echo 'export PS1="\[\033[01;32m\]${WORKSPACE_NAME:-dev}\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ "' >> ~/.bashrc \
    && echo 'alias ll="ls -la"' >> ~/.bashrc \
    && echo 'alias gs="git status"' >> ~/.bashrc \
    && echo 'alias gd="git diff"' >> ~/.bashrc \
    && echo 'alias ga="git add"' >> ~/.bashrc \
    && echo 'alias gc="git commit"' >> ~/.bashrc \
    && echo 'alias gp="git push"' >> ~/.bashrc \
    && echo 'alias uvr="uv run"' >> ~/.bashrc \
    && echo 'alias uvs="uv sync"' >> ~/.bashrc

USER root
