line-length = 100

[lint]
select = ["ALL"]
unfixable = ["T201"]
ignore = [
    # Documentation (pydocstyle)
    "D100", # Missing docstring in public module
    "D103", # Missing docstring in public function
    "D104", # Missing docstring in public package
    "D105", # Missing docstring in magic method
    "D107", # Missing docstring in __init__

    # Type annotations (flake8-annotations)
    "ANN401", # Dynamically typed expressions (Any) disallowed

    # Line length (pycodestyle)
    "E501", # Line too long (handled by formatter)

    # Type checking imports (flake8-type-checking)
    "TC001", # Move first-party import into TYPE_CHECKING block
    "TC002", # Move third-party import into TYPE_CHECKING block
    "TC003", # Move stdlib import into TYPE_CHECKING block
]

[lint.per-file-ignores]
"__init__.py" = [
    "F401", # Module imported but unused
]
"tests/**" = [
    # Pytest assertions and style
    "S101", # Use of assert detected
    "PT003", # pytest.fixture with scope="function" is default
    "PT012", # pytest.raises with multiple statements

    # Unused arguments/variables
    "ARG001", # Unused function argument
    "ARG002", # Unused method argument
    "F841", # Unused variable
    "B007", # Unused loop control variable

    # Code complexity
    "PLR2004", # Magic value in comparison
    "PLR0913", # Too many arguments
    "PLR0206", # Property with parameters
    "SIM117", # Nested with statements

    # Private member access
    "SLF001", # Private member access

    # Exception handling
    "TRY301", # raise within try block
    "TRY003", # Long exception message
    "EM101", # String literal in exception
    "BLE001", # Blind except (catching Exception)

    # Import style
    "PLC0415", # Import outside top-level

    # Naming conventions
    "N801", # Invalid class name (non-CamelCase)

    # Type annotations
    "ANN001", # Missing type for function argument
    "ANN002", # Missing type for *args
    "ANN003", # Missing type for **kwargs
    "ANN202", # Missing return type for private function

    # Documentation
    "D", # All docstring rules
]
"examples/**" = [
    # Documentation (educational code)
    "D", # All docstring rules

    # Print and debugging
    "T201", # Print statement found
    "ERA001", # Commented-out code

    # Package structure
    "INP001", # Missing __init__.py (implicit namespace package)

    # Security (demo code, not production)
    "S106", # Hardcoded password in function argument
    "S311", # Suspicious non-cryptographic random usage
    "S608", # Hardcoded SQL expression

    # Naming conventions
    "N999", # Invalid module name

    # Type annotations
    "ANN", # All annotation rules

    # Unused arguments
    "ARG001", # Unused function argument
    "ARG002", # Unused method argument

    # Exception handling
    "TRY003", # Long exception message
    "EM101", # String literal in exception

    # Code style
    "RUF012", # Mutable class default
    "PLR2004", # Magic value in comparison
    "PLC0415", # Import outside top-level
    "SLF001", # Private member access
]
"src/diwire/container.py" = [
    # Complexity (DI container by design)
    "C901", # Too complex (McCabe)
    "PLR0911", # Too many return statements
    "PLR0912", # Too many branches
    "PLR0913", # Too many arguments

    # Code patterns
    "TRY300", # Return in try block
    "FBT001", # Boolean positional argument
]
"benchmarks/**" = [
    # Assertions and testing
    "S101", # Use of assert detected

    # Unused arguments
    "ARG001", # Unused function argument
    "ARG002", # Unused method argument

    # Code style
    "PLR2004", # Magic value in comparison
    "PLR0913", # Too many arguments
    "SLF001", # Private member access
    "PLC0415", # Import outside top-level

    # Documentation
    "D", # All docstring rules

    # Type annotations
    "ANN201", # Missing return type for public function

    # Naming and organization
    "RUF022", # Unsorted __all__
    "N801", # Invalid class name
    "EM101", # String literal in exception
]
"src/diwire/compiled_providers.py" = [
    # Protocol implementations
    "D102", # Missing docstring in public method
    "ARG002", # Unused method argument (protocol signature)
]
"tmp/**" = [
    # All rules ignored in temporary files
    "ALL",
]

[lint.isort]
combine-as-imports = true

[lint.flake8-tidy-imports]
ban-relative-imports = "all"

[format]
quote-style = "double"
indent-style = "space"
docstring-code-format = true

[lint.flake8-pytest-style]
fixture-parentheses = true
mark-parentheses = false
