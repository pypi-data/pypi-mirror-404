(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9315],{40479:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/jobs/[job]",function(){return t(88099)}])},1125:function(e,s,t){"use strict";t.d(s,{C:function(){return o}});var r=t(85893),n=t(67294),l=t(34209),a=t(84283);let i=e=>{if(!e||"string"!=typeof e)return e;let s=e.split("\n"),t=[];for(let e=0;e<s.length;e++){let r=s[e];if(""===r.trim()){let n=!1,l=0;for(let t=e-1;t>=0;t--){let e=s[t],r=e.trim();if(r&&e.match(/:\s*[|>]\s*$/)){n=!0;for(let e=t+1;e<s.length;e++){let t=s[e];if(t.trim()){l=t.search(/\S/);break}}break}if(r&&0===e.search(/\S/))break}if(n)for(let n=e+1;n<s.length;n++){let e=s[n];if(e.trim()){e.search(/\S/)>=l?t.push("  #YAML_BLANK_LINE_MARKER#"):t.push(r);break}}else t.push(r)}else t.push(r)}return t.join("\n")};function o(e){let{children:s,className:t=""}=e,o=(0,n.useRef)(null),c=i(s);(0,n.useEffect)(()=>{if(o.current){let e=o.current;setTimeout(()=>{let s;let t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null);for(;s=t.nextNode();)s.textContent&&s.textContent.includes("#YAML_BLANK_LINE_MARKER#")&&(s.textContent=s.textContent.replace(/#YAML_BLANK_LINE_MARKER#/g,""))},0)}},[c]);let d={...a.mQ,'code[class*="language-"]':{...a.mQ['code[class*="language-"]'],whiteSpace:"pre !important"},'pre[class*="language-"]':{...a.mQ['pre[class*="language-"]'],whiteSpace:"pre !important"}};return(0,r.jsx)("div",{ref:o,className:t,children:(0,r.jsx)(l.Z,{language:"yaml",style:d,customStyle:{margin:0,padding:0,background:"transparent",fontSize:"0.875rem",fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Consolas, "Liberation Mono", Menlo, monospace'},wrapLines:!0,wrapLongLines:!0,showLineNumbers:!1,useInlineStyles:!0,children:c})})}},84303:function(e,s,t){"use strict";t.d(s,{_q:function(){return l},pJ:function(){return o}});var r=t(1272);let n={lineWidth:-1,quotingType:"'",forceQuotes:!1,noRefs:!0,sortKeys:!1,condenseFlow:!1,indent:2},l=e=>{if(!e)return"No YAML available";try{let s=r.ZP.load(e),t=r.ZP.dump(s,n).split("\n"),l=[],a=-1;for(let e=0;e<t.length;e++){let s=t[e],r=s.search(/\S/);0===r&&a>=0&&e>0&&l.push(""),l.push(s),a=r}return l.join("\n").trim()}catch(s){return console.error("YAML formatting error:",s),e}},a=e=>"string"==typeof e?e.substring(0,50)+"...":e&&e.name?"name: ".concat(e.name):e&&e.resources?"Task configuration":"YAML document",i=(e,s)=>{try{let t=r.ZP.load(e),l=r.ZP.dump(t,n).split("\n"),i=[],o=-1;for(let e=0;e<l.length;e++){let s=l[e],t=s.search(/\S/);0===t&&o>=0&&e>0&&i.push(""),i.push(s),o=t}return{index:s,content:i.join("\n").trim(),preview:a(t)}}catch(t){return console.error("YAML formatting error for document ".concat(s,":"),t),{index:s,content:e,preview:"Invalid YAML"}}},o=e=>{if(!e)return[];try{let s=[],t=e.split(/^---$/m);for(let e=0;e<t.length;e++){let r=t[e].trim();r&&""!==r&&s.push(r)}return(s.length>1?s.slice(1):s).map((e,s)=>i(e,s))}catch(s){return console.error("YAML formatting error:",s),[{index:0,content:e,preview:"Invalid YAML"}]}}},88099:function(e,s,t){"use strict";t.r(s);var r=t(85893),n=t(67294),l=t(55739),a=t(11163),i=t(37673),o=t(68969),c=t(41664),d=t.n(c),m=t(13626),x=t(45895),h=t(6639),u=t(16826),g=t(70282),f=t(27325),j=t(36989),b=t(99307),p=t(23001),N=t(9008),y=t.n(N),v=t(84303),L=t(20546),k=t(1125),w=t(6378),_=t(55988),C=t(21494),S=t(45697),E=t.n(S);function I(e){let{jobId:s,detailJobData:t,isLoadingControllerLogs:l,handleControllerLogsRefresh:a,setIsLoadingControllerLogs:c,setIsLoadingLogs:d,refreshControllerLogsFlag:g,poolsData:f}=e,b="skypilot-controller-logs-expanded",[p,N]=(0,n.useState)(()=>"true"===localStorage.getItem(b));return(0,r.jsx)("div",{id:"controller-logs-section",className:"mt-6",children:(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 ".concat(p?"pt-4":"py-4"),children:[(0,r.jsxs)("button",{onClick:()=>{let e=!p;N(e),localStorage.setItem(b,String(e))},className:"flex items-center text-left focus:outline-none hover:text-gray-700 transition-colors duration-200",children:[p?(0,r.jsx)(x.Z,{className:"w-5 h-5 mr-2"}):(0,r.jsx)(h.Z,{className:"w-5 h-5 mr-2"}),(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Controller Logs"}),(0,r.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(Logs are not streaming; click refresh to fetch the latest logs.)"})]}),p&&(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(j.WH,{content:"Download full controller logs",className:"text-muted-foreground",children:(0,r.jsx)("button",{onClick:()=>(0,o.jh)({jobId:parseInt(Array.isArray(s)?s[0]:s),controller:!0}),className:"text-sky-blue hover:text-sky-blue-bright flex items-center",children:(0,r.jsx)(u.Z,{className:"w-4 h-4"})})}),(0,r.jsx)(j.WH,{content:"Refresh controller logs",className:"text-muted-foreground",children:(0,r.jsx)("button",{onClick:a,disabled:l,className:"text-sky-blue hover:text-sky-blue-bright flex items-center",children:(0,r.jsx)(m.Z,{className:"w-4 h-4 ".concat(l?"animate-spin":"")})})})]})]}),p&&(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)(A,{jobData:t,activeTab:"controllerlogs",setIsLoadingLogs:d,setIsLoadingControllerLogs:c,isLoadingLogs:!1,isLoadingControllerLogs:l,refreshFlag:g,poolsData:f})})]})})}let T={"W&B Run":/^https:\/\/wandb\.ai\/[^\/]+\/[^\/]+\/runs\/[^\/]+$/};function A(e){let{jobData:s,activeTab:t,setIsLoadingLogs:a,setIsLoadingControllerLogs:i,isLoadingLogs:c,isLoadingControllerLogs:m,refreshFlag:u,poolsData:p,links:N,logExtractedLinks:y,onLinksExtracted:w}=e,[S,E]=(0,n.useState)(!1),[I,A]=(0,n.useState)({}),[Z,M]=(0,n.useState)(!1),[R,D]=(0,n.useState)(!1),O=(0,n.useRef)(null),F=(0,n.useRef)(null),W=(0,n.useCallback)(e=>{let s="logs"===e?O:F;if(s.current)for(let t of[()=>s.current.querySelector(".logs-container"),()=>s.current.querySelector('[class*="logs-container"]'),()=>s.current.querySelector('div[style*="overflow"]'),()=>s.current]){let s=t();if(s&&s.scrollHeight>s.clientHeight){s.scrollTop=s.scrollHeight,console.log("Auto-scrolled ".concat(e," to bottom"));break}}},[]),H=["PENDING","SUBMITTED","STARTING"].includes(s.status),Y=["PENDING","SUBMITTED"].includes(s.status),B=["RECOVERING"].includes(s.status),P=e=>{A(s=>({...s,[e]:!s[e]}))},q=async()=>{try{let e=(0,v.pJ)(s.dag_yaml),t="";t=1===e.length?e[0].content:e.length>1?e.map(e=>e.content).join("\n---\n"):s.dag_yaml,await navigator.clipboard.writeText(t),M(!0),setTimeout(()=>M(!1),2e3)}catch(e){console.error("Failed to copy YAML to clipboard:",e)}},J=async()=>{try{await navigator.clipboard.writeText(s.entrypoint),D(!0),setTimeout(()=>D(!1),2e3)}catch(e){console.error("Failed to copy command to clipboard:",e)}},$=(0,n.useMemo)(()=>({jobId:s.id,controller:!1}),[s.id]),K=(0,n.useMemo)(()=>({jobId:s.id,controller:!0}),[s.id]),z=(0,n.useCallback)(e=>{console.error("Error streaming logs:",e)},[]),G=(0,n.useCallback)(e=>{console.error("Error streaming controller logs:",e)},[]),{lines:Q,isLoading:U,hasReceivedFirstChunk:V}=(0,C.V)({streamFn:o.NJ,streamArgs:$,enabled:"logs"===t&&!H&&!B,refreshTrigger:"logs"===t?u:0,onError:z}),{lines:X,isLoading:ee,hasReceivedFirstChunk:es}=(0,C.V)({streamFn:o.NJ,streamArgs:K,enabled:"controllerlogs"===t&&!Y,refreshTrigger:"controllerlogs"===t?u:0,onError:G});(0,n.useEffect)(()=>{a(U)},[U,a]),(0,n.useEffect)(()=>{i(ee)},[ee,i]);let et=(0,n.useRef)({}),er=(0,n.useMemo)(()=>{let e={...et.current},s=new Set(Object.keys(e));for(let t of Q){if(s.size===Object.keys(T).length)break;for(let r of t.split(/[\s"'<>()[\]{},;]+/)){let t=r.replace(/[.,:;!?]+$/,"");if(t){for(let[r,n]of Object.entries(T))if(!s.has(r)&&n.test(t)){e[r]=t,s.add(r);break}}}}return et.current=e,e},[Q]);(0,n.useEffect)(()=>{w&&Object.keys(er).length>0&&w(er)},[er,w]);let en=(0,n.useMemo)(()=>{let e={...N||{}};for(let[s,t]of Object.entries(y||er))e[s]||(e[s]=t);return e},[N,er,y]);return((0,n.useEffect)(()=>{let e=()=>{("logs"===t&&Q.length||"controllerlogs"===t&&X.length)&&W("logs"===t?"logs":"controllerlogs")};requestAnimationFrame(()=>{requestAnimationFrame(e)})},[t,Q,X,W]),"logs"===t)?(0,r.jsx)("div",{className:"max-h-96 overflow-y-auto",ref:O,children:H?(0,r.jsx)("div",{className:"bg-[#f7f7f7] flex items-center justify-center py-4 text-gray-500",children:(0,r.jsx)("span",{children:"Waiting for the job to start; refresh in a few moments."})}):B?(0,r.jsx)("div",{className:"bg-[#f7f7f7] flex items-center justify-center py-4 text-gray-500",children:(0,r.jsx)("span",{children:"Waiting for the job to recover; refresh in a few moments."})}):V||Q.length?(0,r.jsx)(j.$B,{logs:Q}):c?(0,r.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,r.jsx)(l.Z,{size:20,className:"mr-2"}),(0,r.jsx)("span",{children:"Loading logs..."})]}):(0,r.jsx)(j.$B,{logs:Q})}):"controllerlogs"===t?(0,r.jsx)("div",{className:"max-h-96 overflow-y-auto",ref:F,children:Y?(0,r.jsx)("div",{className:"bg-[#f7f7f7] flex items-center justify-center py-4 text-gray-500",children:(0,r.jsx)("span",{children:"Waiting for the job controller process to start; refresh in a few moments."})}):es||X.length?(0,r.jsx)(j.$B,{logs:X,controller:!0}):m?(0,r.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,r.jsx)(l.Z,{size:20,className:"mr-2"}),(0,r.jsx)("span",{children:"Loading logs..."})]}):(0,r.jsx)(j.$B,{logs:X,controller:!0})}):(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Job ID (Name)"}),(0,r.jsxs)("div",{className:"text-base mt-1",children:[s.id," ",s.name?"(".concat(s.name,")"):""]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Status"}),(0,r.jsx)("div",{className:"text-base mt-1",children:(0,r.jsx)(_.j,{name:"jobs.detail.status.badge",context:s,fallback:(0,r.jsx)(b.OE,{status:s.status})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"User"}),(0,r.jsx)("div",{className:"text-base mt-1",children:(0,r.jsx)(L.H,{username:s.user,userHash:s.user_hash})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Workspace"}),(0,r.jsx)("div",{className:"text-base mt-1",children:(0,r.jsx)(d(),{href:"/workspaces",className:"text-gray-700 hover:text-blue-600 hover:underline",children:s.workspace||"default"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Submitted"}),(0,r.jsx)("div",{className:"text-base mt-1",children:s.submitted_at?(0,j.xn)(s.submitted_at):"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Requested Resources"}),(0,r.jsx)("div",{className:"text-base mt-1",children:s.requested_resources||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Infra"}),(0,r.jsx)("div",{className:"text-base mt-1",children:s.infra?(0,r.jsx)(j.Md,{content:s.full_infra||s.infra,className:"text-sm text-muted-foreground",children:(0,r.jsxs)("span",{children:[(0,r.jsx)(d(),{href:"/infra",className:"text-blue-600 hover:underline",children:s.cloud||s.infra.split("(")[0].trim()}),s.infra.includes("(")&&(0,r.jsx)("span",{children:" "+s.infra.substring(s.infra.indexOf("("))})]})}):"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Resources"}),(0,r.jsx)("div",{className:"text-base mt-1",children:s.resources_str_full||s.resources_str||"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Git Commit"}),(0,r.jsx)("div",{className:"text-base mt-1 flex items-center",children:s.git_commit&&"-"!==s.git_commit?(0,r.jsxs)("span",{className:"flex items-center mr-2",children:[s.git_commit,(0,r.jsx)(j.WH,{content:Z?"Copied!":"Copy commit",className:"text-muted-foreground",children:(0,r.jsx)("button",{onClick:async()=>{await navigator.clipboard.writeText(s.git_commit),M(!0),setTimeout(()=>M(!1),2e3)},className:"flex items-center text-gray-500 hover:text-gray-700 transition-colors duration-200 p-1 ml-2",children:Z?(0,r.jsx)(g.Z,{className:"w-4 h-4 text-green-600"}):(0,r.jsx)(f.Z,{className:"w-4 h-4"})})})]}):(0,r.jsx)("span",{className:"text-gray-400",children:"-"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Pool"}),(0,r.jsx)("div",{className:"text-base mt-1",children:(0,j.os)(s.pool,s.pool_hash,p)})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"External Links"}),(0,r.jsx)("div",{className:"text-base mt-1",children:en&&Object.keys(en).length>0?(0,r.jsx)("div",{className:"flex flex-wrap gap-4",children:Object.entries(en).map(e=>{let[s,t]=e,n=t.startsWith("http://")||t.startsWith("https://")?t:"https://".concat(t),l=[".png",".jpg",".jpeg",".gif",".webp",".svg",".bmp"].some(e=>t.toLowerCase().endsWith(e));return(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline",children:s}),l&&(0,r.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"mt-2",children:(0,r.jsx)("img",{src:n,alt:s,className:"max-w-full max-h-48 rounded-md border border-gray-200 shadow-sm hover:shadow-md transition-shadow",onError:e=>{e.target.style.display="none"}})})]},s)})}):(0,r.jsx)("span",{className:"text-gray-400",children:"-"})})]}),(s.entrypoint||s.dag_yaml)&&(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Entrypoint"}),s.entrypoint&&(0,r.jsx)(j.WH,{content:R?"Copied!":"Copy command",className:"text-muted-foreground",children:(0,r.jsx)("button",{onClick:J,className:"flex items-center text-gray-500 hover:text-gray-700 transition-colors duration-200 p-1 ml-2",children:R?(0,r.jsx)(g.Z,{className:"w-4 h-4 text-green-600"}):(0,r.jsx)(f.Z,{className:"w-4 h-4"})})})]}),(0,r.jsxs)("div",{className:"space-y-4 mt-3",children:[s.entrypoint&&(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-3",children:(0,r.jsx)("code",{className:"text-sm text-gray-800 font-mono break-all",children:s.entrypoint})})}),s.dag_yaml&&"{}"!==s.dag_yaml&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsxs)("button",{onClick:()=>{E(!S)},className:"flex items-center text-left focus:outline-none text-gray-700 hover:text-gray-900 transition-colors duration-200",children:[S?(0,r.jsx)(x.Z,{className:"w-4 h-4 mr-1"}):(0,r.jsx)(h.Z,{className:"w-4 h-4 mr-1"}),(0,r.jsx)("span",{className:"text-base",children:"Show SkyPilot YAML"})]}),(0,r.jsx)(j.WH,{content:Z?"Copied!":"Copy YAML",className:"text-muted-foreground",children:(0,r.jsx)("button",{onClick:q,className:"flex items-center text-gray-500 hover:text-gray-700 transition-colors duration-200 p-1 ml-2",children:Z?(0,r.jsx)(g.Z,{className:"w-4 h-4 text-green-600"}):(0,r.jsx)(f.Z,{className:"w-4 h-4"})})})]}),S&&(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-3 max-h-96 overflow-y-auto",children:(()=>{let e=(0,v.pJ)(s.dag_yaml);return 0===e.length?(0,r.jsx)("div",{className:"text-gray-500",children:"No YAML available"}):1===e.length?(0,r.jsx)(k.C,{className:"whitespace-pre-wrap",children:e[0].content}):(0,r.jsx)("div",{className:"space-y-4",children:e.map((e,s)=>(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-4 last:border-b-0",children:[(0,r.jsx)("button",{onClick:()=>P(s),className:"flex items-center justify-between w-full text-left focus:outline-none",children:(0,r.jsxs)("div",{className:"flex items-center",children:[I[s]?(0,r.jsx)(x.Z,{className:"w-4 h-4 mr-2"}):(0,r.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Task ",s+1,": ",e.preview]})]})}),I[s]&&(0,r.jsx)("div",{className:"mt-3 ml-6",children:(0,r.jsx)(k.C,{className:"whitespace-pre-wrap",children:e.content})})]},s))})})()})]})]})]})]})}A.propTypes={jobData:E().shape({id:E().oneOfType([E().string,E().number]),name:E().oneOfType([E().string,E().number]),status:E().string,user:E().string,user_hash:E().string,workspace:E().string,submitted_at:E().oneOfType([E().string,E().number,E().instanceOf(Date)]),requested_resources:E().string,infra:E().string,full_infra:E().string,cloud:E().string,resources_str_full:E().string,resources_str:E().string,git_commit:E().string,pool:E().string,pool_hash:E().string,entrypoint:E().string,dag_yaml:E().string}),activeTab:E().string,setIsLoadingLogs:E().func,setIsLoadingControllerLogs:E().func,isLoadingLogs:E().bool,isLoadingControllerLogs:E().bool,refreshFlag:E().number,poolsData:E().array,links:E().object,logExtractedLinks:E().object,onLinksExtracted:E().func},s.default=function(){var e;let s=(0,a.useRouter)(),{job:t,tab:c}=s.query,[g,f]=(0,n.useState)(0),{jobData:b,loading:N}=(0,o.UA)(t,g),[v,L]=(0,n.useState)([]),[k,C]=(0,n.useState)(!1),[S,E]=(0,n.useState)(!0),[T,Z]=(0,n.useState)(!1),[M,R]=(0,n.useState)(!1),[D,O]=(0,n.useState)(!1),[F,W]=(0,n.useState)(!1),[H,Y]=(0,n.useState)(!1),[B,P]=(0,n.useState)(0),[q,J]=(0,n.useState)(0),[$,K]=(0,n.useState)({}),[z,G]=(0,n.useState)(!1),Q=(0,p.X)();n.useEffect(()=>{!N&&S&&E(!1)},[N,S]),(0,n.useEffect)(()=>{(async function(){try{let e=await w.ZP.get(o.vs,[{}]);L(e.pools||[])}catch(e){console.error("Error fetching pools data:",e),L([])}})()},[]);let U=e=>{let s=document.getElementById(e);s&&s.scrollIntoView({behavior:"smooth"})};(0,n.useEffect)(()=>{W(!0)},[]),(0,n.useEffect)(()=>{if(!H){let e=new MutationObserver(()=>{let s=document.getElementById("logs-section"),t=document.getElementById("controller-logs-section");("logs"===c&&s||"controllerlogs"===c&&t)&&(Y(!0),e.disconnect())});return e.observe(document.body,{childList:!0,subtree:!0}),()=>e.disconnect()}},[H,c]),(0,n.useEffect)(()=>{if(s.isReady&&F&&H&&!D){let e=setTimeout(()=>{"logs"===c?(U("logs-section"),O(!0)):"controllerlogs"===c&&(U("controller-logs-section"),O(!0))},800);return()=>clearTimeout(e)}},[s.isReady,c,D,F,H]),(0,n.useEffect)(()=>{O(!1),Y(!1)},[c]);let V=async()=>{C(!0);try{f(e=>e+1),P(e=>e+1),J(e=>e+1)}catch(e){console.error("Error refreshing data:",e)}finally{C(!1)}};if(!s.isReady)return(0,r.jsx)("div",{children:"Loading..."});let X=null==b?void 0:null===(e=b.jobs)||void 0===e?void 0:e.find(e=>String(e.id)===String(t)),ee=t?"Job: ".concat(t," | SkyPilot Dashboard"):"Job Details | SkyPilot Dashboard";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y(),{children:(0,r.jsx)("title",{children:ee})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"text-base flex items-center",children:[(0,r.jsx)(d(),{href:"/jobs",className:"text-sky-blue hover:underline",children:"Managed Jobs"}),(0,r.jsx)("span",{className:"mx-2 text-gray-500",children:"â€º"}),(0,r.jsxs)(d(),{href:"/jobs/".concat(t),className:"text-sky-blue hover:underline",children:[t," ",(null==X?void 0:X.name)?"(".concat(X.name,")"):""]})]}),(0,r.jsxs)("div",{className:"text-sm flex items-center",children:[(N||k||T||M)&&(0,r.jsxs)("div",{className:"flex items-center mr-4",children:[(0,r.jsx)(l.Z,{size:15,className:"mt-0"}),(0,r.jsx)("span",{className:"ml-2 text-gray-500",children:"Loading..."})]}),(0,r.jsx)(j.WH,{content:"Refresh",className:"text-muted-foreground",children:(0,r.jsxs)("button",{onClick:V,disabled:N||k,className:"text-sky-blue hover:text-sky-blue-bright font-medium inline-flex items-center h-8",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4 mr-1.5"}),!Q&&(0,r.jsx)("span",{children:"Refresh"})]})})]})]}),N&&S?(0,r.jsxs)("div",{className:"flex items-center justify-center py-32",children:[(0,r.jsx)(l.Z,{size:20,className:"mr-2"}),(0,r.jsx)("span",{children:"Loading..."})]}):X?(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)("div",{id:"details-section",children:(0,r.jsxs)(i.Zb,{children:[(0,r.jsx)("div",{className:"flex items-center justify-between px-4 pt-4",children:(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Details"})}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)(A,{jobData:X,activeTab:"info",setIsLoadingLogs:Z,setIsLoadingControllerLogs:R,isLoadingLogs:T,isLoadingControllerLogs:M,refreshFlag:0,poolsData:v,links:X.links,logExtractedLinks:$})})]})}),(0,r.jsx)(_.j,{name:"jobs.detail.gpu-metrics",context:{jobId:X.id,jobName:X.name,jobData:X,pool:X.pool,userHash:X.user_hash,infra:X.full_infra||X.infra,refreshTrigger:g},wrapperClassName:"mt-6"}),(0,r.jsx)("div",{id:"links-section",className:"mt-6",children:(0,r.jsxs)(i.Zb,{children:[(0,r.jsx)("button",{onClick:()=>G(!z),className:"flex items-center justify-between w-full px-4 py-4 text-left focus:outline-none",children:(0,r.jsxs)("div",{className:"flex items-center",children:[z?(0,r.jsx)(x.Z,{className:"w-5 h-5 mr-2 text-gray-500"}):(0,r.jsx)(h.Z,{className:"w-5 h-5 mr-2 text-gray-500"}),(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Links"}),X.links&&Object.keys(X.links).length>0&&(0,r.jsxs)("span",{className:"ml-2 text-sm text-gray-500",children:["(",Object.keys(X.links).length,")"]})]})}),z&&(0,r.jsx)("div",{className:"px-4 pb-4",children:X.links&&Object.keys(X.links).length>0?(0,r.jsx)("div",{className:"space-y-4",children:Object.entries(X.links).map(e=>{let[s,t]=e;return(0,r.jsx)("div",{children:(0,r.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline text-base",children:s})},s)})}):(0,r.jsx)("div",{className:"text-gray-500 text-sm",children:"No links found"})})]})}),(0,r.jsx)("div",{id:"logs-section",className:"mt-6",children:(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 pt-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Logs"}),(0,r.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(Logs are not streaming; click refresh to fetch the latest logs.)"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(j.WH,{content:"Download full logs",className:"text-muted-foreground",children:(0,r.jsx)("button",{onClick:()=>(0,o.jh)({jobId:parseInt(Array.isArray(t)?t[0]:t),controller:!1}),className:"text-sky-blue hover:text-sky-blue-bright flex items-center",children:(0,r.jsx)(u.Z,{className:"w-4 h-4"})})}),(0,r.jsx)(j.WH,{content:"Refresh logs",className:"text-muted-foreground",children:(0,r.jsx)("button",{onClick:()=>{P(e=>e+1)},disabled:T,className:"text-sky-blue hover:text-sky-blue-bright flex items-center",children:(0,r.jsx)(m.Z,{className:"w-4 h-4 ".concat(T?"animate-spin":"")})})})]})]}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)(A,{jobData:X,activeTab:"logs",setIsLoadingLogs:Z,setIsLoadingControllerLogs:R,isLoadingLogs:T,isLoadingControllerLogs:M,refreshFlag:B,poolsData:v,onLinksExtracted:K})})]})}),(0,r.jsx)(_.j,{name:"jobs.detail.events",context:{jobId:X.id},wrapperClassName:"mt-6"}),(0,r.jsx)(I,{jobId:t,detailJobData:X,isLoadingControllerLogs:M,handleControllerLogsRefresh:()=>{J(e=>e+1)},setIsLoadingControllerLogs:R,setIsLoadingLogs:Z,refreshControllerLogsFlag:q,poolsData:v})]}):(0,r.jsx)("div",{className:"flex items-center justify-center py-32",children:(0,r.jsx)("span",{children:"Job not found"})})]})]})}},55988:function(e,s,t){"use strict";t.d(s,{j:function(){return l}});var r=t(85893);t(67294);var n=t(23800);function l(e){let{name:s,context:t={},fallback:l=null,wrapperClassName:a=""}=e,i=(0,n.dL)(s);return 0===i.length?l:(0,r.jsx)("div",{className:a||void 0,children:i.map(e=>{let s=e.component;return(0,r.jsx)(s,{...t},e.id)})})}}},function(e){e.O(0,[616,5739,6130,1272,754,6989,3850,8969,4083,2888,9774,179],function(){return e(e.s=40479)}),_N_E=e.O()}]);