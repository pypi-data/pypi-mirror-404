const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/admin-settings-button-progress-B_VT3VVY.js","assets/main-GE3uFePF.js","assets/main-Cv5PLQ_F.css","assets/admin-BA9ToWAP.js","assets/forwardRefs-RdtHqDjs.js","assets/forwardRefs-D1jOvm_E.css","assets/admin-settings-button-progress-Cks9_KN-.css","assets/admin-menu-BW-Xh8Q6.js","assets/change-password-dialog-BDkTBQoq.js","assets/confirm-footer-CXU8cmV4.js","assets/confirm-footer-DBKmcTc1.css","assets/VForm-BZgaRj-J.js","assets/VSelectionControl-C8DQf56i.js","assets/VSelectionControl-CICLzgAa.css","assets/VForm-DxBt30-N.css","assets/change-password-dialog-DL8UMjmX.css","assets/VDivider-Rdtf6zpf.js","assets/VDivider-DgidWd6w.css","assets/index-CLgxatJ5.js","assets/index-Czf-fUM7.css","assets/admin-menu-BdgFc4sK.css"])))=>i.map(i=>d[i]);
import{_ as L,A as B,X as Fe,B as Ue,y as D,w,a7 as re,m as j,D as G,E as R,G as U,H as Q,bf as He,aq as ie,ar as ue,ac as Ne,x as E,as as ce,c as f,z as O,C as T,J as de,I as z,a1 as ve,bg as Ye,v as ee,bh as me,b as P,g as he,aB as fe,bi as We,bj as X,bk as ge,bl as pe,u as ye,p as _e,aC as we,bm as be,L as Se,t as F,a as k,n as Xe,j as ke,d as qe,aY as x,r as De,bn as je,bo as Pe,aV as W,bp as Ce,bq as Ge,b9 as Ze,ba as Je,aE as Ke,br as Qe,e as et,aX as tt,f as at,o as ot,bs as nt,bt as st,bu as lt,F as rt}from"./main-GE3uFePF.js";import{V as Ve,n as M,a as K,v as Be,k as Oe,d as Te,l as Ee,x as Ie,y as $e,w as xe,H as it,J as ut,o as ct}from"./forwardRefs-RdtHqDjs.js";import{P as dt,d as vt}from"./unauthorized-DqdR05bx.js";import{C as mt}from"./clipboard-YPo4v7k1.js";import{V as ht,u as ft,e as gt,f as pt,h as yt,i as _t,d as wt}from"./confirm-footer-CXU8cmV4.js";import{u as bt}from"./ssrBoot-B0pswZbJ.js";import{a as J}from"./VDivider-Rdtf6zpf.js";const St={name:"ScaleButton",props:{scale:{type:Boolean,default:!1}},computed:{breakPoint(){return this.$vuetify.display.xs},density(){return this.breakPoint?"compact":"default"}}};function kt(e,o,s,c,t,n){return D(),B(Ve,{density:n.density},Fe({_:2},[Ue(e.$slots,(a,u)=>({name:u,fn:w(g=>[re(e.$slots,u,j({props:a},g))])}))]),1032,["density"])}const Dt=L(St,[["render",kt]]),ne=ie(ue(()=>ce(()=>import("./admin-settings-button-progress-B_VT3VVY.js"),__vite__mapDeps([0,1,2,3,4,5,6])))),Pt={name:"SettingsDrawerButton",components:{AdminSettingsButtonProgress:ne,ScaleButton:Dt},data(){return{mdiMenu:He,AdminSettingsButtonProgress:ne}},computed:{...U(Q,["isUserAdmin"])},methods:{...G(R,["setSettingsDrawerOpen"]),onClick(){this.setSettingsDrawerOpen(!0)}}};function Ct(e,o,s,c,t,n){const a=E("ScaleButton");return D(),B(a,{id:"settingsDrawerButton",variant:"plain",icon:"",title:"Settings",onClick:Ne(n.onClick,["prevent"])},{default:w(()=>[f(M,null,{default:w(()=>[O(T(t.mdiMenu),1)]),_:1}),e.isUserAdmin?(D(),B(de(t.AdminSettingsButtonProgress),{key:0})):z("",!0)]),_:1},8,["onClick"])}const ha=L(Pt,[["render",Ct],["__scopeId","data-v-cdf6ad8a"]]),Vt={name:"DocsFooter",data(){return{mdiBookOpenVariantOutline:Ye,mdiOpenInNew:ve}}},Bt={id:"repo",href:"https://codex-comic-reader.readthedocs.io/",title:"Codex Documentation",target:"_blank"};function Ot(e,o,s,c,t,n){return D(),ee("a",Bt,[f(M,{id:"repoIcon",size:"x-small"},{default:w(()=>[O(T(t.mdiBookOpenVariantOutline),1)]),_:1}),o[0]||(o[0]=O(" documentation",-1)),f(M,{size:"x-small"},{default:w(()=>[O(T(t.mdiOpenInNew),1)]),_:1})])}const Tt=L(Vt,[["render",Ot],["__scopeId","data-v-e3930cce"]]),Et="Copy URL to clipboard",It={name:"OPDSUrl",props:{title:{type:String,required:!0},subtitle:{type:String,default:void 0},urlPath:{type:String,required:!0}},components:{ClipBoard:mt},data(){return{mdiRss:me,TOOLTIP:Et}},computed:{url(){return globalThis.origin+this.urlPath}}};function $t(e,o,s,c,t,n){const a=E("ClipBoard");return D(),B(a,{class:"opdsVersion",title:s.title,tooltip:t.TOOLTIP,text:n.url,subtitle:s.subtitle},null,8,["title","tooltip","text","subtitle"])}const xt=L(It,[["render",$t],["__scopeId","data-v-927f6052"]]),Rt={name:"OPDSDialog",components:{OPDSUrl:xt,PlaceholderLoading:dt},data(){return{mdiRss:me}},computed:{...U(R,{opdsURLs:e=>e.opdsURLs})},methods:{...G(R,["loadOPDSURLs"])}},Mt={key:0,id:"opds"};function Lt(e,o,s,c,t,n){const a=E("OPDSUrl"),u=E("PlaceholderLoading");return D(),B(ht,{"max-width":"30em"},{activator:w(({props:g})=>[f(Ve,j({id:"opdsButton",icon:"",size:"small",variant:"plain"},g,{onClick:e.loadOPDSURLs}),{default:w(()=>[f(M,null,{default:w(()=>[O(T(t.mdiRss),1)]),_:1}),o[0]||(o[0]=O(" OPDS ",-1))]),_:1},16,["onClick"])]),default:w(()=>[e.opdsURLs?(D(),ee("div",Mt,[P("h2",null,[f(M,{size:"x=small",class:"inline"},{default:w(()=>[O(T(t.mdiRss),1)]),_:1}),o[1]||(o[1]=O(" OPDS ",-1))]),f(a,{title:"v1.2","url-path":e.opdsURLs.v1},null,8,["url-path"]),f(a,{title:"v2.0","url-path":e.opdsURLs.v2,subtitle:"Supported in some newer clients"},null,8,["url-path"])])):(D(),B(u,{key:1}))]),_:1})}const At=L(Rt,[["render",Lt],["__scopeId","data-v-1085452a"]]),zt=_e({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...$e(),...Se(),...Ie(),...be(),...Ee(),...Te({tag:"footer"}),...we()},"VFooter"),Re=he()({name:"VFooter",props:zt(),setup(e,o){let{slots:s}=o;const c=De(),{themeClasses:t}=fe(e),{backgroundColorClasses:n,backgroundColorStyles:a}=K(()=>e.color),{borderClasses:u}=Be(e),{elevationClasses:g}=xe(e),{roundedClasses:i}=Oe(e),p=x(32),{resizeRef:h}=We(y=>{y.length&&(p.value=y[0].target.clientHeight)}),d=k(()=>e.height==="auto"?p.value:parseInt(e.height,10));return X(()=>e.app,()=>{const y=ge({id:e.name,order:k(()=>parseInt(e.order,10)),position:F(()=>"bottom"),layoutSize:d,elementSize:k(()=>e.height==="auto"?void 0:d.value),active:F(()=>e.app),absolute:F(()=>e.absolute)});pe(()=>{c.value=y.layoutItemStyles.value})}),ye(()=>f(e.tag,{ref:h,class:qe(["v-footer",t.value,n.value,u.value,g.value,i.value,e.class]),style:Xe([a.value,e.app?c.value:{height:ke(e.height)},e.style])},s)),{}}}),Ft={name:"VersionFooter",data(){return{mdiOpenInNew:ve,mdiSourceRepository:je}},computed:{...U(R,{versions:e=>e.versions}),...U(Q,["isUserAdmin"]),outdated:function(){return this.isUserAdmin&&this.semverGreaterThan(this.versions.latest>this.versions.installed)},versionTitle:function(){return this.outdated?`v${this.versions.latest} is available`:"up to date"}},created(){this.loadVersions()},methods:{...G(R,["loadVersions"]),semverGreaterThan(e,o){try{if(!e||!o)return!1;const s=e.split("."),c=o.split(".");for(const[t,n]of s.entries())if(+n>+c[t])return!0}catch(s){console.debug("compare codex versions",e,">",o,s)}return!1}}},Ut={id:"version",href:"https://github.com/ajslater/codex/"},Ht={key:0,id:"latest"};function Nt(e,o,s,c,t,n){return D(),B(Re,{id:"version-footer",title:n.versionTitle},{default:w(()=>[P("a",Ut,[f(M,{id:"repoIcon",size:"x-small"},{default:w(()=>[O(T(t.mdiSourceRepository),1)]),_:1}),O(" codex v"+T(e.versions.installed),1),f(M,{size:"x-small"},{default:w(()=>[O(T(t.mdiOpenInNew),1)]),_:1})]),n.outdated?(D(),ee("div",Ht," codex v"+T(e.versions.latest)+" is available ",1)):z("",!0)]),_:1},8,["title"])}const Yt=L(Ft,[["render",Nt],["__scopeId","data-v-7ebf03ef"]]);function Wt(e){let{rootEl:o,isSticky:s,layoutItemStyles:c}=e;const t=x(!1),n=x(0),a=k(()=>{const i=typeof t.value=="boolean"?"top":t.value;return[s.value?{top:"auto",bottom:"auto",height:void 0}:void 0,t.value?{[i]:ke(n.value)}:{top:c.value.top}]});Pe(()=>{W(s,i=>{i?window.addEventListener("scroll",g,{passive:!0}):window.removeEventListener("scroll",g)},{immediate:!0})}),Ce(()=>{window.removeEventListener("scroll",g)});let u=0;function g(){const i=u>window.scrollY?"up":"down",p=o.value.getBoundingClientRect(),h=parseFloat(c.value.top??0),d=window.scrollY-Math.max(0,n.value-h),y=p.height+Math.max(n.value,h)-window.scrollY-window.innerHeight,_=parseFloat(getComputedStyle(o.value).getPropertyValue("--v-body-scroll-y"))||0;p.height<window.innerHeight-h?(t.value="top",n.value=h):i==="up"&&t.value==="bottom"||i==="down"&&t.value==="top"?(n.value=window.scrollY+p.top-_,t.value=!0):i==="down"&&y<=0?(n.value=0,t.value="bottom"):i==="up"&&d<=0&&(_?t.value!=="top"&&(n.value=-d+_+h,t.value="top"):(n.value=p.top+d,t.value="top")),u=window.scrollY}return{isStuck:t,stickyStyles:a}}const Xt=100,qt=20;function se(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function le(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let o=0;for(let s=e.length-1;s>0;s--){if(e[s].t===e[s-1].t)continue;const c=se(o),t=(e[s].d-e[s-1].d)/(e[s].t-e[s-1].t);o+=(t-c)*Math.abs(t),s===e.length-1&&(o*=.5)}return se(o)*1e3}function jt(){const e={};function o(t){Array.from(t.changedTouches).forEach(n=>{(e[n.identifier]??(e[n.identifier]=new Ge(qt))).push([t.timeStamp,n])})}function s(t){Array.from(t.changedTouches).forEach(n=>{delete e[n.identifier]})}function c(t){const n=e[t]?.values().reverse();if(!n)throw new Error(`No samples for touch id ${t}`);const a=n[0],u=[],g=[];for(const i of n){if(a[0]-i[0]>Xt)break;u.push({t:i[0],d:i[1].clientX}),g.push({t:i[0],d:i[1].clientY})}return{x:le(u),y:le(g),get direction(){const{x:i,y:p}=this,[h,d]=[Math.abs(i),Math.abs(p)];return h>d&&i>=0?"right":h>d&&i<=0?"left":d>h&&p>=0?"down":d>h&&p<=0?"up":Gt()}}}return{addMovement:o,endTouch:s,getVelocity:c}}function Gt(){throw new Error}function Zt(e){let{el:o,isActive:s,isTemporary:c,width:t,touchless:n,position:a}=e;Pe(()=>{window.addEventListener("touchstart",I,{passive:!0}),window.addEventListener("touchmove",$,{passive:!1}),window.addEventListener("touchend",q,{passive:!0})}),Ce(()=>{window.removeEventListener("touchstart",I),window.removeEventListener("touchmove",$),window.removeEventListener("touchend",q)});const u=k(()=>["left","right"].includes(a.value)),{addMovement:g,endTouch:i,getVelocity:p}=jt();let h=!1;const d=x(!1),y=x(0),_=x(0);let b;function H(l,r){return(a.value==="left"?l:a.value==="right"?document.documentElement.clientWidth-l:a.value==="top"?l:a.value==="bottom"?document.documentElement.clientHeight-l:A())-(r?t.value:0)}function N(l){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const v=a.value==="left"?(l-_.value)/t.value:a.value==="right"?(document.documentElement.clientWidth-l-_.value)/t.value:a.value==="top"?(l-_.value)/t.value:a.value==="bottom"?(document.documentElement.clientHeight-l-_.value)/t.value:A();return r?Je(v):v}function I(l){if(n.value)return;const r=l.changedTouches[0].clientX,v=l.changedTouches[0].clientY,m=25,C=a.value==="left"?r<m:a.value==="right"?r>document.documentElement.clientWidth-m:a.value==="top"?v<m:a.value==="bottom"?v>document.documentElement.clientHeight-m:A(),V=s.value&&(a.value==="left"?r<t.value:a.value==="right"?r>document.documentElement.clientWidth-t.value:a.value==="top"?v<t.value:a.value==="bottom"?v>document.documentElement.clientHeight-t.value:A());(C||V||s.value&&c.value)&&(b=[r,v],_.value=H(u.value?r:v,s.value),y.value=N(u.value?r:v),h=_.value>-20&&_.value<80,i(l),g(l))}function $(l){const r=l.changedTouches[0].clientX,v=l.changedTouches[0].clientY;if(h){if(!l.cancelable){h=!1;return}const C=Math.abs(r-b[0]),V=Math.abs(v-b[1]);(u.value?C>V&&C>3:V>C&&V>3)?(d.value=!0,h=!1):(u.value?V:C)>3&&(h=!1)}if(!d.value)return;l.preventDefault(),g(l);const m=N(u.value?r:v,!1);y.value=Math.max(0,Math.min(1,m)),m>1?_.value=H(u.value?r:v,!0):m<0&&(_.value=H(u.value?r:v,!1))}function q(l){if(h=!1,!d.value)return;g(l),d.value=!1;const r=p(l.changedTouches[0].identifier),v=Math.abs(r.x),m=Math.abs(r.y);(u.value?v>m&&v>400:m>v&&m>3)?s.value=r.direction===({left:"right",right:"left",top:"down",bottom:"up"}[a.value]||A()):s.value=y.value>.5}const Y=k(()=>d.value?{transform:a.value==="left"?`translateX(calc(-100% + ${y.value*t.value}px))`:a.value==="right"?`translateX(calc(100% - ${y.value*t.value}px))`:a.value==="top"?`translateY(calc(-100% + ${y.value*t.value}px))`:a.value==="bottom"?`translateY(calc(100% - ${y.value*t.value}px))`:A(),transition:"none"}:void 0);return X(d,()=>{const l=o.value?.style.transform??null,r=o.value?.style.transition??null;pe(()=>{o.value?.style.setProperty("transform",Y.value?.transform||"none"),o.value?.style.setProperty("transition",Y.value?.transition||null)}),Ze(()=>{o.value?.style.setProperty("transform",l),o.value?.style.setProperty("transition",r)})}),{isDragging:d,dragProgress:y,dragStyles:Y}}function A(){throw new Error}const Jt=["start","end","left","right","top","bottom"],Kt=_e({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>Jt.includes(e)},sticky:Boolean,...$e(),...Se(),...yt(),...nt({mobile:null}),...Ie(),...be(),...Ee(),...ot(pt(),["disableInitialFocus"]),...Te({tag:"nav"}),...we()},"VNavigationDrawer"),Qt=he()({name:"VNavigationDrawer",props:Kt(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,o){let{attrs:s,emit:c,slots:t}=o;const{isRtl:n}=Ke(),{themeClasses:a}=fe(e),{borderClasses:u}=Be(e),{backgroundColorClasses:g,backgroundColorStyles:i}=K(()=>e.color),{elevationClasses:p}=xe(e),{displayClasses:h,mobile:d}=Qe(e),{roundedClasses:y}=Oe(e),_=it(),b=et(e,"modelValue",null,S=>!!S),{ssrBootStyles:H}=bt(),{scopeId:N}=ft(),I=De(),$=x(!1),{runOpenDelay:q,runCloseDelay:Y}=_t(e,S=>{$.value=S}),l=k(()=>e.rail&&e.expandOnHover&&$.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),r=k(()=>ut(e.location,n.value)),v=F(()=>e.persistent),m=k(()=>!e.permanent&&(d.value||e.temporary)),C=k(()=>e.sticky&&!m.value&&r.value!=="bottom");gt(e,{isActive:b,localTop:m,contentEl:I}),X(()=>e.expandOnHover&&e.rail!=null,()=>{W($,S=>c("update:rail",!S))}),X(()=>!e.disableResizeWatcher,()=>{W(m,S=>!e.permanent&&tt(()=>b.value=!S))}),X(()=>!e.disableRouteWatcher&&!!_,()=>{W(_.currentRoute,()=>m.value&&(b.value=!1))}),W(()=>e.permanent,S=>{S&&(b.value=!0)}),e.modelValue==null&&!m.value&&(b.value=e.permanent||!d.value);const{isDragging:V,dragProgress:Z}=Zt({el:I,isActive:b,isTemporary:m,width:l,touchless:F(()=>e.touchless),position:r}),Me=k(()=>{const S=m.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):l.value;return V.value?S*Z.value:S}),{layoutItemStyles:te,layoutItemScrimStyles:Le}=ge({id:e.name,order:k(()=>parseInt(e.order,10)),position:r,layoutSize:Me,elementSize:l,active:st(b),disableTransitions:F(()=>V.value),absolute:k(()=>e.absolute||C.value&&typeof ae.value!="string")}),{isStuck:ae,stickyStyles:Ae}=Wt({rootEl:I,isSticky:C,layoutItemStyles:te}),oe=K(()=>typeof e.scrim=="string"?e.scrim:null),ze=k(()=>({...V.value?{opacity:Z.value*.2,transition:"none"}:void 0,...Le.value}));return at({VList:{bgColor:"transparent"}}),ye(()=>{const S=t.image||e.image;return P(rt,null,[f(e.tag,j({ref:I,onMouseenter:q,onMouseleave:Y,class:["v-navigation-drawer",`v-navigation-drawer--${r.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":$.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":m.value,"v-navigation-drawer--persistent":v.value,"v-navigation-drawer--active":b.value,"v-navigation-drawer--sticky":C.value},a.value,g.value,u.value,h.value,p.value,y.value,e.class],style:[i.value,te.value,H.value,Ae.value,e.style],inert:!b.value},N,s),{default:()=>[S&&P("div",{key:"image",class:"v-navigation-drawer__img"},[t.image?f(ct,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},t.image):f(wt,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),t.prepend&&P("div",{class:"v-navigation-drawer__prepend"},[t.prepend?.()]),P("div",{class:"v-navigation-drawer__content"},[t.default?.()]),t.append&&P("div",{class:"v-navigation-drawer__append"},[t.append?.()])]}),f(lt,{name:"fade-transition"},{default:()=>[m.value&&(V.value||b.value)&&!!e.scrim&&P("div",j({class:["v-navigation-drawer__scrim",oe.backgroundColorClasses.value],style:[ze.value,oe.backgroundColorStyles.value],onClick:()=>{v.value||(b.value=!1)}},N),null)]})])}),{isStuck:ae}}}),ea=ie(ue(()=>ce(()=>import("./admin-menu-BW-Xh8Q6.js"),__vite__mapDeps([7,1,2,4,5,8,9,10,11,12,13,14,3,15,16,17,18,19,20])))),ta={name:"SettingsDrawer",components:{AuthMenu:vt,DocsFooter:Tt,OPDSDialog:At,VersionFooter:Yt},props:{title:{type:String,required:!0}},data(){return{AdminMenu:ea}},computed:{...U(Q,["isUserAdmin","isAuthorized"]),...U(R,{isSettingsDrawerOpen:e=>e.isSettingsDrawerOpen}),open:{get(){return this.isSettingsDrawerOpen||!this.isAuthorized},set(e){this.setSettingsDrawerOpen(e)}}},methods:{...G(R,["setSettingsDrawerOpen"])}},aa={class:"settingsDrawerContainer"},oa={id:"topBlock"},na={class:"settingsHeader"},sa={id:"scrollFooter",class:"footer"};function la(e,o,s,c,t,n){const a=E("AuthMenu"),u=E("OPDSDialog"),g=E("DocsFooter"),i=E("VersionFooter");return D(),B(Qt,{modelValue:n.open,"onUpdate:modelValue":o[0]||(o[0]=p=>n.open=p),"disable-route-watcher":"",location:"right",touchless:""},{append:w(()=>[f(Re,{id:"bottomFooter",class:"footer"},{default:w(()=>[f(i)]),_:1})]),default:w(()=>[P("div",aa,[P("div",oa,[P("header",na,[P("h3",null,T(s.title),1)]),f(J),e.isAuthorized?re(e.$slots,"panel",{key:0},void 0,!0):z("",!0),e.isAuthorized?(D(),B(J,{key:1})):z("",!0),f(a),e.isUserAdmin?(D(),B(de(t.AdminMenu),{key:2})):z("",!0),f(J)]),P("div",sa,[e.isAuthorized?(D(),B(u,{key:0})):z("",!0),f(g)])])]),_:3},8,["modelValue"])}const fa=L(ta,[["render",la],["__scopeId","data-v-492da9d6"]]);export{ha as S,Qt as V,fa as a,Dt as b};
