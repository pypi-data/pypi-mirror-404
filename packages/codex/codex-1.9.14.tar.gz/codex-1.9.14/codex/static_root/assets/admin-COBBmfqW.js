import{p as U,o as J,g as z,u as N,c as r,m as C,s as me,r as Y,a as W,b as E,n as be,d as L,F as B,i as fe,e as K,f as ve,h as ge,j as M,t as g,k as we,_ as $,l as Te,q as Se,v as k,w,x as f,y as u,z as j,A as S,B as Q,C as pe,D as Z,E as _e,G as P,H as ee,I as he,J as ye,K as Ve}from"./main-GE3uFePF.js";import{A as Ae,V as Ce,a as xe,b as ke,U as Be,c as $e}from"./unauthorized-DqdR05bx.js";import{S as De,a as Pe}from"./settings-drawer-Bnvsy2g6.js";import{TABS as te,useAdminStore as I}from"./admin-BA9ToWAP.js";import{m as Ie,u as We,a as ae,V as F,f as Ee,b as Le,c as Ue,d as ze,e as Ne}from"./forwardRefs-RdtHqDjs.js";import{V as H,m as Me,a as R,b as He}from"./VWindowItem-IxINW856.js";import{m as Re,V as q}from"./VDivider-Rdtf6zpf.js";import{u as Ge}from"./confirm-footer-CXU8cmV4.js";import"./clipboard-YPo4v7k1.js";import"./change-password-dialog-BDkTBQoq.js";import"./VForm-BZgaRj-J.js";import"./VSelectionControl-C8DQf56i.js";import"./ssrBoot-B0pswZbJ.js";const G=Symbol.for("vuetify:v-tabs"),ne=U({fixed:Boolean,sliderColor:String,sliderTransition:String,sliderTransitionDuration:[String,Number],hideSlider:Boolean,inset:Boolean,direction:{type:String,default:"horizontal"},...J(Ie({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),se=z()({name:"VTab",props:ne(),setup(e,t){let{slots:d,attrs:a}=t;const{textColorClasses:i,textColorStyles:s}=We(()=>e.sliderColor),{backgroundColorClasses:n,backgroundColorStyles:l}=ae(()=>e.sliderColor),c=Y(),v=Y(),T=W(()=>e.direction==="horizontal"),_=W(()=>c.value?.group?.isSelected.value??!1);function o(p,x){return{opacity:[0,1]}}function oe(p,x){return e.direction==="vertical"?{transform:["scaleY(0)","scaleY(1)"]}:{transform:["scaleX(0)","scaleX(1)"]}}function O(p,x){const m=x.getBoundingClientRect(),b=p.getBoundingClientRect(),h=T.value?"x":"y",y=T.value?"X":"Y",D=T.value?"right":"bottom",V=T.value?"width":"height",re=m[h],le=b[h],A=re>le?m[D]-b[D]:m[h]-b[h],de=Math.sign(A)>0?T.value?"right":"bottom":Math.sign(A)<0?T.value?"left":"top":"center",ce=(Math.abs(A)+(Math.sign(A)<0?m[V]:b[V]))/Math.max(m[V],b[V])||0,ue=m[V]/b[V]||0,X=1.5;return{transform:[`translate${y}(${A}px) scale${y}(${ue})`,`translate${y}(${A/X}px) scale${y}(${(ce-1)/X+1})`,"none"],transformOrigin:Array(3).fill(de)}}function ie(p){let{value:x}=p;if(x){const m=c.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),b=v.value;if(!m||!b)return;const h=getComputedStyle(m).color,y={fade:o,grow:oe,shift:O}[e.sliderTransition??"shift"]??O,D=Number(e.sliderTransitionDuration)||({fade:400,grow:350,shift:225}[e.sliderTransition??"shift"]??225);Le(b,{backgroundColor:[h,"currentcolor"],...y(b,m)},{duration:D,easing:me})}}return N(()=>{const p=F.filterProps(e);return r(F,C({symbol:G,ref:c,class:["v-tab",e.class,_.value&&e.inset?n.value:[]],style:[e.style,_.value&&e.inset?l.value:[]],tabindex:_.value?0:-1,role:"tab","aria-selected":String(_.value),active:!1},p,a,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":ie}),{...d,default:()=>E(B,null,[d.default?.()??e.text,!e.hideSlider&&E("div",{ref:v,class:L(["v-tab__slider",i.value]),style:be(s.value)},null)])})}),Ee({},c)}}),Oe=U({...J(Me(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Xe=z()({name:"VTabsWindow",props:Oe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:d}=t;const a=fe(G,null),i=K(e,"modelValue"),s=W({get(){return i.value!=null||!a?i.value:a.items.value.find(n=>a.selected.value.includes(n.id))?.value},set(n){i.value=n}});return N(()=>{const n=H.filterProps(e);return r(H,C({_as:"VTabsWindow"},n,{modelValue:s.value,"onUpdate:modelValue":l=>s.value=l,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),d)}),{}}}),Ye=U({...He()},"VTabsWindowItem"),je=z()({name:"VTabsWindowItem",props:Ye(),setup(e,t){let{slots:d}=t;return N(()=>{const a=R.filterProps(e);return r(R,C({_as:"VTabsWindowItem"},a,{class:["v-tabs-window-item",e.class],style:e.style}),d)}),{}}});function Fe(e){return e?e.map(t=>we(t)?t:{text:t,value:t}):[]}const qe=U({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,inset:Boolean,insetPadding:[String,Number],insetRadius:[String,Number],sliderColor:String,...ge(ne(),["spaced","sliderTransition","sliderTransitionDuration"]),...Re({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Ne(),...ze()},"VTabs"),Je=z()({name:"VTabs",props:qe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:d,slots:a}=t;const i=K(e,"modelValue"),s=W(()=>Fe(e.items)),{densityClasses:n}=Ue(e),{backgroundColorClasses:l,backgroundColorStyles:c}=ae(()=>e.bgColor),{scopeId:v}=Ge();return ve({VTab:{color:g(e,"color"),direction:g(e,"direction"),stacked:g(e,"stacked"),fixed:g(e,"fixedTabs"),inset:g(e,"inset"),sliderColor:g(e,"sliderColor"),sliderTransition:g(e,"sliderTransition"),sliderTransitionDuration:g(e,"sliderTransitionDuration"),hideSlider:g(e,"hideSlider")}}),N(()=>{const T=q.filterProps(e),_=!!(a.window||e.items.length>0);return E(B,null,[r(q,C(T,{modelValue:i.value,"onUpdate:modelValue":o=>i.value=o,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--inset":e.inset,"v-tabs--stacked":e.stacked},n.value,l.value,e.class],style:[{"--v-tabs-height":M(e.height),"--v-tabs-inset-padding":e.inset?M(e.insetPadding):void 0,"--v-tabs-inset-radius":e.inset?M(e.insetRadius):void 0},c.value,e.style],role:"tablist",symbol:G},v,d),{default:a.default??(()=>s.value.map(o=>a.tab?.({item:o})??r(se,C(o,{key:o.text,value:o.value,spaced:e.spaced}),{default:a[`tab.${o.value}`]?()=>a[`tab.${o.value}`]?.({item:o}):void 0}))),prev:a.prev,next:a.next}),_&&r(Xe,C({modelValue:i.value,"onUpdate:modelValue":o=>i.value=o,key:"tabs-window"},v),{default:()=>[s.value.map(o=>a.item?.({item:o})??r(je,{value:o.value},{default:()=>a[`item.${o.value}`]?.({item:o})})),a.window?.()]})])}),{}}}),Ke={name:"AdminTitleToolbar",components:{AppBanner:Ae,SettingsDrawerButton:De},data(){return{TABS:te}},head(){return{title:"Admin / "+this.activeTab}},computed:{...Se(I,["activeTab"]),mdAndDown(){return this.$vuetify.display.mdAndDown}},watch:{$route(e){const d=e.path.split("/").at(-1);this.activeTab=Te(d)}}};function Qe(e,t,d,a,i,s){const n=f("AppBanner"),l=f("SettingsDrawerButton");return u(),k("header",{id:"adminHeader",class:L({drawerMargin:!s.mdAndDown})},[r(n),r(Ce,{id:"titleBar",flat:"",density:"compact"},{default:w(()=>[t[2]||(t[2]=E("span",{id:"buttonSpacer"},null,-1)),r(xe,{id:"adminTitle"},{default:w(()=>[...t[1]||(t[1]=[j(" Codex Administration ",-1)])]),_:1}),(u(),S(l,{key:s.mdAndDown,class:L(["adminSettingsButton",{invisible:!s.mdAndDown}]),disabled:!s.mdAndDown},null,8,["class","disabled"]))]),_:1}),r(Je,{class:"adminTabs",grow:"","show-arrows":""},{default:w(()=>[(u(!0),k(B,null,Q(i.TABS,c=>(u(),S(se,{key:c,modelValue:e.activeTab,"onUpdate:modelValue":t[0]||(t[0]=v=>e.activeTab=v),to:c.toLowerCase()},{default:w(()=>[j(pe(c),1)]),_:2},1032,["modelValue","to"]))),128))]),_:1})],2)}const Ze=$(Ke,[["render",Qe],["__scopeId","data-v-65fdb8e6"]]),et={name:"AdminSettingsPanel",components:{AdminBrowserLink:ke}};function tt(e,t,d,a,i,s){const n=f("AdminBrowserLink");return u(),S(n)}const at=$(et,[["render",tt]]),nt={name:"AdminSettingsDrawer",components:{SettingsDrawer:Pe,AdminSettingsPanel:at},computed:{mdAndDown(){return this.$vuetify.display.mdAndDown}},watch:{mdAndDown(e){e||this.setSettingsDrawerOpen(!0)}},mounted(){this.mdAndDown||this.setSettingsDrawerOpen(!0)},methods:{...Z(_e,["setSettingsDrawerOpen"])}};function st(e,t,d,a,i,s){const n=f("AdminSettingsPanel"),l=f("SettingsDrawer");return u(),S(l,{title:"Admin",temporary:s.mdAndDown},{panel:w(()=>[r(n)]),_:1},8,["temporary"])}const ot=$(nt,[["render",st]]),it={name:"AdminTabs",data(){return{TABS:te}},computed:{...P(I,["doNormalComicLibrariesExist"]),...P(ee,["isBanner"]),...P(I,{librariesLoaded:e=>!!e.libraries,activeTab:e=>e.activeTab}),classes(){let e="tabItems";return this.isBanner&&(e+="Banner"),{[e]:!0}}},mounted(){this.librariesLoaded||this.loadTables(["Library"])},methods:{...Z(I,["loadTables"])}},rt={key:0,id:"noLibraries"};function lt(e,t,d,a,i,s){const n=f("router-view");return u(),k(B,null,[r(H,{modelValue:e.activeTab,"onUpdate:modelValue":t[0]||(t[0]=l=>e.activeTab=l),class:L(s.classes),touch:!1},{default:w(()=>[(u(!0),k(B,null,Q(i.TABS,l=>(u(),S(n,{key:l},{default:w(({Component:c})=>[r(R,{value:l,class:"tabItemContainer"},{default:w(()=>[(u(),S(ye(c)))]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1},8,["modelValue","class"]),e.doNormalComicLibrariesExist?he("",!0):(u(),k("div",rt," Codex has no libraries. Select the Libraries tab and add a comic library. "))],64)}const dt=$(it,[["render",lt],["__scopeId","data-v-51c14a36"]]),ct={name:"MainAdmin",components:{AdminHeader:Ze,AdminSettingsDrawer:ot,AdminTabs:dt,Unauthorized:Be},data(){return{mdiLogin:Ve}},computed:{...P(ee,["isUserAdmin"])}};function ut(e,t,d,a,i,s){const n=f("AdminHeader"),l=f("AdminTabs"),c=f("AdminSettingsDrawer"),v=f("Unauthorized");return e.isUserAdmin?(u(),S($e,{key:0},{default:w(()=>[r(n),r(l),r(c)]),_:1})):(u(),S(v,{key:1}))}const Ct=$(ct,[["render",ut]]);export{Ct as default};
