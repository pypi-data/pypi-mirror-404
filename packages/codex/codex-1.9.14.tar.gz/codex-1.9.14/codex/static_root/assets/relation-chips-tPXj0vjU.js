import{bN as Zt,bO as ea,_ as Z,bP as ta,A as K,m as T,w as le,y as G,z as Ge,C as Me,bQ as Xe,N as Ye,D as nt,x as se,c as S,b as p,J as aa,d as Y,bR as la,r as X,g as U,e as J,aD as ue,aE as na,aB as ra,br as ke,f as he,bi as oa,u as ee,n as rt,aY as ye,bd as Je,aX as Qe,p as F,M as O,aC as sa,L as ia,a as _,t as V,bc as ce,aV as ze,bS as ot,ba as Le,i as ne,a_ as re,o as de,bT as ua,j as A,bl as da,bU as ca,bV as fa,bJ as fe,bW as va,k as ma,bX as pe,bY as ve,bs as Ke,F as Q,bZ as ga,b_ as me,b$ as Ne,ac as ge,h as He,c0 as be,c1 as st,X as ba,B as it,a7 as ha,c2 as ya,v as Ze}from"./main-GE3uFePF.js";import{V as z,F as pa,d as xa,O as Sa,l as wa,x as Pa,e as Ie,y as ka,P as ut,S as Ia,K as _a,a as Da,L as Va,n as et}from"./forwardRefs-RdtHqDjs.js";import{S as Ta,V as Ca}from"./VForm-BZgaRj-J.js";import{useAdminStore as dt}from"./admin-BA9ToWAP.js";import{V as Ba}from"./confirm-footer-CXU8cmV4.js";import{d as ct,c as qe,h as Fa,i as Ra,j as Aa}from"./VSelect-3XsB4Bnk.js";import{V as xe}from"./VCheckboxBtn-B7AyxNoj.js";import{m as Oa,V as Se}from"./VTable-BzHndA6M.js";import{m as ft,u as vt}from"./filter-DawtxvRO.js";import{a as Ea}from"./VDivider-Rdtf6zpf.js";import{C as $a}from"./confirm-dialog-K-DI-wAR.js";function tt(e,t,a){return Object.keys(e).filter(l=>Zt(l)&&l.endsWith(t)).reduce((l,n)=>(l[n.slice(0,-t.length)]=r=>ea(e[n],r,a(r)),l),{})}const La={name:"AdminCreateUpdateButton",props:{update:{type:Boolean,default:!1},table:{type:String,required:!0},size:{type:String,default:"default"},density:{type:String,default:"default"}},data(){return{mdiPencil:ta}}};function Na(e,t,a,l,n,r){return a.update?(G(),K(z,T({key:0,icon:n.mdiPencil},e.$attrs,{size:a.size,density:a.density}),null,16,["icon","size","density"])):(G(),K(z,T({key:1},e.$attrs,{size:a.size,density:a.density}),{default:le(()=>[Ge(" + "+Me(a.table),1)]),_:1},16,["size","density"]))}const Ga=Z(La,[["render",Na]]),Ha={name:"AdminCreateUpdateDialog",components:{AdminCreateUpdateButton:Ga,SubmitFooter:Ta},props:{table:{type:String,required:!0},label:{type:String,default:""},oldRow:{type:[Object,Boolean],default:!1},inputs:{type:Object,required:!0},size:{type:String,default:"default"},density:{type:String,default:"default"}},data(){return{row:{},showDialog:!1,submitButtonEnabled:!1}},computed:{verb(){return this.oldRow?"Update":"Add"},title(){return this.label||this.table},buttonTitle(){return(this.oldRow?"Edit":"Add")+" "+this.title}},watch:{showDialog(e){this.row=this.getRow(e)}},methods:{...nt(dt,["createRow","updateRow"]),validate(){let e=!1;for(const[a,l]of Object.entries(this.row))if(!Xe(this.oldRow[a],l)){e=!0;break}if(!e)return!1;const t=this.$refs.form;return t?t.validate().then(({valid:a})=>a).catch(()=>!1):!1},change(e){this.row=e,this.submitButtonEnabled=this.validate()},getRow(e){if(!e||!this.oldRow)return Ye(this.inputs.EMPTY_ROW);const t={};for(const a of this.inputs.UPDATE_KEYS)t[a]=Ye(this.oldRow[a]);return t},doUpdate:function(){const e={};for(const[t,a]of Object.entries(this.row))Xe(this.oldRow[t],a)||(e[t]=a);this.updateRow(this.table,this.oldRow.pk,e).then(()=>(this.showDialog=!1,!0)).catch(console.error)},doCreate:function(){this.createRow(this.table,this.row).then(()=>(this.showDialog=!1,!0)).catch(console.error)},submit:function(){const e=this.$refs.form;e&&e.validate().then(({valid:t})=>{if(t)return this.oldRow?this.doUpdate():this.doCreate()}).catch(console.warn)}}};function ja(e,t,a,l,n,r){const o=se("AdminCreateUpdateButton"),i=se("SubmitFooter");return G(),K(Ba,T({modelValue:n.showDialog,"onUpdate:modelValue":t[1]||(t[1]=s=>n.showDialog=s),transition:"scale-transition"},e.$attrs),{activator:le(({props:s})=>[S(o,T({update:!!a.oldRow,table:a.table,label:a.label},s,{size:a.size,density:a.density,title:r.buttonTitle}),null,16,["update","table","label","size","density","title"])]),default:le(()=>[S(Ca,{ref:"form",class:"cuForm"},{default:le(()=>[p("h2",null,Me(r.title),1),(G(),K(aa(a.inputs),{"old-row":a.oldRow,onChange:r.change},null,40,["old-row","onChange"])),S(i,{verb:r.verb,table:a.table,label:a.label,disabled:!n.submitButtonEnabled,onSubmit:r.submit,onCancel:t[0]||(t[0]=s=>n.showDialog=!1)},null,8,["verb","table","label","disabled","onSubmit"])]),_:1},512)]),_:1},16,["modelValue"])}const Ll=Z(Ha,[["render",ja],["__scopeId","data-v-b61575f9"]]),Ma={name:"GroupChip",props:{titleKey:{type:String,default:""},groupType:{type:Boolean,default:void 0},item:{type:Object,default:void 0}},computed:{classes(){let e={};return this.groupType&&this.item&&(e.include=!this.item.exclude,e.exclude=this.item.exclude),e},text(){return this.item&&this.titleKey?this.item[this.titleKey]:""},value(){if(this.item)return this.groupType?this.item.exclude:this.item.value}}};function za(e,t,a,l,n,r){return G(),K(ct,{class:Y(r.classes),text:r.text,value:r.value},null,8,["class","text","value"])}const mt=Z(Ma,[["render",za],["__scopeId","data-v-fe7786ef"]]),Ka={name:"AdminRelationPicker",components:{GroupChip:mt},props:{objs:{type:Object,required:!0},titleKey:{type:String,required:!0},groupType:{type:Boolean,default:!1}},computed:{vuetifyItems(){const e=[];for(const t of this.objs)e.push({...t,value:t.pk,title:t[this.titleKey]});return e}}};function qa(e,t,a,l,n,r){const o=se("GroupChip");return G(),K(qe,T({chips:!0,"closable-chips":!0,density:"compact",multiple:!0,items:r.vuetifyItems},e.$attrs),{chip:le(({item:i})=>[S(o,{"title-key":"title",item:i,"group-type":a.groupType},null,8,["item","group-type"])]),_:1},16,["items"])}const Nl=Z(Ka,[["render",qa]]);function Ua(){const e=X([]);la(()=>e.value=[]);function t(a,l){e.value[l]=a}return{refs:e,updateRef:t}}const Wa=F({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:O,default:"$first"},prevIcon:{type:O,default:"$prev"},nextIcon:{type:O,default:"$next"},lastIcon:{type:O,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...ka(),...ia(),...Ie(),...Pa(),...wa(),...Sa(),...xa({tag:"nav"}),...sa(),...pa({variant:"text"})},"VPagination"),at=U()({name:"VPagination",props:Wa(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:a,emit:l}=t;const n=J(e,"modelValue"),{t:r,n:o}=ue(),{isRtl:i}=na(),{themeClasses:s}=ra(e),{width:d}=ke(),f=ye(-1);he(void 0,{scoped:!0});const{resizeRef:b}=oa(x=>{if(!x.length)return;const{target:y,contentRect:c}=x[0],k=y.querySelector(".v-pagination__list > *");if(!k)return;const C=c.width,N=k.offsetWidth+parseFloat(getComputedStyle(k).marginRight)*2;f.value=g(C,N)}),u=_(()=>parseInt(e.length,10)),v=_(()=>parseInt(e.start,10)),w=_(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):f.value>=0?f.value:g(d.value,58));function g(x,y){const c=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((x-y*c)/y).toFixed(2))))}const m=_(()=>{if(u.value<=0||isNaN(u.value)||u.value>Number.MAX_SAFE_INTEGER)return[];if(w.value<=0)return[];if(w.value===1)return[n.value];if(u.value<=w.value)return ce(u.value,v.value);const x=w.value%2===0,y=x?w.value/2:Math.floor(w.value/2),c=x?y:y+1,k=u.value-y;if(c-n.value>=0)return[...ce(Math.max(1,w.value-1),v.value),e.ellipsis,u.value];if(n.value-k>=(x?1:0)){const C=w.value-1,N=u.value-C+v.value;return[v.value,e.ellipsis,...ce(C,N)]}else{const C=Math.max(1,w.value-2),N=C===1?n.value:n.value-Math.ceil(C/2)+v.value;return[v.value,e.ellipsis,...ce(C,N),e.ellipsis,u.value]}});function D(x,y,c){x.preventDefault(),n.value=y,c&&l(c,y)}const{refs:h,updateRef:I}=Ua();he({VPaginationBtn:{color:V(()=>e.color),border:V(()=>e.border),density:V(()=>e.density),size:V(()=>e.size),variant:V(()=>e.variant),rounded:V(()=>e.rounded),elevation:V(()=>e.elevation)}});const B=_(()=>m.value.map((x,y)=>{const c=k=>I(k,y);if(typeof x=="string")return{isActive:!1,key:`ellipsis-${y}`,page:x,props:{ref:c,ellipsis:!0,icon:!0,disabled:!0}};{const k=x===n.value;return{isActive:k,key:x,page:o(x),props:{ref:c,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:k?e.activeColor:e.color,"aria-current":k,"aria-label":r(k?e.currentPageAriaLabel:e.pageAriaLabel,x),onClick:C=>D(C,x)}}}})),P=_(()=>{const x=!!e.disabled||n.value<=v.value,y=!!e.disabled||n.value>=v.value+u.value-1;return{first:e.showFirstLastPage?{icon:i.value?e.lastIcon:e.firstIcon,onClick:c=>D(c,v.value,"first"),disabled:x,"aria-label":r(e.firstAriaLabel),"aria-disabled":x}:void 0,prev:{icon:i.value?e.nextIcon:e.prevIcon,onClick:c=>D(c,n.value-1,"prev"),disabled:x,"aria-label":r(e.previousAriaLabel),"aria-disabled":x},next:{icon:i.value?e.prevIcon:e.nextIcon,onClick:c=>D(c,n.value+1,"next"),disabled:y,"aria-label":r(e.nextAriaLabel),"aria-disabled":y},last:e.showFirstLastPage?{icon:i.value?e.firstIcon:e.lastIcon,onClick:c=>D(c,v.value+u.value-1,"last"),disabled:y,"aria-label":r(e.lastAriaLabel),"aria-disabled":y}:void 0}});function R(){const x=n.value-v.value;h.value[x]?.$el.focus()}function L(x){x.key===Je.left&&!e.disabled&&n.value>Number(e.start)?(n.value=n.value-1,Qe(R)):x.key===Je.right&&!e.disabled&&n.value<v.value+u.value-1&&(n.value=n.value+1,Qe(R))}return ee(()=>S(e.tag,{ref:b,class:Y(["v-pagination",s.value,e.class]),style:rt(e.style),role:"navigation","aria-label":r(e.ariaLabel),onKeydown:L,"data-test":"v-pagination-root"},{default:()=>[p("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&p("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[a.first?a.first(P.value.first):S(z,T({_as:"VPaginationBtn"},P.value.first),null)]),p("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[a.prev?a.prev(P.value.prev):S(z,T({_as:"VPaginationBtn"},P.value.prev),null)]),B.value.map((x,y)=>p("li",{key:x.key,class:Y(["v-pagination__item",{"v-pagination__item--is-active":x.isActive}]),"data-test":"v-pagination-item"},[a.item?a.item(x):S(z,T({_as:"VPaginationBtn"},x.props),{default:()=>[x.page]})])),p("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[a.next?a.next(P.value.next):S(z,T({_as:"VPaginationBtn"},P.value.next),null)]),e.showFirstLastPage&&p("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[a.last?a.last(P.value.last):S(z,T({_as:"VPaginationBtn"},P.value.last),null)])])]})),{}}}),Xa=F({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),gt=Symbol.for("vuetify:data-table-pagination");function Ya(e){const t=J(e,"page",void 0,l=>Number(l??1)),a=J(e,"itemsPerPage",void 0,l=>Number(l??10));return{page:t,itemsPerPage:a}}function Ja(e){const{page:t,itemsPerPage:a,itemsLength:l}=e,n=_(()=>a.value===-1?0:a.value*(t.value-1)),r=_(()=>a.value===-1?l.value:Math.min(l.value,n.value+a.value)),o=_(()=>a.value===-1||l.value===0?1:Math.ceil(l.value/a.value));ze([t,o],()=>{t.value>o.value&&(t.value=o.value)});function i(u){a.value=u,t.value=1}function s(){t.value=Le(t.value+1,1,o.value)}function d(){t.value=Le(t.value-1,1,o.value)}function f(u){t.value=Le(u,1,o.value)}const b={page:t,itemsPerPage:a,startIndex:n,stopIndex:r,pageCount:o,itemsLength:l,nextPage:s,prevPage:d,setPage:f,setItemsPerPage:i};return re(gt,b),b}function Qa(){const e=ne(gt);if(!e)throw new Error("Missing pagination!");return e}function Za(e){const t=ot("usePaginatedItems"),{items:a,startIndex:l,stopIndex:n,itemsPerPage:r}=e,o=_(()=>r.value<=0?a.value:a.value.slice(l.value,n.value));return ze(o,i=>{t.emit("update:currentItems",i)},{immediate:!0}),{paginatedItems:o}}const bt=F({color:String,prevIcon:{type:O,default:"$prev"},nextIcon:{type:O,default:"$next"},firstIcon:{type:O,default:"$first"},lastIcon:{type:O,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),lt=U()({name:"VDataTableFooter",props:bt(),setup(e,t){let{slots:a}=t;const{t:l}=ue(),{page:n,pageCount:r,startIndex:o,stopIndex:i,itemsLength:s,itemsPerPage:d,setItemsPerPage:f}=Qa(),b=_(()=>e.itemsPerPageOptions.map(u=>typeof u=="number"?{value:u,title:u===-1?l("$vuetify.dataFooter.itemsPerPageAll"):String(u)}:{...u,title:isNaN(Number(u.title))?l(u.title):u.title}));return ee(()=>{const u=at.filterProps(e);return p("div",{class:"v-data-table-footer"},[a.prepend?.(),p("div",{class:"v-data-table-footer__items-per-page"},[p("span",null,[l(e.itemsPerPageText)]),S(qe,{items:b.value,itemColor:e.color,modelValue:d.value,"onUpdate:modelValue":v=>f(Number(v)),density:"compact",variant:"outlined","aria-label":l(e.itemsPerPageText),hideDetails:!0},null)]),p("div",{class:"v-data-table-footer__info"},[p("div",null,[l(e.pageText,s.value?o.value+1:0,i.value,s.value)])]),p("div",{class:"v-data-table-footer__pagination"},[S(at,T({modelValue:n.value,"onUpdate:modelValue":v=>n.value=v,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:r.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},de(u,["color"])),null)])])}),{}}}),ie=ua({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,indent:[Number,String],empty:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:a}=t;const l=e.tag??"td",n=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return S(l,{class:Y(["v-data-table__td",{"v-data-table-column--fixed":n==="start","v-data-table-column--fixed-end":n==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap,"v-data-table-column--empty":e.empty},`v-data-table-column--align-${e.align}`]),style:{height:A(e.height),width:A(e.width),maxWidth:A(e.maxWidth),left:n==="start"?A(e.fixedOffset||null):void 0,right:n==="end"?A(e.fixedEndOffset||null):void 0,paddingInlineStart:e.indent?A(e.indent):void 0}},{default:()=>[a.default?.()]})}),el=F({headers:Array},"DataTable-header"),ht=Symbol.for("vuetify:data-table-headers"),yt={title:"",sortable:!1},tl={...yt,width:48};function al(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(a=>({element:a,priority:0}));return{enqueue:(a,l)=>{let n=!1;for(let r=0;r<t.length;r++)if(t[r].priority>l){t.splice(r,0,{element:a,priority:l}),n=!0;break}n||t.push({element:a,priority:l})},size:()=>t.length,count:()=>{let a=0;if(!t.length)return 0;const l=Math.floor(t[0].priority);for(let n=0;n<t.length;n++)Math.floor(t[n].priority)===l&&(a+=1);return a},dequeue:()=>t.shift()}}function je(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const a of e.children)je(a,t);return t}function pt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const a of e)a.key&&t.add(a.key),a.children&&pt(a.children,t);return t}function ll(e){if(e.key){if(e.key==="data-table-group")return yt;if(["data-table-expand","data-table-select"].includes(e.key))return tl}}function Ue(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(a=>Ue(a,t+1))):t}function nl(e){let t=!1;function a(r,o){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(r)if(i!=="none"&&(r.fixed=i),r.fixed===!0&&(r.fixed="start"),r.fixed===o)if(r.children)if(o==="start")for(let s=r.children.length-1;s>=0;s--)a(r.children[s],o,o);else for(let s=0;s<r.children.length;s++)a(r.children[s],o,o);else!t&&o==="start"?r.lastFixed=!0:!t&&o==="end"?r.firstFixedEnd=!0:isNaN(Number(r.width))?fa(`Multiple fixed columns should have a static width (key: ${r.key})`):r.minWidth=Math.max(Number(r.width)||0,Number(r.minWidth)||0),t=!0;else if(r.children)if(o==="start")for(let s=r.children.length-1;s>=0;s--)a(r.children[s],o);else for(let s=0;s<r.children.length;s++)a(r.children[s],o);else t=!1}for(let r=e.length-1;r>=0;r--)a(e[r],"start");for(let r=0;r<e.length;r++)a(e[r],"end");let l=0;for(let r=0;r<e.length;r++)l=xt(e[r],l);let n=0;for(let r=e.length-1;r>=0;r--)n=St(e[r],n)}function xt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const a of e.children)t=xt(a,t)}else e.fixed&&e.fixed!=="end"&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function St(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const a of e.children)t=St(a,t)}else e.fixed==="end"&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function rl(e,t){const a=[];let l=0;const n=al(e);for(;n.size()>0;){let o=n.count();const i=[];let s=1;for(;o>0;){const{element:d,priority:f}=n.dequeue(),b=t-l-Ue(d);if(i.push({...d,rowspan:b??1,colspan:d.children?je(d).length:1}),d.children)for(const u of d.children){const v=f%1+s/Math.pow(10,l+2);n.enqueue(u,l+b+v)}s+=1,o-=1}l+=1,a.push(i)}return{columns:e.map(o=>je(o)).flat(),headers:a}}function wt(e){const t=[];for(const a of e){const l={...ll(a),...a},n=l.key??(typeof l.value=="string"?l.value:null),r=l.value??n??null,o={...l,key:n,value:r,sortable:l.sortable??(l.key!=null||!!l.sort),children:l.children?wt(l.children):void 0};t.push(o)}return t}function Pt(e,t){const a=X([]),l=X([]),n=X({}),r=X({}),o=X({});da(()=>{const d=(e.headers||Object.keys(e.items[0]??{}).map(g=>({key:g,title:ca(g)}))).slice(),f=pt(d);t?.groupBy?.value.length&&!f.has("data-table-group")&&d.unshift({key:"data-table-group",title:"Group"}),t?.showSelect?.value&&!f.has("data-table-select")&&d.unshift({key:"data-table-select"}),t?.showExpand?.value&&!f.has("data-table-expand")&&d.push({key:"data-table-expand"});const b=wt(d);nl(b);const u=Math.max(...b.map(g=>Ue(g)))+1,v=rl(b,u);a.value=v.headers,l.value=v.columns;const w=v.headers.flat(1);for(const g of w)g.key&&(g.sortable&&(g.sort&&(n.value[g.key]=g.sort),g.sortRaw&&(r.value[g.key]=g.sortRaw)),g.filter&&(o.value[g.key]=g.filter))});const i={headers:a,columns:l,sortFunctions:n,sortRawFunctions:r,filterFunctions:o};return re(ht,i),i}function _e(){const e=ne(ht);if(!e)throw new Error("Missing headers!");return e}const ol={showSelectAll:!1,allSelected:()=>[],select:e=>{let{items:t,value:a}=e;return new Set(a?[t[0]?.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},kt={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:a,selected:l}=e;for(const n of t)a?l.add(n.value):l.delete(n.value);return l},selectAll:e=>{let{value:t,currentPage:a,selected:l}=e;return kt.select({items:a,value:t,selected:l})}},sl={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:a,selected:l}=e;for(const n of t)a?l.add(n.value):l.delete(n.value);return l},selectAll:e=>{let{value:t,allItems:a}=e;return new Set(t?a.map(l=>l.value):[])}},il=F({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:Function},"DataTable-select"),It=Symbol.for("vuetify:data-table-selection");function _t(e,t){let{allItems:a,currentPage:l}=t;const n=J(e,"modelValue",e.modelValue,h=>{const I=e.valueComparator;return I?new Set(fe(h).map(B=>a.value.find(P=>I(B,P.value))?.value??B)):new Set(fe(h).map(B=>va(B)?a.value.find(P=>B===P.value)?.value??B:a.value.find(P=>ut(B,P.value))?.value??B))},h=>[...h.values()]),r=_(()=>a.value.filter(h=>h.selectable)),o=_(()=>l.value.filter(h=>h.selectable)),i=_(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return ol;case"all":return sl;default:return kt}}),s=ye(null);function d(h){return fe(h).every(I=>n.value.has(I.value))}function f(h){return fe(h).some(I=>n.value.has(I.value))}function b(h,I){const B=i.value.select({items:h,value:I,selected:new Set(n.value)});n.value=B}function u(h,I,B){const P=[];if(I=I??l.value.findIndex(R=>R.value===h.value),e.selectStrategy!=="single"&&B?.shiftKey&&s.value!==null){const[R,L]=[s.value,I].sort((x,y)=>x-y);P.push(...l.value.slice(R,L+1).filter(x=>x.selectable))}else P.push(h),s.value=I;b(P,!d([h]))}function v(h){const I=i.value.selectAll({value:h,allItems:r.value,currentPage:o.value,selected:new Set(n.value)});n.value=I}const w=_(()=>n.value.size>0),g=_(()=>{const h=i.value.allSelected({allItems:r.value,currentPage:o.value});return!!h.length&&d(h)}),m=V(()=>i.value.showSelectAll),D={toggleSelect:u,select:b,selectAll:v,isSelected:d,isSomeSelected:f,someSelected:w,allSelected:g,showSelectAll:m,lastSelectedIndex:s,selectStrategy:i};return re(It,D),D}function De(){const e=ne(It);if(!e)throw new Error("Missing selection!");return e}const ul=F({initialSortOrder:{type:String,default:"asc",validator:e=>!e||["asc","desc"].includes(e)},sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:{type:[Boolean,Object],default:!1},mustSort:Boolean},"DataTable-sort"),Dt=Symbol.for("vuetify:data-table-sort");function Vt(e){const t=V(()=>e.initialSortOrder),a=J(e,"sortBy"),l=V(()=>e.mustSort),n=V(()=>e.multiSort);return{initialSortOrder:t,sortBy:a,multiSort:n,mustSort:l}}function dl(e,t){if(!ma(e))return{active:!!e};const{key:a,mode:l,modifier:n}=e,r=n==="alt"&&t?.altKey||n==="shift"&&t?.shiftKey;return{active:!a||t?.ctrlKey||t?.metaKey||!1,mode:r?l==="append"?"prepend":"append":l}}function Tt(e){const{initialSortOrder:t,sortBy:a,mustSort:l,multiSort:n,page:r}=e,o=(d,f)=>{if(d.key==null)return;let b=a.value.map(g=>({...g}))??[];const u=b.find(g=>g.key===d.key),v=t.value,w=t.value==="desc"?"asc":"desc";if(u)u.order===w?l.value&&b.length===1?u.order=t.value:b=b.filter(g=>g.key!==d.key):u.order=w;else{const{active:g,mode:m}=dl(n.value,f);g?m==="prepend"?b.unshift({key:d.key,order:v}):b.push({key:d.key,order:v}):b=[{key:d.key,order:v}]}a.value=b,r&&(r.value=1)};function i(d){return!!a.value.find(f=>f.key===d.key)}const s={sortBy:a,toggleSort:o,isSorted:i};return re(Dt,s),s}function Ct(){const e=ne(Dt);if(!e)throw new Error("Missing sort!");return e}function Bt(e,t,a,l){const n=ue();return{sortedItems:_(()=>a.value.length?cl(t.value,a.value,n.current.value,{transform:l?.transform,sortFunctions:{...e.customKeySort,...l?.sortFunctions?.value},sortRawFunctions:l?.sortRawFunctions?.value}):t.value)}}function cl(e,t,a,l){const n=new Intl.Collator(a,{sensitivity:"accent",usage:"sort"});return e.map(o=>[o,l?.transform?l.transform(o):o]).sort((o,i)=>{for(let s=0;s<t.length;s++){let d=!1;const f=t[s].key,b=t[s].order??"asc";if(b===!1)continue;let u=pe(o[1],f),v=pe(i[1],f),w=o[0].raw,g=i[0].raw;if(b==="desc"&&([u,v]=[v,u],[w,g]=[g,w]),l?.sortRawFunctions?.[f]){const m=l.sortRawFunctions[f](w,g);if(m==null)continue;if(d=!0,m)return m}if(l?.sortFunctions?.[f]){const m=l.sortFunctions[f](u,v);if(m==null)continue;if(d=!0,m)return m}if(!d&&(u instanceof Date&&v instanceof Date&&(u=u.getTime(),v=v.getTime()),[u,v]=[u,v].map(m=>m!=null?m.toString().toLocaleLowerCase():m),u!==v))return ve(u)&&ve(v)?0:ve(u)?-1:ve(v)?1:!isNaN(u)&&!isNaN(v)?Number(u)-Number(v):n.compare(u,v)}return 0}).map(o=>{let[i]=o;return i})}const Ft=F({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,initialSortOrder:String,sortAscIcon:{type:O,default:"$sortAsc"},sortDescIcon:{type:O,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...Ie(),...Ke(),...Ia()},"VDataTableHeaders"),we=U()({name:"VDataTableHeaders",props:Ft(),setup(e,t){let{slots:a}=t;const{t:l}=ue(),{toggleSort:n,sortBy:r,isSorted:o}=Ct(),{someSelected:i,allSelected:s,selectAll:d,showSelectAll:f}=De(),{columns:b,headers:u}=_e(),{loaderClasses:v}=_a(e);function w(y,c){if(!(e.sticky||e.fixedHeader)&&!y.fixed)return;const k=typeof y.fixed=="string"?y.fixed:y.fixed?"start":"none";return{position:"sticky",left:k==="start"?A(y.fixedOffset):void 0,right:k==="end"?A(y.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${c})`:void 0}}function g(y,c){y.key==="Enter"&&!e.disableSort&&n(c,y)}function m(y){const c=r.value.find(k=>k.key===y.key);return!c&&e.initialSortOrder==="asc"||c?.order==="asc"?e.sortAscIcon:e.sortDescIcon}const{backgroundColorClasses:D,backgroundColorStyles:h}=Da(()=>e.color),{displayClasses:I,mobile:B}=ke(e),P=_(()=>({headers:u.value,columns:b.value,toggleSort:n,isSorted:o,sortBy:r.value,someSelected:i.value,allSelected:s.value,selectAll:d,getSortIcon:m})),R=_(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},I.value,v.value]),L=y=>{let{column:c,x:k,y:C}=y;const N=c.key==="data-table-select"||c.key==="data-table-expand",te=c.key==="data-table-group"&&c.width===0&&!c.title,oe=T(e.headerProps??{},c.headerProps??{});return S(ie,T({tag:"th",align:c.align,class:[{"v-data-table__th--sortable":c.sortable&&!e.disableSort,"v-data-table__th--sorted":o(c),"v-data-table__th--fixed":c.fixed},...R.value],style:{width:A(c.width),minWidth:A(c.minWidth),maxWidth:A(c.maxWidth),...w(c,C)},colspan:c.colspan,rowspan:c.rowspan,fixed:c.fixed,nowrap:c.nowrap,lastFixed:c.lastFixed,firstFixedEnd:c.firstFixedEnd,noPadding:N,empty:te,tabindex:c.sortable?0:void 0,onClick:c.sortable?H=>n(c,H):void 0,onKeydown:c.sortable?H=>g(H,c):void 0},oe),{default:()=>{const H=`header.${c.key}`,q={column:c,selectAll:d,isSorted:o,toggleSort:n,sortBy:r.value,someSelected:i.value,allSelected:s.value,getSortIcon:m};return a[H]?a[H](q):te?"":c.key==="data-table-select"?a["header.data-table-select"]?.(q)??(f.value&&S(xe,{color:e.color,density:e.density,modelValue:s.value,indeterminate:i.value&&!s.value,"onUpdate:modelValue":d},null)):p("div",{class:"v-data-table-header__content"},[p("span",null,[c.title]),c.sortable&&!e.disableSort&&S(et,{key:"icon",class:"v-data-table-header__sort-icon",icon:m(c)},null),e.multiSort&&o(c)&&p("div",{key:"badge",class:Y(["v-data-table-header__sort-badge",...D.value]),style:rt(h.value)},[r.value.findIndex(W=>W.key===c.key)+1])])}})},x=()=>{const y=_(()=>b.value.filter(k=>k?.sortable&&!e.disableSort)),c=b.value.find(k=>k.key==="data-table-select");return S(ie,T({tag:"th",class:[...R.value],colspan:u.value.length+1},e.headerProps),{default:()=>[p("div",{class:"v-data-table-header__content"},[S(qe,{chips:!0,color:e.color,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:y.value,label:l("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>r.value=[]},{append:c?()=>S(xe,{color:e.color,density:"compact",modelValue:s.value,indeterminate:i.value&&!s.value,"onUpdate:modelValue":()=>d(!s.value)},null):void 0,chip:k=>S(ct,{onClick:k.item.raw?.sortable?()=>n(k.item.raw):void 0,onMousedown:C=>{C.preventDefault(),C.stopPropagation()}},{default:()=>[k.item.title,S(et,{class:Y(["v-data-table__td-sort-icon",o(k.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:m(k.item.raw),size:"small"},null)]})})])]})};ee(()=>B.value?p("tr",null,[S(x,null,null)]):p(Q,null,[a.headers?a.headers(P.value):u.value.map((y,c)=>p("tr",null,[y.map((k,C)=>S(L,{column:k,x:C,y:c},null))])),e.loading&&p("tr",{class:"v-data-table-progress"},[p("th",{colspan:b.value.length},[S(Va,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"||e.loading==="true"?e.color:e.loading,indeterminate:!0},{default:a.loader})])])]))}}),Rt=F({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),At=Symbol.for("vuetify:data-table-group");function Ot(e){return{groupBy:J(e,"groupBy")}}function Et(e){const{disableSort:t,groupBy:a,sortBy:l}=e,n=X(new Set),r=_(()=>a.value.map(f=>({...f,order:f.order??!1})).concat(t?.value?[]:l.value));function o(f){return n.value.has(f.id)}function i(f){const b=new Set(n.value);o(f)?b.delete(f.id):b.add(f.id),n.value=b}function s(f){function b(u){const v=[];for(const w of u.items)"type"in w&&w.type==="group"?v.push(...b(w)):v.push(w);return[...new Set(v)]}return b({items:f})}const d={sortByWithGroups:r,toggleGroup:i,opened:n,groupBy:a,extractRows:s,isGroupOpen:o};return re(At,d),d}function $t(){const e=ne(At);if(!e)throw new Error("Missing group!");return e}function fl(e,t){if(!e.length)return[];const a=new Map;for(const l of e){const n=pe(l.raw,t);a.has(n)||a.set(n,[]),a.get(n).push(l)}return a}function Lt(e,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const n=fl(e,t[0]),r=[],o=t.slice(1);return n.forEach((i,s)=>{const d=t[0],f=`${l}_${d}_${s}`;r.push({depth:a,id:f,key:d,value:s,items:o.length?Lt(i,o,a+1,f):i,type:"group"})}),r}function Nt(e,t,a){const l=[];for(const n of e)"type"in n&&n.type==="group"?(n.value!=null&&l.push(n),(t.has(n.id)||n.value==null)&&(l.push(...Nt(n.items,t,a)),a&&l.push({...n,type:"group-summary"}))):l.push(n);return l}function Gt(e,t,a,l){return{flatItems:_(()=>{if(!t.value.length)return e.value;const r=Lt(e.value,t.value.map(o=>o.key));return Nt(r,a.value,ga(l))})}}const Ht=F({item:{type:Object,required:!0},groupCollapseIcon:{type:O,default:"$tableGroupCollapse"},groupExpandIcon:{type:O,default:"$tableGroupExpand"},...Ie()},"VDataTableGroupHeaderRow"),vl=U()({name:"VDataTableGroupHeaderRow",props:Ht(),setup(e,t){let{slots:a}=t;const{isGroupOpen:l,toggleGroup:n,extractRows:r}=$t(),{isSelected:o,isSomeSelected:i,select:s}=De(),{columns:d}=_e(),f=_(()=>r([e.item])),b=V(()=>d.value.length-(d.value.some(u=>u.key==="data-table-select")?1:0));return()=>p("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[d.value.map(u=>{if(u.key==="data-table-group"){const v=l(e.item)?e.groupCollapseIcon:e.groupExpandIcon,w=()=>n(e.item);return a["data-table-group"]?.({item:e.item,count:f.value.length,props:{icon:v,onClick:w}})??S(ie,{class:"v-data-table-group-header-row__column",colspan:b.value},{default:()=>[S(z,{size:"small",variant:"text",icon:v,onClick:w},null),p("span",null,[e.item.value]),p("span",null,[Ge("("),f.value.length,Ge(")")])]})}else if(u.key==="data-table-select"){const v=f.value.filter(D=>D.selectable),w=v.length>0&&o(v),g=i(v)&&!w,m=D=>s(v,D);return a["data-table-select"]?.({props:{modelValue:w,indeterminate:g,"onUpdate:modelValue":m}})??S(ie,{class:"v-data-table__td--select-row",noPadding:!0},{default:()=>[S(xe,{density:e.density,disabled:v.length===0,modelValue:w,indeterminate:g,"onUpdate:modelValue":m},null)]})}return""})])}}),ml=F({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),jt=Symbol.for("vuetify:datatable:expanded");function Mt(e){const t=V(()=>e.expandOnClick),a=J(e,"expanded",e.expanded,i=>new Set(i),i=>[...i.values()]);function l(i,s){const d=new Set(a.value),f=me(i.value);if(s)d.add(f);else{const b=[...a.value].find(u=>me(u)===f);d.delete(b)}a.value=d}function n(i){const s=me(i.value);return[...a.value].some(d=>me(d)===s)}function r(i){l(i,!n(i))}const o={expand:l,expanded:a,expandOnClick:t,isExpanded:n,toggleExpand:r};return re(jt,o),o}function zt(){const e=ne(jt);if(!e)throw new Error("foo");return e}const Kt=F({color:String,index:Number,item:Object,cellProps:[Object,Function],collapseIcon:{type:O,default:"$collapse"},expandIcon:{type:O,default:"$expand"},onClick:Ne(),onContextmenu:Ne(),onDblclick:Ne(),...Ie(),...Ke()},"VDataTableRow"),qt=U()({name:"VDataTableRow",props:Kt(),setup(e,t){let{slots:a}=t;const{displayClasses:l,mobile:n}=ke(e,"v-data-table__tr"),{isSelected:r,toggleSelect:o,someSelected:i,allSelected:s,selectAll:d}=De(),{isExpanded:f,toggleExpand:b}=zt(),{toggleSort:u,sortBy:v,isSorted:w}=Ct(),{columns:g}=_e();ee(()=>p("tr",{class:Y(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},l.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&g.value.map((m,D)=>{const h=e.item,I=`item.${m.key}`,B=`header.${m.key}`,P={index:e.index,item:h.raw,internalItem:h,value:pe(h.columns,m.key),column:m,isSelected:r,toggleSelect:o,isExpanded:f,toggleExpand:b},R={column:m,selectAll:d,isSorted:w,toggleSort:u,sortBy:v.value,someSelected:i.value,allSelected:s.value,getSortIcon:()=>""},L=typeof e.cellProps=="function"?e.cellProps({index:P.index,item:P.item,internalItem:P.internalItem,value:P.value,column:m}):e.cellProps,x=typeof m.cellProps=="function"?m.cellProps({index:P.index,item:P.item,internalItem:P.internalItem,value:P.value}):m.cellProps,y=m.key==="data-table-select"||m.key==="data-table-expand",c=m.key==="data-table-group"&&m.width===0&&!m.title;return S(ie,T({align:m.align,indent:m.indent,class:{"v-data-table__td--expanded-row":m.key==="data-table-expand","v-data-table__td--select-row":m.key==="data-table-select"},fixed:m.fixed,fixedOffset:m.fixedOffset,fixedEndOffset:m.fixedEndOffset,lastFixed:m.lastFixed,firstFixedEnd:m.firstFixedEnd,maxWidth:n.value?void 0:m.maxWidth,noPadding:y,empty:c,nowrap:m.nowrap,width:n.value?void 0:m.width},L,x),{default:()=>{if(m.key==="data-table-select")return a["item.data-table-select"]?.({...P,props:{color:e.color,disabled:!h.selectable,modelValue:r([h]),onClick:ge(()=>o(h),["stop"])}})??S(xe,{color:e.color,disabled:!h.selectable,density:e.density,modelValue:r([h]),onClick:ge(C=>o(h,e.index,C),["stop"])},null);if(m.key==="data-table-expand")return a["item.data-table-expand"]?.({...P,props:{icon:f(h)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:ge(()=>b(h),["stop"])}})??S(z,{icon:f(h)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:ge(()=>b(h),["stop"])},null);if(a[I]&&!n.value)return a[I](P);const k=Me(P.value);return n.value?p(Q,null,[p("div",{class:"v-data-table__td-title"},[a[B]?.(R)??m.title]),p("div",{class:"v-data-table__td-value"},[a[I]?.(P)??k])]):k}})})]))}}),Ut=F({color:String,loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...He(Kt(),["collapseIcon","expandIcon","density"]),...He(Ht(),["groupCollapseIcon","groupExpandIcon","density"]),...Ke()},"VDataTableRows"),Pe=U()({name:"VDataTableRows",inheritAttrs:!1,props:Ut(),setup(e,t){let{attrs:a,slots:l}=t;const{columns:n}=_e(),{expandOnClick:r,toggleExpand:o,isExpanded:i}=zt(),{isSelected:s,toggleSelect:d}=De(),{toggleGroup:f,isGroupOpen:b}=$t(),{t:u}=ue(),{mobile:v}=ke(e);return ee(()=>{const w=He(e,["groupCollapseIcon","groupExpandIcon","density"]);return e.loading&&(!e.items.length||l.loading)?p("tr",{class:"v-data-table-rows-loading",key:"loading"},[p("td",{colspan:n.value.length},[l.loading?.()??u(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?p("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[p("td",{colspan:n.value.length},[l["no-data"]?.()??u(e.noDataText)])]):p(Q,null,[e.items.map((g,m)=>{if(g.type==="group"){const I={index:m,item:g,columns:n.value,isExpanded:i,toggleExpand:o,isSelected:s,toggleSelect:d,toggleGroup:f,isGroupOpen:b};return l["group-header"]?l["group-header"](I):S(vl,T({key:`group-header_${g.id}`,item:g},tt(a,":groupHeader",()=>I),w),l)}if(g.type==="group-summary"){const I={index:m,item:g,columns:n.value,toggleGroup:f};return l["group-summary"]?.(I)??""}const D={index:g.virtualIndex??m,item:g.raw,internalItem:g,columns:n.value,isExpanded:i,toggleExpand:o,isSelected:s,toggleSelect:d},h={...D,props:T({key:`item_${g.key??g.index}`,onClick:r.value?()=>{o(g)}:void 0,index:m,item:g,color:e.color,cellProps:e.cellProps,collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,density:e.density,mobile:v.value},tt(a,":row",()=>D),typeof e.rowProps=="function"?e.rowProps({item:D.item,index:D.index,internalItem:D.internalItem}):e.rowProps)};return p(Q,{key:h.props.key},[l.item?l.item(h):S(qt,h.props,l),i(g)&&l["expanded-row"]?.(D)])})])}),{}}}),gl=F({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function bl(e,t,a,l){const n=e.returnObject?t:be(t,e.itemValue),r=be(t,e.itemSelectable,!0),o=l.reduce((i,s)=>(s.key!=null&&(i[s.key]=be(t,s.value)),i),{});return{type:"item",key:e.returnObject?be(t,e.itemValue):n,index:a,value:n,selectable:r,columns:o,raw:t}}function hl(e,t,a){return t.map((l,n)=>bl(e,l,n,a))}function Wt(e,t){return{items:_(()=>hl(e,e.items,t.value))}}function Xt(e){let{page:t,itemsPerPage:a,sortBy:l,groupBy:n,search:r}=e;const o=ot("VDataTable"),i=()=>({page:t.value,itemsPerPage:a.value,sortBy:l.value,groupBy:n.value,search:r.value});let s=null;ze(i,d=>{ut(s,d)||(s&&s.search!==d.search&&(t.value=1),o.emit("update:options",d),s=d)},{deep:!0,immediate:!0})}const Yt=F({...Ut(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...ml(),...Rt(),...el(),...gl(),...il(),...ul(),...de(Ft(),["multiSort","initialSortOrder"]),...Oa()},"DataTable"),yl=F({...Xa(),...Yt(),...ft(),...bt()},"VDataTable");U()({name:"VDataTable",props:yl(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:a,slots:l}=t;const{groupBy:n}=Ot(e),{initialSortOrder:r,sortBy:o,multiSort:i,mustSort:s}=Vt(e),{page:d,itemsPerPage:f}=Ya(e),{disableSort:b}=st(e),{columns:u,headers:v,sortFunctions:w,sortRawFunctions:g,filterFunctions:m}=Pt(e,{groupBy:n,showSelect:V(()=>e.showSelect),showExpand:V(()=>e.showExpand)}),{items:D}=Wt(e,u),h=V(()=>e.search),{filteredItems:I}=vt(e,D,h,{transform:j=>j.columns,customKeyFilter:m}),{toggleSort:B}=Tt({initialSortOrder:r,sortBy:o,multiSort:i,mustSort:s,page:d}),{sortByWithGroups:P,opened:R,extractRows:L,isGroupOpen:x,toggleGroup:y}=Et({groupBy:n,sortBy:o,disableSort:b}),{sortedItems:c}=Bt(e,I,P,{transform:j=>({...j.raw,...j.columns}),sortFunctions:w,sortRawFunctions:g}),{flatItems:k}=Gt(c,n,R,()=>!!l["group-summary"]),C=_(()=>k.value.length),{startIndex:N,stopIndex:te,pageCount:oe,setItemsPerPage:H}=Ja({page:d,itemsPerPage:f,itemsLength:C}),{paginatedItems:q}=Za({items:k,startIndex:N,stopIndex:te,itemsPerPage:f}),W=_(()=>L(q.value)),{isSelected:Ve,select:Te,selectAll:Ce,toggleSelect:Be,someSelected:Fe,allSelected:Re}=_t(e,{allItems:D,currentPage:W}),{isExpanded:Ae,toggleExpand:Oe}=Mt(e);Xt({page:d,itemsPerPage:f,sortBy:o,groupBy:n,search:h}),he({VDataTableRows:{hideNoData:V(()=>e.hideNoData),noDataText:V(()=>e.noDataText),loading:V(()=>e.loading),loadingText:V(()=>e.loadingText)}});const $=_(()=>({page:d.value,itemsPerPage:f.value,sortBy:o.value,pageCount:oe.value,toggleSort:B,setItemsPerPage:H,someSelected:Fe.value,allSelected:Re.value,isSelected:Ve,select:Te,selectAll:Ce,toggleSelect:Be,isExpanded:Ae,toggleExpand:Oe,isGroupOpen:x,toggleGroup:y,items:W.value.map(j=>j.raw),internalItems:W.value,groupedItems:q.value,columns:u.value,headers:v.value}));return ee(()=>{const j=lt.filterProps(e),Ee=we.filterProps(de(e,["multiSort"])),M=Pe.filterProps(e),E=Se.filterProps(e);return S(Se,T({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},E,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>l.top?.($.value),default:()=>l.default?l.default($.value):p(Q,null,[l.colgroup?.($.value),!e.hideDefaultHeader&&p("thead",{key:"thead"},[S(we,T(Ee,{multiSort:!!e.multiSort}),l)]),l.thead?.($.value),!e.hideDefaultBody&&p("tbody",null,[l["body.prepend"]?.($.value),l.body?l.body($.value):S(Pe,T(a,M,{items:q.value}),l),l["body.append"]?.($.value)]),l.tbody?.($.value),l.tfoot?.($.value)]),bottom:()=>l.bottom?l.bottom($.value):!e.hideDefaultFooter&&p(Q,null,[S(Ea,null,null),S(lt,j,{prepend:l["footer.prepend"]})])})}),{}}});const pl=F({...de(Yt(),["hideDefaultFooter"]),...Rt(),...Ra(),...ft()},"VDataTableVirtual"),xl=U()({name:"VDataTableVirtual",props:pl(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,t){let{attrs:a,slots:l}=t;const{groupBy:n}=Ot(e),{initialSortOrder:r,sortBy:o,multiSort:i,mustSort:s}=Vt(e),{disableSort:d}=st(e),{columns:f,headers:b,filterFunctions:u,sortFunctions:v,sortRawFunctions:w}=Pt(e,{groupBy:n,showSelect:V(()=>e.showSelect),showExpand:V(()=>e.showExpand)}),{items:g}=Wt(e,f),m=V(()=>e.search),{filteredItems:D}=vt(e,g,m,{transform:E=>E.columns,customKeyFilter:u}),{toggleSort:h}=Tt({initialSortOrder:r,sortBy:o,multiSort:i,mustSort:s}),{sortByWithGroups:I,opened:B,extractRows:P,isGroupOpen:R,toggleGroup:L}=Et({groupBy:n,sortBy:o,disableSort:d}),{sortedItems:x}=Bt(e,D,I,{transform:E=>({...E.raw,...E.columns}),sortFunctions:v,sortRawFunctions:w}),{flatItems:y}=Gt(x,n,B,()=>!!l["group-summary"]),c=_(()=>P(y.value)),{isSelected:k,select:C,selectAll:N,toggleSelect:te,someSelected:oe,allSelected:H}=_t(e,{allItems:c,currentPage:c}),{isExpanded:q,toggleExpand:W}=Mt(e),{containerRef:Ve,markerRef:Te,paddingTop:Ce,paddingBottom:Be,computedItems:Fe,handleItemResize:Re,handleScroll:Ae,handleScrollend:Oe,calculateVisibleItems:$,scrollToIndex:j}=Fa(e,y),Ee=_(()=>Fe.value.map(E=>({...E.raw,virtualIndex:E.index})));Xt({sortBy:o,page:ye(1),itemsPerPage:ye(-1),groupBy:n,search:m}),he({VDataTableRows:{hideNoData:V(()=>e.hideNoData),noDataText:V(()=>e.noDataText),loading:V(()=>e.loading),loadingText:V(()=>e.loadingText)}});const M=_(()=>({sortBy:o.value,toggleSort:h,someSelected:oe.value,allSelected:H.value,isSelected:k,select:C,selectAll:N,toggleSelect:te,isExpanded:q,toggleExpand:W,isGroupOpen:R,toggleGroup:L,items:c.value.map(E=>E.raw),internalItems:c.value,groupedItems:y.value,columns:f.value,headers:b.value}));return ee(()=>{const E=we.filterProps(de(e,["multiSort"])),Jt=Pe.filterProps(e),Qt=Se.filterProps(e);return S(Se,T({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Qt,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>l.top?.(M.value),wrapper:()=>p("div",{ref:Ve,onScrollPassive:Ae,onScrollend:Oe,class:"v-table__wrapper",style:{height:A(e.height)}},[p("table",null,[l.colgroup?.(M.value),!e.hideDefaultHeader&&p("thead",{key:"thead"},[S(we,T(E,{multiSort:!!e.multiSort}),l)]),l.thead?.(M.value),!e.hideDefaultBody&&p("tbody",{key:"tbody"},[p("tr",{ref:Te,style:{height:A(Ce.value),border:0}},[p("td",{colspan:f.value.length,style:{height:0,border:0}},null)]),l["body.prepend"]?.(M.value),S(Pe,T(a,Jt,{items:Ee.value}),{...l,item:ae=>S(Aa,{key:ae.internalItem.index,renderless:!0,"onUpdate:height":$e=>Re(ae.internalItem.index,$e)},{default:$e=>{let{itemRef:We}=$e;return l.item?.({...ae,itemRef:We})??S(qt,T(ae.props,{ref:We,key:ae.internalItem.index,index:ae.index}),l)}})}),l["body.append"]?.(M.value),p("tr",{style:{height:A(Be.value),border:0}},[p("td",{colspan:f.value.length,style:{height:0,border:0}},null)])]),l.tbody?.(M.value),l.tfoot?.(M.value)])]),bottom:()=>l.bottom?.(M.value)})}),{calculateVisibleItems:$,scrollToIndex:j}}}),Sl={name:"AdminTable"};function wl(e,t,a,l,n,r){return G(),K(xl,{"fixed-header":"","item-value":"pk",mobile:e.$vuetify.display.xs},ba({_:2},[it(e.$slots,(o,i)=>({name:i,fn:le(s=>[ha(e.$slots,i,T({props:o},s),void 0,!0)])}))]),1032,["mobile"])}const Gl=Z(Sl,[["render",wl],["__scopeId","data-v-8b5d9183"]]),Pl={name:"AdminDeleteRowDialog",components:{ConfirmDialog:$a},props:{table:{type:String,required:!0},pk:{type:Number,required:!0},name:{type:String,required:!0}},data(){return{mdiTrashCan:ya}},computed:{titleText(){return`Delete ${this.table}`}},methods:{...nt(dt,["deleteRow"]),confirm(){this.deleteRow(this.table,this.pk),this.showDialog=!1}}};function kl(e,t,a,l,n,r){const o=se("ConfirmDialog");return G(),K(o,{icon:n.mdiTrashCan,"title-text":r.titleText,text:a.name,"confirm-text":r.titleText,onConfirm:r.confirm},null,8,["icon","title-text","text","confirm-text","onConfirm"])}const Hl=Z(Pl,[["render",kl]]),Il={name:"RelationChips",components:{GroupChip:mt},props:{pks:{type:Array,required:!0},objs:{type:Object,required:!0},titleKey:{type:String,required:!0},groupType:{type:Boolean,default:!1}},computed:{map(){const e={};for(const t of this.objs)e[t.pk]=t;return e}}};function _l(e,t,a,l,n,r){const o=se("GroupChip");return G(),Ze("span",null,[(G(!0),Ze(Q,null,it(a.pks,i=>(G(),K(o,{key:i,"title-key":a.titleKey,"group-type":a.groupType,item:r.map[i]},null,8,["title-key","group-type","item"]))),128))])}const jl=Z(Il,[["render",_l]]);export{Nl as A,mt as G,jl as R,Ll as a,Hl as b,Gl as c};
