import{g as D,u as $,c as n,n as S,d as T,p as E,L as R,b as r,aB as te,aE as Le,aY as xe,f as Ae,a as G,aC as oe,j as I,_ as C,G as k,H as h,A as f,I as L,y as c,O as Be,Q as Pe,x as m,D as K,q as se,bv as Ie,w as v,ac as ae,z as ne,m as x,e as Q,bw as De,bx as $e,be as Ee,t as X,r as Y,F as le,E as Me,K as Re,Z as W,by as Ue,v as Fe,br as Ne,M as ze,X as Oe,B as We,a7 as He,bz as Ke,an as je}from"./main-GE3uFePF.js";import{d as ie,C as U,V as re}from"./confirm-footer-CXU8cmV4.js";import{C as qe}from"./clipboard-YPo4v7k1.js";import{d as j,a as de,v as Ge,k as Qe,l as Xe,x as Ye,y as Ze,w as Je,o as V,A as ue,V as ce,K as et,f as tt,G as ot,n as me,L as st,N as fe,O as at,j as ge,h as he}from"./forwardRefs-RdtHqDjs.js";import{a as nt}from"./change-password-dialog-BDkTBQoq.js";import{S as lt,V as it}from"./VForm-BZgaRj-J.js";import{a as rt,c as Z,e as J,f as dt,m as ut,V as H}from"./VSelectionControl-C8DQf56i.js";import{u as ct}from"./ssrBoot-B0pswZbJ.js";const mt=E({text:String,...R(),...j()},"VToolbarTitle"),ft=D()({name:"VToolbarTitle",props:mt(),setup(e,t){let{slots:s}=t;return $(()=>{const a=!!(s.default||s.text||e.text);return n(e.tag,{class:T(["v-toolbar-title",e.class]),style:S(e.style)},{default:()=>[a&&r("div",{class:"v-toolbar-title__placeholder"},[s.text?s.text():e.text,s.default?.()])]})}),{}}}),gt=[null,"prominent","default","comfortable","compact"],ht=E({absolute:Boolean,collapse:Boolean,collapsePosition:{type:String,default:"start"},color:String,density:{type:String,default:"default",validator:e=>gt.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Ze(),...R(),...Ye(),...Xe(),...j({tag:"header"}),...oe()},"VToolbar"),vt=D()({name:"VToolbar",props:ht(),setup(e,t){let{slots:s}=t;const{backgroundColorClasses:a,backgroundColorStyles:o}=de(()=>e.color),{borderClasses:i}=Ge(e),{elevationClasses:d}=Je(e),{roundedClasses:u}=Qe(e),{themeClasses:l}=te(e),{rtlClasses:b}=Le(),g=xe(e.extended===null?!!s.extension?.():e.extended),_=G(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),p=G(()=>g.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return Ae({VBtn:{variant:"text"}}),$(()=>{const A=!!(e.title||s.title),B=!!(s.image||e.image),y=s.extension?.();return g.value=e.extended===null?!!y:e.extended,n(e.tag,{class:T(["v-toolbar",`v-toolbar--collapse-${e.collapsePosition}`,{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},a.value,i.value,d.value,u.value,l.value,b.value,e.class]),style:S([o.value,e.style])},{default:()=>[B&&r("div",{key:"image",class:"v-toolbar__image"},[s.image?n(V,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},s.image):n(ie,{key:"image-img",cover:!0,src:e.image},null)]),n(V,{defaults:{VTabs:{height:I(_.value)}}},{default:()=>[r("div",{class:"v-toolbar__content",style:{height:I(_.value)}},[s.prepend&&r("div",{class:"v-toolbar__prepend"},[s.prepend?.()]),A&&n(ft,{key:"title",text:e.title},{text:s.title}),s.default?.(),s.append&&r("div",{class:"v-toolbar__append"},[s.append?.()])])]}),n(V,{defaults:{VTabs:{height:I(p.value)}}},{default:()=>[n(ue,null,{default:()=>[g.value&&r("div",{class:"v-toolbar__extension",style:{height:I(p.value)}},[y])]})]})]})}),{contentHeight:_,extensionHeight:p}}}),bt={name:"AppBanner",computed:{...k(h,["isBanner"]),...k(h,{banner:e=>e.adminFlags.bannerText})}};function yt(e,t,s,a,o,i){return e.isBanner?(c(),f(vt,{key:0,id:"banner",height:"36",density:"compact",flat:"",title:e.banner},null,8,["title"])):L("",!0)}const kt=C(bt,[["render",yt],["__scopeId","data-v-2458e7e5"]]),_t={name:"AdminBrowserLink",components:{CodexListItem:U},data(){return{mdiBookshelf:Pe}},computed:{...k(Be,["lastRoute"])}};function pt(e,t,s,a,o,i){const d=m("CodexListItem");return c(),f(d,{to:e.lastRoute,"prepend-icon":o.mdiBookshelf,title:"Browser"},null,8,["to","prepend-icon"])}const wt=C(_t,[["render",pt]]),ee="Copy Auth Token to clipboard",Ct={name:"AuthTokenDialog",components:{ClipBoard:qe,CodexListItem:U},props:{user:{type:Object,required:!0}},data(){return{mdiTicketConfirmationOutline:Ie,showTooltip:{show:!1},TOOLTIP:ee}},computed:{...k(h,["token"]),...se(h,["showAuthTokenDialog"]),title(){return`User: ${this.user.username}`},tooltip(){return this.clipBoardEnabled?ee:void 0}},methods:{...K(h,["getToken","updateToken"]),resetToken(){this.updateToken(),this.showTooltip.show=!1}},created(){this.getToken()}},Vt={id:"tokenDialog"};function St(e,t,s,a,o,i){const d=m("CodexListItem"),u=m("ClipBoard");return s.user?(c(),f(re,{key:0,modelValue:e.showAuthTokenDialog,"onUpdate:modelValue":t[0]||(t[0]=l=>e.showAuthTokenDialog=l),origin:"center-top",transition:"slide-y-transition","max-width":"24em"},{activator:v(({props:l})=>[n(d,x({"prepend-icon":o.mdiTicketConfirmationOutline},l,{title:"Auth Token"}),null,16,["prepend-icon"])]),default:v(()=>[r("div",Vt,[t[2]||(t[2]=r("h2",null,"Auth Token",-1)),n(u,{class:"tokenContainer",tooltip:o.TOOLTIP,title:i.title,text:e.token},null,8,["tooltip","title","text"]),n(ce,{onClick:ae(i.resetToken,["stop"])},{default:v(()=>[...t[1]||(t[1]=[ne("Reset Token",-1)])]),_:1},8,["onClick"])])]),_:1},8,["modelValue"])):L("",!0)}const Tt=C(Ct,[["render",St],["__scopeId","data-v-20920d35"]]),Lt=E({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...ut(),...dt()},"VSwitch"),xt=D()({name:"VSwitch",inheritAttrs:!1,props:Lt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:s,slots:a}=t;const o=Q(e,"indeterminate"),i=Q(e,"modelValue"),{loaderClasses:d}=et(e),{isFocused:u,focus:l,blur:b}=rt(e),g=Y(),_=Y(),p=De&&window.matchMedia("(forced-colors: active)").matches,A=X(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),B=$e(),y=X(()=>e.id||`switch-${B}`);function ve(){o.value&&(o.value=!1)}function be(M){M.stopPropagation(),M.preventDefault(),g.value?.input?.click()}return $(()=>{const[M,ye]=Ee(s),ke=Z.filterProps(e),_e=J.filterProps(e);return n(Z,x({ref:_,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":o.value},d.value,e.class]},M,ke,{modelValue:i.value,"onUpdate:modelValue":F=>i.value=F,id:y.value,focused:u.value,style:e.style}),{...a,default:F=>{let{id:pe,messagesId:we,isDisabled:Ce,isReadonly:Ve,isValid:q}=F;const N={model:i,isValid:q};return n(J,x({ref:g},_e,{modelValue:i.value,"onUpdate:modelValue":[P=>i.value=P,ve],id:pe.value,"aria-describedby":we.value,type:"checkbox","aria-checked":o.value?"mixed":void 0,disabled:Ce.value,readonly:Ve.value,onFocus:l,onBlur:b},ye),{...a,default:P=>{let{backgroundColorClasses:z,backgroundColorStyles:w}=P;return r("div",{class:T(["v-switch__track",p?void 0:z.value]),style:S(w.value),onClick:be},[a["track-true"]&&r("div",{key:"prepend",class:"v-switch__track-true"},[a["track-true"](N)]),a["track-false"]&&r("div",{key:"append",class:"v-switch__track-false"},[a["track-false"](N)])])},input:P=>{let{inputNode:z,icon:w,backgroundColorClasses:Se,backgroundColorStyles:Te}=P;return r(le,null,[z,r("div",{class:T(["v-switch__thumb",{"v-switch__thumb--filled":w||e.loading},e.inset||p?void 0:Se.value]),style:S(e.inset?void 0:Te.value)},[a.thumb?n(V,{defaults:{VIcon:{icon:w,size:"x-small"}}},{default:()=>[a.thumb({...N,icon:w})]}):n(ot,null,{default:()=>[e.loading?n(st,{name:"v-switch",active:!0,color:q.value===!1?void 0:A.value},{default:O=>a.loader?a.loader(O):n(fe,{active:O.isActive,color:O.color,indeterminate:!0,size:"16",width:"2"},null)}):w&&n(me,{key:String(w),icon:w,size:"x-small"},null)]})])])}})}})}),tt({},_)}}),At={name:"AuthLoginDialog",components:{SubmitFooter:lt,CodexListItem:U},data(){return{rules:{username:[e=>!!e||"Username is required"],password:[e=>e?this.registerMode&&e.length<this.MIN_PASSWORD_LEN?`Password must be ${this.MIN_PASSWORD_LEN} characters long`:!0:"Password is required"],passwordConfirm:[e=>e===this.credentials.password||"Passwords must match"]},formModel:{},credentials:{username:"",password:"",passwordConfirm:""},submitButtonEnabled:!1,registerMode:!1,mdiLogin:Re}},computed:{...k(Me,{formErrors:e=>e.form.errors,formSuccess:e=>e.form.success}),...k(h,{adminFlags:e=>e.adminFlags,MIN_PASSWORD_LEN:e=>e.MIN_PASSWORD_LEN}),...se(h,["showLoginDialog"]),submitButtonLabel(){return this.registerMode?"Register":"Login"},loginLabel(){let e="Login";return this.adminFlags.registration&&(e+=" or Register"),e}},watch:{showLoginDialog(e){e&&(this.loadAdminFlags(),this.$refs.form&&this.$refs.form.reset())},credentials:{handler(){const e=this.$refs.form;e?e.validate().then(({valid:t})=>(this.submitButtonEnabled=t,this.submitButtonEnabled)).catch(console.error):this.submitButtonEnabled=!1},deep:!0}},mounted(){globalThis.addEventListener("keyup",this._keyUpListener)},beforeUnmount(){globalThis.removeEventListener("keyup",this._keyUpListener)},methods:{...K(h,["loadAdminFlags","login","register"]),doAuth(e){return this[e](this.credentials).then(()=>(this.showLoginDialog=this.formErrors&&this.formErrors.length>0,this.showLoginDialog)).catch(console.error)},submit(){this.$refs.form.validate().then(({valid:t})=>{if(!t)return;const s=this.registerMode?"register":"login";return this.doAuth(s)}).catch(console.error)},_keyUpListener(e){e.stopImmediatePropagation()}}};function Bt(e,t,s,a,o,i){const d=m("CodexListItem"),u=m("SubmitFooter");return c(),f(re,{modelValue:e.showLoginDialog,"onUpdate:modelValue":t[7]||(t[7]=l=>e.showLoginDialog=l),origin:"center-top",transition:"slide-y-transition","max-width":"20em"},{activator:v(({props:l})=>[n(d,x(l,{"prepend-icon":o.mdiLogin,title:i.loginLabel}),null,16,["prepend-icon","title"])]),default:v(()=>[n(it,{id:"authDialog",ref:"form"},{default:v(()=>[n(H,{modelValue:o.credentials.username,"onUpdate:modelValue":t[0]||(t[0]=l=>o.credentials.username=l),autocomplete:"username",label:"Username",rules:o.rules.username,clearable:"",autofocus:"",onKeydown:t[1]||(t[1]=W(l=>e.$refs.password.focus(),["enter"]))},null,8,["modelValue","rules"]),n(H,{ref:"password",modelValue:o.credentials.password,"onUpdate:modelValue":t[2]||(t[2]=l=>o.credentials.password=l),autocomplete:o.registerMode?"new-password":"current-password",label:"Password",rules:o.rules.password,clearable:"",type:"password",onKeydown:t[3]||(t[3]=W(l=>{o.registerMode?e.$refs.passwordConfirm.focus():i.submit()},["enter"]))},null,8,["modelValue","autocomplete","rules"]),n(ue,null,{default:v(()=>[o.registerMode?(c(),f(H,{key:0,ref:"passwordConfirm",modelValue:o.credentials.passwordConfirm,"onUpdate:modelValue":t[4]||(t[4]=l=>o.credentials.passwordConfirm=l),autocomplete:"new-password",label:"Confirm Password",rules:o.rules.passwordConfirm,clearable:"",type:"password",onKeydown:W(i.submit,["enter"])},null,8,["modelValue","rules","onKeydown"])):L("",!0)]),_:1}),e.adminFlags.registration?(c(),f(xt,{key:0,modelValue:o.registerMode,"onUpdate:modelValue":t[5]||(t[5]=l=>o.registerMode=l),label:"Register"},{default:v(()=>[...t[8]||(t[8]=[ne(" Register ",-1)])]),_:1},8,["modelValue"])):L("",!0),n(u,{verb:o.registerMode?"Register":"Login",table:"",disabled:!o.submitButtonEnabled,onSubmit:i.submit,onCancel:t[6]||(t[6]=l=>e.showLoginDialog=!1)},null,8,["verb","disabled","onSubmit"])]),_:1},512)]),_:1},8,["modelValue"])}const Pt=C(At,[["render",Bt],["__scopeId","data-v-f5e28bf6"]]),It={name:"AuthMenu",components:{AuthLoginDialog:Pt,AuthTokenDialog:Tt,ChangePasswordDialog:nt,CodexListItem:U},props:{showChangePassword:{type:Boolean,default:!0}},data(){return{mdiLogout:Ue}},computed:{...k(h,{user:e=>e.user}),logoutTitle(){return`Logout ${this.user.username}`}},methods:{...K(h,["logout"])}},Dt={key:0};function $t(e,t,s,a,o,i){const d=m("CodexListItem"),u=m("ChangePasswordDialog"),l=m("AuthTokenDialog"),b=m("AuthLoginDialog");return e.user?(c(),Fe("div",Dt,[n(d,{"prepend-icon":o.mdiLogout,title:i.logoutTitle,onClick:ae(e.logout,["stop"])},null,8,["prepend-icon","title","onClick"]),s.showChangePassword?(c(),f(u,{key:0,user:e.user},null,8,["user"])):L("",!0),n(l,{user:e.user},null,8,["user"])])):(c(),f(b,{key:1}))}const Et=C(It,[["render",$t]]),Mt={name:"PlaceholderLoading",props:{indeterminate:{type:Boolean,default:!0}}};function Rt(e,t,s,a,o,i){return c(),f(fe,x({"aria-label":"loading",class:"codexProgressCircular",indeterminate:s.indeterminate},e.$attrs),null,16,["indeterminate"])}const Ut=C(Mt,[["render",Rt],["__scopeId","data-v-7bb4cf22"]]),Ft=E({actionText:String,bgColor:String,color:String,icon:ze,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...R(),...ge(),...at({size:void 0}),...oe()},"VEmptyState"),Nt=D()({name:"VEmptyState",props:Ft(),emits:{"click:action":e=>!0},setup(e,t){let{emit:s,slots:a}=t;const{themeClasses:o}=te(e),{backgroundColorClasses:i,backgroundColorStyles:d}=de(()=>e.bgColor),{dimensionStyles:u}=he(e),{displayClasses:l}=Ne();function b(g){s("click:action",g)}return $(()=>{const g=!!(a.actions||e.actionText),_=!!(a.headline||e.headline),p=!!(a.title||e.title),A=!!(a.text||e.text),B=!!(a.media||e.image||e.icon),y=e.size||(e.image?200:96);return r("div",{class:T(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},o.value,i.value,l.value,e.class]),style:S([d.value,u.value,e.style])},[B&&r("div",{key:"media",class:"v-empty-state__media"},[a.media?n(V,{key:"media-defaults",defaults:{VImg:{src:e.image,height:y},VIcon:{size:y,icon:e.icon}}},{default:()=>[a.media()]}):r(le,null,[e.image?n(ie,{key:"image",src:e.image,height:y},null):e.icon?n(me,{key:"icon",color:e.color,size:y,icon:e.icon},null):void 0])]),_&&r("div",{key:"headline",class:"v-empty-state__headline"},[a.headline?.()??e.headline]),p&&r("div",{key:"title",class:"v-empty-state__title"},[a.title?.()??e.title]),A&&r("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:I(e.textWidth)}},[a.text?.()??e.text]),a.default&&r("div",{key:"content",class:"v-empty-state__content"},[a.default()]),g&&r("div",{key:"actions",class:"v-empty-state__actions"},[n(V,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>[a.actions?.({props:{onClick:b}})??n(ce,{onClick:b},null)]})])])}),{}}}),zt={name:"EmptyState"};function Ot(e,t,s,a,o,i){return c(),f(Nt,{class:"empty"},Oe({_:2},[We(e.$slots,(d,u)=>({name:u,fn:v(l=>[He(e.$slots,u,x({props:d},l),void 0,!0)])}))]),1024)}const Wt=C(zt,[["render",Ot],["__scopeId","data-v-c7e33c8c"]]),Ht=E({scrollable:Boolean,...R(),...ge(),...j({tag:"main"})},"VMain"),Kt=D()({name:"VMain",props:Ht(),setup(e,t){let{slots:s}=t;const{dimensionStyles:a}=he(e),{mainStyles:o}=Ke(),{ssrBootStyles:i}=ct();return $(()=>n(e.tag,{class:T(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:S([o.value,i.value,a.value,e.style])},{default:()=>[e.scrollable?r("div",{class:"v-main__scroller"},[s.default?.()]):s.default?.()]})),{}}}),jt={name:"UnauthorizedEmptyState",components:{AppBanner:kt,AdminBrowserLink:wt,AuthMenu:Et,PlaceholderLoading:Ut,EmptyState:Wt},props:{admin:{type:Boolean,default:!1}},data(){return{mdiLockOutline:je}},computed:{...k(h,["isAuthChecked","isAuthorized","isUserAdmin"]),...k(h,{showAdminBrowserLink(e){return this.$router.currentRoute?.value?.name?.startsWith("admin")&&e.adminFlags.nonUsers},text(e){return e.adminFlags.registration?"":"Registration is disabled"}})}},qt={class:"login"};function Gt(e,t,s,a,o,i){const d=m("AppBanner"),u=m("AdminBrowserLink"),l=m("AuthMenu"),b=m("EmptyState"),g=m("PlaceholderLoading");return c(),f(Kt,{id:"unauthorized"},{default:v(()=>[n(d),e.isAuthChecked?(c(),f(b,{key:0,class:"empty",headline:"Unauthorized",text:e.text,icon:o.mdiLockOutline},{default:v(()=>[r("div",qt,[e.showAdminBrowserLink?(c(),f(u,{key:0})):L("",!0),n(l,{"show-change-password":!1})])]),_:1},8,["text","icon"])):(c(),f(g,{key:1,id:"unauthorizedPlaceholder"}))]),_:1})}const so=C(jt,[["render",Gt],["__scopeId","data-v-4d9418eb"]]);export{kt as A,Wt as E,Ut as P,so as U,vt as V,ft as a,wt as b,Kt as c,Et as d};
