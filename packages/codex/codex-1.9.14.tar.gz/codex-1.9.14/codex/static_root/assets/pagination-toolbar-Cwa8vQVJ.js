import{g as ke,f as lt,u as ye,b as m,n as oe,d as L,p as he,L as Re,t as j,a$ as $e,_ as M,A as p,X as Ne,B as de,w as T,m as Y,y as l,a7 as Ve,c as u,b0 as ut,G as B,O as I,v,I as h,C,ax as dt,af as Te,b1 as ct,b2 as mt,aA as ht,x as y,D as ce,b3 as ft,b4 as pt,b5 as vt,b6 as Ee,l as gt,H as bt,b7 as kt,ac as yt,V as _t,a1 as Le,z as E,b8 as St,F as me,ah as wt,ad as Ct,ae as Tt,aa as qe,Z as Mt,aE as Ie,b9 as Bt,a as k,r as be,aY as Fe,ba as Me,aX as Rt,bb as De,bc as Nt,a_ as Vt,i as He,bd as Lt,j as ne,U as ze,aS as It,e as xt,be as Pt}from"./main-GE3uFePF.js";import{F as $t,V as _e,A as Et,n as re,s as Ft,x as Dt,l as zt,R as Ae,u as At,a as Be,G as Ot,w as Gt,k as jt,f as Ut}from"./forwardRefs-RdtHqDjs.js";import{c as qt,d as Ht}from"./VSelect-3XsB4Bnk.js";import{a as Kt,c as Yt,d as Zt,V as Wt}from"./confirm-footer-CXU8cmV4.js";import{C as Xt}from"./change-password-dialog-BDkTBQoq.js";import{V as Ke}from"./VTable-BzHndA6M.js";import{C as Ye}from"./confirm-dialog-K-DI-wAR.js";import{P as Qt,V as Jt}from"./unauthorized-DqdR05bx.js";import{u as ea,a as ta,m as aa,b as sa,c as Oe,d as ia}from"./VSelectionControl-C8DQf56i.js";const na=he({...Re(),...$t({variant:"text"})},"VToolbarItems"),yi=ke()({name:"VToolbarItems",props:na(),setup(e,t){let{slots:a}=t;return lt({VBtn:{color:j(()=>e.color),height:"inherit",variant:j(()=>e.variant)}}),ye(()=>m("div",{class:L(["v-toolbar-items",e.class]),style:oe(e.style)},[a.default?.()])),{}}}),Ce=new Set(["",$e,$e.toString(),void 0]),ra=function(e){let t;if(Ce.has(e))t=e;else if(e instanceof Object)if("ids"in e){const a=new Set(e.ids);Ce.intersection(a).size>0?t=void 0:t={value:e.ids.join(","),title:e.name}}else Ce.has(e.pk)?t=void 0:t={value:e.pk,title:e.name};else t={value:e,title:e.toString()};return e?.url&&(t.url=e.url),t},oa=function(e,t){return e.title.localeCompare(t.title)},la=function(e,t){return Number.parseFloat(e.title)-Number.parseFloat(t.title)},Ge=function({items:e,filter:t,numeric:a=!1,sort:n=!0}){const r=e||[],s=t&&t.toLowerCase();let i=[];for(const o of r){const c=ra(o);c!=null&&(!s||c?.title?.toLowerCase().includes(s))&&i.push(c)}if(n){const o=a?la:oa;i=i.sort(o)}return i},ua={name:"ToolbarSelect",props:{selectLabel:{type:String,default:""},maxSelectLen:{type:Number,default:0}},computed:{style(){if(this.maxSelectLen){const e=this.$vuetify.display.xs?"max-width":"width",t=this.maxSelectLen*.7+"em";return`${e}: ${t}`}return""}}};function da(e,t,a,n,r,s){return l(),p(qt,Y(e.$attrs,{label:a.selectLabel,"aria-label":a.selectLabel,class:"toolbarSelect",density:"compact","full-width":"","menu-props":{maxHeight:void 0},"hide-details":"auto",style:s.style,variant:"plain"}),Ne({item:T(({item:i,props:o})=>[u(Kt,Y(o,{density:"compact",variant:"plain",title:i.title,value:i.value}),null,16,["title","value"])]),_:2},[de(e.$slots,(i,o)=>({name:o,fn:T(c=>[Ve(e.$slots,o,Y({props:i},c),void 0,!0)])}))]),1040,["label","aria-label","style"])}const _i=M(ua,[["render",da],["__scopeId","data-v-cda2da63"]]),Si=Yt("v-spacer","div","VSpacer"),ca={name:"BookCover",props:{group:{type:String,required:!0},pks:{type:Array,required:!0},childCount:{type:Number,default:1},finished:{type:Boolean},mtime:{type:Number,default:Date.now()}},data(){return{showPlaceholder:!1}},computed:{...B(I,["coverSettings"]),coverSrc(){return ut({group:this.group,pks:this.pks},this.coverSettings,this.mtime)},multiPkClasses(){const e=this.pks.length,t={};return e>=4?t.stack4=!0:e>1&&(t[`stack${e}`]=!0),t}},mounted:function(){this.delayPlaceholder()},methods:{delayPlaceholder:function(){setTimeout(()=>{this.showPlaceholder=!0},2e3)}}},ma={class:"bookCover"},ha={key:1,class:"childCount"};function fa(e,t,a,n,r,s){return l(),v("div",ma,[u(Zt,{src:s.coverSrc,class:L(["coverImg",s.multiPkClasses])},null,8,["src","class"]),a.finished!==!0?(l(),v("div",{key:0,class:L({unreadFlag:!0,mixedreadFlag:a.finished===null})},null,2)):h("",!0),a.group!=="c"?(l(),v("span",ha,C(a.childCount),1)):h("",!0)])}const pa=M(ca,[["render",fa],["__scopeId","data-v-8e8f21d5"]]),va=10,ga={name:"DownloadButton",components:{ConfirmDialog:Ye},props:{button:{type:Boolean,default:!1},item:{type:Object,required:!0}},data(){return{mdiDownload:ht}},computed:{...B(I,["filterOnlySettings","groupNames"]),show(){return this.item?.ids?.length>0&&!this.item.ids.includes(0)},isOneComic(){return this.item?.group==="c"&&this.item?.ids?.length===1},downloadFn(){return this.isOneComic?this.item.name:`${this.groupNames[this.item?.group]} - ${this.item.name} Comics.zip`},downloadURL(){let e="";if(this.isOneComic){const t=this.item.ids[0];e=ct({pk:t},this.downloadFn,this.item?.mtime)}else{const t=this.item?.group,a=this.item?.ids,n=this.filterOnlySettings;e=mt({group:t,pks:a},this.downloadFn,n,this.item?.mtime)}return e},formattedChildren(){return Te.format(this.item?.childCount)},title(){let e="Download";return e+=this.isOneComic?" Book":` ${this.formattedChildren} Books`,e},confirm(){return this.item?.childCount>va},confirmText(){return this.confirm?`Download ${this.formattedChildren} books`:""}},methods:{download(){const e=this.downloadURL,t=this.downloadFn;if(this.isOneComic)dt(e,t);else{const a=document.createElement("a");a.download=this.downloadFn,a.href=this.downloadURL,a.click(),a.remove()}}}};function ba(e,t,a,n,r,s){const i=y("ConfirmDialog");return s.show?(l(),p(i,{key:0,button:a.button,"button-text":s.title,confirm:s.confirm,"confirm-text":"Download","prepend-icon":r.mdiDownload,"title-text":s.title,text:"May take a while",onConfirm:s.download},null,8,["button","button-text","confirm","prepend-icon","title-text","onConfirm"])):h("",!0)}const ka=M(ga,[["render",ba],["__scopeId","data-v-4c14087b"]]),ya=1,_a={name:"MarkReadButton",components:{ConfirmDialog:Ye},props:{button:{type:Boolean,default:!1},item:{type:Object,required:!0}},computed:{...B(I,["groupNames"]),verb(){return this.item.finished?"Unread":"Read"},confirm(){return this.item.children>ya},show(){return this.item?.ids?.length>0&&!this.item.ids.includes(0)},icon(){return this.item.finished?ft:pt},confirmText(){return this.confirm?`Mark ${this.verb}`:""},markReadText(){const e=["Mark"];this.item.group!="c"&&e.push("Entire");const t=this.groupNames[this.item.group];return e.push(t,this.verb),e.join(" ")},itemName(){return this.item.name||"(Empty)"}},methods:{...ce(I,["setBookmarkFinished"]),toggleRead:function(){this.setBookmarkFinished(this.item,!this.item.finished)}}};function Sa(e,t,a,n,r,s){const i=y("ConfirmDialog");return s.show?(l(),p(i,{key:0,button:a.button,"button-text":s.markReadText,confirm:s.confirm,"confirm-text":s.confirmText,"prepend-icon":s.icon,"title-text":s.markReadText,text:s.itemName,onConfirm:s.toggleRead},null,8,["button","button-text","confirm","confirm-text","prepend-icon","title-text","text","onConfirm"])):h("",!0)}const wa=M(_a,[["render",Sa],["__scopeId","data-v-7b148c61"]]),Ze=["writer","author","plotter","plot","script","scripter","story","interviewer","translator","artist","penciller","breakdowns","pencils","illustrator","layouts","inker","finishes","inks","embellisher","inkAssists","colorist","colorer","colourer","colors","colours","colorDesigner","colorFlats","colorSeparations","designer","digitalArtTechnician","grayTone","letterer","cover","covers","coverArtist","editor","edits","editing"];Object.freeze(Ze);const We=["genres","characters","teams","locations","seriesGroups","stories","storyArcNumbers","tags","universes"];Object.freeze(We);const Xe=new Set(["Characters","Teams"]);Object.freeze(Xe);function Ca(e,t){const a=e.name.split(" ").pop(),n=t.name.split(" ").pop();return a.localeCompare(n)}const q=vt("metadata",{state:()=>({md:void 0}),getters:{roleMap(e){const t={};for(const{role:a}of e.md.credits){const n=a?.name?a.name:"Other";t[n]=a}return t},_mappedCredits(e){const t={};if(!e?.md?.credits)return t;for(const{role:a,person:n}of e.md.credits){const r=a?.name?a.name:"Other";r in t||(t[r]=[]),t[r].push(n)}for(const[a,n]of Object.entries(t))t[a]=n.sort(Ca);return t},_sortedRoles(e){const t=Object.keys(e._mappedCredits),a={};for(const r of t)a[r.toLowerCase()]=r;const n=[];for(const r of Ze){const s=a[r];if(s&&(n.push(s),delete a[r],!Object.keys(a).length))break}return t.sort(),n.push(t),n},credits(e){return this.mapTag(e._mappedCredits,e._sortedRoles)},identifiers(e){const t=[];if(!e.md?.identifiers)return t;for(const a of e.md.identifiers){const n=a.name.split(":"),r=n[0],s=n[1],i=I().identifierSourceTitle(r);let o="";i&&i!=="None"&&(o+=i+":"),o+=s;const c={pk:a.pk,url:a.url,name:o};t.push(c)}return t},tags(e){const t=e.mapTag(e.md,We);e.identifiers?.length&&(t.Identifiers={filter:"identifiers",tags:this.identifiers});for(const a of Object.values(t))a.tags=a.tags.sort((n,r)=>n.name.localeCompare(r.name));return t}},actions:{async loadMetadata({group:e,pks:t}){await Ee.getMetadata({group:e,pks:t},I().metadataSettings).then(a=>{const n={...a.data};return n.loaded=!0,this.md=n,!0}).catch(a=>{console.error(a),this.clearMetadata()})},clearMetadata(){this.md=void 0},getTagName(e){var t;return e==="storyArcNumbers"?t="Story Arcs":t=gt(e),t},markTagMain(e,t){const a="main"+e.slice(0,-1),n=this.md[a]?.pk,r=[];var s=[];for(const i of t)n===i.pk?s.push(i):r.push(i);return{mainTags:s,regularTags:r}},mapTag(e,t){const a={};for(const s of t){const i=e[s];if(!i?.length)continue;const o=this.getTagName(s);var n=[],r=[];Xe.has(o)?{mainTags:n,regularTags:r}=this.markTagMain(o,i):r=i,a[o]={filter:s,tags:r,mainTags:n}}return a},lazyImport({group:e,ids:t}){return Ee.getLazyImport({group:e,pks:t})}}}),Ta={name:"MetadataActivator",props:{book:{type:Object,required:!0},toolbar:{type:Boolean,require:!0}},data(){return{mdiTagOutline:kt}},computed:{...B(bt,{lazyImportEnabled:e=>e.adminFlags.lazyImportMetadata}),variant(){return this.toolbar?"plain":"text"}},methods:{...ce(q,["lazyImport"]),onMouseEnter(){if(this.lazyImportEnabled&&this.book.group==="c"&&!this.book.hasMetadata){const e=this.book.ids||[this.book.pk];this.lazyImport({group:this.book.group,ids:e}),this.book.hasMetadata=!0}}}};function Ma(e,t,a,n,r,s){return l(),p(_e,{onMouseenter:s.onMouseEnter,"aria-label":"tags",class:"tagButton cardControlButton",variant:s.variant,icon:r.mdiTagOutline,title:"Tags",onClick:t[0]||(t[0]=yt(()=>{},["prevent"]))},null,8,["onMouseenter","variant","icon"])}const Ba=M(Ta,[["render",Ma]]),Ra=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],Na=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Va=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],La=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],je=(e,t,a)=>{let n=e;return typeof t=="string"||Array.isArray(t)?n=e.toLocaleString(t,a):(t===!0||a!==void 0)&&(n=e.toLocaleString(void 0,a)),n},Qe=e=>{if(typeof e=="number")return Math.log10(e);const t=e.toString(10);return t.length+Math.log10(`0.${t.slice(0,15)}`)},Ia=e=>typeof e=="number"?Math.log(e):Qe(e)*Math.log(10),xa=(e,t)=>{if(typeof e=="number")return e/t;const a=e/BigInt(t),n=e%BigInt(t);return Number(a)+Number(n)/t},Ue=(e,t)=>{if(t===void 0)return e;if(typeof t!="number"||!Number.isSafeInteger(t)||t<0)throw new TypeError(`Expected fixedWidth to be a non-negative integer, got ${typeof t}: ${t}`);return t===0?e:e.length<t?e.padStart(t," "):e},Pa=e=>{const{minimumFractionDigits:t,maximumFractionDigits:a}=e;if(!(t===void 0&&a===void 0))return{...t!==void 0&&{minimumFractionDigits:t},...a!==void 0&&{maximumFractionDigits:a},roundingMode:"trunc"}};function Je(e,t){if(typeof e!="bigint"&&!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t={bits:!1,binary:!1,space:!0,nonBreakingSpace:!1,...t};const a=t.bits?t.binary?La:Va:t.binary?Na:Ra,n=t.space?t.nonBreakingSpace?"Â ":" ":"",r=typeof e=="number"?e===0:e===0n;if(t.signed&&r){const f=` 0${n}${a[0]}`;return Ue(f,t.fixedWidth)}const s=e<0,i=s?"-":t.signed?"+":"";s&&(e=-e);const o=Pa(t);let c;if(e<1){const f=je(e,t.locale,o);c=i+f+n+a[0]}else{const f=Math.min(Math.floor(t.binary?Ia(e)/Math.log(1024):Qe(e)/3),a.length-1);if(e=xa(e,(t.binary?1024:1e3)**f),!o){const S=Math.max(3,Math.floor(e).toString().length);e=e.toPrecision(S)}const N=je(Number(e),t.locale,o),_=a[f];c=i+N+n+_}return Ue(c,t.fixedWidth)}const $a={name:"MetadataExpandButton"};function Ea(e,t,a,n,r,s){return l(),p(_e,{density:"compact",text:"...expand",variant:"text"})}const Fa=M($a,[["render",Ea]]),Da={name:"MetadataTextBox",components:{ExpandButton:Fa},props:{group:{type:String,default:""},highlight:{type:Boolean,default:!1},label:{type:String,default:""},maxHeight:{type:Number,default:0},value:{type:[Object,String,Number,Boolean],default:void 0}},data(){return{mdiOpenInNew:Le,expanded:!1,mounted:!1}},computed:{...B(I,["groupNames"]),...B(I,{browserShow:e=>e.settings.show,browserTopGroup:e=>e.settings.topGroup,folderViewEnabled:e=>e.page.adminFlags.folderView}),computedValue(){return this.value&&this.value.name!==void 0?this.value.name:this.value},lastSlashIndex(){return this.computedValue.lastIndexOf("/")+1},displayValue(){let e;return this.group==="f"&&this.computedValue?e=this.computedValue.slice(0,Math.max(0,this.lastSlashIndex)):this.group==="v"&&this.computedValue?e=_t(this.computedValue,this.value.numberTo):e=this.computedValue,e},textValueStyles(){const e=this.maxHeight>0&&!this.expanded?this.maxHeight:0;return e?"max-height: "+e+"px;":""},textValueRefName(){return"mdTextValue"+this.label.replaceAll(" ","")},isOverflow(){if(!this.mounted)return!1;const e=this.$refs[this.textValueRefName];return e?e.clientHeight<e.scrollHeight:!1},showExpandButton(){return!this.expanded&&this.maxHeight>0&&this.isOverflow},linkPks(){return(this.value.ids||[this.value.pk]).join(",")},clickable(){const e=this.$router.currentRoute.value.params;return!this.group||e.group===this.group||this.group==="f"&&!this.folderViewEnabled||!["a","f"].includes(this.group)&&!this.browserShow[this.group]?!1:!!this.linkPks?.length},classes(){return{clickable:this.clickable,highlight:this.highlight}},toRoute(){if(!this.clickable)return"";const e=this.group,t=this.linkPks;return{name:"browser",params:{group:e,pks:t,page:1}}},linkSettings(){return{topGroup:this.getTopGroup(this.group)}},title(){let e;return this.label?e=this.label:this.group?e=this.groupNames[this.group]:e="",this.toRoute?`Browse to ${e}`:e},baseName(){return this.group==="f"?this.computedValue.slice(Math.max(0,this.lastSlashIndex)):""}},mounted(){this.mounted=!0},methods:{...ce(I,["routeWithSettings","getTopGroup"]),onClick(){this.clickable&&this.routeWithSettings(this.linkSettings,this.toRoute)}}},za={key:0,class:"text"},Aa={key:0,class:"textLabel"},Oa=["title"],Ga={key:0,class:"textContent"};function ja(e,t,a,n,r,s){const i=y("ExpandButton");return s.displayValue?(l(),v("div",za,[a.label?(l(),v("div",Aa,[E(C(a.label)+" ",1),s.showExpandButton?(l(),p(i,{key:0,class:"expandButton",onClick:t[0]||(t[0]=o=>r.expanded=!0)})):h("",!0)])):h("",!0),u(Et,null,{default:T(()=>[m("div",null,[m("div",{ref:s.textValueRefName,class:"textValue",style:oe(s.textValueStyles)},[m("span",{class:L(["textContent",s.classes]),title:s.title,onClick:t[1]||(t[1]=(...o)=>s.onClick&&s.onClick(...o))},C(s.displayValue),11,Oa),s.baseName?(l(),v("span",Ga,C(s.baseName),1)):h("",!0)],4),s.showExpandButton&&!a.label?(l(),p(i,{key:0,class:"expandButton",onClick:t[2]||(t[2]=o=>r.expanded=!0)})):h("",!0)])]),_:1})])):h("",!0)}const xe=M(Da,[["render",ja],["__scopeId","data-v-847af0f1"]]),Ua={name:"MetadataRatings",components:{MetadataText:xe},computed:{...B(q,{md:e=>e.md}),show(){return this.md?.criticRating!==void 0||this.md?.ageRating}}},qa={key:0},Ha={key:1};function Ka(e,t,a,n,r,s){const i=y("MetadataText");return s.show?(l(),p(Ke,{key:0},{default:T(()=>[m("tbody",null,[e.md.criticalRating?(l(),v("tr",qa,[t[0]||(t[0]=m("td",{class:"key"},"Critical Rating",-1)),m("td",null,[u(i,{value:e.md.criticalRating},null,8,["value"])])])):h("",!0),e.md.ageRating?(l(),v("tr",Ha,[t[1]||(t[1]=m("td",{class:"key"},"Age Rating",-1)),m("td",null,[u(i,{value:e.md.ageRating.name},null,8,["value"])])])):h("",!0)])]),_:1})):h("",!0)}const Ya=M(Ua,[["render",Ka],["__scopeId","data-v-8b5cb217"]]),Za=new Set(["p","i","s","v"]),Wa={name:"MetadataTags",props:{item:{type:Object,required:!0},filter:{type:String,default:""},main:{type:Boolean,default:!1}},data(){return{mdiStar:St,mdiOpenInNew:Le}},computed:{...B(I,{browserShow:e=>e.settings.show,filterValues(e){return e.settings.filters[this.filter]},topGroup:e=>e.settings.topGroup}),...B(q,{mdGroup:e=>e.md.group,mdIds:e=>e.md.ids}),groupMode(){return Za.has(this.filter)},clickable(){return this.filter&&this.item.value&&(!this.groupMode||this.browserShow[this.filter])},classes(){return{clickable:(this.clickable||this.item.url)&&!this.highlight}},highlight(){return!!(this.groupMode&&this.filter===this.mdGroup&&this.mdIds.includes(this.item.value)||this.filterValues?.includes(this.item.value))},variant(){return this.highlight?"flat":"tonal"},color(){const e=this.$vuetify.theme.current.colors;return this.highlight?e["primary-darken-1"]:""},linkGroup(){let e;return this.groupMode?e=this.filter:e=["f","s"].includes(this.topGroup)?this.topGroup:"r",e},linkPks(){return this.groupMode||this.linkGroup!=="a"&&this.filter==="storyArcs"?this.item.value.toString():"0"},toRoute(){if(!this.clickable)return"";const e=this.linkGroup,t=this.linkPks;return{name:"browser",params:{group:e,pks:t,page:1}}},linkSettings(){let e;return this.linkPks==="0"?e={filters:{[this.filter]:[this.item.value]}}:e={topGroup:this.getTopGroup(this.linkGroup)},e},title(){return this.filter==="identifiers"?this.identifierSourceTitle(this.item.title):this.item.title}},methods:{...ce(I,["routeWithSettings","getTopGroup","identifierSourceTitle"]),async onClick(){this.clickable&&this.routeWithSettings(this.linkSettings,this.toRoute)}}},Xa=["href"],Qa={key:1};function Ja(e,t,a,n,r,s){return l(),p(Ht,{class:L(s.classes),color:s.color,value:a.item.value,variant:s.variant,onClick:s.onClick},{default:T(()=>[a.item.url?(l(),v("a",{key:0,href:a.item.url,target:"_blank"},[a.main?(l(),p(re,{key:0,class:"mainStar"},{default:T(()=>[E(C(r.mdiStar),1)]),_:1})):h("",!0),E(C(s.title)+" ",1),a.main?(l(),p(re,{key:1,class:"mainStar"},{default:T(()=>[E(C(r.mdiStar),1)]),_:1})):h("",!0),u(re,null,{default:T(()=>[E(C(r.mdiOpenInNew),1)]),_:1})],8,Xa)):(l(),v("span",Qa,[a.main?(l(),p(re,{key:0,class:"mainStar"},{default:T(()=>[E(C(r.mdiStar),1)]),_:1})):h("",!0),E(" "+C(s.title)+" ",1),a.main?(l(),p(re,{key:1,class:"mainStar"},{default:T(()=>[E(C(r.mdiStar),1)]),_:1})):h("",!0)]))]),_:1},8,["class","color","value","variant","onClick"])}const es=M(Wa,[["render",Ja],["__scopeId","data-v-c28f158a"]]),ts={name:"MetadataTags",components:{MetadataChip:es},props:{label:{type:String,default:""},values:{type:Array,default(){return[]}},mainValues:{type:Array,default(){return[]}},filter:{type:String,required:!1,default:void 0}},computed:{mainItems(){return Ge({items:this.mainValues,sort:!1})},items(){let e;return this.filter==="universes"?e=this.fixUniverseTitles(this.values):e=this.values,Ge({items:e,sort:!1})}},methods:{...ce(I,["fixUniverseTitles"])}},as={key:0},ss={key:0,class:"chipGroupLabel"};function is(e,t,a,n,r,s){const i=y("MetadataChip");return s.items?.length>0?(l(),v("div",as,[a.label?(l(),v("div",ss,C(a.label),1)):h("",!0),m("div",null,[(l(!0),v(me,null,de(s.mainItems,o=>(l(),p(i,{key:`${a.filter}/${o.value}`,filter:a.filter,item:o,main:!0},null,8,["filter","item"]))),128)),(l(!0),v(me,null,de(s.items,o=>(l(),p(i,{key:`${a.filter}/${o.value}`,filter:a.filter,item:o},null,8,["filter","item"]))),128))])])):h("",!0)}const et=M(ts,[["render",is],["__scopeId","data-v-0011fa82"]]),ns={name:"MetadataTagsTable",components:{MetadataTags:et},data(){return{mdiOpenInNew:Le}},props:{keyMap:{type:Object,default:void 0},tagMap:{type:Object,required:!0}},computed:{show(){return Object.keys(this.tagMap).length>0}}},rs={key:0,class:"key keyLink"},os={href:"keyMap[key].url"},ls={key:1,class:"key"},us={class:"tags"};function ds(e,t,a,n,r,s){const i=y("MetadataTags");return s.show?(l(),p(Ke,{key:0},{default:T(()=>[m("tbody",null,[(l(!0),v(me,null,de(Object.entries(a.tagMap),([o,{filter:c,tags:f,mainTags:N}])=>(l(),v("tr",{key:o},[a.keyMap&&a.keyMap[o]&&a.keyMap[o].url?(l(),v("td",rs,[m("a",os,[E(C(o),1),u(re,null,{default:T(()=>[E(C(r.mdiOpenInNew),1)]),_:1})])])):(l(),v("td",ls,C(o),1)),m("td",us,[u(i,{filter:c,values:f,mainValues:N},null,8,["filter","values","mainValues"])])]))),128))])]),_:1})):h("",!0)}const cs=M(ns,[["render",ds],["__scopeId","data-v-dd36bea8"]]),ms={name:"MetadataBody",components:{MetadataRatings:Ya,MetadataTagsTable:cs,MetadataText:xe},props:{book:{type:Object,required:!0}},computed:{...B(q,["credits","ratings","tags"]),...B(I,{twentyFourHourTime:e=>e.settings?.twentyFourHourTime,readingDirectionTitles:e=>e.choices.static.readingDirection}),...B(q,{md:e=>e.md,roleMap:e=>e.roleMap}),readingDirectionText(){return this.md?this.readingDirectionTitles[this.md.readingDirection]:"Unknown"},size(){return this?.md?.size>0?Je(this.md.size):0},sizeLabel(){return this?.md?.group==="c"?"Size":"Total Size"},fileType(){return this?.md?.fileType||"Unknown"}},methods:{formatDateTime(e){return wt(e,this.twentyFourHourTime)}}},hs={id:"metadataBody"},fs={class:"mdSection"},ps={class:"mdSection"},vs={class:"quarterRow"},gs={class:"thirdRow"},bs={class:"lastSmallRow"},ks={key:0,class:"halfRow mdSection"},ys={class:"mdSection"},_s={class:"inlineRow"},Ss={class:"inlineRow"};function ws(e,t,a,n,r,s){const i=y("MetadataText"),o=y("MetadataTagsTable"),c=y("MetadataRatings");return l(),v("div",hs,[m("section",fs,[u(i,{value:e.md.summary,"max-height":100},null,8,["value"]),u(i,{value:e.md.review,label:"Review","max-height":100},null,8,["value"])]),u(o,{"key-map":e.roleMap,"tag-map":e.credits,class:"mdSection"},null,8,["key-map","tag-map"]),m("section",ps,[m("div",vs,[e.md.createdAt?(l(),p(i,{key:0,value:s.formatDateTime(e.md.createdAt),label:"Created at",class:"mtime"},null,8,["value"])):h("",!0),e.md.updatedAt?(l(),p(i,{key:1,value:s.formatDateTime(e.md.updatedAt),label:"Updated at",class:"mtime"},null,8,["value"])):h("",!0),u(i,{value:s.size,label:s.sizeLabel},null,8,["value","label"]),u(i,{value:s.fileType,label:"File Type"},null,8,["value"])]),m("div",gs,[u(i,{label:"Reading Direction",value:s.readingDirectionText},null,8,["value"]),u(i,{value:e.md.originalFormat?.name,label:"Original Format"},null,8,["value"]),u(i,{value:(!!e.md.monochrome).toString(),label:"Monochrome"},null,8,["value"])]),m("div",bs,[u(i,{group:"f",value:{pk:e.md.parentFolderId,name:e.md.path},label:"Path"},null,8,["value"])])]),e.md?.country||e.md?.language?(l(),v("section",ks,[u(i,{value:e.md.country?.name,label:"Country"},null,8,["value"]),u(i,{value:e.md.language?.name,label:"Language"},null,8,["value"])])):h("",!0),u(c,{class:"mdSection"}),u(o,{"tag-map":e.tags,class:"mdSection"},null,8,["tag-map"]),m("section",ys,[m("section",_s,[u(i,{value:e.md.notes,label:"Notes"},null,8,["value"])]),m("section",Ss,[u(i,{value:e.md.tagger,label:"Tagger"},null,8,["value"]),u(i,{value:e.md.scanInfo,label:"Scan"},null,8,["value"])])])])}const Cs=M(ms,[["render",ws],["__scopeId","data-v-e65fff8f"]]),tt=new Set("rtl","btt");Object.freeze(tt);const at=({ids:e,page:t,readingDirection:a,pageCount:n},r)=>{if(e.length===0||r&&!n)return"";const s=e[0];if(t)t=Number(t);else if(tt.has(a)){const i=Number(n)-1;t=Math.max(i,0)}else t=0;return{name:"reader",params:{pk:s,page:t}}},st={p:"publisher",i:"imprint",s:"series",v:"volume",f:"folder",a:"storyArc"};Object.freeze(st);const Ts={name:"MetadataControls",components:{DownloadButton:ka,MarkReadButton:wa},props:{group:{type:String,required:!0}},computed:{...B(q,{md:e=>e.md}),...B(I,{importMetadata:e=>e.page?.adminFlags?.importMetadata}),downloadName(){const e=this.md;let t;if(!e)t="Unknown.cbz";else if(e.fileName)t=e.fileName;else{if(this.md.group==="f")return[this.firstNameFromList(e.folderList)];if(this.md.group==="a")return[this.firstNameFromList(e.storyArcList)];t=[this.firstNameFromList(e.publisherList),this.firstNameFromList(e.imprintList),this.firstNameFromList(e.seriesList),this.firstNameFromList(e.volumeList),qe(this.md,3),this.md.name].filter(Boolean).join(" ")}return t},downloadItem(){return{group:this.md?.group,ids:this.md?.ids,childCount:this.md?.childCount,mtime:this.md?.mtime,name:this.downloadName}},isReadButtonShown(){return this.group==="c"&&this.$route.name!="reader"},isReadButtonEnabled(){return!!this.readerRoute},markReadItem(){let e="";const t=st[this.md.group];return t?e=(this.md[t+"List"]||[]).map(({name:r})=>r).join(", "):e=this.md.name,{group:this.md.group,ids:this.md.ids,finished:this.md.finished,name:e,children:this.md.childCount||1}},readButtonIcon(){return this.isReadButtonEnabled?Ct:Tt},readerRoute(){return this.md?.ids?at(this.md,this.importMetadata):{}},size(){return this.$vuetify.display.smAndDown?"x-small":"default"}},methods:{firstNameFromList(e){let t="";if(!e)return t;for(const a of Object.values(e))if(a.name){t=a.name;break}return t}}},Ms={class:"controlRow"};function Bs(e,t,a,n,r,s){const i=y("DownloadButton"),o=y("MarkReadButton");return l(),v("section",Ms,[u(i,{id:"downloadButton",button:!0,item:s.downloadItem,size:s.size},null,8,["item","size"]),u(o,{id:"markReadButton",button:!0,item:s.markReadItem,size:s.size},null,8,["item","size"]),s.isReadButtonShown?(l(),p(_e,{key:0,id:"readButton",title:"Read Comic",disabled:!s.isReadButtonEnabled,size:s.size,to:s.readerRoute},{default:T(()=>[u(re,null,{default:T(()=>[E(C(s.readButtonIcon),1)]),_:1}),t[0]||(t[0]=E(" Read ",-1))]),_:1},8,["disabled","size","to"])):h("",!0)])}const Rs=M(Ts,[["render",Bs],["__scopeId","data-v-d254bb05"]]),Ns={name:"MetadataBookCover",components:{BookCover:pa},props:{group:{type:String,required:!0}},computed:{...B(q,{md:e=>e.md})}},Vs={class:"bookCoverWrapper"};function Ls(e,t,a,n,r,s){const i=y("BookCover");return l(),v("div",Vs,[u(i,{id:"bookCover",group:a.group,pks:e.md.ids,"child-count":e.md.childCount,finished:e.md.finished,mtime:e.md.mtime},null,8,["group","pks","child-count","finished","mtime"]),u(Ft,{class:"bookCoverProgress","model-value":e.md.progress,rounded:"","background-color":"inherit",height:"2","aria-label":"% read"},null,8,["model-value"])])}const Is=M(Ns,[["render",Ls],["__scopeId","data-v-3a0db03b"]]),xs={name:"MetadataHeader",components:{MetadataBookCover:Is,MetadataControls:Rs,MetadataTags:et,MetadataText:xe},props:{group:{type:String,required:!0}},computed:{...B(I,{importMetadata:e=>e.page?.adminFlags?.importMetadata,q:e=>e.settings.q}),...B(q,{md:e=>e.md}),collectionTitle(){if(this.md.collectionTitle)return`${this.md.collectionTitle}:`},date(){if(!this.md.year&&!this.md.month&&!this.md.day)return"";const e=new Date(this.md.year||1970,this.md.month||1,this.md.day||1),t={};return this.md.year&&(t.year="numeric"),this.md.month&&(t.month=this.$vuetify.display.smAndDown?"short":"long"),this.md.day&&(t.day="numeric"),e.toLocaleDateString("default",t)},readerRoute(){return this.md?.ids?at(this.md,this.importMetadata):{}},formattedIssueNumber(){if(!this.md)return"Unknown";if(!((this.md.issueNumber===null||this.md.issueNumber===void 0)&&!this.md.issueSuffix))return"#"+qe(this.md)},pages(){let e="";if(!this.md)return e;if(this.md.page){const a=Te.format(this.md.page);e+=this.$vuetify.display.smAndDown?`${a} / `:`Read ${a} of `}const t=Te.format(this.md.pageCount);return e+=`${t} page`,this.md.pageCount!==1&&(e+="s"),this.$vuetify.display.smAndUp&&this.md.progress>0&&(e+=` (${Math.round(this.md.progress)}%)`),e},size(){return this?.md?.size>0?Je(this.md.size):0},fileType(){return this?.md?.fileType||"Unknown"},seriesVolumeCount(){const e=this.md.seriesVolumeCount;return e?`of ${e}`:""},volumeIssueCount(){const e=this.md.volumeIssueCount;return e?`/ ${e}`:""}}},Ps={id:"metadataHeader"},$s={key:1,id:"seriesHeader"},Es={id:"seriesRow",class:"inlineRow"},Fs={key:2,id:"titleRow"},Ds={key:4,id:"publisherRow",class:"inlineRow"},zs={key:7,id:"pageDateRow",class:"inlineRow"};function As(e,t,a,n,r,s){const i=y("MetadataText"),o=y("MetadataBookCover"),c=y("MetadataTags"),f=y("MetadataControls");return l(),v(me,null,[m("header",Ps,[e.q?(l(),p(i,{key:0,id:"search",value:e.q,label:"Search Query",highlight:!0},null,8,["value"])):h("",!0),u(o,{id:"metadataBookCover",group:a.group},null,8,["group"]),e.md.seriesList?.length===1?(l(),v("section",$s,[m("div",Es,[(l(),p(i,{id:"series",key:e.md.seriesList[0].ids,value:e.md.seriesList[0],group:"s",highlight:e.md.group==="s"},null,8,["value","highlight"])),e.md.volumeList?.length===1?(l(),p(i,{id:"volume",key:e.md.volumeList[0].ids,value:e.md.volumeList[0],group:"v",highlight:e.md.group==="v"},null,8,["value","highlight"])):h("",!0),u(i,{value:s.seriesVolumeCount,class:"subdued"},null,8,["value"]),u(i,{id:"issue",value:s.formattedIssueNumber,group:"c",highlight:e.md.group==="c"},null,8,["value","highlight"]),u(i,{value:s.volumeIssueCount,class:"subdued"},null,8,["value"])])])):h("",!0),e.md.name?(l(),v("span",Fs,C(s.collectionTitle)+" "+C(e.md.name),1)):h("",!0),e.md.seriesList?.length>1?(l(),p(c,{key:3,id:"seriesTags",class:"groupTags",label:"Series",values:e.md.seriesList,filter:"s"},null,8,["values"])):h("",!0),m("div",null,[e.md.volumeList?.length>1?(l(),p(c,{key:0,id:"volumeTags",class:"groupTags",label:"Volumes",values:e.md.volumeList,filter:"v"},null,8,["values"])):h("",!0)]),e.md.publisherList?.length===1?(l(),v("div",Ds,[(l(),p(i,{id:"publisher",key:e.md.publisherList[0].ids,group:"p",highlight:e.md.group==="p",value:e.md.publisherList[0]},null,8,["highlight","value"])),e.md.imprintList?.length===1?(l(),p(i,{id:"imprint",key:e.md.imprintList[0].ids,group:"i",highlight:e.md.group==="i",value:e.md.imprintList[0]},null,8,["highlight","value"])):h("",!0)])):h("",!0),e.md.publisherList?.length>1?(l(),p(c,{key:5,id:"publisherTags",class:"groupTags",label:"Publishers",values:e.md.publisherList,filter:"p"},null,8,["values"])):h("",!0),e.md.imprintList?.length>1?(l(),p(c,{key:6,id:"imprintTags",class:"groupTags",label:"Imprints",values:e.md.imprintList,filter:"i"},null,8,["values"])):h("",!0),s.pages||e.md.year||e.md.month||e.md.day?(l(),v("div",zs,[u(i,{value:s.pages},null,8,["value"]),u(i,{value:s.date,class:"datePicker"},null,8,["value"])])):h("",!0)]),u(f,{id:"controls",group:a.group},null,8,["group"])],64)}const Os=M(xs,[["render",As],["__scopeId","data-v-a05541e5"]]),Gs=1160,js=.05,Us=250,qs={name:"MetadataButton",components:{CloseButton:Xt,MetadataActivator:Ba,MetadataBody:Cs,MetadataHeader:Os,PlaceholderLoading:Qt},props:{book:{type:Object,required:!0},toolbar:{type:Boolean,default:!1}},data(){return{dialog:!1,progress:0}},computed:{...B(q,{md:e=>e.md}),showContainer(){return this.md?.loaded||!1},children(){return this.book.childCount||0}},watch:{dialog(e){e?this.dialogOpened():this.clearMetadata()}},methods:{...ce(q,["clearMetadata","loadMetadata"]),dialogOpened(){const e=this.book.ids||[this.book.pk],t={group:this.book.group,pks:e};this.loadMetadata(t),this.startProgress()},startProgress(){this.startTime=Date.now(),this.estimatedMS=Math.max(js,this.children/Gs)*1e3,this.updateProgress()},updateProgress(){const e=Date.now()-this.startTime;this.progress=e/this.estimatedMS*100,!(this.progress>=100||this.md)&&setTimeout(()=>{this.updateProgress()},Us)}}},Hs={key:1,id:"placeholderContainer"};function Ks(e,t,a,n,r,s){const i=y("MetadataActivator"),o=y("CloseButton"),c=y("MetadataHeader"),f=y("MetadataBody"),N=y("PlaceholderLoading");return l(),p(Wt,{modelValue:r.dialog,"onUpdate:modelValue":t[2]||(t[2]=_=>r.dialog=_),fullscreen:"",transition:"dialog-bottom-transition"},{activator:T(({props:_})=>[u(i,Y(_,{book:a.book,toolbar:a.toolbar}),null,16,["book","toolbar"])]),default:T(()=>[u(o,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[0]||(t[0]=_=>r.dialog=!1)}),s.showContainer?(l(),v("div",{key:0,id:"metadataContainer",onKeyup:t[1]||(t[1]=Mt(_=>r.dialog=!1,["esc"]))},[u(c,{group:a.book.group},null,8,["group"]),u(f,{book:a.book},null,8,["book"])],32)):(l(),v("div",Hs,[t[3]||(t[3]=m("div",{id:"placeholderTitle"},"Tags Loading",-1)),u(N,{"model-value":r.progress,indeterminate:r.progress>=100,class:"placeholder"},null,8,["model-value","indeterminate"])]))]),_:1},8,["modelValue"])}const wi=M(qs,[["render",Ks],["__scopeId","data-v-d554fe5b"]]),Ys={name:"PaginationNavButton",props:{narrow:{type:Boolean,default:!0}},computed:{classes(){return{narrowButton:this.narrow}}}};function Zs(e,t,a,n,r,s){return l(),p(_e,{variant:"plain",density:"compact",class:L(["paginationNavButton",s.classes]),size:"medium"},Ne({_:2},[de(e.$slots,(i,o)=>({name:o,fn:T(c=>[Ve(e.$slots,o,Y({props:i},c),void 0,!0)])}))]),1032,["class"])}const Ci=M(Ys,[["render",Zs],["__scopeId","data-v-cf061c30"]]),Pe=Symbol.for("vuetify:v-slider");function Ws(e,t,a){const n=a==="vertical",r=t.getBoundingClientRect(),s="touches"in e?e.touches[0]:e;return n?s.clientY-(r.top+r.height/2):s.clientX-(r.left+r.width/2)}function Xs(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const Qs=he({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,noKeyboard:Boolean,...zt(),...Dt({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),Js=e=>{const t=k(()=>parseFloat(e.min)),a=k(()=>parseFloat(e.max)),n=k(()=>Number(e.step)>0?parseFloat(e.step):0),r=k(()=>Math.max(De(n.value),De(t.value)));function s(i){if(i=parseFloat(i),n.value<=0)return i;const o=Me(i,t.value,a.value),c=t.value%n.value;let f=Math.round((o-c)/n.value)*n.value+c;return o>f&&f+n.value>a.value&&(f=a.value),parseFloat(Math.min(f,a.value).toFixed(r.value))}return{min:t,max:a,step:n,decimals:r,roundValue:s}},ei=e=>{let{props:t,steps:a,onSliderStart:n,onSliderMove:r,onSliderEnd:s,getActiveThumb:i}=e;const o=ea(t),{isRtl:c}=Ie(),f=j(()=>t.reverse),N=k(()=>t.direction==="vertical"),_=k(()=>N.value!==f.value),{min:S,max:F,step:D,decimals:J,roundValue:Z}=a,ee=k(()=>parseInt(t.thumbSize,10)),W=k(()=>parseInt(t.tickSize,10)),z=k(()=>parseInt(t.trackSize,10)),x=k(()=>(F.value-S.value)/D.value),H=k(()=>t.error||o.isDisabled.value?void 0:t.thumbColor??t.color),A=k(()=>t.error||o.isDisabled.value?void 0:t.thumbColor),te=k(()=>t.error||o.isDisabled.value?void 0:t.trackColor??t.color),ae=k(()=>t.error||o.isDisabled.value?void 0:t.trackFillColor??t.color),O=Fe(!1),w=Fe(0),G=be(),b=be();function U(d){const g=G.value?.$el;if(!g)return;const ie=t.direction==="vertical",ve=ie?"top":"left",ge=ie?"height":"width",it=ie?"clientY":"clientX",{[ve]:nt,[ge]:rt}=g.getBoundingClientRect(),ot=Xs(d,it);let we=Me((ot-nt-w.value)/rt)||0;return(ie?_.value:_.value!==c.value)&&(we=1-we),Z(S.value+we*(F.value-S.value))}const P=d=>{const g=U(d);g!=null&&s({value:g}),O.value=!1,w.value=0},X=d=>{const g=U(d);b.value=i(d),b.value&&(O.value=!0,b.value.contains(d.target)?w.value=Ws(d,b.value,t.direction):(w.value=0,g!=null&&r({value:g})),g!=null&&n({value:g}),Rt(()=>b.value?.focus()))},K={passive:!0,capture:!0};function $(d){const g=U(d);g!=null&&r({value:g})}function Q(d){d.stopPropagation(),d.preventDefault(),P(d),window.removeEventListener("mousemove",$,K),window.removeEventListener("mouseup",Q)}function le(d){P(d),window.removeEventListener("touchmove",$,K),d.target?.removeEventListener("touchend",le)}function se(d){X(d),window.addEventListener("touchmove",$,K),d.target?.addEventListener("touchend",le,{passive:!1})}function Se(d){d.button===0&&(d.preventDefault(),X(d),window.addEventListener("mousemove",$,K),window.addEventListener("mouseup",Q,{passive:!1}))}Bt(()=>{window.removeEventListener("touchmove",$),window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",Q)});const ue=d=>{const g=(d-S.value)/(F.value-S.value)*100;return Me(isNaN(g)?0:g,0,100)},fe=j(()=>t.showTicks),pe=k(()=>fe.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(d=>({value:d,position:ue(d),label:d.toString()})):Object.keys(t.ticks).map(d=>({value:parseFloat(d),position:ue(parseFloat(d)),label:t.ticks[d]})):x.value!==1/0?Nt(x.value+1).map(d=>{const g=S.value+d*D.value;return{value:g,position:ue(g)}}):[]:[]),V=k(()=>pe.value.some(d=>{let{label:g}=d;return!!g})),R={activeThumbRef:b,color:j(()=>t.color),decimals:J,disabled:o.isDisabled,direction:j(()=>t.direction),elevation:j(()=>t.elevation),hasLabels:V,isReversed:f,indexFromEnd:_,min:S,max:F,mousePressed:O,noKeyboard:j(()=>t.noKeyboard),numTicks:x,onSliderMousedown:Se,onSliderTouchstart:se,parsedTicks:pe,parseMouseMove:U,position:ue,readonly:o.isReadonly,rounded:j(()=>t.rounded),roundValue:Z,showTicks:fe,startOffset:w,step:D,thumbSize:ee,thumbColor:H,thumbLabelColor:A,thumbLabel:j(()=>t.thumbLabel),ticks:j(()=>t.ticks),tickSize:W,trackColor:te,trackContainerRef:G,trackFillColor:ae,trackSize:z,vertical:N};return Vt(Pe,R),R},ti=he({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,noKeyboard:Boolean,...Re()},"VSliderThumb"),ai=ke()({name:"VSliderThumb",directives:{vRipple:Ae},props:ti(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a,emit:n}=t;const r=He(Pe),{isRtl:s,rtlClasses:i}=Ie();if(!r)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:o,max:c,thumbColor:f,thumbLabelColor:N,step:_,disabled:S,thumbSize:F,thumbLabel:D,direction:J,isReversed:Z,vertical:ee,readonly:W,elevation:z,mousePressed:x,decimals:H,indexFromEnd:A}=r,te=k(()=>S.value?void 0:z.value),{elevationClasses:ae}=Gt(te),{textColorClasses:O,textColorStyles:w}=At(f),{backgroundColorClasses:G,backgroundColorStyles:b}=Be(N),{pageup:U,pagedown:P,end:X,home:K,left:$,right:Q,down:le,up:se}=Lt,Se=[U,P,X,K,$,Q,le,se],ue=k(()=>_.value?[1,2,3]:[1,5,10]);function fe(V,R){if(e.noKeyboard||S.value||!Se.includes(V.key))return;V.preventDefault();const d=_.value||.1,g=(c.value-o.value)/d;if([$,Q,le,se].includes(V.key)){const ve=(ee.value?[s.value?$:Q,Z.value?le:se]:A.value!==s.value?[$,se]:[Q,se]).includes(V.key)?1:-1,ge=V.shiftKey?2:V.ctrlKey?1:0;ve===-1&&R===c.value&&!ge&&!Number.isInteger(g)?R=R-g%1*d:R=R+ve*d*ue.value[ge]}else if(V.key===K)R=o.value;else if(V.key===X)R=c.value;else{const ie=V.key===P?1:-1;R=R-ie*d*(g>100?g/10:10)}return Math.max(e.min,Math.min(e.max,R))}function pe(V){const R=fe(V,e.modelValue);R!=null&&n("update:modelValue",R)}return ye(()=>{const V=ne(A.value?100-e.position:e.position,"%");return m("div",{class:L(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&x.value},e.class,i.value]),style:oe([{"--v-slider-thumb-position":V,"--v-slider-thumb-size":ne(F.value)},e.style]),role:"slider",tabindex:S.value?-1:0,"aria-label":e.name,"aria-valuemin":o.value,"aria-valuemax":c.value,"aria-valuenow":e.modelValue,"aria-readonly":!!W.value,"aria-orientation":J.value,onKeydown:W.value?void 0:pe},[m("div",{class:L(["v-slider-thumb__surface",O.value,ae.value]),style:oe(w.value)},null),ze(m("div",{class:L(["v-slider-thumb__ripple",O.value]),style:oe(w.value)},null),[[Ae,e.ripple,null,{circle:!0,center:!0}]]),u(Ot,{origin:"bottom center"},{default:()=>[ze(m("div",{class:"v-slider-thumb__label-container"},[m("div",{class:L(["v-slider-thumb__label",G.value]),style:oe(b.value)},[m("div",null,[a["thumb-label"]?.({modelValue:e.modelValue})??e.modelValue.toFixed(_.value?H.value:1)]),m("div",{class:"v-slider-thumb__label-wedge"},null)])]),[[It,D.value&&e.focused||D.value==="always"]])]})])}),{}}}),si=he({start:{type:Number,required:!0},stop:{type:Number,required:!0},...Re()},"VSliderTrack"),ii=ke()({name:"VSliderTrack",props:si(),emits:{},setup(e,t){let{slots:a}=t;const n=He(Pe);if(!n)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:r,parsedTicks:s,rounded:i,showTicks:o,tickSize:c,trackColor:f,trackFillColor:N,trackSize:_,vertical:S,min:F,max:D,indexFromEnd:J}=n,{roundedClasses:Z}=jt(i),{backgroundColorClasses:ee,backgroundColorStyles:W}=Be(N),{backgroundColorClasses:z,backgroundColorStyles:x}=Be(f),H=k(()=>`inset-${S.value?"block":"inline"}-${J.value?"end":"start"}`),A=k(()=>S.value?"height":"width"),te=k(()=>({[H.value]:"0%",[A.value]:"100%"})),ae=k(()=>e.stop-e.start),O=k(()=>({[H.value]:ne(e.start,"%"),[A.value]:ne(ae.value,"%")})),w=k(()=>o.value?(S.value?s.value.slice().reverse():s.value).map((b,U)=>{const P=b.value!==F.value&&b.value!==D.value?ne(b.position,"%"):void 0;return m("div",{key:b.value,class:L(["v-slider-track__tick",{"v-slider-track__tick--filled":b.position>=e.start&&b.position<=e.stop,"v-slider-track__tick--first":b.value===F.value,"v-slider-track__tick--last":b.value===D.value}]),style:{[H.value]:P}},[(b.label||a["tick-label"])&&m("div",{class:"v-slider-track__tick-label"},[a["tick-label"]?.({tick:b,index:U})??b.label])])}):[]);return ye(()=>m("div",{class:L(["v-slider-track",Z.value,e.class]),style:oe([{"--v-slider-track-size":ne(_.value),"--v-slider-tick-size":ne(c.value)},e.style])},[m("div",{class:L(["v-slider-track__background",z.value,{"v-slider-track__background--opacity":!!r.value||!N.value}]),style:{...te.value,...x.value}},null),m("div",{class:L(["v-slider-track__fill",ee.value]),style:{...O.value,...W.value}},null),o.value&&m("div",{class:L(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":o.value==="always"}])},[w.value])])),{}}}),ni=he({...sa(),...Qs(),...aa(),modelValue:{type:[Number,String],default:0}},"VSlider"),ri=ke()({name:"VSlider",inheritAttrs:!1,props:ni(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:a,emit:n,attrs:r}=t;const s=be(),i=be(),{rtlClasses:o}=Ie(),c=Js(e),f=xt(e,"modelValue",void 0,w=>c.roundValue(w??c.min.value)),{min:N,max:_,mousePressed:S,roundValue:F,onSliderMousedown:D,onSliderTouchstart:J,trackContainerRef:Z,position:ee,hasLabels:W,disabled:z,readonly:x,noKeyboard:H}=ei({props:e,steps:c,onSliderStart:()=>{!z.value&&!x.value&&n("start",f.value)},onSliderEnd:w=>{let{value:G}=w;const b=F(G);!z.value&&!x.value&&(f.value=b),n("end",b)},onSliderMove:w=>{let{value:G}=w;!z.value&&!x.value&&(f.value=F(G))},getActiveThumb:()=>s.value?.$el}),{isFocused:A,focus:te,blur:ae}=ta(e),O=k(()=>ee(f.value));return ye(()=>{const w=Oe.filterProps(e),[G,b]=Pt(r),U=!!(e.label||a.label||a.prepend);return u(Oe,Y({ref:i,class:["v-slider",{"v-slider--has-labels":!!a["tick-label"]||W.value,"v-slider--focused":A.value,"v-slider--pressed":S.value,"v-slider--disabled":z.value},o.value,e.class],style:e.style},w,G,{focused:A.value}),{...a,prepend:U?P=>m(me,null,[a.label?.(P)??(e.label?u(ia,{id:P.id.value,class:"v-slider__label",text:e.label},null):void 0),a.prepend?.(P)]):void 0,default:P=>{let{id:X,messagesId:K}=P;return m("div",{class:"v-slider__container",onMousedown:x.value?void 0:D,onTouchstartPassive:x.value?void 0:J},[m("input",{id:X.value,name:e.name||X.value,disabled:z.value,readonly:x.value,tabindex:"-1",value:f.value},null),u(ii,{ref:Z,start:0,stop:O.value},{"tick-label":a["tick-label"]}),u(ai,Y({ref:s,"aria-describedby":K.value,focused:A.value,noKeyboard:H.value,min:N.value,max:_.value,modelValue:f.value,"onUpdate:modelValue":$=>f.value=$,position:O.value,elevation:e.elevation,onFocus:te,onBlur:ae,ripple:e.ripple,name:e.name},b),{"thumb-label":a["thumb-label"]})])}})}),Ut({focus:()=>s.value?.$el.focus()},i)}}),oi={name:"PaginationSlider",props:{min:{type:Number,default:0}}};function li(e,t,a,n,r,s){return l(),p(ri,Y({"thumb-size":"36",class:"paginationSlider",density:"compact","hide-details":"auto",min:a.min,rounded:!0,"show-ticks":"always",step:1,"thumb-label":"always"},e.$attrs),{"tick-label":T(({index:i})=>[E(C(i+a.min),1)]),_:1},16,["min"])}const Ti=M(oi,[["render",li],["__scopeId","data-v-01b67afd"]]),ui={name:"PaginationToolbar"};function di(e,t,a,n,r,s){return l(),p(Jt,{class:"paginationToolbar",density:"compact",transform:"center bottom"},Ne({_:2},[de(e.$slots,(i,o)=>({name:o,fn:T(c=>[Ve(e.$slots,o,Y({props:i},c),void 0,!0)])}))]),1024)}const Mi=M(ui,[["render",di],["__scopeId","data-v-404b5bc6"]]);export{pa as B,ka as D,wa as M,Ce as N,Ci as P,_i as T,yi as V,Si as a,wi as b,Mi as c,Ti as d,at as g,Je as p,Ge as t};
