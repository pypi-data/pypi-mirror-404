{"ast":null,"code":"import _slicedToArray from\"/home/runner/work/inference/inference/xinference/ui/web/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{TabContext,TabList,TabPanel}from'@mui/lab';import{Box,Tab}from'@mui/material';import React,{useEffect}from'react';import{useCookies}from'react-cookie';import{useTranslation}from'react-i18next';import{useNavigate}from'react-router-dom';import ErrorMessageSnackBar from'../../components/errorMessageSnackBar';import Title from'../../components/Title';import{isValidBearerToken}from'../../components/utils';import RegisterModelComponent from'./registerModel';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegisterModel=function RegisterModel(){var _React$useState=React.useState(sessionStorage.getItem('registerModelType')?sessionStorage.getItem('registerModelType'):'/register_model/llm'),_React$useState2=_slicedToArray(_React$useState,2),tabValue=_React$useState2[0],setTabValue=_React$useState2[1];var _useCookies=useCookies(['token']),_useCookies2=_slicedToArray(_useCookies,1),cookie=_useCookies2[0];var navigate=useNavigate();var _useTranslation=useTranslation(),t=_useTranslation.t;useEffect(function(){if(sessionStorage.getItem('auth')==='true'&&!isValidBearerToken(sessionStorage.getItem('token'))&&!isValidBearerToken(cookie.token)){navigate('/login',{replace:true});}},[cookie.token]);var handleTabChange=function handleTabChange(_,newValue){setTabValue(newValue);navigate(newValue);sessionStorage.setItem('registerModelType',newValue);};return/*#__PURE__*/_jsxs(Box,{m:\"20px\",style:{overflow:'hidden'},children:[/*#__PURE__*/_jsx(Title,{title:t('menu.registerModel')}),/*#__PURE__*/_jsx(ErrorMessageSnackBar,{}),/*#__PURE__*/_jsxs(TabContext,{value:tabValue,children:[/*#__PURE__*/_jsx(Box,{sx:{borderBottom:1,borderColor:'divider'},children:/*#__PURE__*/_jsxs(TabList,{value:tabValue,onChange:handleTabChange,\"aria-label\":\"tabs\",children:[/*#__PURE__*/_jsx(Tab,{label:t('model.languageModels'),value:\"/register_model/llm\"}),/*#__PURE__*/_jsx(Tab,{label:t('model.embeddingModels'),value:\"/register_model/embedding\"}),/*#__PURE__*/_jsx(Tab,{label:t('model.rerankModels'),value:\"/register_model/rerank\"}),/*#__PURE__*/_jsx(Tab,{label:t('model.imageModels'),value:\"/register_model/image\"}),/*#__PURE__*/_jsx(Tab,{label:t('model.audioModels'),value:\"/register_model/audio\"}),/*#__PURE__*/_jsx(Tab,{label:t('model.flexibleModels'),value:\"/register_model/flexible\"})]})}),/*#__PURE__*/_jsx(TabPanel,{value:\"/register_model/llm\",sx:{padding:0},children:/*#__PURE__*/_jsx(RegisterModelComponent,{modelType:\"LLM\",customData:{version:2,model_name:'custom-llm',model_description:'This is a custom model description.',context_length:2048,model_lang:['en'],model_ability:['generate'],model_specs:[{model_uri:'/path/to/llama-1',model_size_in_billions:7,model_format:'pytorch',quantization:'none'}],model_family:'your_custom_model',virtualenv:{packages:[]}}})}),/*#__PURE__*/_jsx(TabPanel,{value:\"/register_model/embedding\",sx:{padding:0},children:/*#__PURE__*/_jsx(RegisterModelComponent,{modelType:\"embedding\",customData:{version:2,model_name:'custom-embedding',dimensions:768,max_tokens:512,language:['en'],model_specs:[{model_uri:'/path/to/embedding-1',model_format:'pytorch',quantization:'none'}],virtualenv:{packages:[]}}})}),/*#__PURE__*/_jsx(TabPanel,{value:\"/register_model/rerank\",sx:{padding:0},children:/*#__PURE__*/_jsx(RegisterModelComponent,{modelType:\"rerank\",customData:{version:2,model_name:'custom-rerank',language:['en'],max_tokens:512,model_specs:[{model_uri:'/path/to/rerank-1',model_format:'pytorch',quantization:'none'}],virtualenv:{packages:[]}}})}),/*#__PURE__*/_jsx(TabPanel,{value:\"/register_model/image\",sx:{padding:0},children:/*#__PURE__*/_jsx(RegisterModelComponent,{modelType:\"image\",customData:{version:2,model_name:'custom-image',model_uri:'/path/to/image-model',model_ability:[],model_family:'stable_diffusion',controlnet:[],virtualenv:{packages:[]}}})}),/*#__PURE__*/_jsx(TabPanel,{value:\"/register_model/audio\",sx:{padding:0},children:/*#__PURE__*/_jsx(RegisterModelComponent,{modelType:\"audio\",customData:{version:2,model_name:'custom-audio',model_uri:'/path/to/audio-model',multilingual:false,model_family:'whisper',model_ability:['text2audio'],virtualenv:{packages:[]}}})}),/*#__PURE__*/_jsx(TabPanel,{value:\"/register_model/flexible\",sx:{padding:0},children:/*#__PURE__*/_jsx(RegisterModelComponent,{modelType:\"flexible\",customData:{version:2,model_name:'flexible-model',model_description:'This is a model description.',model_uri:'/path/to/model',launcher:'xinference.model.flexible.launchers.transformers',launcher_args:'{}',virtualenv:{packages:[]}}})})]})]});};export default RegisterModel;","map":{"version":3,"names":["TabContext","TabList","TabPanel","Box","Tab","React","useEffect","useCookies","useTranslation","useNavigate","ErrorMessageSnackBar","Title","isValidBearerToken","RegisterModelComponent","jsx","_jsx","jsxs","_jsxs","RegisterModel","_React$useState","useState","sessionStorage","getItem","_React$useState2","_slicedToArray","tabValue","setTabValue","_useCookies","_useCookies2","cookie","navigate","_useTranslation","t","token","replace","handleTabChange","_","newValue","setItem","m","style","overflow","children","title","value","sx","borderBottom","borderColor","onChange","label","padding","modelType","customData","version","model_name","model_description","context_length","model_lang","model_ability","model_specs","model_uri","model_size_in_billions","model_format","quantization","model_family","virtualenv","packages","dimensions","max_tokens","language","controlnet","multilingual","launcher","launcher_args"],"sources":["/home/runner/work/inference/inference/xinference/ui/web/ui/src/scenes/register_model/index.js"],"sourcesContent":["import { TabContext, TabList, TabPanel } from '@mui/lab'\nimport { Box, Tab } from '@mui/material'\nimport React, { useEffect } from 'react'\nimport { useCookies } from 'react-cookie'\nimport { useTranslation } from 'react-i18next'\nimport { useNavigate } from 'react-router-dom'\n\nimport ErrorMessageSnackBar from '../../components/errorMessageSnackBar'\nimport Title from '../../components/Title'\nimport { isValidBearerToken } from '../../components/utils'\nimport RegisterModelComponent from './registerModel'\n\nconst RegisterModel = () => {\n  const [tabValue, setTabValue] = React.useState(\n    sessionStorage.getItem('registerModelType')\n      ? sessionStorage.getItem('registerModelType')\n      : '/register_model/llm'\n  )\n  const [cookie] = useCookies(['token'])\n  const navigate = useNavigate()\n  const { t } = useTranslation()\n\n  useEffect(() => {\n    if (\n      sessionStorage.getItem('auth') === 'true' &&\n      !isValidBearerToken(sessionStorage.getItem('token')) &&\n      !isValidBearerToken(cookie.token)\n    ) {\n      navigate('/login', { replace: true })\n    }\n  }, [cookie.token])\n\n  const handleTabChange = (_, newValue) => {\n    setTabValue(newValue)\n    navigate(newValue)\n    sessionStorage.setItem('registerModelType', newValue)\n  }\n\n  return (\n    <Box m=\"20px\" style={{ overflow: 'hidden' }}>\n      <Title title={t('menu.registerModel')} />\n      <ErrorMessageSnackBar />\n      <TabContext value={tabValue}>\n        <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n          <TabList\n            value={tabValue}\n            onChange={handleTabChange}\n            aria-label=\"tabs\"\n          >\n            <Tab\n              label={t('model.languageModels')}\n              value=\"/register_model/llm\"\n            />\n            <Tab\n              label={t('model.embeddingModels')}\n              value=\"/register_model/embedding\"\n            />\n            <Tab\n              label={t('model.rerankModels')}\n              value=\"/register_model/rerank\"\n            />\n            <Tab label={t('model.imageModels')} value=\"/register_model/image\" />\n            <Tab label={t('model.audioModels')} value=\"/register_model/audio\" />\n            <Tab\n              label={t('model.flexibleModels')}\n              value=\"/register_model/flexible\"\n            />\n          </TabList>\n        </Box>\n        <TabPanel value=\"/register_model/llm\" sx={{ padding: 0 }}>\n          <RegisterModelComponent\n            modelType=\"LLM\"\n            customData={{\n              version: 2,\n              model_name: 'custom-llm',\n              model_description: 'This is a custom model description.',\n              context_length: 2048,\n              model_lang: ['en'],\n              model_ability: ['generate'],\n              model_specs: [\n                {\n                  model_uri: '/path/to/llama-1',\n                  model_size_in_billions: 7,\n                  model_format: 'pytorch',\n                  quantization: 'none',\n                },\n              ],\n              model_family: 'your_custom_model',\n              virtualenv: {\n                packages: [],\n              },\n            }}\n          />\n        </TabPanel>\n        <TabPanel value=\"/register_model/embedding\" sx={{ padding: 0 }}>\n          <RegisterModelComponent\n            modelType=\"embedding\"\n            customData={{\n              version: 2,\n              model_name: 'custom-embedding',\n              dimensions: 768,\n              max_tokens: 512,\n              language: ['en'],\n              model_specs: [\n                {\n                  model_uri: '/path/to/embedding-1',\n                  model_format: 'pytorch',\n                  quantization: 'none',\n                },\n              ],\n              virtualenv: {\n                packages: [],\n              },\n            }}\n          />\n        </TabPanel>\n        <TabPanel value=\"/register_model/rerank\" sx={{ padding: 0 }}>\n          <RegisterModelComponent\n            modelType=\"rerank\"\n            customData={{\n              version: 2,\n              model_name: 'custom-rerank',\n              language: ['en'],\n              max_tokens: 512,\n              model_specs: [\n                {\n                  model_uri: '/path/to/rerank-1',\n                  model_format: 'pytorch',\n                  quantization: 'none',\n                },\n              ],\n              virtualenv: {\n                packages: [],\n              },\n            }}\n          />\n        </TabPanel>\n        <TabPanel value=\"/register_model/image\" sx={{ padding: 0 }}>\n          <RegisterModelComponent\n            modelType=\"image\"\n            customData={{\n              version: 2,\n              model_name: 'custom-image',\n              model_uri: '/path/to/image-model',\n              model_ability: [],\n              model_family: 'stable_diffusion',\n              controlnet: [],\n              virtualenv: {\n                packages: [],\n              },\n            }}\n          />\n        </TabPanel>\n        <TabPanel value=\"/register_model/audio\" sx={{ padding: 0 }}>\n          <RegisterModelComponent\n            modelType=\"audio\"\n            customData={{\n              version: 2,\n              model_name: 'custom-audio',\n              model_uri: '/path/to/audio-model',\n              multilingual: false,\n              model_family: 'whisper',\n              model_ability: ['text2audio'],\n              virtualenv: {\n                packages: [],\n              },\n            }}\n          />\n        </TabPanel>\n        <TabPanel value=\"/register_model/flexible\" sx={{ padding: 0 }}>\n          <RegisterModelComponent\n            modelType=\"flexible\"\n            customData={{\n              version: 2,\n              model_name: 'flexible-model',\n              model_description: 'This is a model description.',\n              model_uri: '/path/to/model',\n              launcher: 'xinference.model.flexible.launchers.transformers',\n              launcher_args: '{}',\n              virtualenv: {\n                packages: [],\n              },\n            }}\n          />\n        </TabPanel>\n      </TabContext>\n    </Box>\n  )\n}\n\nexport default RegisterModel\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}