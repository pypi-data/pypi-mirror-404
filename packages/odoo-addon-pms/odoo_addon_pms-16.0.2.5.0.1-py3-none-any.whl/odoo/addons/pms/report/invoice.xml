<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template
        id="report_invoice_document"
        inherit_id="account.report_invoice_document"
        priority="99999"
    >
        <xpath expr="//div[@name='address_same_as_shipping']" position="inside">
            <!-- use room access address if only one room in journal and independent address, else, property address -->
            <t
                t-set="room_single"
                t-value="(o.journal_id.room_filter_ids and len(o.journal_id.room_filter_ids) == 1) and o.journal_id.room_filter_ids[:1] or False"
            />
            <t
                t-set="use_room_address"
                t-value="room_single and room_single.address_is_independent"
            />
            <t t-set="information_block">
                <div name="pms_property_address_block">
                    <!-- special case: single room in journal + independent address -->
                    <t t-if="use_room_address">
                        <div
                            t-field="room_single.address_id"
                            t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: True}"
                        />
                    </t>
                    <!-- Normal case: property address -->
                    <t t-elif="o.pms_property_id">
                        <div
                            t-field="o.pms_property_id.partner_id"
                            t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: True}"
                        />
                    </t>
                </div>
            </t>
        </xpath>
        <xpath expr="//div[@name='no_shipping']" position="inside">
            <t t-if="o.pms_property_id">
                <t t-set="information_block">
                    <div name="pms_property_address_block">
                        <div
                            t-field="o.pms_property_id.partner_id"
                            t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: True}"
                        />
                    </div>
                </t>
            </t>
        </xpath>
<!-- fixme Dangerous use of "replace". Only replace as a last resort.
     Try position="attributes", position="move" or t-if="False" first - [xml-dangerous-qweb-replace-low-priority]
-->
        <xpath expr="//div[hasclass('page')]//h2" position="replace">
            <h2>
                <t t-if="not (env.context.get('proforma', False) or is_pro_forma)">
                    <span
                        t-if="o.move_type == 'out_invoice' and o.is_simplified_invoice and o.state == 'posted'"
                    >Simplified Invoice</span>
                    <span
                        t-if="o.move_type == 'out_invoice' and o.is_simplified_invoice and o.state == 'draft'"
                    >Draft Simplified Invoice</span>
                    <span
                        t-if="o.move_type == 'out_invoice' and o.is_simplified_invoice and o.state == 'cancel'"
                    >Cancelled Simplified Invoice</span>
                    <span
                        t-if="o.move_type == 'out_invoice' and not o.is_simplified_invoice and o.state == 'posted'"
                    >Invoice</span>
                    <span
                        t-if="o.move_type == 'out_invoice' and not o.is_simplified_invoice and o.state == 'draft'"
                    >Draft Invoice</span>
                    <span
                        t-if="o.move_type == 'out_invoice' and not o.is_simplified_invoice and o.state == 'cancel'"
                    >Cancelled Invoice</span>
                    <span t-if="o.move_type == 'out_refund'">Credit Note</span>
                    <span t-if="o.move_type == 'in_refund'">Vendor Credit Note</span>
                    <span t-if="o.move_type == 'in_invoice'">Vendor Bill</span>
                    <span t-if="o.name != '/'" t-field="o.name" />
                </t>
                <t t-if="env.context.get('proforma', False) or is_pro_forma">
                    <span>Pro-Forma Invoice # </span>
                </t>
            </h2>
        </xpath>
    </template>
</odoo>
