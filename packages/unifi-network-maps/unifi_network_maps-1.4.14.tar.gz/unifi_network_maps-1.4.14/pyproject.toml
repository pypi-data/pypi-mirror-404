[build-system]
requires = ["setuptools==80.10.2", "wheel==0.46.3"]
build-backend = "setuptools.build_meta"

[project]
name = "unifi-network-maps"
version = "1.4.14"
description = "Dynamic UniFi -> network maps in mermaid or svg"
readme = "README.md"
requires-python = ">=3.12"
license = "MIT"
license-files = ["LICENSE"]
authors = [{ name = "Merlijn" }]
keywords = ["unifi", "mermaid", "network", "topology", "diagram", "svg"]
classifiers = [
  "Development Status :: 3 - Alpha",
  "Intended Audience :: System Administrators",
  "Operating System :: OS Independent",
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
  "Topic :: Documentation",
  "Topic :: System :: Networking",
]
dependencies = [
  "unifi-controller-api==0.3.2",
  "python-dotenv==1.2.1",
  "PyYAML==6.0.3",
  "Jinja2==3.1.6",
]

[project.urls]
Homepage = "https://github.com/merlijntishauser/unifi-network-maps"
Repository = "https://github.com/merlijntishauser/unifi-network-maps"
Issues = "https://github.com/merlijntishauser/unifi-network-maps/issues"
Changelog = "https://github.com/merlijntishauser/unifi-network-maps/blob/main/CHANGELOG.md"

[project.optional-dependencies]
dev = [
  "Faker==40.1.2",
  "behave==1.3.3",
  "pre-commit==4.5.1",
  "pytest==9.0.2",
  "pytest-cov==7.0.0",
  "pyright==1.1.408",
  "ruff==0.14.14"
]

[project.scripts]
unifi-network-maps = "unifi_network_maps.cli:main"

[tool.ruff]
line-length = 100
target-version = "py313"

[tool.ruff.lint]
select = ["C90", "E", "F", "I", "UP"]
ignore = ["E501"]

[tool.ruff.lint.mccabe]
max-complexity = 10

[tool.ruff.format]
line-ending = "lf"

[tool.pyright]
pythonVersion = "3.13"
typeCheckingMode = "basic"
include = ["src", "tests"]
venvPath = "."
venv = ".venv"

[tool.pytest.ini_options]
testpaths = ["tests"]
norecursedirs = ["src/unifi_network_maps/assets"]
# Remove --cov from here so it doesn't conflict with PyCharm's runner
addopts = "-ra"

[tool.coverage.run]
branch = true
source = ["unifi_network_maps"]

[tool.coverage.paths]
source = [
    "src/unifi_network_maps",
    "*/site-packages/unifi_network_maps",
]

[tool.coverage.report]
show_missing = true

[tool.setuptools]
package-dir = {"" = "src"}

[tool.setuptools.package-data]
"unifi_network_maps" = [
  "assets/icons/*.svg",
  "assets/icons/isometric/*.svg",
  "assets/icons/isometric/ISOPACKS_LICENSE",
  "render/templates/*.j2",
]

[tool.setuptools.packages.find]
where = ["src"]
